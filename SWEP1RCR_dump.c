// Use macros from Helper-macros
// #include <stdint.h>
#include "typedefs.h"

void FUN_00403e10(undefined_8 *param_1)

{
    undefined_32 uVar1;
    undefined_32 *puVar2;
    int iVar3;

    if (DAT_004b2910 != 0)
    {
        iVar3 = 6;
        *param_1 = 0;
        *(undefined_32 *)(param_1 + 0x40) = 0;
        *(undefined_32 *)(param_1 + 0x44) = 0;
        puVar2 = (undefined_32 *)(param_1 + 0x198);
        do
        {
            puVar2[1] = -1;
            *(undefined_8 *)(puVar2 + 2) = 0;
            puVar2[8] = -1;
            puVar2[-0x54] = 0;
            puVar2[-0x53] = 0;
            *puVar2 = 0;
            FUN_004046e0(puVar2 + -0x54);
            puVar2 = puVar2 + 0x5d;
            iVar3 = iVar3 + -1;
        } while (iVar3 != 0);
        DAT_004d55d0 = (&DAT_00eca0e4)[DAT_004d6b3c * 0x9d];
        if ((&DAT_00ec9ec5)[DAT_004d6b3c * 0x274] == '\x06')
        {
            DAT_004d55d4 = 1;
        }
        else
        {
            uVar1 = FUN_0049edd0(&DAT_00ec9fcc + DAT_004d6b3c * 0x274, &DAT_004b2638);
            iVar3 = _strstr(uVar1);
            if (iVar3 != 0)
            {
                DAT_004d55d4 = 1;
            }
        }
        if (((&DAT_00eca0ec)[DAT_004d6b3c * 0x9d] & 0x100) == 0)
        {
            DAT_004b2914 = 0;
            DAT_004b2910 = 0;
        }
    }
    return;
}

void FUN_00403f00(int param_1)

{
    if (DAT_004b2910 != 0)
    {
        FUN_00404040(param_1);
        if (*(int *)(param_1 + 0x40) != 0)
        {
            _IFReleaseProject_4(*(int *)(param_1 + 0x40));
        }
        FUN_00403e10(param_1);
    }
    return;
}

undefined_32 FUN_00403f30(int param_1, undefined_32 param_2, undefined_32 *param_3, int param_4)

{
    char cVar1;
    int iVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    undefined_32 *puVar6;
    undefined_32 *puVar7;
    char *pcVar8;
    char *pcVar9;
    undefined_32 *puVar10;

    if (DAT_004b2910 == 0)
    {
        return 0;
    }
    iVar2 = _IFLoadProjectFile_8(param_2, DAT_004d55d0);
    *(int *)(param_1 + 0x40) = iVar2;
    if (iVar2 == 0)
    {
        return -1;
    }
    iVar2 = 0;
    puVar6 = (undefined_32 *)(param_1 + 0x1a0);
    do
    {
        iVar3 = 0;
        if (0 < iVar2)
        {
            iVar3 = param_3[-1] + 1;
        }
        puVar6[-1] = iVar3;
        uVar4 = -1;
        pcVar8 = *(char **)(param_4 + iVar3 * 4);
        do
        {
            pcVar9 = pcVar8;
            if (uVar4 == 0)
                break;
            uVar4 = uVar4 - 1;
            pcVar9 = pcVar8 + 1;
            cVar1 = *pcVar8;
            pcVar8 = pcVar9;
        } while (cVar1 != '\0');
        uVar4 = ~uVar4;
        puVar7 = (undefined_32 *)(pcVar9 + -uVar4);
        puVar10 = puVar6;
        QMEMCPY(uVar5, puVar7, puVar10, uVar4 >> 2)
        iVar2 = iVar2 + 1;
        for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1)
        {
            *(undefined_8 *)puVar10 = *(undefined_8 *)puVar7;
            puVar7 = (undefined_32 *)((int)puVar7 + 1);
            puVar10 = (undefined_32 *)((int)puVar10 + 1);
        }
        puVar6[6] = *param_3;
        puVar6 = puVar6 + 0x5d;
        param_3 = param_3 + 1;
        if (5 < iVar2)
        {
            return 6;
        }
    } while (true);
}

int FUN_00403fd0(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    iVar2 = 0;
    if (DAT_004b2910 == 0)
    {
        return 0;
    }
    if ((DAT_004d55d0 != 0) && (*(int *)(param_1 + 0x40) != 0))
    {
        iVar3 = param_1 + 0x48;
        iVar4 = 6;
        do
        {
            iVar1 = FUN_004040a0(iVar3, iVar3 + 0x158, *(undefined_32 *)(param_1 + 0x40));
            if (iVar1 != 0)
            {
                iVar2 = iVar2 + 1;
            }
            iVar3 = iVar3 + 0x174;
            iVar4 = iVar4 + -1;
        } while (iVar4 != 0);
        if (iVar2 != 0)
        {
            return iVar2;
        }
    }
    return -1;
}

int FUN_00404040(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    iVar2 = 0;
    if (DAT_004b2910 == 0)
    {
        return 0;
    }
    if ((DAT_004d55d0 != 0) && (*(int *)(param_1 + 0x40) != 0))
    {
        iVar3 = param_1 + 0x48;
        iVar4 = 6;
        do
        {
            iVar1 = FUN_00404190(iVar3, *(undefined_32 *)(param_1 + 0x40));
            if (iVar1 != 0)
            {
                iVar2 = iVar2 + 1;
            }
            iVar3 = iVar3 + 0x174;
            iVar4 = iVar4 + -1;
        } while (iVar4 != 0);
        return iVar2;
    }
    return -1;
}

undefined_32 FUN_004040a0(int *param_1, undefined_32 param_2, undefined_32 param_3)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    if ((DAT_004b2910 != 0) && (param_1 != NULL))
    {
        if (param_1[1] != 0)
        {
            FUN_00404190(param_1, param_3);
        }
        iVar2 = _IFCreateEffects_12(param_3, param_2, param_1);
        param_1[1] = iVar2;
        if (iVar2 != 0)
        {
            iVar2 = 0;
            if (0 < *param_1)
            {
                do
                {
                    FUN_004046e0(param_1);
                    piVar1 = *(int **)(param_1[1] + iVar2 * 4);
                    iVar3 = (**(code **)(*piVar1 + 0x14))(piVar1, param_1 + 2, 0x1ff);
                    if (iVar3 == -0x7ffbfdfe)
                    {
                        iVar3 = param_1[0xd];
                        FUN_004046e0(param_1);
                        // PlatformAbstraction->allocator_large
                        iVar4 = (**(code **)(DAT_00ecc420 + 0x20))(iVar3);
                        param_1[0x54] = iVar4;
                        param_1[0xe] = iVar4;
                        param_1[0xd] = iVar3;
                        piVar1 = *(int **)(param_1[1] + iVar2 * 4);
                        iVar3 = (**(code **)(*piVar1 + 0x14))(piVar1, param_1 + 2, 0x1ff);
                    }
                    if (iVar3 != 0)
                    {
                        _IFReleaseEffects_8(param_3, param_1[1]);
                        param_1[1] = 0;
                        return 0;
                    }
                    iVar2 = iVar2 + 1;
                } while (iVar2 < *param_1);
            }
            return 1;
        }
    }
    return 0;
}

int FUN_00404190(int param_1, undefined_32 param_2)

{
    int iVar1;

    if (DAT_004b2910 == 0)
    {
        return 0;
    }
    iVar1 = *(int *)(param_1 + 4);
    if (iVar1 == 0)
    {
        return iVar1;
    }
    iVar1 = _IFReleaseEffects_8(param_2, iVar1);
    *(undefined_32 *)(param_1 + 4) = 0;
    return iVar1;
}

undefined_32 FUN_004041c0(int *param_1, int param_2)

{
    int *piVar1;
    int iVar2;
    int iVar3;

    if (((DAT_004b2910 != 0) && (DAT_004d55d0 != 0)) && (param_1[1] != 0))
    {
        if ((param_2 == 0) && (iVar2 = FUN_00404280(param_1), iVar2 != 0))
        {
            return 0;
        }
        iVar2 = 0;
        if (0 < *param_1)
        {
            do
            {
                piVar1 = *(int **)(param_1[1] + iVar2 * 4);
                iVar3 = (**(code **)(*piVar1 + 0x1c))(piVar1, 1, 0);
                if (iVar3 < 0)
                {
                    return -1;
                }
                iVar2 = iVar2 + 1;
            } while (iVar2 < *param_1);
        }
        return 1;
    }
    return -1;
}

undefined_32 FUN_00404230(int *param_1)

{
    int *piVar1;
    int iVar2;
    int iVar3;

    if (((DAT_004b2910 != 0) && (param_1 != NULL)) && (param_1[1] != 0))
    {
        iVar3 = 0;
        if (0 < *param_1)
        {
            do
            {
                piVar1 = *(int **)(param_1[1] + iVar3 * 4);
                iVar2 = (**(code **)(*piVar1 + 0x20))(piVar1);
                if (iVar2 < 0)
                {
                    return 0;
                }
                iVar3 = iVar3 + 1;
            } while (iVar3 < *param_1);
        }
        return 1;
    }
    return 0;
}

undefined_32 FUN_00404280(int *param_1)

{
    int *piVar1;
    int *piVar2;
    int iVar3;
    int iVar4;

    piVar2 = param_1;
    if ((((DAT_004b2910 != 0) && (DAT_004d55d0 != 0)) && (param_1[1] != 0)) && (iVar4 = 0, 0 < *param_1))
    {
        while (piVar1 = *(int **)(piVar2[1] + iVar4 * 4), iVar3 = (**(code **)(*piVar1 + 0x24))(piVar1, &param_1),
               -1 < iVar3)
        {
            if (((uint)param_1 & 1) != 0)
            {
                return 1;
            }
            iVar4 = iVar4 + 1;
            if (*piVar2 <= iVar4)
            {
                return 0;
            }
        }
    }
    return 0;
}

int FUN_004042f0(int param_1)

{
    if (DAT_004b2910 == 0)
    {
        return -1;
    }
    if (*(int *)(param_1 + 4) == 0)
    {
        return -1;
    }
    return **(int **)(param_1 + 0x2c) / 100;
}

undefined_32 FUN_00404330(int *param_1, int param_2, int param_3)

{
    int *piVar1;
    int iVar2;
    int iVar3;

    if ((((DAT_004b2910 != 0) && (param_1[1] != 0)) && (-1 < param_2)) && (param_2 < 0x169))
    {
        iVar2 = FUN_004042f0(param_1);
        if (iVar2 == param_2)
        {
            return 2;
        }
        iVar2 = 0;
        *(int *)param_1[0xb] = param_2 * 100;
        if (0 < *param_1)
        {
            do
            {
                piVar1 = *(int **)(param_1[1] + iVar2 * 4);
                iVar3 = (**(code **)(*piVar1 + 0x18))(piVar1, param_1 + 2,
                                                      (-(uint)(param_3 != 0) & 0xe0000000) + 2.0f | 0x40);
                if (iVar3 < 0)
                {
                    return 0;
                }
                iVar2 = iVar2 + 1;
            } while (iVar2 < *param_1);
        }
        return 1;
    }
    return 0;
}

uint FUN_004043d0(int param_1)

{
    if (DAT_004b2910 == 0)
    {
        return -1;
    }
    if (*(int *)(param_1 + 4) == 0)
    {
        return -1;
    }
    return *(uint *)(param_1 + 0x18) / 100;
}

undefined_32 FUN_00404400(int *param_1, int param_2, int param_3)

{
    int *piVar1;
    int iVar2;
    int iVar3;

    if ((((DAT_004b2910 != 0) && (param_1[1] != 0)) && (-1 < param_2)) && (param_2 < 0x65))
    {
        iVar2 = FUN_004043d0(param_1);
        if (iVar2 == param_2)
        {
            return 2;
        }
        iVar2 = 0;
        param_1[6] = param_2 * 100;
        if (0 < *param_1)
        {
            do
            {
                piVar1 = *(int **)(param_1[1] + iVar2 * 4);
                iVar3 =
                    (**(code **)(*piVar1 + 0x18))(piVar1, param_1 + 2, (-(uint)(param_3 != 0) & 0xe0000000) + 2.0f | 4);
                if (iVar3 < 0)
                {
                    return 0;
                }
                iVar2 = iVar2 + 1;
            } while (iVar2 < *param_1);
        }
        return 1;
    }
    return 0;
}

uint FUN_004044a0(int param_1)

{
    if (DAT_004b2910 == 0)
    {
        return -1;
    }
    if (*(int *)(param_1 + 4) == 0)
    {
        return -1;
    }
    if (*(uint *)(param_1 + 0x10) == -1)
    {
        return -1;
    }
    return *(uint *)(param_1 + 0x10) / 1000;
}

undefined_32 FUN_004044e0(int *param_1, int param_2, int param_3)

{
    int *piVar1;
    int iVar2;
    int iVar3;

    if (param_2 == -1)
    {
        iVar3 = -1;
    }
    else
    {
        iVar3 = param_2 * 1000;
    }
    if (DAT_004b2910 == 0)
    {
        return 0;
    }
    if (param_1[1] == 0)
    {
        return 0;
    }
    iVar2 = FUN_004044a0(param_1);
    if (iVar2 == param_2)
    {
        return 2;
    }
    param_1[4] = iVar3;
    iVar3 = 0;
    if (*param_1 < 1)
    {
        return 1;
    }
    do
    {
        piVar1 = *(int **)(param_1[1] + iVar3 * 4);
        iVar2 = (**(code **)(*piVar1 + 0x18))(piVar1, param_1 + 2, (-(uint)(param_3 != 0) & 0xe0000000) + 2.0f | 1);
        if (iVar2 < 0)
        {
            return 0;
        }
        iVar3 = iVar3 + 1;
    } while (iVar3 < *param_1);
    return 1;
}

bool FUN_00404590(int param_1, uint param_2, undefined_32 *param_3, int param_4)

{
    undefined_32 *puVar1;
    int iVar2;
    uint uVar3;

    if (DAT_004b2910 == 0)
    {
        return false;
    }
    if (*(int *)(param_1 + 4) == 0)
    {
        return false;
    }
    // PlatformAbstraction->allocator_free
    (**(code **)(DAT_00ecc420 + 0x24))(*(undefined_32 *)(param_1 + 0x150));
    // PlatformAbstraction->allocator_large
    puVar1 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(param_2);
    *(undefined_32 **)(param_1 + 0x150) = puVar1;
    QMEMCPY(uVar3, param_3, puVar1, param_2 >> 2)
    for (uVar3 = param_2 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
    {
        *(undefined_8 *)puVar1 = *(undefined_8 *)param_3;
        param_3 = (undefined_32 *)((int)param_3 + 1);
        puVar1 = (undefined_32 *)((int)puVar1 + 1);
    }
    *(uint *)(param_1 + 0x34) = param_2;
    *(undefined_32 *)(param_1 + 0x38) = *(undefined_32 *)(param_1 + 0x150);
    iVar2 = (**(code **)(***(int ***)(param_1 + 4) + 0x18))(**(int ***)(param_1 + 4), param_1 + 8,
                                                            (-(uint)(param_4 != 0) & 0xe0000000) + 2.0f | 0x100);
    return -1 < iVar2;
}

int **FUN_00404640(int param_1, undefined_32 param_2)

{
    int **ppiVar1;
    int iVar2;

    if (DAT_004b2910 == 0)
    {
        return NULL;
    }
    ppiVar1 = *(int ***)(param_1 + 4);
    if (ppiVar1 == NULL)
    {
        return ppiVar1;
    }
    iVar2 = (**(code **)(**ppiVar1 + 0x10))(*ppiVar1, param_2);
    return (int **)(uint)(-1 < iVar2);
}

undefined_32 FUN_00404670(undefined_32 param_1)

{
    int iVar1;
    undefined_8 local_134[16];
    undefined_32 local_124[2];
    undefined_8 uStack_11c;
    undefined_8 *puStack_4;

    iVar1 = FUN_00404640(param_1, local_134);
    if (iVar1 == 0)
    {
        return 0;
    }
    local_124[0] = 0x124;
    iVar1 = (**(code **)(*DAT_004d55d0 + 0x50))(DAT_004d55d0, local_124, local_134);
    if (iVar1 < 0)
    {
        return 0;
    }
    *puStack_4 = uStack_11c;
    return 1;
}

void FUN_004046e0(int param_1)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = (undefined_32 *)(param_1 + 8);
    MEMSET(iVar1, puVar2, 0, 0xd)
    *(int *)(param_1 + 0x2c) = param_1 + 0x3c;
    puVar2 = (undefined_32 *)(param_1 + 0x13c);
    *(int *)(param_1 + 0x28) = param_1 + 0xbc;
    *(undefined_32 *)(param_1 + 8) = 0x34;
    *(undefined_32 *)(param_1 + 0xc) = 0x71;
    *(undefined_32 *)(param_1 + 0x24) = 0x20;
    *(undefined_32 **)(param_1 + 0x30) = puVar2;
    *puVar2 = 0;
    *(undefined_32 *)(param_1 + 0x140) = 0;
    *(undefined_32 *)(param_1 + 0x144) = 0;
    *(undefined_32 *)(param_1 + 0x148) = 0;
    *(undefined_32 *)(param_1 + 0x14c) = 0;
    *puVar2 = 0x14;
    if (*(int *)(param_1 + 0x150) != 0)
    {
        // PlatformAbstraction->allocator_free
        (**(code **)(DAT_00ecc420 + 0x24))(*(int *)(param_1 + 0x150));
        *(undefined_32 *)(param_1 + 0x150) = 0;
    }
    return;
}

void FUN_00404760(undefined_32 param_1)

{
    int iVar1;

    iVar1 = FUN_00486bc0(param_1);
    if (iVar1 == -0x7788ff06)
    {
        _sprintf(s_Unknown_error_004b75f8, s_Not_available___s_004b292c, &DAT_00ecbc20);
        return;
    }
    if (iVar1 != 0)
    {
        _sprintf(s_Unknown_error_004b75f8, s_Did_not_connect___s_004b2918, &DAT_00ecbc20);
    }
    return;
}

undefined_32 FUN_004047b0(int param_1, int param_2)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    int *piVar4;

    iVar3 = *(int *)(param_1 + 0x20) + 4;
    if (param_2 == -1)
    {
        uVar2 = 0;
        if (DAT_004eb3b8 != 0)
        {
            piVar4 = &DAT_00e9f448;
            iVar1 = DAT_004d5e08;
            do
            {
                if (((*(byte *)(piVar4 + -1) & 1) != 0) && (*piVar4 != iVar1))
                {
                    FUN_00486ca0(iVar1, *piVar4, param_1 + 0x24, iVar3, 0);
                    DAT_004d5e10 = DAT_004d5e10 + 1;
                    DAT_004d5e0c = DAT_004d5e0c + iVar3;
                    iVar1 = DAT_004d5e08;
                }
                uVar2 = uVar2 + 1;
                piVar4 = piVar4 + 0x2c;
            } while (uVar2 < DAT_004eb3b8);
            return 1;
        }
    }
    else
    {
        iVar1 = FUN_00486ca0(DAT_004d5e08, param_2, param_1 + 0x24, iVar3, 0);
        if (iVar1 < 0)
        {
            return 0;
        }
        DAT_004d5e10 = DAT_004d5e10 + 1;
        DAT_004d5e0c = DAT_004d5e0c + iVar3;
    }
    return 1;
}

undefined_32 FUN_00404880(int param_1)

{
    int iVar1;
    int iVar2;
    int local_4;

    iVar1 = param_1;
    local_4 = 0x804;
    if (DAT_004d5e00 != 0)
    {
        iVar2 = FUN_00486cd0(&param_1, param_1 + 0x24, &local_4);
        if (iVar2 != -1)
        {
            DAT_004d5e18 = DAT_004d5e18 + 1;
            if (iVar2 == 0)
            {
                DAT_004d5e14 = DAT_004d5e14 + local_4;
                *(int *)(iVar1 + 0x20) = local_4 + -4;
                *(int *)(iVar1 + 0x1c) = param_1;
                return 1;
            }
            if (iVar2 == 2)
            {
                FUN_0041c780(param_1);
            }
            else if (iVar2 == 5)
            {
                if (DAT_004eb1c8 != 0)
                {
                    FUN_0041cbd0(param_1, 1);
                    return 0;
                }
            }
            else if (iVar2 == 8)
            {
                DAT_004eb1c8 = 1;
                DAT_00ec7620 = DAT_004d5e08;
                FUN_0041ca50(DAT_004d5e08);
                return 0;
            }
        }
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

int FUN_00404960(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;

    iVar1 = FUN_004870d0(param_1, param_3);
    if (iVar1 == 0)
    {
        DAT_004d5e00 = 1;
        DAT_004d5e04 = iVar1;
        DAT_004d5e08 = FUN_004872e0(param_2);
        if (DAT_004d5e08 == 0)
        {
            if (DAT_004d5e00 != 0)
            {
                FUN_00487180();
                DAT_004d5e00 = 0;
            }
            return -0x7fffbffb;
        }
        _wcsncpy(&DAT_00e9f380, param_2, 0x1f);
        _DAT_00e9f3be = 0;
        iVar1 = 0;
    }
    return iVar1;
}

void FUN_004049e0(void)

{
    if (DAT_004d5e08 != 0)
    {
        FUN_00487320(DAT_004d5e08);
    }
    FUN_00487180();
    DAT_004d5e00 = 0;
    DAT_004d5e08 = 0;
    DAT_004eb3b4 = 0;
    return;
}

int FUN_00404a20(int param_1)

{
    int iVar1;

    iVar1 = FUN_00486d40(param_1);
    if (iVar1 == 0)
    {
        DAT_004d5e08 = FUN_004872e0(param_1 + 0x18);
        if (DAT_004d5e08 == 0)
        {
            FUN_00487180();
            return -0x7fffbffb;
        }
        DAT_004d5e00 = 1;
        iVar1 = 0;
    }
    return iVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00404b10(void)

{
    int iVar1;
    int iVar2;
    uint uVar3;

    iVar1 = FUN_00485360();
    if (iVar1 != 0)
    {
        return 1;
    }
    iVar1 = FUN_00485570();
    if (iVar1 != 0)
    {
        return 1;
    }
    FUN_00407de0();
    iVar1 = 0;
    DAT_00ec8824 = 0;
    DAT_00ec879c = 0;
    DAT_00ec887c = 0;
    DAT_00ec87a0 = 0;
    do
    {
        iVar2 = FUN_004855f0(iVar1 + DAT_004d6b3c * 6);
        if (iVar2 != 0)
        {
            DAT_00ec887c = DAT_00ec887c | 1 << ((byte)iVar1 & 0x1f);
            DAT_00ec87a0 = DAT_00ec87a0 + 1;
        }
        iVar1 = iVar1 + 1;
    } while (iVar1 < 6);
    if (DAT_00ec87a0 == 0)
    {
        DAT_004b294c = 0;
        DAT_004b2944 = 0;
    }
    else
    {
        DAT_00ec879c = *(undefined_32 *)(&DAT_00eca0f8 + DAT_004d6b3c * 0x274);
        DAT_00ec8824 = *(undefined_32 *)(&DAT_00eca0fc + DAT_004d6b3c * 0x274);
    }
    DAT_00ec8770 = 0;
    DAT_00ec8808 = 0;
    DAT_00ec878c = 0;
    iVar1 = 0;
    do
    {
        iVar2 = FUN_004855f0(iVar1 + 0x30);
        if (iVar2 != 0)
        {
            DAT_00ec8808 = DAT_00ec8808 | 1 << ((byte)iVar1 & 0x1f);
            DAT_00ec878c = DAT_00ec878c + 1;
        }
        iVar1 = iVar1 + 1;
    } while (iVar1 < 3);
    if (DAT_00ec878c == 0)
    {
        DAT_004b2950 = 0;
        DAT_004d6b38 = 0;
    }
    else
    {
        DAT_00ec8770 = DAT_00ecb498;
    }
    InitializeCriticalSection((LPCRITICAL_SECTION)&DAT_004d5e68);
    _DAT_00ec8810 = 0;
    DAT_004d5e60 = 0;
    _DAT_00ec8814 = 0;
    DAT_004d6b54 = 1;
    _DAT_00ec8818 = 0;
    _DAT_004d6300 = 0;
    _DAT_00ec881c = 0;
    _DAT_004d6824 = 0;
    DAT_00ec881e = 0;
    _DAT_004d6304 = 1;
    _DAT_004d5fb8 = 1;
    DAT_004d6308 = 0;
    FUN_00407800(-1);
    FUN_0040a120(0);
    FUN_00409d70(0);
    FUN_00409ee0(0x11, -1, -1, -1, 0);
    iVar1 = FUN_0040ae40(s_current_004b2640);
    if (iVar1 < 0)
    {
        FUN_0040ab60();
        FUN_0040ab80(s_current_004b2640);
    }
    iVar1 = FUN_00406470(-1, &DAT_004d55cc, 1);
    if (iVar1 < 0)
    {
        FUN_00405ea0(0);
        FUN_00405ea0(1);
        FUN_00405ea0(2);
    }
    if (DAT_004d55d4 != 0)
    {
        FUN_00406470(0, &DAT_004b2638, 1);
        DAT_004b297c = 0;
        DAT_00ec876c = 0;
    }
    uVar3 = FUN_00406470(-1, s_current_004b2640, 0);
    if (0x7fffffff < uVar3)
    {
        FUN_00406080(s_current_004b2640);
    }
    FUN_00407630(0);
    FUN_00407630(1);
    return 0;
}

undefined_32 FUN_00404da0(void)

{
    FUN_0040a120(0);
    FUN_00409d70(-1);
    FUN_004855a0();
    FUN_00485460();
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00404dd0(void)

{
    byte bVar1;
    float fVar2;
    ulonglong uVar3;
    bool bVar4;
    undefined_8 uVar5;
    short sVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    uint uVar11;
    int iVar12;
    char cVar13;
    int *piVar14;
    undefined_32 *puVar15;
    float10 fVar16;
    float10 fVar17;
    float10 fVar18;
    float10 fVar19;
    int local_c;
    uint uStack_4;

    FUN_00485630();
    uVar11 = DAT_004b38ac;
    puVar15 = &DAT_004d5e80;
    MEMSET(uVar10, puVar15, 0, DAT_004b38ac >> 2)
    DAT_00ec8820 = 0;
    for (uVar11 = uVar11 & 3; uVar10 = DAT_004b38b0, uVar11 != 0; uVar11 = uVar11 - 1)
    {
        *(undefined_8 *)puVar15 = 0;
        puVar15 = (undefined_32 *)((int)puVar15 + 1);
    }
    puVar15 = &DAT_004d5e30;
    MEMSET(uVar11, puVar15, 0, DAT_004b38b0 >> 2)
    for (uVar10 = uVar10 & 3; uVar10 != 0; uVar10 = uVar10 - 1)
    {
        *(undefined_8 *)puVar15 = 0;
        puVar15 = (undefined_32 *)((int)puVar15 + 1);
    }
    if ((DAT_004b2944 == 0) && (DAT_004d6b34 == 0))
    {
        FUN_00405cf0(0);
    }
    else
    {
        FUN_00426910(0, -1);
        if (DAT_004d6b34 != 0)
        {
            _DAT_004d62d0 = DAT_00ec87c0;
            _DAT_004d62d4 = DAT_00ec87c4;
            _DAT_004d62d8 = _DAT_00ec87c8;
            _DAT_004d62dc = _DAT_00ec87cc;
            _DAT_004d62e0 = _DAT_00ec87d0;
            _DAT_004d62e4 = _DAT_00ec87d4;
            fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 3);
            if (fVar16 * (float10)_DAT_004b298c < (float10)-1.0)
            {
                fVar16 = (float10)-1.0;
            }
            else
            {
                fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 3);
                if ((float10)1.0 < fVar16 * (float10)_DAT_004b298c)
                {
                    fVar16 = (float10)1.0;
                }
                else
                {
                    fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 3);
                    fVar16 = fVar16 * (float10)_DAT_004b298c;
                }
            }
            _DAT_00ec87cc = (float)fVar16;
            fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 4);
            if (fVar16 * (float10)_DAT_004b2990 < (float10)-1.0)
            {
                fVar16 = (float10)-1.0;
            }
            else
            {
                fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 4);
                if ((float10)1.0 < fVar16 * (float10)_DAT_004b2990)
                {
                    fVar16 = (float10)1.0;
                }
                else
                {
                    fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 4);
                    fVar16 = fVar16 * (float10)_DAT_004b2990;
                }
            }
            _DAT_00ec87d0 = (float)fVar16;
            fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 5);
            if (fVar16 * (float10)_DAT_004b2994 < (float10)-1.0)
            {
                fVar16 = (float10)-1.0;
            }
            else
            {
                fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 5);
                if ((float10)1.0 < fVar16 * (float10)_DAT_004b2994)
                {
                    fVar16 = (float10)1.0;
                }
                else
                {
                    fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 5);
                    fVar16 = fVar16 * (float10)_DAT_004b2994;
                }
            }
            _DAT_00ec87d4 = (float)fVar16;
        }
        fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6);
        if (fVar16 * (float10)DAT_004b2980 < (float10)-1.0)
        {
            fVar16 = (float10)-1.0;
        }
        else
        {
            fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6);
            if ((float10)1.0 < fVar16 * (float10)DAT_004b2980)
            {
                fVar16 = (float10)1.0;
            }
            else
            {
                fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6);
                fVar16 = fVar16 * (float10)DAT_004b2980;
            }
        }
        DAT_00ec87c0 = (float)fVar16;
        fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 1);
        if (fVar16 * (float10)_DAT_004b2984 < (float10)-1.0)
        {
            fVar16 = (float10)-1.0;
        }
        else
        {
            fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 1);
            if ((float10)1.0 < fVar16 * (float10)_DAT_004b2984)
            {
                fVar16 = (float10)1.0;
            }
            else
            {
                fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 1);
                fVar16 = fVar16 * (float10)_DAT_004b2984;
            }
        }
        DAT_00ec87c4 = (float)fVar16;
        fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 2);
        if (fVar16 * (float10)_DAT_004b2988 < (float10)-1.0)
        {
            fVar16 = (float10)-1.0;
        }
        else
        {
            fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 2);
            if ((float10)1.0 < fVar16 * (float10)_DAT_004b2988)
            {
                fVar16 = (float10)1.0;
            }
            else
            {
                fVar16 = (float10)FUN_004856e0(DAT_004d6b3c * 6 + 2);
                fVar16 = fVar16 * (float10)_DAT_004b2988;
            }
        }
        _DAT_00ec87c8 = (float)fVar16;
        puVar15 = &DAT_004d5fc0;
        do
        {
            bVar1 = *(byte *)puVar15;
            iVar12 = puVar15[2];
            iVar7 = puVar15[1];
            if (bVar1 == 0xff)
                break;
            if ((bVar1 & 8) == 0)
            {
                if ((bVar1 & 4) != 0)
                {
                    iVar9 = iVar7 + DAT_004d6b3c * 6;
                    if ((bVar1 & 1) == 0)
                    {
                        if ((bVar1 & 2) != 0)
                        {
                            iVar8 = (-(uint)((&DAT_00ec8880)[iVar7] != 0) & 0xfffffffe) + 1;
                            if ((bVar1 & 0x10) == 0)
                            {
                                if ((bVar1 & 0x20) == 0)
                                {
                                    iVar9 = FUN_00485840(iVar9, 0);
                                    if ((&DAT_00ec8880)[iVar7] == 0)
                                    {
                                        if ((float)iVar9 == 0.0)
                                        {
                                            local_c = 0;
                                        }
                                        else
                                        {
                                        LAB_00405c80:
                                            local_c = 1;
                                        }
                                    }
                                    else
                                    {
                                        if ((float)iVar9 == 0.0)
                                            goto LAB_00405c80;
                                        local_c = 0;
                                    }
                                    fVar2 = (float)local_c;
                                }
                                else
                                {
                                    iVar7 = FUN_00408040(iVar9, iVar8, 0, 0.8f);
                                    fVar2 = (float)iVar7;
                                }
                            }
                            else
                            {
                                iVar7 = FUN_00408040(iVar9, -iVar8, 0, 0.8f);
                                fVar2 = (float)iVar7;
                            }
                            if ((iVar12 == 2) && (fVar2 != 0.0))
                            {
                                DAT_00ec8820 = 1;
                            }
                            if ((fVar2 != 0.0) || (local_c = 0, (float)(&DAT_004d5e80)[iVar12] != 0.0))
                            {
                                local_c = 1;
                            }
                            (&DAT_004d5e80)[iVar12] = (float)local_c;
                        }
                    }
                    else
                    {
                        fVar16 = (float10)FUN_004856e0(iVar9);
                        if (fVar16 * (float10)(&DAT_004b2980)[iVar7] < (float10)-1.0)
                        {
                            fVar16 = (float10)-1.0;
                        }
                        else
                        {
                            fVar16 = (float10)FUN_004856e0(iVar9);
                            if ((float10)1.0 < fVar16 * (float10)(&DAT_004b2980)[iVar7])
                            {
                                fVar16 = (float10)1.0;
                            }
                            else
                            {
                                fVar16 = (float10)FUN_004856e0(iVar9);
                                fVar16 = fVar16 * (float10)(&DAT_004b2980)[iVar7];
                            }
                        }
                        if ((&DAT_00ec8880)[iVar7] == 0)
                        {
                            fVar17 = (float10)1.0;
                        }
                        else
                        {
                            fVar17 = (float10)-1.0;
                        }
                        (&DAT_004d5e30)[iVar12] = (float)(fVar16 * fVar17 + (float10)(float)(&DAT_004d5e30)[iVar12]);
                    }
                }
            }
            else
            {
                iVar7 = (DAT_004d6b3c + 8) * 0x20 + iVar7;
                if ((bVar1 & 1) == 0)
                {
                    if ((bVar1 & 2) != 0)
                    {
                        iVar7 = FUN_00485880(iVar7, 0);
                        if (((float)iVar7 != 0.0) || (local_c = 0, (float)(&DAT_004d5e80)[iVar12] != 0.0))
                        {
                            local_c = 1;
                        }
                        (&DAT_004d5e80)[iVar12] = (float)local_c;
                    }
                }
                else
                {
                    fVar16 = (float10)FUN_004857b0(iVar7);
                    if ((*(byte *)puVar15 & 0x10) == 0)
                    {
                        if ((*(byte *)puVar15 & 0x20) != 0)
                        {
                            (&DAT_004d5e30)[iVar12] = (float)((float10)(float)(&DAT_004d5e30)[iVar12] - fVar16);
                        }
                    }
                    else
                    {
                        (&DAT_004d5e30)[iVar12] = (float)(fVar16 + (float10)(float)(&DAT_004d5e30)[iVar12]);
                    }
                }
            }
            puVar15 = puVar15 + 3;
        } while ((int)puVar15 < 0x4d62c0);
    }
    if ((DAT_004d6b58 == 0) && ((DAT_004d6b38 != 0 || (DAT_004d6b34 != 0))))
    {
        if (DAT_004d6b34 != 0)
        {
            _DAT_004d62e8 = _DAT_00ec87d8;
            _DAT_004d62ec = _DAT_00ec87dc;
            _DAT_004d62f0 = _DAT_00ec87e0;
        }
        uStack_4 = 0xbff00000;
        if (DAT_00ec8790 == 0)
        {
            uStack_4 = 0x3ff00000;
        }
        fVar16 = (float10)FUN_004856e0(0x30);
        uVar3 = (ulonglong)uStack_4;
        uStack_4 = 0xbff00000;
        _DAT_00ec87d8 = (float)(fVar16 * (float10)(double)(uVar3 << 0x20));
        if (DAT_00ec8794 == 0)
        {
            uStack_4 = 0x3ff00000;
        }
        fVar16 = (float10)FUN_004856e0(0x31);
        uVar3 = (ulonglong)uStack_4;
        uStack_4 = 0xbff00000;
        _DAT_00ec87dc = (float)(fVar16 * (float10)(double)(uVar3 << 0x20));
        if (DAT_00ec8798 == 0)
        {
            uStack_4 = 0x3ff00000;
        }
        fVar16 = (float10)FUN_004856e0(0x32);
        _DAT_00ec87e0 = (float)(fVar16 * (float10)(double)((ulonglong)uStack_4 << 0x20));
        if ((DAT_004b2940 == 0) && (DAT_004d6b34 == 0))
        {
            DAT_004d6b68 = 0.0;
            DAT_004d6b64 = 0.0;
            DAT_004d6b60 = 0.0;
        }
        else
        {
            if (_DAT_00ec87d8 != 0.0)
            {
                DAT_004d6b60 = _DAT_00ec87d8 + DAT_004d6b60;
                if (DAT_004d6b60 < -1.0)
                {
                    DAT_004d6b60 = -1.0;
                }
                else if (1.0 < DAT_004d6b60)
                {
                    DAT_004d6b60 = 1.0;
                }
            }
            if (_DAT_00ec87dc != 0.0)
            {
                DAT_004d6b64 = _DAT_00ec87dc + DAT_004d6b64;
                if (DAT_004d6b64 < -1.0)
                {
                    DAT_004d6b64 = -1.0;
                }
                else if (1.0 < DAT_004d6b64)
                {
                    DAT_004d6b64 = 1.0;
                }
            }
            if (_DAT_00ec87e0 != 0.0)
            {
                DAT_004d6b68 = _DAT_00ec87e0 + DAT_004d6b68;
                if (DAT_004d6b68 < -1.0)
                {
                    DAT_004d6b68 = -1.0;
                }
                else if (1.0 < DAT_004d6b68)
                {
                    DAT_004d6b68 = 1.0;
                }
            }
            _DAT_00ec87d8 = DAT_004d6b60;
            _DAT_00ec87dc = DAT_004d6b64;
            _DAT_00ec87e0 = DAT_004d6b68;
        }
        puVar15 = &DAT_004d6518;
        do
        {
            bVar1 = *(byte *)puVar15;
            iVar12 = puVar15[2];
            iVar7 = puVar15[1];
            if (bVar1 == 0xff)
                break;
            if ((bVar1 & 8) == 0)
            {
                if ((bVar1 & 4) != 0)
                {
                    if (((iVar7 == 0) || (iVar7 == 1)) || (iVar7 == 2))
                    {
                        bVar4 = true;
                    }
                    else
                    {
                        bVar4 = false;
                    }
                    if ((bVar1 & 1) == 0)
                    {
                        if ((bVar1 & 2) != 0)
                        {
                            if ((bVar1 & 0x10) == 0)
                            {
                                if ((bVar1 & 0x20) == 0)
                                {
                                    iVar7 = FUN_00408040(iVar7 + 0x30, 0, *(undefined_32 *)(&DAT_00ec87d8 + iVar7 * 4),
                                                         0.5f);
                                    fVar2 = (float)iVar7;
                                }
                                else
                                {
                                    iVar7 = FUN_00408040(-1, -1, *(undefined_32 *)(&DAT_00ec87d8 + iVar7 * 4), 0.8f);
                                    fVar2 = (float)iVar7;
                                }
                            }
                            else
                            {
                                iVar7 = FUN_00408040(-1, 1, *(undefined_32 *)(&DAT_00ec87d8 + iVar7 * 4), 0.8f);
                                fVar2 = (float)iVar7;
                            }
                            if ((iVar12 == 2) && (fVar2 != 0.0))
                            {
                                DAT_00ec8820 = 1;
                            }
                            if ((fVar2 != 0.0) || (local_c = 0, (float)(&DAT_004d5ebc)[iVar12] != 0.0))
                            {
                                local_c = 1;
                            }
                            goto LAB_004055fe;
                        }
                    }
                    else if (bVar4)
                    {
                        (&DAT_004d5e40)[iVar12] =
                            *(float *)(&DAT_00ec87d8 + iVar7 * 4) + (float)(&DAT_004d5e40)[iVar12];
                    }
                    else
                    {
                        fVar16 = (float10)FUN_004856e0(iVar7 + 0x30);
                        if ((&DAT_00ec8790)[iVar7] == 0)
                        {
                            fVar17 = (float10)1.0;
                        }
                        else
                        {
                            fVar17 = (float10)-1.0;
                        }
                        (&DAT_004d5e40)[iVar12] = (float)(fVar16 * fVar17 + (float10)(float)(&DAT_004d5e40)[iVar12]);
                    }
                }
            }
            else
            {
                iVar7 = FUN_00485880(iVar7 + 0x200, 0);
                if (((float)iVar7 != 0.0) || (local_c = 0, (float)(&DAT_004d5ebc)[iVar12] != 0.0))
                {
                    local_c = 1;
                }
            LAB_004055fe:
                (&DAT_004d5ebc)[iVar12] = (float)local_c;
            }
            puVar15 = puVar15 + 3;
        } while ((int)puVar15 < 0x4d6818);
    }
    else
    {
        FUN_00405cf0(1);
    }
    if (DAT_004b2948 == 0)
    {
        FUN_00405cf0(2);
    }
    else
    {
        FUN_00408120();
        fVar16 = (float10)FUN_004857b0(0xcd);
        fVar17 = (float10)FUN_004857b0(0xcb);
        fVar18 = (float10)FUN_004857b0(0x4d);
        fVar19 = (float10)FUN_004857b0(0x4b);
        _DAT_00ec87f0 = (float)(((float10)(float)fVar18 - fVar19) + (float10)(float)((float10)(float)fVar16 - fVar17));
        fVar16 = (float10)FUN_004857b0(200);
        fVar17 = (float10)FUN_004857b0(0xd0);
        fVar18 = (float10)FUN_004857b0(0x48);
        fVar19 = (float10)FUN_004857b0(0x50);
        puVar15 = &DAT_004d6828;
        _DAT_00ec87f4 = (float)(((float10)(float)fVar18 - fVar19) + (float10)(float)((float10)(float)fVar16 - fVar17));
        do
        {
            bVar1 = *(byte *)puVar15;
            iVar12 = puVar15[2];
            if (bVar1 == 0xff)
                break;
            if ((bVar1 & 8) != 0)
            {
                if ((bVar1 & 1) == 0)
                {
                    if ((bVar1 & 2) != 0)
                    {
                        iVar7 = FUN_00485880(puVar15[1], 0);
                        if (((float)iVar7 != 0.0) || (local_c = 0, (float)(&DAT_004d5ef8)[iVar12] != 0.0))
                        {
                            local_c = 1;
                        }
                        (&DAT_004d5ef8)[iVar12] = (float)local_c;
                    }
                }
                else
                {
                    fVar16 = (float10)FUN_004857b0(puVar15[1]);
                    if ((*(byte *)puVar15 & 0x10) == 0)
                    {
                        if ((*(byte *)puVar15 & 0x20) != 0)
                        {
                            (&DAT_004d5e50)[iVar12] = (float)((float10)(float)(&DAT_004d5e50)[iVar12] - fVar16);
                        }
                    }
                    else
                    {
                        (&DAT_004d5e50)[iVar12] = (float)(fVar16 + (float10)(float)(&DAT_004d5e50)[iVar12]);
                    }
                }
            }
            puVar15 = puVar15 + 3;
        } while ((int)puVar15 < 0x4d6b28);
    }
    iVar12 = 0;
    do
    {
        fVar2 = *(float *)((int)&DAT_004d5e30 + iVar12) + *(float *)((int)&DAT_004d5e50 + iVar12)
            + *(float *)((int)&DAT_004d5e40 + iVar12);
        *(float *)((int)&DAT_00ec8830 + iVar12) = fVar2;
        if (fVar2 < -1.0)
        {
            fVar2 = -1.0;
        }
        else if (1.0 < fVar2)
        {
            fVar2 = 1.0;
        }
        *(float *)((int)&DAT_00ec8830 + iVar12) = fVar2;
        iVar7 = DAT_004b2940;
        iVar12 = iVar12 + 4;
    } while (iVar12 < 0x10);
    iVar12 = 0;
    do
    {
        if ((((float)(&DAT_004d5e80)[iVar12] == 0.0) && ((float)(&DAT_004d5ebc)[iVar12] == 0.0))
            && ((float)(&DAT_004d5ef8)[iVar12] == 0.0))
        {
            cVar13 = '\0';
            (&DAT_00ec88a0)[iVar12] = 0;
        }
        else
        {
            cVar13 = '\x01';
            (&DAT_00ec88a0)[iVar12] = (float)(&DAT_00ec88a0)[iVar12] + (float)_DAT_00e22a40;
        }
        if (((&DAT_00ec8810)[iVar12] == '\0') || ((&DAT_004b29d8)[iVar12] == '\0'))
        {
            bVar4 = false;
        }
        else
        {
            bVar4 = true;
        }
        if ((iVar7 == 0) && (iVar12 == 0))
        {
            bVar4 = false;
        }
        if ((bVar4) || (local_c = 1, cVar13 == '\0'))
        {
            local_c = 0;
        }
        (&DAT_00ec8810)[iVar12] = cVar13;
        iVar12 = iVar12 + 1;
        *(float *)(&DAT_00ec883c + iVar12 * 4) = (float)local_c;
    } while (iVar12 < 0xf);
    sVar6 = __ftol();
    DAT_00e98ee2 = __ftol();
    if (sVar6 < -0x100)
    {
        DAT_00e98ee0 = -0x100;
    }
    else
    {
        DAT_00e98ee0 = sVar6;
        if (0x100 < sVar6)
        {
            DAT_00e98ee0 = 0x100;
        }
    }
    if (DAT_00e98ee2 < -0x100)
    {
        DAT_00e98ee2 = -0x100;
    }
    else if (0x100 < DAT_00e98ee2)
    {
        DAT_00e98ee2 = 0x100;
    }
    iVar12 = 0;
    piVar14 = &DAT_004b2998;
    do
    {
        if (*piVar14 < 0)
        {
            (&DAT_00e98ee4)[iVar12] = 0;
        }
        else
        {
            uVar5 = __ftol();
            (&DAT_00e98ee4)[iVar12] = uVar5;
        }
        piVar14 = piVar14 + 1;
        iVar12 = iVar12 + 1;
    } while ((int)piVar14 < 0x4b29d8);
    if (iVar7 == 0)
    {
        iVar12 = FUN_00407ea0(-1);
        iVar7 = FUN_00407f80(-1);
        if ((iVar7 != 0) && (iVar12 != 0))
        {
            iVar12 = 0;
        }
        if ((_DAT_004d6824 == 0) && (iVar12 != 0))
        {
            DAT_004d6b40 = 1;
        }
        else
        {
            DAT_004d6b40 = 0;
        }
        if ((_DAT_004d6300 != 0) || (DAT_004d6b44 = 1, iVar7 == 0))
        {
            DAT_004d6b44 = 0;
        }
        if ((_DAT_004d5fb8 != 0) || (DAT_004d6b4c = 1, iVar12 != 0))
        {
            DAT_004d6b4c = 0;
        }
        if ((_DAT_004d6304 != 0) || (_DAT_004d6b50 = 1, iVar7 != 0))
        {
            _DAT_004d6b50 = 0;
        }
        _DAT_004d5fb8 = (uint)(iVar12 == 0);
        _DAT_004d6304 = (uint)(iVar7 == 0);
        _DAT_004d6300 = iVar7;
        _DAT_004d6824 = iVar12;
        iVar12 = FUN_00407ea0(1);
        if ((DAT_004d6308 != 0) || (DAT_004d6b48 = 1, iVar12 == 0))
        {
            DAT_004d6b48 = 0;
        }
        DAT_004d6308 = iVar12;
        if ((DAT_004d6b44 != 0) && ((iVar12 = FUN_00411810(), iVar12 == 0 || (*(int *)(iVar12 + 0x1c) != 0xb))))
        {
            FUN_00440550(0x4d);
        }
        if ((((DAT_004d6b6c != 0) && (iVar12 = *(int *)(DAT_0050c454 + 8), iVar12 != 3)) && (iVar12 != 8))
            && (iVar12 != 5))
        {
            DAT_004d6b58 = 1;
            return;
        }
        DAT_004d6b58 = 0;
        return;
    }
    DAT_004d6b58 = 0;
    _DAT_004d6300 = 0;
    _DAT_004d6824 = 0;
    DAT_004d6b4c = 0;
    DAT_004d6b44 = 0;
    DAT_004d6b40 = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00405cf0(int param_1)

{
    if (param_1 < 0)
    {
        DAT_00e98ee0 = 0;
        _DAT_00ec8810 = 0;
        DAT_00e98ee2 = 0;
        _DAT_00ec8814 = 0;
        _DAT_00ec8818 = 0;
        _DAT_00ec881c = 0;
        _DAT_00e98ee4 = 0;
        _DAT_00e98ee8 = 0;
        _DAT_00e98eec = 0;
        _DAT_00e98ef0 = 0;
        param_1 = -param_1;
    }
    if (param_1 == 0)
    {
        _DAT_00ec87c8 = 0;
        DAT_00ec87c4 = 0;
        DAT_00ec87c0 = 0;
    }
    else
    {
        if (param_1 == 1)
        {
            _DAT_00ec87e0 = 0;
            _DAT_00ec87dc = 0;
            _DAT_00ec87d8 = 0;
            DAT_004d6b68 = 0;
            DAT_004d6b64 = 0;
            DAT_004d6b60 = 0;
            return;
        }
        if (param_1 == 2)
        {
            _DAT_00ec87f8 = 0;
            _DAT_00ec87f4 = 0;
            _DAT_00ec87f0 = 0;
            return;
        }
    }
    return;
}

uint FUN_00405dd0(int param_1, int param_2)

{
    int iVar1;
    uint uVar2;
    uint uVar3;

    uVar3 = 0;
    if (param_1 == 1)
    {
        uVar2 = 0;
        do
        {
            iVar1 = FUN_00485880(uVar2 + 0x200, 0);
            if (iVar1 != 0)
            {
                if (param_2 == 0)
                {
                    return uVar2;
                }
                uVar3 = uVar3 | 1 << ((byte)uVar2 & 0x1f);
            }
            uVar2 = uVar2 + 1;
        } while ((int)uVar2 < 4);
    }
    else if (param_1 == 0)
    {
        uVar2 = 0;
        do
        {
            iVar1 = FUN_00485880((DAT_004d6b3c + 8) * 0x20 + uVar2, 0);
            if (iVar1 != 0)
            {
                if (param_2 == 0)
                {
                    return uVar2;
                }
                uVar3 = uVar3 | 1 << ((byte)uVar2 & 0x1f);
            }
            uVar2 = uVar2 + 1;
        } while ((int)uVar2 < 0x20);
    }
    else if (param_1 == 2)
    {
        uVar2 = 0;
        do
        {
            iVar1 = FUN_00485880(uVar2, 0);
            if ((iVar1 != 0) && (iVar1 = FUN_00408020(uVar2), iVar1 == 0))
            {
                return uVar2;
            }
            uVar2 = uVar2 + 1;
        } while ((int)uVar2 < 0x100);
    }
    if ((param_2 == 0) || (param_1 == 2))
    {
        uVar3 = 0xffff;
    }
    return uVar3;
}

void FUN_00405ea0(undefined_32 *param_1)

{
    byte bVar1;
    bool bVar2;
    undefined_32 *puVar3;
    int iVar4;
    int iVar5;
    undefined_32 *puVar6;
    undefined_32 *puVar7;
    undefined_32 *puVar8;
    undefined_32 *local_c;
    int local_8;
    uint local_4;

    puVar3 = param_1;
    iVar5 = DAT_00ec8824;
    puVar8 = DAT_00ec879c;
    if (param_1 == NULL)
    {
        param_1 = DAT_00ec879c;
        local_4 = DAT_00ec887c;
        local_c = &DAT_004d5fc0;
        puVar6 = &DAT_004d5fc0;
        MEMSET(iVar4, puVar6, 0, 0xc3)
        local_8 = iVar5;
        DAT_00ec876c = DAT_004b297c;
        puVar6 = &DAT_004b2958;
        puVar7 = &DAT_00ec8880;
        QMEMCPY(iVar4, puVar6, puVar7, 6)
        puVar6 = (undefined_32 *)&DAT_004b2f80;
        if ((iVar5 != 0) && (4 < (int)puVar8))
        {
            param_1 = (undefined_32 *)&DAT_00000004;
        }
    }
    else if (param_1 == (undefined_32 *)0x1)
    {
        local_8 = 0;
        param_1 = DAT_00ec8770;
        local_4 = DAT_00ec8808;
        local_c = &DAT_004d6518;
        puVar8 = &DAT_004d6518;
        MEMSET(iVar5, puVar8, 0, 0xc3)
        DAT_00ec8790 = DAT_004b2970;
        DAT_00ec8794 = DAT_004b2974;
        DAT_00ec8798 = DAT_004b2978;
        puVar6 = (undefined_32 *)&DAT_004b3290;
    }
    else
    {
        puVar6 = param_1;
        if (param_1 == (undefined_32 *)0x2)
        {
            local_8 = 0;
            local_4 = 0;
            local_c = &DAT_004d6828;
            puVar6 = (undefined_32 *)&DAT_004b35a0;
            param_1 = (undefined_32 *)0x100;
            puVar8 = &DAT_004d6828;
            MEMSET(iVar5, puVar8, 0, 0xc3)
        }
    }
    (&DAT_004d5e20)[(int)puVar3] = 0;
    *(undefined_32 *)(&DAT_00ec8780 + (int)puVar3 * 4) = 1.0f;
    bVar1 = *(byte *)puVar6;
    do
    {
        if (bVar1 == 0xff)
        {
            *(undefined_8 *)(local_c + (&DAT_004d5e20)[(int)puVar3] * 3) = 0xff;
            return;
        }
        if (((*(byte *)puVar6 & 8) == 0) || ((int)param_1 <= (int)puVar6[1]))
        {
            if ((*(byte *)puVar6 & 8) != 0)
            {
                if ((int)puVar6[1] < 0x10)
                {
                    bVar2 = false;
                }
                else
                {
                    bVar2 = (int)puVar6[1] <= local_8 * 4 + 0xf;
                }
                if (bVar2)
                    goto LAB_0040601e;
            }
            if (((*(byte *)puVar6 & 4) != 0) && ((local_4 & 1 << ((byte)puVar6[1] & 0x1f)) != 0))
                goto LAB_0040601e;
        }
        else
        {
        LAB_0040601e:
            puVar8 = local_c + (&DAT_004d5e20)[(int)puVar3] * 3;
            *puVar8 = *puVar6;
            puVar8[1] = puVar6[1];
            puVar8[2] = puVar6[2];
            (&DAT_004d5e20)[(int)puVar3] = (&DAT_004d5e20)[(int)puVar3] + 1;
        }
        bVar1 = *(byte *)(puVar6 + 3);
        puVar6 = puVar6 + 3;
    } while (true);
}

// Input-config.c
undefined_32 FUN_00406080(undefined_32 param_1)

{
    byte bVar1;
    char cVar2;
    undefined_32 uVar3;
    undefined_32 uVar4;
    int iVar5;
    undefined_32 *puVar6;
    int *piVar7;
    undefined_64 uVar8;
    int local_194;
    undefined_32 *local_190;
    int local_18c;
    int local_188;
    int *local_184;
    undefined_8 local_180[32];
    undefined_8 local_160[32];
    undefined_8 local_140[32];
    undefined_8 local_120[32];
    undefined_8 local_100[256];

    _sprintf(local_100, s__s_s__s__s_004b3dec, s___data_config__004b252c, param_1, param_1, &DAT_004b3df8);
    iVar5 = FUN_004877d0();
    if (iVar5 == 0)
    {
        FUN_00487960();
        return -1;
    }
    local_194 = 0;
    do
    {
        if (local_194 == 0)
        {
            local_190 = &DAT_004d5fc0;
            local_18c = 6;
            local_184 = &DAT_00ec8880;
            local_188 = DAT_004b2944;
            uVar8 = CONCAT44(0x4b3de0, local_160);
        LAB_00406169:
            _sprintf(uVar8);
        }
        else
        {
            if (local_194 == 1)
            {
                local_190 = &DAT_004d6518;
                local_18c = 3;
                local_184 = &DAT_00ec8790;
                local_188 = DAT_004d6b38;
                uVar8 = CONCAT44(0x4b3dd8, local_160);
                goto LAB_00406169;
            }
            if (local_194 == 2)
            {
                local_190 = &DAT_004d6828;
                local_18c = 0;
                local_188 = DAT_004b2948;
                uVar8 = CONCAT44(0x4b3dcc, local_160);
                goto LAB_00406169;
            }
        }
        FUN_004879f0(s___________s_MAPPINGS_004b3db4);
        cVar2 = *(char *)local_190;
        puVar6 = local_190;
        while (cVar2 != -1)
        {
            uVar3 = puVar6[2];
            uVar4 = puVar6[1];
            bVar1 = *(byte *)puVar6;
            puVar6 = puVar6 + 3;
            _sprintf(local_140);
            if (((bVar1 & 8) == 0) || (local_194 == 2))
            {
                if (((bVar1 & 8) == 0) || (local_194 != 2))
                {
                    if ((bVar1 & 4) != 0)
                    {
                        FUN_00407b00(uVar4);
                        FUN_00421470();
                        _sprintf(local_180, s_AXIS__s_004b3d98);
                        if ((bVar1 & 0x10) == 0)
                        {
                            if ((bVar1 & 0x20) == 0)
                                goto LAB_0040627b;
                            uVar8 = CONCAT44(0x4b3d70, local_140);
                        }
                        else
                        {
                            uVar8 = CONCAT44(0x4b3d84, local_140);
                        }
                        _sprintf(uVar8);
                    }
                }
                else
                {
                    FUN_00407b00(uVar4);
                    FUN_00421470();
                    _sprintf(local_180, s_KEY__s_004b3da0);
                }
            }
            else
            {
                FUN_00407b00(uVar4);
                FUN_00421470();
                _sprintf(local_180, s_BUTTON__s_004b3da8);
            }
        LAB_0040627b:
            FUN_00407d90(uVar3);
            iVar5 = FUN_00421470();
            if (iVar5 != 0)
            {
                _sprintf(local_120, s_FUNCTION__s_004b3d64);
                iVar5 = FUN_004879f0(s___28s__28s__28s__28s_004b3d4c, local_160, local_180, local_120);
                if (iVar5 != 0)
                {
                    FUN_00487960();
                    return 0;
                }
            }
            cVar2 = *(char *)puVar6;
        }
        FUN_004879f0();
        iVar5 = 0;
        piVar7 = local_184;
        if (0 < local_18c)
        {
            do
            {
                if (*piVar7 != 0)
                {
                    FUN_00407b00(iVar5);
                    FUN_00421470();
                    _sprintf(local_180, s_AXIS__s_004b3d98);
                    FUN_004879f0(s___28s__28sFLIP_AXIS_004b3d30, local_160);
                }
                iVar5 = iVar5 + 1;
                piVar7 = piVar7 + 1;
            } while (iVar5 < local_18c);
        }
        if ((local_194 < 2) && (*(int *)(&DAT_00ec8780 + local_194 * 4) != 1.0f))
        {
            _sprintf(local_180, s_SENSITIVITY__0_2f_004b3d1c, (double)*(float *)(&DAT_00ec8780 + local_194 * 4));
            FUN_004879f0(s___28s__28s_004b3d10, local_160);
        }
        if ((local_194 == 0) && (DAT_00ec876c != DAT_004b297c))
        {
            _sprintf(local_180, s_DEADZONE__0_2f_004b3d00, (double)DAT_00ec876c);
            FUN_004879f0(s___28s__28s_004b3d10, local_160);
        }
        if (local_188 == 0)
        {
            uVar8 = CONCAT44(0x4b3ce0, local_180);
        }
        else
        {
            uVar8 = CONCAT44(0x4b3cf0, local_180);
        }
        _sprintf(uVar8);
        FUN_004879f0(s___28s__28s_004b3d10, local_160);
        local_194 = local_194 + 1;
        if (2 < local_194)
        {
            FUN_004879a0();
            FUN_00487960();
            return 1;
        }
    } while (true);
}

// Input-config.c
undefined_32 FUN_00406470(undefined_32 *param_1, byte *param_2, int param_3)

{
    byte bVar1;
    byte *pbVar2;
    int iVar3;
    int iVar4;
    uint uVar5;
    byte *pbVar6;
    undefined_32 *puVar7;
    undefined_32 *puVar8;
    bool bVar9;
    float10 fVar10;
    undefined_32 local_130;
    int local_12c;
    uint local_128;
    undefined_32 *local_124;
    undefined_32 local_120;
    undefined_32 local_11c;
    undefined_8 *local_118;
    undefined_32 local_114;
    undefined_32 local_110;
    undefined_32 local_10c;
    undefined_32 local_108;
    undefined_32 local_104;
    undefined_8 local_100[256];

    local_120 = DAT_004b3df8;
    local_114 = 0;
    local_110 = 0;
    local_10c = 0;
    local_108 = 0;
    local_104 = 0;
    local_11c = DAT_004b3dfc;
    local_118 = PTR_DAT_004b3e00;
    if (param_3 == 0)
    {
        _sprintf(local_100, s__s_s__s__s_004b3dec, s___data_config__004b252c, param_2, param_2, &DAT_004b3df8);
    }
    else
    {
        pbVar6 = &DAT_004b2638;
        pbVar2 = param_2;
        do
        {
            bVar1 = *pbVar2;
            bVar9 = bVar1 < *pbVar6;
            if (bVar1 != *pbVar6)
            {
            LAB_004064f2:
                iVar3 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
                goto LAB_004064f7;
            }
            if (bVar1 == 0)
                break;
            bVar1 = pbVar2[1];
            bVar9 = bVar1 < pbVar6[1];
            if (bVar1 != pbVar6[1])
                goto LAB_004064f2;
            pbVar2 = pbVar2 + 2;
            pbVar6 = pbVar6 + 2;
        } while (bVar1 != 0);
        iVar3 = 0;
    LAB_004064f7:
        if (iVar3 == 0)
        {
            _sprintf(&local_120, s_wheel_map_004b3ea4);
        }
        else
        {
            iVar3 = strlen(param_2);
            if (iVar3 != 1)
            {
                _sprintf(&local_120, &DAT_004b2304 /* "%s" */, param_2);
            }
        }
        _sprintf(local_100, s__s_s_s_004b3e84, &DAT_00e9f300, s___data_config_default__004b3e8c, &local_120);
    }
    iVar3 = file_access_fopen(local_100);
    if (iVar3 == 0)
    {
        file_access_close();
        return -1;
    }
    if (((int)param_1 < 0) || (param_1 == NULL))
    {
        puVar8 = &DAT_00ec8880;
        MEMSET(iVar3, puVar8, 0, 6)
    }
    if (((int)param_1 < 0) || (param_1 == (undefined_32 *)0x1))
    {
        DAT_00ec8790 = 0;
        DAT_00ec8794 = 0;
        DAT_00ec8798 = 0;
    }
    FUN_00407800(param_1);
    iVar4 = parse_line();
    iVar3 = DAT_004d5e28;
    puVar8 = local_124;
    while (DAT_004d5e28 = iVar3, iVar4 != 0)
    {
        pbVar6 = &DAT_004b3e7c;
        pbVar2 = DAT_00ec8e84;
        do
        {
            bVar1 = *pbVar2;
            bVar9 = bVar1 < *pbVar6;
            if (bVar1 != *pbVar6)
            {
            LAB_0040661d:
                iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
                goto LAB_00406622;
            }
            if (bVar1 == 0)
                break;
            bVar1 = pbVar2[1];
            bVar9 = bVar1 < pbVar6[1];
            if (bVar1 != pbVar6[1])
                goto LAB_0040661d;
            pbVar2 = pbVar2 + 2;
            pbVar6 = pbVar6 + 2;
        } while (bVar1 != 0);
        iVar4 = 0;
    LAB_00406622:
        if (iVar4 == 0)
            break;
        uVar5 = 0;
        local_130 = local_130 & 0xffffff00;
        local_12c = 0;
        local_128 = -1;
        if (DAT_00ec8e80 != 0)
        {
            puVar7 = &DAT_00ec8e84;
            do
            {
                iVar3 = _strcmpi(*puVar7, s_JOYSTICK_004b3de0);
                if (iVar3 == 0)
                {
                    puVar8 = NULL;
                    local_124 = &DAT_004d5fc0;
                }
                else
                {
                    iVar3 = _strcmpi(*puVar7, s_MOUSE_004b3dd8);
                    if (iVar3 == 0)
                    {
                        puVar8 = (undefined_32 *)0x1;
                        local_124 = &DAT_004d6518;
                    }
                    else
                    {
                        iVar3 = _strcmpi(*puVar7, s_KEYBOARD_004b3dcc);
                        if (iVar3 == 0)
                        {
                            puVar8 = (undefined_32 *)0x2;
                            local_124 = &DAT_004d6828;
                        }
                        else
                        {
                            iVar3 = _strcmpi(*puVar7, &DAT_004b3e74);
                            if (iVar3 == 0)
                            {
                                local_130 = local_130 | 4;
                                local_12c = FUN_00407a90(puVar7[1], &DAT_004b2af0);
                            }
                            else
                            {
                                iVar3 = _strcmpi(*puVar7, s_BUTTON_004b3e6c);
                                if (iVar3 == 0)
                                {
                                    local_130 = local_130 | 8;
                                    local_12c = FUN_00407a90(puVar7[1], &DAT_004b2b28);
                                }
                                else
                                {
                                    iVar3 = _strcmpi(*puVar7, &PTR_DAT_004b3e68);
                                    if (iVar3 == 0)
                                    {
                                        local_130 = local_130 | 8;
                                        local_12c = FUN_00407a90(puVar7[1], &DAT_004b2bd0);
                                    }
                                    else
                                    {
                                        iVar3 = _strcmpi(*puVar7, s_FUNCTION_004b3e5c);
                                        if (iVar3 == 0)
                                        {
                                            iVar3 = FUN_00407cd0(&local_130, puVar7[1], 0);
                                            if (iVar3 == 0)
                                                goto LAB_00406a20;
                                        }
                                        else
                                        {
                                            iVar3 = _strcmpi(*puVar7, s_AXIS_RANGE_004b3e50);
                                            if (iVar3 == 0)
                                            {
                                                iVar3 = _strcmpi(puVar7[1], s_POSITIVE_004b3e44);
                                                if (iVar3 == 0)
                                                {
                                                    local_130 = local_130 | 0x10;
                                                }
                                                else
                                                {
                                                    iVar3 = _strcmpi(puVar7[1], s_NEGATIVE_004b3e38);
                                                    if (iVar3 != 0)
                                                        goto LAB_00406a20;
                                                    local_130 = local_130 | 0x20;
                                                }
                                            }
                                            else if ((((int)param_1 < 0) || (param_1 == puVar8))
                                                     && (iVar3 = _strcmpi(*puVar7, s_FLIP_AXIS_004b3e2c), iVar3 == 0))
                                            {
                                                if (puVar8 == NULL)
                                                {
                                                    (&DAT_00ec8880)[local_12c] = 1;
                                                }
                                                else
                                                {
                                                    if (puVar8 != (undefined_32 *)0x1)
                                                        goto LAB_00406a20;
                                                    (&DAT_00ec8790)[local_12c] = 1;
                                                }
                                            }
                                            else
                                            {
                                                iVar3 = _strcmpi(*puVar7, s_SENSITIVITY_004b3e20);
                                                if (iVar3 == 0)
                                                {
                                                    fVar10 = (float10)atof(puVar7[1]);
                                                    *(float *)(&DAT_00ec8780 + (int)puVar8 * 4) = (float)fVar10;
                                                }
                                                else
                                                {
                                                    iVar3 = _strcmpi(*puVar7, s_DEADZONE_004b3e14);
                                                    if (iVar3 == 0)
                                                    {
                                                        if (puVar8 == NULL)
                                                        {
                                                            fVar10 = (float10)atof(puVar7[1]);
                                                            DAT_00ec876c = (float)fVar10;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        iVar3 = _strcmpi(*puVar7, s_ENABLED_004b3e0c);
                                                        if (iVar3 == 0)
                                                        {
                                                            iVar3 = _strcmpi(puVar7[1], &DAT_004b3e04);
                                                            if (puVar8 == NULL)
                                                            {
                                                                if ((iVar3 != 0) || (DAT_004b294c == 0))
                                                                {
                                                                    DAT_004b2944 = 0;
                                                                }
                                                                else
                                                                {
                                                                    DAT_004b2944 = 1;
                                                                }
                                                            }
                                                            else if ((puVar8 == (undefined_32 *)0x1)
                                                                     && ((iVar3 != 0
                                                                          || (DAT_004d6b38 = puVar8,
                                                                              DAT_004b2950 == 0))))
                                                            {
                                                                DAT_004d6b38 = NULL;
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                if (local_12c < 0)
                {
                LAB_00406a20:
                    FUN_00407800(param_1);
                    file_access_close();
                    return 0;
                }
                uVar5 = uVar5 + 1;
                puVar7 = puVar7 + 2;
            } while (uVar5 < DAT_00ec8e80);
        }
        if ((((int)param_1 < 0) || (param_1 == puVar8)) && (local_128 < 0x80000000))
        {
            iVar3 = (&DAT_004d5e20)[(int)puVar8];
            local_124[iVar3 * 3] = local_130;
            local_124[iVar3 * 3 + 1] = local_12c;
            local_124[iVar3 * 3 + 2] = local_128;
            (&DAT_004d5e20)[(int)puVar8] = (&DAT_004d5e20)[(int)puVar8] + 1;
        }
        iVar4 = parse_line();
        iVar3 = DAT_004d5e28;
    }
    if (((int)param_1 < 0) || (param_1 == (undefined_32 *)0x2))
    {
        local_130 = CONCAT31((int3)(local_130 >> 8), 10);
        DAT_004d5e28 = iVar3 + 1;
        (&DAT_004d6828)[iVar3 * 3] = local_130;
        (&DAT_004d682c)[iVar3 * 3] = 1;
        (&DAT_004d6830)[iVar3 * 3] = 10;
        iVar3 = iVar3 + 1;
    }
    if (((int)param_1 < 0) || (param_1 == NULL))
    {
        *(undefined_8 *)(&DAT_004d5fc0 + DAT_004d5e20 * 3) = 0xff;
    }
    if (((int)param_1 < 0) || (param_1 == (undefined_32 *)0x1))
    {
        *(undefined_8 *)(&DAT_004d6518 + DAT_004d5e24 * 3) = 0xff;
    }
    if (((int)param_1 < 0) || (param_1 == (undefined_32 *)0x2))
    {
        *(undefined_8 *)(&DAT_004d6828 + iVar3 * 3) = 0xff;
    }
    file_access_close();
    return 1;
}

// WARNING: Removing unreachable block (ram,0x00406c79)

int FUN_00406a50(int param_1, int param_2, undefined_32 *param_3, byte param_4, int param_5, undefined_32 param_6,
                 int *param_7)

{
    byte bVar1;
    char cVar2;
    int iVar3;
    bool bVar4;
    byte bVar5;
    undefined_32 *puVar6;
    undefined_32 uVar7;
    undefined_8 *puVar8;
    int local_1c;
    int local_18;
    uint local_14;
    int local_10;
    undefined_8 local_8;
    undefined_32 local_7;

    local_8 = DAT_004d55cc;
    local_10 = 0;
    local_7 = 0;
    if (param_5 < 0)
    {
        param_5 = -param_5;
    }
    *param_7 = -1;
    _sprintf(param_6, &DAT_004b3eec);
    if (param_1 == 0)
    {
        local_1c = DAT_00ec879c;
        local_18 = DAT_00ec8824;
        local_14 = DAT_00ec887c;
        puVar6 = &DAT_004d5fc0;
    }
    else if (param_1 == 1)
    {
        local_1c = DAT_00ec8770;
        local_18 = 0;
        local_14 = DAT_00ec8808;
        puVar6 = &DAT_004d6518;
    }
    else
    {
        puVar6 = param_3;
        if (param_1 == 2)
        {
            local_1c = 0x100;
            local_18 = 0;
            local_14 = 0;
            puVar6 = &DAT_004d6828;
        }
    }
    cVar2 = *(char *)puVar6;
    do
    {
        if (cVar2 == -1)
        {
            return local_10;
        }
        bVar1 = *(byte *)puVar6;
        iVar3 = puVar6[1];
        if (((puVar6[2] == param_2) && ((bVar1 & (byte)param_3) == (byte)param_3))
            && ((((uint)param_3 & 8) == 0 || ((bVar1 & 0xf0) == param_4))))
        {
            bVar5 = *(byte *)puVar6 & 8;
            if ((bVar5 == 0) || (local_1c <= (int)puVar6[1]))
            {
                if (bVar5 != 0)
                {
                    if ((int)puVar6[1] < 0x10)
                    {
                        bVar4 = false;
                    }
                    else
                    {
                        bVar4 = (int)puVar6[1] <= local_18 * 4 + 0xf;
                    }
                    if (bVar4)
                        goto LAB_00406bb2;
                }
                if (((*(byte *)puVar6 & 4) == 0) || ((local_14 & 1 << ((byte)puVar6[1] & 0x1f)) == 0))
                    goto LAB_00406ca1;
            }
        LAB_00406bb2:
            local_10 = local_10 + 1;
            if (param_5 == local_10)
            {
                *param_7 = iVar3;
                if (param_1 == 2)
                {
                LAB_00406c7e:
                    puVar8 = NULL;
                LAB_00406c81:
                    uVar7 = FUN_00407b00(iVar3, puVar8);
                    uVar7 = lookup_translation(uVar7);
                    puVar8 = &DAT_004b2304 /* "%s" */;
                }
                else
                {
                    if (((uint)param_3 & 8) == 0)
                    {
                        if (param_1 == 2)
                            goto LAB_00406c7e;
                        if ((bVar1 & 0x10) == 0)
                        {
                            if ((bVar1 & 0x20) != 0)
                            {
                                puVar8 = &DAT_004b3bd8;
                                goto LAB_00406c3b;
                            }
                        }
                        else
                        {
                            puVar8 = &DAT_004b3ecc;
                        LAB_00406c3b:
                            _sprintf(&local_8, puVar8);
                        }
                        uVar7 = FUN_00407b00(iVar3, &DAT_004b2af0);
                        uVar7 = lookup_translation(uVar7);
                        uVar7 = lookup_translation(s__MONDOTEXT_H_0216__s_s_AXIS_004b3eb0, &local_8, uVar7);
                        _sprintf(param_6, uVar7);
                        goto LAB_00406ca1;
                    }
                    puVar8 = &DAT_004b2b28;
                    if (0xf < iVar3)
                        goto LAB_00406c81;
                    uVar7 = FUN_00407b00(iVar3, &DAT_004b2b28);
                    uVar7 = lookup_translation(uVar7);
                    puVar8 = (undefined_8 *)lookup_translation(s__MONDOTEXT_H_0213_BUTTON__s_004b3ed0, uVar7);
                }
                _sprintf(param_6, puVar8, uVar7);
            }
        }
    LAB_00406ca1:
        cVar2 = *(char *)(puVar6 + 3);
        puVar6 = puVar6 + 3;
    } while (true);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

uint FUN_00406cc0(int param_1, int param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5)

{
    bool bVar1;
    undefined_32 uVar2;
    int iVar3;
    int iVar4;
    undefined_32 uVar5;
    undefined_8 *puVar6;
    uint uVar7;
    byte bVar8;
    uint uVar9;
    char *pcVar10;
    undefined_32 uVar11;
    float local_1a4;
    int local_1a0;
    uint local_198;
    int local_194;
    undefined_8 local_190;
    undefined_32 local_18f;
    undefined_32 local_188;
    int local_184;
    undefined_8 local_180[64];
    undefined_8 local_140[64];
    undefined_8 local_100[256];

    bVar1 = false;
    local_194 = 0;
    local_1a0 = -1;
    local_190 = DAT_004d55cc;
    local_18f = 0;
    local_1a4 = 0.0;
    uVar9 = 0;
    FUN_00414af0(param_3, local_140, 0x40);
    FUN_00414ab0(param_3, &DAT_004b4270, 0);
    if (param_2 == 0)
    {
        uVar11 = 0x18;
    }
    else if (param_2 == 1)
    {
        uVar11 = 0x19;
    }
    else
    {
        uVar11 = 0x1a;
    }
    uVar11 = FUN_00414d90(0, uVar11);
    local_184 = 10;
    DAT_004d6510 = 0;
    do
    {
        bVar8 = (byte)uVar9;
        if (local_1a4 == 0.0)
        {
            if (param_2 == 0)
            {
                if (param_1 == 0)
                {
                    pcVar10 = s__MONDOTEXT_H_0219__f4_nPress_new_004b41d4;
                }
                else
                {
                    pcVar10 = s__MONDOTEXT_H_0218__f4_nMove_axis_004b4220;
                }
            }
            else if (param_2 == 1)
            {
                if (param_1 == 0)
                {
                    pcVar10 = s__MONDOTEXT_H_0220__f4_nPress_new_004b4198;
                }
                else
                {
                    pcVar10 = s__MONDOTEXT_H_0218__f4_nMove_axis_004b4220;
                }
            }
            else
            {
                if (param_2 != 2)
                    goto LAB_00406df7;
                pcVar10 = s__MONDOTEXT_H_0221__f4_nPress_new_004b4160;
            }
            uVar2 = lookup_translation(pcVar10, 2.0f);
            FUN_0044fce0(uVar2);
            local_1a4 = 1.7;
        }
        else
        {
            local_1a4 = local_1a4 - (float)_DAT_00e22a40;
            if (local_1a4 < 0.0)
            {
                local_1a4 = 0.0;
            }
        }
    LAB_00406df7:
        FUN_0048db60();
        FUN_00489bc0();
        FUN_00404dd0();
        FUN_00445980(0, 2);
        FUN_00415020(0);
        if (DAT_004d6510 == 0)
        {
            DAT_004d6510 = DAT_004d6b4c;
        }
        else if (local_184 == 0)
        {
            iVar3 = FUN_00407f80(param_2);
            if ((iVar3 != 0) || ((DAT_004d6b44 != 0 && (((param_1 != 0 && (DAT_004d55d4 == 0)) || (1 < param_2))))))
            {
                FUN_00414ab0(param_3, local_140, 0);
                uVar2 = lookup_translation(s__MONDOTEXT_H_0222__nCancelled__004b3ef0, 2.0f);
                FUN_0044fce0(uVar2);
                uVar9 = 3;
                goto LAB_004074c3;
            }
            if (param_1 == 0)
            {
                iVar3 = FUN_00405dd0(param_2, 0);
                if (iVar3 == 0xffff)
                    goto LAB_004074c8;
                if ((param_2 != 2) && (iVar3 == 1))
                {
                    bVar8 = 1;
                }
                iVar4 = FUN_004079f0(param_2, iVar3, 0, &local_188);
                if (iVar4 < 0)
                {
                LAB_0040701a:
                    iVar4 = FUN_004078a0(param_2, param_4, param_5, 0, 0, iVar3);
                    if (iVar4 == 0)
                    {
                        // PlatformAbstraction->dump_exit
                        (**(code **)(DAT_00ecc420 + 0x18))(s_elfControl_ReplaceMapping_cid__f_004b404c,
                                                           s_D__devel_QA5_pc_gnome_SpecPlat_r_004b40a4, 0x6f8);
                    }
                    if (param_2 == 2)
                    {
                        uVar2 = FUN_00407b00(iVar3, 0);
                        uVar2 = lookup_translation(uVar2);
                        puVar6 = &DAT_004b2304 /* "%s" */;
                    }
                    else if (iVar3 < 0x10)
                    {
                        uVar2 = FUN_00407b00(iVar3, &DAT_004b2b28);
                        uVar2 = lookup_translation(uVar2);
                        puVar6 = (undefined_8 *)lookup_translation(s__MONDOTEXT_H_0213_BUTTON__s_004b3ed0, uVar2);
                    }
                    else
                    {
                        uVar2 = FUN_00407b00(iVar3, &DAT_004b2b28);
                        uVar2 = lookup_translation(uVar2);
                        puVar6 = &DAT_004b2304 /* "%s" */;
                    }
                    _sprintf(local_100, puVar6, uVar2);
                    FUN_00414ab0(param_3, local_100, 0);
                    uVar9 = (uint)(bVar8 | 6);
                }
                else
                {
                    uVar2 = FUN_00407d90(iVar4, local_188);
                    uVar2 = lookup_translation(uVar2);
                    iVar4 = _strcmpi(uVar2, param_4);
                    if (iVar4 == 0)
                    {
                        FUN_00414ab0(param_3, local_140, 0);
                        uVar9 = (uint)(bVar8 | 2);
                    }
                    else
                    {
                        if (param_2 == 2)
                        {
                            uVar5 = FUN_00407b00(iVar3, 0);
                            uVar5 = lookup_translation(uVar5);
                            puVar6 = &DAT_004b2304 /* "%s" */;
                        }
                        else
                        {
                            uVar5 = FUN_00407b00(iVar3, &DAT_004b2b28);
                            uVar5 = lookup_translation(uVar5);
                            puVar6 = (undefined_8 *)lookup_translation(s__MONDOTEXT_H_0213_BUTTON__s_004b3ed0, uVar5);
                        }
                        _sprintf(local_180, puVar6, uVar5);
                        uVar2 =
                            lookup_translation(s__MONDOTEXT_H_0223__s_already_ass_004b4108, local_180, uVar2, param_4);
                        _sprintf(local_100, uVar2);
                        uVar2 = lookup_translation(s__MONDOTEXT_H_0033__sNo_004b20b0, 0, 1);
                        uVar2 = lookup_translation(s__MONDOTEXT_H_0032__sYes_004b2098, uVar2);
                        uVar2 = lookup_translation(s__MONDOTEXT_H_0224_Conflict_Detec_004b40e4, local_100, uVar2);
                        iVar4 = FUN_004145b0(uVar11, -1, -1, uVar2);
                        if (iVar4 == 1)
                            goto LAB_004073b0;
                        if (iVar4 != 0xffff)
                            goto LAB_0040701a;
                        FUN_00414ab0(param_3, local_140, 0);
                        uVar9 = (uint)(bVar8 | 2);
                    }
                }
            }
            else
            {
                iVar3 = FUN_00407700(param_2, &local_198);
                if (-1 < iVar3)
                {
                    uVar2 = lookup_translation(s__MONDOTEXT_H_0016_BRAKE_004b2818);
                    iVar4 = _strcmpi(param_4, uVar2);
                    if (iVar4 == 0)
                    {
                        if ((int)local_198 < 1)
                        {
                            if ((int)local_198 < 0)
                            {
                                puVar6 = &DAT_004b3bd8;
                                goto LAB_00407158;
                            }
                        }
                        else
                        {
                            puVar6 = &DAT_004b3ecc;
                        LAB_00407158:
                            _sprintf(&local_190, puVar6);
                        }
                        local_194 = 1;
                    }
                    uVar2 = FUN_00407b00(iVar3, &DAT_004b2af0);
                    uVar2 = lookup_translation(uVar2);
                    uVar2 = lookup_translation(s__MONDOTEXT_H_0216__s_s_AXIS_004b3eb0, &local_190, uVar2);
                    _sprintf(local_100, uVar2);
                    FUN_00414ab0(param_3, local_100, 0);
                    local_1a0 = iVar3;
                }
                if ((local_1a0 < 0) || (DAT_004d6b40 == 0))
                    goto LAB_004074c8;
                iVar3 = FUN_004079f0(param_2, local_1a0, 1, &local_188);
                if (-1 < iVar3)
                {
                    uVar2 = FUN_00407d90(iVar3, local_188);
                    uVar2 = lookup_translation(uVar2);
                    uVar5 = lookup_translation(s__MONDOTEXT_H_0021_ROLL_RIGHT_004b2790);
                    iVar4 = _strcmpi(uVar2, uVar5);
                    if (iVar4 == 0)
                    {
                    LAB_00407248:
                        uVar5 = lookup_translation(s__MONDOTEXT_H_0020_ROLL_LEFT_004b27b0);
                        _sprintf(uVar2, uVar5);
                    }
                    else
                    {
                        uVar5 = lookup_translation(s__MONDOTEXT_H_0020_ROLL_LEFT_004b27b0);
                        iVar4 = _strcmpi(uVar2, uVar5);
                        if (iVar4 == 0)
                            goto LAB_00407248;
                    }
                    iVar4 = _strcmpi(uVar2, param_4);
                    if (iVar4 == 0)
                    {
                        FUN_00414ab0(param_3, local_140, 0);
                        uVar9 = 2;
                        goto LAB_004074c3;
                    }
                    uVar5 = FUN_00407b00(local_1a0, &DAT_004b2af0);
                    uVar5 = lookup_translation(uVar5);
                    uVar5 = lookup_translation(s__MONDOTEXT_H_0228__s_Axis_004b4030, uVar5);
                    _sprintf(local_180, uVar5);
                    uVar5 = lookup_translation(s__MONDOTEXT_H_0020_ROLL_LEFT_004b27b0);
                    iVar4 = _strcmpi(param_4, uVar5);
                    if (iVar4 == 0)
                    {
                        uVar5 = lookup_translation(s__MONDOTEXT_H_0280__sRoll_Left_Ri_004b400c);
                    LAB_0040730c:
                        uVar2 =
                            lookup_translation(s__MONDOTEXT_H_0223__s_already_ass_004b4108, local_180, uVar2, uVar5);
                        _sprintf(local_100, uVar2);
                    }
                    else
                    {
                        if ((iVar3 != 7) && (uVar5 = param_4, iVar3 != 6))
                            goto LAB_0040730c;
                        uVar2 = lookup_translation(s__MONDOTEXT_H_0229__s_already_ass_004b3fb4, local_180, param_4);
                        _sprintf(local_100, uVar2);
                    }
                    uVar2 = lookup_translation(s__MONDOTEXT_H_0033__sNo_004b20b0, 0, 1);
                    uVar2 = lookup_translation(s__MONDOTEXT_H_0032__sYes_004b2098, uVar2);
                    uVar2 = lookup_translation(s__MONDOTEXT_H_0224_Conflict_Detec_004b40e4, local_100, uVar2);
                    iVar3 = FUN_004145b0(uVar11, -1, -1, uVar2);
                    if ((iVar3 == 1) || (iVar3 == 0xffff))
                    {
                    LAB_004073b0:
                        FUN_00414ab0(param_3, local_140, 0);
                        uVar9 = (uint)(bVar8 | 2);
                        goto LAB_004074c3;
                    }
                }
                uVar2 = lookup_translation(s__MONDOTEXT_H_0020_ROLL_LEFT_004b27b0);
                iVar3 = _strcmpi(param_4, uVar2);
                if (iVar3 == 0)
                {
                    uVar2 =
                        lookup_translation(s__MONDOTEXT_H_0021_ROLL_RIGHT_004b2790, param_5, 1, -local_198, local_1a0);
                    iVar3 = FUN_004078a0(param_2, uVar2);
                    if (iVar3 == 0)
                    {
                        // PlatformAbstraction->dump_exit
                        (**(code **)(DAT_00ecc420 + 0x18))(s_elfControl_ReplaceMapping_cid__T_004b3f64,
                                                           s_D__devel_QA5_pc_gnome_SpecPlat_r_004b40a4, 0x741);
                    }
                    local_194 = 1;
                }
                local_198 = -(uint)(local_194 != 0) & local_198;
                iVar3 = FUN_004078a0(param_2, param_4, param_5, param_1, local_198, local_1a0);
                if (iVar3 == 0)
                {
                    // PlatformAbstraction->dump_exit
                    (**(code **)(DAT_00ecc420 + 0x18))(s_elfControl_ReplaceMapping_cid__f_004b3f10,
                                                       s_D__devel_QA5_pc_gnome_SpecPlat_r_004b40a4, 0x746);
                }
                uVar9 = 6;
            }
        LAB_004074c3:
            bVar1 = true;
        }
        else
        {
            local_184 = 0;
        }
    LAB_004074c8:
        FUN_00426910();
        FUN_0048dce0();
        FUN_0048dd80();
        uVar7 = FUN_00489ab0();
        if (bVar1)
        {
            return uVar7 & 0xffffff00 | uVar9;
        }
    } while (true);
}

int FUN_00407500(undefined_32 *param_1, undefined_32 param_2, int param_3, int param_4, int param_5)

{
    undefined_32 *puVar1;
    char cVar2;
    undefined_32 *puVar3;
    int iVar4;
    undefined_32 *puVar5;
    int iVar6;
    int iVar7;
    int local_10;
    byte local_c[4];
    undefined_32 local_8;
    int local_4;

    puVar3 = param_1;
    iVar6 = 0;
    iVar7 = -1;
    local_10 = 0;
    local_c[0] = 0;
    local_8 = 0;
    local_4 = 0;
    if (param_1 == NULL)
    {
        param_1 = &DAT_004d5fc0;
    }
    else if (param_1 == (undefined_32 *)0x1)
    {
        param_1 = &DAT_004d6518;
    }
    else if (param_1 == (undefined_32 *)0x2)
    {
        param_1 = &DAT_004d6828;
    }
    iVar4 = FUN_00407cd0(local_c, param_2, 1);
    if (iVar4 == 0)
    {
        return -1;
    }
    if (param_3 == 0)
    {
        local_c[0] = local_c[0] | 8;
    }
    else
    {
        local_c[0] = local_c[0] | 4;
    }
    cVar2 = *(char *)param_1;
    puVar5 = param_1;
    while (cVar2 != -1)
    {
        if (-1 < iVar7)
            goto LAB_004075d3;
        if (((puVar5[2] == local_4) && ((local_c[0] & *(byte *)puVar5) == local_c[0]))
            && (local_10 = local_10 + 1, local_10 == param_4))
        {
            iVar7 = iVar6;
        }
        puVar1 = puVar5 + 3;
        puVar5 = puVar5 + 3;
        iVar6 = iVar6 + 1;
        cVar2 = *(char *)puVar1;
    }
    if (iVar7 < 0)
    {
        return -1;
    }
LAB_004075d3:
    if (param_5 != 0)
    {
        if (iVar7 <= (&DAT_004d5e20)[(int)puVar3] + -1)
        {
            puVar5 = param_1 + iVar7 * 3;
            iVar6 = iVar7;
            do
            {
                iVar6 = iVar6 + 1;
                *puVar5 = puVar5[3];
                puVar5[1] = puVar5[4];
                puVar5[2] = puVar5[5];
                puVar5 = puVar5 + 3;
            } while (iVar6 <= (&DAT_004d5e20)[(int)puVar3] + -1);
        }
        (&DAT_004d5e20)[(int)puVar3] = (&DAT_004d5e20)[(int)puVar3] + -1;
    }
    return iVar7;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00407630(int param_1)

{
    undefined_32 uVar1;
    int iVar2;
    int iVar3;
    undefined_32 *puVar4;
    undefined_8 local_40[64];

    iVar3 = param_1;
    iVar2 = FUN_00406a50(param_1, 2, 5, 0, 1, local_40, &param_1);
    if (iVar2 != 0)
    {
        if (iVar3 == 1)
        {
            if (param_1 == 0)
            {
                FUN_004859a0(1.0 / _DAT_00ec8784, 1.0f);
                return;
            }
            if (param_1 == 1)
            {
                FUN_004859a0(1.0f, 1.0 / _DAT_00ec8784);
                return;
            }
        }
        else
        {
            FUN_004858e0(DAT_00ec876c, DAT_004d6b3c, param_1);
            uVar1 = *(undefined_32 *)(&DAT_00ec8780 + iVar3 * 4);
            puVar4 = &DAT_004b2980;
            MEMSET(iVar3, puVar4, 1.0f, 6)
            (&DAT_004b2980)[param_1] = uVar1;
        }
    }
    return;
}

int FUN_00407700(int param_1, undefined_32 *param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    undefined_32 uVar5;
    uint uVar6;
    int iVar7;
    int iVar8;
    int iVar9;

    iVar9 = -1;
    fVar2 = 0.0;
    iVar8 = 0;
    uVar6 = -(uint)(param_1 != 1) & 3;
    if (uVar6 != 0xfffffffd)
    {
        iVar7 = param_1 * 0x18;
        do
        {
            fVar3 = *(float *)(&DAT_004d62d0 + iVar7) - *(float *)((int)&DAT_00ec87c0 + iVar7);
            if (fVar3 < 0.0)
            {
                fVar3 = -fVar3;
            }
            fVar1 = *(float *)((int)&DAT_00ec87c0 + iVar7);
            if (*(float *)((int)&DAT_00ec87c0 + iVar7) < 0.0)
            {
                fVar1 = -fVar1;
            }
            if (param_1 == 0)
            {
                fVar4 = 0.5;
            }
            else
            {
                fVar4 = 0.1;
            }
            if (((fVar4 < fVar1) && (0.05 < fVar3)) && (fVar2 < fVar3))
            {
                if (0.0 <= *(float *)((int)&DAT_00ec87c0 + iVar7))
                {
                    if (*(float *)((int)&DAT_00ec87c0 + iVar7) <= 0.0)
                    {
                        uVar5 = 0;
                    }
                    else
                    {
                        uVar5 = 1;
                    }
                }
                else
                {
                    uVar5 = -1;
                }
                *param_2 = uVar5;
                iVar9 = iVar8;
                fVar2 = fVar3;
            }
            iVar8 = iVar8 + 1;
            iVar7 = iVar7 + 4;
        } while (iVar8 < (int)(uVar6 + 3));
    }
    return iVar9;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00407800(int param_1)

{
    int iVar1;
    undefined_32 *puVar2;

    DAT_00ec8830 = 0;
    DAT_00ec8834 = 0;
    DAT_00ec8838 = 0;
    puVar2 = &DAT_00ec8840;
    MEMSET(iVar1, puVar2, 0, 0xf)
    _DAT_00ec883c = 0;
    puVar2 = &DAT_00ec88a0;
    MEMSET(iVar1, puVar2, 0, 0xf)
    if ((param_1 < 0) || (param_1 == 0))
    {
        puVar2 = &DAT_004d5fc0;
        MEMSET(iVar1, puVar2, 0, 0xc3)
    }
    if ((param_1 < 0) || (param_1 == 1))
    {
        puVar2 = &DAT_004d6518;
        MEMSET(iVar1, puVar2, 0, 0xc3)
    }
    if ((param_1 < 0) || (param_1 == 2))
    {
        puVar2 = &DAT_004d6828;
        MEMSET(iVar1, puVar2, 0, 0xc3)
    }
    if (param_1 < 0)
    {
        DAT_004d5e20 = 0;
        DAT_004d5e24 = 0;
        DAT_004d5e28 = 0;
        return;
    }
    (&DAT_004d5e20)[param_1] = 0;
    return;
}

void FUN_004078a0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5, undefined_32 param_6)

{
    undefined_32 uVar1;

    uVar1 = FUN_00407500(param_1, param_2, param_4, param_3, 0);
    FUN_004078e0(param_1, param_2, param_6, param_4, param_5, uVar1);
    return;
}

// WARNING: Could not reconcile some variable overlaps

undefined_32 FUN_004078e0(undefined_32 *param_1, undefined_32 param_2, uint param_3, int param_4, int param_5,
                          int param_6)

{
    uint *puVar1;
    int iVar2;
    undefined_32 *puVar3;
    uint local_c;
    uint local_8;
    uint local_4;

    local_c = local_c & 0xffffff00;
    local_4 = 0;
    if (param_1 == NULL)
    {
        puVar3 = &DAT_004d5fc0;
    }
    else if (param_1 == (undefined_32 *)0x1)
    {
        puVar3 = &DAT_004d6518;
    }
    else
    {
        puVar3 = &DAT_004d6828;
        if (param_1 != (undefined_32 *)0x2)
        {
            puVar3 = param_1;
        }
    }
    local_8 = param_3;
    iVar2 = FUN_00407cd0(&local_c, param_2, 1);
    if (iVar2 == 0)
    {
        return 0;
    }
    if (param_4 == 0)
    {
        local_c._0_1_ = (byte)local_c | 8;
    }
    else
    {
        local_c = local_c | 4;
        if (param_5 < 1)
        {
            if (-1 < param_5)
                goto LAB_00407976;
            local_c._0_1_ = (byte)local_c | 0x20;
        }
        else
        {
            local_c._0_1_ = (byte)local_c | 0x14;
        }
    }
    local_c = local_c & 0xffffff00 | (uint)(byte)local_c;
LAB_00407976:
    if (param_6 < 0)
    {
        iVar2 = (&DAT_004d5e20)[(int)param_1];
        puVar3[iVar2 * 3] = local_c;
        puVar3[iVar2 * 3 + 1] = local_8;
        puVar3[iVar2 * 3 + 2] = local_4;
        iVar2 = (&DAT_004d5e20)[(int)param_1];
        (&DAT_004d5e20)[(int)param_1] = iVar2 + 1;
        *(undefined_8 *)(puVar3 + (iVar2 + 1) * 3) = 0xff;
        return 1;
    }
    puVar1 = puVar3 + param_6 * 3;
    *puVar1 = local_c;
    puVar1[1] = local_8;
    puVar1[2] = local_4;
    return 1;
}

undefined_32 FUN_004079f0(undefined_32 *param_1, int param_2, int param_3, byte *param_4)

{
    char cVar1;
    byte bVar2;
    int iVar3;
    undefined_32 *puVar4;
    int iVar5;
    int iVar6;
    undefined_32 *puVar7;

    if (param_1 == NULL)
    {
        puVar7 = &DAT_004d5fc0;
    }
    else if (param_1 == (undefined_32 *)0x1)
    {
        puVar7 = &DAT_004d6518;
    }
    else
    {
        puVar7 = &DAT_004d6828;
        if (param_1 != (undefined_32 *)0x2)
        {
            puVar7 = param_1;
        }
    }
    cVar1 = *(char *)puVar7;
    iVar6 = 0;
    iVar3 = -1;
    puVar4 = puVar7;
    while (iVar5 = iVar6, cVar1 != -1)
    {
        if (-1 < iVar3)
            goto LAB_00407a60;
        if ((puVar4[1] != param_2) || (iVar6 = iVar5, (*(byte *)puVar4 & (-(param_3 != 0) & 0xfcU) + 8) == 0))
        {
            iVar6 = iVar5 + 1;
            puVar4 = puVar4 + 3;
            iVar5 = iVar3;
        }
        iVar3 = iVar5;
        cVar1 = *(char *)puVar4;
    }
    if (iVar3 < 0)
    {
        return -1;
    }
LAB_00407a60:
    bVar2 = *(byte *)(puVar7 + iVar3 * 3);
    *param_4 = bVar2;
    if ((bVar2 & 8) == 0)
    {
        *param_4 = bVar2 & 0xcf;
    }
    *param_4 = *param_4 & 0xf3;
    return puVar7[iVar3 * 3 + 2];
}

int FUN_00407a90(undefined_32 param_1, int *param_2)

{
    int *piVar1;
    undefined_32 uVar2;
    int iVar3;
    int *piVar4;
    int iVar5;

    iVar5 = 0;
    piVar4 = param_2;
    if (*param_2 == -1)
    {
        return -1;
    }
    do
    {
        uVar2 = FUN_00421470(piVar4[1]);
        uVar2 = FUN_00421470(param_1, uVar2);
        iVar3 = _strcmpi(uVar2);
        if (iVar3 == 0)
        {
            return param_2[iVar5 * 2];
        }
        piVar1 = piVar4 + 2;
        iVar5 = iVar5 + 1;
        piVar4 = piVar4 + 2;
    } while (*piVar1 != -1);
    return -1;
}

// Have to do with Menu
undefined_8 *FUN_00407b00(uint param_1, uint *param_2)

{
    uint uVar1;
    undefined_32 uVar2;
    uint *puVar3;
    int iVar4;
    char *pcVar5;

    iVar4 = 0;
    if (param_2 != NULL)
    {
        uVar1 = *param_2;
        puVar3 = param_2;
        if (uVar1 == -1)
        {
            return NULL;
        }
        do
        {
            if (uVar1 == param_1)
            {
                return (undefined_8 *)param_2[iVar4 * 2 + 1];
            }
            uVar1 = puVar3[2];
            iVar4 = iVar4 + 1;
            puVar3 = puVar3 + 2;
        } while (uVar1 != -1);
        return NULL;
    }
    switch (param_1)
    {
    case 0xd:
        _sprintf(&DAT_004d5f38, &DAT_004b3ecc);
        return &DAT_004d5f38;
    default:
        goto switchD_00407b23_caseD_e;
    case 0x1d:
        pcVar5 = s__MONDOTEXT_H_0231_LEFT_CTRL_004b42ac;
        break;
    case 0x29:
        pcVar5 = s__MONDOTEXT_H_0233_TILDE_004b4278;
        break;
    case 0x2a:
        pcVar5 = s__MONDOTEXT_H_0232_LEFT_SHIFT_004b42e4;
        break;
    case 0x38:
        pcVar5 = s__MONDOTEXT_H_0230_LEFT_ALT_004b42c8;
        break;
    case 0x45:
        param_1 = 0xc5;
        goto switchD_00407b23_caseD_e;
    case 0x46:
        pcVar5 = s__MONDOTEXT_H_0543_SCR_LOCK_004b4290;
        break;
    case 0xc5:
        param_1 = 0x45;
    switchD_00407b23_caseD_e:
        GetKeyNameTextA(((param_1 & 0x80) << 1 | param_1 & 0x7f) << 0x10, &DAT_004d5f38, 0x80);
        return &DAT_004d5f38;
    }
    uVar2 = lookup_translation(pcVar5);
    _sprintf(&DAT_004d5f38, uVar2);
    return &DAT_004d5f38;
}

undefined_32 FUN_00407cd0(byte *param_1, undefined_32 param_2, int param_3)

{
    undefined_8 **ppuVar1;
    undefined_32 uVar2;
    int iVar3;
    undefined_8 **ppuVar4;
    int iVar5;

    iVar5 = 0;
    if (DAT_004b29e8 == -1)
    {
        return 0;
    }
    ppuVar4 = &PTR_s__MONDOTEXT_H_0014_CAMERA_CYCLE_004b29ec;
    do
    {
        if (param_3 == 0)
        {
            uVar2 = FUN_00421470(*ppuVar4);
            uVar2 = lookup_translation(param_2, uVar2);
            iVar3 = _strcmpi(uVar2);
            if (iVar3 == 0)
                goto LAB_00407d51;
        }
        if (param_3 == 1)
        {
            uVar2 = lookup_translation(*ppuVar4);
            uVar2 = lookup_translation(param_2, uVar2);
            iVar3 = _strcmpi(uVar2);
            if (iVar3 == 0)
            {
            LAB_00407d51:
                *(int *)(param_1 + 8) = (&DAT_004b29e8)[iVar5 * 3];
                *param_1 = *param_1 | (&DAT_004b29f0)[iVar5 * 0xc];
                return 1;
            }
        }
        ppuVar1 = ppuVar4 + 2;
        ppuVar4 = ppuVar4 + 3;
        iVar5 = iVar5 + 1;
        if (*ppuVar1 == (undefined_8 *)-1)
        {
            return 0;
        }
    } while (true);
}

undefined_8 *FUN_00407d90(int param_1, char param_2)

{
    int iVar1;
    undefined_32 *puVar2;
    int iVar3;

    iVar3 = 0;
    if (DAT_004b29e8 == -1)
    {
        return NULL;
    }
    puVar2 = &DAT_004b29e8;
    iVar1 = DAT_004b29e8;
    while ((iVar1 != param_1 || (*(char *)(puVar2 + 2) != param_2)))
    {
        iVar1 = puVar2[3];
        puVar2 = puVar2 + 3;
        iVar3 = iVar3 + 1;
        if (iVar1 == -1)
        {
            return NULL;
        }
    }
    return (&PTR_s__MONDOTEXT_H_0014_CAMERA_CYCLE_004b29ec)[iVar3 * 3];
}

void FUN_00407de0(void)

{
    char cVar1;
    uint uVar2;
    int iVar3;
    OLECHAR *pOVar4;
    size_t _MaxCount;
    uint uVar5;
    GUID *rguid;
    char local_300[256];
    OLECHAR local_200[128];
    char local_100[256];

    uVar5 = 0;
    DAT_004d6b3c = 0;
    iVar3 = FUN_0049d2e0(s_JoystickGUID_004b4304, local_100, 0x100, &DAT_004d55cc);
    uVar2 = DAT_004d6b3c;
    if ((iVar3 == 0) && (DAT_0050fec8 != 0))
    {
        rguid = (GUID *)&DAT_00ec9ea4;
        while (true)
        {
            StringFromGUID2(rguid, local_200, 0x100);
            _MaxCount = 0;
            pOVar4 = local_200;
            do
            {
                if (*(char *)pOVar4 != '\0')
                {
                    local_300[_MaxCount] = *(char *)pOVar4;
                    _MaxCount = _MaxCount + 1;
                }
                cVar1 = *(char *)pOVar4;
                pOVar4 = (OLECHAR *)((int)pOVar4 + 1);
            } while (cVar1 != '}');
            iVar3 = _strncmp(local_100, local_300, _MaxCount);
            uVar2 = uVar5;
            if (iVar3 == 0)
                break;
            uVar5 = uVar5 + 1;
            rguid = (GUID *)&rguid[0x27].Data2;
            if (DAT_0050fec8 <= uVar5)
            {
                return;
            }
        }
    }
    DAT_004d6b3c = uVar2;
    return;
}

undefined_32 FUN_00407ea0(int param_1)

{
    bool bVar1;
    bool bVar2;
    int iVar3;
    int iVar4;
    int iVar5;

    if (param_1 == 0)
    {
        iVar4 = 0;
    }
    else
    {
        iVar4 = FUN_00485880((DAT_004d6b3c + 8) * 0x20, 0);
    }
    if (param_1 == 1)
    {
        iVar5 = 0;
    }
    else
    {
        iVar5 = FUN_00485880(0x200, 0);
    }
    if (param_1 == 2)
    {
        bVar1 = false;
        goto LAB_00407f2d;
    }
    iVar3 = FUN_00485880(0x1c, 0);
    if (iVar3 == 0)
    {
        iVar3 = FUN_00485880(0x9c, 0);
        if (iVar3 == 0)
        {
            iVar3 = FUN_00411720();
            if (iVar3 == 0)
            {
                iVar3 = FUN_00485880(0x39, 0);
                if (iVar3 != 0)
                    goto LAB_00407f28;
            }
            bVar1 = false;
            goto LAB_00407f2d;
        }
    }
LAB_00407f28:
    bVar1 = true;
LAB_00407f2d:
    if (((DAT_004d55d4 == 0) || (param_1 == 0)) || (DAT_004d5e30 <= 0.1))
    {
        bVar2 = false;
    }
    else
    {
        bVar2 = true;
    }
    if (((iVar4 == 0) && (iVar5 == 0)) && ((!bVar1 && (!bVar2))))
    {
        return 0;
    }
    return 1;
}

undefined_32 FUN_00407f80(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    if (param_1 == 0)
    {
        iVar2 = 0;
    }
    else
    {
        iVar2 = FUN_00485880(DAT_004d6b3c * 0x20 + 0x101, 0);
    }
    if (param_1 == 1)
    {
        iVar4 = 0;
    }
    else
    {
        iVar4 = FUN_00485880(0x201, 0);
    }
    if (param_1 == 2)
    {
        iVar3 = 0;
    }
    else
    {
        iVar3 = FUN_00485880(1, 0);
    }
    iVar1 = __ftol();
    if ((((iVar2 == 0) && (iVar4 == 0)) && (iVar3 == 0)) && (iVar1 == 0))
    {
        return 0;
    }
    return 1;
}

undefined_32 FUN_00408020(int param_1)

{
    int *piVar1;

    piVar1 = &DAT_004b38b8;
    do
    {
        if (param_1 == *piVar1)
        {
            return 1;
        }
        piVar1 = piVar1 + 1;
    } while (piVar1 < &DAT_004b38f8);
    return 0;
}

undefined_32 FUN_00408040(int param_1, int param_2, float param_3, float param_4)

{
    int iVar1;
    float10 fVar2;

    if (param_1 < 0)
    {
        fVar2 = (float10)param_3;
    }
    else
    {
        fVar2 = (float10)FUN_004856e0(param_1);
    }
    if (param_2 == 0)
    {
        if ((float10)0.0 > fVar2)
        {
            if (-fVar2 <= (float10)param_4)
            {
                return 0;
            }
            return 1;
        }
    }
    else
    {
        if ((float10)0.0 <= fVar2)
        {
            iVar1 = 1;
        }
        else
        {
            iVar1 = -1;
        }
        if (iVar1 != param_2)
        {
            return 0;
        }
        if (fVar2 < (float10)0.0)
        {
            fVar2 = -fVar2;
        }
    }
    if (fVar2 <= (float10)param_4)
    {
        return 0;
    }
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004080c0(undefined_32 param_1, undefined_16 param_2, undefined_8 param_3)

{
    uint uVar1;

    if (DAT_004d6b54 != '\0')
    {
        EnterCriticalSection((LPCRITICAL_SECTION)&DAT_004d5e68);
        if (DAT_004d5e60 < 0x40)
        {
            uVar1 = _DAT_004d5e60 & 0xff;
            (&DAT_004d6310)[uVar1 * 2] = param_1;
            (&DAT_004d6314)[uVar1 * 4] = param_2;
            (&DAT_004d6316)[uVar1 * 8] = param_3;
            DAT_004d5e60 = DAT_004d5e60 + 1;
            _DAT_004d5e60 = _DAT_004d5e60 & 0xffffff00 | (uint)DAT_004d5e60;
        }
        LeaveCriticalSection((LPCRITICAL_SECTION)&DAT_004d5e68);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00408120(void)

{
    char cVar1;
    ushort uVar2;
    undefined_8 uVar3;
    char *pcVar4;
    int iVar5;
    uint uVar6;

    iVar5 = 0;
    do
    {
        uVar3 = FUN_00485880(iVar5, 0);
        (&DAT_00ec88e0)[iVar5] = uVar3;
        iVar5 = iVar5 + 1;
    } while (iVar5 < 0x100);
    EnterCriticalSection((LPCRITICAL_SECTION)&DAT_004d5e68);
    DAT_00ec89e0 = DAT_004d5e60;
    iVar5 = 0;
    uVar6 = _DAT_004d5e60 & 0xff;
    if (uVar6 != 0)
    {
        pcVar4 = &DAT_004d6316;
        do
        {
            uVar2 = (&DAT_004d6314)[iVar5 * 4];
            (&DAT_00ec89e4)[iVar5 * 2] = (&DAT_004d6310)[iVar5 * 2];
            cVar1 = *pcVar4;
            pcVar4 = pcVar4 + 8;
            (&DAT_00ec89e8)[iVar5 * 4] = uVar2 | -(ushort)(cVar1 != '\0') & 0x200;
            iVar5 = iVar5 + 1;
        } while (iVar5 < (int)uVar6);
    }
    _DAT_004d5e60 = _DAT_004d5e60 & 0xffffff00;
    LeaveCriticalSection((LPCRITICAL_SECTION)&DAT_004d5e68);
    return;
}

undefined_32 FUN_004081c0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00ec8740;
    MEMSET(iVar1, puVar2, 0, 0xb)
    return 1;
}

void FUN_004081e0(int param_1)

{
    if (param_1 != 0)
    {
        DAT_004b4314 = DAT_004b4314 + 1;
        return;
    }
    DAT_004b4314 = DAT_004b4314 + -1;
    return;
}

bool FUN_00408200(void)

{
    return 0 < DAT_004b4314;
}

void FUN_00408210(undefined_32 param_1)

{
    DAT_004b4314 = param_1;
    return;
}

void FUN_00408220(void)

{
    int iVar1;
    undefined_32 local_8;
    undefined_32 local_4;

    if (DAT_004b4314 < 1)
    {
        sprite_enable_display(0xf9, 0);
    }
    else
    {
        iVar1 = FUN_004082e0(&local_4, &local_8);
        if (iVar1 != 0)
        {
            sprite_set_pos(0xf9, local_4, local_8);
            sprite_scale(0xf9, 1.0f, 1.0f);
            sprite_set_color(0xf9, -1, -1, -1, -1);
            sprite_enable_display(0xf9, 1);
            FUN_004287e0(0xf9, 0x800);
            FUN_004287e0(0xf9, 0x10000);
            return;
        }
    }
    return;
}

undefined_32 FUN_004082e0(int *param_1, int *param_2)

{
    BOOL BVar1;
    tagPOINT local_8;

    if ((param_1 != NULL) && (param_2 != NULL))
    {
        *param_1 = 0;
        *param_2 = 0;
        BVar1 = GetCursorPos(&local_8);
        if (BVar1 != 0)
        {
            if (DAT_00ec86c4 == 0x200)
            {
                *param_1 = local_8.x + (local_8.x >> 2);
                *param_2 = local_8.y + (local_8.y >> 2);
                return 1;
            }
            *param_1 = local_8.x;
            *param_2 = local_8.y;
            return 1;
        }
    }
    return 0;
}

void FUN_00408360(int param_1, int param_2)

{
    if (DAT_00ec86c4 == 0x200)
    {
        SetCursorPos((param_1 << 9) / 0x280, (param_2 * DAT_00ec85e8) / 0x1e0);
        return;
    }
    SetCursorPos(param_1, param_2);
    return;
}

void FUN_004083c1(void)

{
    FUN_00409cf1();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004083d0(void)

{
    byte bVar1;
    int local_8;
    int local_4;

    DAT_00ec8740 = 0;
    if ((DAT_004d6b40 == 0) || (DAT_004d6b6c != 0 && DAT_004d6b48 != 0))
    {
        bVar1 = 0;
    }
    else
    {
        bVar1 = 1;
    }
    DAT_00ec8744 = -(uint)bVar1 & 2 | -(uint)((short)DAT_004d6b44 != 0) & 4;
    if (DAT_00ec8744 != DAT_00ec8748)
    {
        DAT_00ec8740 = 0x10000000;
        if (((DAT_00ec8744 ^ DAT_00ec8748) & 2) != 0)
        {
            DAT_00ec8740 = 0x10000002;
        }
        if (((DAT_00ec8744 ^ DAT_00ec8748) & 4) != 0)
        {
            DAT_00ec8740 = DAT_00ec8740 | 4;
        }
    }
    DAT_00ec8748 = DAT_00ec8744;
    FUN_004082e0(&local_8, &local_4);
    DAT_00ec874c = local_8;
    DAT_00ec8754 = local_4;
    if ((local_8 != DAT_00ec8750) || (local_4 != _DAT_00ec8758))
    {
        DAT_00ec8740 = DAT_00ec8740 | 0x80000001;
    }
    DAT_00ec8750 = local_8;
    DAT_00ec8764 = DAT_00ec87c4;
    _DAT_00ec8758 = local_4;
    DAT_00ec875c = DAT_00ec87c0;
    if ((DAT_00ec87c0 != _DAT_00ec8760) || (DAT_00ec87c4 != _DAT_00ec8768))
    {
        DAT_00ec8740 = DAT_00ec8740 | 0x20000001;
    }
    _DAT_00ec8760 = DAT_00ec87c0;
    _DAT_00ec8768 = DAT_00ec87c4;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00408510(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_004d6be4;
    MEMSET(iVar1, puVar2, 0, 0x1f)
    DAT_004d6be4 = 0x7c;
    _DAT_004d6be8 = 7;
    _DAT_004d6bf0 = 8;
    _DAT_004d6bec = 8;
    _DAT_004d6c4c = 0x800;
    iVar1 = (**(code **)(*DAT_0052e638 + 0x18))(DAT_0052e638, &DAT_004d6be4, &DAT_004d6be0, 0);
    if (iVar1 != 0)
    {
        DAT_004b4758 = 1;
        return;
    }
    DAT_004d6b74 = __ftol();
    DAT_004d6b70 = DAT_00ec8cb0 - (DAT_00ec8cb0 >> 3);
    puVar2 = (undefined_32 *)&stack0xffffff8c;
    MEMSET(iVar1, puVar2, 0, 0x19)
    DAT_004d6bd8 = 10;
    DAT_004d6bdc = DAT_004d6b74;
    (**(code **)(*DAT_004d6be0 + 0x14))(DAT_004d6be0, 0, 0, 0, 0x1000400, &stack0xffffff8c);
    _DAT_00ec86d4 = 0;
    _DAT_00ec86d0 = 0;
    DAT_004b4758 = 0;
    _DAT_00ec86d8 = 8;
    _DAT_00ec86dc = 8;
    return;
}

void FUN_00408620(void)

{
    if (DAT_004b4758 == 0)
    {
        (**(code **)(*DAT_004d6be0 + 8))(DAT_004d6be0);
    }
    return;
}

void FUN_00408640(void)

{
    int *piVar1;
    undefined_32 ***pppuStack_70;
    int iStack_6c;
    undefined_8 *puStack_68;
    int iStack_64;
    undefined_32 uStack_60;
    int *piStack_5c;
    undefined_32 ***pppuStack_58;
    int iStack_54;
    undefined_8 *puStack_50;
    int iStack_4c;
    undefined_32 uStack_48;
    int *piStack_44;
    int **ppiStack_40;
    int iStack_3c;
    undefined_8 *puStack_38;
    int iStack_34;
    undefined_32 uStack_30;
    int *piStack_2c;
    undefined_32 **ppuStack_28;
    int iStack_24;
    undefined_8 *puStack_20;
    int iStack_1c;
    undefined_32 uStack_18;
    undefined_32 **local_10;
    int local_c;
    int local_8;
    int local_4;

    if (DAT_004b4758 == 0)
    {
        local_8 = DAT_004d6bdc + (int)DAT_004d6b74;
        uStack_18 = 0;
        iStack_1c = 0x1000000;
        local_10 = DAT_004d6b74;
        local_c = DAT_004d6b70;
        puStack_20 = &DAT_00ec86d0;
        local_4 = DAT_004d6b70 + 1;
        iStack_24 = DAT_004d6be0;
        ppuStack_28 = &local_10;
        piStack_2c = DAT_00ec8d00;
        uStack_30 = 0x408698;
        (**(code **)(*DAT_00ec8d00 + 0x14))();
        iStack_1c = DAT_004d6b70 + DAT_004d6bd8;
        uStack_30 = 0;
        iStack_34 = 0x1000000;
        iStack_24 = iStack_1c + -1;
        puStack_20 = (undefined_8 *)(DAT_004d6bdc + (int)DAT_004d6b74);
        puStack_38 = &DAT_00ec86d0;
        iStack_3c = DAT_004d6be0;
        ppiStack_40 = (int **)&ppuStack_28;
        ppuStack_28 = DAT_004d6b74;
        piStack_44 = DAT_00ec8d00;
        uStack_48 = 0x4086e9;
        (**(code **)(*DAT_00ec8d00 + 0x14))();
        ppiStack_40 = DAT_004d6b74;
        puStack_38 = (undefined_8 *)((int)DAT_004d6b74 + 1);
        uStack_48 = 0;
        iStack_34 = DAT_004d6bd8 + DAT_004d6b70;
        iStack_4c = 0x1000000;
        puStack_50 = &DAT_00ec86d0;
        iStack_54 = DAT_004d6be0;
        pppuStack_58 = &ppiStack_40;
        iStack_3c = DAT_004d6b70;
        piStack_5c = DAT_00ec8d00;
        uStack_60 = 0x40872f;
        (**(code **)(*DAT_00ec8d00 + 0x14))();
        puStack_50 = (undefined_8 *)((int)DAT_004d6b74 + DAT_004d6bdc);
        uStack_60 = 0;
        pppuStack_58 = (undefined_32 ***)((int)puStack_50 + -1);
        iStack_4c = DAT_004d6bd8 + DAT_004d6b70;
        iStack_64 = 0x1000000;
        iStack_54 = DAT_004d6b70;
        puStack_68 = &DAT_00ec86d0;
        iStack_6c = DAT_004d6be0;
        pppuStack_70 = &pppuStack_58;
        (**(code **)(*DAT_00ec8d00 + 0x14))(DAT_00ec8d00);
        piVar1 = piStack_5c;
        if (100 < (int)piStack_5c)
        {
            piVar1 = (int *)0x64;
        }
        if ((int)piVar1 < 0)
        {
            piVar1 = NULL;
        }
        pppuStack_70 = (undefined_32 ***)DAT_004d6b74;
        puStack_68 = (undefined_8 *)(((int)piVar1 * DAT_004d6bdc) / 100 + (int)DAT_004d6b74);
        iStack_64 = DAT_004d6bd8 + DAT_004d6b70;
        iStack_6c = DAT_004d6b70;
        (**(code **)(*DAT_00ec8d00 + 0x14))(DAT_00ec8d00, &pppuStack_70, DAT_004d6be0, &DAT_00ec86d0, 0x1000000, 0);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00408800(void)

{
    _DAT_004d6c64 = 0;
    FUN_00408640(0);
    return;
}

void FUN_00408820(void)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;

    iVar1 = DAT_004b4330;
    puVar3 = &DAT_004b4320;
    puVar4 = &DAT_00ec86a0;
    QMEMCPY(iVar2, puVar3, puVar4, 9)
    if ((iVar1 == 0) || (DAT_00ec86b0 = 1, DAT_004b431c == 0))
    {
        DAT_00ec86b0 = 0;
    }
    if ((DAT_00ec86b4 == 0) || (DAT_00ec86b4 = 1, DAT_004b431c == 0))
    {
        DAT_00ec86b4 = 0;
    }
    return;
}

undefined_32 FUN_00408880(undefined_32 param_1)

{
    int iVar1;
    undefined_8 *puVar2;
    undefined_8 local_140[32];
    undefined_8 local_120[32];
    undefined_8 local_100[256];

    _sprintf(local_100, s__s_s__s_004b4830, s___data_config__004b252c, param_1, s_video_cfg_004b4838);
    iVar1 = FUN_004877d0(local_100);
    if (iVar1 == 0)
    {
        FUN_00487960();
        return -1;
    }
    _sprintf(local_120, s_VIDEO_004b4828);
    iVar1 = FUN_004879f0(s___________s_SETTINGS_004b4810, local_120);
    if (iVar1 == 0)
    {
        puVar2 = &DAT_004b480c;
        if (DAT_00ec86a0 == 0)
        {
            puVar2 = &DAT_004b4808;
        }
        _sprintf(local_140, s_REFLECTIONS__s_004b47f8, puVar2);
        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
        if (iVar1 == 0)
        {
            puVar2 = &DAT_004b480c;
            if (DAT_00ec86a4 == 0)
            {
                puVar2 = &DAT_004b4808;
            }
            _sprintf(local_140, s_ZEFFECTS__s_004b47ec, puVar2);
            iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
            if (iVar1 == 0)
            {
                puVar2 = &DAT_004b480c;
                if (DAT_00ec86a8 == 0)
                {
                    puVar2 = &DAT_004b4808;
                }
                _sprintf(local_140, s_DYNAMIC_LIGHTING__s_004b47d8, puVar2);
                iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                if (iVar1 == 0)
                {
                    puVar2 = &DAT_004b480c;
                    if (DAT_00ec86ac == 0)
                    {
                        puVar2 = &DAT_004b4808;
                    }
                    _sprintf(local_140, s_VSYNC__s_004b47cc, puVar2);
                    iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                    if (iVar1 == 0)
                    {
                        puVar2 = &DAT_004b480c;
                        if (DAT_00ec86b0 == 0)
                        {
                            puVar2 = &DAT_004b4808;
                        }
                        _sprintf(local_140, s_LENSFLARE__s_004b47bc, puVar2);
                        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                        if (iVar1 == 0)
                        {
                            puVar2 = &DAT_004b480c;
                            if (DAT_00ec86b4 == 0)
                            {
                                puVar2 = &DAT_004b4808;
                            }
                            _sprintf(local_140, s_ENGINEEXHAUST__s_004b47a8, puVar2);
                            iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                            if (iVar1 == 0)
                            {
                                _sprintf(local_140, s_TEXTURE_RES__i_004b4798, DAT_00ec86b8);
                                iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                if (iVar1 == 0)
                                {
                                    _sprintf(local_140, s_MODEL_DETAIL__i_004b4788, DAT_00ec86bc);
                                    iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                    if (iVar1 == 0)
                                    {
                                        _sprintf(local_140, s__DRAWDISTANCE__i_004b4777 + 1, DAT_00ec86c0);
                                        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                        if (iVar1 == 0)
                                        {
                                            iVar1 = FUN_004879a0(s__end__004b3cd8);
                                            if (iVar1 == 0)
                                            {
                                                FUN_00487960();
                                                return 1;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    FUN_00487960();
    return 0;
}

// 00408b60
// parse video.cfg file
undefined_32 parse_video_config(undefined_32 param_1)

{
    byte bVar1;
    int iVar2;
    byte *pbVar3;
    byte *pbVar4;
    bool bVar5;
    undefined_8 local_100[256];

    _sprintf(local_100, s__s_s__s_004b4830, s___data_config__004b252c, param_1, s_video_cfg_004b4838);
    iVar2 = file_access_fopen(local_100);
    if (iVar2 == 0)
    {
        file_access_close();
        return -1;
    }
    iVar2 = parse_line();
    if (iVar2 != 0)
    {
        do
        {
            pbVar4 = &DAT_004b3e7c;
            pbVar3 = DAT_00ec8e84;
            do
            {
                bVar1 = *pbVar3;
                bVar5 = bVar1 < *pbVar4;
                if (bVar1 != *pbVar4)
                {
                LAB_00408bef:
                    iVar2 = (1 - (uint)bVar5) - (uint)(bVar5 != 0);
                    goto LAB_00408bf4;
                }
                if (bVar1 == 0)
                    break;
                bVar1 = pbVar3[1];
                bVar5 = bVar1 < pbVar4[1];
                if (bVar1 != pbVar4[1])
                    goto LAB_00408bef;
                pbVar3 = pbVar3 + 2;
                pbVar4 = pbVar4 + 2;
            } while (bVar1 != 0);
            iVar2 = 0;
        LAB_00408bf4:
            if (iVar2 == 0)
                break;
            iVar2 = _strcmpi(DAT_00ec8e84, s_VIDEO_004b4828);
            if (iVar2 == 0)
            {
                iVar2 = _strcmpi(DAT_00ec8e8c, s_REFLECTIONS_004b48b4);
                if (iVar2 == 0)
                {
                    iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                    DAT_00ec86a0 = (uint)(iVar2 == 0);
                }
                else
                {
                    iVar2 = _strcmpi(DAT_00ec8e8c, s_ZEFFECTS_004b48a8);
                    if (iVar2 == 0)
                    {
                        iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                        DAT_00ec86a4 = (uint)(iVar2 == 0);
                    }
                    else
                    {
                        iVar2 = _strcmpi(DAT_00ec8e8c, s_DYNAMIC_LIGHTING_004b4894);
                        if (iVar2 == 0)
                        {
                            iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                            DAT_00ec86a8 = (uint)(iVar2 == 0);
                        }
                        else
                        {
                            iVar2 = _strcmpi(DAT_00ec8e8c, s_VSYNC_004b488c);
                            if (iVar2 == 0)
                            {
                                iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                                DAT_00ec86ac = (uint)(iVar2 == 0);
                            }
                            else
                            {
                                iVar2 = _strcmpi(DAT_00ec8e8c, s_LENSFLARE_004b4880);
                                if (iVar2 == 0)
                                {
                                    iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                                    DAT_00ec86b0 = (uint)(iVar2 == 0);
                                }
                                else
                                {
                                    iVar2 = _strcmpi(DAT_00ec8e8c, s_ENGINEEXHAUST_004b4870);
                                    if (iVar2 == 0)
                                    {
                                        iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                                        DAT_00ec86b4 = (uint)(iVar2 == 0);
                                    }
                                    else
                                    {
                                        iVar2 = _strcmpi(DAT_00ec8e8c, s_TEXTURE_RES_004b4864);
                                        if (iVar2 == 0)
                                        {
                                            DAT_00ec86b8 = atoi(DAT_00ec8e90);
                                        }
                                        else
                                        {
                                            iVar2 = _strcmpi(DAT_00ec8e8c, s_MODEL_DETAIL_004b4854);
                                            if (iVar2 == 0)
                                            {
                                                DAT_00ec86bc = atoi(DAT_00ec8e90);
                                            }
                                            else
                                            {
                                                iVar2 = _strcmpi(DAT_00ec8e8c, s_DRAWDISTANCE_004b4844);
                                                if (iVar2 != 0)
                                                {
                                                    file_access_close();
                                                    return 0;
                                                }
                                                DAT_00ec86c0 = atoi(DAT_00ec8e90);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            iVar2 = parse_line();
            if (iVar2 == 0)
            {
                file_access_close();
                return 1;
            }
        } while (true);
    }
    file_access_close();
    return 1;
}

// 00408e40
void *allocate(undefined_32 param_1)

{
    // PlatformAbstraction->allocator_large
    return (**(code **)(DAT_00ecc420 + 0x20))(param_1);
}

undefined_32 FUN_00408e60(undefined_32 param_1, undefined_32 param_2)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 uVar3;

    iVar1 = FUN_00445b60(param_1);
    // PlatformAbstraction->allocator_large
    puVar2 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(8);
    // PlatformAbstraction->allocator_large
    uVar3 = (**(code **)(DAT_00ecc420 + 0x20))(param_2);
    *puVar2 = uVar3;
    puVar2[1] = (&DAT_00ec8700)[iVar1];
    (&DAT_00ec8700)[iVar1] = puVar2;
    return *puVar2;
}

void FUN_00408eb0(int param_1)

{
    undefined_32 *puVar1;
    undefined_32 *puVar2;
    int iVar3;
    int iVar4;
    int iVar5;

    iVar5 = DAT_0050c6b0;
    if (DAT_0050c6b0 != 0)
    {
        *(int *)(DAT_0050c6b0 + 0x44) = *(int *)(DAT_0050c6b0 + 0x44) - (&DAT_00ec8660)[param_1];
        iVar5 = DAT_0050c6b0;
        (&DAT_00ec8660)[param_1] = 0;
    }
    iVar3 = DAT_004d6c6c;
    iVar4 = DAT_004d6c6c - (&DAT_00ec85c0)[param_1];
    DAT_004d6c6c = iVar4;
    (&DAT_00ec85c0)[param_1] = 0;
    if (iVar5 != 0)
    {
        *(int *)(iVar5 + 0x6c) = iVar4;
    }
    for (; iVar4 < iVar3; iVar4 = iVar4 + 1)
    {
        FUN_0048eac0(*(undefined_32 *)(DAT_004d6c68 + iVar4 * 4));
        *(undefined_32 *)(DAT_004d6c68 + iVar4 * 4) = 0;
    }
    puVar2 = (undefined_32 *)(&DAT_00ec8700)[param_1];
    while (puVar2 != NULL)
    {
        puVar1 = (undefined_32 *)puVar2[1];
        // PlatformAbstraction->allocator_free
        (**(code **)(DAT_00ecc420 + 0x24))(*puVar2);
        // PlatformAbstraction->allocator_free
        (**(code **)(DAT_00ecc420 + 0x24))(puVar2);
        puVar2 = puVar1;
    }
    (&DAT_00ec8700)[param_1] = 0;
    return;
}

void FUN_00408f70(int param_1)

{
    *(undefined_32 *)(param_1 + 0x68) = DAT_004d6c68;
    *(undefined_32 *)(param_1 + 0x6c) = DAT_004d6c6c;
    return;
}

void FUN_00408f90(void)

{
    DAT_004d6c6c = DAT_004d6c6c + -1;
    (&DAT_00ec85c0)[DAT_004d6c70] = (&DAT_00ec85c0)[DAT_004d6c70] + -1;
    return;
}

void FUN_00408fb0(undefined_32 param_1, int param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_32 *puVar4;

    if (param_2 != 0)
    {
        iVar1 = DAT_004d6c68;
        iVar3 = DAT_004d6c6c;
        if (DAT_004d6c68 == 0)
        {
            iVar1 = FUN_00408e60(param_1, 0x2000);
            iVar3 = 0;
            DAT_004d6c6c = 0;
            puVar4 = &DAT_00ec85c0;
            DAT_004d6c68 = iVar1;
            MEMSET(iVar2, puVar4, 0, 10)
        }
        if (iVar3 < 0x7ff)
        {
            *(int *)(iVar1 + iVar3 * 4) = param_2;
            DAT_004d6c6c = DAT_004d6c6c + 1;
            DAT_004d6c70 = FUN_00445b60(param_1);
            (&DAT_00ec85c0)[DAT_004d6c70] = (&DAT_00ec85c0)[DAT_004d6c70] + 1;
        }
    }
    return;
}

int FUN_00409040(undefined_32 param_1)

{
    undefined_32 *puVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    undefined_32 *local_e4;
    undefined_32 local_e0[56];

    if (DAT_004d6c60 == 0)
    {
        DAT_004d6c60 = FUN_0048e680(s___data_default_mat_004b48cc);
        local_e4 = local_e0;
        puVar1 = (undefined_32 *)FUN_00408e60(param_1, 0x200);
        _sprintf(DAT_004d6c60, s_Rovermatic_004b48c0);
        *(undefined_32 *)(DAT_004d6c60 + 10) = 1.0f;
        *(undefined_32 *)(DAT_004d6c60 + 0xe) = 1.0f;
        *(undefined_32 *)(DAT_004d6c60 + 0x44) = 1;
        *(undefined_32 *)(DAT_004d6c60 + 0x48) = 0x10;
        *(undefined_32 *)(DAT_004d6c60 + 0x4c) = 5;
        *(undefined_32 *)(DAT_004d6c60 + 0x50) = 6;
        *(undefined_32 *)(DAT_004d6c60 + 0x54) = 5;
        *(undefined_32 *)(DAT_004d6c60 + 0x70) = 0;
        *(undefined_32 *)(DAT_004d6c60 + 0x58) = 0xb;
        *(undefined_32 *)(DAT_004d6c60 + 0x5c) = 5;
        *(undefined_32 *)(DAT_004d6c60 + 0x60) = 0;
        *(undefined_32 *)(DAT_004d6c60 + 0x74) = 0;
        *(undefined_32 *)(DAT_004d6c60 + 100) = 3;
        *(undefined_32 *)(DAT_004d6c60 + 0x68) = 2;
        *(undefined_32 *)(DAT_004d6c60 + 0x6c) = 3;
        *(undefined_32 *)(DAT_004d6c60 + 0x78) = 0;
        *(undefined_32 *)(DAT_004d6c60 + 0x7c) = 0;
        *(undefined_32 *)(DAT_004d6c60 + 0x88) = 1;
        *(undefined_32 *)(DAT_004d6c60 + 0x8c) = 0;
        *local_e4 = 0;
        local_e4[1] = 0;
        local_e4[2] = 0;
        local_e4[3] = 0x10;
        local_e4[4] = 0x10;
        local_e4[5] = 0x200;
        local_e4[6] = 0x20;
        local_e4[7] = 0x10;
        puVar3 = (undefined_32 *)(DAT_004d6c60 + 0x44);
        puVar4 = local_e4 + 8;
        QMEMCPY(iVar2, puVar3, puVar4, 0xe)
        local_e4[0x16] = puVar1;
        local_e4[0x17] = 0;
        MEMSET(iVar2, puVar1, -1, 0x80)
        FUN_0048aa40(*(undefined_32 *)(DAT_004d6c60 + 0x90));
        FUN_0048a5e0(*(undefined_32 *)(DAT_004d6c60 + 0x90), &local_e4, 1, *(undefined_32 *)(DAT_004d6c60 + 0x7c));
    }
    return DAT_004d6c60;
}

int FUN_00409230(undefined_32 param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = FUN_00445b60(param_1);
    *(int *)(DAT_0050c6b0 + 0x44) = *(int *)(DAT_0050c6b0 + 0x44) + 1;
    iVar1 = (&DAT_00ec8660)[iVar2];
    (&DAT_00ec8660)[iVar2] = iVar1 + 1;
    return *(int *)(&DAT_004b4760 + iVar2 * 4) + iVar1 + 1;
}

void FUN_00409270(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00ec8660;
    MEMSET(iVar1, puVar2, 0, 10)
    *(undefined_32 *)(DAT_0050c6b0 + 0x44) = 0;
    return;
}

void FUN_00409290(uint param_1)

{
    uint uVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;
    uint *puVar6;
    int local_8;
    uint local_4;

    local_4 = 0;
    if (*(int *)(param_1 + 0x7c) != 0)
    {
        puVar6 = (uint *)(*(int *)(param_1 + 0x6c) + 0x10);
        uVar4 = param_1;
        do
        {
            uVar3 = *puVar6;
            uVar5 = 0;
            if (0 < (int)uVar3)
            {
                do
                {
                    local_8 = uVar5 - 1;
                    if (local_8 < 0)
                    {
                        local_8 = uVar3 - 1;
                    }
                    uVar1 = uVar5 + 1;
                    uVar4 = uVar1 % uVar3;
                    uVar3 = puVar6[1];
                    iVar2 = *(int *)(param_1 + 0x4c);
                    iVar2 = vec3f_are_normals_unknown(iVar2 + *(int *)(uVar3 + uVar5 * 4) * 0xc,
                                                      iVar2 + *(int *)(uVar3 + uVar4 * 4) * 0xc,
                                                      iVar2 + *(int *)(uVar3 + local_8 * 4) * 0xc);
                } while ((iVar2 != 0) && (uVar3 = *puVar6, uVar5 = uVar1, (int)uVar1 < (int)uVar3));
            }
            if ((int)uVar5 < (int)*puVar6)
            {
                uVar3 = puVar6[1];
                iVar2 = *(int *)(param_1 + 0x4c);
                vec3f_sub_cross_product(puVar6 + 0xb, iVar2 + *(int *)(uVar3 + uVar5 * 4) * 0xc,
                                        iVar2 + *(int *)(uVar3 + uVar4 * 4) * 0xc,
                                        iVar2 + *(int *)(uVar3 + local_8 * 4) * 0xc);
            }
            puVar6 = puVar6 + 0x12;
            local_4 = local_4 + 1;
        } while (local_4 < *(uint *)(param_1 + 0x7c));
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00409380(short param_1)

{
    int iVar1;
    float fVar2;

    if (1.0 <= (float)(int)param_1 * _DAT_004b4774)
    {
        DAT_00ec8578 = *(float *)(*(int *)(DAT_00df7f2c + 0x48) + 8);
    }
    else
    {
        DAT_00ec8578 = *(float *)(*(int *)(DAT_00df7f2c + 0x48) + 4) / (1.0 - (float)(int)param_1 * _DAT_004b4774);
    }
    iVar1 = *(int *)(DAT_00df7f2c + 0x48);
    if (*(float *)(iVar1 + 8) <= DAT_00ec8578)
    {
        FUN_0048fab0(0);
        return;
    }
    fVar2 = *(float *)(iVar1 + 8) - DAT_00ec8578;
    _DAT_00ec8574 = 1.0 / fVar2;
    DAT_00ec857c = DAT_00ec8578 - fVar2 * -0.7;
    iVar1 = *(int *)(DAT_00df7f2c + 0x48);
    if (DAT_00ec8578 < *(float *)(iVar1 + 4))
    {
        DAT_00ec8578 = *(float *)(iVar1 + 4);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00409450(short param_1, short param_2, short param_3, short param_4)

{
    DAT_00ec8564 = (float)(int)param_1 * 0.003921569;
    DAT_00ec8568 = (float)(int)param_2 * 0.003921569;
    DAT_00ec856c = (float)(int)param_3 * 0.003921569;
    _DAT_00ec8570 = (float)(int)param_4 * 0.003921569;
    FUN_0048b340(DAT_00ec8564, DAT_00ec8568, DAT_00ec856c, DAT_00ec8578, DAT_00ec857c);
    return;
}

void FUN_004094e0(int param_1)

{
    if (param_1 == 0)
    {
        FUN_0048fab0(0);
        return;
    }
    FUN_0048fab0(DAT_004d79d8);
    return;
}

void FUN_00409510(int param_1, int param_2)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;

    iVar2 = 0x270;
    puVar3 = &DAT_004b4348 + param_1 * 4;
    do
    {
        uVar1 = *puVar3;
        puVar3 = puVar3 + 1;
        *(undefined_32 *)(DAT_00ec85ec + iVar2) = uVar1;
        iVar2 = iVar2 + 4;
    } while (iVar2 < 0x27c);
    iVar2 = 0x18;
    puVar3 = &DAT_004b4418 + param_1 * 4;
    do
    {
        uVar1 = *puVar3;
        iVar2 = iVar2 + 4;
        puVar3 = puVar3 + 1;
        *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x70) + -4 + iVar2) = uVar1;
    } while (iVar2 < 0x28);
    *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x70) + 8) = 1;
    FUN_004903a0(DAT_00df7f2c, &DAT_004b4688 + param_1 * 4);
    if (1 < param_2)
    {
        iVar2 = 0x27c;
        puVar3 = (undefined_32 *)(&DAT_004b44e8 + param_1 * 0x10);
        do
        {
            uVar1 = *puVar3;
            puVar3 = puVar3 + 1;
            *(undefined_32 *)(DAT_00ec85ec + iVar2) = uVar1;
            iVar2 = iVar2 + 4;
        } while (iVar2 < 0x288);
        iVar2 = 0x18;
        puVar3 = (undefined_32 *)(&DAT_004b45b8 + param_1 * 0x10);
        do
        {
            uVar1 = *puVar3;
            iVar2 = iVar2 + 4;
            puVar3 = puVar3 + 1;
            *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x74) + -4 + iVar2) = uVar1;
        } while (iVar2 < 0x28);
        *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x74) + 8) = 1;
        return;
    }
    *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x74) + 8) = 0;
    return;
}

void FUN_00409600(int param_1, short param_2, short param_3, short param_4, short param_5, short param_6, short param_7,
                  short param_8, short param_9, short param_10)

{
    int iVar1;

    iVar1 = param_1 * 0x10;
    (&DAT_004b4348)[param_1 * 4] = (float)(int)param_8;
    (&DAT_004b434c)[param_1 * 4] = (float)(int)param_9;
    *(float *)(&DAT_004b4350 + iVar1) = (float)(int)param_10;
    (&DAT_004b4418)[param_1 * 4] = (float)(int)param_5 * 0.003921569;
    (&DAT_004b4688)[param_1 * 4] = (float)(int)param_2 * 0.003921569;
    (&DAT_004b441c)[param_1 * 4] = (float)(int)param_6 * 0.003921569;
    (&DAT_004b468c)[param_1 * 4] = (float)(int)param_3 * 0.003921569;
    *(float *)(&DAT_004b4420 + iVar1) = (float)(int)param_7 * 0.003921569;
    *(undefined_32 *)(&DAT_004b4424 + iVar1) = 1.0f;
    *(float *)(&DAT_004b4690 + iVar1) = (float)(int)param_4 * 0.003921569;
    *(undefined_32 *)(&DAT_004b4694 + iVar1) = 1.0f;
    return;
}

void FUN_00409700(short param_1)

{
    int iVar1;
    undefined_32 *puVar2;
    int iVar3;

    iVar1 = 0;
    iVar3 = param_1 * 0x10;
    puVar2 = &DAT_004b4688 + param_1 * 4;
    do
    {
        *(undefined_32 *)((int)&DAT_004b4348 + iVar1 + iVar3) = *(undefined_32 *)((int)&DAT_004b4348 + iVar1);
        *(undefined_32 *)((int)&DAT_004b4418 + iVar1 + iVar3) = *(undefined_32 *)((int)&DAT_004b4418 + iVar1);
        *puVar2 = *(undefined_32 *)((int)&DAT_004b4688 + iVar1);
        iVar1 = iVar1 + 4;
        puVar2 = puVar2 + 1;
    } while (iVar1 < 0xc);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00409800(int param_1)

{
    undefined_32 uVar1;
    uint extraout_ECX;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    ulonglong uVar5;
    undefined_32 local_78;
    undefined_32 local_74;
    undefined_32 local_70;
    undefined_32 local_6c;
    undefined_32 local_68;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50[20];

    FUN_00489ab0();
    uVar5 = FUN_00408640(0x1a);
    FUN_00489cd0((uint)((uVar5 & 0xffffff00ffffff00) >> 0x20) | (uint)DAT_00e229a8,
                 extraout_ECX & 0xffffff00 | (uint)DAT_00e229aa,
                 (uint)(uVar5 & 0xffffff00ffffff00) | (uint)DAT_00e229ac, 0);
    FUN_00408640(0x1c);
    DAT_00ec86c4 = DAT_00ec8e10;
    DAT_00ec85e8 = DAT_00ec8e0c;
    DAT_00ec86e0 = FUN_00490a50(0, &DAT_00ec8da0, 0, 0, DAT_00ec8e10, DAT_00ec8e0c);
    FUN_00490a30(*(undefined_32 *)(param_1 + 0x20));
    FUN_00490a40(*(undefined_32 *)(param_1 + 0x24));
    FUN_00490a20(1);
    FUN_00408640(0x1d);
    DAT_00ec85ec = FUN_0048fad0(75.0f, 0, 0x3da3d70a, 0x41700000, 1.0f);
    FUN_0048fc50(DAT_00ec85ec, DAT_00ec86e0);
    FUN_00408640(0x1e);
    FUN_0048fc70(DAT_00ec85ec);
    puVar3 = &DAT_004af880;
    puVar4 = &DAT_00ec8580;
    QMEMCPY(iVar2, puVar3, puVar4, 0xc)
    _DAT_00ec8550 = 0xc47a0000;
    _DAT_00ec8554 = 0xc4fa0000;
    _DAT_00ec8558 = 0x45fa0000;
    _DAT_00ec8730 = 0;
    _DAT_00ec8734 = 0;
    _DAT_00ec8738 = 0;
    rdCamera_Update(&DAT_00ec8580);
    FUN_00408640(0x20);
    iVar2 = FUN_00489d90(local_50);
    if (iVar2 != 0)
    {
        return 0;
    }
    FUN_0048fd10(DAT_00ec85ec, local_50[0]);
    FUN_004903d0(DAT_00ec85ec, 0.4f, 0.8f);
    FUN_00408640(0x22);
    FUN_0048fc50(DAT_00ec85ec, DAT_00ec86e0);
    FUN_004904f0(DAT_00ec85ec);
    FUN_00490510(&DAT_004d6b78);
    FUN_00490510(&DAT_004d6ba8);
    _DAT_004d6b7c = 0;
    _DAT_004d6bac = 0;
    _DAT_004d6b90 = 1.0f;
    _DAT_004d6bc0 = 1.0f;
    _DAT_004d6b98 = 0;
    _DAT_004d6b94 = 0;
    _DAT_004d6bc8 = 0;
    _DAT_004d6bc4 = 0;
    local_78 = 0;
    local_6c = 0;
    local_74 = 100.0f;
    local_68 = 100.0f;
    local_70 = -20.0f;
    local_64 = -20.0f;
    FUN_00408640(0x24);
    FUN_00490450(DAT_00ec85ec, &DAT_004d6b78, &local_78);
    FUN_00490450(DAT_00ec85ec, &DAT_004d6ba8, &local_6c);
    local_60 = 0;
    local_5c = 0;
    local_58 = 0.5f;
    local_54 = 1.0f;
    FUN_004903a0(DAT_00ec85ec, &local_60);
    uVar1 = FUN_00408640(0x26);
    DAT_004b4318 = 1;
    return uVar1;
}

void FUN_00409af0(void)

{
    FUN_00490b50(DAT_00ec86e0);
    FUN_0048fc10(DAT_00ec85ec);
    return;
}

bool FUN_00409b10(int *param_1)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    int local_84;
    undefined_32 local_80;
    undefined_32 local_7c;
    undefined_8 local_50[4];
    undefined_32 local_4c[19];

    iVar1 = parse_video_config(s_current_004b2640);
    if (iVar1 < 0)
    {
        FUN_00408820();
        FUN_00408880(s_current_004b2640);
    }
    if (*param_1 != 0)
    {
        DAT_0050b5c8 = 0;
    }
    iVar1 = FUN_00487d20();
    if (iVar1 == 0)
    {
        return true;
    }
    iVar1 = FUN_00487e00(param_1[4]);
    if (iVar1 == 0)
    {
        return true;
    }
    DAT_004b7a34 = param_1[4];
    iVar1 = FUN_00487f00(param_1[5], *param_1 == 0);
    if (iVar1 == 0)
    {
        return true;
    }
    iVar1 = FUN_00489d90(local_50);
    if (iVar1 != 0)
    {
        return true;
    }
    puVar3 = local_4c;
    puVar4 = &DAT_00ec8600;
    QMEMCPY(iVar1, puVar3, puVar4, 0x13)
    iVar1 = setWindowPos_init();
    if (iVar1 == 0)
    {
        setWindowPos(DAT_00ec8600, DAT_00ec8604);
    }
    iVar1 = FUN_00489dc0();
    if (iVar1 == 0)
    {
        MessageBoxA((HWND)0x0, s_Direct3D_Failure_No_3D_Hardware_F_004b4900, s_Racer_Error_004b4928, 0);
        _sprintf(s_Unknown_error_004b75f8, s_ERROR__No_3D_Hardware_Found___s_004b48e0, &DAT_00ecbc20);
        return true;
    }
    puVar3 = &DAT_00ec8700;
    MEMSET(iVar1, puVar3, 0, 10)
    local_7c = 1;
    local_80 = 1;
    local_84 = 1;
    uVar2 = FUN_0048ad50(&local_84);
    iVar1 = FUN_0048ad10(uVar2, &local_84);
    if ((iVar1 == 0) || (local_84 == 0))
    {
        FUN_00487e80();
        FUN_00489e40();
        FUN_00487da0();
    }
    else
    {
        iVar1 = FUN_00489ec0(param_1[6]);
        if (iVar1 != 0)
        {
            DAT_004d79d8 = FUN_0048a140();
            DAT_004b431c = FUN_0048a1a0();
            if (DAT_004b431c == 0)
            {
                DAT_00ec86b0 = DAT_004b431c;
                DAT_00ec86b4 = DAT_004b431c;
            }
            iVar1 = FUN_004909b0();
            return iVar1 == 0;
        }
    }
    return true;
}

void FUN_00409cf1(void)

{
    LPCRITICAL_SECTION unaff_retaddr;

    EnterCriticalSection(unaff_retaddr);
    FUN_0040b731();
    return;
}

void FUN_00409d00(void)

{
    int iVar1;

    iVar1 = 9;
    do
    {
        FUN_00408eb0(iVar1);
        iVar1 = iVar1 + -1;
    } while (-1 < iVar1);
    if (DAT_0050c6b0 != 0)
    {
        *(undefined_32 *)(DAT_0050c6b0 + 0x44) = 0;
        *(undefined_32 *)(DAT_0050c6b0 + 0x6c) = 0;
        *(undefined_32 *)(DAT_0050c6b0 + 0x68) = 0;
        FUN_0048ee40(DAT_0050c6b0);
    }
    FUN_00490bf0(DAT_0050c6b4);
    FUN_00490a00();
    FUN_0048a1c0();
    FUN_00488030();
    FUN_00487e80();
    FUN_00489e40();
    FUN_00487da0();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00409d70(uint param_1)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_16 local_30;
    char local_2e;

    if ((DAT_004b4b08 & 0xff) == param_1)
    {
        return 1;
    }
    if (8 < (int)param_1)
    {
        return 0;
    }
    if ((byte)DAT_004b4b08 < 9)
    {
        FUN_00403f00(&DAT_004d6d58);
    }
    puVar2 = &DAT_004d6c78;
    MEMSET(iVar1, puVar2, 0, 0x1c)
    puVar2 = &DAT_004d6ce8;
    MEMSET(iVar1, puVar2, 0, 0x1c)
    if ((int)param_1 < 0)
    {
        DAT_004b4b08 = CONCAT31(DAT_004b4b08._1_3_, 9);
        return 1;
    }
    FUN_00403e10(&DAT_004d6d58);
    if (DAT_004d55d4 == 0)
    {
        local_40 = s___data_bundle_fcr_004b4ca8._0_4_;
        local_3c = s___data_bundle_fcr_004b4ca8._4_4_;
        local_38 = s___data_bundle_fcr_004b4ca8._8_4_;
        local_34 = s___data_bundle_fcr_004b4ca8._12_4_;
        local_30 = s___data_bundle_fcr_004b4ca8._16_2_;
    }
    else
    {
        local_40 = s___data_bundle2_fcr_004b4cbc._0_4_;
        local_3c = s___data_bundle2_fcr_004b4cbc._4_4_;
        local_38 = s___data_bundle2_fcr_004b4cbc._8_4_;
        local_34 = s___data_bundle2_fcr_004b4cbc._12_4_;
        local_30 = s___data_bundle2_fcr_004b4cbc._16_2_;
        local_2e = s___data_bundle2_fcr_004b4cbc[18];
    }
    iVar1 = FUN_00403f30(&DAT_004d6d58, &local_40, &DAT_004b49b0, &PTR_s_GForce_004b4940);
    if (iVar1 < 0)
    {
        return 0;
    }
    iVar1 = FUN_00403fd0(&DAT_004d6d58);
    if (iVar1 < 0)
    {
        // PlatformAbstraction->debugFunction3
        (**(code **)(DAT_00ecc420 + 0x10))(s_BIZARRO_ALERT__cifr_LoadAllEffec_004b4c64);
        return 0;
    }
    DAT_004b4b08 = DAT_004b4b08 & 0xffffff00 | param_1 & 0xff;
    _DAT_004d765c = 1;
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// called if some engine part got repaired
undefined_32 FUN_00409ee0(float param_1, int param_2, int param_3, int param_4)

{
    undefined_8 *puVar1;
    int iVar2;
    int iVar3;
    undefined_32 uVar4;
    int iVar5;

    iVar5 = (int)param_1;
    iVar2 = FUN_0040a160(param_1);
    param_1 = DAT_004b493c;
    puVar1 = &DAT_004d6da0 + iVar2 * 0x174;
    if (DAT_004b2910 != 0)
    {
        if ((((float)(&DAT_00ec8400)[iVar5 * 3] < 0.0) || (*(float *)(&DAT_00ec8404 + iVar5 * 0xc) < 0.0))
            || (*(float *)(&DAT_00ec8408 + iVar5 * 0xc) < 0.0))
        {
            if (iVar5 != 0)
            {
                return 1;
            }
            if (_DAT_00ec84cc < 0.0)
            {
                return 1;
            }
            if (DAT_00ec84d0 < 0.0)
            {
                return 1;
            }
            if (_DAT_00ec84d4 < 0.0)
            {
                return 1;
            }
            iVar5 = 0x11;
        }
        iVar2 = FUN_0040a240(iVar5, 0);
        if (((&DAT_004d6ce8)[iVar5] != 0) && (iVar3 = FUN_00404280(puVar1), iVar3 == 0))
        {
            FUN_00404230(puVar1);
            (&DAT_004d6ce8)[iVar5] = 0;
            (&DAT_004d6c78)[iVar5] = 0;
        }
        if (iVar2 == 0)
        {
            return 0;
        }
        if (0.0 < *(float *)(&DAT_00ec8404 + iVar5 * 0xc))
        {
            param_1 = param_1 * *(float *)(&DAT_00ec8404 + iVar5 * 0xc);
        }
        if ((-1 < param_2) || (param_1 < 1.0))
        {
            uVar4 = __ftol(0);
            FUN_00404400(puVar1, uVar4);
        }
        if (-1 < param_3)
        {
            FUN_00404330(puVar1, param_3, 1);
        }
        if (-1 < param_4)
        {
            FUN_004044e0(puVar1, param_4, 0);
        }
        iVar2 = FUN_004041c0(puVar1, 0);
        if (iVar2 < 0)
        {
            return 0;
        }
        (&DAT_004d6ce8)[iVar5] = 1;
    }
    return 1;
}

undefined_32 FUN_0040a0b0(int param_1)

{
    int iVar1;
    int iVar2;

    iVar1 = FUN_0040a160(param_1);
    if ((&DAT_004d6ce8)[param_1] != 0)
    {
        (&DAT_004d6ce8)[param_1] = 0;
    }
    if ((&DAT_004d6da0 + iVar1 * 0x174 != NULL) && ((&DAT_004d6da4)[iVar1 * 0x5d] != 0))
    {
        iVar2 = FUN_0040a190(iVar1, param_1);
        if (iVar2 == 0)
        {
            FUN_00404230(&DAT_004d6da0 + iVar1 * 0x174);
            return 1;
        }
    }
    return 0;
}

void FUN_0040a120(int param_1)

{
    undefined_32 *puVar1;

    puVar1 = &DAT_004d6ef4;
    do
    {
        FUN_0040a0b0(*puVar1);
        puVar1 = puVar1 + 0x5d;
    } while ((int)puVar1 < 0x4d77ac);
    if (param_1 != 0)
    {
        FUN_00409ee0(0x11, -1, -1, -1, 0);
    }
    return;
}

int FUN_0040a160(uint param_1)

{
    int iVar1;
    uint *puVar2;

    iVar1 = 0;
    puVar2 = &DAT_004d6f10;
    do
    {
        if (param_1 < *puVar2 || param_1 == *puVar2)
            break;
        puVar2 = puVar2 + 0x5d;
        iVar1 = iVar1 + 1;
    } while ((int)puVar2 < 0x4d77c8);
    if (5 < iVar1)
    {
        iVar1 = -1;
    }
    return iVar1;
}

int FUN_0040a190(int param_1, uint param_2)

{
    byte bVar1;
    uint uVar2;
    byte *pbVar3;
    int iVar4;
    byte *pbVar5;
    bool bVar6;

    if (param_1 < 0)
    {
        return -1;
    }
    uVar2 = (&DAT_004d6ef4)[param_1 * 0x5d];
    if ((int)uVar2 < 0)
    {
        return 2;
    }
    if (uVar2 == param_2)
    {
        return 0;
    }
    pbVar5 = (&PTR_s_GForce_004b4940)[param_2];
    pbVar3 = &DAT_004d6ef8 + param_1 * 0x174;
    do
    {
        bVar1 = *pbVar3;
        bVar6 = bVar1 < *pbVar5;
        if (bVar1 != *pbVar5)
        {
        LAB_0040a20d:
            iVar4 = (1 - (uint)bVar6) - (uint)(bVar6 != 0);
            goto LAB_0040a212;
        }
        if (bVar1 == 0)
            break;
        bVar1 = pbVar3[1];
        bVar6 = bVar1 < pbVar5[1];
        if (bVar1 != pbVar5[1])
            goto LAB_0040a20d;
        pbVar3 = pbVar3 + 2;
        pbVar5 = pbVar5 + 2;
    } while (bVar1 != 0);
    iVar4 = 0;
LAB_0040a212:
    if (iVar4 == 0)
    {
        return 1;
    }
    if (uVar2 < param_2)
    {
        return 3;
    }
    if (param_2 < uVar2)
    {
        iVar4 = 4;
    }
    return iVar4;
}

undefined_32 FUN_0040a240(int param_1, int param_2)

{
    char cVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    uint uVar5;
    uint uVar6;
    undefined_32 *puVar7;
    char *pcVar8;
    char *pcVar9;
    undefined_32 *puVar10;

    iVar2 = FUN_0040a160(param_1);
    iVar3 = FUN_0040a190(iVar2, param_1);
    if (iVar3 < 0)
    {
        return 0;
    }
    if (((3 < iVar3) && (param_2 == 0)) && (iVar4 = FUN_00404280(&DAT_004d6da0 + iVar2 * 0x174), iVar4 != 0))
    {
        return 0;
    }
    (&DAT_004d6ce8)[(&DAT_004d6ef4)[iVar2 * 0x5d]] = 0;
    (&DAT_004d6c78)[(&DAT_004d6ef4)[iVar2 * 0x5d]] = 0;
    (&DAT_004d6ef4)[iVar2 * 0x5d] = param_1;
    (&DAT_004d6c78)[param_1] = 0;
    if (1 < iVar3)
    {
        uVar5 = -1;
        pcVar8 = (&PTR_s_GForce_004b4940)[param_1];
        do
        {
            pcVar9 = pcVar8;
            if (uVar5 == 0)
                break;
            uVar5 = uVar5 - 1;
            pcVar9 = pcVar8 + 1;
            cVar1 = *pcVar8;
            pcVar8 = pcVar9;
        } while (cVar1 != '\0');
        uVar5 = ~uVar5;
        puVar7 = (undefined_32 *)(pcVar9 + -uVar5);
        puVar10 = (undefined_32 *)(&DAT_004d6ef8 + iVar2 * 0x174);
        QMEMCPY(uVar6, puVar7, puVar10, uVar5 >> 2)
        for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
        {
            *(undefined_8 *)puVar10 = *(undefined_8 *)puVar7;
            puVar7 = (undefined_32 *)((int)puVar7 + 1);
            puVar10 = (undefined_32 *)((int)puVar10 + 1);
        }
        iVar2 = FUN_004040a0(&DAT_004d6da0 + iVar2 * 0x174, (&PTR_s_GForce_004b4940)[param_1], DAT_004d6d98);
        if (iVar2 == 0)
        {
            return 0;
        }
        (&DAT_004d6ce8)[param_1] = 0;
    }
    return 1;
}

int FUN_0040a330(int param_1, int param_2)

{
    undefined_8 *puVar1;
    int iVar2;
    int iVar3;
    undefined_32 *puVar4;
    uint uVar5;
    uint uVar6;
    undefined_32 *puVar7;
    undefined_32 *puVar8;
    undefined_8 local_d;
    int local_c;
    int local_8;
    uint local_4;

    iVar2 = FUN_0040a160(param_1);
    local_c = 0;
    if (((((-1 < iVar2) && ((&DAT_004d6ef4)[iVar2 * 0x5d] == param_1))
          && (local_8 = param_1 * 0xc, 0.0 <= (float)(&DAT_00ec8400)[param_1 * 3]))
         && ((0.0 <= *(float *)(&DAT_00ec8404 + local_8) && (0.0 <= *(float *)(&DAT_00ec8408 + local_8)))))
        && (puVar1 = &DAT_004d6da0 + iVar2 * 0x174, (&DAT_004d6da4)[iVar2 * 0x5d] != 0))
    {
        iVar3 = FUN_00404280(puVar1);
        if (iVar3 == 0)
        {
            local_c = 1;
        }
        if ((local_c == 0) && ((&DAT_004d6c78)[param_1] == param_2))
        {
            return 1;
        }
        iVar3 = FUN_00404670(puVar1, &local_d);
        if (iVar3 != 0)
        {
            uVar6 = (&DAT_004d6dd4)[iVar2 * 0x5d];
            local_4 = uVar6;
            // PlatformAbstraction->allocator_large
            puVar4 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(uVar6);
            puVar7 = (undefined_32 *)(&DAT_004d6ef0)[iVar2 * 0x5d];
            puVar8 = puVar4;
            QMEMCPY(uVar5, puVar7, puVar8, uVar6 >> 2)
            for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
            {
                *(undefined_8 *)puVar8 = *(undefined_8 *)puVar7;
                puVar7 = (undefined_32 *)((int)puVar7 + 1);
                puVar8 = (undefined_32 *)((int)puVar8 + 1);
            }
            iVar3 = __ftol();
            iVar2 = local_c;
            puVar4[1] = iVar3;
            puVar4[2] = iVar3;
            if (DAT_004d55d4 == 0)
            {
                iVar3 = ((int)puVar4[7] / iVar3) * param_2;
                puVar4[7] = iVar3;
                puVar4[8] = iVar3;
            }
            (&DAT_004d6c78)[param_1] = param_2;
            iVar3 = FUN_00404590(puVar1, local_4, puVar4, local_c);
            // PlatformAbstraction->allocator_free
            (**(code **)(DAT_00ecc420 + 0x24))(puVar4);
            if ((iVar3 != 0) && (iVar2 != 0))
            {
                (&DAT_004d6ce8)[param_1] = 1;
            }
            return iVar3;
        }
    }
    return 0;
}

int FUN_0040a500(int param_1, int param_2)

{
    undefined_8 *puVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    undefined_32 *puVar5;
    uint uVar6;
    undefined_32 *puVar7;
    undefined_32 *puVar8;
    undefined_8 local_9;
    int local_8;
    undefined_8 *local_4;

    iVar3 = FUN_0040a160(param_1);
    local_8 = 0;
    if ((-1 < iVar3) && ((&DAT_004d6ef4)[iVar3 * 0x5d] == param_1))
    {
        if ((0.0 <= (float)(&DAT_00ec8400)[param_1 * 3])
            && ((0.0 <= *(float *)(&DAT_00ec8404 + param_1 * 0xc)
                 && (0.0 <= *(float *)(&DAT_00ec8408 + param_1 * 0xc)))))
        {
            puVar1 = &DAT_004d6da0 + iVar3 * 0x174;
            if ((&DAT_004d6da4)[iVar3 * 0x5d] != 0)
            {
                local_4 = puVar1;
                iVar4 = FUN_00404280(puVar1);
                if (iVar4 == 0)
                {
                    local_8 = 1;
                }
                if ((local_8 == 0) && ((&DAT_004d6c78)[param_1] == param_2))
                {
                    return 1;
                }
                iVar4 = FUN_00404670(puVar1, &local_9);
                if (iVar4 != 0)
                {
                    uVar2 = (&DAT_004d6dd4)[iVar3 * 0x5d];
                    // PlatformAbstraction->allocator_large
                    puVar5 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(uVar2);
                    iVar4 = local_8;
                    puVar7 = (undefined_32 *)(&DAT_004d6ef0)[iVar3 * 0x5d];
                    puVar8 = puVar5;
                    QMEMCPY(uVar6, puVar7, puVar8, uVar2 >> 2)
                    for (uVar6 = uVar2 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
                    {
                        *(undefined_8 *)puVar8 = *(undefined_8 *)puVar7;
                        puVar7 = (undefined_32 *)((int)puVar7 + 1);
                        puVar8 = (undefined_32 *)((int)puVar8 + 1);
                    }
                    puVar5[3] = param_2;
                    (&DAT_004d6c78)[param_1] = param_2;
                    iVar3 = FUN_00404590(local_4, uVar2, puVar5, local_8);
                    // PlatformAbstraction->allocator_free
                    (**(code **)(DAT_00ecc420 + 0x24))(puVar5);
                    if ((iVar3 != 0) && (iVar4 != 0))
                    {
                        (&DAT_004d6ce8)[param_1] = 1;
                    }
                    return iVar3;
                }
            }
        }
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// Force-Feedback.c
static inline float selectStrengthFactor(uint32_t strength)
{
    if (strength == 0)
    {
        return -1.0f;
    }
    else if (strength == 1)
    {
        return 0.6f;
    }
    else
    {
        if (strength != 2)
        {
            return 1.0f;
        }
        return 0.8f;
    }
}

// Force-Feedback.c
void FUN_0040a680(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00ec8400;
    MEMSET(iVar1, puVar2, 0, 0x54)
    DAT_004b493c = selectStrengthFactor(DAT_00ec83e0);
    DAT_00ec84d0 = selectStrengthFactor(DAT_00ec83e4);
    _DAT_00ec8404 = -1;
    if (DAT_00ec83f8 != 0)
    {
        _DAT_00ec8404 = 1;
    }
    _DAT_00ec8518 = -1;
    if (DAT_00ec83fc != 0)
    {
        _DAT_00ec8518 = 1;
    }

    _DAT_00ec84e8 = selectStrenghtFactor(DAT_00ec83e8);
    _DAT_00ec84f4 = selectStrenghtFactor(DAT_00ec83e8);
    _DAT_00ec8434 = selectStrenghtFactor(DAT_00ec83f4);
    _DAT_00ec8440 = selectStrenghtFactor(DAT_00ec83f4);
    _DAT_00ec8458 = selectStrenghtFactor(DAT_00ec83f4);
    _DAT_00ec8464 = selectStrenghtFactor(DAT_00ec83f4);
    _DAT_00ec847c = selectStrenghtFactor(DAT_00ec83f4);
    _DAT_00ec8488 = selectStrenghtFactor(DAT_00ec83f4);
    _DAT_00ec841c = selectStrenghtFactor(DAT_00ec83f4);
    _DAT_00ec844c = selectStrenghtFactor(DAT_00ec83f4);
    _DAT_00ec8470 = selectStrenghtFactor(DAT_00ec83f0);
    _DAT_00ec850c = selectStrenghtFactor(DAT_00ec83ec);
    _DAT_00ec8548 = selectStrenghtFactor(DAT_00ec83ec);
    _DAT_00ec8410 = selectStrenghtFactor(DAT_00ec83ec);
    _DAT_00ec8500 = selectStrenghtFactor(DAT_00ec83ec);
    _DAT_00ec853c = selectStrenghtFactor(DAT_00ec83ec);
    _DAT_00ec84a0 = 1.0f;
    _DAT_00ec8494 = 1.0f;
    _DAT_00ec8428 = 1.0f;
    _DAT_00ec84dc = 1.0f;
    _DAT_00ec8524 = 1.0f;
    _DAT_00ec8530 = 1.0f;
    _DAT_00ec84ac = 1.0f;
    _DAT_00ec84b8 = 1.0f;
    _DAT_00ec84c4 = 1.0f;
    return;
}

void FUN_0040ab60(void)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;

    // Strcpy
    puVar2 = &DAT_004b4ae8;
    puVar3 = &DAT_00ec83e0;
    QMEMCPY(iVar1, puVar2, puVar3, 8)
    FUN_0040a680();
    return;
}

undefined_32 FUN_0040ab80(undefined_32 param_1)

{
    int iVar1;
    undefined_8 *puVar2;
    char *pcVar3;
    undefined_8 local_140[32];
    undefined_8 local_120[32];
    undefined_8 local_100[256];

    _sprintf(local_100, s__s_s__s_004b4830, s___data_config__004b252c, param_1, s_force_cfg_004b4d64);
    iVar1 = FUN_004877d0(local_100);
    if (iVar1 == 0)
    {
        FUN_00487960();
        return -1;
    }
    _sprintf(local_120, s_FORCEFEEDBACK_004b4d54);
    iVar1 = FUN_004879f0(s___________s_SETTINGS_004b4810, local_120);
    if (iVar1 == 0)
    {
        _sprintf(local_140, s_STRENGTH__i_004b4d48, DAT_00ec83e0);
        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
        if (iVar1 == 0)
        {
            _sprintf(local_140, s_AUTOCENTER__i_004b4d38, DAT_00ec83e4);
            iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
            if (iVar1 == 0)
            {
                _sprintf(local_140, s_COLLISIONS__i_004b4d28, DAT_00ec83e8);
                iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                if (iVar1 == 0)
                {
                    _sprintf(local_140, s_DAMAGE__i_004b4d1c, DAT_00ec83ec);
                    iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                    if (iVar1 == 0)
                    {
                        _sprintf(local_140, s_TERRAIN__i_004b4d10, DAT_00ec83f0);
                        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                        if (iVar1 == 0)
                        {
                            _sprintf(local_140, s_PODACTIONS__i_004b4d00, DAT_00ec83f4);
                            iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                            if (iVar1 == 0)
                            {
                                puVar2 = &DAT_004b480c;
                                if (DAT_00ec83f8 == 0)
                                {
                                    puVar2 = &DAT_004b4808;
                                }
                                _sprintf(local_140, s_GFORCES__s_004b4cf4, puVar2);
                                iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                if (iVar1 == 0)
                                {
                                    puVar2 = &DAT_004b480c;
                                    if (DAT_00ec83fc == 0)
                                    {
                                        puVar2 = &DAT_004b4808;
                                    }
                                    _sprintf(local_140, s_ENGINERUMBLE__s_004b4ce4, puVar2);
                                    iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                    if (iVar1 == 0)
                                    {
                                        pcVar3 = &DAT_004b3e04;
                                        if (DAT_004b2910 == 0)
                                        {
                                            pcVar3 = s_FALSE_004b4cdc;
                                        }
                                        _sprintf(local_140, s_ENABLED__s_004b4cd0, pcVar3);
                                        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                        if (iVar1 == 0)
                                        {
                                            iVar1 = FUN_004879a0(s__end__004b3cd8);
                                            if (iVar1 == 0)
                                            {
                                                FUN_00487960();
                                                return 1;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    FUN_00487960();
    return 0;
}

undefined_32 FUN_0040ae40(undefined_32 param_1)

{
    byte bVar1;
    int iVar2;
    byte *pbVar3;
    byte *pbVar4;
    bool bVar5;
    undefined_8 local_100[256];

    _sprintf(local_100, s__s_s__s_004b4830, s___data_config__004b252c, param_1, s_force_cfg_004b4d64);
    iVar2 = file_access_fopen(local_100);
    if (iVar2 == 0)
    {
        file_access_close();
        return -1;
    }
    iVar2 = parse_line();
    while (iVar2 != 0)
    {
        pbVar4 = &DAT_004b3e7c;
        pbVar3 = DAT_00ec8e84;
        do
        {
            bVar1 = *pbVar3;
            bVar5 = bVar1 < *pbVar4;
            if (bVar1 != *pbVar4)
            {
            LAB_0040aed4:
                iVar2 = (1 - (uint)bVar5) - (uint)(bVar5 != 0);
                goto LAB_0040aed9;
            }
            if (bVar1 == 0)
                break;
            bVar1 = pbVar3[1];
            bVar5 = bVar1 < pbVar4[1];
            if (bVar1 != pbVar4[1])
                goto LAB_0040aed4;
            pbVar3 = pbVar3 + 2;
            pbVar4 = pbVar4 + 2;
        } while (bVar1 != 0);
        iVar2 = 0;
    LAB_0040aed9:
        if (iVar2 == 0)
            break;
        iVar2 = _strcmpi(DAT_00ec8e84, s_FORCEFEEDBACK_004b4d54);
        if (iVar2 == 0)
        {
            iVar2 = _strcmpi(DAT_00ec8e8c, s_STRENGTH_004b4dbc);
            if (iVar2 == 0)
            {
                DAT_00ec83e0 = atoi(DAT_00ec8e90);
            }
            else
            {
                iVar2 = _strcmpi(DAT_00ec8e8c, s_AUTOCENTER_004b4db0);
                if (iVar2 == 0)
                {
                    DAT_00ec83e4 = atoi(DAT_00ec8e90);
                }
                else
                {
                    iVar2 = _strcmpi(DAT_00ec8e8c, s_COLLISIONS_004b4da4);
                    if (iVar2 == 0)
                    {
                        DAT_00ec83e8 = atoi(DAT_00ec8e90);
                    }
                    else
                    {
                        iVar2 = _strcmpi(DAT_00ec8e8c, s_DAMAGE_004b4d9c);
                        if (iVar2 == 0)
                        {
                            DAT_00ec83ec = atoi(DAT_00ec8e90);
                        }
                        else
                        {
                            iVar2 = _strcmpi(DAT_00ec8e8c, s_TERRAIN_004b4d94);
                            if (iVar2 == 0)
                            {
                                DAT_00ec83f0 = atoi(DAT_00ec8e90);
                            }
                            else
                            {
                                iVar2 = _strcmpi(DAT_00ec8e8c, s_PODACTIONS_004b4d88);
                                if (iVar2 == 0)
                                {
                                    DAT_00ec83f4 = atoi(DAT_00ec8e90);
                                }
                                else
                                {
                                    iVar2 = _strcmpi(DAT_00ec8e8c, s_GFORCES_004b4d80);
                                    if (iVar2 == 0)
                                    {
                                        iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                                        DAT_00ec83f8 = (uint)(iVar2 == 0);
                                    }
                                    else
                                    {
                                        iVar2 = _strcmpi(DAT_00ec8e8c, s_ENGINERUMBLE_004b4d70);
                                        if (iVar2 == 0)
                                        {
                                            iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                                            DAT_00ec83fc = (uint)(iVar2 == 0);
                                        }
                                        else
                                        {
                                            iVar2 = _strcmpi(DAT_00ec8e8c, s_ENABLED_004b3e0c);
                                            if (iVar2 != 0)
                                            {
                                                file_access_close();
                                                return 0;
                                            }
                                            if ((DAT_004b4938 != 0) && (DAT_004b2914 != 0))
                                            {
                                                iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b3e04);
                                                DAT_004b2910 = 1;
                                                if (iVar2 == 0)
                                                    goto LAB_0040b0d6;
                                            }
                                            DAT_004b2910 = 0;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    LAB_0040b0d6:
        iVar2 = parse_line();
    }
    file_access_close();
    FUN_0040a680();
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0040b110(int param_1)

{
    DAT_004d78a8 = param_1;
    DAT_004d78a4 = *(undefined_32 *)(param_1 + 0x1e70);
    _DAT_004d7898 = *(undefined_32 *)(param_1 + 0x7c);
    _DAT_004d7770 = 0;
    _DAT_004d7660 = 0x45cb2000;
    _DAT_004d7780 = 0xc77fff00;
    return;
}

void FUN_0040b150(undefined_32 param_1, undefined_32 param_2)

{
    if ((((DAT_004b2910 != 0) && (DAT_004d78a4 != 0)) && (*(int *)(DAT_004d78a4 + 0x84) != 0))
        && (((DAT_004d78a8 != 0 && (DAT_004d789c != 0)) && ((*(uint *)(DAT_004d78a8 + 0x60) & 0x5000) == 0))))
    {
        FUN_0040b1c0(param_1, param_2);
        FUN_0040b3d0(param_1, param_2);
        FUN_0040b5e0(param_1, param_2);
    }
    return;
}

void FUN_0040b1c0(void)

{
    float fVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    uint uVar5;
    float *pfVar6;
    undefined_32 uVar7;
    uint local_10;
    int local_c;

    iVar3 = DAT_004d78a8;
    local_10 = 0;
    local_c = 0;
    if ((*(uint *)(DAT_004d78a8 + 100) & 0x4000) != 0)
    {
        FUN_00409ee0(0x16, -1, -1, -1, 0);
        FUN_00409ee0(9, -1, -1, -1, 0);
        return;
    }
    if (1.0 <= *(float *)(DAT_004d78a8 + 0x244))
    {
        FUN_0040a500(0x17, 8000);
        DAT_004d78b0 = 0;
        iVar3 = DAT_004d78a8;
    }
    else
    {
        iVar2 = __ftol();
        iVar4 = iVar2 - DAT_004b4dcc;
        if (iVar4 < 0)
        {
            iVar4 = DAT_004b4dcc - iVar2;
        }
        if (19999 < iVar4)
        {
            FUN_0040a500(0x17, iVar2);
            iVar3 = DAT_004d78a8;
            DAT_004b4dcc = iVar2;
        }
        DAT_004d78b0 = 1;
    }
    iVar2 = 0;
    if ((*(byte *)(iVar3 + 100) & 1) == 0)
    {
        FUN_0040a0b0(9);
    }
    else
    {
        FUN_00409ee0(9, -1, -1, -1, 0);
    }
    if ((*(uint *)(DAT_004d78a8 + 100) & 0x200) == 0)
    {
        FUN_0040a0b0(0xd);
        if ((((*(int *)(DAT_004d78a8 + 0x140) == 0) || (*(float *)(DAT_004d78a8 + 0x1a0) <= 50.0))
             || (iVar3 = FUN_004318b0(*(int *)(DAT_004d78a8 + 0x140)), iVar3 == 0))
            || ((*(byte *)(iVar3 + 0x2c) & 0x20) == 0))
            goto LAB_0040b32d;
        uVar7 = 0xc;
    }
    else
    {
        uVar7 = 0xd;
    }
    FUN_00409ee0(uVar7, -1, -1, -1, 0);
LAB_0040b32d:
    uVar5 = 0;
    fVar1 = -1.0;
    pfVar6 = (float *)(DAT_004d78a8 + 0x288);
    do
    {
        if (fVar1 < *pfVar6)
        {
            fVar1 = *pfVar6;
            local_10 = local_10 | (uint)pfVar6[6];
            if (uVar5 < 3)
            {
                local_c = local_c + 1;
            }
            else
            {
                iVar2 = iVar2 + 1;
            }
        }
        uVar5 = uVar5 + 1;
        pfVar6 = pfVar6 + 1;
    } while ((int)uVar5 < 6);
    if ((local_10 & 8) != 0)
    {
        FUN_00409ee0(0x1a, -1, (uint)(local_c < iVar2) * 0xb4 + 0x5a, -1, 0);
        return;
    }
    FUN_0040a0b0(0x1a);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0040b3d0(void)

{
    float fVar1;
    float fVar2;
    int iVar3;
    int iVar4;

    fVar1 = *(float *)(DAT_004d78a8 + 0x1a0) / _DAT_004d7898;
    if ((((_DAT_004d7780 == -65535.0) || (DAT_004d78ac == 0)) || (DAT_004d78a0 != 0))
        && (iVar3 = FUN_00409ee0(0, -1, -1, -1, 0), iVar3 != 0))
    {
        DAT_004d78ac = 1;
        DAT_004d78a0 = 0;
    }
    fVar2 = _DAT_004d78b4 - fVar1;
    if (fVar2 < 0.0)
    {
        fVar2 = -fVar2;
    }
    _DAT_004b4dd0 = (uint)(0.1 < fVar2);
    if (_DAT_004b4dd0 == 0)
    {
        if (DAT_004d78b8 == 0)
        {
            if ((_DAT_004d7898 <= fVar1) || (fVar1 == _DAT_004d7770))
            {
                _DAT_004b4dd0 = 1;
                DAT_004d78b8 = _DAT_004b4dd0;
            }
            else
            {
                _DAT_004b4dd0 = 0;
                DAT_004d78b8 = _DAT_004b4dd0;
            }
        }
    }
    else
    {
        DAT_004d78b8 = 0;
    }
    fVar2 = _DAT_004d78b4;
    if (_DAT_004b4dd0 != 0)
    {
        __ftol();
        iVar3 = __ftol();
        if ((*(uint *)(DAT_004d78a8 + 0x60) & 0x800000) == 0)
        {
            if (500.0 <= (float)iVar3)
            {
                iVar4 = DAT_004d78c0 - iVar3;
                if (iVar4 < 0)
                {
                    iVar4 = iVar3 - DAT_004d78c0;
                }
                if (iVar4 < 500)
                {
                    iVar3 = DAT_004d78c0;
                }
            }
            else
            {
                iVar3 = 500;
            }
        }
        else
        {
            iVar3 = 0x251c;
        }
        FUN_0040a330(0, iVar3);
        fVar2 = fVar1;
        DAT_004d78c0 = iVar3;
        if (DAT_004d78b0 == 0)
        {
            iVar3 = __ftol();
            iVar4 = DAT_004d78bc - iVar3;
            if (iVar4 < 0)
            {
                iVar4 = iVar3 - DAT_004d78bc;
            }
            if (iVar4 < 10)
            {
                iVar3 = DAT_004d78bc;
            }
            DAT_004d78bc = iVar3;
            FUN_00409ee0(0x17, DAT_004d78bc, -1, -1, 0);
        }
    }
    _DAT_004d78b4 = fVar2;
    _DAT_004d7780 = fVar1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0040b5e0(void)

{
    int iVar1;
    uint uVar2;
    uint uVar3;
    undefined_32 uVar4;

    if ((*(uint *)(DAT_004d78a8 + 100) & 0x2000) == 0)
    {
        uVar2 = *(uint *)(DAT_004d78a8 + 0x60) & 0x800000;
        if ((uVar2 == 0) || (DAT_004d78c8 != 0))
        {
            if ((uVar2 == 0) && (DAT_004d78c8 != 0))
            {
                FUN_00409ee0(8, -1, -1, -1, 0);
                DAT_004d78c8 = 0;
            }
        }
        else
        {
            FUN_00409ee0(7, -1, -1, -1, 0);
            DAT_004d78c8 = 1;
        }
    }
    else
    {
        FUN_00409ee0(6, -1, -1, -1, 0);
    }
    if (((*(uint *)(DAT_004d78a8 + 100) & 8) == 0) || (_DAT_00ec8854 == 0.0))
    {
        iVar1 = FUN_0040a0b0(2);
        if (iVar1 != 0)
        {
            DAT_004d78ac = 0;
        }
    }
    else if ((*(uint *)(DAT_004d78a8 + 100) & 0x200) == 0)
    {
        FUN_00409ee0(2, -1, -1, -1, 0);
    }
    iVar1 = DAT_004d78a8;
    if (*(float *)(DAT_004d78a8 + 0x208) != 0.0)
    {
        if (_DAT_004d78c4 != 0.0)
        {
            uVar2 = __ftol();
            uVar3 = __ftol();
            if (-1 < (int)(uVar2 ^ uVar3))
                goto LAB_0040b71c;
        }
        if (0.0 <= *(float *)(iVar1 + 0x208))
        {
            uVar4 = 0x10e;
        }
        else
        {
            uVar4 = 0x5a;
        }
        FUN_00409ee0(10, -1, uVar4, -1, 0);
    }
LAB_0040b71c:
    _DAT_004d78c4 = (float)*(undefined_32 *)(DAT_004d78a8 + 0x208);
    return;
}

void FUN_0040b731(void)

{
    FUN_00422c0d();
    return;
}

void FUN_0040b740(int param_1, undefined_32 param_2)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 uVar4;
    undefined_8 local_40[64];

    FUN_0040c670(param_1, param_2, 0x27, 0, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x29, 1, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x2b, 2, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x2d, 3, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x2f, 4, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x31, 5, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x33, 6, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x35, 7, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x37, 8, 10, 0, 1);
    FUN_0040c670(param_1, param_2, 0x39, 9, 10, 0, 1);
    if ((param_1 == 0) && (DAT_004d55d4 != 0))
    {
        FUN_0040c670(0, param_2, 0x40, 3, 9, 0x20, 1);
        FUN_0040c670(0, param_2, 0x43, 3, 9, 0x10, 1);
    }
    if (param_1 == 2)
    {
        FUN_0040c670(2, param_2, 0x40, 3, 9, 0x20, 1);
        FUN_0040c670(2, param_2, 0x46, 2, 9, 0x20, 1);
        FUN_0040c670(2, param_2, 0x49, 2, 9, 0x10, 1);
        FUN_0040c670(2, param_2, 0x43, 3, 9, 0x10, 1);
        FUN_0040c670(2, param_2, 0x41, 3, 9, 0x20, 2);
        FUN_0040c670(2, param_2, 0x47, 2, 9, 0x20, 2);
        FUN_0040c670(2, param_2, 0x4a, 2, 9, 0x10, 2);
        FUN_0040c670(2, param_2, 0x44, 3, 9, 0x10, 2);
        FUN_0040c670(2, param_2, 0x42, 3, 9, 0x20, 3);
        FUN_0040c670(2, param_2, 0x48, 2, 9, 0x20, 3);
        FUN_0040c670(2, param_2, 0x4b, 2, 9, 0x10, 3);
        FUN_0040c670(2, param_2, 0x45, 3, 9, 0x10, 3);
        FUN_0040c670(2, param_2, 0x28, 0, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x2a, 1, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x2c, 2, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x2e, 3, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x30, 4, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x32, 5, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x34, 6, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x36, 7, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x38, 8, 10, 0, 2);
        FUN_0040c670(2, param_2, 0x3a, 9, 10, 0, 2);
    }
    else
    {
        FUN_0040c670(param_1, param_2, 0x3d, 0, 5, 0, 1);
        FUN_0040c670(param_1, param_2, 0x3e, 2, 5, 0, 1);
        FUN_0040c670(param_1, param_2, 0x3f, 3, 5, 0, 1);
        FUN_0040c670(param_1, param_2, 0x3c, 6, 6, 0, 1);
        FUN_0040c670(param_1, param_2, 0x3b, 2, 6, 0, 1);
        puVar3 = &DAT_00ec8880;
        if (param_1 != 0)
        {
            puVar3 = &DAT_00ec8790;
        }
        uVar1 = FUN_00414d90(param_2, 0x55);
        FUN_00414420(uVar1, *puVar3);
        uVar1 = FUN_00414d90(param_2, 0x56);
        FUN_00414420(uVar1, puVar3[1]);
        iVar2 = FUN_00414d90(param_2, 0x57);
        if (iVar2 != 0)
        {
            FUN_00414420(iVar2, puVar3[2]);
        }
        if (param_1 == 0)
        {
            iVar2 = FUN_00414d90(param_2, 0x4d);
            if (iVar2 != 0)
            {
                FUN_00419db0(iVar2, *(uint *)(iVar2 + 0x20) & 0x1000);
            }
            iVar2 = FUN_00414d90(param_2, 0x4e);
            if (iVar2 != 0)
            {
                FUN_00419db0(iVar2, *(uint *)(iVar2 + 0x20) & 0x1000);
            }
            uVar1 = FUN_00414d90(param_2, 0x54);
            FUN_00414420(uVar1, DAT_004b2944);
            uVar1 = DAT_00ec87a0;
            uVar4 = DAT_00ec879c;
        }
        else
        {
            iVar2 = FUN_00414d90(param_2, 0x4e);
            if (iVar2 != 0)
            {
                FUN_00419db0(iVar2, *(uint *)(iVar2 + 0x20) & 0x1000);
            }
            uVar1 = FUN_00414d90(param_2, 0x54);
            FUN_00414420(uVar1, DAT_004d6b38);
            uVar1 = DAT_00ec878c;
            uVar4 = DAT_00ec8770;
        }
        uVar1 = lookup_translation(s__MONDOTEXT_H_0238_Detected___i_A_004b4e58, uVar1, uVar4);
        _sprintf(local_40, uVar1);
        iVar2 = FUN_00414d90(param_2, 0x58);
        if (iVar2 != 0)
        {
            FUN_00414b80(iVar2, local_40, 0);
            return;
        }
    }
    return;
}

void FUN_0040bbf0(undefined_32 param_1)

{
    undefined_32 uVar1;

    uVar1 = FUN_00414d90(param_1, 0x62);
    FUN_00414420(uVar1, DAT_00ec86a0); // reflections enabled
    uVar1 = FUN_00414d90(param_1, 0x273b);
    FUN_00414420(uVar1, DAT_00ec86b0); // lens flare
    uVar1 = FUN_00414d90(param_1, 0x273c);
    FUN_00414420(uVar1, DAT_00ec86b4); // engine exhaust
    uVar1 = FUN_00414d90(param_1, 0x67);
    uVar1 = FUN_0041b5e0(uVar1, DAT_00ec86bc); // model detail
    FUN_00414420(uVar1, 1);
    return;
}

void FUN_0040bc80(undefined_32 param_1)

{
    undefined_32 uVar1;
    uint uVar2;
    undefined_8_1 *puVar3;
    int iVar4;
    undefined_32 uVar5;
    undefined_8_1 *puVar6;
    char *pcVar7;
    undefined_8 local_40[64];

    uVar1 = FUN_00414d90(param_1, 0x2741);
    FUN_00414420(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    uVar1 = FUN_00414d90(param_1, 0x2744);
    FUN_00414420(uVar1, DAT_004b6d14);
    uVar1 = FUN_00414d90(param_1, 0x2742);
    FUN_00414420(uVar1, DAT_0050d550);
    uVar1 = FUN_00414d90(param_1, 0x2743);
    FUN_00414420(uVar1, DAT_004b6d18);
    uVar1 = FUN_00414d90(param_1, 0x2746);
    FUN_00414420(uVar1, DAT_004b6d28);
    uVar1 = FUN_00414d90(param_1, 0x2747);
    FUN_00414420(uVar1, DAT_004eb45c);
    if (DAT_004eb458 == 0)
    {
        uVar1 = lookup_translation(s__MONDOTEXT_H_0243_NO_SOUND_CARD_D_004b4e88);
        _sprintf(local_40, uVar1);
    }
    else
    {
        uVar2 = FUN_00485340();
        if (DAT_0050d55c == 0)
        {
            puVar6 = &DAT_004b3b2c;
        }
        else
        {
            if ((uVar2 & 8) == 0)
            {
                pcVar7 = s__MONDOTEXT_H_0242___DIRECTSOUND__004b4f04;
            }
            else
            {
                pcVar7 = s__MONDOTEXT_H_0241___A3D__004b4f28;
            }
            puVar6 = (undefined_8_1 *)lookup_translation(pcVar7);
        }
        if (DAT_0050d55c == 0)
        {
            puVar3 = (undefined_8_1 *)lookup_translation(s__MONDOTEXT_H_0240_NO_004b4eec);
        }
        else
        {
            puVar3 = &DAT_004d55cc;
        }
        uVar1 = lookup_translation(s__MONDOTEXT_H_0239__sHardware_acc_004b4eb4, puVar3, puVar6);
        _sprintf(local_40, uVar1);
    }
    iVar4 = FUN_00414d90(param_1, 0x58);
    if (iVar4 != 0)
    {
        FUN_00414b80(iVar4, local_40, *(undefined_32 *)(iVar4 + 0x4d8));
        FUN_00414be0(iVar4, 0xff, 0xff, 0, 200);
        FUN_00418cb0(iVar4, 1);
        FUN_004130e0(iVar4, 0, DAT_004eb458 == 0);
    }
    uVar1 = FUN_00414d90(param_1, 0x273e);
    FUN_00413b60(uVar1, ((uint)DAT_00e364a5 * 100) / 0xff);
    uVar1 = FUN_00414d90(param_1, 0x273f);
    FUN_00413b60(uVar1, ((uint)DAT_00e364a6 * 100) / 0xff);
    uVar1 = FUN_00414d90(param_1, 0x2740);
    uVar5 = __ftol();
    FUN_00413b60(uVar1, uVar5);
    uVar5 = __ftol();
    FUN_00413b30(uVar1, uVar5);
    uVar1 = FUN_00414d90(param_1, 0x2743);
    if ((DAT_004b6d20 == 0) || (uVar5 = DAT_0050d550, DAT_004eb458 == 0))
    {
        uVar5 = 0;
    }
    FUN_00414e60(uVar1, uVar5);
    uVar1 = FUN_00414d90(param_1, 0x2740);
    if ((DAT_004b6d20 == 0) || (uVar5 = DAT_0050d550, DAT_004eb458 == 0))
    {
        uVar5 = 0;
    }
    FUN_00414e60(uVar1, uVar5);
    uVar1 = FUN_00414d90(param_1, 0x2712);
    if ((DAT_004b6d20 == 0) || (uVar5 = DAT_0050d550, DAT_004eb458 == 0))
    {
        uVar5 = 0;
    }
    FUN_00414e60(uVar1, uVar5);
    uVar1 = FUN_00414d90(param_1, 0x2742);
    FUN_00414e60(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    uVar1 = FUN_00414d90(param_1, 0x2744);
    FUN_00414e60(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    uVar1 = FUN_00414d90(param_1, 0x273e);
    FUN_00414e60(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    uVar1 = FUN_00414d90(param_1, 0x273f);
    FUN_00414e60(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    uVar1 = FUN_00414d90(param_1, 10000);
    FUN_00414e60(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    uVar1 = FUN_00414d90(param_1, 0x2711);
    FUN_00414e60(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    uVar1 = FUN_00414d90(param_1, 0x2746);
    FUN_00414e60(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    uVar1 = FUN_00414d90(param_1, 0x2747);
    FUN_00414e60(uVar1, -(uint)(DAT_004eb458 != 0) & DAT_004b6d20);
    return;
}

void FUN_0040c100(undefined_32 param_1)

{
    undefined_32 uVar1;
    undefined_32 uVar2;

    uVar1 = FUN_00414d90(param_1, 0x59);
    if ((DAT_004b2910 == 0) || (DAT_004b4938 == 0))
    {
        uVar2 = 0;
    }
    else
    {
        uVar2 = 1;
    }
    FUN_00414420(uVar1, uVar2);
    uVar1 = FUN_00414d90(param_1, 0x5a);
    uVar1 = FUN_0041b5e0(uVar1, DAT_00ec83e0);
    FUN_00414420(uVar1, 1);
    uVar1 = FUN_00414d90(param_1, 0x5b);
    uVar1 = FUN_0041b5e0(uVar1, DAT_00ec83e4);
    FUN_00414420(uVar1, 1);
    uVar1 = FUN_00414d90(param_1, 0x5c);
    uVar1 = FUN_0041b5e0(uVar1, DAT_00ec83e8);
    FUN_00414420(uVar1, 1);
    uVar1 = FUN_00414d90(param_1, 0x5d);
    uVar1 = FUN_0041b5e0(uVar1, DAT_00ec83ec);
    FUN_00414420(uVar1, 1);
    uVar1 = FUN_00414d90(param_1, 0x5e);
    uVar1 = FUN_0041b5e0(uVar1, DAT_00ec83f0);
    FUN_00414420(uVar1, 1);
    uVar1 = FUN_00414d90(param_1, 0x5f);
    uVar1 = FUN_0041b5e0(uVar1, DAT_00ec83f4);
    FUN_00414420(uVar1, 1);
    uVar1 = FUN_00414d90(param_1, 0x60);
    FUN_00414420(uVar1, DAT_00ec83f8);
    uVar1 = FUN_00414d90(param_1, 0x61);
    FUN_00414420(uVar1, DAT_00ec83fc);
    FUN_0040a680();
    return;
}

void FUN_0040c260(undefined_32 param_1)

{
    byte bVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;
    char *pcVar5;
    byte *pbVar6;
    undefined_32 uVar7;
    byte *pbVar8;
    bool bVar9;
    byte local_20c[260];
    int local_108;
    undefined_8 local_100[256];

    iVar2 = FUN_00414d90(param_1, 0x2732);
    if (iVar2 != 0)
    {
        FUN_00413800(iVar2);
        uVar3 = FUN_00484140(s___data_config__004b252c, 2, &DAT_004d55cc);
        iVar4 = FUN_00484220(uVar3, local_20c);
        while (iVar4 != 0)
        {
            pbVar8 = local_20c;
            pcVar5 = s_default_004b4f48;
            do
            {
                bVar1 = *pcVar5;
                bVar9 = bVar1 < *pbVar8;
                if (bVar1 != *pbVar8)
                {
                LAB_0040c2ec:
                    iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
                    goto LAB_0040c2f1;
                }
                if (bVar1 == 0)
                    break;
                bVar1 = ((byte *)pcVar5)[1];
                bVar9 = bVar1 < pbVar8[1];
                if (bVar1 != pbVar8[1])
                    goto LAB_0040c2ec;
                pcVar5 = (char *)((byte *)pcVar5 + 2);
                pbVar8 = pbVar8 + 2;
            } while (bVar1 != 0);
            iVar4 = 0;
        LAB_0040c2f1:
            if (iVar4 != 0)
            {
                pbVar8 = local_20c;
                pcVar5 = s_current_004b2640;
                do
                {
                    bVar1 = *pcVar5;
                    bVar9 = bVar1 < *pbVar8;
                    if (bVar1 != *pbVar8)
                    {
                    LAB_0040c32a:
                        iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
                        goto LAB_0040c32f;
                    }
                    if (bVar1 == 0)
                        break;
                    bVar1 = ((byte *)pcVar5)[1];
                    bVar9 = bVar1 < pbVar8[1];
                    if (bVar1 != pbVar8[1])
                        goto LAB_0040c32a;
                    pcVar5 = (char *)((byte *)pcVar5 + 2);
                    pbVar8 = pbVar8 + 2;
                } while (bVar1 != 0);
                iVar4 = 0;
            LAB_0040c32f:
                if (iVar4 != 0)
                {
                    pbVar8 = local_20c;
                    pbVar6 = &DAT_004b3b2c;
                    do
                    {
                        bVar1 = *pbVar6;
                        bVar9 = bVar1 < *pbVar8;
                        if (bVar1 != *pbVar8)
                        {
                        LAB_0040c368:
                            iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
                            goto LAB_0040c36d;
                        }
                        if (bVar1 == 0)
                            break;
                        bVar1 = pbVar6[1];
                        bVar9 = bVar1 < pbVar8[1];
                        if (bVar1 != pbVar8[1])
                            goto LAB_0040c368;
                        pbVar6 = pbVar6 + 2;
                        pbVar8 = pbVar8 + 2;
                    } while (bVar1 != 0);
                    iVar4 = 0;
                LAB_0040c36d:
                    if (iVar4 != 0)
                    {
                        pbVar8 = local_20c;
                        pbVar6 = &DAT_004b4f44;
                        do
                        {
                            bVar1 = *pbVar6;
                            bVar9 = bVar1 < *pbVar8;
                            if (bVar1 != *pbVar8)
                            {
                            LAB_0040c3a2:
                                iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
                                goto LAB_0040c3a7;
                            }
                            if (bVar1 == 0)
                                break;
                            bVar1 = pbVar6[1];
                            bVar9 = bVar1 < pbVar8[1];
                            if (bVar1 != pbVar8[1])
                                goto LAB_0040c3a2;
                            pbVar6 = pbVar6 + 2;
                            pbVar8 = pbVar8 + 2;
                        } while (bVar1 != 0);
                        iVar4 = 0;
                    LAB_0040c3a7:
                        if (iVar4 != 0)
                        {
                            FUN_004138f0(iVar2, local_20c, 0, 0x2733, 0);
                        }
                    }
                }
            }
            iVar4 = FUN_00484220(uVar3, local_20c);
        }
        __findclose(uVar3);
        _sprintf(local_100, &DAT_004b2524 /* "%s%s" */, &DAT_00e9f300, s___data_config_default__004b3e8c);
        uVar3 = FUN_00484140(local_100, 3, &PTR_DAT_004b2408);
        iVar4 = FUN_00484220(uVar3, local_20c);
        while (iVar4 != 0)
        {
            if (local_108 == 0)
            {
                pbVar8 = local_20c;
                pcVar5 = s_wheel_map_004b3ea4;
                do
                {
                    bVar1 = *pcVar5;
                    bVar9 = bVar1 < *pbVar8;
                    if (bVar1 != *pbVar8)
                    {
                    LAB_0040c46b:
                        iVar4 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
                        goto LAB_0040c470;
                    }
                    if (bVar1 == 0)
                        break;
                    bVar1 = ((byte *)pcVar5)[1];
                    bVar9 = bVar1 < pbVar8[1];
                    if (bVar1 != pbVar8[1])
                        goto LAB_0040c46b;
                    pcVar5 = (char *)((byte *)pcVar5 + 2);
                    pbVar8 = pbVar8 + 2;
                } while (bVar1 != 0);
                iVar4 = 0;
            LAB_0040c470:
                if (iVar4 != 0)
                {
                    FUN_00484670(local_20c);
                    uVar7 = FUN_004138f0(iVar2, local_20c, 0, 0x2733, 1);
                    FUN_00414ca0(uVar7, 200, 0x32, 0, 0xff);
                }
            }
            iVar4 = FUN_00484220(uVar3, local_20c);
        }
        __findclose(uVar3);
    }
    return;
}

void FUN_0040c4e0(undefined_32 param_1)

{
    char cVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;
    undefined_32 uVar5;
    undefined_32 *puVar6;
    undefined_8 local_18c[128];
    undefined_8 local_10c[260];
    int local_8;

    iVar2 = FUN_00414d90(param_1, 0x2732);
    if (iVar2 != 0)
    {
        FUN_00413800(iVar2);
        uVar3 = FUN_00484140(s___data_player__004b4f6c, 3, &PTR_DAT_004b4f7c);
        iVar4 = FUN_00484220(uVar3, local_10c);
        while (iVar4 != 0)
        {
            if (local_8 == 0)
            {
                FUN_00484670(local_10c);
                FUN_004138f0(iVar2, local_10c, 0, 0x2733, 0);
            }
            iVar4 = FUN_00484220(uVar3, local_10c);
        }
        FUN_0041b300(iVar2);
        __findclose(uVar3);
        uVar3 = FUN_00414d90(param_1, 0x2731);
        FUN_00414e60(uVar3, 0);
        uVar3 = FUN_00414d90(param_1, 0x273a);
        iVar4 = -1;
        puVar6 = &DAT_00e364b4;
        do
        {
            if (iVar4 == 0)
                break;
            iVar4 = iVar4 + -1;
            cVar1 = *(char *)puVar6;
            puVar6 = (undefined_32 *)((int)puVar6 + 1);
        } while (cVar1 != '\0');
        if (iVar4 == -2)
        {
            uVar5 = lookup_translation(s__MONDOTEXT_H_0246__none__004b4f50);
            uVar5 = lookup_translation(s__MONDOTEXT_H_0002_Current_Player_004b2214, uVar5);
            _sprintf(local_18c, uVar5);
            DAT_004b6c90 = -1;
        }
        else
        {
            uVar5 = lookup_translation(s__MONDOTEXT_H_0002_Current_Player_004b2214, &DAT_00e364b4);
            _sprintf(local_18c, uVar5);
            DAT_004b6c90 = 0;
            uVar5 = FUN_004136f0(iVar2, &DAT_00e364b4, 1);
            FUN_00413610(uVar5);
        }
        FUN_00414b80(uVar3, local_18c, 0);
    }
    return;
}

void FUN_0040c670(undefined_32 param_1, undefined_32 param_2, int param_3, undefined_32 param_4, undefined_32 param_5,
                  undefined_32 param_6, undefined_32 param_7)

{
    byte bVar1;
    bool bVar2;
    int iVar3;
    byte *pbVar4;
    int iVar5;
    undefined_32 uVar6;
    uint uVar7;
    byte *pbVar8;
    bool bVar9;
    byte local_40[64];

    iVar5 = param_3;
    bVar2 = false;
    iVar3 = FUN_00414d90(param_2, param_3);
    FUN_00406a50(param_1, param_4, param_5, param_6, param_7, local_40, &param_3);
    if (iVar5 == 0x3c)
    {
        uVar7 = -1;
        pbVar4 = local_40;
        do
        {
            if (uVar7 == 0)
                break;
            uVar7 = uVar7 - 1;
            bVar1 = *pbVar4;
            pbVar4 = pbVar4 + 1;
        } while (bVar1 != 0);
        if (3 < ~uVar7 - 1)
        {
            bVar2 = true;
        }
    }
    pbVar8 = &DAT_004b38f8;
    pbVar4 = local_40;
    do
    {
        bVar1 = *pbVar4;
        bVar9 = bVar1 < *pbVar8;
        if (bVar1 != *pbVar8)
        {
        LAB_0040c702:
            iVar5 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
            goto LAB_0040c707;
        }
        if (bVar1 == 0)
            break;
        bVar1 = pbVar4[1];
        bVar9 = bVar1 < pbVar8[1];
        if (bVar1 != pbVar8[1])
            goto LAB_0040c702;
        pbVar4 = pbVar4 + 2;
        pbVar8 = pbVar8 + 2;
    } while (bVar1 != 0);
    iVar5 = 0;
LAB_0040c707:
    if (iVar5 == 0)
    {
        uVar6 = lookup_translation(s__MONDOTEXT_H_0247_tilde_004b4f80);
        _sprintf(local_40, uVar6);
    }
    pbVar8 = &DAT_004b3bd4;
    pbVar4 = local_40;
    do
    {
        bVar1 = *pbVar4;
        bVar9 = bVar1 < *pbVar8;
        if (bVar1 != *pbVar8)
        {
        LAB_0040c753:
            iVar5 = (1 - (uint)bVar9) - (uint)(bVar9 != 0);
            goto LAB_0040c758;
        }
        if (bVar1 == 0)
            break;
        bVar1 = pbVar4[1];
        bVar9 = bVar1 < pbVar8[1];
        if (bVar1 != pbVar8[1])
            goto LAB_0040c753;
        pbVar4 = pbVar4 + 2;
        pbVar8 = pbVar8 + 2;
    } while (bVar1 != 0);
    iVar5 = 0;
LAB_0040c758:
    if (iVar5 == 0)
    {
        _sprintf(local_40, &DAT_004b3ecc);
    }
    if (iVar3 != 0)
    {
        pbVar4 = local_40 + 1;
        if (!bVar2)
        {
            pbVar4 = local_40;
        }
        FUN_00414ab0(iVar3, pbVar4, 0);
    }
    return;
}

void FUN_0040c7a0(undefined_32 param_1)

{
    undefined_32 uVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    undefined_32 uVar6;
    uint uVar7;
    char *pcVar8;
    int local_148;
    int local_144;
    int local_140;
    int local_13c;
    int local_138;
    int local_134;
    int local_130;
    int local_12c;
    int local_128;
    undefined_32 local_124;
    int local_120;
    int local_11c;
    int local_118;
    int local_114;
    undefined_32 local_110;
    undefined_32 local_10c;
    undefined_32 local_108;
    undefined_8 local_100[256];

    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    local_128 = FUN_0042df70(uVar1);
    local_128 = local_128 * 3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0250__sMOUSE_SETTIN_004b522c, DAT_00e99738);
    iVar2 = FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0249__sJOYSTICK_SET_004b5204);
    _sprintf(local_100, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0249__sJOYSTICK_SET_004b5204, DAT_00e99738, 0x80000, 1, 0, 0);
    uVar1 = FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0249__sJOYSTICK_SET_004b5204, 0x1e5, iVar2 * 3 + 5, uVar1);
    uVar1 = FUN_00413fc0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0, 0, 0xff);
    FUN_00411170(param_1, 4, 0, 0x1a9, 1);
    FUN_004112f0(param_1, 0xcd, 0x1a9);
    FUN_00411270(param_1, 0x163, 0x1a9);
    FUN_00411210(param_1, 0x208, 0x181);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0257__sButton_Setti_004b51e0, 100, 5, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0xe1, 0xe1, 0, 0xff);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0513__sTaunt_Flamej_004b51bc, 0);
    iVar3 = FUN_0042de10(uVar1);
    iVar2 = FUN_0042de10(&DAT_004b51b8, 0);
    iVar3 = iVar3 + iVar2 * 5;
    local_140 = iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0514_Numpad_Enter_004b5198, 0);
    iVar4 = FUN_0042de10(uVar1);
    iVar5 = FUN_0042df70(&DAT_004b3b28, DAT_00e99720);
    FUN_00419070(0x400000, &local_114, &local_148);
    iVar2 = iVar5 + 2;
    if (iVar5 + 2 < local_148)
    {
        iVar2 = local_148;
    }
    local_148 = iVar2;
    iVar2 = local_148;
    iVar5 = iVar4 + iVar3;
    if (iVar4 + iVar3 < local_114)
    {
        iVar5 = local_114;
    }
    FUN_004197f0(&local_13c, 0);
    local_124 = 0xf;
    local_12c = ((-(uint)(DAT_004d55d4 != 0) & 2) + 0xb) * iVar2;
    local_120 = 0xf;
    local_11c = local_13c + 0xe + iVar5;
    local_118 = local_138 + 0xe + local_12c;
    iVar4 = FUN_00413520(param_1, 0x30d49, &local_124, -1, 0x300000, 0);
    *(undefined_32 *)(iVar4 + 0x524) = 0;
    local_144 = local_13c + 0xf;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0259__sCycle_Camera_004b5174, &DAT_004d55cc, local_144, 0xf, iVar5, iVar2,
                               iVar3, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x27, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = local_148 + 0xf;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0015_LOOK_BACK_004b2830, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x29, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0016_BRAKE_004b2818, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x2b, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0017_THRUST_004b27fc, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x2d, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0018_BOOST_004b27e4, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x2f, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0019_SLIDE_004b27cc, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x31, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0020_ROLL_LEFT_004b27b0, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x33, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0021_ROLL_RIGHT_004b2790, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x35, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0255__sTaunt_Flamej_004b5150, &DAT_004d55cc, local_144, iVar3, iVar5,
                               iVar2, local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x37, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0023_REPAIR_004b2758, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x39, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    if (DAT_004d55d4 != 0)
    {
        uVar1 = lookup_translation(s__MONDOTEXT_H_0268__sNose_Up_004b5134, &DAT_004d55cc, local_144, iVar3, iVar5,
                                   iVar2, local_140, 0x400000, 0);
        uVar1 = FUN_00413340(param_1, 0x40, 0, uVar1);
        FUN_00413a30(iVar4, uVar1);
        uVar1 = lookup_translation(s__MONDOTEXT_H_0269__sNose_Down_004b5114, &DAT_004d55cc, local_144,
                                   iVar3 + local_148, iVar5, iVar2, local_140, 0x400000, 0);
        uVar1 = FUN_00413340(param_1, 0x43, 0, uVar1);
        FUN_00413a30(iVar4, uVar1);
    }
    iVar3 = local_138 + 0xf + local_12c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0270__sAxis_Setting_004b50f0, 100, iVar3, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    iVar3 = iVar3 + 10;
    FUN_00414be0(uVar1, 0xe1, 0xe1, 0, 0xff);
    local_124 = 0xf;
    local_11c = local_13c + 0xe + iVar5;
    local_118 = local_138 + iVar2 * 6 + -1 + iVar3;
    local_120 = iVar3;
    iVar4 = FUN_00413520(param_1, 0x30d4a, &local_124, -1, 0x300000, 0);
    *(undefined_32 *)(iVar4 + 0x524) = 0;
    local_144 = local_13c + 0xf;
    local_12c = iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0271__sTurn_Left_Ri_004b50cc, &DAT_004d55cc, local_144, iVar3, iVar5,
                               iVar2, local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3e, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0016_BRAKE_004b2818, &DAT_004d55cc, local_144, iVar3, iVar5, iVar2,
                               local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3b, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0278__sNose_Up_Down_004b50a8, &DAT_004d55cc, local_144, iVar3, iVar5,
                               iVar2, local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3f, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar3 = iVar3 + local_148;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0280__sRoll_Left_Ri_004b400c, &DAT_004d55cc, local_144, iVar3, iVar5,
                               iVar2, local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3c, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0225_THROTTLE_004b508c, &DAT_004d55cc, local_144, iVar3 + local_148,
                               iVar5, iVar2, local_140, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3d, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0250__sMOUSE_SETTIN_004b522c, DAT_00e99738);
    iVar2 = FUN_0042df70(uVar1);
    uVar1 = FUN_004131c0(param_1, 0x58, 0, &DAT_004d55cc, 0x145, iVar2 * 3 + 7, 0, 0);
    FUN_00414be0(uVar1, 0xff, 0xff, 0, 200);
    iVar2 = iVar2 * 3 + 0x14;
    if (DAT_004d55d4 == 0)
    {
        uVar1 = lookup_translation(s__MONDOTEXT_H_0288__sJoystick_Ena_004b5040, 0, local_128, 0x20000, 0);
        uVar1 = FUN_0042de10(uVar1);
        pcVar8 = s__MONDOTEXT_H_0288__sJoystick_Ena_004b5040;
    }
    else
    {
        uVar1 = lookup_translation(s__MONDOTEXT_H_0287__sWheel_Enable_004b5068, 0, local_128, 0x20000, 0);
        uVar1 = FUN_0042de10(uVar1);
        pcVar8 = s__MONDOTEXT_H_0287__sWheel_Enable_004b5068;
    }
    uVar1 = lookup_translation(pcVar8, 0x145, iVar2, uVar1);
    FUN_00413c50(param_1, 0x54, 0, uVar1);
    uVar7 = 2;
    iVar2 = iVar2 + local_148 * 2;
    if (((byte)DAT_00ec887c & 4) != 0)
    {
        uVar7 = 3;
    }
    uVar1 = lookup_translation(s__MONDOTEXT_H_0507__sFlip_Axis_004b5020, 0x16d, iVar2, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0507__sFlip_Axis_004b5020, DAT_00e99738);
    iVar3 = FUN_0042df70(uVar6);
    iVar2 = iVar2 + iVar3;
    uVar6 = lookup_translation(s__MONDOTEXT_H_0507__sFlip_Axis_004b5020, 6);
    uVar6 = FUN_0042de10(uVar6);
    iVar3 = FUN_0041af00(uVar1, iVar2, uVar6, uVar7, &local_110);
    iVar2 = iVar2 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0283__sX_004b5008, 0, iVar3, 0x40000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0283__sX_004b5008, local_110, iVar2, uVar1);
    FUN_00413c50(param_1, 0x55, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0284__sY_004b4ff0, 0, iVar3, 0x40000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0284__sY_004b4ff0, local_10c, iVar2, uVar1);
    FUN_00413c50(param_1, 0x56, 0, uVar1);
    if (2 < uVar7)
    {
        uVar1 = lookup_translation(s__MONDOTEXT_H_0285__sZ_004b4fd8, 0, iVar3, 0x40000, 0);
        uVar1 = FUN_0042de10(uVar1);
        uVar1 = lookup_translation(s__MONDOTEXT_H_0285__sZ_004b4fd8, local_108, iVar2, uVar1);
        FUN_00413c50(param_1, 0x57, 0, uVar1);
    }
    iVar3 = local_12c;
    local_138 = local_12c + 0x18;
    local_13c = local_11c + -8;
    local_134 = local_11c + 0x30;
    local_130 = local_12c + 0x77;
    FUN_00413b90(param_1, 1, &local_13c, 0x1772, 0, 0, 0);
    iVar2 = iVar3 + 8;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0508__sSensitivity_004b4fb8, local_134 + 0x19, iVar2, 0, 0);
    FUN_004131c0(param_1, 1, 0, uVar1);
    FUN_00413a90(param_1, 0x4e, local_134 + -10, iVar2, 200, 0x80000, 0);
    iVar3 = iVar3 + 0x5e;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0509__sDeadzone_004b4f98, local_134 + 0x19, iVar3, 0, 0);
    FUN_004131c0(param_1, 1, 0, uVar1);
    FUN_00413a90(param_1, 0x4d, local_134 + -10, iVar3, 200, &DAT_00dc0000, 0);
    return;
}

void FUN_0040d2c0(undefined_32 param_1)

{
    undefined_32 uVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    undefined_32 uVar5;
    uint uVar6;
    int local_14c;
    int local_148;
    int local_144;
    int local_140;
    int local_13c;
    int local_138;
    int local_134;
    int local_130;
    int local_12c;
    undefined_32 local_128;
    int local_124;
    int local_120;
    int local_11c;
    int local_118;
    int local_114;
    undefined_32 local_110;
    undefined_32 local_10c;
    undefined_32 local_108;
    undefined_8 local_100[256];

    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    local_118 = FUN_0042df70(uVar1);
    local_118 = local_118 * 3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0250__sMOUSE_SETTIN_004b522c, DAT_00e99738);
    iVar2 = FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0250__sMOUSE_SETTIN_004b522c);
    _sprintf(local_100, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0250__sMOUSE_SETTIN_004b522c, DAT_00e99738, 0x80000, 1, 0, 0);
    uVar1 = FUN_0042de30(uVar1);
    uVar1 = FUN_00413fc0(param_1, 1, 6, local_100, 0x1d1, iVar2 * 3 + 5, uVar1);
    FUN_00414be0(uVar1, 0xff, 0, 0, 0xff);
    FUN_00411170(param_1, 4, 0, 0x1a4, 1);
    FUN_004112f0(param_1, 0xcd, 0x1a4);
    FUN_00411270(param_1, 0x163, 0x1a4);
    FUN_00411210(param_1, 0x208, 0x17c);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0257__sButton_Setti_004b51e0, 100, 5, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0xe1, 0xe1, 0, 0xff);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0513__sTaunt_Flamej_004b51bc, 0);
    iVar3 = FUN_0042de10(uVar1);
    iVar2 = FUN_0042de10(&DAT_004b51b8, 0);
    iVar3 = iVar3 + iVar2 * 5;
    local_144 = iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0514_Numpad_Enter_004b5198, 0);
    iVar2 = FUN_0042de10(uVar1);
    iVar2 = iVar2 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0259__sCycle_Camera_004b5174, DAT_00e99720);
    iVar4 = FUN_0042df70(uVar1);
    FUN_00419070(0x400000, &local_114, &local_14c);
    iVar3 = iVar4 + 2;
    if (iVar4 + 2 < local_14c)
    {
        iVar3 = local_14c;
    }
    local_14c = iVar3;
    iVar3 = local_14c;
    if (iVar2 < local_114)
    {
        iVar2 = local_114;
    }
    FUN_004197f0(&local_13c, 0);
    local_128 = 0xf;
    local_124 = 0xf;
    local_120 = local_13c + 0xe + iVar2;
    local_12c = iVar3 * 0xb;
    local_11c = local_138 + 0xe + local_12c;
    iVar4 = FUN_00413520(param_1, 0x30d4d, &local_128, -1, 0x300000, 0);
    *(undefined_32 *)(iVar4 + 0x524) = 0;
    local_140 = local_13c + 0xf;
    local_148 = iVar4;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0259__sCycle_Camera_004b5174, &DAT_004d55cc, local_140, 0xf, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x27, 0, uVar1);
    FUN_00413a30(iVar4, uVar1);
    iVar4 = local_14c + 0xf;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0015_LOOK_BACK_004b2830, &DAT_004d55cc, local_140, iVar4, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x29, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0016_BRAKE_004b2818, &DAT_004d55cc, local_140, iVar4, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x2b, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0017_THRUST_004b27fc, &DAT_004d55cc, local_140, iVar4, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x2d, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0018_BOOST_004b27e4, &DAT_004d55cc, local_140, iVar4, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x2f, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0019_SLIDE_004b27cc, &DAT_004d55cc, local_140, iVar4, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x31, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0020_ROLL_LEFT_004b27b0, &DAT_004d55cc, local_140, iVar4, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x33, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0021_ROLL_RIGHT_004b2790, &DAT_004d55cc, local_140, iVar4, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x35, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0255__sTaunt_Flamej_004b5150, &DAT_004d55cc, local_140, iVar4, iVar2,
                               iVar3, local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x37, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0023_REPAIR_004b2758, &DAT_004d55cc, local_140, iVar4 + local_14c, iVar2,
                               iVar3, local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x39, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = local_138 + 0xf + local_12c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0270__sAxis_Setting_004b50f0, 100, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    iVar4 = iVar4 + 10;
    FUN_00414be0(uVar1, 0xe1, 0xe1, 0, 0xff);
    local_128 = 0xf;
    local_120 = local_13c + 0xe + iVar2;
    local_11c = local_138 + iVar3 * 6 + -1 + iVar4;
    local_124 = iVar4;
    local_148 = FUN_00413520(param_1, 0x30d4e, &local_128, -1, 0x300000, 0);
    *(undefined_32 *)(local_148 + 0x524) = 0;
    local_140 = local_13c + 0xf;
    local_12c = iVar4;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0271__sTurn_Left_Ri_004b50cc, &DAT_004d55cc, local_140, iVar4, iVar2,
                               iVar3, local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3e, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0016_BRAKE_004b2818, &DAT_004d55cc, local_140, iVar4, iVar2, iVar3,
                               local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3b, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0278__sNose_Up_Down_004b50a8, &DAT_004d55cc, local_140, iVar4, iVar2,
                               iVar3, local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3f, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    iVar4 = iVar4 + local_14c;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0280__sRoll_Left_Ri_004b400c, &DAT_004d55cc, local_140, iVar4, iVar2,
                               iVar3, local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3c, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0225_THROTTLE_004b508c, &DAT_004d55cc, local_140, iVar4 + local_14c,
                               iVar2, iVar3, local_144, 0x400000, 0);
    uVar1 = FUN_00413340(param_1, 0x3d, 0, uVar1);
    FUN_00413a30(local_148, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0250__sMOUSE_SETTIN_004b522c, DAT_00e99738);
    iVar2 = FUN_0042df70(uVar1);
    uVar1 = FUN_004131c0(param_1, 0x58, 0, &DAT_004d55cc, 0x145, iVar2 * 3 + 7, 0, 0);
    FUN_00414be0(uVar1, 0xff, 0xff, 0, 200);
    iVar2 = iVar2 * 3 + 0x14;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0286__sMouse_Enable_004b52a4, 0, local_118, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0286__sMouse_Enable_004b52a4, 0x145, iVar2, uVar1);
    FUN_00413c50(param_1, 0x54, 0, uVar1);
    uVar6 = 2;
    iVar2 = iVar2 + local_14c * 2;
    if (((byte)DAT_00ec8808 & 4) != 0)
    {
        uVar6 = 3;
    }
    uVar1 = lookup_translation(s__MONDOTEXT_H_0507__sFlip_Axis_004b5020, 0x16d, iVar2, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar5 = lookup_translation(s__MONDOTEXT_H_0507__sFlip_Axis_004b5020, DAT_00e99738);
    iVar3 = FUN_0042df70(uVar5);
    iVar2 = iVar2 + iVar3;
    uVar5 = lookup_translation(s__MONDOTEXT_H_0507__sFlip_Axis_004b5020, 6);
    uVar5 = FUN_0042de10(uVar5);
    iVar3 = FUN_0041af00(uVar1, iVar2, uVar5, uVar6, &local_110);
    iVar2 = iVar2 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0283__sX_004b5008, 0, iVar3, 0x40000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0283__sX_004b5008, local_110, iVar2, uVar1);
    FUN_00413c50(param_1, 0x55, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0284__sY_004b4ff0, 0, iVar3, 0x40000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0284__sY_004b4ff0, local_10c, iVar2, uVar1);
    FUN_00413c50(param_1, 0x56, 0, uVar1);
    if (2 < uVar6)
    {
        uVar1 = lookup_translation(s__MONDOTEXT_H_0285__sZ_004b4fd8, 0, iVar3, 0x40000, 0);
        uVar1 = FUN_0042de10(uVar1);
        uVar1 = lookup_translation(s__MONDOTEXT_H_0285__sZ_004b4fd8, local_108, iVar2, uVar1);
        FUN_00413c50(param_1, 0x57, 0, uVar1);
    }
    iVar3 = local_12c;
    local_138 = local_12c + 0x18;
    local_13c = local_120 + -8;
    local_134 = local_120 + 0x30;
    local_130 = local_12c + 0x77;
    FUN_00413b90(param_1, 1, &local_13c, 0x1772, 0, 0, 0);
    iVar2 = iVar3 + 8;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0508__sSensitivity_004b4fb8, local_134 + 0x19, iVar2, 0, 0);
    FUN_004131c0(param_1, 1, 0, uVar1);
    FUN_00413a90(param_1, 0x4e, local_134 + -10, iVar2, 200, 0x80000, 0);
    iVar3 = iVar3 + 0x5e;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0532_Sensitivity_Me_004b5280, local_134 + 0x19, iVar3, 0, 0);
    FUN_004131c0(param_1, 1, 0, uVar1);
    FUN_00413a90(param_1, 0x4d, local_134 + -10, iVar3, 200, 0x2c0000, 0);
    return;
}

void FUN_0040dd10(undefined_32 param_1)

{
    undefined_32 uVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    int local_138;
    int local_134;
    int local_130;
    int local_12c;
    int local_128;
    int local_124;
    undefined_32 local_118;
    int local_114;
    int local_110;
    int local_10c;
    int local_108;
    int local_104;
    undefined_8 local_100[256];

    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    uVar2 = FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0291__sShow_Reserve_004b5310, 400, 0x55, (uVar2 >> 3) + uVar2, 0x14,
                               0x80000, 0);
    uVar1 = FUN_004132a0(param_1, 0x4c, -1, uVar1);
    FUN_00414ca0(uVar1, 0xff, 0, 0, 0xff);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0251__sKEYBOARD_SET_004b52e8, DAT_00e99738);
    iVar3 = FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0251__sKEYBOARD_SET_004b52e8);
    _sprintf(local_100, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0251__sKEYBOARD_SET_004b52e8, DAT_00e99738, 0x80000, 1, 0, 0);
    uVar1 = FUN_0042de30(uVar1);
    uVar1 = FUN_00413fc0(param_1, 1, 6, local_100, 0x230, iVar3 * 3 + 5, uVar1);
    FUN_00414be0(uVar1, 0xff, 0, 0, 0xff);
    FUN_00411170(param_1, 4, 0, 0x1ae, 1);
    FUN_004112f0(param_1, 0xcd, 0x1ae);
    FUN_00411270(param_1, 0x163, 0x1ae);
    FUN_00411210(param_1, 0x208, 0x17c);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0513__sTaunt_Flamej_004b51bc, 0);
    iVar4 = FUN_0042de10(uVar1);
    iVar3 = FUN_0042de10(&DAT_004b51b8, 0);
    iVar4 = iVar4 + iVar3 * 5;
    local_134 = iVar4;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0514_Numpad_Enter_004b5198, 0);
    iVar3 = FUN_0042de10(uVar1);
    iVar3 = iVar3 + iVar4;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0259__sCycle_Camera_004b5174, DAT_00e99720);
    iVar5 = FUN_0042df70(uVar1);
    FUN_00419070(0x400000, &local_104, &local_138);
    iVar4 = iVar5 + 2;
    if (iVar5 + 2 < local_138)
    {
        iVar4 = local_138;
    }
    local_138 = iVar4;
    iVar4 = local_138;
    if (iVar3 < local_104)
    {
        iVar3 = local_104;
    }
    uVar1 = lookup_translation(s__MONDOTEXT_H_0283__sX_004b5008, 0);
    iVar6 = FUN_0042de10(uVar1);
    iVar6 = iVar6 << 1;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0256_Numpad_Enter_004b52c8, 0);
    iVar7 = FUN_0042de10(uVar1);
    FUN_004197f0(&local_128, 0);
    local_118 = 0xf;
    local_114 = 0xf;
    local_110 = iVar7 + local_128 + 0xe + iVar3;
    local_108 = iVar4 * 0xb;
    local_10c = local_124 + 0xe + local_108;
    FUN_0041b260(param_1, 1, &local_118, 0);
    iVar5 = local_124 + 0xf;
    local_130 = local_128 + 0xf;
    iVar8 = (iVar3 - local_128) + local_130;
    local_12c = iVar5;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0259__sCycle_Camera_004b5174, &DAT_004d55cc, local_130, iVar5, iVar3,
                               iVar4, local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x27, 0, uVar1);
    FUN_00413340(param_1, 0x28, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0015_LOOK_BACK_004b2830, &DAT_004d55cc, local_130, iVar5, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x29, 0, uVar1);
    FUN_00413340(param_1, 0x2a, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0016_BRAKE_004b2818, &DAT_004d55cc, local_130, iVar5, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x2b, 0, uVar1);
    FUN_00413340(param_1, 0x2c, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0017_THRUST_004b27fc, &DAT_004d55cc, local_130, iVar5, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x2d, 0, uVar1);
    FUN_00413340(param_1, 0x2e, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0018_BOOST_004b27e4, &DAT_004d55cc, local_130, iVar5, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x2f, 0, uVar1);
    FUN_00413340(param_1, 0x30, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0019_SLIDE_004b27cc, &DAT_004d55cc, local_130, iVar5, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x31, 0, uVar1);
    FUN_00413340(param_1, 0x32, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0020_ROLL_LEFT_004b27b0, &DAT_004d55cc, local_130, iVar5, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x33, 0, uVar1);
    FUN_00413340(param_1, 0x34, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0021_ROLL_RIGHT_004b2790, &DAT_004d55cc, local_130, iVar5, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x35, 0, uVar1);
    FUN_00413340(param_1, 0x36, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0255__sTaunt_Flamej_004b5150, &DAT_004d55cc, local_130, iVar5, iVar3,
                               iVar4, local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x37, 0, uVar1);
    FUN_00413340(param_1, 0x38, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar5 = iVar5 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0023_REPAIR_004b2758, &DAT_004d55cc, local_130, iVar5, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x39, 0, uVar1);
    FUN_00413340(param_1, 0x3a, 0, 0, &DAT_004d55cc, iVar8, iVar5, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar8 = (local_124 >> 1) + local_12c + local_108;
    local_110 = local_128 + 0xe + iVar7 * 2 + iVar3;
    local_10c = local_124 + iVar4 * 5 + -1 + iVar8;
    local_118 = 0xf;
    local_114 = iVar8;
    FUN_0041b260(param_1, 1, &local_118, 0);
    iVar8 = iVar8 + local_124;
    local_130 = local_128 + 0xf;
    iVar5 = (iVar3 - local_128) + local_130;
    local_12c = iVar7 + -8 + iVar5;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0268__sNose_Up_004b5134, &DAT_004d55cc, local_130, iVar8, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x40, 0, uVar1);
    FUN_00413340(param_1, 0x41, 0, 0, &DAT_004d55cc, iVar5, iVar8, iVar7, iVar4, iVar6, 0x800000, 0);
    FUN_00413340(param_1, 0x42, 0, 0, &DAT_004d55cc, local_12c, iVar8, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar8 = iVar8 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0029_TURN_LEFT_004b26ac, &DAT_004d55cc, local_130, iVar8, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x46, 0, uVar1);
    FUN_00413340(param_1, 0x47, 0, 0, &DAT_004d55cc, iVar5, iVar8, iVar7, iVar4, iVar6, 0x800000, 0);
    FUN_00413340(param_1, 0x48, 0, 0, &DAT_004d55cc, local_12c, iVar8, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar8 = iVar8 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0030_TURN_RIGHT_004b268c, &DAT_004d55cc, local_130, iVar8, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x49, 0, uVar1);
    FUN_00413340(param_1, 0x4a, 0, 0, &DAT_004d55cc, iVar5, iVar8, iVar7, iVar4, iVar6, 0x800000, 0);
    FUN_00413340(param_1, 0x4b, 0, 0, &DAT_004d55cc, local_12c, iVar8, iVar7, iVar4, iVar6, 0x800000, 0);
    iVar8 = iVar8 + local_138;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0269__sNose_Down_004b5114, &DAT_004d55cc, local_130, iVar8, iVar3, iVar4,
                               local_134, 0x400000, 0);
    FUN_00413340(param_1, 0x43, 0, uVar1);
    FUN_00413340(param_1, 0x44, 0, 0, &DAT_004d55cc, iVar5, iVar8, iVar7, iVar4, iVar6, 0x800000, 0);
    FUN_00413340(param_1, 0x45, 0, 0, &DAT_004d55cc, local_12c, iVar8, iVar7, iVar4, iVar6, 0x800000, 0);
    return;
}

//----- (0040E6A0) --------------------------------------------------------
// video settings menu
void FUN_0040e6a0(undefined_32 param_1)

{
    undefined_32 uVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    undefined_32 uVar6;
    undefined_32 local_110;
    undefined_32 local_10c;
    undefined_32 local_108;
    undefined_8 local_100[256];

    // Restore Previous Settings

    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    uVar2 = FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    FUN_0042df70(uVar1);

    // VIDEO SETTINGS

    uVar1 = lookup_translation(s__MONDOTEXT_H_0292__sVIDEO_SETTIN_004b5418);
    _sprintf(local_100, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0292__sVIDEO_SETTIN_004b5418, DAT_00e99738, 0x80000, 1, 0, 0);
    uVar1 = FUN_0042de30(uVar1);
    uVar1 = FUN_00413fc0(param_1, 1, 6, local_100, ((uVar2 >> 1) + uVar2 >> 2) + 300, 0xa0, uVar1);
    FUN_00414be0(uVar1, 0xff, 0, 0, 0xff);
    FUN_00411170(param_1, 4, 0, 0x1a4, 1);
    FUN_004112f0(param_1, 0xcd, 0x1a4);
    FUN_00411270(param_1, 0x163, 0x1a4);
    FUN_00411210(param_1, 0x208, 0x17c);

    // Dynamic Lighting Enabled \/

    uVar1 = lookup_translation(s__MONDOTEXT_H_0294__sDynamic_Ligh_004b53e8, 0);
    iVar3 = FUN_0042de10(uVar1);
    iVar4 = FUN_0042de10(&DAT_004b51b8, 0);
    iVar5 = FUN_0042de10(s___X__004b53e0, 0);
    iVar5 = iVar5 + iVar3 + iVar4 * 10;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0294__sDynamic_Ligh_004b53e8, DAT_00e99720);
    iVar3 = FUN_0042df70(uVar1);
    iVar3 = iVar3 * 3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0294__sDynamic_Ligh_004b53e8, 0, iVar3, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);

    // Reflections Enabled \/

    uVar1 = lookup_translation(s__MONDOTEXT_H_0297__sReflections_E_004b53b4, 0x1e, 200, uVar1);
    FUN_00413c50(param_1, 0x62, 0, uVar1);

    // Dynamic Lighting Enabled \/

    uVar1 = lookup_translation(s__MONDOTEXT_H_0294__sDynamic_Ligh_004b53e8, 0, iVar3, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);

    // Smoke And Dust Enabled \/

    uVar1 = lookup_translation(s__MONDOTEXT_H_0301__sSmoke_And_Du_004b5388, 0x1e, 0xe6, uVar1);
    FUN_00413c50(param_1, 0x273c, 0, uVar1);

    // Dynamic Lighting Enabled \/

    uVar1 = lookup_translation(s__MONDOTEXT_H_0294__sDynamic_Ligh_004b53e8, 0, iVar3, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);

    // Lens Flare Enabled

    uVar1 = lookup_translation(s__MONDOTEXT_H_0300__sLens_Flare_E_004b5360, 0x1e, 0x104, uVar1);
    FUN_00413c50(param_1, 0x273b, 0, uVar1);

    // Model detail

    uVar1 = lookup_translation(s__MONDOTEXT_H_0303__sModel_Detail_004b533c,
                               ((int)(iVar5 + (iVar5 >> 0x1f & 0xfU)) >> 4) + 0x3c + iVar5, 0xaf, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0303__sModel_Detail_004b533c, DAT_00e99738);
    iVar3 = FUN_0042df70(uVar6);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0303__sModel_Detail_004b533c, 6);
    uVar6 = FUN_0042de10(uVar6);
    iVar4 = FUN_0041af00(uVar1, iVar3 + 0xaf, uVar6, 3, &local_110);
    iVar3 = iVar3 + 0xaf + iVar4;

    // Display LOW, MEDIUM, HIGH settings

    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar4, 0x40080, 0x80001);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, local_110, iVar3, uVar1);
    FUN_00413c50(param_1, 0x67, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, 0, iVar4, 0x40000, 0x80002);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, local_10c, iVar3, uVar1);
    FUN_00413c50(param_1, 0x67, 0, uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, 0, iVar4, 0x40080, 0x80003);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, local_108, iVar3, uVar1);
    FUN_00413c50(param_1, 0x67, 0, uVar1);
    return;
}

void FUN_0040ea70(undefined_32 param_1)

{
    undefined_32 uVar1;
    int iVar2;
    int iVar3;
    undefined_8 local_100[256];

    uVar1 = lookup_translation(s__MONDOTEXT_H_0252__sReset_Defaul_004b5630, DAT_00e99720);
    FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0252__sReset_Defaul_004b5630, DAT_00e99720);
    FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0305__sAUDIO_SETTIN_004b560c);
    _sprintf(local_100, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0305__sAUDIO_SETTIN_004b560c, DAT_00e99738, 0x80000, 1, 0, 0);
    uVar1 = FUN_0042de30(uVar1);
    uVar1 = FUN_00413fc0(param_1, 1, 6, local_100, 500, 0x3c, uVar1);
    FUN_00414be0(uVar1, 0xff, 0, 0, 0xff);
    FUN_00411170(param_1, 4, 0, 0x1a4, 1);
    FUN_004112f0(param_1, 0xcd, 0x1a4);
    FUN_00411270(param_1, 0x163, 0x1a4);
    FUN_00411210(param_1, 0x208, 0x17c);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0517__s3D_Spatializ_004b55d8, 0);
    FUN_0042de10(uVar1);
    FUN_0042de10(&DAT_004b51b8, 0);
    FUN_0042de10(s___X__004b53e0, 0);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0306__s3D_Spatializ_004b55a4, DAT_00e99720);
    iVar2 = FUN_0042df70(uVar1);
    iVar2 = iVar2 * 3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0517__s3D_Spatializ_004b55d8, 0, iVar2, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0308__sSound_System_004b5578, 0xf, 0x73, uVar1);
    iVar3 = FUN_00413c50(param_1, 0x2741, 0, uVar1);
    uVar1 = FUN_004131c0(param_1, 0x58, 0, &DAT_004d55cc, 0xf,
                         ((*(int *)(iVar3 + 0x30) - *(int *)(iVar3 + 0x28)) + 1) / 2 + 0x82, 0x100000, 0);
    FUN_00414be0(uVar1, 0xff, 0xff, 0, 200);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0517__s3D_Spatializ_004b55d8, 0, iVar2, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0309__sUse_Hi_Res___004b5548, 0xf, 0xac, uVar1);
    FUN_00413c50(param_1, 0x2744, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0517__s3D_Spatializ_004b55d8, 0, iVar2, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0502__sIn_Race_Voic_004b551c, 0xf, 0xd1, uVar1);
    FUN_00413c50(param_1, 0x2746, 0, uVar1);
    iVar3 = FUN_00413a90(param_1, 0x273e, 0x13b, 199, 300, 0x80000, 0);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0310_Sound_Effects_V_004b54f4, 0x171,
                               ((*(int *)(iVar3 + 0x30) - *(int *)(iVar3 + 0x28)) + 1) / 2 + 0xc4, 0x100000, 0);
    uVar1 = FUN_004131c0(param_1, 10000, 0, uVar1);
    FUN_00414be0(uVar1, 0xff, 0xff, 0, 0xb9);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0517__s3D_Spatializ_004b55d8, 0, iVar2, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0503__sIn_Race_Musi_004b54c8, 0xf, 0xf6, uVar1);
    FUN_00413c50(param_1, 0x2747, 0, uVar1);
    iVar3 = FUN_00413a90(param_1, 0x273f, 0x13b, 0xec, 300, 0x80000, 0);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0311_Music_Cutscene_004b54a0, 0x16d,
                               ((*(int *)(iVar3 + 0x30) - *(int *)(iVar3 + 0x28)) + 1) / 2 + 0xe9, 0x100000, 0);
    uVar1 = FUN_004131c0(param_1, 0x2711, 0, uVar1);
    FUN_00414be0(uVar1, 0xff, 0xff, 0, 0xb9);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0517__s3D_Spatializ_004b55d8, 0, iVar2, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0306__s3D_Spatializ_004b55a4, 0xf, 0x132, uVar1);
    FUN_00413c50(param_1, 0x2742, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0517__s3D_Spatializ_004b55d8, 0, iVar2, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0312__sDoppler_Effe_004b5470, 0xf, 0x15f, uVar1);
    FUN_00413c50(param_1, 0x2743, 0, uVar1);
    iVar2 = FUN_00413a90(param_1, 0x2740, 0x13b, 0x155, 300, 0x1080000, 0);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0313_2D_3D_Relative_004b543c, 0x159,
                               0x169 - ((*(int *)(iVar2 + 0x30) - *(int *)(iVar2 + 0x28)) + 1) / 2, 0x100000, 0);
    uVar1 = FUN_004131c0(param_1, 0x2712, 0, uVar1);
    FUN_00414be0(uVar1, 0xff, 0xff, 0, 0xb9);
    return;
}

void FUN_0040ef40(undefined_32 param_1)

{
    undefined_32 uVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    undefined_32 uVar6;
    int iVar7;
    undefined_32 local_110;
    undefined_32 local_10c;
    undefined_32 local_108;
    undefined_32 local_104;
    undefined_8 local_100[256];

    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0248__sRestore_Prev_004b5250, DAT_00e99720);
    FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0314__sFORCE_FEEDBA_004b57fc, DAT_00e99738);
    iVar2 = FUN_0042df70(uVar1);
    iVar2 = iVar2 * 3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0314__sFORCE_FEEDBA_004b57fc);
    _sprintf(local_100, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0314__sFORCE_FEEDBA_004b57fc, DAT_00e99738, 0x80000, 1, 0, 0);
    uVar1 = FUN_0042de30(uVar1);
    uVar1 = FUN_00413fc0(param_1, 1, 6, local_100, 0x212, iVar2 + 5, uVar1);
    FUN_00414be0(uVar1, 0xff, 0, 0, 0xff);
    FUN_00411170(param_1, 4, 0, 0x1a4, 1);
    FUN_004112f0(param_1, 0xcd, 0x1a4);
    FUN_00411270(param_1, 0x163, 0x1a4);
    FUN_00411210(param_1, 0x208, 0x17c);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0518__sOverall_Forc_004b57d0, 0);
    iVar3 = FUN_0042de10(uVar1);
    iVar4 = FUN_0042de10(&DAT_004b51b8, 0);
    iVar3 = iVar3 + iVar4 * 10;
    iVar4 = FUN_0042de10(s___X__004b53e0, 0);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0315__sOverall_Forc_004b57a4, DAT_00e99720);
    iVar5 = FUN_0042df70(uVar1);
    iVar5 = iVar5 * 3;
    iVar3 = iVar3 + 0x46;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0518__sOverall_Forc_004b57d0, 0, iVar5, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0322__sEnable_G_For_004b577c, iVar3, iVar2 + 0x14, uVar1);
    FUN_00413c50(param_1, 0x60, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0518__sOverall_Forc_004b57d0, 0, iVar5, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0316__sEnable_Force_004b5750, 0x1e, iVar2 + 0x2d, uVar1);
    FUN_00413c50(param_1, 0x59, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0518__sOverall_Forc_004b57d0, 0, iVar5, 0x20000, 0);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0323__sEnable_Engin_004b5724, iVar3, iVar2 + 0x32, uVar1);
    FUN_00413c50(param_1, 0x61, 0, uVar1);
    iVar2 = iVar2 + 0x5a;
    iVar4 = ((int)(iVar4 + (iVar4 >> 0x1f & 0xfU)) >> 4) + 0x1e + iVar4;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0315__sOverall_Forc_004b57a4, 0x14, iVar2, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0315__sOverall_Forc_004b57a4, DAT_00e99738);
    iVar3 = FUN_0042df70(uVar6);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0315__sOverall_Forc_004b57a4, 6);
    uVar6 = FUN_0042de10(uVar6);
    iVar5 = FUN_0041af00(uVar1, iVar2 + iVar3, uVar6, 3, &local_110);
    iVar3 = iVar2 + iVar3 + iVar5;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar5, 0x40080, 0x80001);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, local_110, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5a, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, 0, iVar5, 0x40000, 0x80002);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, local_10c, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5a, 0, uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, 0, iVar5, 0x40080, 0x80003);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, local_108, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5a, 0, uVar1);
    iVar3 = iVar3 + iVar5 * 2;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0317__sAuto_Center_S_004b56f8, iVar4, iVar2, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0317__sAuto_Center_S_004b56f8, DAT_00e99738);
    iVar5 = FUN_0042df70(uVar6);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0317__sAuto_Center_S_004b56f8, 6);
    uVar6 = FUN_0042de10(uVar6);
    iVar7 = FUN_0041af00(uVar1, iVar2 + iVar5, uVar6, 4, &local_110);
    iVar2 = iVar2 + iVar5 + iVar7;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar7, 0x40080, 0x80000);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0234_OFF_004b4e40, local_110, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5b, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar7, 0x40000, 0x80001);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, local_10c, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5b, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, 0, iVar7, 0x40000, 0x80002);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, local_108, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5b, 0, uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, 0, iVar7, 0x40080, 0x80003);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, local_104, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5b, 0, uVar1);
    iVar2 = iVar2 + iVar7 * 2;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0318__sCollision_Ef_004b56d0, 0x2d, iVar3, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0318__sCollision_Ef_004b56d0, DAT_00e99738);
    iVar5 = FUN_0042df70(uVar6);
    iVar3 = iVar3 + iVar5;
    uVar6 = lookup_translation(s__MONDOTEXT_H_0318__sCollision_Ef_004b56d0, 6);
    uVar6 = FUN_0042de10(uVar6);
    iVar5 = FUN_0041af00(uVar1, iVar3, uVar6, 4, &local_110);
    iVar3 = iVar3 + iVar5;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar5, 0x40080, 0x80000);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0234_OFF_004b4e40, local_110, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5c, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar5, 0x40000, 0x80001);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, local_10c, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5c, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, 0, iVar5, 0x40000, 0x80002);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, local_108, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5c, 0, uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, 0, iVar5, 0x40080, 0x80003);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, local_104, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5c, 0, uVar1);
    iVar3 = iVar3 + iVar5 * 2;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0319__sDamage_Effec_004b56ac, iVar4 + 0x19, iVar2, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0319__sDamage_Effec_004b56ac, DAT_00e99738);
    iVar5 = FUN_0042df70(uVar6);
    iVar2 = iVar2 + iVar5;
    uVar6 = lookup_translation(s__MONDOTEXT_H_0319__sDamage_Effec_004b56ac, 6);
    uVar6 = FUN_0042de10(uVar6);
    iVar5 = FUN_0041af00(uVar1, iVar2, uVar6, 4, &local_110);
    iVar2 = iVar2 + iVar5;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar5, 0x40080, 0x80000);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0234_OFF_004b4e40, local_110, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5d, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar5, 0x40000, 0x80001);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, local_10c, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5d, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, 0, iVar5, 0x40000, 0x80002);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, local_108, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5d, 0, uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, 0, iVar5, 0x40080, 0x80003);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, local_104, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5d, 0, uVar1);
    iVar2 = iVar2 + iVar5 * 2;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0320__sTerrain_Effe_004b5684, 0x2d, iVar3, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0320__sTerrain_Effe_004b5684, DAT_00e99738);
    iVar5 = FUN_0042df70(uVar6);
    iVar3 = iVar3 + iVar5;
    uVar6 = lookup_translation(s__MONDOTEXT_H_0320__sTerrain_Effe_004b5684, 6);
    uVar6 = FUN_0042de10(uVar6);
    iVar5 = FUN_0041af00(uVar1, iVar3, uVar6, 4, &local_110);
    iVar3 = iVar3 + iVar5;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar5, 0x40080, 0x80000);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0234_OFF_004b4e40, local_110, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5e, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar5, 0x40000, 0x80001);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, local_10c, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5e, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, 0, iVar5, 0x40000, 0x80002);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, local_108, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5e, 0, uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, 0, iVar5, 0x40080, 0x80003);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, local_104, iVar3, uVar1);
    FUN_00413c50(param_1, 0x5e, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0321__sPod_Action_E_004b565c, iVar4 + 0xf, iVar2, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, 6, uVar1);
    FUN_00414be0(uVar1, 0xff, 0x7d, 0, 0xff);
    uVar6 = lookup_translation(s__MONDOTEXT_H_0321__sPod_Action_E_004b565c, DAT_00e99738);
    iVar3 = FUN_0042df70(uVar6);
    iVar2 = iVar2 + iVar3;
    uVar6 = lookup_translation(s__MONDOTEXT_H_0321__sPod_Action_E_004b565c, 6);
    uVar6 = FUN_0042de10(uVar6);
    iVar3 = FUN_0041af00(uVar1, iVar2, uVar6, 4, &local_110);
    iVar2 = iVar2 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar3, 0x40080, 0x80000);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0234_OFF_004b4e40, local_110, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5f, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, 0, iVar3, 0x40000, 0x80001);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0235_LOW_004b4e28, local_10c, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5f, 0, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, 0, iVar3, 0x40000, 0x80002);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0236_MED_004b4e10, local_108, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5f, 0, uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, 0, iVar3, 0x40080, 0x80003);
    uVar1 = FUN_0042de10(uVar1);
    uVar1 = lookup_translation(s_B_MONDOTEXT_H_0237_HIGH_004b4df7 + 1, local_104, iVar2, uVar1);
    FUN_00413c50(param_1, 0x5f, 0, uVar1);
    return;
}

void FUN_0040fb50(undefined_32 param_1)

{
    undefined_32 uVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int local_120;
    int local_11c;
    int local_110;
    undefined_32 local_10c;
    int local_108;
    int local_104;
    undefined_8 local_100[256];

    uVar1 = lookup_translation(s__MONDOTEXT_H_0324__sBack_to_Keyb_004b5b20, DAT_00e99720);
    uVar2 = FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0324__sBack_to_Keyb_004b5b20, DAT_00e99720);
    FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0325__sRESERVED_KEY_004b5afc);
    _sprintf(local_100, uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0325__sRESERVED_KEY_004b5afc, DAT_00e99738, 0x80000, 1, 0, 0);
    uVar1 = FUN_0042de30(uVar1);
    uVar1 = FUN_00413fc0(param_1, 1, 6, local_100, ((uVar2 >> 1) + uVar2 >> 2) + 0x104, 0x7d, uVar1);
    FUN_00414be0(uVar1, 0xff, 0, 0, 0xff);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0325__sRESERVED_KEY_004b5afc, DAT_00e99720);
    iVar3 = FUN_0042df70(uVar1);
    iVar3 = iVar3 + 5;
    FUN_00411170(param_1, 3, 0, 0x1a4, 2);
    FUN_004197f0(&local_120, 0);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0522_Net_play__Pres_004b5ac4, DAT_00e99720);
    uVar2 = FUN_0042de30(uVar1);
    uVar2 = uVar2 + (uVar2 >> 1) + local_120;
    local_10c = 0x8c;
    iVar4 = -(uVar2 >> 1);
    iVar5 = iVar4 + 0x140;
    local_108 = iVar4 + 0x13f + uVar2;
    local_104 = iVar3 * 0xf + 0x8b + local_11c;
    local_110 = iVar5;
    FUN_0041b260(param_1, 1, &local_110, 0);
    iVar5 = iVar5 + local_120;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0326__sCAPSLOCK_Cyc_004b5a8c, iVar5, local_11c + 0x8c, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = local_11c + 0x8c + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0327__sF1_Camera_Vi_004b5a58, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0328__sF2_Camera_Vi_004b5a24, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0329__sF3_Camera_Vi_004b59f0, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0330__sF4_Camera_Vi_004b59bc, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0331__sF5_Cyle_Taun_004b5984, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0332__sF6_Random_Ta_004b5948, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0333__sF7_Enable_Ch_004b5910, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0335__sF12_Save_Scr_004b58dc, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0336__sCTRL_F_Toggl_004b589c, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0337__sCTRL_J_Toggl_004b5860, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    iVar4 = iVar4 + iVar3;
    uVar1 = lookup_translation(s__MONDOTEXT_H_0338__sCTRL_M_Toggl_004b5828, iVar5, iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0522_Net_play__Pres_004b5ac4, iVar5, iVar3 + iVar4, 0, 0);
    uVar1 = FUN_004131c0(param_1, 1, -1, uVar1);
    FUN_00414be0(uVar1, 0, 0xb4, 0, 0xff);
    return;
}

void FUN_0040ffe0(undefined_32 param_1)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    int iVar4;
    int local_120;
    int local_11c;
    undefined_32 local_118;
    int local_114;
    int local_110;
    int local_10c;
    undefined_32 local_108;
    int local_104;
    undefined_8 local_100[256];

    uVar2 = lookup_translation(s__MONDOTEXT_H_0339__sRemove_004b5bb0, DAT_00e99720);
    iVar3 = FUN_0042de30(uVar2);
    iVar3 = iVar3 * 3;
    uVar2 = lookup_translation(s__MONDOTEXT_H_0339__sRemove_004b5bb0, DAT_00e99720);
    iVar4 = FUN_0042df70(uVar2);
    iVar1 = iVar4 * 3;
    FUN_00411170(param_1, 3, 0, 0x1a9, 1);
    local_120 = 0xc3;
    local_11c = 0x8c;
    local_118 = 0x1bc;
    local_114 = 0x153;
    uVar2 = lookup_translation(s__MONDOTEXT_H_0340__sLOAD_SAVE_SE_004b5b88);
    _sprintf(local_100, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0340__sLOAD_SAVE_SE_004b5b88, DAT_00e99738, 0x80000, 1, 0, 0);
    uVar2 = FUN_0042de30(uVar2);
    uVar2 = FUN_00413fc0(param_1, 1, 6, local_100, 500, 0x3c, uVar2);
    FUN_00414be0(uVar2, 0xff, 0, 0, 0xff);
    uVar2 = FUN_00413520(param_1, 0x2732, &local_120, 0, 0, 0);
    FUN_004138b0(uVar2, 0xff, 100, 0, 0xff);
    local_110 = local_120;
    local_108 = local_118;
    local_10c = local_114 + 0x14;
    local_104 = local_114 + 0x13 + iVar4 * 6;
    uVar2 = FUN_00413430(param_1, 0x2731, &local_110, 0, 0x20000, 0);
    FUN_00413500(uVar2, 0x18);
    FUN_00414ca0(uVar2, 0xff, 100, 0, 0xff);
    FUN_00414e60(uVar2, 0);
    iVar4 = local_11c;
    uVar2 = lookup_translation(s__MONDOTEXT_H_0341__sLoad_004b5b6c, local_120 + -0x96, local_11c + 0x28, iVar3, iVar1,
                               0x100000, 0);
    FUN_004132a0(param_1, 0x2735, -1, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0339__sRemove_004b5bb0, local_120 + -0x96, iVar4 + 0x46, iVar3, iVar1,
                               0x100000, 0);
    FUN_004132a0(param_1, 0x2738, -1, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0342__sSave_004b5b50, local_120 + -0x96, iVar4 + 100, iVar3, iVar1,
                               0x100000, 0);
    FUN_004132a0(param_1, 0x2734, -1, uVar2);
    return;
}

void FUN_00410230(undefined_32 param_1)

{
    int iVar1;
    undefined_32 uVar2;
    uint uVar3;
    int iVar4;
    int iVar5;
    int local_20;
    int local_1c;
    undefined_32 local_18;
    int local_14;
    int local_10;
    int local_c;
    undefined_32 local_8;
    int local_4;

    uVar2 = lookup_translation(s__MONDOTEXT_H_0343__sREMOVE_RACER_004b5c1c, DAT_00e99720);
    uVar3 = FUN_0042de30(uVar2);
    iVar5 = uVar3 + (uVar3 >> 1);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0343__sREMOVE_RACER_004b5c1c, DAT_00e99720);
    iVar4 = FUN_0042df70(uVar2);
    local_20 = 0xc3;
    local_1c = 0x8c;
    local_18 = 0x1bc;
    local_14 = 0x153;
    uVar2 = FUN_00413520(param_1, 0x2732, &local_20, 0, 0, 0);
    FUN_004138b0(uVar2, 0xff, 100, 0, 0xff);
    local_10 = local_20;
    local_c = local_14 + 0x14;
    local_4 = local_14 + 0x13 + iVar4 * 6;
    local_8 = local_18;
    uVar2 = FUN_00413430(param_1, 0x2731, &local_10, 0, 0x20000, 0);

    FUN_00413500(uVar2, 0x18);
    FUN_00414ca0(uVar2, 0xff, 100, 0, 0xff);
    FUN_00414e60(uVar2, 0);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0345_Current_Player_004b5bf0, local_20, local_14 + 0x19, 0, 0);
    uVar2 = FUN_004131c0(param_1, 0x273a, 6, uVar2);
    FUN_00414be0(uVar2, 0xff, 0xe1, 0, 0xfa);
    iVar1 = local_1c;
    uVar2 = lookup_translation(s__MONDOTEXT_H_0347__sCREATE_RACER_004b5bcc, local_20 + -0x96, local_1c + 0x28, iVar5,
                               iVar4 * 3, 0x100000, 0);
    FUN_004132a0(param_1, 0x2737, -1, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0343__sREMOVE_RACER_004b5c1c, local_20 + -0x96, iVar1 + 0x46, iVar5,
                               iVar4 * 3, 0x100000, 0);
    FUN_004132a0(param_1, 0x2738, -1, uVar2);
    FUN_00411170(param_1, 0x2748, 0, 0x1a4, 2);
    FUN_00411210(param_1, 0x208, 0x17c);
    return;
}

void FUN_00410430(void)

{
    int iVar1;

    iVar1 = FUN_00485880(0x58, 0);
    if ((iVar1 != 0) && (DAT_004d79e8 == 0))
    {
        FUN_00440550(0x46);
        FUN_00410480(s_snap__004b5c44);
        DAT_004d79e8 = 1;
        return;
    }
    DAT_004d79e8 = 0;
    return;
}

void FUN_00410480(undefined_32 param_1)

{
    int iVar1;
    undefined_8 local_50[80];

    do
    {
        iVar1 = DAT_004d79e4;
        DAT_004d79e4 = DAT_004d79e4 + 1;
        _sprintf(local_50, s__s_03d_bmp_004b5c50, param_1, iVar1);
        iVar1 = _fopen(local_50, &DAT_004b5c4c /* "rb" */);
        if (iVar1 == 0)
            break;
        fclose(iVar1);
    } while (iVar1 != 0);
    FUN_00489d20(local_50);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004104f0(void)

{
    char cVar1;
    int iVar2;
    int iVar3;
    undefined_32 uVar4;
    int iVar5;
    uint uVar6;
    uint uVar7;
    undefined_32 *puVar8;
    char *pcVar9;
    char *pcVar10;
    undefined_32 *puVar11;
    bool bVar12;
    char *pcVar13;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;

    iVar2 = DAT_00e35a98;
    if (DAT_004b5c40 != 0)
    {
        DAT_004b5c40 = 0;
    }
    iVar3 = FUN_00485880(0x58, 0);
    if (iVar3 != 0)
    {
        FUN_00410430();
    }
    iVar3 = FUN_00485880(0x1d, 0);
    if ((((iVar3 == 0) || (iVar3 = FUN_00485880(0x2e, 0), iVar3 == 0)) || (iVar3 = FUN_00485880(0x15, 0), iVar3 == 0))
        || (*(int *)(DAT_0050c454 + 8) != 9))
    {
        iVar3 = FUN_00485880(0x9d, 0);
        if (((iVar3 == 0) || (iVar3 = FUN_00485880(0x31, 0), iVar3 == 0))
            || ((iVar3 = FUN_00485880(0x25, 0), iVar3 == 0 || (*(int *)(DAT_0050c454 + 8) != 9))))
        {
            iVar3 = FUN_00485880(0x3b, 0);
            if (iVar3 == 0)
            {
                iVar3 = FUN_00485880(0x3c, 0);
                if (iVar3 == 0)
                {
                    iVar3 = FUN_00485880(0x3d, 0);
                    if (iVar3 == 0)
                    {
                        iVar3 = FUN_00485880(0x3e, 0);
                        if (iVar3 == 0)
                        {
                            iVar3 = FUN_00485880(0x3a, 0);
                            if (iVar3 == 0)
                            {
                                iVar3 = FUN_00485880(0xb8, 0);
                                if (((iVar3 == 0) && (iVar3 = FUN_00485880(0x38, 0), iVar3 == 0))
                                    || (iVar3 = FUN_00485880(0x23, 0), iVar3 == 0))
                                {
                                    if (DAT_0050c07c == 2)
                                    {
                                        iVar3 = FUN_00485880(0x1d, 0);
                                        if ((iVar3 == 0) && (iVar3 = FUN_00485880(0x9d, 0), iVar3 == 0))
                                        {
                                            iVar3 = FUN_00485880(0x37, 0);
                                            if ((iVar3 == 0) || (iVar3 = FUN_00485880(0x14, 0), iVar3 == 0))
                                            {
                                                iVar3 = FUN_00485880(0x17, 0);
                                                if (((iVar3 == 0)
                                                     || (((iVar3 = FUN_00485880(0x21, 0),
                                                           iVar3 == 0 || (iVar3 = FUN_00485880(0x26, 0), iVar3 == 0))
                                                          || (iVar3 = FUN_00485880(0x15, 0), iVar3 == 0))))
                                                    || (DAT_004d5e00 != 0))
                                                    goto LAB_0041094f;
                                                if (_DAT_004d79ec != 0)
                                                    goto LAB_00410f62;
                                                uVar4 = 0x2b;
                                                DAT_0050c048 = DAT_0050c048 ^ 0x2000;
                                            LAB_00410938:
                                                FUN_00440550(uVar4);
                                                _DAT_004d79ec = 1;
                                            }
                                            else
                                            {
                                                if (DAT_004d5e00 != 0)
                                                    goto LAB_0041094f;
                                                if (_DAT_004d79ec != 0)
                                                    goto LAB_00410f62;
                                                DAT_0050cb68 = DAT_0050cb68 ^ 1;
                                                FUN_00440550(0x2c);
                                                _DAT_004d79ec = 1;
                                            }
                                        }
                                        else
                                        {
                                            iVar3 = FUN_00485880(0x44, 0);
                                            if (iVar3 == 0)
                                                goto LAB_0041094f;
                                            if (_DAT_004d79ec != 0)
                                                goto LAB_00410f62;
                                            if (DAT_004d5e00 == 0)
                                            {
                                                uVar4 = 0x28;
                                                DAT_0050c048 = DAT_0050c048 ^ 4;
                                                goto LAB_00410938;
                                            }
                                        LAB_00410eb5:
                                            _DAT_004d79ec = 1;
                                        }
                                    }
                                    else
                                    {
                                    LAB_0041094f:
                                        iVar3 = FUN_00485880(0x1d, 0);
                                        if ((iVar3 == 0) && (iVar3 = FUN_00485880(0x9d, 0), iVar3 == 0))
                                        {
                                        LAB_00410e8b:
                                            iVar3 = FUN_00485880(0x41, 0);
                                            if (iVar3 != 0)
                                            {
                                                if (_DAT_004d79ec != 0)
                                                    goto LAB_00410f62;
                                                FUN_00440550(0x46);
                                                FUN_0041bdd0();
                                                goto LAB_00410eb5;
                                            }
                                            iVar3 = FUN_00485880(0x3f, 0);
                                            if ((iVar3 == 0) && (iVar3 = FUN_00485880(0x40, 0), iVar3 == 0))
                                            {
                                                iVar3 = FUN_00485880(0x46, 0);
                                                if ((iVar3 == 0) || (iVar3 = FUN_00485880(199, 0), iVar3 == 0))
                                                {
                                                    _DAT_004d79ec = 0;
                                                }
                                                else
                                                {
                                                    if (_DAT_004d79ec != 0)
                                                        goto LAB_00410f62;
                                                    _DAT_004d79ec = 1;
                                                    if (*(int *)(DAT_0050c454 + 8) == 9)
                                                    {
                                                        DAT_0050c048 = DAT_0050c048 ^ 0x40;
                                                        FUN_0043d9a0(DAT_0050c454);
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (_DAT_004d79ec != 0)
                                                    goto LAB_00410f62;
                                                DAT_004d79e0 = 1;
                                                _DAT_004d79ec = 1;
                                            }
                                        }
                                        else
                                        {
                                            iVar3 = FUN_00485880(0x24, 0);
                                            if (iVar3 == 0)
                                            {
                                                iVar3 = FUN_00485880(0x38, 0);
                                                if ((iVar3 == 0) || (*(int *)(DAT_0050c454 + 8) != 0xd))
                                                {
                                                LAB_00410b9c:
                                                    iVar3 = FUN_00485880(0x32, 0);
                                                    if (iVar3 == 0)
                                                    {
                                                        iVar3 = FUN_00485880(0x21, 0);
                                                        if (iVar3 == 0)
                                                        {
                                                            iVar3 = FUN_00485880(0x10, 0);
                                                            if ((iVar3 == 0) || (DAT_004d5e00 == 0))
                                                            {
                                                                iVar3 = FUN_00485880(0x57, 0);
                                                                if (iVar3 == 0)
                                                                    goto LAB_00410e8b;
                                                                if (_DAT_004d79ec != 0)
                                                                    goto LAB_00410f62;
                                                                _DAT_004d79ec = 1;
                                                                DAT_004d79dc = (uint)(DAT_004d79dc == 0);
                                                            }
                                                            else
                                                            {
                                                                if (_DAT_004d79ec != 0)
                                                                    goto LAB_00410f62;
                                                                _DAT_004d79ec = 1;
                                                                local_20 = 0x50617773;
                                                                local_1c = -1;
                                                                local_18 = 1;
                                                                FUN_00450c50(MAGIC('A', 'l', 'l', '!'), &local_20);
                                                            }
                                                            goto LAB_00410f5a;
                                                        }
                                                        if (_DAT_004d79ec != 0)
                                                            goto LAB_00410f62;
                                                        _DAT_004d79ec = 1;
                                                        if (DAT_004b2914 == 0)
                                                        {
                                                            pcVar13 = s__MONDOTEXT_H_0042__nNo_Force_Fee_004b2880;
                                                        }
                                                        else
                                                        {
                                                            if (_DAT_004d765c != 0)
                                                            {
                                                                if ((DAT_004b2910 == 0) && (DAT_004b4938 != 0))
                                                                {
                                                                    pcVar13 = (char *)lookup_translation(
                                                                        s__MONDOTEXT_H_0369_Force_Feedback_004b5c88);
                                                                    uVar6 = -1;
                                                                    do
                                                                    {
                                                                        pcVar9 = pcVar13;
                                                                        if (uVar6 == 0)
                                                                            break;
                                                                        uVar6 = uVar6 - 1;
                                                                        pcVar9 = pcVar13 + 1;
                                                                        cVar1 = *pcVar13;
                                                                        pcVar13 = pcVar9;
                                                                    } while (cVar1 != '\0');
                                                                    uVar6 = ~uVar6;
                                                                    iVar3 = -1;
                                                                    pcVar13 = &DAT_004d78d0;
                                                                    do
                                                                    {
                                                                        pcVar10 = pcVar13;
                                                                        if (iVar3 == 0)
                                                                            break;
                                                                        iVar3 = iVar3 + -1;
                                                                        pcVar10 = pcVar13 + 1;
                                                                        cVar1 = *pcVar13;
                                                                        pcVar13 = pcVar10;
                                                                    } while (cVar1 != '\0');
                                                                    puVar8 = (undefined_32 *)(pcVar9 + -uVar6);
                                                                    puVar11 = (undefined_32 *)(pcVar10 + -1);
                                                                    QMEMCPY(uVar7, puVar8, puVar11, uVar6 >> 2)
                                                                    for (uVar6 = uVar6 & 3; uVar6 != 0;
                                                                         uVar6 = uVar6 - 1)
                                                                    {
                                                                        *(undefined_8 *)puVar11 =
                                                                            *(undefined_8 *)puVar8;
                                                                        puVar8 = (undefined_32 *)((int)puVar8 + 1);
                                                                        puVar11 = (undefined_32 *)((int)puVar11 + 1);
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    pcVar13 = (char *)lookup_translation(
                                                                        s__MONDOTEXT_H_0370_Force_Feedback_004b5c5c);
                                                                    uVar6 = -1;
                                                                    do
                                                                    {
                                                                        pcVar9 = pcVar13;
                                                                        if (uVar6 == 0)
                                                                            break;
                                                                        uVar6 = uVar6 - 1;
                                                                        pcVar9 = pcVar13 + 1;
                                                                        cVar1 = *pcVar13;
                                                                        pcVar13 = pcVar9;
                                                                    } while (cVar1 != '\0');
                                                                    uVar6 = ~uVar6;
                                                                    iVar3 = -1;
                                                                    pcVar13 = &DAT_004d78d0;
                                                                    do
                                                                    {
                                                                        pcVar10 = pcVar13;
                                                                        if (iVar3 == 0)
                                                                            break;
                                                                        iVar3 = iVar3 + -1;
                                                                        pcVar10 = pcVar13 + 1;
                                                                        cVar1 = *pcVar13;
                                                                        pcVar13 = pcVar10;
                                                                    } while (cVar1 != '\0');
                                                                    puVar8 = (undefined_32 *)(pcVar9 + -uVar6);
                                                                    puVar11 = (undefined_32 *)(pcVar10 + -1);
                                                                    QMEMCPY(uVar7, puVar8, puVar11, uVar6 >> 2)
                                                                    for (uVar6 = uVar6 & 3; uVar6 != 0;
                                                                         uVar6 = uVar6 - 1)
                                                                    {
                                                                        *(undefined_8 *)puVar11 =
                                                                            *(undefined_8 *)puVar8;
                                                                        puVar8 = (undefined_32 *)((int)puVar8 + 1);
                                                                        puVar11 = (undefined_32 *)((int)puVar11 + 1);
                                                                    }
                                                                    FUN_0040a120(1);
                                                                }
                                                                FUN_00440550(0x46);
                                                                if ((DAT_004b2910 != 0)
                                                                    || (DAT_004b2910 = 1, DAT_004b4938 == 0))
                                                                {
                                                                    DAT_004b2910 = 0;
                                                                }
                                                                uVar4 = FUN_00414d90(0, 0x1b);
                                                                FUN_0040c100(uVar4);
                                                                iVar3 = FUN_00411810();
                                                                if (((DAT_004b2940 != 0) || (iVar3 == 0))
                                                                    || (*(int *)(iVar3 + 0x1c) != 0x1b))
                                                                {
                                                                    FUN_0040ab80(s_current_004b2640);
                                                                }
                                                                goto LAB_00410f5a;
                                                            }
                                                            pcVar13 = s__MONDOTEXT_H_0368_No_force_effec_004b5cb4;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (_DAT_004d79ec != 0)
                                                            goto LAB_00410f62;
                                                        _DAT_004d79ec = 1;
                                                        if (DAT_004b2950 != 0)
                                                        {
                                                            if (DAT_004d6b38 == 0)
                                                            {
                                                                pcVar13 = s__MONDOTEXT_H_0365_Mouse_ENABLED_004b5d04;
                                                            }
                                                            else
                                                            {
                                                                pcVar13 = s__MONDOTEXT_H_0366_Mouse_DISABLED_004b5ce0;
                                                            }
                                                            pcVar13 = (char *)lookup_translation(pcVar13);
                                                            uVar6 = -1;
                                                            do
                                                            {
                                                                pcVar9 = pcVar13;
                                                                if (uVar6 == 0)
                                                                    break;
                                                                uVar6 = uVar6 - 1;
                                                                pcVar9 = pcVar13 + 1;
                                                                cVar1 = *pcVar13;
                                                                pcVar13 = pcVar9;
                                                            } while (cVar1 != '\0');
                                                            uVar6 = ~uVar6;
                                                            iVar3 = -1;
                                                            pcVar13 = &DAT_004d78d0;
                                                            do
                                                            {
                                                                pcVar10 = pcVar13;
                                                                if (iVar3 == 0)
                                                                    break;
                                                                iVar3 = iVar3 + -1;
                                                                pcVar10 = pcVar13 + 1;
                                                                cVar1 = *pcVar13;
                                                                pcVar13 = pcVar10;
                                                            } while (cVar1 != '\0');
                                                            puVar8 = (undefined_32 *)(pcVar9 + -uVar6);
                                                            puVar11 = (undefined_32 *)(pcVar10 + -1);
                                                            QMEMCPY(uVar7, puVar8, puVar11, uVar6 >> 2)
                                                            for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
                                                            {
                                                                *(undefined_8 *)puVar11 = *(undefined_8 *)puVar8;
                                                                puVar8 = (undefined_32 *)((int)puVar8 + 1);
                                                                puVar11 = (undefined_32 *)((int)puVar11 + 1);
                                                            }
                                                            FUN_00440550(0x46);
                                                            DAT_004d6b38 = (uint)(DAT_004d6b38 == 0);
                                                            if (DAT_004b2940 == 0)
                                                            {
                                                                uVar4 = FUN_00414d90(0, 0x19);
                                                                FUN_0040b740(1, uVar4);
                                                            }
                                                            iVar3 = FUN_00411810();
                                                            if ((DAT_004b2940 == 0) && (iVar3 != 0))
                                                            {
                                                                bVar12 = *(int *)(iVar3 + 0x1c) == 0x19;
                                                                goto LAB_00410c6e;
                                                            }
                                                            goto LAB_00410c74;
                                                        }
                                                        pcVar13 = s__MONDOTEXT_H_0036__nNO_MOUSE_DET_004b25e4;
                                                    }
                                                LAB_00410ccd:
                                                    _DAT_004d79ec = 1;
                                                    pcVar13 = (char *)lookup_translation(pcVar13);
                                                    uVar6 = -1;
                                                    do
                                                    {
                                                        pcVar9 = pcVar13;
                                                        if (uVar6 == 0)
                                                            break;
                                                        uVar6 = uVar6 - 1;
                                                        pcVar9 = pcVar13 + 1;
                                                        cVar1 = *pcVar13;
                                                        pcVar13 = pcVar9;
                                                    } while (cVar1 != '\0');
                                                    uVar6 = ~uVar6;
                                                    iVar3 = -1;
                                                    pcVar13 = &DAT_004d78d0;
                                                    do
                                                    {
                                                        pcVar10 = pcVar13;
                                                        if (iVar3 == 0)
                                                            break;
                                                        iVar3 = iVar3 + -1;
                                                        pcVar10 = pcVar13 + 1;
                                                        cVar1 = *pcVar13;
                                                        pcVar13 = pcVar10;
                                                    } while (cVar1 != '\0');
                                                    puVar8 = (undefined_32 *)(pcVar9 + -uVar6);
                                                    puVar11 = (undefined_32 *)(pcVar10 + -1);
                                                    QMEMCPY(uVar7, puVar8, puVar11, uVar6 >> 2)
                                                    for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
                                                    {
                                                        *(undefined_8 *)puVar11 = *(undefined_8 *)puVar8;
                                                        puVar8 = (undefined_32 *)((int)puVar8 + 1);
                                                        puVar11 = (undefined_32 *)((int)puVar11 + 1);
                                                    }
                                                }
                                                else
                                                {
                                                    iVar3 = FUN_00485880(0xb8, 0);
                                                    if (iVar3 == 0)
                                                    {
                                                        iVar3 = FUN_00485880(0x9d, 0);
                                                        if (iVar3 == 0)
                                                            goto LAB_00410b9c;
                                                        if (_DAT_004d79ec != 0)
                                                            goto LAB_00410f62;
                                                        _DAT_004d79ec = 1;
                                                        if (DAT_004d5e00 == 0)
                                                        {
                                                            DAT_00e996dc = DAT_00e996dc & 0xffffbfff;
                                                            *(bool *)(DAT_0050c454 + 0x6e) =
                                                                *(char *)(DAT_0050c454 + 0x6e) == '\0';
                                                            FUN_00440550(0x2f);
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (_DAT_004d79ec != 0)
                                                            goto LAB_00410f62;
                                                        _DAT_004d79ec = 1;
                                                        if (DAT_004d5e00 == 0)
                                                        {
                                                            DAT_00e996dc = DAT_00e996dc | 0x4000;
                                                            *(bool *)(DAT_0050c454 + 0x6e) =
                                                                *(char *)(DAT_0050c454 + 0x6e) == '\0';
                                                            FUN_00440550(0x2e);
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (_DAT_004d79ec != 0)
                                                    goto LAB_00410f62;
                                                _DAT_004d79ec = 1;
                                                if (DAT_004b294c == 0)
                                                {
                                                    pcVar13 = s__MONDOTEXT_H_0035__nNO_JOYSTICK_D_004b260c;
                                                    goto LAB_00410ccd;
                                                }
                                                if (DAT_004b2944 == 0)
                                                {
                                                    pcVar13 = (char *)lookup_translation(
                                                        s__MONDOTEXT_H_0363_Joystick_ENABL_004b5d50);
                                                    uVar6 = -1;
                                                    do
                                                    {
                                                        pcVar9 = pcVar13;
                                                        if (uVar6 == 0)
                                                            break;
                                                        uVar6 = uVar6 - 1;
                                                        pcVar9 = pcVar13 + 1;
                                                        cVar1 = *pcVar13;
                                                        pcVar13 = pcVar9;
                                                    } while (cVar1 != '\0');
                                                    uVar6 = ~uVar6;
                                                    iVar3 = -1;
                                                    pcVar13 = &DAT_004d78d0;
                                                    do
                                                    {
                                                        pcVar10 = pcVar13;
                                                        if (iVar3 == 0)
                                                            break;
                                                        iVar3 = iVar3 + -1;
                                                        pcVar10 = pcVar13 + 1;
                                                        cVar1 = *pcVar13;
                                                        pcVar13 = pcVar10;
                                                    } while (cVar1 != '\0');
                                                    puVar8 = (undefined_32 *)(pcVar9 + -uVar6);
                                                    puVar11 = (undefined_32 *)(pcVar10 + -1);
                                                    for (uVar7 = uVar6 >> 2; DAT_004b2910 = DAT_004d79d0, uVar7 != 0;
                                                         uVar7 = uVar7 - 1)
                                                    {
                                                        *puVar11 = *puVar8;
                                                        puVar8 = puVar8 + 1;
                                                        puVar11 = puVar11 + 1;
                                                    }
                                                    for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
                                                    {
                                                        *(undefined_8 *)puVar11 = *(undefined_8 *)puVar8;
                                                        puVar8 = (undefined_32 *)((int)puVar8 + 1);
                                                        puVar11 = (undefined_32 *)((int)puVar11 + 1);
                                                    }
                                                }
                                                else
                                                {
                                                    pcVar13 = (char *)lookup_translation(
                                                        s__MONDOTEXT_H_0364_Joystick_DISAB_004b5d28);
                                                    uVar6 = -1;
                                                    do
                                                    {
                                                        pcVar9 = pcVar13;
                                                        if (uVar6 == 0)
                                                            break;
                                                        uVar6 = uVar6 - 1;
                                                        pcVar9 = pcVar13 + 1;
                                                        cVar1 = *pcVar13;
                                                        pcVar13 = pcVar9;
                                                    } while (cVar1 != '\0');
                                                    uVar6 = ~uVar6;
                                                    iVar3 = -1;
                                                    pcVar13 = &DAT_004d78d0;
                                                    do
                                                    {
                                                        pcVar10 = pcVar13;
                                                        if (iVar3 == 0)
                                                            break;
                                                        iVar3 = iVar3 + -1;
                                                        pcVar10 = pcVar13 + 1;
                                                        cVar1 = *pcVar13;
                                                        pcVar13 = pcVar10;
                                                    } while (cVar1 != '\0');
                                                    puVar8 = (undefined_32 *)(pcVar9 + -uVar6);
                                                    puVar11 = (undefined_32 *)(pcVar10 + -1);
                                                    for (uVar7 = uVar6 >> 2; DAT_004d79d0 = DAT_004b2910, uVar7 != 0;
                                                         uVar7 = uVar7 - 1)
                                                    {
                                                        *puVar11 = *puVar8;
                                                        puVar8 = puVar8 + 1;
                                                        puVar11 = puVar11 + 1;
                                                    }
                                                    bVar12 = DAT_004b2910 != 0;
                                                    for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
                                                    {
                                                        *(undefined_8 *)puVar11 = *(undefined_8 *)puVar8;
                                                        puVar8 = (undefined_32 *)((int)puVar8 + 1);
                                                        puVar11 = (undefined_32 *)((int)puVar11 + 1);
                                                    }
                                                    if (bVar12)
                                                    {
                                                        FUN_0040a120(1);
                                                    }
                                                    DAT_004b2910 = 0;
                                                }
                                                FUN_00440550(0x46);
                                                DAT_004b2944 = (uint)(DAT_004b2944 == 0);
                                                if (DAT_004b2940 == 0)
                                                {
                                                    uVar4 = FUN_00414d90(0, 0x18);
                                                    FUN_0040b740(0, uVar4);
                                                }
                                                iVar3 = FUN_00411810();
                                                if ((DAT_004b2940 == 0) && (iVar3 != 0))
                                                {
                                                    bVar12 = *(int *)(iVar3 + 0x1c) == 0x18;
                                                LAB_00410c6e:
                                                    if (bVar12)
                                                        goto LAB_00410f5a;
                                                }
                                            LAB_00410c74:
                                                FUN_00406080(s_current_004b2640);
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    if (_DAT_004d79ec != 0)
                                        goto LAB_00410f62;
                                    _DAT_004d79ec = 1;
                                    DAT_00ec83c8 = 1;
                                }
                            }
                            else
                            {
                                if (_DAT_004d79ec != 0)
                                    goto LAB_00410f62;
                                _DAT_004d79ec = 1;
                                iVar3 = FUN_00450b30(MAGIC('J', 'd', 'g', 'e'), 0);
                                if (iVar3 != 0)
                                {
                                    FUN_00440550(0x46);
                                    if (DAT_0050ca18 < 2)
                                    {
                                        iVar5 = *(int *)(iVar3 + 0x124) + 1;
                                        *(int *)(iVar3 + 0x124) = iVar5;
                                        if (4 < iVar5)
                                        {
                                            *(undefined_32 *)(iVar3 + 0x124) = 0;
                                        }
                                    }
                                    else
                                    {
                                        iVar5 = *(int *)(iVar3 + 0x124) + 1;
                                        *(int *)(iVar3 + 0x124) = iVar5;
                                        if (7 < iVar5)
                                        {
                                            *(undefined_32 *)(iVar3 + 0x124) = 4;
                                        }
                                    }
                                }
                            }
                        }
                        else
                        {
                            if (_DAT_004d79ec != 0)
                                goto LAB_00410f62;
                            _DAT_004d79ec = 1;
                            DAT_00ec83d0 = 0x63636634;
                            if (((*(int *)(DAT_0050c454 + 8) == 7)
                                 && ((iVar3 = FUN_00485880(0x2a, 0),
                                      iVar3 != 0 || (iVar3 = FUN_00485880(0x36, 0), iVar3 != 0))))
                                && (iVar3 = FUN_00485880(5, 0), iVar3 != 0))
                            {
                                DAT_00e35a98 = DAT_00e35a98 + 1000;
                            }
                        }
                    }
                    else
                    {
                        if (_DAT_004d79ec != 0)
                            goto LAB_00410f62;
                        _DAT_004d79ec = 1;
                        DAT_00ec83d0 = 0x63636633;
                    }
                }
                else
                {
                    if (_DAT_004d79ec != 0)
                        goto LAB_00410f62;
                    _DAT_004d79ec = 1;
                    DAT_00ec83d0 = 0x63636632;
                }
            }
            else
            {
                if (_DAT_004d79ec != 0)
                    goto LAB_00410f62;
                _DAT_004d79ec = 1;
                DAT_00ec83d0 = 0x63636631;
            }
        }
        else
        {
            if (_DAT_004d79ec != 0)
                goto LAB_00410f62;
            _DAT_004d79ec = 1;
            __cftcvt_init_5();
            FUN_00440550(0x2d);
        }
    }
    else
    {
        if (_DAT_004d79ec != 0)
            goto LAB_00410f62;
        _DAT_004d79ec = 1;
        __cftcvt_init_6();
        FUN_00440550(-1);
    }
LAB_00410f5a:
    if (_DAT_004d79ec == 0)
    {
        return;
    }
LAB_00410f62:
    if (DAT_004d78d0 != '\0')
    {
        FUN_0044fce0(&DAT_004d78d0, 2.0f);
        DAT_004d78d0 = '\0';
        _DAT_004d5564 = 0x40066666;
    }
    iVar3 = DAT_00e35a98;
    if ((iVar2 != DAT_00e35a98) && (iVar3 = iVar2, DAT_00ec83cc < 5000))
    {
        DAT_00ec83cc = DAT_00ec83cc + 1000;
        return;
    }
    DAT_00e35a98 = iVar3;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00410fd0(void)

{
    undefined_32 *puVar1;
    int iVar2;
    int iVar3;
    float local_8;

    DAT_004d87c4 = FUN_0048bee0(0x100);
    if (DAT_004d87c4 != 0)
    {
        puVar1 = &DAT_004d8210;
        MEMSET(iVar3, puVar1, 0, 0x15c)
        puVar1 = &DAT_004d7c68;
        MEMSET(iVar3, puVar1, 0, 0x12a)
        PTR_DAT_004b5d74 = (undefined_8 *)&DAT_004d8210;
        puVar1 = &DAT_004d8160;
        MEMSET(iVar3, puVar1, 0, 0x28)
        FUN_004117e0();
        _DAT_004d8204 = DAT_00ec87c0;
        _DAT_004d8200 = DAT_00ec87c4;
        FUN_00416cc0(DAT_00ec87c0, DAT_00ec87c4, &DAT_004d79f4, &DAT_004d7c58);
        puVar1 = &DAT_00e9d9dc;
        do
        {
            *puVar1 = 0;
            puVar1 = puVar1 + 8;
        } while ((int)puVar1 < 0xe9ec5c);
        *(code **)(PTR_DAT_004b5d74 + 0x10) = FUN_00415850;
        FUN_00414e60(PTR_DAT_004b5d74, 1);
        local_8 = 0.0;
        // PlatformAbstraction->getTime
        iVar3 = (**(code **)(DAT_00ecc420 + 0x2c))();
        // PlatformAbstraction->getTime
        iVar2 = (**(code **)(DAT_00ecc420 + 0x2c))();
        while (iVar2 == iVar3)
        {
            // PlatformAbstraction->getTime
            iVar2 = (**(code **)(DAT_00ecc420 + 0x2c))();
        }
        // PlatformAbstraction->getTime
        iVar3 = (**(code **)(DAT_00ecc420 + 0x2c))();
        do
        {
            iVar2 = 0x9c4;
            do
            {
                local_8 = local_8 - -1.0;
                iVar2 = iVar2 + -1;
            } while (iVar2 != 0);
            // PlatformAbstraction->getTime
            iVar2 = (**(code **)(DAT_00ecc420 + 0x2c))();
        } while ((uint)(iVar2 - iVar3) < 0x1f);
        if (local_8 * 0.0004 < 20.0)
        {
            DAT_004d8bd8 = 0;
        }
        return 1;
    }
    return 0;
}

void FUN_00411120(undefined_32 param_1, undefined_32 param_2)

{
    FUN_0041aa40(PTR_DAT_004b5d74, param_1, param_2);
    return;
}

undefined_32 FUN_00411140(int param_1, int param_2)

{
    if (((param_2 != 0) && (DAT_004d8bd4 != 0)) && (*(int *)(DAT_004d8bd4 + 0x1c) == param_1))
    {
        return 1;
    }
    return 0;
}

void FUN_00411170(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, int param_5)

{
    undefined_32 uVar1;
    undefined_8 local_100[256];

    if (param_5 == 0)
    {
        uVar1 = lookup_translation(s___MONDOTEXT_H_0388__sQuit_004b5d8f + 1);
    }
    else if (param_5 == 1)
    {
        uVar1 = lookup_translation(s__MONDOTEXT_H_0034__sCancel_004b2670);
    }
    else
    {
        if (param_5 != 2)
            goto LAB_004111ca;
        uVar1 = lookup_translation(s__MONDOTEXT_H_0371__sBack_004b5dac);
    }
    _sprintf(local_100, uVar1);
LAB_004111ca:
    FUN_004132a0(param_1, param_2, 6, local_100, param_3, param_4, 0xb4, 0x19, 0x1020000, 0);
    return;
}

void FUN_00411210(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    FUN_00417150(0x3f8, &local_10);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0372__sOK_004b5dc8, param_2, param_3, local_8 - local_10,
                               local_4 - local_c, 0x200000, 0);
    FUN_004132a0(param_1, 2, 6, uVar1);
    return;
}

void FUN_00411270(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;

    uVar1 = lookup_translation(s__MONDOTEXT_H_0390__sRestore_004b5de0, DAT_00e99738);
    FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0390__sRestore_004b5de0, DAT_00e99738);
    FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0390__sRestore_004b5de0, param_2, param_3, 0x96, 0x19, 0x100000, 0);
    FUN_004132a0(param_1, 0x26, 6, uVar1);
    return;
}

void FUN_004112e1(void)

{
    InitializeCriticalSection((LPCRITICAL_SECTION)&DAT_004b7e7e);
    FUN_00411361();
    return;
}

void FUN_004112f0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;

    uVar1 = lookup_translation(s__MONDOTEXT_H_0389__sDefault_004b5dfc, DAT_00e99738);
    FUN_0042de30(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0389__sDefault_004b5dfc, DAT_00e99738);
    FUN_0042df70(uVar1);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0389__sDefault_004b5dfc, param_2, param_3, 0x96, 0x19, 0x100000, 0);
    FUN_004132a0(param_1, 0x25, 6, uVar1);
    return;
}

void FUN_00411361(void)

{
    FUN_00421d90();
    FUN_00423efd();
    return;
}

void FUN_00411370(void)

{
    undefined_32 uVar1;

    uVar1 = FUN_00411480(0);
    FUN_00414e60(uVar1);
    return;
}

void FUN_00411390(int param_1, int param_2, uint param_3)

{
    if ((param_1 != 0) && (param_2 != 0))
    {
        if ((((param_3 & 2) == 0) || ((param_3 & 8) == 0)) && (((param_3 & 1) == 0 || ((param_3 & 4) == 0))))
        {
            if ((param_3 & 2) != 0)
            {
                FUN_00414b60(param_1, *(undefined_32 *)(param_1 + 0x24), *(undefined_32 *)(param_2 + 0x28));
            }
            if ((param_3 & 8) != 0)
            {
                FUN_00414b60(param_1, *(undefined_32 *)(param_1 + 0x24),
                             (*(int *)(param_2 + 0x30) - *(int *)(param_1 + 0x30)) + *(int *)(param_1 + 0x28));
            }
            if ((param_3 & 1) != 0)
            {
                FUN_00414b60(param_1, *(undefined_32 *)(param_2 + 0x24), *(undefined_32 *)(param_1 + 0x28));
            }
            if ((param_3 & 4) != 0)
            {
                FUN_00414b60(param_1, (*(int *)(param_1 + 0x24) - *(int *)(param_1 + 0x2c)) + *(int *)(param_2 + 0x2c),
                             *(undefined_32 *)(param_1 + 0x28));
            }
        }
    }
    return;
}

void FUN_00411440(int param_1, int param_2, int param_3)

{
    int iVar1;
    int iVar2;

    if (param_1 != 0)
    {
        iVar2 = *(int *)(param_1 + 0x28);
        if (param_3 != 0)
        {
            iVar2 = (iVar2 - *(int *)(param_1 + 0x30)) + 0x1df >> 1;
        }
        iVar1 = *(int *)(param_1 + 0x24);
        if (param_2 != 0)
        {
            iVar1 = (iVar1 - *(int *)(param_1 + 0x2c)) + 0x27f >> 1;
        }
        FUN_00414b60(param_1, iVar1, iVar2);
    }
    return;
}

undefined_8 *FUN_00411480(void)

{
    return PTR_DAT_004b5d74;
}

void FUN_00411490(int param_1)

{
    if (param_1 != 0)
    {
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) & 0xfffffeff;
    }
    return;
}

void FUN_004114b0(int param_1)

{
    if (param_1 != 0)
    {
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) | 0x100;
    }
    return;
}

// WARNING: Could not reconcile some variable overlaps

undefined_32 FUN_004114d0(int param_1, undefined_32 param_2)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    undefined_32 *puVar4;
    int iVar5;
    int iVar6;
    undefined_32 *puVar7;
    undefined_16 uVar8;
    uint uVar9;
    undefined_8 auStack_14[2];
    byte bStack_12;
    undefined_32 uStack_f;
    ushort uStack_8;
    undefined_16 uStack_6;
    byte bStack_4;

    puVar7 = NULL;
    puVar4 = NULL;
    iVar5 = 0;
    if (param_1 == 0)
    {
        return 0;
    }
    // PlatformAbstraction->fopen
    iVar1 = (**(code **)(DAT_00ecc420 + 0x30))(param_1, &DAT_004b5c4c /* "rb" */);
    if (iVar1 == 0)
        goto switchD_00411664_caseD_4;
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(iVar1, auStack_14, 0x12);
    puVar7 = (undefined_32 *)_malloc(0x14);
    if (puVar7 == NULL)
        goto LAB_004116d2;
    *puVar7 = 0;
    puVar7[1] = 0;
    puVar7[2] = 0;
    puVar7[3] = 0;
    puVar7[4] = 0;
    puVar4 = (undefined_32 *)_malloc(8);
    if (puVar4 == NULL)
    {
    switchD_00411664_caseD_4:
        if (puVar7 != NULL)
        {
            _free(puVar7);
        }
    LAB_004116d2:
        if (puVar4 != NULL)
        {
            _free(puVar4);
        }
        if (iVar5 != 0)
        {
            _free(iVar5);
        }
        if (iVar1 != 0)
        {
            // PlatformAbstraction->fclose
            (**(code **)(DAT_00ecc420 + 0x34))(iVar1);
        }
        return 0;
    }
    *puVar4 = 0;
    puVar4[1] = 0;
    if (uStack_f._2_1_ < 9)
    {
        iVar5 = 1;
    }
    else if (uStack_f._2_1_ < 0x11)
    {
        iVar5 = 2;
    }
    else
    {
        iVar5 = (0x18 < uStack_f._2_1_) + 3;
    }
    // PlatformAbstraction->fseek
    (**(code **)(DAT_00ecc420 + 0x4c))(iVar1, (uStack_f & 0xffff) * iVar5, 1);
    uVar9 = CONCAT12(bStack_4, uStack_6) & 0xffff;
    if (bStack_4 < 9)
    {
        iVar6 = 1;
    }
    else if (bStack_4 < 0x11)
    {
        iVar6 = 2;
    }
    else
    {
        iVar6 = (0x18 < bStack_4) + 3;
    }
    iVar2 = iVar6 * uVar9 * (uint)uStack_8;
    iVar5 = _malloc(iVar2);
    if (bStack_12 < 9)
    {
        // PlatformAbstraction->fread
        (**(code **)(DAT_00ecc420 + 0x38))(iVar1, iVar5, iVar2);
    }
    else
    {
        FUN_00418700(iVar1, iVar5, iVar6, uVar9 * uStack_8);
    }
    // PlatformAbstraction->fclose
    (**(code **)(DAT_00ecc420 + 0x34))(iVar1);
    puVar7[4] = puVar4;
    *(ushort *)puVar7 = uStack_8;
    uVar8 = (undefined_16)uVar9;
    *(undefined_16 *)((int)puVar7 + 2) = uVar8;
    *(undefined_16 *)(puVar7 + 3) = 1;
    *(undefined_16 *)((int)puVar7 + 0xe) = uVar8;
    puVar7[2] = 0;
    *(undefined_8 *)(puVar7 + 1) = 5;
    switch (iVar6)
    {
    case 1:
        *(undefined_8 *)((int)puVar7 + 5) = 1;
        break;
    case 2:
        *(undefined_8 *)((int)puVar7 + 5) = 2;
        break;
    case 3:
        *(undefined_8 *)((int)puVar7 + 5) = 7;
        break;
    case 4:
        *(undefined_8 *)((int)puVar7 + 5) = 3;
        break;
    default:
        goto switchD_00411664_caseD_4;
    }
    puVar4[1] = iVar5;
    *(ushort *)puVar4 = uStack_8;
    *(undefined_16 *)((int)puVar4 + 2) = uVar8;
    uVar3 = FUN_004188b0(puVar7, iVar6);
    FUN_00416fd0(uVar3, param_2, 1);
    return uVar3;
}

undefined_32 FUN_00411720(void)

{
    return DAT_004d87c8;
}

void FUN_00411730(undefined_32 param_1)

{
    DAT_004d87bc = param_1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00411740(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    _DAT_004d79f0 = param_1;
    _DAT_004d7c4c = param_2;
    DAT_004d8788 = param_3;
    DAT_004d8780 = param_4;
    return;
}

void FUN_00411770(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    int *piVar1;
    int iVar2;

    iVar2 = 0;
    piVar1 = &DAT_004d8168;
    do
    {
        if (*piVar1 == 0)
        {
            (&DAT_004d8168)[iVar2 * 4] = param_1;
            (&DAT_004d8160)[iVar2 * 4] = param_2;
            (&DAT_004d8164)[iVar2 * 4] = param_2;
            (&DAT_004d816c)[iVar2 * 4] = param_3;
            return;
        }
        piVar1 = piVar1 + 4;
        iVar2 = iVar2 + 1;
    } while ((int)piVar1 < 0x4d8208);
    return;
}

void FUN_004117b0(int param_1)

{
    undefined_32 *puVar1;

    puVar1 = &DAT_004d8160;
    do
    {
        if (puVar1[3] == param_1)
        {
            puVar1[2] = 0;
            *puVar1 = 0;
            puVar1[1] = 0;
            puVar1[3] = 0;
        }
        puVar1 = puVar1 + 4;
    } while ((int)puVar1 < 0x4d8200);
    return;
}

void FUN_004117e0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_004d8110;
    MEMSET(iVar1, puVar2, 0, 0x14)
    DAT_004d87a4 = 0;
    return;
}

undefined_32 FUN_00411800(void)

{
    return DAT_004d87a4;
}

undefined_32 FUN_00411810(void)

{
    return (&DAT_004d8110)[DAT_004d87a4];
}

void FUN_00411820(int param_1)

{
    uint uVar1;
    int iVar2;

    iVar2 = 0;
    if (param_1 != 0)
    {
        iVar2 = FUN_00414d90(0, param_1);
    }
    if (DAT_004d8bd4 != iVar2)
    {
        if ((&DAT_004d8110)[DAT_004d87a4] != 0)
        {
            FUN_00414e60((&DAT_004d8110)[DAT_004d87a4], 0);
        }
        DAT_004d8bd4 = (&DAT_004d8110)[DAT_004d87a4];
        if (DAT_004d87a4 < 0x14)
        {
            DAT_004d87a4 = DAT_004d87a4 + 1;
        }
        uVar1 = DAT_004d87a4;
        if ((param_1 != 0) && ((&DAT_004d8110)[DAT_004d87a4] = iVar2, iVar2 != 0))
        {
            FUN_004151a0(iVar2, 0x46, uVar1, 0);
            DAT_004d8be4 = 0;
            return;
        }
        FUN_004118b0(0);
    }
    return;
}

void FUN_004118b0(void)

{
    if ((&DAT_004d8110)[DAT_004d87a4] != 0)
    {
        FUN_004151a0((&DAT_004d8110)[DAT_004d87a4], 0x47, DAT_004d87a4, 0);
    }
    DAT_004d8bd4 = (&DAT_004d8110)[DAT_004d87a4];
    DAT_004d8be4 = 0;
    if (DAT_004d87a4 != 0)
    {
        DAT_004d87a4 = DAT_004d87a4 + -1;
    }
    if ((&DAT_004d8110)[DAT_004d87a4] != 0)
    {
        FUN_004151a0((&DAT_004d8110)[DAT_004d87a4], 0x46, DAT_004d87a4, 0);
    }
    return;
}

void FUN_00411910(int param_1, int param_2)

{
    if ((param_1 != 0) && (param_2 != 0))
    {
        FUN_00416890(param_2);
        *(undefined_32 *)(param_2 + 0x14) = 0;
        FUN_00414e60(param_2, 1);
        *(undefined_32 *)(param_2 + 0x14) = *(undefined_32 *)(param_1 + 0x14);
        FUN_00416840(param_1, param_2);
    }
    return;
}

undefined_32 FUN_00411950(void)

{
    int iVar1;
    undefined_32 uVar2;

    FUN_00412650();
    iVar1 = FUN_00413130(0, 0, 5, 0);
    if (iVar1 != 0)
    {
        uVar2 = lookup_translation(s__MONDOTEXT_H_0373__sSettings_004b6090, 0, 0x15e, 200, 0x19, 0x10000, 0);
        FUN_004132a0(iVar1, 0xf, 6, uVar2);
        FUN_00411170(iVar1, 4, 0, 0x186, 2);
    }
    iVar1 = FUN_00413130(0, 0, 0x30d51, 0);
    if (iVar1 != 0)
    {
        FUN_00411170(iVar1, 4, 0, 0x1a4, 2);
        FUN_00411210(iVar1, 0x208, 0x17c);
    }
    iVar1 = FUN_00413130(0, 0, 0xb, &LAB_00401000);
    if (iVar1 != 0)
    {
        uVar2 = lookup_translation(s__MONDOTEXT_H_0374__sSingle_Playe_004b6060, 0x96, 0x96, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0xe, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0375__sSingle_Playe_004b6034, 0x96, 0xbe, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0xc, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0376__sMultiplayer_004b6014, 0x96, 0xe6, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0xd, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0373__sSettings_004b6090, 0, 0x15e, 0xb4, 0x19, 0x10000, 0);
        FUN_004132a0(iVar1, 0xf, 6, uVar2);
        FUN_00411170(iVar1, 0x10, 0, 0x186, 0);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0504__s_LucasArts_E_004b5f94, 0x140, 0x1d6, 0x10000, 0);
        FUN_004131c0(iVar1, 1, 4, uVar2);
        FUN_004131c0(iVar1, 10000, 4, s__c_sMark_H_H__004b5f84, 0x2e, 0x8a, 0, 0);
        FUN_004131c0(iVar1, 0x2711, 4, s__c_sJon_004b5f7c, 0x55, 200, 0, 0);
        FUN_004131c0(iVar1, 0x2712, 4, s__c_sJustin_004b5f70, 0x77, 0x81, 0, 0);
        FUN_004131c0(iVar1, 0x2713, 4, s__c_sPaul_T__004b5f64, 0x8d, 0x59, 0, 0);
        FUN_004131c0(iVar1, 0x2714, 4, s__c_sEric_004b5f58, 0x91, 0xd8, 0, 0);
        FUN_004131c0(iVar1, 0x2715, 4, s__c_sBrett_004b5f4c, 0xba, 0xbf, 0, 0);
        FUN_004131c0(iVar1, 0x2716, 4, s__c_sPaul_Z__004b5f40, 200, 0x5f, 0, 0);
        FUN_004131c0(iVar1, 0x2717, 4, s__c_sJacob_004b5f34, 0xdd, 0xcd, 0, 0);
        FUN_004131c0(iVar1, 0x2718, 4, s__c_sLisa_004b5f28, 0xee, 0x68, 0, 0);
        FUN_004131c0(iVar1, 0x2719, 4, s__c_sSun_Inn_004b5f1c, 0x10c, 0x91, 0, 0);
        FUN_004131c0(iVar1, 0x271a, 4, s__c_sArmando_004b5f10, 0x10f, 0x5d, 0, 0);
        FUN_004131c0(iVar1, 0x271b, 4, s__c_sDuncan_004b5f04, 0x122, 0xd9, 0, 0);
        FUN_004131c0(iVar1, 0x271c, 4, s__c_sChristina_004b5ef4, 0x135, 0x6b, 0, 0);
        FUN_004131c0(iVar1, 0x271d, 4, s__c_sCamela_004b5ee8, 0x15b, 199, 0, 0);
        FUN_004131c0(iVar1, 0x271e, 4, s__c_sMark_B__004b5edc, 0x167, 0x55, 0, 0);
        FUN_004131c0(iVar1, 0x271f, 4, s__c_sJapeth_004b5ed0, 0x17c, 0xb2, 0, 0);
        FUN_004131c0(iVar1, 0x2720, 4, s__c_sDino_004b5ec4, 0x18a, 0xcb, 0, 0);
        FUN_004131c0(iVar1, 0x2721, 4, s__c_sLivia_004b5eb8, 0x19c, 0x5d, 0, 0);
        FUN_004131c0(iVar1, 0x2722, 4, s__c_sDarren_004b5eac, 0x1b9, 0x77, 0, 0);
        FUN_004131c0(iVar1, 0x2723, 4, s__c_sClint_004b5ea0, 0x1c6, 0xc2, 0, 0);
        FUN_004131c0(iVar1, 0x2724, 4, s__c_sAmit_004b5e94, 0x1d2, 0x5c, 0, 0);
        FUN_004131c0(iVar1, 0x2725, 4, s__c_sJim_004b5e8c, 0x1fe, 0xb7, 0, 0);
        FUN_004131c0(iVar1, 0x2726, 4, s__c_sBrad_004b5e80, 0x207, 0x5a, 0, 0);
        FUN_004131c0(iVar1, 0x2727, 4, s__c_sBill_004b5e74, 0x234, 0xd5, 0, 0);
        FUN_004131c0(iVar1, 0x2728, 4, s__c_sNathan_004b5e68, 0x23c, 0x55, 0, 0);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0524__sThe_Team_004b5e48, 0x140, 0x3c, 0x10000, 0);
        FUN_004131c0(iVar1, 0x2729, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0544__s__004b5e30, 0x12a, 0x12, 0, 0);
        FUN_004131c0(iVar1, 0x272a, 4, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0545__s__004b5e18, 0x127, 0x46, 0, 0);
        FUN_004131c0(iVar1, 0x272b, 4, uVar2);
    }
    iVar1 = FUN_00413130(0, 0, 0x2736, &DAT_00401340);
    if (iVar1 != 0)
    {
        FUN_00410230(iVar1);
    }
    iVar1 = FUN_00413130(0, 0, 0x15, &LAB_00401960);
    if (iVar1 != 0)
    {
        uVar2 = lookup_translation(s__MONDOTEXT_H_0292__sVIDEO_SETTIN_004b5418, 0x96, 100, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x1d, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0305__sAUDIO_SETTIN_004b560c, 0x96, 0x8c, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x1e, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0249__sJOYSTICK_SET_004b5204, 0x96, 0xbe, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x1f, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0250__sMOUSE_SETTIN_004b522c, 0x96, 0xe6, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x20, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0251__sKEYBOARD_SET_004b52e8, 0x96, 0x10e, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x21, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0314__sFORCE_FEEDBA_004b57fc, 0x96, 0x136, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x22, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0340__sLOAD_SAVE_SE_004b5b88, 0x96, 0x168, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x23, 6, uVar2);
        FUN_00411170(iVar1, 4, 0, 400, 2);
    }
    iVar1 = FUN_00413130(0, 0, 0x2730, &LAB_00401af0);
    if (iVar1 != 0)
    {
        FUN_0040ffe0(iVar1);
    }
    iVar1 = FUN_00413130(0, 0, 0x18, &LAB_00402250);
    if (iVar1 != 0)
    {
        FUN_0040c7a0(iVar1);
        FUN_0040b740(0, iVar1);
    }
    iVar1 = FUN_00413130(0, 0, 0x19, &LAB_00402250);
    if (iVar1 != 0)
    {
        FUN_0040d2c0(iVar1);
        FUN_0040b740(1, iVar1);
    }
    iVar1 = FUN_00413130(0, 0, 0x1a, &LAB_00402250);
    if (iVar1 != 0)
    {
        FUN_0040dd10(iVar1);
        FUN_0040b740(2, iVar1);
    }
    iVar1 = FUN_00413130(0, 0, 0x16, &LAB_004030f0);
    if (iVar1 != 0)
    {
        FUN_0040e6a0(iVar1);
        FUN_0040bbf0(iVar1);
    }
    iVar1 = FUN_00413130(0, 0, 0x17, &LAB_00403430);
    if (iVar1 != 0)
    {
        FUN_0040ea70(iVar1);
        FUN_0040bc80(iVar1, 1);
    }
    iVar1 = FUN_00413130(0, 0, 0x1b, &LAB_004039a0);
    if (iVar1 != 0)
    {
        FUN_0040ef40(iVar1);
        FUN_0040c100(iVar1);
    }
    iVar1 = FUN_00413130(0, 0, 0x1c, &LAB_00403d70);
    if (iVar1 != 0)
    {
        FUN_0040fb50(iVar1);
    }
    FUN_0041e9b0();
    FUN_004121f0();
    return 1;
}

void FUN_004121f0(void)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar1 = FUN_00413130(0, 0, 0x81, &LAB_004191f0);
    if (iVar1 != 0)
    {
        local_10 = 0x28;
        local_c = 0x3c;
        local_8 = 0x5e;
        local_4 = 0x77;
        uVar2 = FUN_00413b90(iVar1, 700000, &local_10, 0, 0, &LAB_004191f0, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
        local_10 = 0x217;
        local_c = 0x3c;
        local_8 = 0x24d;
        local_4 = 0x77;
        uVar2 = FUN_00413b90(iVar1, 0xaae61, &local_10, 0, 0, &LAB_004191f0, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
    }
    iVar1 = FUN_00413130(0, 0, 0x82, &LAB_00419390);
    if (iVar1 != 0)
    {
        local_10 = 0x28;
        local_c = 0x53;
        local_8 = 0x5e;
        local_4 = 0x8e;
        uVar2 = FUN_00413b90(iVar1, 0xaae62, &local_10, 0, 0, &LAB_00419390, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
        local_10 = 0x217;
        local_c = 0x53;
        local_8 = 0x24d;
        local_4 = 0x8e;
        uVar2 = FUN_00413b90(iVar1, 0xaae63, &local_10, 0, 0, &LAB_00419390, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
        local_10 = 0x28;
        local_c = 0x96;
        local_8 = 99;
        local_4 = 0xcc;
        uVar2 = FUN_00413b90(iVar1, 0xaae64, &local_10, 0, 0, &LAB_00419390, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
        local_10 = 0x28;
        local_c = 0x104;
        local_8 = 99;
        local_4 = 0x13a;
        uVar2 = FUN_00413b90(iVar1, 0xaae65, &local_10, 0, 0, &LAB_00419390, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
    }
    FUN_00413130(0, 0, 0x83, &LAB_004194c0);
    FUN_00413130(0, 0, 0x84, &LAB_00419570);
    iVar1 = FUN_00413130(0, 0, 0x85, &LAB_00419700);
    if (iVar1 != 0)
    {
        local_10 = 0x28;
        local_c = 0x1b;
        local_8 = 0x5e;
        local_4 = 0x56;
        uVar2 = FUN_00413b90(iVar1, 0xaae66, &local_10, 0, 0, &LAB_00419700, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
        local_10 = 0x217;
        local_c = 0x1b;
        local_8 = 0x24d;
        local_4 = 0x56;
        uVar2 = FUN_00413b90(iVar1, 0xaae67, &local_10, 0, 0, &LAB_00419700, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
    }
    iVar1 = FUN_00413130(0, 0, 0x85, &LAB_00419770);
    if (iVar1 != 0)
    {
        local_10 = 0x28;
        local_c = 0x1b;
        local_8 = 0x5e;
        local_4 = 0x56;
        uVar2 = FUN_00413b90(iVar1, 0xaae68, &local_10, 0, 0, &LAB_00419770, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
        local_10 = 0x217;
        local_c = 0x1b;
        local_8 = 0x24d;
        local_4 = 0x56;
        uVar2 = FUN_00413b90(iVar1, 0xaae69, &local_10, 0, 0, &LAB_00419770, 0);
        FUN_00413090(uVar2, 0, 0xff, 0xff, 0xff, 0);
    }
    FUN_00413130(0, 0, 0x88, &LAB_00419620);
    FUN_00413130(0, 0, 0x89, &LAB_004196b0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00412630(void)

{
    _DAT_004c0014 = 30.0;
    return;
}

void FUN_00412640(undefined_32 param_1)

{
    DAT_004d87a0 = param_1;
    return;
}

void FUN_00412650(void)

{
    undefined_32 uVar1;

    if (DAT_004d879c != 0)
    {
        FUN_00412e20();
    }
    FUN_00412e90(0x22, 0);
    FUN_00412e90(0x23, 0);
    FUN_00412e90(0x32, 0);
    FUN_00412e90(0x45, 0);
    FUN_00412e90(0x43, 0);
    FUN_00412e90(0x42, 0);
    FUN_00412e90(0x2c, 0);
    FUN_00412e90(0x3f, 0);
    FUN_00412e90(0x37, 0);
    FUN_00412e90(0x47, 0);
    FUN_00412e90(0x3e, 0);
    FUN_00412e90(0x3a, 0);
    FUN_00412e90(0x39, 0);
    FUN_00412e90(0x3d, 0);
    FUN_00412e90(0x38, 0);
    FUN_00412e90(0x3b, 0);
    FUN_00412e90(0x40, 0);
    FUN_00412e90(0x35, 0);
    FUN_00412e90(0x34, 0);
    FUN_00412e90(0x41, 0);
    FUN_00412e90(0x3c, 0);
    FUN_00412e90(0x33, 0);
    FUN_00412e90(0x44, 0);
    FUN_00412e90(0x46, 0);
    FUN_00412e90(0x36, 0);
    FUN_00412e90(0x24, 0);
    FUN_00412e90(0x27, 0);
    FUN_00412e90(0x26, 0);
    FUN_00412e90(0xf, 0);
    FUN_00412e90(0, 0);
    FUN_00412e90(0xc, 0);
    FUN_00412e90(5, 0);
    FUN_00412e90(0x12, 0);
    FUN_00412e90(0xb, 0);
    FUN_00412e90(8, 0);
    FUN_00412e90(7, 0);
    FUN_00412e90(0x25, 0);
    FUN_00412e90(6, 0);
    FUN_00412e90(9, 0);
    FUN_00412e90(0xd, 0);
    FUN_00412e90(3, 0);
    FUN_00412e90(2, 0);
    FUN_00412e90(0xe, 0);
    FUN_00412e90(10, 0);
    FUN_00412e90(1, 0);
    FUN_00412e90(0x10, 0);
    FUN_00412e90(0x11, 0);
    FUN_00412e90(4, 0);
    FUN_00412e90(1000, s_sq_brdr_b_004b6644);
    FUN_00412e90(0x3e9, s_sq_brdr_bl_004b6638);
    FUN_00412e90(0x3ea, s_sq_brdr_br_004b662c);
    FUN_00412e90(0x3eb, s_sq_brdr_l_004b6620);
    FUN_00412e90(0x3ec, s_sq_brdr_r_004b6614);
    FUN_00412e90(0x3ed, s_sq_brdr_t_004b6608);
    FUN_00412e90(0x3ee, s_sq_brdr_tl_004b65fc);
    FUN_00412e90(0x3ef, s_sq_brdr_tr_004b65f0);
    FUN_00412e90(0x3f2, s_radio_unchecked_004b65e0);
    FUN_00412e90(0x3f3, s_radio_checked_004b65d0);
    FUN_00412e90(0x3f4, s_axis_check_circ_004b65c0);
    FUN_00412e90(0x3f5, s_axis_check_circ_selected_004b65a4);
    FUN_00412e90(0x3f6, s_tiny_box_004b6598);
    FUN_00412e90(0x3f7, s_tiny_box_selected_004b6584);
    FUN_00412e90(0x44c, s_axis_check_center_004b6570);
    FUN_00412e90(0x44d, s_axis_check_end_004b6560);
    FUN_00412e90(0x44e, s_axis_check_strch_004b654c);
    FUN_00412e90(2000, s_window_end_004b6540);
    FUN_00412e90(0x7d1, s_window_strchbars_004b652c);
    FUN_00412e90(0x7d2, s_window_end_selected_004b6518);
    FUN_00412e90(0x7d3, s_window_strchbars_selected_004b64fc);
    FUN_00412e90(0x3f8, s_ok_button_004b64f0);
    FUN_00412e90(0x3f9, s_ok_button_selected_004b64dc);
    FUN_00412e90(0x7d4, s_sml_window_end_004b64cc);
    FUN_00412e90(0x7d5, s_sml_window_strch_004b64b8);
    FUN_00412e90(0x7d6, s_sml_window_end_selected_004b64a0);
    FUN_00412e90(0x7d7, s_sml_window_strch_selected_004b6484);
    FUN_00412e90(0x7d8, s_settings_btn_end_004b6470);
    FUN_00412e90(0x7d9, s_settings_btn_strch_end_004b6458);
    FUN_00412e90(0x7da, s_settings_btn_end2_004b6444);
    FUN_00412e90(0x7dc, s_settings_btn_strch_selected_004b6428);
    FUN_00412e90(0x7db, s_settings_btn_end_selected_004b640c);
    FUN_00412e90(0x7dd, s_settings_btn_end2_selected_004b63f0);
    FUN_00412e90(0x7de, s_settings_btnback_end_004b63d8);
    FUN_00412e90(3000, s_edit_window_corner_004b63c4);
    FUN_00412e90(0xbb9, s_edit_window_vert_004b63b0);
    FUN_00412e90(0xbba, s_edit_window_hor_004b63a0);
    FUN_00412e90(0xbbb, s_edit_window_bar_end_004b638c);
    FUN_00412e90(0xbbc, s_edit_window_bar_strch_004b6374);
    FUN_00412e90(0xbbd, s_edit_window_bar_end_selected_004b6354);
    FUN_00412e90(0xbbe, s_edit_window_bar_strch_selected_004b6334);
    FUN_00412e90(0xc1c, s_sml_edit_box_corner_004b6320);
    FUN_00412e90(0xc1d, s_sml_edit_box_left_004b630c);
    FUN_00412e90(0xc1e, s_sml_edit_box_bottom_004b62f8);
    FUN_00412e90(0xbbf, s_edit_window_selected_end_004b62dc);
    FUN_00412e90(0xbc0, s_edit_window_selected_strch_004b62c0);
    FUN_00412e90(0xbc1, s_editwindow_segmented_004b62a8);
    FUN_00412e90(0xbc2, s_editwindow_segmented_selected_004b6288);
    FUN_00412e90(0xbc3, s_segment_004b6280);
    FUN_00412e90(0xbc4, s_segment_selected_004b626c);
    FUN_00412e90(4000, s_undrline_tab_004b625c);
    FUN_00412e90(0xfa1, s_undrline_mid_strch_004b6248);
    FUN_00412e90(0xfa2, s_undrline_corner_004b6238);
    FUN_00412e90(0xfa3, s_sml_undrline_tab_004b6224);
    FUN_00412e90(0xfa4, s_sml_undrline_strch_004b6210);
    FUN_00412e90(0xfa5, s_sml_undrline_corner_004b61fc);
    FUN_00412e90(5000, s_sliderbar_end_004b61ec);
    FUN_00412e90(0x1389, s_sliderbar_strch_004b61dc);
    FUN_00412e90(0x138a, s_sliderbar_end_selected_004b61c4);
    FUN_00412e90(0x138b, s_sliderbar_strch_selected_004b61a8);
    FUN_00412e90(0x1392, s_vsliderbar_end_004b6198);
    FUN_00412e90(0x1393, s_vsliderbar_strch_004b6184);
    FUN_00412e90(0x1394, s_vsliderbar_end_selected_004b616c);
    FUN_00412e90(0x1395, s_vsliderbar_strch_selected_004b6150);
    FUN_00412e90(0x138c, s_slider_bracket_004b6140);
    FUN_00412e90(0x138d, s_slider_gradient_004b6130);
    FUN_00412e90(0x138e, s_slider_plus_004b6124);
    FUN_00412e90(0x138f, s_slider_minus_004b6114);
    FUN_00412e90(0x1390, s_slider_point_004b6104);
    FUN_00412e90(0x1391, s_slider_point_center_004b60f0);
    FUN_00412e90(6000, s_hline_004b60e8);
    FUN_00412e90(0x1771, s_vline_004b60e0);
    FUN_00412e90(0x1772, s_branch_004b60d8);
    FUN_00412e90(0x3f1, s_background_004b60cc);
    uVar1 = FUN_004114d0(s_data_images_background_tga_004b60b0, 0xfa);
    FUN_004282f0(0xfa, uVar1);
    uVar1 = FUN_00446fb0(0x17);
    FUN_004282f0(0xf9, uVar1);
    DAT_004d879c = 1;
    return;
}

void FUN_00412e20(void)

{
    FUN_00417060(PTR_DAT_004b5d74);
    FUN_00417090();
    DAT_004d879c = 0;
    return;
}

void FUN_00412e40(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_004d8160;
    MEMSET(iVar1, puVar2, 0, 0x28)
    if (PTR_DAT_004b5d74 != NULL)
    {
        FUN_00414d00(PTR_DAT_004b5d74);
    }
    PTR_DAT_004b5d74 = NULL;
    FUN_00417090();
    if (DAT_004d87c4 != 0)
    {
        FUN_0048c050(DAT_004d87c4);
        DAT_004d87c4 = 0;
    }
    return;
}

undefined_32 FUN_00412e90(undefined_32 param_1, int param_2)

{
    int iVar1;
    undefined_8 local_400[1024];

    iVar1 = __get_fname(param_1);
    if (iVar1 == 0)
    {
        if (param_2 != 0)
        {
            _sprintf(local_400, s__s__s_tga_004b6650, s_data_images_004b665c, param_2);
            FUN_004114d0(local_400, param_1);
            return 1;
        }
        iVar1 = FUN_00446fb0(param_1);
        if (iVar1 == 0)
        {
            return 0;
        }
        FUN_00416fd0(iVar1, param_1, 0);
    }
    return 1;
}

int FUN_00412f20(undefined_32 param_1)

{
    int iVar1;
    int iVar2;

    iVar1 = __get_fname(param_1);
    if (iVar1 == 0)
    {
        return 0;
    }
    iVar2 = FUN_00417040();
    if (iVar2 == 0)
    {
        return 0;
    }
    FUN_004282f0(iVar2, iVar1);
    return iVar2;
}

void FUN_00412f60(int param_1)

{
    uint uVar1;
    uint *puVar2;
    int iVar3;

    iVar3 = 0;
    if (0 < *(int *)(param_1 + 0x5c))
    {
        puVar2 = (uint *)(param_1 + 0x68);
        do
        {
            uVar1 = *puVar2;
            if ((0xfa < uVar1) && (uVar1 < 400))
            {
                FUN_004282f0(uVar1 & 0xffff0000 | (uint) * (ushort *)puVar2, 0);
                *puVar2 = 0;
            }
            iVar3 = iVar3 + 1;
            puVar2 = puVar2 + 0xe;
        } while (iVar3 < *(int *)(param_1 + 0x5c));
    }
    return;
}

void FUN_00412fb0(int param_1, int param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                  uint param_6)

{
    int iVar1;
    uint *puVar2;

    if (param_2 == -1)
    {
        if (0x13 < *(uint *)(param_1 + 0x5c))
        {
            return;
        }
        iVar1 = 0;
        puVar2 = (uint *)(param_1 + 0x60);
        do
        {
            if ((*puVar2 & 0x10000) == 0)
            {
                *(uint *)(param_1 + 0x5c) = *(uint *)(param_1 + 0x5c) + 1;
                param_2 = iVar1;
                break;
            }
            iVar1 = iVar1 + 1;
            puVar2 = puVar2 + 0xe;
        } while (iVar1 < 0x14);
    }
    if (param_2 != -1)
    {
        iVar1 = param_1 + param_2 * 0x38;
        *(undefined_32 *)(iVar1 + 100) = param_3;
        *(undefined_32 *)(iVar1 + 0x6c) = 1.0f;
        *(undefined_32 *)(param_1 + (param_2 + 2) * 0x38) = 1.0f;
        *(uint *)(iVar1 + 0x60) = param_6 | 0x10000;
        FUN_00413090(param_1, param_2, 0xff, 0xff, 0xff, 0xff);
        FUN_004171a0(param_1, param_2, param_4);
        *(undefined_32 *)(param_1 + 0x5c) = 0;
        puVar2 = (uint *)(param_1 + 0x60);
        iVar1 = 0x14;
        do
        {
            if ((*puVar2 & 0x10000) != 0)
            {
                *(int *)(param_1 + 0x5c) = *(int *)(param_1 + 0x5c) + 1;
            }
            puVar2 = puVar2 + 0xe;
            iVar1 = iVar1 + -1;
        } while (iVar1 != 0);
        FUN_004130e0(param_1, param_2, param_5);
    }
    return;
}

void FUN_00413090(int param_1, int param_2, undefined_8 param_3, undefined_8 param_4, undefined_8 param_5,
                  undefined_8 param_6)

{
    if (((param_1 != 0) && (-1 < param_2)) && (param_2 < 0x14))
    {
        param_1 = param_1 + param_2 * 0x38;
        *(undefined_8 *)(param_1 + 0x94) = param_3;
        *(undefined_8 *)(param_1 + 0x95) = param_4;
        *(undefined_8 *)(param_1 + 0x96) = param_5;
        *(undefined_8 *)(param_1 + 0x97) = param_6;
    }
    return;
}

void FUN_004130e0(int param_1, int param_2, int param_3)

{
    if (param_3 != 0)
    {
        *(uint *)(param_1 + 0x60 + param_2 * 0x38) = *(uint *)(param_1 + 0x60 + param_2 * 0x38) | 0x20000;
        return;
    }
    *(uint *)(param_1 + 0x60 + param_2 * 0x38) = *(uint *)(param_1 + 0x60 + param_2 * 0x38) & 0xfffdffff;
    return;
}

int FUN_00413130(undefined_32 param_1, int *param_2, undefined_32 param_3, undefined_32 param_4)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int local_c;

    iVar4 = 0;
    iVar2 = 0;
    local_c = 0;
    iVar3 = 0;
    iVar1 = FUN_00416d90(param_1, param_3, -1, 0, 0, 0, 0, FUN_00415850, param_4);
    if (param_2 != NULL)
    {
        local_c = param_2[1];
        iVar2 = *param_2;
        iVar3 = param_2[2];
        iVar4 = param_2[3];
    }
    FUN_00414b40(iVar1, (iVar3 - iVar2) + 1, (iVar4 - local_c) + 1);
    FUN_00414b60(iVar1, iVar2, local_c);
    *(undefined_32 *)(iVar1 + 0x18) = 0;
    return iVar1;
}

int FUN_004131c0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, int param_5,
                 int param_6, undefined_32 param_7, undefined_32 param_8)

{
    int iVar1;
    undefined_32 uVar2;

    iVar1 = FUN_00416d90(param_1, param_2, param_3, param_4, param_7, param_8, 0, &LAB_00415b80, 0);
    *(uint *)(iVar1 + 0x20) = *(uint *)(iVar1 + 0x20) | 4;
    uVar2 = FUN_0042df70(param_4, (&DAT_00e99720)[*(int *)(iVar1 + 0x4dc)]);
    uVar2 = FUN_0042de30(param_4, (&DAT_00e99720)[*(int *)(iVar1 + 0x4dc)], uVar2);
    FUN_00414b40(iVar1, uVar2);
    if ((*(uint *)(iVar1 + 0x20) & 0x10000) != 0)
    {
        param_5 = (*(int *)(iVar1 + 0x24) - *(int *)(iVar1 + 0x2c)) + 0x27f >> 1;
    }
    if ((*(uint *)(iVar1 + 0x20) & 0x20000) != 0)
    {
        param_6 = (*(int *)(iVar1 + 0x28) - *(int *)(iVar1 + 0x30)) + 0x1df >> 1;
    }
    FUN_00414b60(iVar1, param_5, param_6);
    FUN_00414e60(iVar1, 1);
    *(undefined_32 *)(iVar1 + 0x18) = 1;
    *(uint *)(iVar1 + 0x20) = *(uint *)(iVar1 + 0x20) | 0x200;
    return iVar1;
}

int FUN_004132a0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                 undefined_32 param_5, undefined_32 param_6, undefined_32 param_7, undefined_32 param_8, uint param_9,
                 undefined_32 param_10)

{
    int iVar1;

    iVar1 = FUN_00416d90(param_1, param_2, param_3, param_4, param_9, param_10, 0, &LAB_00415ca0, 0);
    FUN_00414b40(iVar1, param_7, param_8);
    FUN_00414b60(iVar1, param_5, param_6);
    *(uint *)(iVar1 + 0x4f0) = param_9 & 0xffff0000;
    FUN_00414b80(iVar1, param_4, 0x40000);
    FUN_00418cb0(iVar1, 0);
    FUN_00414e60(iVar1, 1);
    *(undefined_32 *)(iVar1 + 0x18) = 2;
    return iVar1;
}

int FUN_00413340(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                 undefined_32 param_5, undefined_32 param_6, undefined_32 param_7, undefined_32 param_8,
                 undefined_32 param_9, undefined_32 param_10, uint param_11, undefined_32 param_12)

{
    int iVar1;
    undefined_32 uVar2;

    iVar1 = FUN_00416d90(param_1, param_2, param_3, param_4, param_11, param_12, 0, &LAB_00415ed0, 0);
    FUN_00414b40(iVar1, param_8, param_9);
    FUN_00414b60(iVar1, param_6, param_7);
    *(uint *)(iVar1 + 0x4f0) = param_11 & 0xffff0000;
    FUN_00418cb0(iVar1, 0);
    if ((*(uint *)(iVar1 + 0x4f0) & 0x400000) == 0)
    {
        uVar2 = 0x20000;
        if ((*(uint *)(iVar1 + 0x4f0) & 0x800000) == 0)
        {
            FUN_00414ae0(iVar1, 0x20000);
            if (*(int *)(iVar1 + 0x4f0) != 0)
            {
                uVar2 = 0x120000;
            }
        }
    }
    else
    {
        uVar2 = 0x200000;
    }
    FUN_00414b80(iVar1, param_4, uVar2);
    FUN_00414b30(iVar1, param_10);
    FUN_004157f0(iVar1, param_3);
    FUN_00414e60(iVar1, 1);
    *(undefined_32 *)(iVar1 + 0x18) = 3;
    return iVar1;
}

int FUN_00413430(undefined_32 param_1, undefined_32 param_2, int *param_3, undefined_32 param_4, uint param_5,
                 undefined_32 param_6)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int local_10;
    int local_c;

    iVar3 = 0;
    iVar2 = 0;
    local_10 = 0;
    local_c = 0;
    iVar1 = FUN_00416d90(param_1, param_2, param_4, 0, param_5, param_6, 0, &LAB_00416370, 0);
    if (param_3 != NULL)
    {
        local_10 = *param_3;
        local_c = param_3[1];
        iVar3 = param_3[2];
        iVar2 = param_3[3];
    }
    FUN_00414b40(iVar1, (iVar3 - local_10) + 1, (iVar2 - local_c) + 1);
    FUN_00414b60(iVar1, local_10, local_c);
    FUN_00419830(iVar1, 1, 0);
    *(uint *)(iVar1 + 0x52c) = param_5 & 0xffff0000;
    *(uint *)(iVar1 + 0x20) = *(uint *)(iVar1 + 0x20) | 4;
    FUN_00413500(iVar1, 0x400);
    FUN_00414e60(iVar1, 1);
    *(undefined_32 *)(iVar1 + 0x18) = 9;
    return iVar1;
}

void FUN_00413500(int param_1, undefined_32 param_2)

{
    if (param_1 != 0)
    {
        *(undefined_32 *)(param_1 + 0x534) = param_2;
    }
    return;
}

int FUN_00413520(undefined_32 param_1, undefined_32 param_2, int *param_3, undefined_32 param_4, undefined_32 param_5,
                 undefined_32 param_6)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int local_20;
    int local_1c;
    int local_18;
    int local_14;
    int local_4;

    iVar3 = 0;
    iVar4 = 0;
    iVar2 = 0;
    local_4 = 0;
    iVar1 = FUN_00416d90(param_1, param_2, param_4, 0, param_5, param_6, 0, &LAB_00416130, 0);
    if (param_3 != NULL)
    {
        local_4 = param_3[3];
        iVar4 = *param_3;
        iVar2 = param_3[1];
        iVar3 = param_3[2];
    }
    FUN_00414b40(iVar1, (iVar3 - iVar4) + 1, (local_4 - iVar2) + 1);
    FUN_00414b60(iVar1, iVar4, iVar2);
    FUN_00419830(iVar1, 0, 0);
    FUN_004197f0(&local_20, 0);
    *(int *)(iVar1 + 0x50c) = iVar4 + local_20;
    *(int *)(iVar1 + 0x510) = iVar2 + local_1c;
    *(undefined_32 *)(iVar1 + 0x508) = param_5;
    *(undefined_32 *)(iVar1 + 0x524) = 5;
    *(int *)(iVar1 + 0x514) = iVar3 - local_18;
    *(int *)(iVar1 + 0x518) = local_4 - local_14;
    FUN_00414e60(iVar1, 1);
    *(undefined_32 *)(iVar1 + 0x18) = 5;
    return iVar1;
}

void FUN_00413610(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    uint uVar3;

    if (param_1 == 0)
    {
        return;
    }
    if (param_2 != 0)
    {
        iVar1 = *(int *)(param_1 + 8);
        for (iVar2 = *(int *)(iVar1 + 0xc); iVar2 != 0; iVar2 = *(int *)(iVar2 + 4))
        {
            if (((byte) * (undefined_32 *)(iVar2 + 0x18) & 0xc) == 0xc)
            {
                FUN_00440550(0x46);
                if (((*(uint *)(iVar1 + 0x508) & 0x100000) == 0)
                    && (((byte) * (undefined_32 *)(iVar2 + 0x18) & 3) != 3))
                {
                    FUN_00412fb0(iVar2, 0, 0, 0, 0, 0);
                    FUN_00412fb0(iVar2, 1, 0, 0, 0, 0);
                    FUN_00412fb0(iVar2, 2, 0, 0, 0, 0);
                }
                *(uint *)(iVar2 + 0x508) = *(uint *)(iVar2 + 0x508) & 0xfff7ffff;
            }
        }
        if (param_2 != 0)
        {
            uVar3 = *(uint *)(param_1 + 0x508) | 0x80000;
            goto LAB_004136ce;
        }
    }
    uVar3 = *(uint *)(param_1 + 0x508) & 0xfff7ffff;
LAB_004136ce:
    *(uint *)(param_1 + 0x508) = uVar3;
    FUN_00417ca0(*(undefined_32 *)(param_1 + 8));
    return;
}

int FUN_004136f0(int param_1, int param_2)

{
    int iVar1;
    int iVar2;

    if (((param_1 != 0) && (param_2 != 0)) && (iVar2 = *(int *)(param_1 + 0xc), iVar2 != 0))
    {
        do
        {
            if (*(int *)(iVar2 + 0x4d4) != 0)
            {
                iVar1 = _strcmpi(*(int *)(iVar2 + 0x4d4), param_2);
                if (iVar1 == 0)
                {
                    return iVar2;
                }
            }
            iVar2 = *(int *)(iVar2 + 4);
        } while (iVar2 != 0);
        return 0;
    }
    return 0;
}

int FUN_00413740(int param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = 0;
    iVar1 = *(int *)(param_1 + 0xc);
    while (true)
    {
        if (iVar1 == 0)
        {
            return -1;
        }
        if ((*(uint *)(iVar1 + 0x508) & 0x80000) != 0)
            break;
        iVar1 = *(int *)(iVar1 + 4);
        iVar2 = iVar2 + 1;
    }
    return iVar2;
}

int FUN_00413770(int param_1, int param_2)

{
    int iVar1;

    iVar1 = *(int *)(param_1 + 0xc);
    do
    {
        if (iVar1 == 0)
        {
            return 0;
        }
        if (((byte) * (undefined_32 *)(iVar1 + 0x18) & 0xc) == 0xc)
        {
            if (param_2 == 0)
            {
                return iVar1;
            }
            param_2 = param_2 + -1;
        }
        iVar1 = *(int *)(iVar1 + 4);
    } while (true);
}

int FUN_004137a0(int param_1)

{
    int iVar1;

    iVar1 = *(int *)(param_1 + 0xc);
    while (true)
    {
        if (iVar1 == 0)
        {
            return 0;
        }
        if ((*(uint *)(iVar1 + 0x508) & 0x80000) != 0)
            break;
        iVar1 = *(int *)(iVar1 + 4);
    }
    return iVar1;
}

int FUN_004137d0(int param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = 0;
    for (iVar1 = *(int *)(param_1 + 0xc); iVar1 != 0; iVar1 = *(int *)(iVar1 + 4))
    {
        if (((byte) * (undefined_32 *)(iVar1 + 0x18) & 0xc) == 0xc)
        {
            iVar2 = iVar2 + 1;
        }
    }
    return iVar2;
}

void FUN_00413800(int param_1)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;

    iVar4 = 0;
    *(undefined_32 *)(param_1 + 0x504) = 0;
    iVar2 = *(int *)(param_1 + 0xc);
    while (iVar2 != 0)
    {
        iVar1 = *(int *)(iVar2 + 4);
        if ((*(uint *)(iVar2 + 0x508) & 0x80000) != 0)
        {
            *(int *)(param_1 + 0x520) = iVar4;
            uVar3 = FUN_004174e0(*(undefined_32 *)(param_1 + 0x51c), *(undefined_32 *)(iVar2 + 0x4d4));
            *(undefined_32 *)(param_1 + 0x51c) = uVar3;
        }
        if (((byte) * (undefined_32 *)(iVar2 + 0x18) & 0xc) == 0xc)
        {
            FUN_00414d00(iVar2);
        }
        iVar4 = iVar4 + 1;
        iVar2 = iVar1;
    }
    return;
}

void FUN_00413870(int param_1)

{
    int iVar1;

    iVar1 = FUN_00413770(param_1, *(undefined_32 *)(param_1 + 0x520));
    if (iVar1 == 0)
    {
        if (*(int *)(param_1 + 0x51c) == 0)
        {
            return;
        }
        iVar1 = FUN_004136f0(param_1, *(int *)(param_1 + 0x51c));
        if (iVar1 == 0)
        {
            return;
        }
    }
    FUN_00413610(iVar1, 1);
    return;
}

void FUN_004138b0(int param_1, undefined_8 param_2, undefined_8 param_3, undefined_8 param_4, undefined_8 param_5)

{
    if (param_1 != 0)
    {
        *(undefined_8 *)(param_1 + 0x4c4) = param_2;
        *(undefined_8 *)(param_1 + 0x4c5) = param_3;
        *(undefined_8 *)(param_1 + 0x4c6) = param_4;
        *(undefined_8 *)(param_1 + 0x4c7) = param_5;
        FUN_00418bc0(param_1);
    }
    return;
}

uint FUN_004138f0(int param_1, int param_2, uint param_3, undefined_32 param_4, undefined_32 param_5)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    uint extraout_ECX;
    uint extraout_ECX_00;
    uint extraout_ECX_01;
    uint extraout_ECX_02;
    uint extraout_ECX_03;
    ulonglong uVar4;

    if ((param_1 != 0) && (param_2 != 0))
    {
        uVar2 = FUN_004131c0(param_1, param_4, *(undefined_32 *)(param_1 + 0x4dc), param_2, 0, 0, 0, 1);
        *(uint *)(uVar2 + 0x508) = param_3;
        uVar4 = FUN_00414be0(uVar2, uVar2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c0),
                             param_3 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c1),
                             extraout_ECX & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c2),
                             uVar2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c3));
        uVar4 = FUN_00414ca0(uVar2, extraout_ECX_00 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c4),
                             (uint)(uVar4 & 0xffffff00ffffff00) | (uint) * (byte *)(param_1 + 0x4c5),
                             (uint)((uVar4 & 0xffffff00ffffff00) >> 0x20) | (uint) * (byte *)(param_1 + 0x4c6),
                             extraout_ECX_00 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c7));
        uVar1 = (uint)((uVar4 & 0xffffff00ffffff00) >> 0x20);
        uVar4 = FUN_00414c10(uVar2, uVar1 | *(byte *)(param_1 + 0x4cc),
                             extraout_ECX_01 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4cd),
                             (uint)(uVar4 & 0xffffff00ffffff00) | (uint) * (byte *)(param_1 + 0x4ce),
                             uVar1 | *(byte *)(param_1 + 0x4cf));
        uVar1 = (uint)(uVar4 & 0xffffff00ffffff00);
        uVar4 = FUN_00414c40(uVar2, uVar1 | *(byte *)(param_1 + 0x4c8),
                             (uint)((uVar4 & 0xffffff00ffffff00) >> 0x20) | (uint) * (byte *)(param_1 + 0x4c9),
                             extraout_ECX_02 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4ca),
                             uVar1 | *(byte *)(param_1 + 0x4cb));
        FUN_00414c70(uVar2, extraout_ECX_03 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4d0),
                     (uint)(uVar4 & 0xffffff00ffffff00) | (uint) * (byte *)(param_1 + 0x4d1),
                     (uint)((uVar4 & 0xffffff00ffffff00) >> 0x20) | (uint) * (byte *)(param_1 + 0x4d2),
                     extraout_ECX_03 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4d3));
        FUN_00414cd0(uVar2, 0, param_5);
        *(undefined_32 *)(uVar2 + 0x18) = 0xc;
        iVar3 = FUN_004137a0(param_1);
        if (iVar3 == 0)
        {
            FUN_00413610(uVar2, 1);
        }
        FUN_00417ca0(param_1);
        return uVar2;
    }
    return 0;
}

int FUN_00413a30(int param_1, int param_2)

{
    int iVar1;

    if ((param_1 != 0) && (param_2 != 0))
    {
        *(uint *)(param_2 + 0x18) = *(uint *)(param_2 + 0x18) | 0xc;
        FUN_00416890(param_2);
        FUN_00416840(param_1, param_2);
        iVar1 = FUN_004137a0(param_1);
        if (iVar1 == 0)
        {
            FUN_00413610(param_2, 1);
        }
        FUN_00417ca0(param_1);
        return param_2;
    }
    return 0;
}

int FUN_00413a90(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                 undefined_32 param_5, undefined_32 param_6, undefined_32 param_7)

{
    int iVar1;

    iVar1 = FUN_00416d90(param_1, param_2, -1, 0, param_6, param_7, 0, &LAB_00416690, 0);
    FUN_00414b60(iVar1, param_3, param_4);
    *(undefined_32 *)(iVar1 + 0x548) = param_5;
    *(undefined_32 *)(iVar1 + 0x558) = 10;
    *(undefined_32 *)(iVar1 + 0x544) = param_6;
    *(undefined_32 *)(iVar1 + 0x18) = 6;
    FUN_00419db0(iVar1, 0);
    FUN_00414e60(iVar1, 1);
    return iVar1;
}

undefined_32 FUN_00413b10(int param_1)

{
    if (param_1 != 0)
    {
        return *(undefined_32 *)(param_1 + 0x55c);
    }
    return 0;
}

void FUN_00413b30(int param_1, undefined_32 param_2)

{
    if (param_1 != 0)
    {
        *(undefined_32 *)(param_1 + 0x55c) = param_2;
        FUN_00419db0(param_1, *(uint *)(param_1 + 0x20) >> 0xc & 1);
    }
    return;
}

void FUN_00413b60(int param_1, undefined_32 param_2)

{
    if (param_1 != 0)
    {
        *(undefined_32 *)(param_1 + 0x54c) = param_2;
        FUN_00419db0(param_1, *(uint *)(param_1 + 0x20) >> 0xc & 1);
    }
    return;
}

int FUN_00413b90(undefined_32 param_1, undefined_32 param_2, int *param_3, undefined_32 param_4, undefined_32 param_5,
                 undefined_32 param_6, undefined_32 param_7)

{
    int iVar1;

    if (param_3 == NULL)
    {
        return 0;
    }
    iVar1 = FUN_00416d90(param_1, param_2, -1, 0, 0, param_7, 0, FUN_00415850, param_6);
    *(uint *)(iVar1 + 0x20) = *(uint *)(iVar1 + 0x20) | 4;
    FUN_00414b40(iVar1, (param_3[2] - *param_3) + 1, (param_3[3] - param_3[1]) + 1);
    FUN_00414b60(iVar1, *param_3, param_3[1]);
    FUN_00412fb0(iVar1, 0, param_4, param_3, 1, param_5);
    FUN_00413090(iVar1, 0, 0xff, 0xff, 0xff, 0xff);
    FUN_00414e60(iVar1, 1);
    *(undefined_32 *)(iVar1 + 0x18) = 7;
    return iVar1;
}

// Menu-Widget.c
int FUN_00413c50(undefined_32 param_1, int param_2, int param_3, undefined_32 param_4, undefined_32 param_5,
                 undefined_32 param_6, uint param_7, undefined_32 param_8, uint param_9, uint param_10)

{
    bool bVar1;
    uint uVar2;
    uint uVar3;
    int iVar4;
    int iVar5;
    uint uVar6;
    uint local_18;
    uint local_14;
    int local_10;
    undefined_32 local_c;
    int local_8;
    int local_4;

    uVar2 = param_9;
    bVar1 = false;
    local_18 = 0;
    local_14 = 0;
    uVar3 = param_10;
    if ((param_10 & 0x80000) != 0)
    {
        local_14 = param_10 & 0xff;
        uVar3 = 0;
    }
    iVar4 = FUN_00416d90(param_1, param_2, param_3, param_4, param_9, uVar3, 0, &LAB_00417940, 0);
    uVar3 = *(uint *)(iVar4 + 0x20);
    if ((uVar3 & 0x20000) == 0)
    {
        if ((uVar3 & 0x10000) == 0)
        {
            uVar6 = param_7;
            if (((uVar3 & 0x40000) != 0)
                && (FUN_00417120(0x3f4, &local_18, &param_10), uVar6 = param_7, param_7 < local_18))
            {
                uVar6 = param_7 + (local_18 >> 1);
            }
        }
        else
        {
            FUN_00417120(0x3f3, &local_18, &param_10);
            bVar1 = true;
            uVar6 = param_7 + local_18;
        }
    }
    else
    {
        FUN_00417120(0xfa3, &local_18, &param_10);
        iVar5 = param_7 + local_18;
        FUN_00417120(0x3f7, &local_18, &param_10);
        bVar1 = true;
        uVar6 = iVar5 + local_18;
    }
    FUN_00414b40(iVar4, uVar6, param_8);
    FUN_00414b60(iVar4, param_5, param_6);
    if (bVar1)
    {
        local_10 = *(int *)(iVar4 + 0x24);
        local_c = *(undefined_32 *)(iVar4 + 0x28);
        local_8 = *(int *)(iVar4 + 0x2c);
        local_4 = *(int *)(iVar4 + 0x30);
        FUN_00412fb0(iVar4, -1, 0x3f1, &local_10, 1, 0);
        FUN_00413090(iVar4, 0, 0, 0, 0, 0x82);
    }
    FUN_00414b80(iVar4, param_4, 0);
    FUN_00414420(iVar4, uVar2 & 0x20000);
    if ((*(uint *)(iVar4 + 0x20) & 0x20000) != 0)
    {
        FUN_00417120(0xfa3, &param_9, &param_3);
        FUN_00417120(0xfa4, &param_1, &param_2);
        local_10 = *(int *)(iVar4 + 0x24);
        local_c = *(undefined_32 *)(iVar4 + 0x28);
        local_8 = (param_9 - 1) + *(int *)(iVar4 + 0x24);
        local_4 = param_3 + -1 + *(int *)(iVar4 + 0x28);
        FUN_00412fb0(iVar4, -1, 0xfa3, &local_10, 1, 0);
        local_10 = param_9 + *(int *)(iVar4 + 0x24);
        local_c = *(undefined_32 *)(iVar4 + 0x28);
        local_8 = (uVar6 - local_18) + -1 + *(int *)(iVar4 + 0x24);
        local_4 = param_2 + -1 + *(int *)(iVar4 + 0x28);
        FUN_00412fb0(iVar4, -1, 0xfa4, &local_10, 1, 0);
    }
    FUN_00414e60(iVar4, 1);
    *(undefined_32 *)(iVar4 + 0x18) = 10;
    if ((*(byte *)(iVar4 + 0x20) & 0x80) == 0)
    {
        if (DAT_004d7c54 != 0)
        {
            *(undefined_32 *)(iVar4 + 0x53c) = 1;
            if (local_14 == 0)
            {
                *(uint *)(iVar4 + 0x540) = DAT_004d7c50;
            }
            else
            {
                *(uint *)(iVar4 + 0x540) = local_14;
            }
            DAT_004d7c50 = DAT_004d7c50 + 1;
        }
        return iVar4;
    }
    if (DAT_004d7c54 != 0)
    {
        *(undefined_32 *)(iVar4 + 0x53c) = 1;
        if (local_14 == 0)
        {
            local_14 = DAT_004d7c50;
        }
        *(uint *)(iVar4 + 0x540) = local_14;
        DAT_004d7c54 = 0;
        DAT_004d7c50 = 0;
        return iVar4;
    }
    DAT_004d7c50 = 0;
    *(undefined_32 *)(iVar4 + 0x53c) = 1;
    if (local_14 == 0)
    {
        *(uint *)(iVar4 + 0x540) = DAT_004d7c50;
    }
    else
    {
        *(uint *)(iVar4 + 0x540) = local_14;
    }
    DAT_004d7c54 = DAT_004d7c54 + 1;
    DAT_004d7c50 = DAT_004d7c50 + 1;
    return iVar4;
}

undefined_32 FUN_00413fa0(int param_1)

{
    if (*(int *)(param_1 + 0x53c) != 0)
    {
        return *(undefined_32 *)(param_1 + 0x540);
    }
    return -1;
}

int FUN_00413fc0(undefined_32 param_1, int param_2, int param_3, int param_4, int param_5, int param_6, int param_7,
                 int param_8, int param_9, int param_10, int param_11)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_32 uVar4;
    int iVar5;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    int local_20;
    int local_1c;
    int local_18;
    int local_14;
    int local_c;
    int local_4;

    local_24 = 0;
    if (param_8 == 0x20000)
    {
        uVar4 = 4000;
        local_2c = 0xfa1;
        local_28 = 0xfa2;
    }
    else if (param_8 == 0x40000)
    {
        uVar4 = 0xfa3;
        local_2c = 0xfa4;
        local_28 = 0xfa3;
        local_24 = 0x400000;
    }
    else if (param_8 == 0x80000)
    {
        uVar4 = 4000;
        local_2c = 0xfa1;
        local_28 = 4000;
        local_24 = 0x400000;
    }
    else
    {
        uVar4 = 0xfa3;
        local_2c = 0xfa4;
        local_28 = 0xfa5;
    }
    iVar3 = FUN_00416d90(param_1, param_2, param_3, param_4, param_10, param_11, 0, FUN_00417be0, 0);
    iVar2 = param_6;
    iVar1 = param_5;
    FUN_00414b60(iVar3, param_5, param_6);
    local_c = *(int *)(iVar3 + 0x28);
    local_4 = *(int *)(iVar3 + 0x30);
    FUN_00417120(uVar4, &param_11, &param_3);
    FUN_00417120(local_2c, &param_1, &param_2);
    FUN_00417120(local_28, &param_10, &param_4);
    if ((param_8 == 0x10000) || (param_8 == 0x20000))
    {
        local_18 = param_11 + -1 + iVar1;
        local_14 = param_3 + -1 + iVar2;
        local_20 = iVar1;
        local_1c = iVar2;
        FUN_00412fb0(iVar3, -1, uVar4, &local_20, 1, 0);
        iVar5 = param_7;
        if (local_1c <= local_c)
        {
            local_c = local_1c;
        }
        if (local_4 <= local_14)
        {
            local_4 = local_14;
        }
        local_20 = param_11 + iVar1;
        local_18 = (param_7 - param_10) + -1 + iVar1;
        local_14 = param_2 + -1 + iVar2;
        local_1c = iVar2;
        FUN_00412fb0(iVar3, -1, local_2c, &local_20, 1, 0);
        if (local_1c <= local_c)
        {
            local_c = local_1c;
        }
        if (local_4 <= local_14)
        {
            local_4 = local_14;
        }
        local_20 = (iVar5 - param_10) + iVar1;
        local_18 = iVar5 + -1 + iVar1;
        local_14 = param_4 + -1 + iVar2;
        local_1c = iVar2;
        FUN_00412fb0(iVar3, -1, local_28, &local_20, 1, local_24);
        if (local_1c <= local_c)
        {
            local_c = local_1c;
        }
        if (local_4 <= local_14)
        {
            local_4 = local_14;
        }
        if (param_9 != 0)
        {
            FUN_00414b60(iVar3, (iVar1 - iVar5) + -2, iVar2 - param_4);
        }
        iVar5 = iVar5 + param_10 + param_11;
    }
    else
    {
        local_18 = param_11 + -1 + iVar1;
        local_14 = param_3 + -1 + iVar2;
        local_20 = iVar1;
        local_1c = iVar2;
        FUN_00412fb0(iVar3, -1, uVar4, &local_20, 1, 0);
        iVar5 = param_7;
        if (local_1c <= local_c)
        {
            local_c = local_1c;
        }
        if (local_4 <= local_14)
        {
            local_4 = local_14;
        }
        local_20 = param_11 + iVar1;
        local_1c = iVar2;
        local_18 = param_11 + param_7 + -1 + iVar1;
        local_14 = param_2 + -1 + iVar2;
        FUN_00412fb0(iVar3, -1, local_2c, &local_20, 1, 0);
        if (local_1c <= local_c)
        {
            local_c = local_1c;
        }
        if (local_4 <= local_14)
        {
            local_4 = local_14;
        }
        local_1c = iVar2;
        local_20 = param_11 + iVar5 + iVar1;
        local_18 = param_10 + param_11 + iVar5 + -1 + iVar1;
        local_14 = param_4 + -1 + iVar2;
        FUN_00412fb0(iVar3, -1, local_28, &local_20, 1, local_24);
        if (local_1c <= local_c)
        {
            local_c = local_1c;
        }
        if (local_4 <= local_14)
        {
            local_4 = local_14;
        }
        if (param_9 != 0)
        {
            FUN_00414b60(iVar3, (iVar1 - iVar5) + -2, iVar2 - param_4);
        }
        iVar5 = iVar5 + param_10 + param_11;
    }
    *(uint *)(iVar3 + 0x20) = *(uint *)(iVar3 + 0x20) | 4;
    FUN_00414b40(iVar3, iVar5, (local_4 - local_c) + 1);
    local_20 = *(int *)(iVar3 + 0x24);
    local_1c = *(undefined_32 *)(iVar3 + 0x28);
    local_18 = *(undefined_32 *)(iVar3 + 0x2c);
    local_14 = *(undefined_32 *)(iVar3 + 0x30);
    uVar4 = FUN_00412fb0(iVar3, -1, 0x3f1, &local_20, 1, 0);
    FUN_00413090(iVar3, uVar4, 0, 0, 0, 0x82);
    FUN_00414e60(iVar3, 1);
    *(undefined_32 *)(iVar3 + 0x18) = 0xb;
    return iVar3;
}

// validate config value ?
void FUN_00414420(int param_1, uint param_2)

{
    uint uVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    int iVar6;
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    uVar3 = param_2;
    iVar2 = param_1;
    if (param_1 != 0)
    {
        uVar1 = *(uint *)(param_1 + 0x20);
        if ((param_2 == 0) || (FUN_00418b70(param_1), uVar3 == 0))
        {
            uVar4 = *(uint *)(iVar2 + 0x20) & 0xfffdffff;
        }
        else
        {
            uVar4 = *(uint *)(iVar2 + 0x20) | 0x20000;
        }
        *(uint *)(iVar2 + 0x20) = uVar4;
        if ((uVar4 & 0x40000) == 0)
        {
            if ((uVar4 & 0x10000) == 0)
            {
                iVar5 = (uVar3 != 0) + 0x3f6;
            }
            else
            {
                iVar5 = (uVar3 != 0) + 0x3f2;
            }
        }
        else
        {
            iVar5 = (uVar3 != 0) + 0x3f4;
        }
        FUN_00417120(iVar5, &param_1, &param_2);
        if ((iVar5 == 0x3f7) || (iVar5 == 0x3f6))
        {
            local_10 = (*(int *)(iVar2 + 0x2c) - param_1) + -3;
            local_8 = *(int *)(iVar2 + 0x2c) + -3;
        }
        else
        {
            local_10 = *(int *)(iVar2 + 0x24) + 3;
            local_8 = *(int *)(iVar2 + 0x24) + 2 + param_1;
        }
        local_c = *(int *)(iVar2 + 0x28) + (((*(int *)(iVar2 + 0x30) - *(int *)(iVar2 + 0x28)) - param_2) + 1 >> 1);
        local_4 = local_c + -1 + param_2;
        if (*(int *)(iVar2 + 0xc) == 0)
        {
            iVar6 = FUN_00413b90(iVar2, 0, &local_10, iVar5, 0, 0, 0);
            *(uint *)(iVar6 + 0x20) = *(uint *)(iVar6 + 0x20) | 0x400;
        }
        FUN_00412fb0(*(undefined_32 *)(iVar2 + 0xc), 0, iVar5, &local_10, 1, 0);
        if (uVar3 != (uVar1 & 0x20000))
        {
            FUN_004151a0(*(undefined_32 *)(iVar2 + 8), 5000, *(undefined_32 *)(iVar2 + 0x1c), uVar3);
        }
    }
    return;
}

void FUN_00414590(int param_1)

{
    FUN_00414420(param_1, ~*(uint *)(param_1 + 0x20) >> 0x11 & 1);
    return;
}

undefined_32 FUN_004145b0(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                          undefined_32 param_5, undefined_32 param_6, undefined_32 param_7, undefined_32 param_8,
                          int param_9)

{
    int iVar1;
    int iVar2;

    DAT_004b5d7c = 0;
    DAT_004d87ac = -1;
    FUN_00414e60(param_1, 0);
    iVar1 = FUN_004146c0(0, param_2, param_3, param_4, param_5, param_6, param_7, param_8, &LAB_00417f50);
    DAT_004d87b4 = iVar1;
    if (*(int *)(iVar1 + 0xc) != 0)
    {
        iVar2 = FUN_0041b3c0(*(int *)(iVar1 + 0xc));
        if (((byte) * (undefined_32 *)(iVar2 + 0x18) & 5) == 5)
        {
            iVar2 = *(int *)(iVar2 + 4);
        }
        FUN_00414f10(iVar2, 1);
    }
    DAT_004d87b8 = param_1;
    if (param_9 != 0)
    {
        DAT_004d87b0 = 1;
        while (DAT_004b5d7c == 0)
        {
            thunk_FUN_00423580();
        }
        DAT_004d87b0 = 0;
        FUN_00414d00(iVar1);
        DAT_004d87b4 = 0;
        FUN_00414e60(param_1, 1);
        if (*(int *)(param_1 + 0xc) != 0)
        {
            iVar1 = FUN_0041b3c0(*(int *)(param_1 + 0xc));
            if (((byte) * (undefined_32 *)(iVar1 + 0x18) & 5) == 5)
            {
                iVar1 = *(int *)(iVar1 + 4);
            }
            FUN_00414f10(iVar1, 1);
        }
        DAT_004d87b8 = 0;
    }
    return DAT_004d87ac;
}

int FUN_004146c0(undefined_32 param_1, int param_2, int param_3, uint param_4, undefined_32 param_5, int param_6,
                 int param_7, int param_8, undefined_32 param_9)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    int local_40;
    int local_3c;
    int local_38;
    int local_34;
    int local_30;
    int local_2c;
    int local_28;
    int local_24;
    int local_20;
    int local_1c;
    int local_18;
    int local_14;
    uint local_10;
    uint local_c;
    int local_8;
    int local_4;

    iVar1 = FUN_00416d90(param_1, 0, 0, 0, 0, 0, 0, &LAB_00416820, param_9);
    FUN_004176f0(&local_40, param_4, 6);
    iVar6 = local_34 - local_3c;
    iVar7 = (local_38 - local_40) + 1;
    iVar8 = 0;
    if (-1 < iVar7)
    {
        iVar8 = iVar7;
    }
    FUN_00417740(&local_30, param_5, 0);
    local_2c = local_24 - local_2c;
    iVar7 = (local_28 - local_30) + 1;
    if (iVar8 <= iVar7)
    {
        iVar8 = iVar7;
    }
    iVar2 = FUN_004177b0(&local_20, param_6, param_7, param_8, 0);
    iVar6 = iVar6 + local_2c + 4 + (local_1c * 0x7fffffff + local_14) * 2;
    iVar7 = (local_18 - local_20) + 1;
    if (iVar8 <= iVar7)
    {
        iVar8 = iVar7;
    }
    FUN_00414b40(iVar1, iVar8, iVar6);
    if (param_2 == -1)
    {
        param_2 = (*(int *)(iVar1 + 0x24) - *(int *)(iVar1 + 0x2c)) + 0x27f >> 1;
    }
    if (param_3 == -1)
    {
        param_3 = (*(int *)(iVar1 + 0x28) - *(int *)(iVar1 + 0x30)) + 0x1df >> 1;
    }
    FUN_00414b60(iVar1, param_2, param_3);
    local_10 = 0x280U - iVar8 >> 1;
    local_c = 0x1e0U - iVar6 >> 1;
    local_8 = iVar8 + -1 + local_10;
    local_4 = iVar6 + -1 + local_c;
    FUN_00412fb0(iVar1, -1, 0x3f1, &local_10, 1, 0);
    FUN_00413090(iVar1, 0, 0, 0, 0, 0x82);
    FUN_00417900(&local_40,
                 (((local_40 - local_38) + *(int *)(iVar1 + 0x2c)) - *(int *)(iVar1 + 0x24) >> 1)
                     + *(int *)(iVar1 + 0x24),
                 *(int *)(iVar1 + 0x28) + local_3c);
    FUN_00417900(&local_30,
                 (((local_30 - local_28) + *(int *)(iVar1 + 0x2c)) - *(int *)(iVar1 + 0x24) >> 1)
                     + *(int *)(iVar1 + 0x24),
                 local_34);
    FUN_00417900(&local_20,
                 (((local_20 - local_18) + *(int *)(iVar1 + 0x2c)) - *(int *)(iVar1 + 0x24) >> 1)
                     + *(int *)(iVar1 + 0x24),
                 local_24);
    FUN_004131c0(iVar1, 0, 6, param_4, local_40 + 10, local_3c + 10, 0, 0);
    uVar3 = FUN_00413520(iVar1, 0, &local_30, 0, 0x100000, 0);
    FUN_00417fe0(uVar3, param_5, 1);
    iVar6 = 0;
    iVar7 = local_1c + 10;
    iVar8 = local_20 + 10;
    param_4 = 0;
    if (param_6 != 0)
    {
        iVar4 = FUN_0042de30(param_6, DAT_00e99720);
        param_4 = iVar4 * 3;
    }
    if (param_7 != 0)
    {
        iVar4 = FUN_0042de30(param_7, DAT_00e99720);
        if (param_4 <= (uint)(iVar4 * 3))
        {
            param_4 = iVar4 * 3;
        }
    }
    if (param_8 != 0)
    {
        iVar4 = FUN_0042de30(param_8, DAT_00e99720);
        if (param_4 <= (uint)(iVar4 * 3))
        {
            param_4 = iVar4 * 3;
        }
    }
    if (param_4 < 0x97)
    {
        param_4 = 0x96;
    }
    if (param_6 != 0)
    {
        iVar4 = FUN_0042df70(param_6, DAT_00e99720);
        iVar6 = 1;
        FUN_004132a0(iVar1, 0, 0, param_6, iVar8, iVar7, param_4, iVar4 * 3, 0x100000, 0);
        if (param_8 == 0)
        {
            iVar8 = local_20 + 0x1e + iVar2;
        }
        else
        {
            iVar7 = local_1c + 0x14 + iVar4 * 3;
        }
    }
    iVar4 = iVar6;
    if (param_7 != 0)
    {
        iVar5 = FUN_0042df70(param_7, DAT_00e99720);
        iVar4 = iVar6 + 1;
        FUN_004132a0(iVar1, iVar6, 0, param_7, iVar8, iVar7, param_4, iVar5 * 3, 0x100000, 0);
        iVar8 = iVar8 + 0x14 + iVar2;
    }
    if (param_8 != 0)
    {
        iVar6 = FUN_0042df70(param_8, DAT_00e99720);
        FUN_004132a0(iVar1, iVar4, 0, param_8, iVar8, iVar7, param_4, iVar6 * 3, 0x100000, 0);
    }
    FUN_00414e60(iVar1, 1);
    return iVar1;
}

void FUN_00414ab0(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;

    uVar1 = FUN_004174e0(*(undefined_32 *)(param_1 + 0x4f8), param_2);
    *(undefined_32 *)(param_1 + 0x4f8) = uVar1;
    *(undefined_32 *)(param_1 + 0x4fc) = param_3;
    return;
}

void FUN_00414ae0(int param_1, undefined_32 param_2)

{
    *(undefined_32 *)(param_1 + 0x4fc) = param_2;
    return;
}

char *FUN_00414af0(int param_1, char *param_2, int param_3)

{
    if ((param_2 != NULL) && (*(char **)(param_1 + 0x4f8) != NULL))
    {
        _strncpy(param_2, *(char **)(param_1 + 0x4f8), param_3 - 1);
        param_2[param_3 + -1] = '\0';
        return param_2;
    }
    return *(char **)(param_1 + 0x4f8);
}

void FUN_00414b30(int param_1, undefined_32 param_2)

{
    *(undefined_32 *)(param_1 + 0x4f4) = param_2;
    return;
}

void FUN_00414b40(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    FUN_004151a0(param_1, 0xc, param_2, param_3);
    return;
}

void FUN_00414b60(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    FUN_004151a0(param_1, 0xb, param_2, param_3);
    return;
}

void FUN_00414b80(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    FUN_004151a0(param_1, 10, param_2, param_3);
    return;
}

char *FUN_00414ba0(int param_1, char *param_2, int param_3)

{
    if ((param_2 != NULL) && (*(char **)(param_1 + 0x4d4) != NULL))
    {
        _strncpy(param_2, *(char **)(param_1 + 0x4d4), param_3 - 1);
        param_2[param_3 + -1] = '\0';
        return param_2;
    }
    return *(char **)(param_1 + 0x4d4);
}

void FUN_00414be0(int param_1, uint8_t param_2, uint8_t param_3, uint8_t param_4, uint8_t param_5)

{
    *(uint8_t *)(param_1 + 0x4c0) = param_2;
    *(uint8_t *)(param_1 + 0x4c1) = param_3;
    *(uint8_t *)(param_1 + 0x4c2) = param_4;
    *(uint8_t *)(param_1 + 0x4c3) = param_5;
    return;
}

void FUN_00414c10(int param_1, uint8_t param_2, uint8_t param_3, uint8_t param_4, uint8_t param_5)

{
    *(uint8_t *)(param_1 + 0x4cc) = param_2;
    *(uint8_t *)(param_1 + 0x4cd) = param_3;
    *(uint8_t *)(param_1 + 0x4ce) = param_4;
    *(uint8_t *)(param_1 + 0x4cf) = param_5;
    return;
}

void FUN_00414c40(int param_1, uint8_t param_2, uint8_t param_3, uint8_t param_4, uint8_t param_5)

{
    *(uint8_t *)(param_1 + 0x4c8) = param_2;
    *(uint8_t *)(param_1 + 0x4c9) = param_3;
    *(uint8_t *)(param_1 + 0x4ca) = param_4;
    *(uint8_t *)(param_1 + 0x4cb) = param_5;
    return;
}

void FUN_00414c70(int param_1, uint8_t param_2, uint8_t param_3, uint8_t param_4, uint8_t param_5)

{
    *(uint8_t *)(param_1 + 0x4d0) = param_2;
    *(uint8_t *)(param_1 + 0x4d1) = param_3;
    *(uint8_t *)(param_1 + 0x4d2) = param_4;
    *(uint8_t *)(param_1 + 0x4d3) = param_5;
    return;
}

void FUN_00414ca0(int param_1, uint8_t param_2, uint8_t param_3, uint8_t param_4, uint8_t param_5)

{
    *(undefined_8 *)(param_1 + 0x4c4) = param_2;
    *(undefined_8 *)(param_1 + 0x4c5) = param_3;
    *(undefined_8 *)(param_1 + 0x4c6) = param_4;
    *(undefined_8 *)(param_1 + 0x4c7) = param_5;
    return;
}

undefined_32 FUN_00414cd0(int param_1, int param_2, undefined_32 param_3)

{
    undefined_32 uVar1;

    uVar1 = *(undefined_32 *)(*(int *)(param_1 + 0x44) + param_2 * 4);
    *(undefined_32 *)(*(int *)(param_1 + 0x44) + param_2 * 4) = param_3;
    return uVar1;
}

undefined_32 FUN_00414cf0(int param_1, int param_2)

{
    return *(undefined_32 *)(*(int *)(param_1 + 0x44) + param_2 * 4);
}

void FUN_00414d00(undefined_8 *param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = *(int *)(param_1 + 0xc);
    while (iVar2 != 0)
    {
        iVar1 = *(int *)(iVar2 + 4);
        FUN_00414d00(iVar2);
        iVar2 = iVar1;
    }
    if (param_1 != PTR_DAT_004b5d74)
    {
        FUN_004151a0(param_1, 0x10, 0, 0);
        FUN_00417060(param_1);
        FUN_00416890(param_1);
        _free(param_1);
    }
    return;
}

int FUN_00414d60(int param_1, int param_2)

{
    int iVar1;

    if (*(int *)(param_1 + 0x18) != param_2)
    {
        if (((*(int *)(param_1 + 0xc) != 0) && (iVar1 = FUN_00414d60(*(int *)(param_1 + 0xc), param_2), iVar1 != 0))
            && (*(int *)(iVar1 + 0x18) == param_2))
        {
            return iVar1;
        }
        param_1 = 0;
    }
    return param_1;
}

undefined_8 *FUN_00414d90(undefined_8 *param_1, int param_2)

{
    undefined_8 *puVar1;
    undefined_8 *puVar2;

    if (param_1 == NULL)
    {
        param_1 = PTR_DAT_004b5d74;
    }
    if (*(int *)(param_1 + 0x1c) != param_2)
    {
        puVar2 = *(undefined_8 **)(param_1 + 0xc);
        if (puVar2 != NULL)
        {
            do
            {
                if (*(int *)(puVar2 + 0x18) != 0xc)
                {
                    if ((*(int *)(puVar2 + 0xc) != 0)
                        && (puVar1 = (undefined_8 *)FUN_00414d90(puVar2, param_2), puVar1 != NULL))
                    {
                        return puVar1;
                    }
                    if (*(int *)(puVar2 + 0x1c) == param_2)
                    {
                        return puVar2;
                    }
                }
                puVar2 = *(undefined_8 **)(puVar2 + 4);
                if (puVar2 == NULL)
                {
                    return NULL;
                }
            } while (true);
        }
        param_1 = NULL;
    }
    return param_1;
}

void FUN_00414df0(undefined_32 *param_1)

{
    if (param_1 != NULL)
    {
        for (param_1 = (undefined_32 *)*param_1; param_1 != NULL; param_1 = (undefined_32 *)*param_1)
        {}
        return;
    }
    return;
}

void FUN_00414e10(int param_1)

{
    int iVar1;

    if (param_1 != 0)
    {
        for (iVar1 = *(int *)(param_1 + 4); iVar1 != 0; iVar1 = *(int *)(iVar1 + 4))
        {}
        return;
    }
    return;
}

void FUN_00414e30(int param_1, int param_2)

{
    if (param_1 != 0)
    {
        if (param_2 != 0)
        {
            *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) | 0x800;
            return;
        }
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) & 0xfffff7ff;
    }
    return;
}

void FUN_00414e60(undefined_32 param_1, undefined_32 param_2)

{
    FUN_004151a0(param_1, 0xe, param_2, 0);
    return;
}

undefined_32 FUN_00414e80(int param_1)

{
    if (param_1 == 0)
    {
        return 1;
    }
    do
    {
        if ((*(byte *)(param_1 + 0x20) & 0x40) == 0)
        {
            return 0;
        }
        param_1 = *(int *)(param_1 + 8);
    } while (param_1 != 0);
    return 1;
}

void FUN_00414eb0(int param_1)

{
    if (DAT_004d878c != 0)
    {
        *(uint *)(DAT_004d878c + 0x20) = *(uint *)(DAT_004d878c + 0x20) & 0xffffffef;
    }
    FUN_004151a0(DAT_004d878c, 1, 0, 0);
    DAT_004d878c = param_1;
    if (param_1 != 0)
    {
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) | 0x10;
    }
    FUN_004151a0(param_1, 1, 1, 0);
    return;
}

void FUN_00414f00(undefined_32 param_1)

{
    DAT_004d8790 = param_1;
    return;
}

void FUN_00414f10(int param_1, int param_2)

{
    int iVar1;

    iVar1 = FUN_0041b380(param_1);
    if (iVar1 != 0)
    {
        FUN_00414f70(param_1);
    }
    if ((param_1 != 0) && (param_2 != 0))
    {
        FUN_00408360(((*(int *)(param_1 + 0x2c) - *(int *)(param_1 + 0x24)) + 1) / 2 + *(int *)(param_1 + 0x24),
                     ((*(int *)(param_1 + 0x30) - *(int *)(param_1 + 0x28)) + 1) / 2 + *(int *)(param_1 + 0x28));
    }
    return;
}

void FUN_00414f70(int param_1)

{
    if ((param_1 == 0) || ((*(int *)(param_1 + 0x18) != 0 && ((*(uint *)(param_1 + 0x20) & 0x100) == 0))))
    {
        if (DAT_004d8794 != 0)
        {
            *(uint *)(DAT_004d8794 + 0x20) = *(uint *)(DAT_004d8794 + 0x20) & 0xffffffdf;
        }
        FUN_004151a0(DAT_004d8794, 0xd, 0, 0);
        DAT_004d8794 = param_1;
        if (param_1 != 0)
        {
            *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) | 0x20;
        }
        FUN_004151a0(DAT_004d8794, 0xd, 1, 0);
    }
    return;
}

undefined_32 FUN_00414fe0(void)

{
    return DAT_004d878c;
}

undefined_32 FUN_00414ff0(void)

{
    return DAT_004d8790;
}

undefined_32 FUN_00415000(void)

{
    return DAT_004d8794;
}

void FUN_00415010(void)

{
    FUN_00414f00(0);
    return;
}

void FUN_00415020(undefined_8 *param_1)

{
    undefined_8 *puVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;

    if (DAT_004d87a0 != 0)
    {
        FUN_00412630();
    }
    if (param_1 == NULL)
    {
        param_1 = PTR_DAT_004b5d74;
    }
    iVar3 = 0;
    for (puVar1 = param_1; puVar1 != NULL; puVar1 = *(undefined_8 **)(puVar1 + 4))
    {
        if (((*(uint *)(puVar1 + 0x20) & 0x40) != 0) && ((*(uint *)(puVar1 + 0x20) & 1) != 0))
        {
            iVar3 = iVar3 + 1;
        }
    }
    uVar4 = 0;
    for (puVar1 = param_1; puVar1 != NULL; puVar1 = *(undefined_8 **)(puVar1 + 4))
    {
        if ((puVar1[0x20] & 0x40) != 0)
        {
            uVar2 = FUN_00416930(puVar1);
            uVar4 = uVar4 | uVar2;
            FUN_004151f0(puVar1);
            FUN_004151a0(puVar1, 9, 0, 0);
        }
    }
    if (((uVar4 == 0) && (iVar3 != 0)) && (*(int *)(param_1 + 8) != 0))
    {
        FUN_004151a0(*(int *)(param_1 + 8), 0x48, 0, 0);
    }
    for (; param_1 != NULL; param_1 = *(undefined_8 **)(param_1 + 4))
    {
        if (((param_1[0x20] & 0x40) != 0) && (*(int *)(param_1 + 0xc) != 0))
        {
            FUN_00415020(*(int *)(param_1 + 0xc));
        }
    }
    return;
}

undefined_8 *FUN_004150e0(undefined_8 *param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_8 *puVar1;
    int iVar2;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    if (param_1 == NULL)
    {
        return NULL;
    }
    do
    {
        if (((param_1[0x20] & 0x40) != 0) && (*(int *)(param_1 + 0x18) != 8))
        {
            if ((*(int *)(param_1 + 0xc) != 0)
                && (puVar1 = (undefined_8 *)FUN_004150e0(*(int *)(param_1 + 0xc), param_2, param_3), puVar1 != NULL))
            {
                return puVar1;
            }
            if ((*(uint *)(param_1 + 0x20) & 0x400) == 0)
            {
                local_10 = *(undefined_32 *)(param_1 + 0x24);
                local_c = *(undefined_32 *)(param_1 + 0x28);
                local_8 = *(undefined_32 *)(param_1 + 0x2c);
                local_4 = *(undefined_32 *)(param_1 + 0x30);
                FUN_00417f00(&local_10, param_1 + 0x4e0);
                if ((param_1 != PTR_DAT_004b5d74) && (iVar2 = FUN_004172c0(&local_10, param_2, param_3), iVar2 != 0))
                {
                    return param_1;
                }
            }
        }
        param_1 = *(undefined_8 **)(param_1 + 4);
        if (param_1 == NULL)
        {
            return NULL;
        }
    } while (true);
}

int FUN_004151a0(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    int iVar1;

    if (param_1 != 0)
    {
        if ((*(code **)(param_1 + 0x14) != (code *)0x0)
            && (iVar1 = (**(code **)(param_1 + 0x14))(param_1, param_2, param_3, param_4), iVar1 != 0))
        {
            return iVar1;
        }
        if (*(code **)(param_1 + 0x10) != (code *)0x0)
        {
            iVar1 = (**(code **)(param_1 + 0x10))(param_1, param_2, param_3, param_4);
            return iVar1;
        }
    }
    return 0;
}

void FUN_004151f0(int param_1)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_16 extraout_var;
    undefined_16 extraout_var_00;
    undefined_16 extraout_var_01;
    undefined_16 extraout_var_02;
    undefined_16 uVar4;
    uint uVar3;
    undefined_16 extraout_var_03;
    undefined_16 extraout_var_04;
    undefined_16 extraout_var_05;
    undefined_16 extraout_var_06;
    undefined_16 extraout_var_07;
    undefined_16 extraout_var_08;
    undefined_16 extraout_var_09;
    undefined_16 extraout_var_10;
    undefined_16 uVar5;
    uint extraout_ECX;
    undefined_16 extraout_var_11;
    uint extraout_EDX;
    uint extraout_EDX_00;
    uint extraout_EDX_01;
    int iVar6;
    uint extraout_EDX_02;
    uint extraout_EDX_03;
    uint extraout_EDX_04;
    uint extraout_EDX_05;
    undefined_16 extraout_var_12;
    uint extraout_EDX_06;
    undefined_16 extraout_var_13;
    int iVar7;
    int *piVar8;

    if (((DAT_004d879c != 0) && ((*(byte *)(param_1 + 0x20) & 0x40) != 0)) && (iVar7 = 0, 0 < *(int *)(param_1 + 0x5c)))
    {
        piVar8 = (int *)(param_1 + 100);
        do
        {
            if ((*piVar8 != 0) && (piVar8[1] == 0))
            {
                iVar1 = FUN_00412f20(*piVar8);
                piVar8[1] = iVar1;
            }
            uVar2 = __get_fname(*piVar8);
            FUN_004282f0(CONCAT22(extraout_var_03, *(undefined_16 *)(piVar8 + 1)), uVar2);
            sprite_set_pos(CONCAT22(extraout_var_04, *(undefined_16 *)(piVar8 + 1)),
                           *(short *)(piVar8 + 10) + *(short *)(piVar8 + 4),
                           *(short *)(piVar8 + 0xb) + *(short *)(piVar8 + 5));
            uVar4 = (undefined_16)((uint)piVar8[-1] >> 0x10);
            uVar3 = extraout_EDX;
            uVar5 = extraout_var_05;
            if ((piVar8[-1] & 0x80000U) != 0)
            {
                iVar1 = ((*(int *)(param_1 + 0x30) - piVar8[7]) + piVar8[5]) - *(uint *)(param_1 + 0x28);
                sprite_set_pos(*(uint *)(param_1 + 0x28) & 0xffff0000 | (uint) * (ushort *)(piVar8 + 1),
                               piVar8[5] & 0xffff0000U | (uint) * (ushort *)(param_1 + 0x24),
                               CONCAT22((short)(iVar1 >> 0x11), (short)(iVar1 >> 1) + *(short *)(param_1 + 0x28)));
                uVar3 = extraout_EDX_00;
                uVar4 = extraout_var;
                uVar5 = extraout_var_06;
            }
            if ((piVar8[-1] & 0x40000U) != 0)
            {
                iVar1 = ((*(int *)(param_1 + 0x2c) - piVar8[6]) + piVar8[4]) - *(int *)(param_1 + 0x24);
                sprite_set_pos(piVar8[4] & 0xffff0000U | (uint) * (ushort *)(piVar8 + 1),
                               CONCAT22((short)(iVar1 >> 0x11), (short)(iVar1 >> 1) + *(short *)(param_1 + 0x24)),
                               uVar3 & 0xffff0000 | (uint) * (ushort *)(param_1 + 0x28));
                uVar3 = extraout_EDX_01;
                uVar4 = extraout_var_00;
                uVar5 = extraout_var_07;
            }
            if ((piVar8[-1] & 0x100000U) != 0)
            {
                iVar6 = ((*(int *)(param_1 + 0x30) - piVar8[7]) + piVar8[5]) - *(int *)(param_1 + 0x28);
                iVar1 = ((*(int *)(param_1 + 0x2c) - piVar8[6]) + piVar8[4]) - *(int *)(param_1 + 0x24);
                sprite_set_pos(piVar8[4] & 0xffff0000U | (uint) * (ushort *)(piVar8 + 1),
                               CONCAT22((short)(iVar1 >> 0x11), (short)(iVar1 >> 1) + *(short *)(param_1 + 0x24)),
                               CONCAT22((short)(iVar6 >> 0x11), (short)(iVar6 >> 1) + *(short *)(param_1 + 0x28)));
                uVar3 = extraout_EDX_02;
                uVar4 = extraout_var_01;
                uVar5 = extraout_var_08;
            }
            if ((piVar8[-1] & 0x200000U) != 0)
            {
                FUN_004287e0(uVar3 & 0xffff0000 | (uint) * (ushort *)(piVar8 + 1), 8);
                uVar3 = extraout_EDX_03;
                uVar4 = extraout_var_02;
                uVar5 = extraout_var_09;
            }
            if ((piVar8[-1] & 0x400000U) != 0)
            {
                FUN_004287e0(CONCAT22(uVar4, *(undefined_16 *)(piVar8 + 1)), 4);
                uVar3 = extraout_EDX_04;
                uVar5 = extraout_var_10;
            }
            if ((piVar8[-1] & 0x800000U) != 0)
            {
                FUN_004287e0(CONCAT22(uVar5, *(undefined_16 *)(piVar8 + 1)), 0x8000);
                uVar3 = extraout_EDX_05;
            }
            uVar4 = (undefined_16)(uVar3 >> 0x10);
            if ((piVar8[-1] & 0x1000000U) != 0)
            {
                FUN_004287e0(uVar3 & 0xffff0000 | (uint) * (ushort *)(piVar8 + 1), 0x800);
                uVar4 = extraout_var_12;
            }
            sprite_scale(CONCAT22(uVar4, *(undefined_16 *)(piVar8 + 1)), piVar8[2], piVar8[3]);
            uVar3 = 100;
            if ((*(uint *)(param_1 + 0x20) & 0x100) == 0)
            {
                uVar3 = (uint) * (char *)((int)piVar8 + 0x33);
            }
            sprite_set_color(uVar3 & 0xffff0000 | (uint) * (ushort *)(piVar8 + 1),
                             extraout_EDX_06 & 0xffffff00 | (uint) * (byte *)(piVar8 + 0xc),
                             extraout_ECX & 0xffffff00 | (uint) * (byte *)((int)piVar8 + 0x31),
                             uVar3 & 0xffffff00 | (uint) * (byte *)((int)piVar8 + 0x32), uVar3);
            sprite_enable_display(CONCAT22(extraout_var_11, *(undefined_16 *)(piVar8 + 1)), 1);
            FUN_004287e0(CONCAT22(extraout_var_13, *(undefined_16 *)(piVar8 + 1)), 0x10000);
            iVar7 = iVar7 + 1;
            piVar8 = piVar8 + 0xe;
        } while (iVar7 < *(int *)(param_1 + 0x5c));
    }
    return;
}

void FUN_00415400(void)

{
    undefined_32 uVar1;
    int iVar2;
    int iVar3;
    undefined_32 uVar4;
    uint uVar5;

    FUN_004180c0();
    FUN_004502f0();
    if ((PTR_DAT_004b5d74 != NULL) && (iVar2 = FUN_00414e80(PTR_DAT_004b5d74), iVar2 != 0))
    {
        FUN_00415020(PTR_DAT_004b5d74);
        FUN_004184d0();
        if (DAT_004d87a8 != 0)
        {
            DAT_004d8be8 = 1;
            return;
        }
        if (DAT_004d8be8 != 0)
        {
            FUN_00414f10(DAT_004d8798, 1);
            DAT_004d8be8 = 0;
        }
        iVar2 = FUN_00408200();
        if (iVar2 != 0)
        {
            FUN_004083d0();
            uVar1 = DAT_00ec8754;
            uVar4 = DAT_00ec874c;
            if ((DAT_004d8bd0 & 8) != 0)
            {
                DAT_004d8bd0 = DAT_004d8bd0 & 0xf7;
                return;
            }
            iVar2 = FUN_004150e0(PTR_DAT_004b5d74, DAT_00ec874c, DAT_00ec8754);
            if ((iVar2 != 0) && ((*(uint *)(iVar2 + 0x20) & 0x100) != 0))
            {
                return;
            }
            iVar3 = FUN_00414fe0();
            if ((iVar2 != iVar3) && (FUN_00414eb0(iVar2), DAT_004d87c8 == 0))
            {
                FUN_00414f70(iVar2);
            }
            iVar3 = FUN_00414ff0();
            if (iVar3 != 0)
            {
                iVar2 = iVar3;
            }
            if ((DAT_00ec8740 & 0x80000000) != 0)
            {
                FUN_00412630();
                FUN_004151a0(iVar2, 6, uVar4, uVar1);
            }
            if ((DAT_00ec8740 & 0x10000000) != 0)
            {
                if ((DAT_00ec8740 & 2) != 0)
                {
                    FUN_004151a0(iVar2, (~(byte)DAT_00ec8744 & 2 | 4) >> 1, uVar4, uVar1);
                }
                if ((DAT_00ec8740 & 4) != 0)
                {
                    FUN_004151a0(iVar2, (~DAT_00ec8744 & 4 | 0x10) >> 2, uVar4, uVar1);
                }
                if (DAT_004d87c8 == 0)
                {
                    uVar5 = DAT_00ec8740 & 0xe0000000;
                    if (DAT_004d6b40 != 0)
                    {
                        uVar4 = FUN_00411810(0x12, uVar5, 0);
                        FUN_004151a0(uVar4);
                    }
                    if (DAT_004d6b44 != 0)
                    {
                        if ((DAT_004d8bd0 & 1) == 0)
                        {
                            if (((*(int *)(DAT_0050c454 + 8) == 9) && (*(int *)(DAT_0050c454 + 0x10) == -1))
                                || (*(int *)(DAT_0050c454 + 8) == 1))
                            {
                                iVar3 = DAT_004d87b4;
                                if (DAT_004d87b4 == 0)
                                {
                                    iVar3 = FUN_00411810();
                                }
                                FUN_004151a0(iVar3, 0x13, uVar5, 0);
                            }
                        }
                        else
                        {
                            DAT_004d8bd0 = DAT_004d8bd0 & 0xfe;
                        }
                    }
                }
                if (((DAT_004d6b40 != 0) && (iVar2 != 0)) && ((*(byte *)(iVar2 + 0x20) & 8) == 0))
                {
                    FUN_004151a0(iVar2, 0x49, 1, *(undefined_32 *)(iVar2 + 0x1c));
                }
            }
            if ((DAT_00ec8740 & 0x20000000) != 0)
            {
                FUN_00412630();
                FUN_00416bd0();
            }
        }
        FUN_0041b690();
    }
    return;
}

void FUN_00415640(undefined_32 param_1, int param_2)

{
    int iVar1;

    iVar1 = FUN_00414e80(PTR_DAT_004b5d74);
    if (iVar1 != 0)
    {
        FUN_00412630();
        if (DAT_004d8794 != 0)
        {
            FUN_004151a0(DAT_004d8794, 8 - (uint)(param_2 != 0), param_1, 0);
            return;
        }
        if (param_2 == 0)
        {
            FUN_0041b420(param_1);
        }
    }
    return;
}

void FUN_004156a0(uint param_1, int param_2)

{
    int iVar1;
    undefined_32 *puVar2;
    int iVar3;
    undefined_32 uVar4;

    if ((DAT_004d8bd8 != 0) && (param_1 != 0))
    {
        DAT_004d87a8 = 1;
        FUN_004151a0(param_1, 0x48, 1, 0);
        iVar3 = *(int *)(param_1 + 0xc);
        if (param_2 == -1)
        {
            param_1 = rand();
            param_2 = __ftol();
        }
        if (param_2 == 1)
        {
            iVar1 = 0;
            for (puVar2 = (undefined_32 *)FUN_00414e10(iVar3); puVar2 != NULL; puVar2 = (undefined_32 *)*puVar2)
            {
                if ((puVar2[8] & 0x200) == 0)
                {
                    FUN_004151a0(puVar2, 0x48, 1, 1);
                    puVar2[0x13] = puVar2[10];
                    puVar2[0x12] = puVar2[9];
                    FUN_00416f50(puVar2, puVar2[9], (puVar2[10] - puVar2[0xc]) + -1);
                    puVar2[0x14] = iVar1;
                    iVar1 = iVar1 + 0xfa;
                    puVar2[8] = puVar2[8] | 1;
                }
            }
        }
        else if (iVar3 != 0)
        {
            do
            {
                if ((*(uint *)(iVar3 + 0x20) & 0x200) == 0)
                {
                    FUN_004151a0(iVar3, 0x48, 1, 1);
                    uVar4 = *(undefined_32 *)(iVar3 + 0x28);
                    *(int *)(iVar3 + 0x48) = *(int *)(iVar3 + 0x24);
                    *(undefined_32 *)(iVar3 + 0x4c) = uVar4;
                    if (param_1 == 0)
                    {
                        uVar4 = *(undefined_32 *)(iVar3 + 0x4c);
                        iVar1 = 0x280;
                    }
                    else
                    {
                        iVar1 = (*(int *)(iVar3 + 0x24) - *(int *)(iVar3 + 0x2c)) + -1;
                    }
                    FUN_00416f50(iVar3, iVar1, uVar4);
                    *(uint *)(iVar3 + 0x20) = *(uint *)(iVar3 + 0x20) | 1;
                }
                iVar3 = *(int *)(iVar3 + 4);
                param_1 = (uint)(param_1 == 0);
            } while (iVar3 != 0);
            return;
        }
    }
    return;
}

undefined_32 FUN_004157d0(int param_1, undefined_32 param_2)

{
    undefined_32 uVar1;

    uVar1 = *(undefined_32 *)(param_1 + 0x4dc);
    *(undefined_32 *)(param_1 + 0x4dc) = param_2;
    return uVar1;
}

undefined_32 FUN_004157f0(int param_1, undefined_32 param_2)

{
    undefined_32 uVar1;

    uVar1 = *(undefined_32 *)(param_1 + 0x500);
    *(undefined_32 *)(param_1 + 0x500) = param_2;
    return uVar1;
}

void FUN_00415810(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5)

{
    if (param_1 != 0)
    {
        *(undefined_32 *)(param_1 + 0x4e0) = param_2;
        *(undefined_32 *)(param_1 + 0x4e4) = param_3;
        *(undefined_32 *)(param_1 + 0x4e8) = param_4;
        *(undefined_32 *)(param_1 + 0x4ec) = param_5;
    }
    return;
}

undefined_32 FUN_00415850(int param_1, undefined_32 param_2, uint param_3, int param_4)

{
    int iVar1;
    undefined_32 uVar2;

    iVar1 = DAT_004d8798;
    switch (param_2)
    {
    case 2:
        FUN_00414f70(param_1);
        FUN_00414f00(param_1);
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) | 2;
        return 0;
    case 3:
        FUN_00415010();
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) & 0xfffffffd;
        iVar1 = DAT_004d8798;
        break;
    case 7:
        FUN_00414f00(param_1);
        iVar1 = DAT_004d8798;
        if (((param_3 == 9) || ((0x24 < param_3 && (param_3 < 0x29)))) && (DAT_004d87c8 == 0))
        {
            FUN_00416a40(param_1, param_3);
            return 0;
        }
        break;
    case 8:
        FUN_00415010();
        return 0;
    case 9:
        if ((*(uint *)(param_1 + 0x20) & 0x800) != 0)
        {
            FUN_00419140(param_1);
            return 0;
        }
        break;
    case 10:
        uVar2 = FUN_004174e0(*(undefined_32 *)(param_1 + 0x4d4), param_3);
        *(undefined_32 *)(param_1 + 0x4d4) = uVar2;
        iVar1 = DAT_004d8798;
        if (param_4 != -1)
        {
            *(int *)(param_1 + 0x4d8) = param_4;
            return 0;
        }
        break;
    case 0xb:
        FUN_00416f50(param_1, param_3, param_4);
        return 0;
    case 0xc:
        FUN_00416f20(param_1, param_3, param_4);
        return 0;
    case 0xd:
        if (param_3 == 0)
        {
            FUN_004151a0(param_1, 0x49, 0, *(undefined_32 *)(param_1 + 0x1c));
            return 0;
        }
        break;
    case 0xe:
        if (param_3 != 0)
        {
            *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) | 0x40;
            return 0;
        }
        FUN_004168f0(param_1);
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) & 0xffffffbf;
        FUN_00417060(param_1);
        return 0;
    case 0x10:
        uVar2 = FUN_004174e0(*(undefined_32 *)(param_1 + 0x4d4), 0);
        *(undefined_32 *)(param_1 + 0x4d4) = uVar2;
        uVar2 = FUN_004174e0(*(undefined_32 *)(param_1 + 0x51c), 0);
        *(undefined_32 *)(param_1 + 0x51c) = uVar2;
        return 0;
    case 0x11:
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) & 0xffffffcc;
        return 0;
    case 0x13:
        if (DAT_004d8be4 == 0)
        {
            FUN_004118b0(0);
            return 0;
        }
        break;
    case 0x46:
        FUN_00414e60(param_1, 1);
        if (param_3 != 0)
        {
            FUN_004156a0(param_1, -1);
        }
        iVar1 = FUN_00414d90(param_1, 2);
        if (iVar1 != 0)
        {
            DAT_004d8798 = iVar1;
            FUN_00414f10(iVar1, 1);
            return 0;
        }
        DAT_004d8798 = *(int *)(param_1 + 0xc);
        if (DAT_004d8798 != 0)
        {
            FUN_00414f10(DAT_004d8798, 1);
            return 0;
        }
        break;
    case 0x47:
        FUN_00414e60((&DAT_004d8110)[param_3], 0);
        (&DAT_004d8110)[param_3] = 0;
        return 0;
    case 0x49:
        if (param_3 != 0)
        {
            *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) | 8;
            FUN_004081e0(0);
            return 0;
        }
        *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) & 0xfffffff7;
        FUN_004081e0(1);
        return 0;
    }
    DAT_004d8798 = iVar1;
    return 0;
}

void FUN_00416840(undefined_8 *param_1, int *param_2)

{
    int iVar1;
    int iVar2;

    if (param_1 == NULL)
    {
        param_1 = PTR_DAT_004b5d74;
    }
    *param_2 = 0;
    param_2[1] = 0;
    param_2[2] = (int)param_1;
    iVar1 = *(int *)(param_1 + 0xc);
    if (iVar1 == 0)
    {
        *(int **)(param_1 + 0xc) = param_2;
        return;
    }
    for (iVar2 = *(int *)(iVar1 + 4); iVar2 != 0; iVar2 = *(int *)(iVar2 + 4))
    {
        iVar1 = iVar2;
    }
    *(int **)(iVar1 + 4) = param_2;
    *param_2 = iVar1;
    return;
}

void FUN_00416890(int *param_1)

{
    FUN_004168f0(param_1);
    if (param_1 == *(int **)(param_1[2] + 0xc))
    {
        *(int *)(param_1[2] + 0xc) = param_1[1];
        if ((undefined_32 *)param_1[1] != NULL)
        {
            *(undefined_32 *)param_1[1] = 0;
            *param_1 = 0;
            param_1[1] = 0;
            return;
        }
    }
    else
    {
        if (*param_1 != 0)
        {
            *(int *)(*param_1 + 4) = param_1[1];
        }
        if ((int *)param_1[1] != NULL)
        {
            *(int *)param_1[1] = *param_1;
        }
    }
    *param_1 = 0;
    param_1[1] = 0;
    return;
}

void FUN_004168f0(int param_1)

{
    int iVar1;

    iVar1 = FUN_00414fe0();
    if (param_1 == iVar1)
    {
        FUN_00414eb0(0);
    }
    iVar1 = FUN_00414ff0();
    if (param_1 == iVar1)
    {
        FUN_00414f00(0);
    }
    iVar1 = FUN_00415000();
    if (param_1 == iVar1)
    {
        FUN_00414f70(0);
    }
    return;
}

undefined_32 FUN_00416930(int param_1)

{
    uint uVar1;
    DWORD DVar2;
    uint uVar3;
    int iVar4;
    int iVar5;
    int iVar6;

    if (DAT_004b5d84 == -1)
    {
        DAT_004b5d84 = timeGetTime();
    }
    DVar2 = timeGetTime();
    DAT_004d87a8 = 0;
    if ((*(uint *)(param_1 + 0x20) & 1) != 0)
    {
        uVar1 = *(uint *)(param_1 + 0x50);
        if (uVar1 != 0)
        {
            uVar3 = DVar2 - DAT_004b5d84;
            if (uVar1 < DVar2 - DAT_004b5d84)
            {
                uVar3 = uVar1;
            }
            *(uint *)(param_1 + 0x50) = uVar1 - uVar3;
            return DAT_004d87a8;
        }
        iVar4 = *(int *)(param_1 + 0x24) - *(int *)(param_1 + 0x48);
        iVar6 = *(int *)(param_1 + 0x28) - *(int *)(param_1 + 0x4c);
        if ((iVar4 == 0) && (iVar6 == 0))
        {
            *(uint *)(param_1 + 0x20) = *(uint *)(param_1 + 0x20) & 0xfffffffe;
            FUN_004151a0(param_1, 0x48, 0, 1);
            return DAT_004d87a8;
        }
        DAT_004d87a8 = 1;
        iVar5 = iVar4;
        if (iVar4 != 0)
        {
            iVar5 = iVar4 / 10;
            if (iVar4 / 10 == 0)
            {
                iVar5 = ((-1 < iVar4) - 1 & 0xfffffffe) + 1;
            }
        }
        iVar4 = iVar6;
        if (iVar6 != 0)
        {
            iVar4 = iVar6 / 10;
            if (iVar6 / 10 == 0)
            {
                iVar4 = ((-1 < iVar6) - 1 & 0xfffffffe) + 1;
            }
        }
        FUN_00414b60(param_1, *(int *)(param_1 + 0x24) - iVar5, *(int *)(param_1 + 0x28) - iVar4);
    }
    return DAT_004d87a8;
}

void FUN_00416a40(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;

    if (param_2 == 9)
    {
        iVar4 = 0;
        iVar2 = param_1;
        do
        {
            iVar1 = *(int *)(iVar2 + 4);
            if (iVar1 == 0)
            {
                iVar1 = FUN_00414df0(iVar2);
            }
            if ((*(byte *)(iVar1 + 0x20) & 4) == 0)
            {
                iVar4 = iVar1;
            }
            iVar2 = FUN_00414e80(iVar1);
            if (iVar2 == 0)
            {
                iVar4 = 0;
            }
            if ((*(uint *)(iVar1 + 0x20) & 0x100) != 0)
            {
                iVar4 = 0;
            }
            if (iVar1 == param_1)
            {
                iVar4 = iVar1;
            }
            iVar2 = iVar1;
        } while (iVar4 == 0);
        goto LAB_00416b93;
    }
    if ((((param_2 != 0x25) && (param_2 != 0x27)) && (param_2 != 0x26)) && (iVar4 = param_1, param_2 != 0x28))
        goto LAB_00416b93;
    iVar4 = FUN_0041b380(param_1);
    if (iVar4 == 0)
    {
        return;
    }
    if ((param_2 == 0x27) || (param_2 == 0x28))
    {
        iVar4 = FUN_0041b3c0(param_1);
        if (iVar4 == 0)
        {
            if (((byte) * (undefined_32 *)(param_1 + 0x18) & 0xc) == 0xc)
            {
                iVar4 = *(int *)(param_1 + 8);
            }
            else
            {
                iVar4 = FUN_00414df0(param_1);
                iVar2 = FUN_0041b380(iVar4);
                if (iVar2 != 0)
                    goto LAB_00416b7a;
            }
        LAB_00416b70:
            iVar4 = FUN_0041b3c0(iVar4);
        }
    }
    else
    {
        if ((param_2 != 0x25) && (iVar4 = 0, param_2 != 0x26))
            goto LAB_00416b93;
        iVar4 = FUN_0041b3f0(param_1);
        if (iVar4 == 0)
        {
            if (((byte) * (undefined_32 *)(param_1 + 0x18) & 0xc) == 0xc)
            {
                iVar4 = FUN_0041b3f0(*(undefined_32 *)(param_1 + 8));
                if (iVar4 == 0)
                {
                    iVar4 = *(int *)(param_1 + 8);
                    goto LAB_00416b70;
                }
            }
            else
            {
                iVar4 = FUN_00414e10(param_1);
                iVar2 = FUN_0041b380(iVar4);
                if (iVar2 == 0)
                {
                    iVar4 = FUN_0041b3f0(iVar4);
                }
            }
        }
    }
LAB_00416b7a:
    if ((((byte) * (undefined_32 *)(iVar4 + 0x18) & 5) == 5) && (*(int *)(iVar4 + 0xc) != 0))
    {
        iVar4 = *(int *)(iVar4 + 0xc);
    }
LAB_00416b93:
    if ((iVar4 != 0) && (FUN_00414f10(iVar4, 1), ((byte) * (undefined_32 *)(iVar4 + 0x18) & 0xc) == 0xc))
    {
        uVar3 = FUN_004136f0(*(undefined_32 *)(iVar4 + 8), *(undefined_32 *)(iVar4 + 0x4d4), 1);
        FUN_00413610(uVar3);
    }
    return;
}

void FUN_00416bd0(void)

{
    int local_8;
    int local_4;

    local_8 = DAT_00ec875c;
    local_4 = DAT_00ec8764;
    FUN_00416cc0(DAT_00ec875c, DAT_00ec8764, &local_8, &local_4);
    if (local_8 != DAT_004d79f4)
    {
        if ((local_8 < 0) && (DAT_004d79f4 < 0))
        {
            FUN_00416d70(0x25, local_8 == -2);
        }
        if (((local_8 != DAT_004d79f4) && (0 < local_8)) && (0 < DAT_004d79f4))
        {
            FUN_00416d70(0x27, local_8 == 1);
        }
    }
    if (local_4 != DAT_004d7c58)
    {
        if ((local_4 < 0) && (DAT_004d7c58 < 0))
        {
            FUN_00416d70(0x26, local_4 == -2);
        }
        if (((local_4 != DAT_004d7c58) && (0 < local_4)) && (0 < DAT_004d7c58))
        {
            FUN_00416d70(0x28, local_4 == 1);
        }
    }
    DAT_004d79f4 = local_8;
    DAT_004d7c58 = local_4;
    return;
}

void FUN_00416cc0(float param_1, float param_2, undefined_32 *param_3, undefined_32 *param_4)

{
    if ((param_3 != NULL) && (param_4 != NULL))
    {
        if (0.0 <= param_1)
        {
            if (param_1 <= 0.5)
            {
                *param_3 = 2;
            }
            else
            {
                *param_3 = 1;
            }
        }
        else if (-0.5 <= param_1)
        {
            *param_3 = -1;
        }
        else
        {
            *param_3 = 0xfffffffe;
        }
        if (param_2 < 0.0)
        {
            if (param_2 < -0.5)
            {
                *param_4 = 0xfffffffe;
                return;
            }
            *param_4 = -1;
            return;
        }
        if (0.5 < param_2)
        {
            *param_4 = 1;
            return;
        }
        *param_4 = 2;
    }
    return;
}

void FUN_00416d70(undefined_32 param_1, undefined_32 param_2)

{
    FUN_00415640(param_1, param_2);
    return;
}

undefined_32 *FUN_00416d90(undefined_32 param_1, undefined_32 param_2, int param_3, undefined_32 param_4,
                           undefined_32 param_5, int param_6, int param_7, code *param_8, undefined_32 param_9)

{
    undefined_32 *puVar1;
    undefined_32 uVar2;
    uint uVar3;
    int iVar4;
    undefined_32 *puVar5;

    uVar3 = (param_7 + param_6) * 4 + 0x15c0;
    puVar1 = (undefined_32 *)_malloc(uVar3);
    puVar5 = puVar1;
    MEMSET(uVar3, puVar5, 0, uVar3 >> 2)
    for (iVar4 = 0; iVar4 != 0; iVar4 = iVar4 + -1)
    {
        *(undefined_8 *)puVar5 = 0;
        puVar5 = (undefined_32 *)((int)puVar5 + 1);
    }
    if (param_8 == (code *)0x0)
    {
        param_8 = FUN_00415850;
    }
    uVar2 = FUN_004174e0(puVar1[0x135], param_4);
    puVar1[0x135] = uVar2;
    puVar1[7] = param_2;
    puVar1[8] = param_5;
    puVar1[0x10] = param_6;
    puVar1[0xf] = param_7;
    puVar1[0x11] = puVar1 + param_7 + 0x15c;
    puVar1[4] = param_8;
    puVar1[5] = param_9;
    puVar1[0x137] = 0;
    FUN_00415810(puVar1, 0, 0, 0x27f, 0x1df);
    FUN_00414be0(puVar1, 0xb7, 0xf5, 0xff, 0xff);
    FUN_00414ca0(puVar1, 0xb7, 0xf5, 0xff, 0xff);
    FUN_00414c10(puVar1, 0xb7, 0xf5, 0xff, 0xff);
    FUN_00414c40(puVar1, 0xff, 0xff, 0xff, 0xff);
    FUN_00414c70(puVar1, 0xff, 0xff, 0xff, 0xff);
    FUN_00414b80(puVar1, param_4, 0);
    if (param_3 == -1)
    {
        param_3 = 0;
    }
    FUN_004157d0(puVar1, param_3);
    FUN_00416840(param_1, puVar1);
    FUN_004151a0(puVar1, 0xf, 0, 0);
    return puVar1;
}

void FUN_00416f20(int param_1, int param_2, int param_3)

{
    *(int *)(param_1 + 0x34) = param_2;
    *(int *)(param_1 + 0x2c) = *(int *)(param_1 + 0x24) + -1 + param_2;
    *(int *)(param_1 + 0x38) = param_3;
    *(int *)(param_1 + 0x30) = *(int *)(param_1 + 0x28) + -1 + param_3;
    return;
}

void FUN_00416f50(int param_1, int param_2, int param_3)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    uint uVar4;

    iVar2 = param_2 - *(int *)(param_1 + 0x24);
    iVar3 = param_3 - *(int *)(param_1 + 0x28);
    *(int *)(param_1 + 0x2c) = (*(int *)(param_1 + 0x2c) - *(int *)(param_1 + 0x24)) + param_2;
    *(int *)(param_1 + 0x24) = param_2;
    uVar4 = 0;
    *(int *)(param_1 + 0x30) = (*(int *)(param_1 + 0x30) - *(int *)(param_1 + 0x28)) + param_3;
    *(int *)(param_1 + 0x28) = param_3;
    if (*(int *)(param_1 + 0x5c) != 0)
    {
        piVar1 = (int *)(param_1 + 0x7c);
        do
        {
            piVar1[-2] = piVar1[-2] + iVar2;
            *piVar1 = *piVar1 + iVar2;
            piVar1[-1] = piVar1[-1] + iVar3;
            uVar4 = uVar4 + 1;
            piVar1[1] = piVar1[1] + iVar3;
            piVar1 = piVar1 + 0xe;
        } while (uVar4 < *(uint *)(param_1 + 0x5c));
    }
    return;
}

void FUN_00416fd0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    int *piVar1;
    int iVar2;

    iVar2 = 0;
    piVar1 = &DAT_004d7c68;
    do
    {
        if (*piVar1 == 0)
        {
            (&DAT_004d7c68)[iVar2 * 2] = param_1;
            (&DAT_004d7c6c)[iVar2 * 2] = param_2;
            (&DAT_004d79f8)[iVar2] = param_3;
            return;
        }
        piVar1 = piVar1 + 2;
        iVar2 = iVar2 + 1;
    } while ((int)piVar1 < 0x4d8110);
    return;
}

// 00417010
undefined_32 __get_fname(int param_1)

{
    int *piVar1;
    int iVar2;

    iVar2 = 0;
    piVar1 = &DAT_004d7c6c;
    do
    {
        if (*piVar1 == param_1)
        {
            return (&DAT_004d7c68)[iVar2 * 2];
        }
        piVar1 = piVar1 + 2;
        iVar2 = iVar2 + 1;
    } while ((int)piVar1 < 0x4d8114);
    return 0;
}

int FUN_00417040(void)

{
    int iVar1;
    int *piVar2;

    iVar1 = 0xfb;
    piVar2 = &DAT_00e9d9dc;
    do
    {
        if (*piVar2 == 0)
        {
            return iVar1;
        }
        piVar2 = piVar2 + 8;
        iVar1 = iVar1 + 1;
    } while ((int)piVar2 < 0xe9ec5c);
    return 0;
}

void FUN_00417060(int param_1)

{
    if (param_1 != 0)
    {
        do
        {
            if (*(int *)(param_1 + 0xc) != 0)
            {
                FUN_00417060(*(int *)(param_1 + 0xc));
            }
            FUN_00412f60(param_1);
            param_1 = *(int *)(param_1 + 4);
        } while (param_1 != 0);
    }
    return;
}

void FUN_00417090(void)

{
    int iVar1;
    int *piVar2;
    undefined_32 *puVar3;
    uint uVar4;
    int *local_4;

    local_4 = &DAT_004d79f8;
    piVar2 = &DAT_004d7c68;
    do
    {
        if ((*local_4 != 0) && (iVar1 = *piVar2, iVar1 != 0))
        {
            uVar4 = 0;
            if (*(short *)(iVar1 + 0xc) != 0)
            {
                puVar3 = (undefined_32 *)(*(int *)(iVar1 + 0x10) + 4);
                do
                {
                    FUN_0048eac0(*puVar3);
                    puVar3 = puVar3 + 2;
                    uVar4 = uVar4 + 1;
                } while (uVar4 < (uint)(int)*(short *)(iVar1 + 0xc));
            }
            _free(*(undefined_32 *)(iVar1 + 0x10));
            _free(iVar1);
        }
        *piVar2 = 0;
        piVar2[1] = 0;
        *local_4 = 0;
        piVar2 = piVar2 + 2;
        local_4 = local_4 + 1;
    } while ((int)piVar2 < 0x4d8110);
    return;
}

void FUN_00417120(undefined_32 param_1, int *param_2, int *param_3)

{
    short *psVar1;

    psVar1 = (short *)__get_fname(param_1);
    if (psVar1 != NULL)
    {
        if (param_2 != NULL)
        {
            *param_2 = (int)*psVar1;
        }
        if (param_3 != NULL)
        {
            *param_3 = (int)psVar1[1];
        }
    }
    return;
}

void FUN_00417150(undefined_32 param_1, undefined_32 *param_2)

{
    int *piVar1;
    int *piVar2;

    if (param_2 != NULL)
    {
        piVar1 = param_2 + 3;
        piVar2 = param_2 + 2;
        param_2[1] = 0;
        *param_2 = 0;
        *piVar1 = 0;
        *piVar2 = 0;
        FUN_00417120(param_1, piVar2, piVar1);
        *piVar2 = *piVar2 + -1;
        *piVar1 = *piVar1 + -1;
    }
    return;
}

void FUN_004171a0(int param_1, int param_2, int *param_3)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;

    iVar5 = param_2;
    iVar4 = param_1;
    if (param_1 != 0)
    {
        iVar1 = param_1 + param_2 * 0x38;
        FUN_00417120(*(undefined_32 *)(param_1 + 100 + param_2 * 0x38), &param_1, &param_2);
        *(int *)(iVar1 + 0x84) = param_1;
        *(int *)(iVar1 + 0x88) = param_2;
        if (param_3 != NULL)
        {
            iVar2 = param_3[3];
            iVar3 = param_3[1];
            *(float *)(iVar1 + 0x6c) = (float)((param_3[2] - *param_3) + 1) / (float)param_1;
            *(float *)(iVar4 + (iVar5 + 2) * 0x38) = (float)((iVar2 - iVar3) + 1) / (float)param_2;
            *(int *)(iVar1 + 0x74) = *param_3;
            *(int *)(iVar1 + 0x78) = param_3[1];
            *(int *)(iVar1 + 0x7c) = param_3[2];
            *(int *)(iVar1 + 0x80) = param_3[3];
            return;
        }
        *(undefined_32 *)(iVar1 + 0x74) = *(undefined_32 *)(iVar4 + 0x24);
        *(undefined_32 *)(iVar1 + 0x78) = *(undefined_32 *)(iVar4 + 0x28);
        *(undefined_32 *)(iVar1 + 0x7c) = *(undefined_32 *)(iVar4 + 0x2c);
        *(undefined_32 *)(iVar1 + 0x80) = *(undefined_32 *)(iVar4 + 0x30);
        *(int *)(iVar1 + 0x7c) = param_1 + -1 + *(int *)(iVar4 + 0x24);
        *(int *)(iVar1 + 0x80) = *(int *)(iVar4 + 0x28) + -1 + param_2;
    }
    return;
}

void FUN_004172a0(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    FUN_004172c0(param_1 + 0x24, param_2, param_3);
    return;
}

undefined_32 FUN_004172c0(int *param_1, int param_2, int param_3)

{
    if ((((*param_1 <= param_2) && (param_2 <= param_1[2])) && (param_1[1] <= param_3)) && (param_3 <= param_1[3]))
    {
        return 1;
    }
    return 0;
}

void __fastcall FUN_004172f0(undefined_32 param_1_00, uint param_2, int param_1)

{
    undefined_8 uVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;

    uVar3 = *(uint *)(param_1 + 0x20);
    if ((uVar3 & 2) == 0)
    {
        if ((uVar3 & 0x20) != 0)
        {
            FUN_00414be0(param_1, *(undefined_8 *)(param_1 + 0x4d0),
                         uVar3 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4d1),
                         param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4d2), *(undefined_8 *)(param_1 + 0x4d3));
            FUN_00418cb0(param_1, 1);
            return;
        }
        if ((uVar3 & 0x10) != 0)
        {
            FUN_00414be0(param_1, param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c8),
                         *(undefined_8 *)(param_1 + 0x4c9), uVar3 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4ca),
                         param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4cb));
            FUN_00418cb0(param_1, 1);
            return;
        }
        uVar2 = uVar3 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c7);
        uVar1 = *(undefined_8 *)(param_1 + 0x4c6);
        uVar4 = param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c5);
        uVar3 = uVar3 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c4);
    }
    else
    {
        uVar2 = uVar3 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4cf);
        uVar1 = *(undefined_8 *)(param_1 + 0x4ce);
        uVar4 = param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4cd);
        uVar3 = uVar3 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4cc);
    }
    FUN_00414be0(param_1, uVar3, uVar4, uVar1, uVar2);
    FUN_00418cb0(param_1, 0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004173c0(int param_1, undefined_32 param_2, int param_3, undefined_32 param_4, undefined_32 param_5,
                  undefined_32 param_6, undefined_32 param_7, char *param_8, undefined_32 param_9,
                  undefined_32 param_10, int param_11)

{
    char cVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    undefined_32 *puVar5;
    char *pcVar6;
    char *pcVar7;
    char *pcVar8;
    undefined_32 *puVar9;
    char local_400[1024];

    if (param_8 != NULL)
    {
        if (param_11 != 0)
        {
            param_7 = 100;
        }
        _sprintf(local_400, &DAT_004b6670, param_1);
        uVar2 = -1;
        do
        {
            pcVar6 = param_8;
            if (uVar2 == 0)
                break;
            uVar2 = uVar2 - 1;
            pcVar6 = param_8 + 1;
            cVar1 = *param_8;
            param_8 = pcVar6;
        } while (cVar1 != '\0');
        uVar2 = ~uVar2;
        iVar3 = -1;
        pcVar7 = local_400;
        do
        {
            pcVar8 = pcVar7;
            if (iVar3 == 0)
                break;
            iVar3 = iVar3 + -1;
            pcVar8 = pcVar7 + 1;
            cVar1 = *pcVar7;
            pcVar7 = pcVar8;
        } while (cVar1 != '\0');
        puVar5 = (undefined_32 *)(pcVar6 + -uVar2);
        puVar9 = (undefined_32 *)(pcVar8 + -1);
        QMEMCPY(uVar4, puVar5, puVar9, uVar2 >> 2)
        for (uVar2 = uVar2 & 3; uVar2 != 0; uVar2 = uVar2 - 1)
        {
            *(undefined_8 *)puVar9 = *(undefined_8 *)puVar5;
            puVar5 = (undefined_32 *)((int)puVar5 + 1);
            puVar9 = (undefined_32 *)((int)puVar9 + 1);
        }
        if (param_1 == 6)
        {
            param_3 = param_3 + 6;
        }
        create_text_entry_0(param_2, param_3, param_4, param_5, param_6, param_7, local_400);
        FUN_00450310(param_10);
        _DAT_004b5d88 = _DAT_004b5d8c + _DAT_004b5d88;
        if (255.0 < _DAT_004b5d88)
        {
            _DAT_004b5d8c = -1.0;
        }
        if (_DAT_004b5d88 < 40.0)
        {
            _DAT_004b5d8c = 0.5;
        }
    }
    return;
}

// some str_realloc ?
char *FUN_004174e0(int param_1, char *param_2)

{
    char cVar1;
    uint uVar2;
    size_t _Count;
    char *pcVar3;

    pcVar3 = NULL;
    if (param_1 != 0)
    {
        _free(param_1);
    }
    if (param_2 != NULL)
    {
        uVar2 = -1;
        pcVar3 = param_2;
        do
        {
            if (uVar2 == 0)
                break;
            uVar2 = uVar2 - 1;
            cVar1 = *pcVar3;
            pcVar3 = pcVar3 + 1;
        } while (cVar1 != '\0');
        _Count = ~uVar2 - 1;
        pcVar3 = (char *)_malloc(~uVar2);
        _strncpy(pcVar3, param_2, _Count);
        pcVar3[_Count] = '\0';
    }
    return pcVar3;
}

void FUN_00417540(int param_1, uint param_2, int *param_3, uint param_4, undefined_32 param_5, undefined_32 param_6,
                  undefined_32 param_7, undefined_32 param_8, undefined_32 param_9, undefined_32 param_10,
                  undefined_32 param_11)

{
    int iVar1;
    int iVar2;
    uint unaff_EBP;
    uint uVar3;
    uint uVar4;

    if (param_2 == 0)
    {
        return;
    }
    iVar1 = FUN_0042de30(param_2, (&DAT_00e99720)[param_1]);
    iVar2 = FUN_0042df70(param_2, (&DAT_00e99720)[param_1]);
    uVar4 = param_2 & 0xffff0000 | (uint) * (ushort *)param_3;
    uVar3 = unaff_EBP & 0xffff0000 | (uint) * (ushort *)(param_3 + 1);
    if ((param_4 & 0x40000) == 0)
    {
        if ((param_4 & 0x10000) == 0)
        {
            if ((param_4 & 0x20000) == 0)
            {
                if ((param_4 & 0x80000) != 0)
                {
                    uVar4 = param_2 & 0xffff0000 | (uint)(ushort)(*(ushort *)(param_3 + 2) - (short)iVar1);
                }
            }
            else
            {
                uVar3 = uVar3 + (((param_3[3] - iVar2) - param_3[1]) + 1U >> 1);
            }
        }
        else
        {
            uVar4 = uVar4 + (((param_3[2] - iVar1) - *param_3) + 1U >> 1);
        }
    }
    else
    {
        uVar4 = uVar4 + (((param_3[2] - iVar1) - *param_3) + 1U >> 1);
        uVar3 = uVar3 + (((param_3[3] - iVar2) - param_3[1]) + 1U >> 1);
    }
    if ((param_4 & 0x100000) == 0)
    {
        if ((param_4 & 0x200000) == 0)
            goto LAB_00417633;
        iVar1 = FUN_0042de30(&DAT_004b51b8, (&DAT_00e99720)[param_1]);
    }
    else
    {
        iVar1 = FUN_0042de30(&DAT_004b51b8, (&DAT_00e99720)[param_1]);
        iVar1 = iVar1 * 5;
    }
    uVar4 = uVar4 + iVar1;
LAB_00417633:
    FUN_004173c0(param_1, uVar4, uVar3, param_5, param_6, param_7, param_8, param_2, param_9, param_10, param_11);
    return;
}

undefined_32 FUN_00417670(int param_1)

{
    if ((param_1 != 0) && (param_1 == DAT_004d8794))
    {
        return 1;
    }
    return 0;
}

void FUN_00417690(int param_1, int param_2, int param_3, int param_4, int param_5)

{
    uint uVar1;

    if (param_3 == 0)
    {
        uVar1 = *(uint *)(param_2 + 0x20) & 0xfffffffd;
    }
    else
    {
        uVar1 = *(uint *)(param_2 + 0x20) | 2;
    }
    *(uint *)(param_2 + 0x20) = uVar1;
    if (param_5 != 0)
    {
        FUN_004172f0(param_2);
    }
    if (param_4 != 0)
    {
        FUN_004151a0(*(undefined_32 *)(param_2 + 8), (param_1 != 1) + 1000, *(undefined_32 *)(param_2 + 0x1c), param_2);
    }
    return;
}

void FUN_004176f0(undefined_32 *param_1, undefined_32 param_2, int param_3)

{
    int iVar1;
    int iVar2;

    iVar1 = FUN_0042de30(param_2, (&DAT_00e99720)[param_3]);
    iVar2 = FUN_0042df70(param_2, (&DAT_00e99720)[param_3]);
    param_1[2] = iVar1 + 0x13;
    param_1[1] = 0;
    *param_1 = 0;
    param_1[3] = iVar2 + 0x1d;
    return;
}

void FUN_00417740(undefined_32 *param_1, undefined_32 param_2, int param_3)

{
    int iVar1;

    FUN_0042de30(param_2, (&DAT_00e99720)[param_3]);
    FUN_0042df70(param_2, (&DAT_00e99720)[param_3]);
    iVar1 = __ftol();
    param_1[1] = 0;
    *param_1 = 0;
    param_1[2] = iVar1 * 8 + 0x3b;
    param_1[3] = iVar1 + 0x4f;
    return;
}

uint FUN_004177b0(undefined_32 *param_1, int param_2, int param_3, int param_4, int param_5)

{
    int iVar1;
    uint uVar2;
    uint uVar3;
    int local_4;

    uVar2 = 0;
    local_4 = 0;
    uVar3 = 0x96;
    if (param_2 != 0)
    {
        iVar1 = FUN_0042de30(param_2, (&DAT_00e99720)[param_5]);
        if (0x95 < (uint)(iVar1 * 3))
        {
            uVar3 = iVar1 * 3;
        }
        iVar1 = FUN_0042df70(param_2, (&DAT_00e99720)[param_5]);
        if (-1 < iVar1)
        {
            local_4 = FUN_0042df70(param_2, (&DAT_00e99720)[param_5]);
        }
        uVar2 = 1;
    }
    if (param_3 != 0)
    {
        iVar1 = FUN_0042de30(param_3, (&DAT_00e99720)[param_5]);
        if (uVar3 <= (uint)(iVar1 * 3))
        {
            uVar3 = iVar1 * 3;
        }
        iVar1 = FUN_0042df70(param_3, (&DAT_00e99720)[param_5]);
        if (local_4 <= iVar1)
        {
            local_4 = FUN_0042df70(param_3, (&DAT_00e99720)[param_5]);
        }
        uVar2 = uVar2 + 1;
    }
    if (param_4 != 0)
    {
        iVar1 = FUN_0042de30(param_4, (&DAT_00e99720)[param_5]);
        if (uVar3 <= (uint)(iVar1 * 3))
        {
            uVar3 = iVar1 * 3;
        }
        iVar1 = FUN_0042df70(param_4, (&DAT_00e99720)[param_5]);
        if (local_4 <= iVar1)
        {
            local_4 = FUN_0042df70(param_4, (&DAT_00e99720)[param_5]);
        }
        uVar2 = uVar2 + 1;
    }
    if (uVar2 < 3)
    {
        iVar1 = uVar3 * uVar2;
    }
    else
    {
        iVar1 = uVar3 << 1;
    }
    local_4 = local_4 + 0x14;
    if (2 < uVar2)
    {
        local_4 = local_4 * 2;
    }
    param_1[2] = iVar1 + uVar2 * 0x14 + -1;
    param_1[1] = 0;
    *param_1 = 0;
    param_1[3] = local_4 + -1;
    return uVar3;
}

void FUN_00417900(int *param_1, int param_2, int param_3)

{
    int iVar1;
    int iVar2;

    if (param_1 != NULL)
    {
        iVar1 = param_1[1];
        iVar2 = *param_1;
        *param_1 = param_2;
        param_1[1] = param_3;
        param_1[2] = (param_1[2] - iVar2) + param_2;
        param_1[3] = (param_1[3] - iVar1) + param_3;
    }
    return;
}

void FUN_00417be0(int param_1, int param_2, undefined_32 param_3, undefined_32 param_4)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    uint uVar5;

    iVar4 = param_2;
    iVar3 = param_1;
    if (param_2 == 9)
    {
        FUN_00417120(*(undefined_32 *)(param_1 + 100), &param_1, &param_2);
        uVar5 = FUN_0042df70(*(undefined_32 *)(iVar3 + 0x4d4), (&DAT_00e99720)[*(int *)(iVar3 + 0x4dc)]);
        uVar1 = iVar3 + 0x4e0;
        uVar2 = *(uint *)(iVar3 + 0x4d4) & 0xffffff00;
        FUN_004173c0(*(undefined_32 *)(iVar3 + 0x4dc),
                     uVar5 & 0xffff0000 | (uint)(ushort)(*(short *)(iVar3 + 0x24) + (short)param_1),
                     ((uVar1 & 0xffff0000 | (uint)(ushort)(*(short *)(iVar3 + 0x28) + (short)param_2)) - uVar5) + -8,
                     uVar2 | *(byte *)(iVar3 + 0x4c0), uVar1 & 0xffffff00 | (uint) * (byte *)(iVar3 + 0x4c1),
                     uVar2 | *(byte *)(iVar3 + 0x4c2), uVar1 & 0xffffff00 | (uint) * (byte *)(iVar3 + 0x4c3),
                     *(uint *)(iVar3 + 0x4d4), 0, uVar1, *(uint *)(iVar3 + 0x20) & 0x100);
    }
    FUN_00415850(iVar3, iVar4, param_3, param_4);
    return;
}

void FUN_00417ca0(int param_1)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;
    int iVar5;
    bool bVar6;
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    uVar3 = 0;
    iVar5 = 0;
    for (iVar1 = *(int *)(param_1 + 0xc); iVar1 != 0; iVar1 = *(int *)(iVar1 + 4))
    {
        if (((byte) * (undefined_32 *)(iVar1 + 0x18) & 0xc) == 0xc)
        {
            FUN_00414e60(iVar1, 0);
            *(uint *)(iVar1 + 0x528) = uVar3;
            uVar3 = uVar3 + 1;
            if (200 < uVar3)
            {
                iVar5 = iVar5 + 1;
            }
        }
    }
    iVar1 = *(int *)(param_1 + 0xc);
    for (; iVar5 != 0; iVar5 = iVar5 + -1)
    {
        iVar4 = *(int *)(iVar1 + 4);
        FUN_00414d00(iVar1);
        iVar1 = iVar4;
    }
    iVar1 = *(int *)(param_1 + 0x504);
    iVar5 = *(int *)(param_1 + 0xc);
    bVar6 = iVar1 != 0;
    if (iVar5 != 0)
    {
        do
        {
            if (iVar1 == 0)
                break;
            if (((byte) * (undefined_32 *)(iVar5 + 0x18) & 0xc) == 0xc)
            {
                iVar1 = iVar1 + -1;
            }
            iVar5 = *(int *)(iVar5 + 4);
        } while (iVar5 != 0);
        if (iVar5 != 0)
        {
            iVar1 = *(int *)(param_1 + 0x510);
            do
            {
                if (*(int *)(param_1 + 0x30) + 0x14 <= iVar1)
                    break;
                if (((byte) * (undefined_32 *)(iVar5 + 0x18) & 0xc) == 0xc)
                {
                    iVar4 = (*(int *)(iVar5 + 0x30) - *(int *)(iVar5 + 0x28)) + 1;
                    if (*(int *)(param_1 + 0x518) <= iVar4 + iVar1)
                    {
                        bVar6 = true;
                    }
                    if (iVar1 < *(int *)(param_1 + 0x518))
                    {
                        if ((*(uint *)(iVar5 + 0x508) & 0x20000) == 0)
                        {
                            if ((*(uint *)(iVar5 + 0x508) & 0x10000) == 0)
                            {
                                iVar2 = *(int *)(param_1 + 0x50c);
                            }
                            else
                            {
                                iVar2 = (((*(int *)(iVar5 + 0x24) - *(int *)(iVar5 + 0x2c)) + *(int *)(param_1 + 0x514))
                                             - *(int *)(param_1 + 0x50c)
                                         >> 1)
                                    + *(int *)(param_1 + 0x50c);
                            }
                            FUN_00414b60(iVar5, iVar2, iVar1);
                        }
                        if (((*(uint *)(iVar5 + 0x508) & 0x80000) != 0)
                            && ((*(uint *)(param_1 + 0x508) & 0x100000) == 0))
                        {
                            local_8 = *(int *)(param_1 + 0x514) + 10;
                            local_10 = *(int *)(param_1 + 0x50c) + -10;
                            local_c = *(int *)(iVar5 + 0x28) + -10;
                            local_4 = *(int *)(iVar5 + 0x30) + -10;
                            FUN_0041aa90(param_1, iVar5, &local_10);
                        }
                        FUN_00414e60(iVar5, 1);
                    }
                    iVar1 = iVar1 + *(int *)(param_1 + 0x524) + iVar4;
                }
                iVar5 = *(int *)(iVar5 + 4);
            } while (iVar5 != 0);
            if ((bVar6) && ((*(uint *)(param_1 + 0x508) & 0x200000) == 0))
            {
                iVar1 = FUN_00414d60(param_1, 6);
                if (iVar1 == 0)
                {
                    local_10 = *(int *)(param_1 + 0x50c);
                    iVar5 = *(int *)(param_1 + 0x510) + -0xf;
                    FUN_00413a90(param_1, 0, *(int *)(param_1 + 0x514) + -0x20, iVar5,
                                 (*(int *)(param_1 + 0x518) - iVar5) + 0x10, 0x10000, 0);
                }
                FUN_00414e60(iVar1, 1);
            }
            for (iVar1 = *(int *)(param_1 + 0xc); iVar1 != 0; iVar1 = *(int *)(iVar1 + 4))
            {
                if (((byte) * (undefined_32 *)(iVar1 + 0x18) & 0xc) == 0xc)
                {
                    FUN_00415810(iVar1, *(undefined_32 *)(param_1 + 0x50c), *(int *)(param_1 + 0x510) + -2,
                                 *(undefined_32 *)(param_1 + 0x514), *(int *)(param_1 + 0x518) + 2);
                }
            }
        }
    }
    return;
}

void FUN_00417f00(int *param_1, int *param_2)

{
    if ((param_1 != NULL) && (param_2 != NULL))
    {
        if (*param_1 < *param_2)
        {
            *param_1 = *param_2;
        }
        if (param_1[1] < param_2[1])
        {
            param_1[1] = param_2[1];
        }
        if (param_2[2] < param_1[2])
        {
            param_1[2] = param_2[2];
        }
        if (param_2[3] < param_1[3])
        {
            param_1[3] = param_2[3];
        }
    }
    return;
}

void FUN_00417fe0(int param_1, char *param_2, int param_3)

{
    char cVar1;
    int iVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    char *pcVar7;
    char *pcVar8;

    uVar5 = -1;
    pcVar8 = param_2;
    do
    {
        if (uVar5 == 0)
            break;
        uVar5 = uVar5 - 1;
        cVar1 = *pcVar8;
        pcVar8 = pcVar8 + 1;
    } while (cVar1 != '\0');
    if (~uVar5 - 1 == 0)
    {
        return;
    }
    uVar4 = FUN_0042de30(param_2, (&DAT_00e99720)[*(int *)(param_1 + 0x4dc)]);
    FUN_0042df70(param_2, (&DAT_00e99720)[*(int *)(param_1 + 0x4dc)]);
    iVar2 = *(int *)(param_1 + 0x50c);
    iVar3 = *(int *)(param_1 + 0x514);
    while (true)
    {
        cVar1 = *param_2;
        pcVar8 = NULL;
        pcVar7 = param_2;
        for (uVar6 = 0; (cVar1 != '\0' && (uVar6 < ((iVar3 - iVar2) + 1U) / (uVar4 / (~uVar5 - 1) + 1)));
             uVar6 = uVar6 + 1)
        {
            if (cVar1 == ' ')
            {
                pcVar8 = pcVar7;
            }
            cVar1 = pcVar7[1];
            pcVar7 = pcVar7 + 1;
        }
        if ((*pcVar7 != '\0') && (pcVar8 != NULL))
        {
            *pcVar8 = '\0';
        }
        FUN_004138f0(param_1, param_2, -(uint)(param_3 != 0) & 0x10000, 0, 0);
        if (*pcVar7 != '\0')
        {
            if (pcVar8 == NULL)
            {
                return;
            }
            *pcVar8 = ' ';
        }
        if (pcVar8 == NULL)
            break;
        if (*pcVar7 == '\0')
        {
            return;
        }
        param_2 = pcVar8 + 1;
    }
    return;
}

void FUN_004180c0(void)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    uint *puVar4;

    uVar2 = __ftol();
    puVar4 = &DAT_004d8164;
    do
    {
        if (puVar4[1] != 0)
        {
            uVar1 = *puVar4;
            uVar3 = uVar2;
            if (uVar1 <= uVar2)
            {
                uVar3 = uVar1;
            }
            *puVar4 = uVar1 - uVar3;
            if (uVar1 - uVar3 == 0)
            {
                *puVar4 = puVar4[-1];
                FUN_004151a0(puVar4[1], 0x45, puVar4[2], 0);
            }
        }
        puVar4 = puVar4 + 4;
    } while ((int)puVar4 < 0x4d8204);
    return;
}

void FUN_00418120(int param_1, int param_2)

{
    char cVar1;
    uint uVar2;
    char *pcVar3;
    undefined_32 uVar4;
    uint uVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    char *pcVar10;
    undefined_32 *puVar11;
    undefined_32 local_400;
    undefined_8 local_1;

    if (param_1 == 0)
    {
        return;
    }
    puVar11 = &local_400;
    MEMSET(iVar9, puVar11, 0, 0x100)
    if (*(char **)(param_1 + 0x4d4) != NULL)
    {
        _strncpy((char *)&local_400, *(char **)(param_1 + 0x4d4), 0x3ff);
        local_1 = 0;
    }
    switch (param_2)
    {
    case 8:
        iVar9 = *(int *)(param_1 + 0x530);
        if (iVar9 == 0)
            break;
        _memcpy(&stack0xfffffbff + iVar9, (int)&local_400 + iVar9, 0x400 - iVar9);
        local_1 = 0;
        *(int *)(param_1 + 0x530) = *(int *)(param_1 + 0x530) + -1;
        goto LAB_004183dd;
    default:
        if (DAT_004d1f9c < 2)
        {
            uVar5 = *(ushort *)(PTR_DAT_004d1d90 + param_2 * 2) & 0x107;
        }
        else
        {
            uVar5 = __isctype(param_2, 0x107);
        }
        if ((uVar5 == 0) && (param_2 != 0x20))
            break;
        uVar5 = *(uint *)(param_1 + 0x534);
        if (0x3ff < uVar5)
        {
            uVar5 = 0x400;
        }
        uVar2 = *(uint *)(param_1 + 0x530);
        if ((uVar5 <= uVar2) || ((param_2 == 0x20 && (uVar2 == 0))))
            break;
        _memcpy((int)&local_400 + uVar2 + 1, (int)&local_400 + uVar2, 0x3ff - uVar2);
        iVar9 = *(int *)(param_1 + 0x530);
        *(char *)((int)&local_400 + iVar9) = (char)param_2;
        *(int *)(param_1 + 0x530) = iVar9 + 1;
    LAB_004183dd:
        puVar11 = &local_400;
    LAB_004183e4:
        FUN_00414b80(param_1, puVar11, 0);
        break;
    case 0xd:
        FUN_00440550(0x46);
        DAT_004d8bd0 = DAT_004d8bd0 | 8;
        FUN_004151a0(param_1, 0x49, 0, *(undefined_32 *)(param_1 + 0x1c));
        FUN_004151a0(*(undefined_32 *)(param_1 + 8), 0xbb9, *(undefined_32 *)(param_1 + 0x1c),
                     *(undefined_32 *)(param_1 + 0x4d4));
        if ((*(uint *)(param_1 + 0x52c) & 0x10000) != 0)
        {
            uVar4 = FUN_004174e0(*(undefined_32 *)(param_1 + 0x4d4), 0);
            *(undefined_32 *)(param_1 + 0x4d4) = uVar4;
            break;
        }
        pcVar10 = *(char **)(param_1 + 0x4d4);
        if (pcVar10 == NULL)
            break;
        pcVar3 = (char *)(*(uint *)(param_1 + 0x52c) & 0x20000);
        goto LAB_004182e4;
    case 0x1b:
        FUN_00440550(0x47);
        FUN_00414b80(param_1, &DAT_004d87d0, *(undefined_32 *)(param_1 + 0x4d8));
        DAT_004d8bd0 = DAT_004d8bd0 | 8;
        FUN_004151a0(*(undefined_32 *)(param_1 + 8), 0xbba, *(undefined_32 *)(param_1 + 0x1c),
                     *(undefined_32 *)(param_1 + 0x4d4));
        break;
    case 0x23:
        pcVar10 = *(char **)(param_1 + 0x4d4);
        pcVar3 = pcVar10;
    LAB_004182e4:
        if (pcVar3 != NULL)
        {
            uVar5 = -1;
            do
            {
                if (uVar5 == 0)
                    break;
                uVar5 = uVar5 - 1;
                cVar1 = *pcVar10;
                pcVar10 = pcVar10 + 1;
            } while (cVar1 != '\0');
            *(uint *)(param_1 + 0x530) = ~uVar5 - 1;
        }
        break;
    case 0x24:
        *(undefined_32 *)(param_1 + 0x530) = 0;
        break;
    case 0x25:
        if (*(int *)(param_1 + 0x530) != 0)
        {
            *(int *)(param_1 + 0x530) = *(int *)(param_1 + 0x530) + -1;
        }
        break;
    case 0x27:
        if (*(char **)(param_1 + 0x4d4) != NULL)
        {
            uVar5 = -1;
            pcVar10 = *(char **)(param_1 + 0x4d4);
            do
            {
                if (uVar5 == 0)
                    break;
                uVar5 = uVar5 - 1;
                cVar1 = *pcVar10;
                pcVar10 = pcVar10 + 1;
            } while (cVar1 != '\0');
            if (*(uint *)(param_1 + 0x530) < ~uVar5 - 1)
            {
                *(uint *)(param_1 + 0x530) = *(uint *)(param_1 + 0x530) + 1;
            }
        }
        break;
    case 0x2e:
        if (*(int *)(param_1 + 0x530) == 0)
        {
            if (*(char **)(param_1 + 0x4d4) == NULL)
                break;
            iVar9 = -1;
            pcVar10 = *(char **)(param_1 + 0x4d4);
            do
            {
                if (iVar9 == 0)
                    break;
                iVar9 = iVar9 + -1;
                cVar1 = *pcVar10;
                pcVar10 = pcVar10 + 1;
            } while (cVar1 != '\0');
            if (iVar9 == -2)
                break;
        }
        *(undefined_32 *)(param_1 + 0x530) = 0;
        puVar11 = NULL;
        goto LAB_004183e4;
    }
    iVar6 = FUN_00418680(*(undefined_32 *)(param_1 + 0x4d4), *(undefined_32 *)(param_1 + 0x4dc), 0,
                         *(undefined_32 *)(param_1 + 0x530));
    iVar9 = *(int *)(param_1 + 0x24);
    iVar7 = FUN_0042de30(&DAT_004b51b8, (&DAT_00e99720)[*(int *)(param_1 + 0x4dc)]);
    iVar8 = FUN_0042df70(&DAT_004b6668, (&DAT_00e99720)[*(int *)(param_1 + 0x4dc)]);
    FUN_00411740(iVar7 * 5 + iVar6 + iVar9,
                 (((*(int *)(param_1 + 0x30) - *(int *)(param_1 + 0x28)) + 1 >> 1) - ((iVar8 << 1) >> 1))
                     + *(int *)(param_1 + 0x28),
                 1, iVar8 << 1);
    return;
}

void FUN_004184d0(void)

{
    float fVar1;
    uint uVar2;
    undefined_16 extraout_var;
    uint uVar3;
    uint local_10;
    uint local_c;
    uint local_8;
    undefined_32 uStack_4;

    uVar2 = __ftol();
    sprite_enable_display(0xfa, 0);
    if (DAT_004d87bc != 0)
    {
        FUN_00417120(0x3f1, &local_10, &local_c);
        sprite_set_pos(0xfa, local_10 & 0xffff0000 | (uint)DAT_004d79f0, CONCAT22(extraout_var, DAT_004d7c4c));
        if (DAT_00ec86c4 == 0x200)
        {
            local_8 = DAT_004d8780;
            fVar1 = (float)(ulonglong)DAT_004d8788 * 1.25;
        }
        else
        {
            local_8 = DAT_004d8788;
            fVar1 = (float)(ulonglong)DAT_004d8788;
        }
        uStack_4 = 0;
        sprite_scale(0xfa, fVar1 / (float)(ulonglong)local_10,
                     (float)(ulonglong)DAT_004d8780 / (float)(ulonglong)local_c);
        sprite_set_color(0xfa, -1, -1, -1, -1);
        uVar3 = DAT_004d8784;
        if (uVar2 <= DAT_004d8784)
        {
            uVar3 = uVar2;
        }
        DAT_004d8784 = DAT_004d8784 - uVar3;
        if (DAT_004d8784 == 0)
        {
            DAT_004d8784 = 0xfa;
            DAT_004d87c0 = (uint)(DAT_004d87c0 == 0);
        }
        sprite_enable_display(0xfa, DAT_004d87c0);
        FUN_004287e0(0xfa, 0x800);
        FUN_004287e0(0xfa, 0x10000);
    }
    return;
}

// WARNING: Type propagation algorithm not settling

char *FUN_00418680(char *param_1, int param_2, uint param_3, int param_4)

{
    char cVar1;
    char *pcVar2;
    int iVar3;
    char *in_EAX;
    uint uVar4;
    byte *pbVar5;
    char *pcVar6;

    iVar3 = param_2;
    if (param_1 == NULL)
    {
        return NULL;
    }
    if (param_2 != -1)
    {
        uVar4 = -1;
        pcVar6 = param_1;
        do
        {
            if (uVar4 == 0)
                break;
            uVar4 = uVar4 - 1;
            cVar1 = *pcVar6;
            pcVar6 = pcVar6 + 1;
        } while (cVar1 != '\0');
        if (~uVar4 - 1 <= param_3)
        {
            return NULL;
        }
        pbVar5 = (byte *)(param_1 + param_3);
        pcVar6 = (char *)(param_4 - param_3);
        in_EAX = NULL;
        pcVar2 = pcVar6;
        while (pcVar6 != NULL)
        {
            pcVar6 = pcVar6 + -1;
            if (*pbVar5 == 0)
            {
                return in_EAX;
            }
            FUN_0042e0e0((uint)pcVar2 & 0xffffff00 | (uint)*pbVar5, (&DAT_00e99720)[iVar3], &param_1, &param_2);
            in_EAX = in_EAX + (int)param_1;
            pbVar5 = pbVar5 + 1;
            pcVar2 = param_1;
        }
    }
    return in_EAX;
}

undefined_32 FUN_00418700(undefined_32 param_1, undefined_32 *param_2, int param_3, int param_4)

{
    int iVar1;
    uint uVar2;
    uint uVar3;
    undefined_32 *puVar4;
    undefined_32 *puVar5;
    undefined_8 auStack_c[4];
    uint local_8;
    undefined_32 uStack_4;

    puVar4 = param_2;
    if (param_4 < 1)
    {
        return 0;
    }
    do
    {
        // PlatformAbstraction->fread
        iVar1 = (**(code **)(DAT_00ecc420 + 0x38))(param_1, &local_8, 1);
        if (iVar1 == 0)
        {
            return -1;
        }
        if ((local_8 & 0x80) == 0)
        {
            iVar1 = (local_8 & 0x7f) + 1;
            param_4 = param_4 - iVar1;
            iVar1 = iVar1 * param_3;
            // PlatformAbstraction->fread
            (**(code **)(DAT_00ecc420 + 0x38))(param_1, puVar4, iVar1);
            puVar4 = (undefined_32 *)((int)puVar4 + iVar1);
        }
        else
        {
            uVar2 = (local_8 & 0x7f) + 1;
            param_4 = param_4 - uVar2;
            switch (param_3)
            {
            case 1:
                // PlatformAbstraction->fread
                (**(code **)(DAT_00ecc420 + 0x38))(param_1, auStack_c, 1);
                puVar5 = puVar4;
                for (uVar3 = uVar2 >> 2; uVar3 != 0; uVar3 = uVar3 - 1)
                {
                    *puVar5 = CONCAT22(CONCAT11(auStack_c[0], auStack_c[0]), CONCAT11(auStack_c[0], auStack_c[0]));
                    puVar5 = puVar5 + 1;
                }
                puVar4 = (undefined_32 *)((int)puVar4 + uVar2);
                for (uVar2 = uVar2 & 3; uVar2 != 0; uVar2 = uVar2 - 1)
                {
                    *(undefined_8 *)puVar5 = auStack_c[0];
                    puVar5 = (undefined_32 *)((int)puVar5 + 1);
                }
                break;
            case 2:
                // PlatformAbstraction->fread
                (**(code **)(DAT_00ecc420 + 0x38))(param_1, &param_2, 2);
                for (; uVar2 != 0; uVar2 = uVar2 - 1)
                {
                    *(undefined_16 *)puVar4 = param_2._0_2_;
                    puVar4 = (undefined_32 *)((int)puVar4 + 2);
                }
                break;
            case 3:
                // PlatformAbstraction->fread
                (**(code **)(DAT_00ecc420 + 0x38))(param_1, auStack_c, 1);
                // PlatformAbstraction->fread
                (**(code **)(DAT_00ecc420 + 0x38))(param_1, &param_2, 2);
                for (; uVar2 != 0; uVar2 = uVar2 - 1)
                {
                    *(undefined_8 *)puVar4 = auStack_c[0];
                    *(undefined_16 *)((int)puVar4 + 1) = param_2._0_2_;
                    puVar4 = (undefined_32 *)((int)puVar4 + 3);
                }
                break;
            case 4:
                // PlatformAbstraction->fread
                (**(code **)(DAT_00ecc420 + 0x38))(param_1, &uStack_4, 4);
                for (; uVar2 != 0; uVar2 = uVar2 - 1)
                {
                    *puVar4 = uStack_4;
                    puVar4 = puVar4 + 1;
                }
            }
        }
    } while (0 < param_4);
    return 0;
}

short *FUN_004188b0(short *param_1, undefined_32 param_2)

{
    short sVar1;
    short *psVar2;
    undefined_32 uVar3;
    ulonglong uVar4;
    ulonglong uVar5;
    short *psVar6;
    short sVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    uint uVar11;
    uint uVar12;
    int iVar13;
    uint uVar14;
    int local_20;
    int local_14;
    int local_c;

    psVar6 = param_1;
    psVar2 = *(short **)(param_1 + 8);
    sVar7 = *psVar2;
    if (sVar7 < 0x21)
    {
        uVar14 = 0x20;
    }
    else if (sVar7 < 0x41)
    {
        uVar14 = 0x40;
    }
    else
    {
        uVar14 = ((0x80 < sVar7) - 1 & 0xffffff80) + 0x100;
    }
    sVar1 = psVar2[1];
    if (sVar1 < 0x21)
    {
        param_1 = (short *)0x20;
    }
    else if (sVar1 < 0x41)
    {
        param_1 = (short *)0x40;
    }
    else
    {
        param_1 = (short *)(((0x80 < sVar1) - 1 & 0xffffff80) + 0x100);
    }
    psVar6[7] = (short)param_1;
    uVar4 = (ulonglong)((uVar14 - 1) + (int)sVar7) / (ulonglong)uVar14;
    iVar8 = (int)uVar4;
    uVar5 = (ulonglong)(((int)param_1 - 1U) + (int)sVar1) / ZEXT48(param_1);
    local_c = (int)uVar5;
    sVar7 = (short)uVar5 * (short)uVar4;
    psVar6[6] = sVar7;
    local_20 = _malloc((int)sVar7 << 3);
    *(int *)(psVar6 + 8) = local_20;
    uVar3 = *(undefined_32 *)(psVar2 + 2);
    if (local_c != 0)
    {
        iVar9 = (int)param_1 * local_c;
        do
        {
            uVar11 = (uint)*psVar6;
            if (iVar8 != 0)
            {
                iVar13 = 0;
                local_14 = iVar8;
                do
                {
                    uVar12 = uVar11;
                    if (uVar14 < uVar11)
                    {
                        uVar12 = uVar14;
                    }
                    uVar10 = (int)psVar6[1] - (iVar9 - (int)param_1);
                    if (param_1 < uVar10)
                    {
                        uVar10 = (uint)param_1;
                    }
                    FUN_00418a80(local_20, uVar3, iVar13, iVar9 - (int)param_1, uVar12, uVar10, param_2, (int)*psVar6);
                    local_20 = local_20 + 8;
                    uVar11 = uVar11 - uVar14;
                    iVar13 = iVar13 + uVar14;
                    local_14 = local_14 + -1;
                } while (local_14 != 0);
            }
            iVar9 = iVar9 - (int)param_1;
            local_c = local_c + -1;
        } while (local_c != 0);
    }
    _free(uVar3);
    _free(psVar2);
    uVar14 = 0;
    if (psVar6[6] != 0)
    {
        do
        {
            uVar3 = *(undefined_32 *)(*(int *)(psVar6 + 8) + 4 + uVar14 * 8);
            FUN_00446b60(psVar6, *(int *)(psVar6 + 8) + uVar14 * 8);
            FUN_00408f90();
            _free(uVar3);
            uVar14 = uVar14 + 1;
        } while (uVar14 < (uint)(int)psVar6[6]);
    }
    return psVar6;
}

undefined_32 *FUN_00418a80(undefined_16 *param_1, int param_2, int param_3, int param_4, int param_5, int param_6,
                           int param_7, int param_8)

{
    undefined_32 *puVar1;
    undefined_32 *puVar2;
    uint uVar3;
    undefined_32 *puVar4;
    uint uVar5;
    undefined_32 *puVar6;
    uint uVar7;
    undefined_32 *puVar8;

    uVar5 = param_5 + 1U & 0xfffffffe;
    uVar7 = uVar5 * param_7 * param_6;
    puVar1 = (undefined_32 *)_malloc(uVar7);
    puVar4 = puVar1;
    MEMSET(uVar3, puVar4, 0, uVar7 >> 2)
    for (uVar7 = uVar7 & 3; uVar7 != 0; uVar7 = uVar7 - 1)
    {
        *(undefined_8 *)puVar4 = 0;
        puVar4 = (undefined_32 *)((int)puVar4 + 1);
    }
    if ((DAT_0050c96c != 0) && (0 < param_4))
    {
        param_4 = param_4 + -1;
    }
    if (param_6 != 0)
    {
        puVar2 = (undefined_32 *)((param_8 * param_4 + param_3) * param_7 + param_2);
        param_4 = param_6;
        puVar4 = puVar1;
        do
        {
            puVar6 = puVar2;
            puVar8 = puVar4;
            QMEMCPY(uVar3, puVar6, puVar8, (uint)(param_7 * param_5) >> 2)
            for (uVar3 = param_7 * param_5 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
            {
                *(undefined_8 *)puVar8 = *(undefined_8 *)puVar6;
                puVar6 = (undefined_32 *)((int)puVar6 + 1);
                puVar8 = (undefined_32 *)((int)puVar8 + 1);
            }
            puVar2 = (undefined_32 *)((int)puVar2 + param_8 * param_7);
            puVar4 = (undefined_32 *)((int)puVar4 + uVar5 * param_7);
            param_4 = param_4 + -1;
        } while (param_4 != 0);
    }
    *param_1 = (undefined_16)param_5;
    *(undefined_32 **)(param_1 + 2) = puVar1;
    param_1[1] = (undefined_16)param_6;
    return puVar1;
}

void FUN_00418b70(int **param_1)

{
    int *piVar1;

    piVar1 = param_1[7];
    if (param_1 != NULL)
    {
        do
        {
            if (((*(byte *)(param_1 + 8) & 0x80) != 0) && ((int *)(*param_1)[7] != piVar1))
                break;
            param_1 = (int **)*param_1;
        } while (param_1 != NULL);
        for (; ((param_1 != NULL && (param_1[6] == (int *)0xa)) && (param_1[7] == piVar1));
             param_1 = (int **)param_1[1])
        {
            FUN_00414420(param_1, 0);
        }
    }
    return;
}

void __fastcall FUN_00418bc0(uint param_1_00, uint param_2, int param_1)

{
    int iVar1;
    uint uVar2;
    uint extraout_ECX;
    uint extraout_ECX_00;
    uint extraout_ECX_01;
    uint extraout_ECX_02;
    uint extraout_ECX_03;
    uint extraout_EDX;
    ulonglong uVar3;

    if (param_1 != 0)
    {
        for (iVar1 = *(int *)(param_1 + 0xc); iVar1 != 0; iVar1 = *(int *)(iVar1 + 4))
        {
            if (((byte) * (undefined_32 *)(iVar1 + 0x18) & 0xc) == 0xc)
            {
                uVar3 = FUN_00414be0(iVar1, param_1_00 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c0),
                                     *(undefined_8 *)(param_1 + 0x4c1),
                                     param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c2),
                                     param_1_00 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c3));
                uVar2 = (uint)((uVar3 & 0xffffff00ffffff00) >> 0x20);
                uVar3 = FUN_00414ca0(iVar1, uVar2 | *(byte *)(param_1 + 0x4c4),
                                     extraout_ECX & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c5),
                                     (uint)(uVar3 & 0xffffff00ffffff00) | (uint) * (byte *)(param_1 + 0x4c6),
                                     uVar2 | *(byte *)(param_1 + 0x4c7));
                uVar2 = (uint)(uVar3 & 0xffffff00ffffff00);
                uVar3 = FUN_00414c10(iVar1, uVar2 | *(byte *)(param_1 + 0x4cc),
                                     (uint)((uVar3 & 0xffffff00ffffff00) >> 0x20) | (uint) * (byte *)(param_1 + 0x4cd),
                                     extraout_ECX_00 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4ce),
                                     uVar2 | *(byte *)(param_1 + 0x4cf));
                uVar3 = FUN_00414c40(iVar1, extraout_ECX_01 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c8),
                                     (uint)(uVar3 & 0xffffff00ffffff00) | (uint) * (byte *)(param_1 + 0x4c9),
                                     (uint)((uVar3 & 0xffffff00ffffff00) >> 0x20) | (uint) * (byte *)(param_1 + 0x4ca),
                                     extraout_ECX_01 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4cb));
                uVar2 = (uint)((uVar3 & 0xffffff00ffffff00) >> 0x20);
                FUN_00414c70(iVar1, uVar2 | *(byte *)(param_1 + 0x4d0),
                             extraout_ECX_02 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4d1),
                             (uint)(uVar3 & 0xffffff00ffffff00) | (uint) * (byte *)(param_1 + 0x4d2),
                             uVar2 | *(byte *)(param_1 + 0x4d3));
                param_1_00 = extraout_ECX_03;
                param_2 = extraout_EDX;
            }
        }
    }
    return;
}

void FUN_00418cb0(int param_1, int param_2)

{
    uint uVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    uint uVar5;
    bool bVar6;
    undefined_32 uVar7;
    int local_20;
    undefined_32 local_1c;
    int local_18;
    int local_14;
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    iVar2 = param_1;
    uVar5 = 0;
    uVar1 = *(uint *)(param_1 + 0x4f0);
    local_18 = 0;
    if (uVar1 == 0)
    {
        return;
    }
    bVar6 = (uVar1 & 0x20000) != 0;
    if (bVar6)
    {
        uVar5 = 0x200000;
    }
    if ((uVar1 & 0x40000) != 0)
    {
        uVar5 = uVar5 | 0x400000;
    }
    if ((uVar1 & 0x200000) == 0)
    {
        if ((uVar1 & 0x400000) == 0)
        {
            if ((uVar1 & 0x800000) == 0)
            {
                if ((uVar1 & 0x1010000) == 0)
                {
                    if ((uVar1 & 0x80000) == 0)
                    {
                        iVar3 = param_2;
                        iVar4 = param_2;
                        if ((uVar1 & 0x100000) != 0)
                        {
                            local_18 = -0x14;
                            if (param_2 == 0)
                            {
                                local_1c = 0x7d1;
                                iVar3 = 2000;
                                iVar4 = 2000;
                            }
                            else
                            {
                                local_1c = 0x7d3;
                                iVar3 = 0x7d2;
                                iVar4 = 0x7d2;
                            }
                        }
                    }
                    else
                    {
                        local_18 = -7;
                        if (param_2 == 0)
                        {
                            local_1c = 0x7d5;
                            iVar3 = 0x7d4;
                            iVar4 = 0x7d4;
                        }
                        else
                        {
                            local_1c = 0x7d7;
                            iVar3 = 0x7d6;
                            iVar4 = 0x7d6;
                        }
                    }
                }
                else
                {
                    local_18 = (-(uint)bVar6 & 0xc) - 0x1a;
                    if (param_2 == 0)
                    {
                        local_1c = 0x7d9;
                        iVar3 = (-(uint)((uVar1 & 0x1000000) != 0) & 6) + 0x7d8;
                        iVar4 = 0x7da;
                    }
                    else
                    {
                        local_1c = 0x7dc;
                        iVar3 = 0x7db;
                        iVar4 = 0x7dd;
                    }
                }
                FUN_00417120(iVar3, &local_20, &param_1);
                FUN_00417120(iVar4, &local_14, &param_1);
                local_10 = *(int *)(iVar2 + 0x24);
                local_c = *(int *)(iVar2 + 0x28);
                local_8 = local_20 + -1 + local_10;
                local_4 = param_1 + -1 + local_c;
                FUN_00412fb0(iVar2, 0, iVar3, &local_10, 1, uVar5);
                iVar3 = local_18;
                FUN_00419030(iVar2, 0, 0, local_18);
                local_10 = local_20 + *(int *)(iVar2 + 0x24);
                local_c = *(int *)(iVar2 + 0x28);
                local_8 = *(int *)(iVar2 + 0x2c) - local_14;
                local_4 = param_1 + -1 + local_c;
                FUN_00412fb0(iVar2, 1, local_1c, &local_10, 1, uVar5);
                FUN_00419030(iVar2, 1, 0, iVar3);
                local_8 = *(int *)(iVar2 + 0x2c);
                local_10 = (local_8 - local_14) + 1;
                local_c = *(int *)(iVar2 + 0x28);
                local_4 = param_1 + -1 + local_c;
                FUN_00412fb0(iVar2, 2, iVar4, &local_10, 1, uVar5 | 0x400000);
                FUN_00419030(iVar2, 2, 0, iVar3);
                FUN_00414e30(iVar2, param_2);
                return;
            }
            FUN_00417120(0xbc3, &local_20, &param_1);
            local_10 = *(int *)(iVar2 + 0x24);
            local_c = *(int *)(iVar2 + 0x28);
            local_8 = local_20 + -1 + local_10;
            local_4 = param_1 + -1 + local_c;
            uVar7 = 0xbc3;
        }
        else
        {
            FUN_00417120(0xbc1, &local_20, &param_1);
            local_10 = *(int *)(iVar2 + 0x24);
            local_c = *(int *)(iVar2 + 0x28);
            local_8 = local_20 + -1 + local_10;
            local_4 = param_1 + -1 + local_c;
            uVar7 = 0xbc1;
        }
        FUN_00412fb0(iVar2, 0, uVar7, &local_10, 1, uVar5);
        uVar7 = 0xfffffffc;
    }
    else
    {
        FUN_00417120(0x3f8, &local_20, &param_1);
        local_10 = *(int *)(iVar2 + 0x24);
        local_c = *(int *)(iVar2 + 0x28);
        local_8 = local_20 + -1 + local_10;
        local_4 = param_1 + -1 + local_c;
        FUN_00412fb0(iVar2, 0, 0x3f8, &local_10, 1, uVar5);
        uVar7 = 0;
    }
    FUN_00419030(iVar2, 0, 0, uVar7);
    FUN_00414e30(iVar2, param_2);
    return;
}

void FUN_00419030(int param_1, int param_2, undefined_32 param_3, undefined_32 param_4)

{
    if (((param_1 != 0) && (-1 < param_2)) && (param_2 < 0x14))
    {
        param_1 = param_1 + param_2 * 0x38;
        *(undefined_32 *)(param_1 + 0x8c) = param_3;
        *(undefined_32 *)(param_1 + 0x90) = param_4;
    }
    return;
}

void FUN_00419070(uint param_1, undefined_32 param_2, undefined_32 param_3)

{
    uint uVar1;

    if (param_1 != 0)
    {
        if ((param_1 & 0x200000) != 0)
        {
            FUN_00417120(0x3f8, param_2, param_3);
            return;
        }
        if ((param_1 & 0x400000) != 0)
        {
            FUN_00417120(0xbc1, param_2, param_3);
            return;
        }
        if ((param_1 & 0x800000) != 0)
        {
            FUN_00417120(0xbc3, param_2, param_3);
            return;
        }
        if ((param_1 & 0x10000) != 0)
        {
            FUN_00417120(0x7d9, param_2, param_3);
            return;
        }
        if ((param_1 & 0x80000) != 0)
        {
            FUN_00417120(0x7d5, param_2, param_3);
            return;
        }
        uVar1 = 0x7d1;
        if ((param_1 & 0x100000) == 0)
        {
            uVar1 = param_1;
        }
        FUN_00417120(uVar1, param_2, param_3);
    }
    return;
}

void FUN_00419140(uint param_1)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    byte bVar4;
    int iVar5;
    undefined_32 extraout_EDX;
    int iVar6;
    byte *pbVar7;
    uint uVar8;
    ulonglong uVar9;

    iVar3 = param_1;
    if (param_1 != 0)
    {
        iVar6 = *(int *)(param_1 + 0x58);
        uVar8 = *(uint *)(param_1 + 0x54);
        if (iVar6 == 0)
        {
            iVar6 = 0x14;
        }
        uVar1 = *(uint *)(param_1 + 0x5c);
        if (uVar8 <= uVar1)
        {
            if (uVar1 < iVar6 + uVar8)
            {
                iVar6 = uVar1 - uVar8;
            }
            rand();
            iVar5 = __ftol();
            uVar1 = iVar6 + uVar8;
            if (uVar8 < uVar1)
            {
                bVar4 = __ftol();
                uVar2 = 100U - iVar5 & 0xffffff00;
                param_1 = uVar2 | bVar4;
                uVar9 = CONCAT44(extraout_EDX, uVar8 * 7);
                pbVar7 = (byte *)(iVar3 + 0x95 + uVar8 * 0x38);
                do
                {
                    uVar9 = FUN_00413090(iVar3, uVar8, uVar2 | pbVar7[-1],
                                         (uint)(uVar9 & 0xffffff00ffffff00) | (uint)*pbVar7,
                                         (uint)((uVar9 & 0xffffff00ffffff00) >> 0x20) | (uint)pbVar7[1], param_1);
                    uVar8 = uVar8 + 1;
                    pbVar7 = pbVar7 + 0x38;
                } while (uVar8 < uVar1);
                return;
            }
        }
    }
    return;
}

void FUN_004197f0(undefined_32 *param_1, int param_2)

{
    if (param_1 != NULL)
    {
        if (param_2 != 0)
        {
            param_1[3] = 0;
            param_1[2] = 0;
            param_1[1] = 0;
            *param_1 = 0;
            return;
        }
        param_1[2] = 0x14;
        *param_1 = 0x14;
        param_1[3] = 0x1a;
        param_1[1] = 0x1a;
    }
    return;
}

void FUN_00419830(int param_1, int param_2, int param_3)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;
    undefined_32 uVar6;
    int local_2c;
    int local_28;
    int local_24;
    int local_20;
    int local_1c;
    int local_18;
    undefined_8 local_14[4];
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    iVar2 = param_2;
    iVar1 = param_1;
    if (param_1 != 0)
    {
        if ((param_2 == 0) || (iVar4 = 0xc1c, param_2 != 1))
        {
            iVar4 = 3000;
        }
        FUN_00417120(iVar4 + 1, &local_24, &local_18);
        FUN_00417120(iVar4, &param_1, &local_2c);
        FUN_00417120(iVar4 + 2, &local_1c, &local_28);
        if (iVar2 == 1)
        {
            local_10 = param_1 + *(int *)(iVar1 + 0x24);
            local_c = *(int *)(iVar1 + 0x28) + 4;
            local_8 = *(int *)(iVar1 + 0x2c) - param_1;
            local_4 = *(int *)(iVar1 + 0x30) + -3;
        }
        else
        {
            local_10 = *(int *)(iVar1 + 0x24) + 10;
            local_c = *(int *)(iVar1 + 0x28) + 10;
            local_8 = *(int *)(iVar1 + 0x2c) + -10;
            local_4 = *(int *)(iVar1 + 0x30) + -10;
            iVar2 = 1;
        }
        FUN_00412fb0(iVar1, 0, 0x3f1, &local_10, iVar2, 0);
        FUN_00413090(iVar1, 0, 0, 0, 0, 0x96);
        local_10 = *(int *)(iVar1 + 0x24);
        local_c = *(int *)(iVar1 + 0x28);
        local_8 = param_1 + -1 + local_10;
        local_4 = local_2c + -1 + local_c;
        FUN_00412fb0(iVar1, 1, iVar4, &local_10, 1, 0x200000);
        local_8 = *(int *)(iVar1 + 0x24);
        iVar2 = ((*(int *)(iVar1 + 0x2c) + param_1 * -2) - local_8) + 1;
        if (DAT_00ec86c4 != 0x280)
        {
            iVar2 = iVar2 + local_1c * 2;
        }
        local_10 = param_1 + local_8;
        local_c = *(int *)(iVar1 + 0x28);
        local_8 = param_1 + iVar2 + -1 + local_8;
        local_4 = local_28 + -1 + local_c;
        FUN_00412fb0(iVar1, 2, iVar4 + 2, &local_10, 1, 0x200000);
        local_8 = *(int *)(iVar1 + 0x2c);
        local_c = *(int *)(iVar1 + 0x28);
        local_10 = (local_8 - param_1) + 1;
        local_4 = local_2c + -1 + local_c;
        FUN_00412fb0(iVar1, 3, iVar4, &local_10, 1, 0x600000);
        local_4 = *(int *)(iVar1 + 0x28);
        iVar5 = ((*(int *)(iVar1 + 0x30) + local_2c * -2) - local_4) + 1;
        if (DAT_00ec86c4 != 0x280)
        {
            iVar5 = iVar5 + local_18 * 2;
        }
        local_10 = *(int *)(iVar1 + 0x24);
        local_c = local_2c + local_4;
        local_8 = local_24 + -1 + local_10;
        local_4 = iVar5 + local_2c + -1 + local_4;
        FUN_00412fb0(iVar1, 4, iVar4 + 1, &local_10, 1, 0);
        local_8 = *(int *)(iVar1 + 0x2c) - param_1;
        local_10 = local_8 + 1;
        local_c = local_2c + *(int *)(iVar1 + 0x28);
        local_8 = local_24 + local_8;
        local_4 = iVar5 + local_2c + -1 + *(int *)(iVar1 + 0x28);
        FUN_00412fb0(iVar1, 5, iVar4 + 1, &local_10, 1, 0x400000);
        local_4 = *(int *)(iVar1 + 0x30);
        local_10 = *(int *)(iVar1 + 0x24);
        local_c = (local_4 - local_2c) + 1;
        local_8 = param_1 + -1 + local_10;
        FUN_00412fb0(iVar1, 6, iVar4, &local_10, 1, 0);
        local_10 = param_1 + *(int *)(iVar1 + 0x24);
        local_4 = *(int *)(iVar1 + 0x30);
        local_c = (local_4 - local_28) + 1;
        local_8 = iVar2 + param_1 + -1 + *(int *)(iVar1 + 0x24);
        FUN_00412fb0(iVar1, 7, iVar4 + 2, &local_10, 1, 0);
        local_8 = *(int *)(iVar1 + 0x2c);
        local_10 = (local_8 - param_1) + 1;
        local_28 = *(int *)(iVar1 + 0x30) - local_28;
        local_c = local_28 + 1;
        local_4 = local_2c + local_28;
        FUN_00412fb0(iVar1, 8, iVar4, &local_10, 1, 0x400000);
        iVar2 = param_3;
        if (param_2 == 0)
        {
            FUN_00414e30(iVar1, param_3);
            if (iVar2 == 0)
            {
                uVar6 = 0xbbb;
                uVar3 = 0xbbc;
            }
            else
            {
                uVar6 = 0xbbd;
                uVar3 = 0xbbe;
            }
            FUN_00417120(uVar6, &param_2, &local_20);
            FUN_00417120(uVar3, local_14, &param_3);
            *(undefined_32 *)(iVar1 + 0x54) = 9;
            local_10 = param_1 + *(int *)(iVar1 + 0x24);
            local_8 = param_2 + param_1 + -1 + *(int *)(iVar1 + 0x24);
            local_c = *(int *)(iVar1 + 0x28);
            local_4 = local_20 + -1 + local_c;
            FUN_00412fb0(iVar1, 9, uVar6, &local_10, 1, 0);
            local_10 = param_2 + param_1 + *(int *)(iVar1 + 0x24);
            local_c = *(int *)(iVar1 + 0x28);
            local_8 = (*(int *)(iVar1 + 0x2c) - param_1) - param_2;
            local_4 = param_3 + -1 + local_c;
            FUN_00412fb0(iVar1, 10, uVar3, &local_10, 1, 0);
            local_8 = *(int *)(iVar1 + 0x2c) - param_1;
            local_10 = (local_8 - param_2) + 1;
            local_c = *(int *)(iVar1 + 0x28);
            local_4 = param_3 + -1 + local_c;
            FUN_00412fb0(iVar1, 0xb, uVar6, &local_10, 1, 0x400000);
            local_10 = param_1 + *(int *)(iVar1 + 0x24);
            local_4 = *(int *)(iVar1 + 0x30) - param_3;
            local_c = local_4 + 1;
            local_4 = local_20 + local_4;
            local_8 = param_2 + param_1 + -1 + *(int *)(iVar1 + 0x24);
            FUN_00412fb0(iVar1, 0xc, uVar6, &local_10, 1, 0);
            local_10 = param_2 + param_1 + *(int *)(iVar1 + 0x24);
            local_4 = *(int *)(iVar1 + 0x30);
            local_c = (local_4 - param_3) + 1;
            local_8 = (*(int *)(iVar1 + 0x2c) - param_1) - param_2;
            FUN_00412fb0(iVar1, 0xd, uVar3, &local_10, 1, 0);
            local_4 = *(int *)(iVar1 + 0x30);
            local_8 = *(int *)(iVar1 + 0x2c) - param_1;
            local_10 = (local_8 - param_2) + 1;
            local_c = (local_4 - param_3) + 1;
            FUN_00412fb0(iVar1, 0xe, uVar6, &local_10, 1, 0x400000);
            *(int *)(iVar1 + 0x58) = 0xf - *(int *)(iVar1 + 0x54);
        }
    }
    return;
}

void FUN_00419db0(uint param_1, int param_2)

{
    uint uVar1;
    int iVar2;
    undefined_32 uVar3;
    uint uVar4;
    undefined_32 uVar5;
    undefined_32 uVar6;
    int iVar7;
    undefined_32 local_48;
    int local_44;
    int local_40;
    int local_3c;
    int local_38;
    int local_34;
    int local_30;
    int local_2c;
    int local_28;
    int local_24;
    int local_20;
    int local_1c;
    int local_18;
    int local_14;
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    uVar1 = param_1;
    if (param_1 == 0)
    {
        return;
    }
    uVar4 = *(uint *)(param_1 + 0x20);
    if (param_2 == 0)
    {
        if ((uVar4 & 0x10000) == 0)
        {
            uVar3 = 5000;
            uVar5 = 0x1389;
            uVar6 = 5000;
        }
        else
        {
            uVar3 = 0x1392;
            uVar5 = 0x1393;
            uVar6 = 0x1392;
        }
    }
    else if ((uVar4 & 0x10000) == 0)
    {
        uVar3 = 0x138a;
        uVar5 = 0x138b;
        uVar6 = 0x138a;
    }
    else
    {
        uVar3 = 0x1394;
        uVar5 = 0x1395;
        uVar6 = 0x1394;
    }
    if ((uVar4 & 0x20000) == 0)
    {
        local_48 = 0x138f;
        local_44 = 0x138e;
    }
    else
    {
        local_44 = 0x138f;
        local_48 = 0x138e;
    }
    if ((uVar4 & 0x10000) == 0)
    {
        FUN_00417120(uVar6, &param_1, &param_2);
        local_20 = *(int *)(uVar1 + 0x24);
        local_1c = *(int *)(uVar1 + 0x28);
        local_18 = (param_1 - 1) + local_20;
        local_14 = param_2 + -1 + local_1c;
        FUN_00417120(uVar3, &param_1, &param_2);
        local_8 = *(int *)(uVar1 + 0x548) + *(int *)(uVar1 + 0x24);
        local_10 = local_8 - param_1;
        local_c = *(int *)(uVar1 + 0x28);
        local_8 = local_8 + -1;
        local_4 = param_2 + -1 + local_c;
        FUN_00417120(uVar5, &param_1, &param_2);
        local_2c = *(int *)(uVar1 + 0x28);
        local_30 = local_18 + 1;
        local_28 = local_10 + -1;
        local_24 = param_2 + -1 + local_2c;
    }
    else
    {
        FUN_00417120(uVar6, &param_1, &param_2);
        local_20 = *(int *)(uVar1 + 0x24);
        local_1c = *(int *)(uVar1 + 0x28);
        local_18 = (param_1 - 1) + local_20;
        local_14 = param_2 + -1 + local_1c;
        FUN_00417120(uVar3, &param_1, &param_2);
        local_10 = *(int *)(uVar1 + 0x24);
        local_4 = *(int *)(uVar1 + 0x548) + *(int *)(uVar1 + 0x28);
        local_c = local_4 - param_2;
        local_4 = local_4 + -1;
        local_8 = (param_1 - 1) + local_10;
        FUN_00417120(uVar5, &param_1, &param_2);
        local_30 = *(int *)(uVar1 + 0x24);
        local_28 = (param_1 - 1) + local_30;
        local_2c = local_14 + 1;
        local_24 = local_c + -1;
    }
    if ((*(byte *)(uVar1 + 0x22) & 1) == 0)
    {
        local_3c = local_2c + 0xf;
        local_34 = local_24 + -0xf;
        local_40 = local_30 + -7;
        local_38 = local_28 + 7;
    }
    else
    {
        local_3c = local_2c + -7;
        local_34 = local_24 + 7;
        local_40 = local_30 + 0xf;
        local_38 = local_28 + -0xf;
    }
    FUN_00412fb0(uVar1, 0, 0x3f1, &local_40, 1, 0);
    FUN_00413090(uVar1, 0, 0, 0, 0, 0x82);
    FUN_00412fb0(uVar1, 1, uVar6, &local_20, 1, 0);
    FUN_00412fb0(uVar1, 2, uVar5, &local_30, 1, 0);
    iVar7 = 4;
    FUN_00412fb0(uVar1, 3, uVar3, &local_10, 1,
                 (-(uint)((*(uint *)(uVar1 + 0x20) & 0x10000) != 0) & 0xffe00000) + 0x400000);
    if ((*(uint *)(uVar1 + 0x20) & 0x200100) == 0)
    {
        FUN_00417150(local_48, &local_40);
        FUN_0041a9a0(&local_40, &local_20, 1, 1);
        FUN_00412fb0(uVar1, 4, local_48, &local_40, 1, 0);
        iVar2 = local_44;
        FUN_00417150(local_44, &local_40);
        FUN_0041a9a0(&local_40, &local_10, 1, 1);
        iVar7 = 6;
        FUN_00412fb0(uVar1, 5, iVar2, &local_40, 1, 0);
    }
    if ((*(uint *)(uVar1 + 0x20) & 0x80000) != 0)
    {
        if ((*(uint *)(uVar1 + 0x20) & 0x100000) == 0)
        {
            uVar4 = (uint)(((local_28 - local_30) + 1) * *(int *)(uVar1 + 0x54c)) / 100;
            FUN_00417120(0x138d, 0, &local_44);
            local_40 = local_30;
            local_38 = (uVar4 - 1) + local_30;
            local_34 = local_44 + -1;
            local_3c = 0;
            FUN_0041a9a0(&local_40, &local_30, 0, 1);
            FUN_0041aa10(&local_40, 0, 1);
            if ((*(uint *)(uVar1 + 0x20) & 0x20000) != 0)
            {
                FUN_00417900(&local_40, (local_28 - local_38) + local_40, local_3c);
            }
            FUN_00412fb0(uVar1, iVar7, 0x138d, &local_40, 1, (*(uint *)(uVar1 + 0x20) & 0x20000) << 5);
            if ((*(uint *)(uVar1 + 0x20) & 0x40000) == 0)
                goto LAB_0041a5e5;
            FUN_00417120(0x1390, &param_1, &param_2);
            if ((*(uint *)(uVar1 + 0x20) & 0x20000) == 0)
            {
                local_38 = uVar4 - (param_1 >> 1);
                local_40 = local_30 + local_38;
                local_38 = param_1 + local_30 + -1 + local_38;
            }
            else
            {
                local_40 = ((local_28 - uVar4) - (param_1 >> 1)) + 1;
                local_38 = ((param_1 - uVar4) + local_28) - (param_1 >> 1);
            }
            local_3c = local_2c;
            local_34 = param_2 + -1 + local_2c;
            FUN_0041a9a0(&local_40, &local_30, 0, 1);
            FUN_0041aa10(&local_40, 0, 1);
            iVar2 = iVar7 + 2;
            FUN_00412fb0(uVar1, iVar7 + 1, 0x1390, &local_40, 1, (*(uint *)(uVar1 + 0x20) & 0x20000) << 5);
            FUN_00417120(0x1391, &param_1, &param_2);
            if ((*(uint *)(uVar1 + 0x20) & 0x20000) == 0)
            {
                local_38 = uVar4 - (param_1 >> 1);
                local_40 = local_30 + local_38;
                local_38 = param_1 + local_30 + -1 + local_38;
            }
            else
            {
                local_40 = ((local_28 - uVar4) - (param_1 >> 1)) + 1;
                local_38 = ((param_1 - uVar4) + local_28) - (param_1 >> 1);
            }
            local_34 = param_2 + -1 + local_2c;
            local_3c = local_2c;
            FUN_0041a9a0(&local_40, &local_30, 0, 1);
            FUN_0041aa10(&local_40, 0, 1);
            iVar7 = (*(uint *)(uVar1 + 0x20) & 0x20000) << 5;
            uVar3 = 0x1391;
        }
        else
        {
            FUN_00417120(0x1390, &param_1, &param_2);
            local_38 = ((local_28 - local_30) + 1 >> 1) - (param_1 >> 1);
            local_40 = local_30 + local_38;
            local_38 = param_1 + local_30 + -1 + local_38;
            local_3c = local_2c;
            local_34 = param_2 + -1 + local_2c;
            FUN_0041a9a0(&local_40, &local_30, 0, 1);
            FUN_0041aa10(&local_40, 0, 1);
            FUN_00412fb0(uVar1, iVar7, 0x1390, &local_40, 1, 0);
            local_38 = (uint)(((local_28 - local_30) + 1) * (*(int *)(uVar1 + 0x554) + 100)) / 200 - (param_1 >> 1);
            local_40 = local_30 + local_38;
            local_38 = param_1 + local_30 + -1 + local_38;
            local_3c = local_2c;
            local_34 = param_2 + -1 + local_2c;
            FUN_0041a9a0(&local_40, &local_30, 0, 1);
            FUN_0041aa10(&local_40, 0, 1);
            FUN_00412fb0(uVar1, iVar7 + 1, 0x1391, &local_40, 1, 0);
            FUN_00417120(0x138c, &param_1, &param_2);
            iVar2 = ((local_28 - local_30) + 1 >> 1) - (param_1 >> 1);
            local_40 = local_30 + iVar2;
            local_38 = param_1 + local_30 + -1 + iVar2;
            local_3c = local_2c;
            local_34 = param_2 + -1 + local_2c;
            uVar4 = (uint)(*(int *)(uVar1 + 0x550) * (iVar2 + -4)) / 100;
            FUN_0041a9a0(&local_40, &local_30, 0, 1);
            FUN_0041aa10(&local_40, -4 - uVar4, 0);
            iVar2 = iVar7 + 3;
            FUN_00412fb0(uVar1, iVar7 + 2, 0x138c, &local_40, 1, 0);
            local_38 = ((local_28 - local_30) + 1 >> 1) + (param_1 >> 1);
            local_40 = local_30 + local_38;
            local_38 = param_1 + local_30 + -1 + local_38;
            local_3c = local_2c;
            local_34 = param_2 + -1 + local_2c;
            FUN_0041a9a0(&local_40, &local_30, 0, 1);
            FUN_0041aa10(&local_40, uVar4 - 0xf, 0);
            iVar7 = 0x400000;
            uVar3 = 0x138c;
        }
        FUN_00412fb0(uVar1, iVar2, uVar3, &local_40, 1, iVar7);
    }
LAB_0041a5e5:
    local_40 = local_20;
    local_38 = local_8;
    local_34 = local_14;
    if ((*(uint *)(uVar1 + 0x20) & 0x10000) != 0)
    {
        local_38 = local_18;
        local_34 = local_4;
    }
    local_3c = local_1c;
    FUN_00414b40(uVar1, (local_38 - local_20) + 1, (local_34 - local_1c) + 1);
    return;
}

void FUN_0041a640(int param_1, UINT param_2)

{
    uint uVar1;
    int iVar2;
    UINT UVar3;
    UINT UVar4;

    UVar3 = MapVirtualKeyA(0xc, 1);
    UVar4 = MapVirtualKeyA(0xd, 1);
    if ((param_2 == 0x6d) || (param_2 == UVar3))
    {
        FUN_00440550(0x48);
        uVar1 = *(uint *)(param_1 + 0x558);
        if (uVar1 < *(uint *)(param_1 + 0x54c))
        {
            *(uint *)(param_1 + 0x54c) = *(uint *)(param_1 + 0x54c) - uVar1;
        }
        else
        {
            *(undefined_32 *)(param_1 + 0x54c) = 0;
        }
        if (uVar1 < *(uint *)(param_1 + 0x550))
        {
            *(uint *)(param_1 + 0x550) = *(uint *)(param_1 + 0x550) - uVar1;
        }
        else
        {
            *(undefined_32 *)(param_1 + 0x550) = 0;
        }
        FUN_004151a0(*(undefined_32 *)(param_1 + 8), 2000, *(undefined_32 *)(param_1 + 0x1c), param_1);
        FUN_00419db0(param_1, 1);
    }
    if ((param_2 == 0x6b) || (param_2 == UVar4))
    {
        FUN_00440550(0x48);
        iVar2 = *(int *)(param_1 + 0x558);
        if (*(uint *)(param_1 + 0x54c) < 100U - iVar2)
        {
            *(uint *)(param_1 + 0x54c) = *(uint *)(param_1 + 0x54c) + iVar2;
        }
        else
        {
            *(undefined_32 *)(param_1 + 0x54c) = 100;
        }
        if (*(uint *)(param_1 + 0x550) < 100U - iVar2)
        {
            *(uint *)(param_1 + 0x550) = *(uint *)(param_1 + 0x550) + iVar2;
        }
        else
        {
            *(undefined_32 *)(param_1 + 0x550) = 100;
        }
        FUN_004151a0(*(undefined_32 *)(param_1 + 8), 0x7d1, *(undefined_32 *)(param_1 + 0x1c), param_1);
        FUN_00419db0(param_1, 1);
    }
    return;
}

void FUN_0041a750(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    bool bVar1;
    int iVar2;
    undefined_32 uVar3;
    undefined_32 uVar4;
    int iVar5;
    int local_38;
    int local_34;
    int local_30;
    int local_2c;
    int local_28;
    int local_24;
    int local_20;
    int local_1c;
    int local_18;
    int local_14;
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    iVar2 = param_1;
    bVar1 = false;
    if (param_1 != 0)
    {
        if ((*(uint *)(param_1 + 0x20) & 0x10000) == 0)
        {
            FUN_00417120(5000, &param_1, &local_38);
            local_30 = *(int *)(iVar2 + 0x24);
            local_2c = *(int *)(iVar2 + 0x28);
            local_28 = param_1 + -1 + local_30;
            local_24 = local_38 + -1 + local_2c;
            FUN_00417120(5000, &param_1, &local_38);
            local_18 = *(int *)(iVar2 + 0x548) + *(int *)(iVar2 + 0x24);
            local_1c = *(int *)(iVar2 + 0x28);
            local_20 = local_18 - param_1;
            local_18 = local_18 + -1;
            local_14 = local_38 + -1 + local_1c;
            FUN_00417120(0x1389, &param_1, &local_38);
            local_c = *(int *)(iVar2 + 0x28);
            local_10 = local_28 + 1;
            local_8 = local_20 + -1;
            local_4 = local_38 + -1 + local_c;
        }
        else
        {
            FUN_00417120(5000, &param_1, &local_38);
            local_30 = *(int *)(iVar2 + 0x24);
            local_2c = *(int *)(iVar2 + 0x28);
            local_28 = param_1 + -1 + local_30;
            local_24 = local_38 + -1 + local_2c;
            FUN_00417120(5000, &param_1, &local_38);
            local_20 = *(int *)(iVar2 + 0x24);
            local_14 = *(int *)(iVar2 + 0x548) + *(int *)(iVar2 + 0x28);
            local_1c = local_14 - local_38;
            local_14 = local_14 + -1;
            local_18 = param_1 + -1 + local_20;
            FUN_00417120(0x1389, &param_1, &local_38);
            local_10 = *(int *)(iVar2 + 0x24);
            local_c = local_24 + 1;
            local_8 = param_1 + -1 + local_10;
            local_4 = local_1c + -1;
        }
        uVar4 = param_3;
        uVar3 = param_2;
        local_34 = 0;
        iVar5 = FUN_004172c0(&local_30, param_2, param_3);
        if (iVar5 != 0)
        {
            if ((*(uint *)(iVar2 + 0x20) & 0x20000) == 0)
            {
                bVar1 = true;
            }
            else
            {
                local_34 = 1;
            }
        }
        iVar5 = FUN_004172c0(&local_20, uVar3, uVar4);
        if (iVar5 != 0)
        {
            if ((*(uint *)(iVar2 + 0x20) & 0x20000) == 0)
            {
                local_34 = 1;
            }
            else
            {
                bVar1 = true;
            }
        }
        FUN_004172c0(&local_10, uVar3, uVar4);
        if (bVar1)
        {
            FUN_0041a640(iVar2, 0x6d);
        }
        if (local_34 != 0)
        {
            FUN_0041a640(iVar2, 0x6b);
        }
    }
    return;
}

void FUN_0041a9a0(int *param_1, int *param_2, int param_3, int param_4)

{
    if ((param_1 != NULL) && (param_2 != NULL))
    {
        if (param_3 != 0)
        {
            FUN_00417900(param_1, (((param_2[2] - param_1[2]) + *param_1) - *param_2 >> 1) + *param_2, param_1[1]);
        }
        if (param_4 != 0)
        {
            FUN_00417900(param_1, *param_1, (((param_1[1] + param_2[3]) - param_1[3]) - param_2[1] >> 1) + param_2[1]);
        }
    }
    return;
}

void FUN_0041aa10(int *param_1, int param_2, int param_3)

{
    if (param_1 != NULL)
    {
        *param_1 = *param_1 + param_2;
        param_1[2] = param_1[2] + param_2;
        param_1[1] = param_1[1] + param_3;
        param_1[3] = param_1[3] + param_3;
    }
    return;
}

void FUN_0041aa40(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    if (param_1 != 0)
    {
        do
        {
            if ((*(byte *)(param_1 + 0x20) & 0x40) != 0)
            {
                if (*(int *)(param_1 + 0xc) != 0)
                {
                    FUN_0041aa40(*(int *)(param_1 + 0xc), param_2, param_3);
                }
                if (*(int *)(param_1 + 0x18) == 0)
                {
                    FUN_004151a0(param_1, 0x4a, param_2, param_3);
                }
            }
            param_1 = *(int *)(param_1 + 4);
        } while (param_1 != 0);
    }
    return;
}

void FUN_0041aa90(int param_1, int param_2, int *param_3)

{
    int iVar1;
    int *piVar2;
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    iVar1 = param_2;
    if ((param_1 != 0) && (param_2 != 0))
    {
        FUN_00417120(0xbbf, &param_1, &param_2);
        piVar2 = param_3;
        local_10 = *param_3;
        local_c = param_3[1];
        local_8 = param_1 + -1 + local_10;
        local_4 = param_2 + -1 + local_c;
        FUN_00412fb0(iVar1, 0, 0xbbf, &local_10, 1, 0);
        local_c = piVar2[1];
        local_10 = *piVar2 + param_1;
        local_8 = piVar2[2] - param_1;
        local_4 = param_2 + -1 + local_c;
        FUN_00412fb0(iVar1, 1, 0xbc0, &local_10, 1, 0);
        local_8 = piVar2[2];
        local_c = piVar2[1];
        local_10 = (local_8 - param_1) + 1;
        local_4 = param_2 + -1 + local_c;
        FUN_00412fb0(iVar1, 2, 0xbbf, &local_10, 1, 0x400000);
        FUN_00414e30(iVar1, 1);
        *(undefined_32 *)(iVar1 + 0x54) = 0;
        *(undefined_32 *)(iVar1 + 0x58) = 3;
    }
    return;
}

int FUN_0041abb0(undefined_32 param_1)

{
    int iVar1;

    iVar1 = FUN_00416d90(0, param_1, -1, 0, 0, 0, 0, FUN_0041ac00, 0);
    FUN_00414b40(iVar1, 500, 0x32);
    *(undefined_32 *)(iVar1 + 0x18) = 0xc;
    *(uint *)(iVar1 + 0x20) = *(uint *)(iVar1 + 0x20) | 0x204;
    return iVar1;
}

void FUN_0041ac00(undefined_32 param_1, int param_2, undefined_32 param_3, undefined_32 param_4)

{
    if (param_2 == 9)
    {
        FUN_0041ac30(param_1);
    }
    FUN_00415850(param_1, param_2, param_3, param_4);
    return;
}

void FUN_0041ac30(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    undefined_32 uVar5;
    bool bVar6;
    bool bVar7;
    undefined_8 local_100[256];

    bVar6 = *(int *)(param_1 + 0x528) == 0x29a;
    bVar7 = (&DAT_00ea04e0)[*(int *)(param_1 + 0x56c)] != 0;
    iVar1 = (&DAT_00ea02c0)[*(int *)(param_1 + 0x56c)];
    iVar2 = *(int *)(param_1 + 0x24);
    iVar3 = *(int *)(param_1 + 0x28);
    if (!bVar7 && !bVar6)
    {
        _sprintf(local_100, &DAT_004b666c, *(int *)(param_1 + 0x528) + 1);
        FUN_004173c0(0, iVar2 + 5, iVar3 + 0x14, -1, -1, -1, -1, local_100, 0, 0, 0);
    }
    uVar5 = *(undefined_32 *)(param_1 + 0x56c);
    iVar4 = FUN_00420f70(uVar5);
    if (iVar4 == 0)
    {
        iVar4 = FUN_0041c4d0(*(undefined_32 *)(param_1 + 0x1c));
        uVar5 = lookup_translation((&PTR_s__SCREENTEXT_322___Anakin_004c2714)[iVar4 * 0xd]);
    }
    else
    {
        uVar5 = FUN_0041bce0(uVar5);
    }
    _sprintf(local_100, &DAT_004b2304 /* "%s" */, uVar5);
    FUN_004173c0(6, iVar2 + 0x19, iVar3 + 10, -1, -1, -1, -1, local_100, 0, 0, 0);
    iVar4 = FUN_0041c4d0(*(undefined_32 *)(param_1 + 0x1c));
    uVar5 = lookup_translation((&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[iVar4 * 0xd]);
    iVar4 = FUN_0041c4d0(*(undefined_32 *)(param_1 + 0x1c), uVar5);
    uVar5 = lookup_translation((&PTR_s__SCREENTEXT_322___Anakin_004c2714)[iVar4 * 0xd]);
    _sprintf(local_100, s__s__s_004b6708, uVar5);
    FUN_004173c0(0, iVar2 + 0x19, iVar3 + 0x23, -1, -1, -1, -1, local_100, 0, 0, 0);
    if (bVar7 || bVar6)
    {
    LAB_0041ae0c:
        if (iVar1 == 0)
        {
            if (bVar7 || bVar6)
            {
                uVar5 = lookup_translation(s__MONDOTEXT_H_0549_Retired_004b66b8);
                _sprintf(local_100, uVar5);
            }
            else
            {
                uVar5 = FUN_0041bc20(*(undefined_32 *)(param_1 + 0x564));
                uVar5 = lookup_translation(s__MONDOTEXT_H_0550_Current____s_004b6698, uVar5);
                _sprintf(local_100, uVar5);
            }
            goto LAB_0041ae7d;
        }
    }
    else if (iVar1 == 0)
    {
        uVar5 = lookup_translation(s__MONDOTEXT_H_0548_Lap__d_004b66ec, *(int *)(param_1 + 0x560) + 1);
        _sprintf(local_100, uVar5);
        FUN_004173c0(0, iVar2 + 0xd2, iVar3 + 0x14, -1, -1, -1, -1, local_100, 0, 0, 0);
        goto LAB_0041ae0c;
    }
    uVar5 = lookup_translation(s__MONDOTEXT_H_0531_Final_004b66d4);
    _sprintf(local_100, uVar5);
LAB_0041ae7d:
    FUN_004173c0(0, iVar2 + 0xd2, iVar3 + 0x1e, -1, -1, -1, -1, local_100, 0, 0, 0);
    if (!bVar7 && !bVar6)
    {
        uVar5 = FUN_0041bc20(*(undefined_32 *)(param_1 + 0x568));
        uVar5 = lookup_translation(s__MONDOTEXT_H_0551_Total____s_004b6678, uVar5);
        _sprintf(local_100, uVar5);
        FUN_004173c0(0, iVar2 + 0x154, iVar3 + 0x1e, -1, -1, -1, -1, local_100, 0, 0, 0);
    }
    return;
}

int FUN_0041af00(uint param_1, int param_2, uint param_3, int param_4, int *param_5)

{
    int iVar1;
    int iVar2;
    int iVar3;
    uint uVar4;
    int local_20;
    uint local_1c;
    uint local_18;
    undefined_8 local_14[4];
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    iVar1 = param_1;
    FUN_00417120(0x3f4, &local_18, local_14);
    iVar2 = *(int *)(param_1 + 0x24);
    param_1 = (local_18 + 10) * param_4 - 10;
    if (param_1 < param_3)
    {
        param_1 = param_3;
    }
    else
    {
        iVar2 = iVar2 + ((param_3 >> 1) - (param_1 >> 1));
    }
    FUN_00417120(0x44e, &local_1c, &local_20);
    local_8 = iVar2 + -1 + param_1;
    local_4 = local_20 + -1 + param_2;
    local_c = param_2;
    local_10 = iVar2;
    FUN_00412fb0(iVar1, 0, 0x44e, &local_10, 1, 0);
    FUN_00419030(iVar1, 0, 0, 0);
    FUN_00417120(0x44d, &local_1c, &local_20);
    local_c = param_2;
    local_8 = iVar2 + -5 + local_1c;
    local_4 = local_20 + -1 + param_2;
    local_10 = iVar2 + -4;
    FUN_00412fb0(iVar1, 1, 0x44d, &local_10, 1, 0);
    FUN_00419030(iVar1, 1, 0, 0);
    *param_5 = ((iVar2 + -4) - (local_18 >> 1)) + 2;
    iVar3 = 1;
    if (param_4 == 4)
    {
        uVar4 = (param_1 + local_18 * -3) / 3;
        FUN_00417120(0x44c, &local_1c, &local_20);
        iVar3 = uVar4 + 5 + iVar2;
        local_10 = (local_18 >> 1) + iVar3;
        local_c = param_2;
        local_8 = (local_1c - 1) + local_10;
        local_4 = local_20 + -1 + param_2;
        FUN_00412fb0(iVar1, 2, 0x44c, &local_10, 1, 0);
        FUN_00419030(iVar1, 2, 0, 0);
        param_5[1] = iVar3 + 6;
        iVar3 = iVar3 + uVar4 + local_18;
        local_10 = (local_18 >> 1) + iVar3;
        local_8 = (local_1c - 1) + local_10;
        local_4 = local_20 + -1 + param_2;
        local_c = param_2;
        FUN_00412fb0(iVar1, 3, 0x44c, &local_10, 1, 0);
        FUN_00419030(iVar1, 3, 0, 0);
        param_5[2] = iVar3 + 4;
        iVar3 = 3;
    }
    else if (param_4 == 3)
    {
        FUN_00417120(0x44c, &local_1c, &local_20);
        local_c = param_2;
        local_10 = (iVar2 + (param_1 >> 1)) - (local_1c >> 1);
        local_8 = local_10 + -1 + local_1c;
        local_4 = local_20 + -1 + param_2;
        FUN_00412fb0(iVar1, 2, 0x44c, &local_10, 1, 0);
        FUN_00419030(iVar1, 2, 0, 0);
        iVar3 = 2;
        param_5[1] = (iVar2 - (local_18 >> 1)) + -6 + (param_1 >> 1);
    }
    FUN_00417120(0x44d, &local_1c, &local_20);
    local_c = param_2;
    iVar2 = (iVar2 - local_1c) + 4 + param_1;
    local_8 = iVar2 + -1 + local_1c;
    local_4 = local_20 + -1 + param_2;
    local_10 = iVar2;
    FUN_00412fb0(iVar1, iVar3 + 1, 0x44d, &local_10, 1, 0x400000);
    FUN_00419030(iVar1, iVar3 + 1, 0, 0);
    param_5[iVar3] = ((local_1c >> 1) - (local_18 >> 1)) + iVar2;
    return local_20 + 4;
}

int FUN_0041b260(undefined_32 param_1, undefined_32 param_2, int *param_3, undefined_32 param_4)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int local_c;

    iVar2 = 0;
    iVar3 = 0;
    local_c = 0;
    iVar4 = 0;
    iVar1 = FUN_00416d90(param_1, param_2, -1, 0, 0, 0, 0, 0, 0);
    *(uint *)(iVar1 + 0x20) = *(uint *)(iVar1 + 0x20) | 4;
    if (param_3 != NULL)
    {
        local_c = param_3[1];
        iVar3 = *param_3;
        iVar4 = param_3[2];
        iVar2 = param_3[3];
    }
    FUN_00414b40(iVar1, (iVar4 - iVar3) + 1, (iVar2 - local_c) + 1);
    FUN_00414b60(iVar1, iVar3, local_c);
    FUN_00419830(iVar1, param_4, 0);
    FUN_00414e60(iVar1, 1);
    *(undefined_32 *)(iVar1 + 0x18) = 8;
    return iVar1;
}

void FUN_0041b300(int param_1)

{
    byte bVar1;
    int iVar2;

    if ((param_1 != 0) && (iVar2 = *(int *)(param_1 + 0xc), iVar2 != 0))
    {
        do
        {
            bVar1 = (byte) * (undefined_32 *)(iVar2 + 0x18);
            if ((bVar1 & 0xc) == 0xc)
            {
                if ((bVar1 & 3) != 3)
                {
                    FUN_00412fb0(iVar2, 0, 0, 0, 0, 0);
                    FUN_00412fb0(iVar2, 1, 0, 0, 0, 0);
                    FUN_00412fb0(iVar2, 2, 0, 0, 0, 0);
                }
                *(uint *)(iVar2 + 0x508) = *(uint *)(iVar2 + 0x508) & 0xfff7ffff;
            }
            iVar2 = *(int *)(iVar2 + 4);
        } while (iVar2 != 0);
        FUN_00417ca0(param_1);
    }
    return;
}

undefined_32 FUN_0041b380(int param_1)

{
    int iVar1;

    if (((byte) * (undefined_32 *)(param_1 + 0x18) & 0xc) == 0xc)
    {
        return 1;
    }
    if (((*(uint *)(param_1 + 0x20) & 4) == 0) && ((*(uint *)(param_1 + 0x20) & 0x100) == 0))
    {
        iVar1 = FUN_00414e80(param_1);
        if (iVar1 != 0)
        {
            return 1;
        }
    }
    return 0;
}

int FUN_0041b3c0(int param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = param_1;
    if (param_1 != 0)
    {
        do
        {
            iVar1 = FUN_0041b380(iVar2);
            if ((iVar1 != 0) && (param_1 != iVar2))
            {
                return iVar2;
            }
            iVar2 = *(int *)(iVar2 + 4);
        } while (iVar2 != 0);
    }
    return iVar2;
}

int *FUN_0041b3f0(int *param_1)

{
    int iVar1;
    int *piVar2;

    piVar2 = param_1;
    if (param_1 != NULL)
    {
        do
        {
            iVar1 = FUN_0041b380(piVar2);
            if ((iVar1 != 0) && (param_1 != piVar2))
            {
                return piVar2;
            }
            piVar2 = (int *)*piVar2;
        } while (piVar2 != NULL);
    }
    return piVar2;
}

void FUN_0041b420(int param_1)

{
    int iVar1;
    undefined_32 uVar2;

    iVar1 = FUN_00411810();
    if (((*(int *)(DAT_0050c454 + 8) == 1)
         && (((param_1 == 9 || ((0x24 < param_1 && (param_1 < 0x29)))) && (DAT_004d87c8 == 0))))
        && ((iVar1 != 0 && (*(int *)(iVar1 + 0xc) != 0))))
    {
        uVar2 = FUN_0041b3c0(*(int *)(iVar1 + 0xc), 1);
        FUN_00414f10(uVar2);
    }
    return;
}

void FUN_0041b470(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;

    iVar1 = FUN_00414d90(param_1, 4);
    if (iVar1 != 0)
    {
        FUN_00414e60(iVar1, param_2);
        *(uint *)(iVar1 + 0x20) = *(uint *)(iVar1 + 0x20) | 4;
    }
    iVar1 = FUN_00414d90(param_1, 2);
    if (iVar1 != 0)
    {
        FUN_00414e60(iVar1, param_3);
        *(uint *)(iVar1 + 0x20) = *(uint *)(iVar1 + 0x20) | 4;
    }
    return;
}

void FUN_0041b4d0(int param_1)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int local_570[348];

    if (param_1 != 0)
    {
        piVar3 = local_570;
        MEMSET(iVar1, piVar3, 0, 0x15c)
        iVar1 = FUN_004137d0(param_1);
        while (iVar2 = local_570[3], iVar1 != 0)
        {
            iVar1 = *(int *)(param_1 + 0xc);
            iVar2 = iVar1;
            for (; iVar1 != 0; iVar1 = *(int *)(iVar1 + 4))
            {
                if ((*(int *)(iVar1 + 0x18) == 0xc) && (*(uint *)(iVar1 + 0x528) < *(uint *)(iVar2 + 0x528)))
                {
                    iVar2 = iVar1;
                }
            }
            FUN_00416890(iVar2);
            FUN_00416840(local_570, iVar2);
            iVar1 = FUN_004137d0(param_1);
        }
        while (iVar2 != 0)
        {
            local_570[3] = iVar2;
            FUN_00416890(iVar2);
            FUN_00416840(param_1, iVar2);
            iVar2 = local_570[3];
        }
        FUN_00417ca0(param_1);
    }
    return;
}

int **FUN_0041b590(int **param_1)

{
    int **ppiVar1;

    if (param_1 == NULL)
    {
        return NULL;
    }
    ppiVar1 = param_1 + 7;
    do
    {
        if (((*(byte *)(param_1 + 8) & 0x80) != 0) && ((int *)(*param_1)[7] != *ppiVar1))
            break;
        param_1 = (int **)*param_1;
    } while (param_1 != NULL);
    while (true)
    {
        if (param_1 == NULL)
        {
            return NULL;
        }
        if ((param_1[6] == (int *)0xa) && (((uint)param_1[8] & 0x20000) != 0))
            break;
        param_1 = (int **)param_1[1];
    }
    return param_1;
}

int **FUN_0041b5e0(int **param_1, int *param_2)

{
    int **ppiVar1;

    if (param_1 == NULL)
    {
        return NULL;
    }
    ppiVar1 = param_1 + 7;
    do
    {
        if (((*(byte *)(param_1 + 8) & 0x80) != 0) && ((int *)(*param_1)[7] != *ppiVar1))
            break;
        param_1 = (int **)*param_1;
    } while (param_1 != NULL);
    while (true)
    {
        if (param_1 == NULL)
        {
            return NULL;
        }
        if (((param_1[6] == (int *)0xa) && (param_1[7] == *ppiVar1)) && (param_1[0x150] == param_2))
            break;
        param_1 = (int **)param_1[1];
    }
    return param_1;
}

void __fastcall FUN_0041b630(undefined_32 param_1_00, uint param_2, int param_1)

{
    if ((*(byte *)(param_1 + 0x20) & 0x20) != 0)
    {
        FUN_00414be0(param_1, param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4d0),
                     *(undefined_8 *)(param_1 + 0x4d1), param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4d2),
                     *(undefined_8 *)(param_1 + 0x4d3));
        return;
    }
    FUN_00414be0(param_1, param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c4), *(undefined_8 *)(param_1 + 0x4c5),
                 param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x4c6), *(undefined_8 *)(param_1 + 0x4c7));
    return;
}

void FUN_0041b690(void)

{
    if (((DAT_004b5d7c != 0) && (DAT_004d87b0 == 0)) && (DAT_004d87b4 != 0))
    {
        FUN_00414d00(DAT_004d87b4);
        DAT_004d87b4 = 0;
        FUN_00414e60(DAT_004d87b8, 1);
        FUN_004151a0(DAT_004d87b8, 100, DAT_004d87ac, 0);
        DAT_004d87b8 = 0;
        DAT_004b5d7c = 0;
    }
    return;
}

undefined_32 FUN_0041b700(void)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_004e9ebc != 0)
    {
        return 0;
    }
    puVar2 = &DAT_004e9d18;
    MEMSET(iVar1, puVar2, 0, 100)
    puVar2 = &DAT_004e9918;
    MEMSET(iVar1, puVar2, 0, 0x100)
    DAT_004e9ec0 = 0;
    DAT_004b6710 = 1;
    FUN_0041ba00();
    DAT_004e9ebc = 1;
    return 1;
}

void FUN_0041b750(int param_1, undefined_32 param_2)

{
    (&DAT_004e9d18)[param_1] = param_2;
    return;
}

undefined_32 FUN_0041b760(int param_1, undefined_32 param_2, uint param_3, int param_4)

{
    undefined_32 uVar1;

    param_3 = param_3 & DAT_004e9eac;
    uVar1 = 1;
    if (param_3 == 0)
    {
        return 1;
    }
    *(undefined_32 *)(param_1 + 0x1c) = DAT_004eb3b4;
    if ((param_3 & 1) == 0)
        goto LAB_0041b7dc;
    if (param_4 == 0)
    {
    LAB_0041b7ca:
        *(undefined_16 *)(param_1 + 0x26) = 0;
    }
    else
    {
        if (DAT_004b6710 == 0)
        {
            DAT_004b6710 = 1;
        }
        *(short *)(param_1 + 0x26) = DAT_004b6710;
        DAT_004b6710 = DAT_004b6710 + 1;
        *(undefined_32 *)(param_1 + 0xc) = param_2;
        FUN_0041b950(param_1);
        if (*(int *)(param_1 + 0x14) == 0)
            goto LAB_0041b7ca;
    }
    uVar1 = FUN_004047b0(param_1, param_2);
LAB_0041b7dc:
    if ((param_3 & 4) != 0)
    {
        FUN_00426910(param_1);
    }
    return uVar1;
}

int FUN_0041b7f0(void)

{
    int iVar1;
    int iVar2;

    iVar2 = 0;
    iVar1 = FUN_0041d6b0();
    if (iVar1 == 0)
    {
        return 0;
    }
    if (DAT_004e9eb0 == 0)
    {
        return 0;
    }
    DAT_004e9ea8 = 0;
    do
    {
        iVar1 = FUN_00404880(&DAT_00ec7ba0);
        if (iVar1 != 1)
            break;
        iVar2 = iVar2 + 1;
        if (DAT_00ec7bbc == 0)
        {
            FUN_0041b940(&DAT_00ec7ba0);
        }
        else
        {
            iVar1 = FUN_0041d350(DAT_00ec7bbc);
            if ((((iVar1 < 0) && (DAT_00ec7bc4 != 0x21)) && (DAT_00ec7bc4 != 0x22))
                && ((DAT_00ec7bc4 != 0x28 && (DAT_00ec7bc4 != 0x20))))
            {
                if (DAT_004eb1c8 != 0)
                {
                    FUN_0041d2a0(DAT_00ec7bbc);
                }
            }
            else
            {
                if (DAT_00ec7bc6 != 0)
                {
                    FUN_0041b960(DAT_00ec7bbc, DAT_00ec7bc6);
                    iVar1 = FUN_0041b9a0(DAT_00ec7bbc, DAT_00ec7bc6);
                    if (iVar1 != 0)
                        goto LAB_0041b8cf;
                }
                FUN_0041b8f0(&DAT_00ec7ba0);
            }
        }
    LAB_0041b8cf:
    } while (DAT_004e9ea8 == 0);
    FUN_00426910();
    return iVar2;
}

undefined_32 FUN_0041b8f0(int param_1)

{
    undefined_32 uVar1;

    if ((*(ushort *)(param_1 + 0x24) < 100) && ((code *)(&DAT_004e9d18)[*(ushort *)(param_1 + 0x24)] != (code *)0x0))
    {
        uVar1 = (*(code *)(&DAT_004e9d18)[*(ushort *)(param_1 + 0x24)])(param_1);
        return uVar1;
    }
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041b920(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_004d9418;
    MEMSET(iVar1, puVar2, 0, 0x4140)
    _DAT_004e9eb8 = 0;
    return;
}

undefined_32 FUN_0041b940(void)

{
    return 1;
}

void FUN_0041b950(int param_1)

{
    *(undefined_32 *)(param_1 + 0x14) = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041b960(undefined_32 param_1, undefined_16 param_2)

{
    _DAT_004d8c16 = 0;
    _DAT_004d8c18 = param_2;
    _DAT_004d8bfc = param_1;
    _DAT_004d8c14 = 0x28;
    _DAT_004d8c10 = 2;
    FUN_004047b0(&DAT_004d8bf0, param_1);
    return;
}

undefined_32 FUN_0041b9a0(int param_1, int param_2)

{
    int *piVar1;

    piVar1 = &DAT_004e991c;
    while ((param_1 != piVar1[-1] || (param_2 != *piVar1)))
    {
        piVar1 = piVar1 + 2;
        if ((int *)((int)&DAT_004e9d18 + 3) < piVar1)
        {
            (&DAT_004e9918)[DAT_004e9ec0 * 2] = param_1;
            (&DAT_004e991c)[DAT_004e9ec0 * 2] = param_2;
            DAT_004e9ec0 = DAT_004e9ec0 + 1;
            if (0x7f < DAT_004e9ec0)
            {
                DAT_004e9ec0 = 0;
            }
            return 0;
        }
    }
    return 1;
}

void FUN_0041ba00(void)

{
    FUN_0041b750(0x22, &LAB_0041ce60);
    FUN_0041b750(0x21, &LAB_0041cb90);
    FUN_0041b750(0x20, &LAB_0041ccd0);
    FUN_0041b750(2, &LAB_0041d160);
    FUN_0041b750(0x26, &LAB_0041d1d0);
    FUN_0041b750(0x27, &LAB_0041d200);
    FUN_0041b750(0x29, &LAB_00404a70);
    FUN_0041b750(0x28, &LAB_0041bba0);
    FUN_0041b750(0x2a, &LAB_0041d2f0);
    FUN_0041b750(0x24, &LAB_0041d0b0);
    FUN_0041b750(0x2c, &LAB_0041d5b0);
    FUN_0041b750(0x2d, &LAB_0041d540);
    FUN_0041b750(0x2e, &LAB_0041d600);
    FUN_0041b750(0x32, FUN_0041d6f0);
    FUN_0041b750(0x2f, &LAB_0041d0b0);
    FUN_0041b750(0x33, &LAB_0041dca0);
    FUN_0041b750(0x34, &LAB_0041dce0);
    FUN_0041b750(0x35, &LAB_0041dd20);
    FUN_0041b750(0x36, &LAB_0041de60);
    FUN_0041b750(0x17, &LAB_0041e260);
    FUN_0041b750(0x37,
                 &LAB_0041e590); // static import std::locale:classic(void)
    FUN_0041b750(0x38, &LAB_0041e620);
    FUN_0041b750(0x39, &LAB_0041e6c0);
    FUN_0041b750(0x3a, FUN_0041c330);
    FUN_0041b750(0x3b,
                 &LAB_0041c3e0); // static import std::locale::classic(void)
    FUN_0041b750(0x3c, &LAB_0041c490);
    FUN_0041b750(0x3d, &LAB_0041c490);
    return;
}

undefined_8 *FUN_0041bc20(void)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar1 = __ftol();
    iVar2 = __ftol();
    iVar3 = __ftol();
    if (iVar3 == 100)
    {
        iVar3 = 0;
        iVar2 = iVar2 + 1;
        if (iVar2 == 0x3c)
        {
            iVar1 = iVar1 + 1;
        }
    }
    if (iVar1 != 0)
    {
        _sprintf(&DAT_004e9f20, s__d___2d___2d_004b6738, iVar1);
        return &DAT_004e9f20;
    }
    _sprintf(&DAT_004e9f20, s___2d___2d_004b672c, iVar2, iVar3);
    return &DAT_004e9f20;
}

undefined_8 *FUN_0041bcc0(int param_1)

{
    return &DAT_00e9f3c4 + param_1 * 0xb0;
}

undefined_8 *FUN_0041bce0(int param_1)

{
    FUN_0048c380(&DAT_004ead88, &DAT_00e9f3c4 + param_1 * 0xb0, 0x20);
    return &DAT_004ead88;
}

undefined_8 *FUN_0041bd10(void)

{
    int iVar1;
    undefined_8 local_104[88];
    undefined_8 local_ac[172];

    iVar1 = FUN_00486f50(local_104);
    if (iVar1 == 0)
    {
        FUN_0048c380(&DAT_004ea098, local_ac, 0x40);
        return &DAT_004ea098;
    }
    return NULL;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041bd50(undefined_32 param_1)

{
    _DAT_004eb1e0 = param_1;
    return;
}

void FUN_0041bd60(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_004e9ed8;
    MEMSET(iVar1, puVar2, 0, 0xf)
    puVar2 = &DAT_004ea940;
    MEMSET(iVar1, puVar2, 0, 0xf)
    puVar2 = &DAT_004eb188;
    MEMSET(iVar1, puVar2, 0, 0xf)
    return;
}

void FUN_0041bd90(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;

    DAT_004eb224 = param_2;
    DAT_004eb228 = param_3;
    DAT_004eb1dc = param_1;
    iVar1 = 0;
    do
    {
        FUN_0041e7c0(iVar1);
        iVar1 = iVar1 + 1;
    } while (iVar1 < 0xf);
    return;
}

void FUN_0041bdd0(void)

{
    char cVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    undefined_32 *puVar5;
    char *pcVar6;
    char *pcVar7;
    undefined_32 *puVar8;

    if (DAT_004eb1dc != 0)
    {
        FUN_0041e880();
        DAT_004eb1c4 = 4;
        puVar5 = &DAT_004ea988;
        MEMSET(iVar2, puVar5, 0, 0x100)
        uVar3 = -1;
        pcVar6 = &DAT_004b6748;
        do
        {
            pcVar7 = pcVar6;
            if (uVar3 == 0)
                break;
            uVar3 = uVar3 - 1;
            pcVar7 = pcVar6 + 1;
            cVar1 = *pcVar6;
            pcVar6 = pcVar7;
        } while (cVar1 != '\0');
        uVar3 = ~uVar3;
        iVar2 = -1;
        puVar5 = &DAT_004ea988;
        do
        {
            puVar8 = puVar5;
            if (iVar2 == 0)
                break;
            iVar2 = iVar2 + -1;
            puVar8 = (undefined_32 *)((int)puVar5 + 1);
            cVar1 = *(char *)puVar5;
            puVar5 = puVar8;
        } while (cVar1 != '\0');
        puVar5 = (undefined_32 *)(pcVar7 + -uVar3);
        puVar8 = (undefined_32 *)((int)puVar8 + -1);
        QMEMCPY(uVar4, puVar5, puVar8, uVar3 >> 2)
        for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
        {
            *(undefined_8 *)puVar8 = *(undefined_8 *)puVar5;
            puVar5 = (undefined_32 *)((int)puVar5 + 1);
            puVar8 = (undefined_32 *)((int)puVar8 + 1);
        }
        FUN_00411730(1);
        FUN_00411740(DAT_004eb224, DAT_004eb228, 1, 7);
        DAT_004e9ecc = DAT_004b2940;
        DAT_004b2940 = 1;
        DAT_004eb22c = 1;
        DAT_00ea0250 = 1;
        DAT_004b2948 = 0;
    }
    return;
}

void FUN_0041be80(int param_1)

{
    char cVar1;
    undefined_32 uVar2;
    int iVar3;
    uint uVar4;
    undefined_32 *puVar5;
    undefined_8 local_400[1024];

    if ((DAT_004eb1dc != 0) && (DAT_00ea0250 != 0))
    {
        if (DAT_004eb22c != 0)
        {
            DAT_004eb22c = 0;
            return;
        }
        switch (param_1)
        {
        case 8:
            if (4 < DAT_004eb1c4)
            {
                _memcpy(DAT_004eb1c4 + 0x4ea987, (int)&DAT_004ea988 + DAT_004eb1c4, 0x400 - DAT_004eb1c4);
                DAT_004eb1c4 = DAT_004eb1c4 - 1;
                DAT_004ead87 = 0;
            }
            break;
        default:
            if (DAT_004d1f9c < 2)
            {
                uVar4 = *(ushort *)(PTR_DAT_004d1d90 + param_1 * 2) & 0x107;
            }
            else
            {
                uVar4 = __isctype(param_1, 0x107);
            }
            if ((((uVar4 != 0) || (param_1 == 0x20)) && (DAT_004eb1c4 < 0x400))
                && ((param_1 != 0x20 || (DAT_004eb1c4 != 0))))
            {
                _memcpy(DAT_004eb1c4 + 0x4ea989, (int)&DAT_004ea988 + DAT_004eb1c4, 0x3ff - DAT_004eb1c4);
                *(char *)((int)&DAT_004ea988 + DAT_004eb1c4) = (char)param_1;
                DAT_004eb1c4 = DAT_004eb1c4 + 1;
            }
            break;
        case 0xd:
            FUN_00411730(0);
            DAT_00ea0250 = 0;
            DAT_004b2948 = 1;
            DAT_004b2940 = DAT_004e9ecc;
            uVar2 = FUN_0041bce0(DAT_004eb3b4, &DAT_004ea98c);
            uVar2 = lookup_translation(s__MONDOTEXT_H_0393__s_says___s__004b6750, uVar2);
            _sprintf(local_400, uVar2);
            FUN_0041c190(local_400);
            break;
        case 0x1b:
            FUN_00411730(0);
            DAT_004b2940 = DAT_004e9ecc;
            DAT_00ea0250 = 0;
            DAT_004b2948 = 1;
            break;
        case 0x23:
            uVar4 = -1;
            puVar5 = &DAT_004ea988;
            do
            {
                if (uVar4 == 0)
                    break;
                uVar4 = uVar4 - 1;
                cVar1 = *(char *)puVar5;
                puVar5 = (undefined_32 *)((int)puVar5 + 1);
            } while (cVar1 != '\0');
            DAT_004eb1c4 = ~uVar4 - 1;
            break;
        case 0x24:
            DAT_004eb1c4 = 0;
            break;
        case 0x25:
            if (DAT_004eb1c4 != 0)
            {
                DAT_004eb1c4 = DAT_004eb1c4 - 1;
            }
            break;
        case 0x27:
            uVar4 = -1;
            puVar5 = &DAT_004ea988;
            do
            {
                if (uVar4 == 0)
                    break;
                uVar4 = uVar4 - 1;
                cVar1 = *(char *)puVar5;
                puVar5 = (undefined_32 *)((int)puVar5 + 1);
            } while (cVar1 != '\0');
            if (DAT_004eb1c4 < ~uVar4 - 1)
            {
                DAT_004eb1c4 = DAT_004eb1c4 + 1;
            }
            break;
        case 0x2e:
            break;
        }
        iVar3 = FUN_00418680(&DAT_004ea98c, 0, 0, DAT_004eb1c4 - 4);
        FUN_00411740(iVar3 + 5 + DAT_004eb224, DAT_004e9f18, 1, 7);
    }
    return;
}

void FUN_0041c130(undefined_32 param_1)

{
    int iVar1;
    uint uVar2;

    FUN_0041e880();
    FUN_0041e800(param_1);
    iVar1 = FUN_00414d90(0, 0x186b4);
    FUN_00417fe0(iVar1, param_1, 0);
    uVar2 = FUN_004137d0(iVar1);
    if (6 < uVar2)
    {
        *(uint *)(iVar1 + 0x504) = uVar2 - 6;
        FUN_00417ca0(iVar1);
    }
    return;
}

void FUN_0041c190(char *param_1)

{
    int iVar2;

    if (param_1 != NULL)
    {
        iVar2 = strlen(param_1);
        if (iVar2 != 1)
        {
            FUN_0041d0c0(param_1, -1, DAT_004eb3b4);
            FUN_0041c130(param_1);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c1d0(void)

{
    DWORD DVar1;
    DWORD systemTime;

    systemTime = timeGetTime();
    if (DAT_004d5e00 != 0)
    {
        DVar1 = DAT_004eb230;
        if (DAT_004eb230 + DAT_004b6718 < systemTime)
        {
            if (_DAT_004eb1e0 != 0)
            {
                FUN_0041da00(); // called in race
            }
            DVar1 = systemTime;
            if (_DAT_004eb1e4 != 0)
            {
                FUN_00420d10(); // called on results screen
            }
        }
        DAT_004eb230 = DVar1;
        if (DAT_004eb1dc != 0)
        {
            FUN_0041e880(); // called in race and results screen
            FUN_0041e920();
        }
        if (DAT_00ea0250 != 0)
        {
            DAT_004d6b44 = 0;
            DAT_004d6b48 = 0;
            DAT_004d6b40 = 0;
            DAT_00e98eb0 = 0;
            FUN_00405cf0(-1);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c260(void)

{
    int *piVar1;
    int iVar2;

    iVar2 = 0;
    piVar1 = &DAT_00ea0260;
    do
    {
        *piVar1 = iVar2;
        piVar1 = piVar1 + 1;
        iVar2 = iVar2 + 1;
    } while ((int)piVar1 < 0xea02b0);
    _DAT_00ea02b0 = 0;
    DAT_00ea02b4 = 0;
    DAT_00ea02b8 = 3;
    DAT_00ea02bc = 10000;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c2a0(void)

{
    undefined_32 uVar1;
    undefined_32 uVar2;
    int iVar3;
    undefined_32 *puVar4;
    undefined_32 *puVar5;

    uVar2 = DAT_00ea02b8;
    uVar1 = _DAT_00ea02b0;
    if (DAT_004d5e00 != 0)
    {
        puVar4 = &DAT_00ea0260;
        puVar5 = &DAT_00ec7bc8;
        QMEMCPY(iVar3, puVar4, puVar5, 0x14)
        DAT_00ec7c18 = uVar1;
        DAT_00ec7c1c = DAT_00ea02b4;
        DAT_00ec7c20 = uVar2;
        DAT_00ec7c24 = DAT_00ea02bc;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x3a;
        _DAT_00ec7bc0 = 0x60;
        FUN_0041b760(&DAT_00ec7ba0, -1, 1, 0);
        FUN_00411120(0x3a, &DAT_00ec7bc8);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0041c330(int param_1)

{
    undefined_32 *puVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;

    puVar3 = &DAT_00ea0260;
    puVar1 = (undefined_32 *)(param_1 + 0x28);
    do
    {
        puVar2 = puVar1;
        *puVar3 = *puVar2;
        puVar3 = puVar3 + 1;
        puVar1 = puVar2 + 1;
    } while ((int)puVar3 < 0xea02b0);
    _DAT_00ea02b0 = puVar2[1];
    DAT_00ea02b4 = puVar2[2];
    DAT_00ea02b8 = puVar2[3];
    DAT_00ea02bc = puVar2[4];
    FUN_00411120(*(undefined_16 *)(param_1 + 0x24), (undefined_32 *)(param_1 + 0x28));
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c390(void)

{
    if (DAT_004d5e00 != 0)
    {
        DAT_00ec7bc8 = DAT_004eb3b4;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x3b;
        _DAT_00ec7bc0 = 4;
        FUN_0041b760(&DAT_00ec7ba0, DAT_00ec7620, 1, 0);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c3f0(undefined_32 param_1)

{
    if (DAT_004d5e00 != 0)
    {
        DAT_00ec7bc8 = DAT_004eb3b4;
        DAT_00ec7bcc = param_1;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x3d;
        _DAT_00ec7bc0 = 8;
        FUN_0041b760(&DAT_00ec7ba0, DAT_00ec7620, 1, 0);
        DAT_004eb234 = param_1;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c450(void)

{
    if (DAT_004d5e00 != 0)
    {
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x3c;
        _DAT_00ec7bc0 = 0;
        FUN_0041b760(&DAT_00ec7ba0, -1, 1, 0);
    }
    return;
}

undefined_32 FUN_0041c4d0(int param_1)

{
    return (&DAT_00ea0260)[param_1];
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0041c4e0(void)

{
    return _DAT_00ea02b0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0041c4f0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    DAT_004e9eac = DAT_004e9eac | 1;
    puVar2 = &DAT_004ea8a0;
    MEMSET(iVar1, puVar2, 0, 0x14)
    _DAT_004eb1d4 = 0;
    DAT_004e9eb0 = DAT_004e9eb0 | 1;
    _DAT_004eb1d0 = 0;
    DAT_004eb1f8 = 0;
    FUN_0041b920();
    DAT_00ea05a0 = 0;
    DAT_00ea05a4 = 0;
    DAT_00ea05a8 = 0;
    DAT_00ea05ac = 0;
    DAT_00ea05b0 = 0;
    FUN_0041bd60();
    DAT_004b6714 = -1;
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c570(void)

{
    FUN_0041bd90(0, 0, 0);
    DAT_004e9eac = DAT_004e9eac & 0xfffffffe;
    DAT_004e9eb0 = DAT_004e9eb0 & 0xfffffffe;
    _DAT_004eb1cc = 0;
    DAT_004eb1c8 = 0;
    FUN_004049e0();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

int FUN_0041c5c0(int param_1, undefined_32 *param_2, undefined_32 param_3, char *param_4, undefined_32 param_5)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 local_108[4];
    undefined_32 local_f8;
    undefined_8 local_f0[62];
    undefined_16 local_b2;
    undefined_8 local_b0[62];
    undefined_16 local_72;
    char local_70[31];
    undefined_8 local_51;
    undefined_8 local_50[62];
    undefined_16 local_12;
    int local_10;
    undefined_32 local_c;
    undefined_32 local_8;

    iVar2 = 0;
    do
    {
        FUN_004210e0(iVar2);
        uVar1 = param_1;
        iVar2 = iVar2 + 1;
    } while (iVar2 < 0x14);
    puVar3 = local_108;
    MEMSET(iVar2, puVar3, 0, 0x41)
    _wcsncpy(local_f0, param_1, 0x1f);
    local_b2 = 0;
    _wcsncpy(local_b0, param_2, 0x1f);
    local_72 = 0;
    _strncpy(local_70, param_4, 0x1f);
    local_51 = 0;
    _wcsncpy(local_50, param_3, 0x1f);
    local_12 = 0;
    local_8 = param_5;
    local_f8 = 0x14;
    iVar2 = _rand();
    param_2 = &param_1;
    param_4 = (char *)((float)iVar2 * 3.051851e-05 * 4.294967e+09);
    _DAT_004eb1f4 = (int)ROUND(ROUND((float)param_4));
    local_c = 1;
    param_1 = _DAT_004eb1f4;
    local_10 = _DAT_004eb1f4;
    if (DAT_004d5e00 == 0)
    {
        iVar2 = FUN_00404a20(local_108);
    }
    else
    {
        iVar2 = FUN_00486e60(local_108);
        if (iVar2 == 0)
            goto LAB_0041c6dc;
        FUN_00487180();
    }
    if (iVar2 != 0)
    {
        return iVar2;
    }
LAB_0041c6dc:
    DAT_004eb1c8 = 1;
    _DAT_004eb1cc = 1;
    _DAT_00ec7624 = 0;
    DAT_00ec7620 = DAT_004d5e08;
    FUN_004871b0(0);
    DAT_004eb3b8 = 0;
    FUN_00421020(0, DAT_004d5e08);
    DAT_004eb3b4 = 0;
    _wcsncpy(&DAT_00e9f3c4, uVar1, 0x1f);
    _DAT_00e9f402 = 0;
    _wcsncpy(&DAT_00e9f380, uVar1, 0x1f);
    _DAT_00e9f3be = 0;
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c760(void)

{
    _DAT_004eb1cc = 1;
    DAT_00ec7620 = 0;
    DAT_004eb1c8 = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c780(int param_1)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_8 local_400[1024];

    if ((DAT_004eb1f8 != 0) && (param_1 == DAT_004eb1fc))
    {
        platform_noop(1);
    }
    iVar1 = FUN_0041d350(param_1);
    if (-1 < iVar1)
    {
        FUN_0041cae0(iVar1);
        if (DAT_004b6714 == -1)
        {
            FUN_0041df10(-1, 1, MAGIC('l', 'o', 's', 't'), iVar1);
        }
        else
        {
            FUN_0041c990();
        }
        if (iVar1 <= _DAT_004b671c)
        {
            _DAT_004b671c = iVar1;
        }
        if ((DAT_004eb1c8 != 0) && ((&DAT_004ea8a0)[iVar1] == 0))
        {
            uVar2 = FUN_0041bce0(iVar1);
            uVar2 = lookup_translation(s__MONDOTEXT_H_0423__s_has_left_th_004b6770, uVar2);
            _sprintf(local_400, uVar2);
            FUN_0041c190(local_400);
            FUN_0041c870(iVar1);
            FUN_00411120(0x3e, iVar1);
        }
        (&DAT_004ea8a0)[iVar1] = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041c870(uint param_1)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    int iVar4;

    if (param_1 < DAT_004eb3b8 - 1U)
    {
        _DAT_004b6720 = 0x1b207;
        iVar4 = 0x1b207;
        iVar3 = 0;
        do
        {
            iVar1 = FUN_00420f70(iVar3);
            if (iVar1 != 0)
            {
                iVar4 = iVar3;
            }
            iVar3 = iVar3 + 1;
        } while (iVar3 < 0x14);
        if (iVar4 != 0x1b207)
        {
            (&DAT_004ea8a0)[iVar4] = 1;
            uVar2 = FUN_0041d380(iVar4, 1, MAGIC('r', 'e', 'j', 'n'));
            FUN_0041df10(uVar2);
        }
    }
    return;
}

void FUN_0041c8e0(void)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    int *piVar4;

    iVar3 = 0;
    piVar4 = &DAT_00ea04e0;
    do
    {
        iVar1 = FUN_00420f70(iVar3);
        if (((iVar1 != 0) && (iVar3 != DAT_004eb3b4)) && (*piVar4 == 0))
        {
            DAT_004b6714 = iVar3;
            uVar2 = FUN_0041d380(iVar3, 1, MAGIC('p', 'r', 'x', 'y'));
            FUN_0041df10(uVar2);
            FUN_0041c940();
        }
        piVar4 = piVar4 + 1;
        iVar3 = iVar3 + 1;
    } while ((int)piVar4 < 0xea0530);
    return;
}

void FUN_0041c940(void)

{
    int iVar1;
    int *piVar2;
    undefined_32 *puVar3;

    puVar3 = &DAT_004ea8f0;
    piVar2 = &DAT_00e29c44;
    do
    {
        iVar1 = *piVar2;
        if ((iVar1 != 0) && ((*(uint *)(iVar1 + 0x60) & 0x80) != 0))
        {
            *(uint *)(iVar1 + 0x60) = *(uint *)(iVar1 + 0x60) & 0xffffff7f | 0x40;
            *(undefined_32 *)(*(int *)(iVar1 + 0x1e70) + 4) = MAGIC('R', 'E', 'M', 'O');
            *puVar3 = MAGIC('R', 'E', 'M', 'O');
        }
        piVar2 = piVar2 + 0x22;
        puVar3 = puVar3 + 1;
    } while ((int)piVar2 < 0xe2a6e4);
    return;
}

void FUN_0041c990(int param_1)

{
    int iVar1;

    if ((DAT_004eb1c8 != 0) || (DAT_004b6714 != -1))
    {
        iVar1 = (&DAT_00e29c44)[param_1 * 0x22];
        if (iVar1 != 0)
        {
            *(uint *)(iVar1 + 0x60) = *(uint *)(iVar1 + 0x60) & 0xffffffbf | 0x80;
            *(undefined_32 *)(*(int *)(iVar1 + 0x1e70) + 4) = MAGIC('A', 'A', 'I', 'I');
            (&DAT_004ea8f0)[param_1] = MAGIC('A', 'A', 'I', 'I');
        }
    }
    return;
}

void FUN_0041c9e0(undefined_32 param_1)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_8 local_400[1024];

    iVar1 = FUN_0041d350(param_1);
    if (DAT_004eb1c8 != 0)
    {
        uVar2 = FUN_0041bce0(iVar1);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0424__s_has_joined_t_004b6798, uVar2);
        _sprintf(local_400, uVar2);
        FUN_0041c190(local_400);
    }
    (&DAT_004ea8a0)[iVar1] = 0;
    FUN_00411120(0x3f, iVar1);
    return;
}

void FUN_0041ca50(undefined_32 param_1)

{
    undefined_32 uVar1;
    undefined_32 uVar2;
    undefined_8 local_400[1024];

    DAT_004eb388 = 1;
    DAT_004eb1c8 = 1;
    FUN_0041df10(-1, 1, MAGIC('c', 't', 'r', 'l'));
    uVar1 = FUN_0041d350(param_1);
    uVar2 = FUN_0041bce0(uVar1);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0425__s_is_now_the_h_004b67c4, uVar2);
    _sprintf(local_400, uVar2);
    FUN_0041c190(local_400);
    FUN_0041c2a0();
    FUN_00411120(0x40, uVar1);
    return;
}

void FUN_0041cae0(int param_1)

{
    if ((&DAT_00e9f448)[param_1 * 0x2c] == DAT_00ec7620)
    {
        DAT_00ec7620 = 0;
    }
    FUN_00420ff0(param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041cb20(undefined_32 param_1, int param_2, undefined_32 param_3)

{
    DAT_00ec7bc8 = param_2;
    DAT_00ec7bcc = param_1;
    _wcsncpy(&DAT_00ec7bd0, &DAT_00e9f3c4 + param_2 * 0xb0, 0xf);
    DAT_00ec7bc4 = 0x21;
    DAT_00ec7bec._2_2_ = 0;
    _DAT_00ec7ba4 = 0;
    _DAT_00ec7bc0 = 0x28;
    FUN_0041b760(&DAT_00ec7ba0, param_3, 1, 1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041cbd0(undefined_32 param_1, undefined_32 param_2)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    uint *_Dest;
    uint *puVar4;
    uint *puVar5;
    char local_20[15];
    undefined_8 local_11;

    DAT_00ec7bc8 = DAT_00ec7620;
    DAT_00ec7bcc._0_2_ = (undefined_16)DAT_004eb3b8;
    uVar3 = 0;
    _Dest = (uint *)((int)&DAT_00ec7bcc + 2);
    if (DAT_004eb3b8 != 0)
    {
        puVar5 = (uint *)&DAT_00e9f444;
        uVar2 = DAT_004eb3b8;
        puVar4 = _Dest;
        do
        {
            uVar1 = *puVar5;
            *puVar4 = uVar1;
            _Dest = puVar4 + 1;
            if ((uVar1 & 4) != 0)
            {
                FUN_0048c380(local_20, puVar5 + -0x20, 0xf);
                local_11 = 0;
                _strncpy((char *)_Dest, local_20, 0xf);
                *(undefined_8 *)((int)puVar4 + 0x13) = 0;
                FUN_0048c380(local_20, puVar5 + -0x10, 0xf);
                local_11 = 0;
                _strncpy((char *)(puVar4 + 5), local_20, 0xf);
                uVar2 = puVar5[1];
                uVar1 = puVar5[2];
                *(undefined_8 *)((int)puVar4 + 0x23) = 0;
                puVar4[9] = uVar2;
                uVar2 = DAT_004eb3b8;
                puVar4[10] = uVar1;
                _Dest = puVar4 + 0xb;
            }
            uVar3 = uVar3 + 1;
            puVar5 = puVar5 + 0x2c;
            puVar4 = _Dest;
        } while (uVar3 < uVar2);
    }
    _DAT_00ec7bc0 = _Dest + -0x3b1ef2;
    _DAT_00ec7ba4 = 0;
    DAT_00ec7bc4 = 0x20;
    FUN_0041b760(&DAT_00ec7ba0, param_1, 1, param_2);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041cde0(undefined_32 param_1)

{
    _wcsncpy(&DAT_00ec7bc8, &DAT_00e9f380, 0xf);
    DAT_00ec7be4._2_2_ = 0;
    _wcsncpy(&DAT_00ec7be8, &DAT_00ec8c00, 0x1f);
    DAT_00ec7c24._2_2_ = 0;
    DAT_00ec7c28 = DAT_00e9f364;
    _DAT_00ec7bc0 = 100;
    _DAT_00ec7ba4 = 0;
    DAT_00ec7bc4 = 0x22;
    FUN_0041b760(&DAT_00ec7ba0, param_1, 1, 0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041d060(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    DAT_00ec7bc8 = param_1;
    DAT_00ec7bcc = param_2;
    _DAT_00ec7bc0 = 8;
    _DAT_00ec7ba4 = 0;
    DAT_00ec7bc4 = 0x24;
    FUN_0041b760(&DAT_00ec7ba0, param_3, 1, 0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041d0c0(char *param_1, undefined_32 param_2, undefined_32 param_3)

{
    char cVar1;
    uint uVar2;
    char *pcVar3;

    if ((DAT_004d5e00 != 0) && (param_1 != NULL))
    {
        uVar2 = -1;
        pcVar3 = param_1;
        do
        {
            if (uVar2 == 0)
                break;
            uVar2 = uVar2 - 1;
            cVar1 = *pcVar3;
            pcVar3 = pcVar3 + 1;
        } while (cVar1 != '\0');
        uVar2 = ~uVar2;
        if (0x7f < uVar2)
        {
            uVar2 = 0x80;
        }
        DAT_00ec7bc8 = param_2;
        DAT_00ec7bcc = param_3;
        DAT_00ec7bd0 = uVar2;
        _strncpy((char *)&DAT_00ec7bd4, param_1, uVar2 - 1);
        *(undefined_8 *)((int)&DAT_00ec7bd0 + uVar2 + 3) = 0;
        _DAT_00ec7bc0 = uVar2 + 0xc;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 2;
        FUN_0041b760(&DAT_00ec7ba0, -1, 1, 1);
    }
    return;
}

void FUN_0041d270(undefined_32 param_1)

{
    undefined_32 uVar1;

    uVar1 = FUN_0041d380(param_1);
    FUN_0041d2a0(uVar1);
    FUN_0041cae0(param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041d2a0(undefined_32 param_1)

{
    if (DAT_004eb1c8 != 0)
    {
        DAT_00ec7bc8 = param_1;
        _DAT_00ec7bc0 = 4;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x2a;
        FUN_0041b760(&DAT_00ec7ba0, param_1, 1, 1);
    }
    return;
}

uint FUN_0041d350(int param_1)

{
    uint uVar1;
    int *piVar2;

    uVar1 = 0;
    if (DAT_004eb3b8 != 0)
    {
        piVar2 = &DAT_00e9f448;
        do
        {
            if (param_1 == *piVar2)
            {
                return uVar1;
            }
            uVar1 = uVar1 + 1;
            piVar2 = piVar2 + 0x2c;
        } while (uVar1 < DAT_004eb3b8);
    }
    return -1;
}

undefined_32 FUN_0041d380(uint param_1)

{
    if (param_1 < DAT_004eb3b8)
    {
        return (&DAT_00e9f448)[param_1 * 0x2c];
    }
    return -1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041d3b0(int param_1)

{
    int iVar1;

    if (DAT_004d5e00 != 0)
    {
        iVar1 = param_1 * 0xc;
        *(undefined_32 *)(&DAT_004ea020 + iVar1) = 0;
        *(undefined_32 *)(&DAT_004ea024 + iVar1) = 0;
        *(undefined_32 *)(&DAT_004ea028 + iVar1) = 0;
        *(undefined_32 *)(&DAT_004ea020 + iVar1) = 1;
        if (DAT_004eb1c8 != 0)
        {
            DAT_00ec7bc8 = param_1;
            _DAT_00ec7ba4 = 0;
            DAT_00ec7bc4 = 0x2c;
            _DAT_00ec7bc0 = 4;
            FUN_0041b760(&DAT_00ec7ba0, -1, 1, 1);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041d420(int param_1, int param_2)

{
    undefined_32 uVar1;
    int iVar2;
    uint uVar3;

    uVar1 = DAT_004eb3b4;
    if (DAT_004d5e00 != 0)
    {
        iVar2 = param_1 * 0xc;
        if (*(int *)(&DAT_004ea020 + iVar2) != 0)
        {
            if (param_2 == 0)
            {
                uVar3 = *(uint *)(&DAT_004ea024 + iVar2) & ~(1 << ((byte)DAT_004eb3b4 & 0x1f));
            }
            else
            {
                uVar3 = *(uint *)(&DAT_004ea024 + iVar2) | 1 << ((byte)DAT_004eb3b4 & 0x1f);
            }
            *(uint *)(&DAT_004ea024 + iVar2) = uVar3;
            if (DAT_004eb1c8 == 0)
            {
                DAT_00ec7bc8 = param_1;
                DAT_00ec7bcc = uVar1;
                DAT_00ec7bd0 = param_2;
                _DAT_00ec7ba4 = 0;
                DAT_00ec7bc4 = 0x2d;
                _DAT_00ec7bc0 = 0xc;
                FUN_0041b760(&DAT_00ec7ba0, DAT_00ec7620, 1, 1);
            }
            FUN_0041e700(param_1);
        }
    }
    return;
}

void FUN_0041d4e0(int param_1, int param_2)

{
    int iVar1;

    if (DAT_004d5e00 != 0)
    {
        iVar1 = param_1 * 0xc;
        if (*(int *)(&DAT_004ea020 + iVar1) != 0)
        {
            if ((*(int *)(&DAT_004ea028 + iVar1) == 0)
                || ((*(uint *)(&DAT_004ea024 + iVar1) >> ((byte)DAT_004eb3b4 & 0x1f) & 1) != (uint)(param_2 != 0)))
            {
                *(undefined_32 *)(&DAT_004ea028 + iVar1) = 1;
                FUN_0041d420(param_1, (uint)(param_2 != 0));
            }
        }
    }
    return;
}

undefined_32 FUN_0041d640(int param_1)

{
    if (DAT_004d5e00 != 0)
    {
        FUN_0041b7f0();
        FUN_0041e700(param_1);
        if (*(int *)(&DAT_004ea020 + param_1 * 0xc) != 0)
        {
            if (*(int *)(&DAT_004ea020 + param_1 * 0xc) != 2)
            {
                return 0;
            }
            FUN_0041d690(param_1);
        }
    }
    return 1;
}

void FUN_0041d690(int param_1)

{
    param_1 = param_1 * 0xc;
    *(undefined_32 *)(&DAT_004ea020 + param_1) = 0;
    *(undefined_32 *)(&DAT_004ea024 + param_1) = 0;
    *(undefined_32 *)(&DAT_004ea028 + param_1) = 0;
    *(undefined_32 *)(&DAT_004ea020 + param_1) = 0;
    return;
}

undefined_32 FUN_0041d6b0(void)

{
    return DAT_004d5e00;
}

undefined_32 FUN_0041d6c0(void)

{
    return DAT_004eb1c8;
}

void FUN_0041d6d0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00e29bc0;
    MEMSET(iVar1, puVar2, 0, 0x2a8)
    return;
}

undefined_32 FUN_0041d6f0(int param_1)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    DWORD DVar8;
    int *piVar9;

    piVar9 = (int *)(param_1 + 0x28);
    if ((DAT_004d5e00 != 0) && (param_1 = *piVar9, 0 < param_1))
    {
        do
        {
            iVar2 = piVar9[1];
            iVar7 = iVar2 * 0x1f28;
            *(int *)(&DAT_00ea0720 + iVar7) = piVar9[2];
            *(int *)(&DAT_00ea0730 + iVar7) = piVar9[3];
            *(int *)(&DAT_00ea0740 + iVar7) = piVar9[4];
            *(int *)(&DAT_00ea0750 + iVar7) = piVar9[5];
            *(int *)(&DAT_00ea0724 + iVar7) = piVar9[6];
            *(int *)(&DAT_00ea0734 + iVar7) = piVar9[7];
            *(int *)(&DAT_00ea0744 + iVar7) = piVar9[8];
            *(int *)(&DAT_00ea0754 + iVar7) = piVar9[9];
            *(int *)(&DAT_00ea0728 + iVar7) = piVar9[10];
            *(int *)(&DAT_00ea0738 + iVar7) = piVar9[0xb];
            *(int *)(&DAT_00ea0748 + iVar7) = piVar9[0xc];
            *(int *)(&DAT_00ea0758 + iVar7) = piVar9[0xd];
            *(int *)(&DAT_00ea072c + iVar7) = piVar9[0xe];
            *(int *)(&DAT_00ea073c + iVar7) = piVar9[0xf];
            *(int *)(&DAT_00ea074c + iVar7) = piVar9[0x10];
            *(int *)(&DAT_00ea075c + iVar7) = piVar9[0x11];
            (&DAT_00ec7640)[iVar2] = piVar9[0x12];
            (&DAT_00ea0360)[iVar2] = piVar9[0x13];
            (&DAT_00ea0420)[iVar2] = piVar9[0x14];
            (&DAT_00ea0480)[iVar2] = piVar9[0x15];
            iVar3 = piVar9[0x16];
            iVar4 = piVar9[0x17];
            iVar7 = piVar9[0x18];
            iVar5 = piVar9[0x19];
            iVar6 = piVar9[0x1a];
            *(int *)(&DAT_00ea03c0 + iVar2 * 4) = piVar9[0x1b];
            piVar1 = piVar9 + 0x1c;
            piVar9 = piVar9 + 0x1c;
            *(int *)(&DAT_00ea01a0 + iVar2 * 4) = *piVar1;
            if (iVar6 == MAGIC('A', 'A', 'I', 'I'))
            {
                (&DAT_00ea05c0)[iVar2 * 4] = 0x29a;
                (&DAT_00ea05c4)[iVar2 * 4] = 0;
                (&DAT_00ea05c8)[iVar2 * 4] = 0;
                (&DAT_00ea05cc)[iVar2 * 4] = 0;
            }
            else
            {
                (&DAT_00ea05c0)[iVar2 * 4] = iVar3;
                (&DAT_00ea05c4)[iVar2 * 4] = iVar4;
                (&DAT_00ea05c8)[iVar2 * 4] = iVar7;
                (&DAT_00ea05cc)[iVar2 * 4] = iVar5;
            }
            DVar8 = timeGetTime();
            *(DWORD *)(&DAT_00ea0200 + iVar2 * 4) = DVar8;
            param_1 = param_1 + -1;
        } while (param_1 != 0);
    }
    return 1;
}

void FUN_0041d8d0(int param_1)

{
    int iVar1;

    if (param_1 != 0)
    {
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x40000;
        iVar1 = **(int **)(param_1 + 0x1e70);
        FUN_0041df10(-1, 1, MAGIC('h', 'e', 'l', 'l'), iVar1);
        (&DAT_00ea05c0)[iVar1 * 4] = 0x29a;
        (&DAT_00ea05c4)[iVar1 * 4] = 0;
        (&DAT_00ea05c8)[iVar1 * 4] = 0;
        (&DAT_00ea05cc)[iVar1 * 4] = 0;
    }
    return;
}

void FUN_0041d930(int param_1)

{
    int iVar1;

    iVar1 = **(int **)(param_1 + 0x1e70);
    if (((*(byte *)(param_1 + 0x60) & 0x80) != 0) && ((*(uint *)(param_1 + 100) & 0x4000000) == 0))
    {
        if ((*(uint *)(param_1 + 100) & 0x40000) == 0)
        {
            FUN_0041d8d0(param_1);
        }
        *(undefined_32 *)(param_1 + 0x50) = (&DAT_00ec76d0)[iVar1 * 0x10];
        *(undefined_32 *)(param_1 + 0x54) = (&DAT_00ec76d4)[iVar1 * 0x10];
        (&DAT_00ec76d8)[iVar1 * 0x10] = -9000.0f;
        *(undefined_32 *)(param_1 + 0x58) = -9000.0f;
        (&DAT_00ea05c0)[iVar1 * 4] = 0x29a;
        (&DAT_00ea05c4)[iVar1 * 4] = 0;
        (&DAT_00ea05c8)[iVar1 * 4] = 0;
        (&DAT_00ea05cc)[iVar1 * 4] = 0;
        return;
    }
    FUN_0044bb10(&DAT_00ec76a0 + iVar1 * 0x10, param_1 + 0x20);
    (&DAT_00ec7640)[iVar1] = *(undefined_32 *)(param_1 + 0x1a0);
    (&DAT_00ea0360)[iVar1] = *(undefined_32 *)(param_1 + 0xe0);
    (&DAT_00ea0420)[iVar1] = *(undefined_32 *)(param_1 + 0xe8);
    (&DAT_00ea0480)[iVar1] = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x78);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 0041da00
// MPInRaceFunction
void FUN_0041da00(void)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int iVar4;
    int *piVar5;
    int iVar6;
    int *local_14;
    int *local_10;
    int local_c;
    int *local_8;

    piVar3 = &DAT_00e29bc4;
    iVar6 = 0;
    iVar4 = 0;
    do
    {
        if ((*piVar3 == MAGIC('L', 'o', 'c', 'l')) || (*piVar3 == MAGIC('A', 'A', 'I', 'I')))
        {
            iVar4 = iVar4 + 1; // Players
        }
        piVar3 = piVar3 + 0x22;
    } while ((int)piVar3 < 0xe2a664);
    if (iVar4 != 0)
    {
        _DAT_00ec7bc0 = &DAT_00ec7bcc;
        local_c = 0;
        local_8 = &DAT_00ea05c0;
        piVar5 = &DAT_00e29bc4;
        local_10 = &DAT_00ea0480;
        local_14 = &DAT_00ea0420;
        piVar3 = &DAT_00ec76b0;
        DAT_00ec7bc8 = iVar4; // players
        do
        {
            iVar4 = *piVar5;
            if ((iVar4 == MAGIC('L', 'o', 'c', 'l')) || (iVar4 == MAGIC('A', 'A', 'I', 'I')))
            {
                iVar1 = piVar3[-4];
                _DAT_00ec7bc0[0] = iVar6;
                _DAT_00ec7bc0[1] = iVar1;
                _DAT_00ec7bc0[2] = *piVar3;
                _DAT_00ec7bc0[3] = piVar3[4];
                _DAT_00ec7bc0[4] = piVar3[8];
                _DAT_00ec7bc0[5] = piVar3[-3];
                _DAT_00ec7bc0[6] = piVar3[1];
                _DAT_00ec7bc0[7] = piVar3[5];
                _DAT_00ec7bc0[8] = piVar3[9];
                _DAT_00ec7bc0[9] = piVar3[-2];
                _DAT_00ec7bc0[10] = piVar3[2];
                _DAT_00ec7bc0[0xb] = piVar3[6];
                _DAT_00ec7bc0[0xc] = piVar3[10];
                _DAT_00ec7bc0[0xd] = piVar3[-1];
                _DAT_00ec7bc0[0xe] = piVar3[3];
                _DAT_00ec7bc0[0xf] = piVar3[7];
                _DAT_00ec7bc0[0x10] = piVar3[0xb];
                _DAT_00ec7bc0[0x11] = (&DAT_00ec7640)[iVar6];
                _DAT_00ec7bc0[0x12] = (&DAT_00ea0360)[iVar6];
                _DAT_00ec7bc0[0x13] = *local_14;
                _DAT_00ec7bc0[0x14] = *local_10;
                _DAT_00ec7bc0[0x15] = (int)*(short *)(piVar5 + 0x16);
                iVar2 = piVar5[0x1d];
                iVar1 = (&DAT_00e29c20)[local_c + iVar2];
                _DAT_00ec7bc0[0x16] = iVar2;
                _DAT_00ec7bc0[0x17] = iVar1;
                iVar1 = piVar5[0x20];
                _DAT_00ec7bc0[0x18] = piVar5[0x1c];
                _DAT_00ec7bc0[0x19] = iVar4;
                _DAT_00ec7bc0[0x1a] = *(uint *)(iVar1 + 0x60) & 0x87810;
                _DAT_00ec7bc0[0x1b] = *(uint *)(iVar1 + 100) & 0x1e840000;
                _DAT_00ec7bc0 = _DAT_00ec7bc0 + 0x1c;
                if (*local_8 != 0x29a)
                {
                    local_8[0] = (int)*(short *)(piVar5 + 0x16);
                    local_8[1] = iVar2;
                    local_8[2] = (&DAT_00e29c20)[local_c + iVar2];
                    local_8[3] = piVar5[0x1c];
                }
            }
            local_14 = local_14 + 1;
            piVar3 = piVar3 + 0x10;
            local_10 = local_10 + 1;
            iVar6 = iVar6 + 1;
            local_c = local_c + 0x22;
            piVar5 = piVar5 + 0x22;
            local_8 = local_8 + 4;
        } while ((int)piVar3 < 0xec7bb0);
        _DAT_00ec7bc0 = _DAT_00ec7bc0 + -0x3b1ef2;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x32;
        FUN_0041b760(&DAT_00ec7ba0, -1, 1, 0);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address
// 0041dc30
// MPRacerPickFunction
void FUN_0041dc30(undefined_32 param_1)

{
    DAT_00ec7bc8 = DAT_004eb3b4;
    DAT_00ec7bcc = param_1;
    _DAT_00ec7ba4 = 0;
    DAT_00ec7bc4 = 0x33;
    _DAT_00ec7bc0 = 8;
    FUN_0041b760(&DAT_00ec7ba0, DAT_00ec7620, 1, 0);
    (&DAT_00ea0260)[DAT_004eb3b4] = param_1;
    FUN_00411120(0x33, &DAT_00ec7bc8);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041dd50(int param_1, undefined_32 *param_2)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;
    int *piVar4;
    undefined_32 *puVar5;

    if (DAT_004d5e00 != 0)
    {
        DAT_004eb21c = param_1;
        puVar3 = param_2;
        puVar5 = &DAT_00ea0320;
        QMEMCPY(iVar2, puVar3, puVar5, 10)
        DAT_004eb218 = 1;
        DAT_00ec7bc8 = param_2[2];
        DAT_00ec7bcc = param_2[3];
        DAT_00ec7bd0 = param_2[4];
        DAT_00ec7bd4 = param_2[5];
        DAT_00ec7bd8 = param_2[6];
        DAT_00ec7bdc = param_2[7];
        DAT_00ec7be0 = param_2[8];
        DAT_00ec7be4 = param_2[9];
        iVar2 = 0;
        _DAT_00ec7bc0 = &DAT_00ec7be8;
        if (0 < (int)param_2[2])
        {
            do
            {
                *_DAT_00ec7bc0 = (int)*(char *)(iVar2 + 0x73 + param_1);
                _DAT_00ec7bc0 = _DAT_00ec7bc0 + 1;
                iVar2 = iVar2 + 1;
            } while (iVar2 < (int)param_2[2]);
        }
        iVar2 = 0;
        if (0 < (int)param_2[2])
        {
            piVar4 = &DAT_004ea8f0;
            do
            {
                iVar1 = *piVar4;
                piVar4 = piVar4 + 1;
                *_DAT_00ec7bc0 = iVar1;
                _DAT_00ec7bc0 = _DAT_00ec7bc0 + 1;
                iVar2 = iVar2 + 1;
            } while (iVar2 < (int)param_2[2]);
        }
        _DAT_00ec7bc0 = _DAT_00ec7bc0 + -0x3b1ef2;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x36;
        FUN_0041b760(&DAT_00ec7ba0, -1, 1, 0);
    }
    return;
}

void FUN_0041de50(int param_1, undefined_32 param_2)

{
    (&DAT_004ea8f0)[param_1] = param_2;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041df10(undefined_32 param_1, undefined_32 param_2, int param_3, int param_4, float param_5, float param_6_00,
                  double param_6, undefined_32 *param_7, undefined_32 *param_8, undefined_32 param_9)

{
    int *piVar1;
    undefined_32 uVar2;
    int *piVar3;
    int iVar4;
    undefined_8 local_400[1024];

    iVar4 = DAT_004eb3b4;
    if (DAT_004d5e00 != 0)
    {
        DAT_00ec7bc8 = DAT_004eb3b4;
        DAT_00ec7bcc = param_3;
        piVar3 = &DAT_00ec7bd0;
        if (param_3 < 0x6374726d)
        {
            if (param_3 != MAGIC('c', 't', 'r', 'l'))
            {
                if (param_3 != MAGIC('S', 'p', 'r', 'k'))
                {
                    DAT_00ec7bc8 = iVar4;
                    return;
                }
                DAT_00ec7bd0 = param_4;
                DAT_00ec7bd4 = (float)(double)CONCAT44(param_6_00, param_5);
                DAT_00ec7bd8 = (float)param_6;
                DAT_00ec7bdc = param_7[0];
                DAT_00ec7be0 = param_7[1];
                DAT_00ec7be4 = param_7[2];
                DAT_00ec7be8 = param_8[0];
                DAT_00ec7bec = param_8[1];
                DAT_00ec7bf0 = param_8[2];
                DAT_00ec7bf4 = param_9;
                piVar3 = &DAT_00ec7bf8;
            }
        }
        else if (param_3 < 0x666c616e)
        {
            if (param_3 == MAGIC('f', 'l', 'a', 'm'))
            {
                piVar3 = (int *)&DAT_00ec7bd4;
                DAT_00ec7bd0 = param_4;
            }
            else
            {
                if (param_3 != MAGIC('f', 'i', 'n', 'i'))
                {
                    DAT_00ec7bc8 = iVar4;
                    return;
                }
                (&DAT_00ea02c0)[DAT_004eb3b4] = 1;
            }
        }
        else if (param_3 < 0x6c6f7375)
        {
            if (param_3 == MAGIC('l', 'o', 's', 't'))
            {
                DAT_00ec7bd0 = param_4;
                piVar3 = (int *)&DAT_00ec7bd4;
            }
            else
            {
                if (param_3 != MAGIC('h', 'e', 'l', 'l'))
                {
                    DAT_00ec7bc8 = iVar4;
                    return;
                }
                piVar3 = (int *)&DAT_00ec7bd4;
                DAT_00ec7bd0 = param_4;
            }
        }
        else if (param_3 < 0x7072787a)
        {
            if (param_3 == MAGIC('p', 'r', 'x', 'y'))
            {
                DAT_00ec7bd0 = 0;
                piVar3 = &DAT_00e29bc4;
                do
                {
                    if ((*piVar3 == MAGIC('A', 'A', 'I', 'I')) || (*piVar3 == MAGIC('L', 'o', 'c', 'l')))
                    {
                        DAT_00ec7bd0 = DAT_00ec7bd0 + 1;
                    }
                    piVar3 = piVar3 + 0x22;
                } while ((int)piVar3 < 0xe2a664);
                piVar3 = (int *)&DAT_00ec7bd4;
                iVar4 = 0;
                piVar1 = &DAT_00e29bc4;
                do
                {
                    if ((*piVar1 == MAGIC('A', 'A', 'I', 'I')) || (*piVar1 == MAGIC('L', 'o', 'c', 'l')))
                    {
                        *piVar3 = iVar4;
                        piVar3 = piVar3 + 1;
                    }
                    piVar1 = piVar1 + 0x22;
                    iVar4 = iVar4 + 1;
                } while ((int)piVar1 < 0xe2a664);
            }
            else
            {
                if (param_3 != MAGIC('p', 'l', 'a', 'p'))
                {
                    DAT_00ec7bc8 = iVar4;
                    return;
                }
                DAT_00ec7bd0 = param_4;
                piVar3 = (int *)&DAT_00ec7bd8;
                DAT_00ec7bd4 = (float)(double)CONCAT44(param_6_00, param_5);
            }
        }
        else if (param_3 < 0x72656a6f)
        {
            if (param_3 != MAGIC('r', 'e', 'j', 'n'))
            {
                if (param_3 != MAGIC('q', 'u', 'i', 't'))
                {
                    DAT_00ec7bc8 = iVar4;
                    return;
                }
                (&DAT_00ea04e0)[DAT_004eb3b4] = 1;
                (&DAT_00ea05c0)[iVar4 * 4] = 0x29a;
                (&DAT_00ea05c4)[iVar4 * 4] = 0;
                (&DAT_00ea05c8)[iVar4 * 4] = 0;
                (&DAT_00ea05cc)[iVar4 * 4] = 0;
            }
        }
        else if (param_3 == MAGIC('t', 'a', 'u', 'n'))
        {
            DAT_00ec7bd4 = param_5;
            DAT_00ec7bd0 = param_4;
            DAT_00ec7bd8 = param_6_00;
            piVar3 = &DAT_00ec7bdc;
        }
        else
        {
            if (param_3 != MAGIC('t', 'r', 'i', 'g'))
            {
                DAT_00ec7bc8 = iVar4;
                return;
            }
            DAT_00ec7bd0 = param_4;
            DAT_00ec7bd4 = param_5;
            piVar3 = (int *)&DAT_00ec7bd8;
        }
        _DAT_00ec7bc0 = piVar3 + -0x3b1ef2;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x17;
        FUN_0041b760(&DAT_00ec7ba0, param_1, 1, param_2);
        if (param_3 == MAGIC('q', 'u', 'i', 't'))
        {
            if ((DAT_004eb1c8 != 0) || (DAT_004b6714 == DAT_004eb3b4))
            {
                FUN_0041c8e0();
            }
            iVar4 = DAT_004eb3b4;
            (&DAT_00ea04e0)[DAT_004eb3b4] = 1;
            uVar2 = FUN_0041bce0(iVar4);
            uVar2 = lookup_translation(s__MONDOTEXT_H_0500__s_has_left_th_004b67ec, uVar2);
            _sprintf(local_400, uVar2);
            FUN_0041c190(local_400);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041e5a0(void)

{
    if (DAT_004d5e00 != 0)
    {
        DAT_00ec7bc8 = DAT_00ea05a0;
        DAT_00ec7bcc = DAT_00ea05a4;
        DAT_00ec7bd0 = DAT_00ea05a8;
        DAT_00ec7bd4 = DAT_00ea05ac;
        DAT_00ec7bd8 = DAT_00ea05b0;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x38;
        _DAT_00ec7bc0 = 0x14;
        FUN_0041b760(&DAT_00ec7ba0, -1, 1, 0);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041e660(void)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_004d5e00 != 0)
    {
        puVar2 = &DAT_00ea04e0;
        MEMSET(iVar1, puVar2, 0, 0x14)
        puVar2 = &DAT_00ea02c0;
        MEMSET(iVar1, puVar2, 0, 0x14)
        DAT_004eb1e8 = 0;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x39;
        _DAT_00ec7bc0 = 0;
        FUN_0041b760(&DAT_00ec7ba0, -1, 1, 0);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0041e700(int param_1)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    uint uVar4;

    bVar1 = true;
    uVar4 = 0;
    do
    {
        iVar2 = FUN_00420f70(uVar4);
        if ((iVar2 != 0) && ((*(uint *)(&DAT_004ea024 + param_1 * 0xc) & 1 << ((byte)uVar4 & 0x1f)) == 0))
        {
            bVar1 = false;
        }
        uVar4 = uVar4 + 1;
    } while (uVar4 < 0x14);
    iVar3 = param_1 * 0xc;
    iVar2 = *(int *)(&DAT_004ea020 + iVar3);
    if (bVar1)
    {
        *(undefined_32 *)(&DAT_004ea020 + iVar3) = 2;
    }
    if ((*(int *)(&DAT_004ea020 + iVar3) != iVar2) && (DAT_004eb1c8 != 0))
    {
        DAT_00ec7bd0 = *(undefined_32 *)(&DAT_004ea024 + iVar3);
        DAT_00ec7bcc = (uint)(*(int *)(&DAT_004ea020 + iVar3) == 2);
        DAT_00ec7bc8 = param_1;
        _DAT_00ec7ba4 = 0;
        DAT_00ec7bc4 = 0x2e;
        _DAT_00ec7bc0 = 0xc;
        FUN_0041b760(&DAT_00ec7ba0, -1, 1, 1);
    }
    return;
}

void FUN_0041e7c0(int param_1)

{
    if ((&DAT_004eb188)[param_1] != 0)
    {
        _free((&DAT_004eb188)[param_1]);
        (&DAT_004eb188)[param_1] = 0;
        (&DAT_004ea940)[param_1] = 0;
        (&DAT_004e9ed8)[param_1] = 0;
    }
    return;
}

void FUN_0041e800(undefined_32 *param_1)

{
    char cVar1;
    int *piVar2;
    undefined_32 *puVar3;
    uint uVar4;
    uint uVar5;
    int iVar6;
    undefined_32 *puVar7;

    iVar6 = 0;
    piVar2 = &DAT_004eb188;
    while (*piVar2 != 0)
    {
        piVar2 = piVar2 + 1;
        iVar6 = iVar6 + 1;
        if (0x4eb1c3 < (int)piVar2)
        {
            return;
        }
    }
    uVar4 = -1;
    puVar3 = param_1;
    do
    {
        if (uVar4 == 0)
            break;
        uVar4 = uVar4 - 1;
        cVar1 = *(char *)puVar3;
        puVar3 = (undefined_32 *)((int)puVar3 + 1);
    } while (cVar1 != '\0');
    puVar3 = (undefined_32 *)_malloc(~uVar4);
    uVar4 = -1;
    (&DAT_004eb188)[iVar6] = puVar3;
    puVar7 = param_1;
    do
    {
        if (uVar4 == 0)
            break;
        uVar4 = uVar4 - 1;
        cVar1 = *(char *)puVar7;
        puVar7 = (undefined_32 *)((int)puVar7 + 1);
    } while (cVar1 != '\0');
    QMEMCPY(uVar5, param_1, puVar3, ~uVar4 >> 2)
    for (uVar4 = ~uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1)
    {
        *(undefined_8 *)puVar3 = *(undefined_8 *)param_1;
        param_1 = (undefined_32 *)((int)param_1 + 1);
        puVar3 = (undefined_32 *)((int)puVar3 + 1);
    }
    (&DAT_004ea940)[iVar6] = 0;
    (&DAT_004e9ed8)[iVar6] = 10000;
    DAT_004eb220 = timeGetTime();
    return;
}

void FUN_0041e880(void)

{
    uint uVar1;
    bool bVar2;
    DWORD DVar3;
    int *piVar4;
    uint uVar5;
    int iVar6;
    int iVar7;
    int *piVar8;
    uint uVar9;

    DVar3 = timeGetTime();
    uVar9 = DVar3 - DAT_004eb220;
    iVar7 = 0;
    do
    {
        if ((&DAT_004eb188)[iVar7] != 0)
        {
            uVar1 = (&DAT_004e9ed8)[iVar7];
            uVar5 = uVar1;
            if (uVar9 <= uVar1)
            {
                uVar5 = uVar9;
            }
            (&DAT_004e9ed8)[iVar7] = uVar1 - uVar5;
            if (uVar1 - uVar5 == 0)
            {
                FUN_0041e7c0(iVar7);
            }
        }
        iVar7 = iVar7 + 1;
    } while (iVar7 < 0xf);
    piVar8 = &DAT_004eb188;
    iVar7 = 1;
    do
    {
        if ((*piVar8 == 0) && (iVar7 < 0xf))
        {
            piVar4 = piVar8 + 1;
            iVar6 = iVar7;
            do
            {
                if (*piVar4 != 0)
                {
                    *piVar8 = (&DAT_004eb188)[iVar6];
                    (&DAT_004eb188)[iVar6] = 0;
                    break;
                }
                piVar4 = piVar4 + 1;
                iVar6 = iVar6 + 1;
            } while ((int)piVar4 < 0x4eb1c4);
        }
        piVar8 = piVar8 + 1;
        bVar2 = 0xe < iVar7;
        iVar7 = iVar7 + 1;
        if (bVar2)
        {
            DAT_004eb220 = DVar3;
            return;
        }
    } while (true);
}

void FUN_0041e920(void)

{
    undefined_32 uVar1;
    int iVar2;
    int *piVar3;
    undefined_8 local_400[1024];

    uVar1 = DAT_004eb224;
    piVar3 = &DAT_004eb188;
    iVar2 = DAT_004eb228;
    do
    {
        if (*piVar3 != 0)
        {
            _sprintf(local_400, s__F0_s_004b6844, *piVar3);
            create_text_entry_0(uVar1, iVar2, -1, -1, -1, -1, local_400);
            iVar2 = iVar2 + 0xf;
        }
        piVar3 = piVar3 + 1;
    } while ((int)piVar3 < 0x4eb1c4);
    if (DAT_00ea0250 != 0)
    {
        create_text_entry_0(uVar1, iVar2, -1, -1, -1, -1, &DAT_004ea988);
        DAT_004e9f18 = iVar2;
    }
    return;
}

void FUN_0041e9b0(void)

{
    FUN_0041ea20();
    FUN_0041eb80();
    FUN_0041f0e0();
    FUN_0041f940();
    FUN_00420600();
    return;
}

bool FUN_0041e9d0(void)

{
    int iVar1;

    iVar1 = FUN_004207e0();
    if (iVar1 == 0)
    {
        return false;
    }
    iVar1 = FUN_00420830();
    if (iVar1 == 0)
    {
        return false;
    }
    iVar1 = FUN_0041c5c0(&DAT_004d55cc, &DAT_004d55cc, &DAT_004d55cc, &DAT_004d55cc, 0xb4);
    FUN_004208c0();
    FUN_00420810();
    return iVar1 == 0;
}

undefined_32 FUN_0041ea20(void)

{
    int iVar1;
    undefined_32 uVar2;

    iVar1 = FUN_00413130(0, 0, 0x186a5, &LAB_0041ead0);
    if (iVar1 != 0)
    {
        uVar2 = lookup_translation(s__MONDOTEXT_H_0395__sHost_Multipl_004b6878, 0x96, 0x96, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x186a6, 6, uVar2);
        uVar2 = lookup_translation(s__MONDOTEXT_H_0396__sJoin_Multipl_004b684c, 0x96, 0xbe, 0x154, 0x19, 0x100000, 0);
        FUN_004132a0(iVar1, 0x186a7, 6, uVar2);
        FUN_00411170(iVar1, 4, 0, 0x1a4, 2);
    }
    return 1;
}

undefined_32 FUN_0041eb80(void)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    local_10 = 0x78;
    local_c = 0x5a;
    local_8 = 0x207;
    local_4 = 0x185;
    iVar1 = FUN_00413130(0, &local_10, 0x186aa, &LAB_0041ede0);
    if (iVar1 == 0)
    {
        return 0;
    }
    uVar2 = lookup_translation(s__MONDOTEXT_H_0398__sCreate_A_Gam_004b6918, 0x15e, 0x3c, 0, 0);
    FUN_004131c0(iVar1, 0, 6, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0399__sEnter_your_n_004b68f4, 0xdc, 0x82, 0, 0);
    uVar2 = FUN_004131c0(iVar1, 0, 6, uVar2);
    local_10 = 0;
    local_c = 0x9b;
    local_8 = 299;
    local_4 = 0xc2;
    uVar3 = FUN_00413430(iVar1, 0x186ac, &local_10, 0, 0, 0);
    FUN_00411440(uVar3, 1, 0);
    FUN_00413500(uVar3, 0x10);
    FUN_00411390(uVar2, uVar3, 1);
    FUN_00420a90(uVar3);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0400__sEnter_the_ga_004b68cc, 0xdc, 0xd2, 0, 0);
    uVar2 = FUN_004131c0(iVar1, 0, 6, uVar2);
    local_10 = 0;
    local_c = 0xeb;
    local_8 = 299;
    local_4 = 0x112;
    uVar3 = FUN_00413430(iVar1, 0x186ad, &local_10, 0, 0, 0);
    FUN_00411440(uVar3, 1, 0);
    FUN_00413500(uVar3, 0x10);
    FUN_00411390(uVar2, uVar3, 1);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0401__sEnter_a_pass_004b68a4, 0xdc, 0x122, 0, 0);
    uVar2 = FUN_004131c0(iVar1, 0, 6, uVar2);
    local_10 = 0;
    local_c = 0x13b;
    local_8 = 299;
    local_4 = 0x162;
    uVar3 = FUN_00413430(iVar1, 0x186ae, &local_10, 0, 0, 0);
    FUN_00411440(uVar3, 1, 0);
    FUN_00413500(uVar3, 0x10);
    FUN_00411390(uVar2, uVar3, 1);
    FUN_00411170(iVar1, 3, 0, 0x1ae, 2);
    uVar2 = FUN_00411210(iVar1, 0x208, 0x17c);
    FUN_004114b0(uVar2);
    return 1;
}

undefined_32 FUN_0041f0e0(void)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    local_10 = 0x78;
    local_c = 0x5a;
    local_8 = 0x207;
    local_4 = 0x185;
    iVar1 = FUN_00413130(0, &local_10, 0x186ab, &LAB_0041f330);
    if (iVar1 == 0)
    {
        return 0;
    }
    uVar2 = lookup_translation(s__MONDOTEXT_H_0402__sJoin_A_Game_004b6968, 400, 0x28, 0, 0);
    FUN_004131c0(iVar1, 0, 6, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0399__sEnter_your_n_004b68f4, 0xdc, 0x78, 0, 0);
    uVar2 = FUN_004131c0(iVar1, 0, 6, uVar2);
    local_10 = 0;
    local_c = 0x91;
    local_8 = 299;
    local_4 = 0xb8;
    uVar3 = FUN_00413430(iVar1, 0x186af, &local_10, 0, 0, 0);
    FUN_00411440(uVar3, 1, 0);
    FUN_00413500(uVar3, 0x10);
    FUN_00411390(uVar2, uVar3, 1);
    FUN_00420a90(uVar3);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0401__sEnter_a_pass_004b68a4, 0xdc, 200, 0, 0);
    uVar2 = FUN_004131c0(iVar1, 0, 6, uVar2);
    local_10 = 0;
    local_c = 0xe1;
    local_8 = 299;
    local_4 = 0x108;
    uVar3 = FUN_00413430(iVar1, 0x186b1, &local_10, 0, 0, 0);
    FUN_00411440(uVar3, 1, 0);
    FUN_00413500(uVar3, 0x10);
    FUN_00411390(uVar2, uVar3, 1);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0403__sChoose_a_gam_004b693c, 0xdc, 0x118, 0, 0);
    uVar2 = FUN_004131c0(iVar1, 0, 6, uVar2);
    local_10 = 0;
    local_c = 0x131;
    local_8 = 299;
    local_4 = 0x1a8;
    uVar3 = FUN_00413520(iVar1, 0x186b2, &local_10, 0, 0, 0);
    FUN_00411440(uVar3, 1, 0);
    FUN_00411390(uVar2, uVar3, 1);
    FUN_00411170(iVar1, 3, 0, 0x1a4, 2);
    uVar2 = FUN_00411210(iVar1, 0x208, 0x17c);
    FUN_004114b0(uVar2);
    return 1;
}

undefined_32 FUN_0041f940(void)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    FUN_0041c260();
    local_10 = 0x82;
    local_c = 0x73;
    local_8 = 0x26b;
    local_4 = 0x1cb;
    iVar1 = FUN_00413130(0, &local_10, 0x186b8, &LAB_0041fc70);
    if (iVar1 == 0)
    {
        return 0;
    }
    local_10 = 0x78;
    local_c = 0x73;
    local_8 = 0x141;
    local_4 = 0x11c;
    FUN_00413520(iVar1, 0x186b3, &local_10, 0, 0, 0);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0411__sRacer_004b6b5c, 0x138, 0x7d, 0, 0);
    FUN_004131c0(iVar1, 0, 6, uVar2);
    FUN_004131c0(iVar1, 0x186b9, 0, &DAT_004d55cc, 0x172, 0x82, 0, 0);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0412__sTrack_004b6b40, 0x138, 0x96, 0, 0);
    FUN_004131c0(iVar1, 0, 6, uVar2);
    FUN_004131c0(iVar1, 0x186ba, 0, &DAT_004d55cc, 0x172, 0x9b, 0, 0);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0414__sLaps_004b6b24, 0x138, 0xb9, 0, 0);
    FUN_004131c0(iVar1, 0, 6, uVar2);
    uVar2 = FUN_00413a90(iVar1, 0x8b, 0x172, 0xaf, 200, 0x1000000, 0);
    FUN_00413b30(uVar2, DAT_00ea02b8);
    FUN_00413fc0(iVar1, 0x30d54, 6, 0, 0x14a, 0x32, 0xdc, 0x80000, 0, 0x40004, 0);
    local_10 = 0x8c;
    local_c = 0x131;
    local_8 = 599;
    local_4 = 0x1a8;
    FUN_00413520(iVar1, 0x186b4, &local_10, 0, 0x100000, 0);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0416__sRetire_004b6b08, 0, 0x18b, 0x8c, 0x19, 0x100000, 0);
    FUN_004132a0(iVar1, 0x186b6, 6, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0417__sRace_004b6aec, 0, 0x1ae, 0x8c, 0x19, 0x100000, 0);
    FUN_004132a0(iVar1, 0x186b5, 6, uVar2);
    local_10 = 0x8c;
    local_c = 0x1ae;
    local_8 = 599;
    local_4 = 0x1d5;
    uVar2 = FUN_00413430(iVar1, 0x186bb, &local_10, 0, 0x10000, 0);
    FUN_00413500(uVar2, 0x32);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0418__sPodracer_004b6acc, 0, 0x73, 0x8c, 0x19, 0x100000, 0);
    FUN_004132a0(iVar1, 0x7e, 6, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0419__sTracks_004b6ab0, 0, 0x91, 0x8c, 0x19, 0x100000, 0);
    FUN_004132a0(iVar1, 0x7d, 6, uVar2);
    uVar2 = lookup_translation(s__MONDOTEXT_H_0421__sBoot_004b6a94, 0, 0xaf, 0x8c, 0x19, 0x100000, 0);
    FUN_004132a0(iVar1, 0x80, 6, uVar2);
    return 1;
}

undefined_32 FUN_00420600(void)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar1 = FUN_00413130(0, 0, 0x30d41, &LAB_004206b0);
    if (iVar1 == 0)
    {
        return 0;
    }
    local_10 = 0x32;
    local_c = 0x96;
    local_8 = 0x24e;
    local_4 = 0x17c;
    iVar2 = FUN_00413520(iVar1, 0x30d42, &local_10, -1, 0x100000, 0);
    *(undefined_32 *)(iVar2 + 0x524) = 0;
    uVar3 = lookup_translation(s__MONDOTEXT_H_0510__sReturn_to_lo_004b6c38, 0xdc, 0x1a4, 200, 0x19, 0x100000, 0);
    FUN_004132a0(iVar1, 4, 6, uVar3);
    return 1;
}

undefined_32 FUN_00420730(undefined_32 param_1, int param_2, int param_3, int param_4)

{
    char cVar1;
    int iVar2;
    int iVar3;
    char *pcVar4;

    if ((param_2 != 0) && (iVar2 = FUN_00414d90(param_1, param_2), iVar2 != 0))
    {
        if (*(char **)(iVar2 + 0x4d4) == NULL)
        {
            return 0;
        }
        iVar3 = -1;
        pcVar4 = *(char **)(iVar2 + 0x4d4);
        do
        {
            if (iVar3 == 0)
                break;
            iVar3 = iVar3 + -1;
            cVar1 = *pcVar4;
            pcVar4 = pcVar4 + 1;
        } while (cVar1 != '\0');
        if (iVar3 == -2)
        {
            return 0;
        }
    }
    if ((param_3 != 0) && (iVar2 = FUN_00414d90(param_1, param_3), iVar2 != 0))
    {
        if (*(char **)(iVar2 + 0x4d4) == NULL)
        {
            return 0;
        }
        iVar3 = -1;
        pcVar4 = *(char **)(iVar2 + 0x4d4);
        do
        {
            if (iVar3 == 0)
                break;
            iVar3 = iVar3 + -1;
            cVar1 = *pcVar4;
            pcVar4 = pcVar4 + 1;
        } while (cVar1 != '\0');
        if (iVar3 == -2)
        {
            return 0;
        }
    }
    if ((param_4 == 0) || (iVar2 = FUN_00414d90(param_1, param_4), iVar2 == 0))
    {
        return 1;
    }
    if (*(char **)(iVar2 + 0x4d4) != NULL)
    {
        iVar3 = -1;
        pcVar4 = *(char **)(iVar2 + 0x4d4);
        do
        {
            if (iVar3 == 0)
                break;
            iVar3 = iVar3 + -1;
            cVar1 = *pcVar4;
            pcVar4 = pcVar4 + 1;
        } while (cVar1 != '\0');
        if (iVar3 != -2)
        {
            return 1;
        }
    }
    return 0;
}

undefined_32 FUN_004207e0(void)

{
    int iVar1;

    if (DAT_004eb394 == 0)
    {
        iVar1 = FUN_00486ad0();
        if (iVar1 != 0)
        {
            return 0;
        }
        DAT_004eb394 = 1;
    }
    return 1;
}

undefined_32 FUN_00420810(void)

{
    if (DAT_004eb394 != 0)
    {
        FUN_00486b40();
        DAT_004eb394 = 0;
    }
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00420830(void)

{
    uint uVar1;
    int iVar2;
    uint uVar3;
    char *pcVar4;
    char *pcVar5;
    bool bVar6;
    undefined_8 local_118[256];
    char local_18[24];

    if (DAT_004eb398 == 0)
    {
        uVar1 = FUN_00486c00();
        uVar3 = 0;
        if (uVar1 != 0)
        {
            do
            {
                FUN_00486c10(uVar3, local_118);
                iVar2 = 0x10;
                bVar6 = true;
                pcVar4 = local_18;
                pcVar5 = "";
                do
                {
                    if (iVar2 == 0)
                        break;
                    iVar2 = iVar2 + -1;
                    bVar6 = *pcVar4 == *pcVar5;
                    pcVar4 = pcVar4 + 1;
                    pcVar5 = pcVar5 + 1;
                } while (bVar6);
                if (bVar6)
                {
                    _DAT_004eb390 = uVar3;
                    FUN_00404760(uVar3);
                    DAT_004eb398 = 1;
                    return 1;
                }
                uVar3 = uVar3 + 1;
                if (uVar1 <= uVar3)
                {
                    return 0;
                }
            } while (true);
        }
    }
    return 0;
}

void FUN_004208c0(void)

{
    if (DAT_004eb398 != 0)
    {
        FUN_0041c570();
        FUN_00420810();
        DAT_004eb398 = 0;
    }
    return;
}

void FUN_004208e0(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;

    uVar1 = lookup_translation((&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[param_1 * 0xd]);
    uVar1 = lookup_translation((&PTR_s__SCREENTEXT_322___Anakin_004c2714)[param_1 * 0xd], uVar1);
    __snprintf(param_2, param_3, s__s__s_004b6708, uVar1);
    return;
}

void FUN_00420930(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;

    uVar1 = FUN_00440620(param_1);
    __snprintf(param_2, param_3, &DAT_004b2304 /* "%s" */, uVar1);
    return;
}

void FUN_00420960(undefined_32 param_1, undefined_32 param_2)

{
    undefined_32 uVar1;

    uVar1 = FUN_00414d90(param_1, 0x186bb);
    FUN_004151a0(uVar1, 7, param_2, 0);
    return;
}

void FUN_00420990(int param_1, int param_2)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    undefined_8 local_400[1024];

    if (param_2 == 0)
    {
        return;
    }
    if (param_1 == 0)
    {
        return;
    }
    iVar1 = FUN_004137a0(param_2);
    if (iVar1 == 0)
    {
        return;
    }
    iVar1 = *(int *)(iVar1 + 0x1c);
    if (iVar1 == DAT_004eb3b4)
    {
        uVar2 = FUN_00414d90(param_1, 0x7e);
        FUN_00411490(uVar2);
        uVar2 = FUN_00414d90(param_1, 0x80);
    }
    else
    {
        uVar2 = FUN_00414d90(param_1, 0x7e);
        FUN_004114b0(uVar2);
        uVar2 = FUN_00414d90(param_1, 0x80);
        if ((DAT_004eb388 != 0) && ((&DAT_004eb238)[iVar1] != 0))
        {
            FUN_00411490(uVar2);
            goto LAB_004209f4;
        }
    }
    FUN_004114b0(uVar2);
LAB_004209f4:
    iVar3 = FUN_00414d90(param_1, 0x186b9);
    if (iVar3 != 0)
    {
        uVar2 = FUN_0041c4d0(iVar1, local_400, 0x400);
        FUN_004208e0(uVar2);
        FUN_00414b80(iVar3, local_400, 0);
    }
    return;
}

void FUN_00420a90(undefined_32 param_1)

{
    int iVar1;
    undefined_32 *puVar2;
    DWORD local_204;
    undefined_32 local_200[64];
    undefined_8 local_100[256];

    puVar2 = local_200;
    MEMSET(iVar1, puVar2, 0, 0x40)
    local_204 = 0x100;
    GetComputerNameA((LPSTR)local_200, &local_204);
    FUN_0049d2e0(s_Last_Player_004b6c5c, local_100, 0x100, local_200);
    FUN_00414b80(param_1, local_100, 0);
    return;
}

void FUN_00420b00(int param_1)

{
    int iVar1;
    undefined_32 *puVar2;
    DWORD local_104;
    undefined_32 local_100[64];

    puVar2 = local_100;
    MEMSET(iVar1, puVar2, 0, 0x40)
    local_104 = 0x100;
    if (param_1 == 0)
    {
        puVar2 = local_100;
        MEMSET(iVar1, puVar2, 0, 0x40)
        GetComputerNameA((LPSTR)local_100, &local_104);
    }
    else
    {
        FUN_00414ba0(param_1, local_100, 0x100);
    }
    FUN_0049d250(s_Last_Player_004b6c5c, local_100);
    return;
}

void FUN_00420b80(undefined_32 param_1)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;
    DWORD local_204;
    undefined_32 local_200[64];
    undefined_8 local_100[256];

    puVar3 = local_200;
    MEMSET(iVar2, puVar3, 0, 0x40)
    local_204 = 0x100;
    GetComputerNameA((LPSTR)local_200, &local_204);
    uVar1 = lookup_translation(s__MONDOTEXT_H_0426__s_s_Game_004b6c74, local_200);
    _sprintf(local_100, uVar1);
    puVar3 = local_200;
    MEMSET(iVar2, puVar3, 0, 0x40)
    FUN_0049d2e0(s_Last_Game_004b6c68, local_200, 0x100, local_100);
    FUN_00414b80(param_1, local_200, 0);
    return;
}

void FUN_00420c20(undefined_32 param_1)

{
    FUN_0049d250(s_Last_Game_004b6c68, param_1);
    return;
}

void FUN_00420c40(undefined_32 param_1, int *param_2)

{
    (&DAT_004eb238)[*param_2] = param_2[1];
    FUN_00420c60(param_1);
    return;
}

void FUN_00420c60(undefined_32 param_1)

{
    byte *pbVar1;
    undefined_32 uVar2;
    int iVar3;
    int *piVar4;
    int iVar5;

    iVar5 = 0;
    piVar4 = &DAT_004eb238;
    pbVar1 = &DAT_00e9f444;
    do
    {
        if (((*pbVar1 & 1) != 0) && (*piVar4 != 0))
        {
            iVar5 = iVar5 + 1;
        }
        pbVar1 = pbVar1 + 0xb0;
        piVar4 = piVar4 + 1;
    } while ((int)pbVar1 < 0xea0204);
    uVar2 = FUN_00414d90(param_1, 0x186b5);
    iVar3 = FUN_00420f90();
    if (iVar5 == iVar3)
    {
        FUN_00411490();
        return;
    }
    FUN_004114b0(uVar2);
    return;
}

void FUN_00420cc0(void)

{
    uint uVar1;
    undefined_32 uVar2;
    int iVar3;
    uint uVar4;

    uVar1 = FUN_00420f90();
    uVar2 = FUN_00414d90(0, 0x30d42);
    FUN_00413800(uVar2);
    uVar4 = 0;
    if (uVar1 != 0)
    {
        do
        {
            iVar3 = FUN_0041abb0(uVar4);
            *(uint *)(iVar3 + 0x56c) = uVar4;
            FUN_00413a30(uVar2, iVar3);
            uVar4 = uVar4 + 1;
        } while (uVar4 < uVar1);
    }
    return;
}

void FUN_00420d10(void)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar3 = FUN_00414d90(0, 0x30d42);
    for (iVar1 = *(int *)(iVar3 + 0xc); iVar1 != 0; iVar1 = *(int *)(iVar1 + 4))
    {
        iVar2 = *(int *)(iVar1 + 0x56c);
        if ((&DAT_00ea04e0)[iVar2] == 0)
        {
            *(undefined_32 *)(iVar1 + 0x560) = (&DAT_00ea05c4)[iVar2 * 4];
            *(undefined_32 *)(iVar1 + 0x564) = (&DAT_00ea05c8)[iVar2 * 4];
            *(undefined_32 *)(iVar1 + 0x568) = (&DAT_00ea05cc)[iVar2 * 4];
            *(int *)(iVar1 + 0x528) = (&DAT_00ea05c0)[iVar2 * 4] + -1;
        }
        else
        {
            *(undefined_32 *)(iVar1 + 0x528) = 0x29a;
        }
    }
    FUN_0041b4d0(iVar3);
    return;
}

void FUN_00420d90(undefined_32 param_1)

{
    char cVar1;
    int iVar2;
    undefined_32 uVar3;
    uint uVar4;
    int iVar5;
    undefined_32 *puVar6;
    char *pcVar7;
    char *pcVar8;
    undefined_32 local_400[128];
    undefined_16 local_200[256];

    DAT_004eb1ec = 0;
    FUN_004049e0();
    DAT_004eb388 = 0;
    iVar2 = FUN_00414d90(0, 0x186af);
    pcVar8 = *(char **)(iVar2 + 0x4d4);
    uVar4 = -1;
    pcVar7 = pcVar8;
    do
    {
        if (uVar4 == 0)
            break;
        uVar4 = uVar4 - 1;
        cVar1 = *pcVar7;
        pcVar7 = pcVar7 + 1;
    } while (cVar1 != '\0');
    if (~uVar4 - 1 < 0x101)
    {
        uVar4 = -1;
        pcVar7 = pcVar8;
        do
        {
            if (uVar4 == 0)
                break;
            uVar4 = uVar4 - 1;
            cVar1 = *pcVar7;
            pcVar7 = pcVar7 + 1;
        } while (cVar1 != '\0');
        iVar2 = ~uVar4 - 1;
    }
    else
    {
        iVar2 = 0x100;
    }
    FUN_0048c340(local_200, pcVar8, iVar2);
    puVar6 = local_400;
    MEMSET(iVar5, puVar6, 0, 0x80)
    local_200[iVar2] = 0;
    iVar2 = FUN_00414d90(0, 0x186b1);
    pcVar8 = *(char **)(iVar2 + 0x4d4);
    if (pcVar8 != NULL)
    {
        uVar4 = -1;
        pcVar7 = pcVar8;
        do
        {
            if (uVar4 == 0)
                break;
            uVar4 = uVar4 - 1;
            cVar1 = *pcVar7;
            pcVar7 = pcVar7 + 1;
        } while (cVar1 != '\0');
        if (~uVar4 - 1 < 0x101)
        {
            uVar4 = -1;
            pcVar7 = pcVar8;
            do
            {
                if (uVar4 == 0)
                    break;
                uVar4 = uVar4 - 1;
                cVar1 = *pcVar7;
                pcVar7 = pcVar7 + 1;
            } while (cVar1 != '\0');
            iVar2 = ~uVar4 - 1;
        }
        else
        {
            iVar2 = 0x100;
        }
        FUN_0048c340(local_400, pcVar8, iVar2);
        *(undefined_16 *)((int)local_400 + iVar2 * 2) = 0;
    }
    iVar2 = FUN_00404960(DAT_004eb38c, local_200, local_400);
    if (iVar2 != 0)
    {
        if (iVar2 == -0x7788feb6)
        {
            uVar3 = lookup_translation(s__MONDOTEXT_H_0406_OK_004b6a7c, 0, 0, 1);
            pcVar8 = s__MONDOTEXT_H_0408_Your_join_requ_004b6988;
        }
        else if (iVar2 == -0x7788feac)
        {
            uVar3 = lookup_translation(s__MONDOTEXT_H_0406_OK_004b6a7c, 0, 0, 1);
            pcVar8 = s__MONDOTEXT_H_0409_Your_password_i_004b69c0;
        }
        else
        {
            uVar3 = lookup_translation(s__MONDOTEXT_H_0406_OK_004b6a7c, 0, 0, 1);
            pcVar8 = s__MONDOTEXT_H_0410_An_unknown_net_004b6a04;
        }
        uVar3 = lookup_translation(pcVar8, uVar3);
        uVar3 = lookup_translation(s__MONDOTEXT_H_0407_Error_004b69ec, uVar3);
        FUN_004145b0(param_1, -1, -1, uVar3);
        FUN_004208c0();
        FUN_00420810();
        DAT_004eb39c = 0;
        FUN_004336d0(1);
        FUN_00414e60(param_1, 0);
        FUN_004117e0();
        FUN_00411820(0xb);
        return;
    }
    FUN_0041c4f0();
    FUN_0041c760(0);
    FUN_0041b700();
    FUN_0041cde0(DAT_00ec7620);
    return;
}

uint FUN_00420f70(int param_1)

{
    return *(uint *)(&DAT_00e9f444 + param_1 * 0xb0) & 1;
}

int FUN_00420f90(void)

{
    int iVar1;
    byte *pbVar2;
    int iVar3;

    iVar1 = 0;
    if (DAT_004eb3b8 != 0)
    {
        pbVar2 = &DAT_00e9f444;
        iVar3 = DAT_004eb3b8;
        do
        {
            if ((*pbVar2 & 1) != 0)
            {
                iVar1 = iVar1 + 1;
            }
            pbVar2 = pbVar2 + 0xb0;
            iVar3 = iVar3 + -1;
        } while (iVar3 != 0);
    }
    return iVar1;
}

undefined_32 FUN_00420fc0(void)

{
    int iVar1;

    iVar1 = FUN_00450aa0(MAGIC('H', 'a', 'n', 'g'), 0);
    if (iVar1 != 0)
    {
        *(undefined_8 *)(iVar1 + 0x70) = 1;
        *(undefined_8 *)(iVar1 + 0x71) = (undefined_8)DAT_004eb3b8;
    }
    return 1;
}

void FUN_00420ff0(int param_1)

{
    uint uVar1;

    uVar1 = *(uint *)(&DAT_00e9f444 + param_1 * 0xb0);
    (&DAT_00e9f448)[param_1 * 0x2c] = 0;
    *(uint *)(&DAT_00e9f444 + param_1 * 0xb0) = uVar1 & 0xfffffffe;
    return;
}

undefined_32 FUN_00421020(int param_1, undefined_32 param_2)

{
    uint uVar1;

    uVar1 = *(uint *)(&DAT_00e9f444 + param_1 * 0xb0);
    (&DAT_00e9f448)[param_1 * 0x2c] = param_2;
    (&DAT_00e9f46c)[param_1 * 0x2c] = 0;
    *(uint *)(&DAT_00e9f444 + param_1 * 0xb0) = uVar1 | 5;
    DAT_004eb3b8 = DAT_004eb3b8 + 1;
    FUN_00420fc0();
    return 1;
}

void FUN_00421070(int param_1)

{
    DAT_004eb3b4 = param_1;
    DAT_004eb3c0 = &DAT_00e9f3c0 + param_1 * 0xb0;
    _wcsncpy(&DAT_00e9f3c4 + param_1 * 0xb0, &DAT_00e9f380, 0x1f);
    *(undefined_16 *)(DAT_004eb3c0 + 0x42) = 0;
    _wcsncpy(DAT_004eb3c0 + 0x44, &DAT_00ec8c00, 0x1f);
    *(undefined_16 *)(DAT_004eb3c0 + 0x82) = 0;
    return;
}

void FUN_004210e0(uint param_1)

{
    int iVar1;

    iVar1 = param_1 * 0xb0;
    if (param_1 < 0x14)
    {
        (&DAT_00e9f448)[param_1 * 0x2c] = 0;
        *(undefined_16 *)(&DAT_00e9f3c4 + iVar1) = 0;
        *(undefined_16 *)(&DAT_00e9f404 + iVar1) = 0;
        *(uint *)(&DAT_00e9f444 + iVar1) = *(uint *)(&DAT_00e9f444 + iVar1) & 0xfffffffa;
    }
    return;
}

// 00421120
undefined_32 parse_racer_tab(int param_1)

{
    int iVar1;
    int iVar2;
    char *pcVar3;
    undefined_8 *puVar4;
    int iVar5;
    char *pcVar6;

    iVar5 = 0;
    DAT_004eb3cc = 0;
    // PlatformAbstraction->fopen
    iVar1 = (**(code **)(DAT_00ecc420 + 0x30))(param_1, &DAT_004b5c4c /* "rb" */);
    if (iVar1 == 0)
    {
        return 1;
    }
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(iVar1, &param_1, 4);
    // PlatformAbstraction->fseek
    (**(code **)(DAT_00ecc420 + 0x4c))(iVar1, 0, 2);
    iVar2 = _ftell(iVar1);
    // PlatformAbstraction->fseek
    (**(code **)(DAT_00ecc420 + 0x4c))(iVar1, 0, 0);
    // PlatformAbstraction->allocator_large
    DAT_004eb3c8 = (char *)(**(code **)(DAT_00ecc420 + 0x20))(iVar2);
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(iVar1, DAT_004eb3c8, iVar2);
    // PlatformAbstraction->fclose
    (**(code **)(DAT_00ecc420 + 0x34))(iVar1);
    if (param_1 == 0x454e4352)
    {
        iVar2 = iVar2 + -4;
        iVar1 = 0;
        if (0 < iVar2)
        {
            do
            {
                DAT_004eb3c8[iVar1] = DAT_004eb3c8[iVar1 + 4] ^ 0xdd;
                iVar1 = iVar1 + 1;
            } while (iVar1 < iVar2);
        }
    }
    pcVar6 = DAT_004eb3c8 + iVar2;
    pcVar3 = DAT_004eb3c8;
    do
    {
        if (pcVar3 < pcVar6)
        {
            do
            {
                if ((*pcVar3 == '\r') || (*pcVar3 == '\n'))
                    break;
                pcVar3 = pcVar3 + 1;
            } while (pcVar3 < pcVar6);
            for (; (pcVar3 < pcVar6 && ((*pcVar3 == '\r' || (*pcVar3 == '\n')))); pcVar3 = pcVar3 + 1)
            {}
        }
        DAT_004eb3cc = DAT_004eb3cc + 1;
    } while (pcVar3 < pcVar6 + -1);
    // PlatformAbstraction->allocator_large
    DAT_004eb3c4 = (**(code **)(DAT_00ecc420 + 0x20))(DAT_004eb3cc * 4);
    pcVar6 = DAT_004eb3c8;
    do
    {
        for (pcVar3 = pcVar6; ((pcVar3 < DAT_004eb3c8 + iVar2 && (*pcVar3 != '\r')) && (*pcVar3 != '\n'));
             pcVar3 = pcVar3 + 1)
        {}
        if (pcVar3 < DAT_004eb3c8 + iVar2)
        {
            do
            {
                if ((*pcVar3 != '\r') && (*pcVar3 != '\n'))
                    break;
                *pcVar3 = '\0';
                pcVar3 = pcVar3 + 1;
            } while (pcVar3 < DAT_004eb3c8 + iVar2);
        }
        FUN_004214c0(pcVar6, pcVar6);
        puVar4 = (undefined_8 *)strchr(pcVar6, 9);
        if (puVar4 != NULL)
        {
            *puVar4 = 0;
        }
        FUN_004ab5d0(pcVar6);
        *(char **)(DAT_004eb3c4 + iVar5) = pcVar6;
        iVar5 = iVar5 + 4;
        pcVar6 = pcVar3;
        if (DAT_004eb3c8 + iVar2 + -1 <= pcVar3)
        {
            _qsort(DAT_004eb3c4, DAT_004eb3cc, 4, &string_compar);
            return 1;
        }
    } while (true);
}

// Not decompiled
// int __cdecl string_compar(const void *a1, const void *a2)
// {
//     return strcmp(*(const char **)a1, *(const char **)a2);
// }

// LAB_004212f0
// UndefinedFunction_004212f0
int string_compar(byte **param_1, byte **param_2)

{
    byte bVar1;
    byte *pbVar2;
    byte *pbVar3;
    bool bVar4;

    pbVar3 = *param_2;
    pbVar2 = *param_1;
    while (true)
    {
        bVar1 = *pbVar2;
        bVar4 = bVar1 < *pbVar3;
        if (bVar1 != *pbVar3)
            break;
        if (bVar1 == 0)
        {
            return 0;
        }
        bVar1 = pbVar2[1];
        bVar4 = bVar1 < pbVar3[1];
        if (bVar1 != pbVar3[1])
            break;
        pbVar2 = pbVar2 + 2;
        pbVar3 = pbVar3 + 2;
        if (bVar1 == 0)
        {
            return 0;
        }
    }
    return (1 - (uint)bVar4) - (uint)(bVar4 != 0);
}

void FUN_00421330(void)

{
    if (DAT_004eb3c8 != 0)
    {
        // PlatformAbstraction->allocator_free
        (**(code **)(DAT_00ecc420 + 0x24))(DAT_004eb3c8);
    }
    if (DAT_004eb3c4 != 0)
    {
        // PlatformAbstraction->allocator_free
        (**(code **)(DAT_00ecc420 + 0x24))(DAT_004eb3c4);
    }
    return;
}

// 00421360
// Lookup text entry from racer.tab
char *lookup_translation(char *param_1)

{
    char cVar1;
    undefined_8 *puVar2;
    char **ppcVar3;
    int iVar4;
    uint uVar5;
    char *pcVar6;
    char *pcVar7;
    char *local_104;
    char local_100[256];

    local_104 = local_100;
    if (param_1 == NULL)
    {
        return NULL;
    }
    if ((*param_1 != '\0') && (*param_1 == '/'))
    {
        iVar4 = strlen(param_1);
        if (iVar4 != 2)
        {
            iVar4 = strchr(param_1 + 1, 0x2f);
            if (DAT_004eb3c8 == 0)
            {
                return (char *)(iVar4 + 1);
            }
            _strncpy(local_100, param_1 + 1, 0xfe);
            puVar2 = (undefined_8 *)strchr(local_100, 0x2f);
            if (puVar2 != NULL)
            {
                *puVar2 = 0;
            }
            FUN_004ab5d0(local_100);
            ppcVar3 = (char **)_bsearch(&local_104, DAT_004eb3c4, DAT_004eb3cc, 4, &string_compar);
            if (ppcVar3 == NULL)
            {
                return (char *)(iVar4 + 1);
            }
            pcVar6 = *ppcVar3;
            uVar5 = strlen(pcVar6) if (pcVar6[uVar5] != '\0')
            {
                return pcVar6 + uVar5;
            }
        }
    }
    return param_1;
}

char *FUN_00421470(char *param_1)

{
    char cVar1;
    int iVar2;
    char *pcVar3;

    if (param_1 == NULL)
    {
        return NULL;
    }
    if (*param_1 == '\0')
    {
        return param_1;
    }
    if (*param_1 != '/')
    {
        return param_1;
    }

    iVar2 = strlen(param_1);
    if (iVar2 == 2)
    {
        return param_1;
    }
    iVar2 = strchr(param_1 + 1, '/');
    return (char *)(iVar2 + 1);
}

int FUN_004214c0(byte *param_1, byte *param_2)

{
    char cVar1;
    char cVar2;
    uint uVar3;
    int iVar4;
    byte bVar5;
    byte *pbVar6;

    bVar5 = *param_2;
    pbVar6 = param_1;
    do
    {
        if (bVar5 == 0)
        {
            *pbVar6 = 0;
            return (int)pbVar6 - (int)param_1;
        }
        if (bVar5 != 0x5c)
        {
            *pbVar6 = bVar5;
            pbVar6 = pbVar6 + 1;
            goto switchD_00421552_caseD_23;
        }
        if (DAT_004d1f9c < 2)
        {
            uVar3 = (byte)PTR_DAT_004d1d90[(char)param_2[1] * 2] & 4;
        }
        else
        {
            uVar3 = __isctype((int)(char)param_2[1], 4);
        }
        if (uVar3 == 0)
        {
            switch (param_2[1])
            {
            case 0x22:
                *pbVar6 = 0x22;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            default:
            switchD_00421552_caseD_23:
                param_2 = param_2 + 1;
                break;
            case 0x27:
                *pbVar6 = 0x27;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x3f:
                *pbVar6 = 0x3f;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x58:
            case 0x78:
                if (DAT_004d1f9c < 2)
                {
                    uVar3 = (byte)PTR_DAT_004d1d90[(char)param_2[2] * 2] & 0x80;
                }
                else
                {
                    uVar3 = __isctype((int)(char)param_2[2], 0x80);
                }
                if (uVar3 != 0)
                {
                    if (DAT_004d1f9c < 2)
                    {
                        uVar3 = (byte)PTR_DAT_004d1d90[(char)param_2[3] * 2] & 0x80;
                    }
                    else
                    {
                        uVar3 = __isctype((int)(char)param_2[3], 0x80);
                    }
                    if (uVar3 != 0)
                    {
                        if (DAT_004d1f9c < 2)
                        {
                            uVar3 = (byte)PTR_DAT_004d1d90[(char)param_2[2] * 2] & 4;
                        }
                        else
                        {
                            uVar3 = __isctype((int)(char)param_2[2], 4);
                        }
                        if (uVar3 == 0)
                        {
                            cVar1 = _tolower((int)(char)param_2[2]);
                            cVar1 = cVar1 + -0x57;
                        }
                        else
                        {
                            cVar1 = param_2[2] - 0x30;
                        }
                        if (DAT_004d1f9c < 2)
                        {
                            uVar3 = (byte)PTR_DAT_004d1d90[(char)param_2[3] * 2] & 4;
                        }
                        else
                        {
                            uVar3 = __isctype((int)(char)param_2[3], 4);
                        }
                        if (uVar3 == 0)
                        {
                            cVar2 = _tolower((int)(char)param_2[3]);
                            *pbVar6 = cVar1 << 4 | cVar2 + 0xa9U;
                            pbVar6 = pbVar6 + 1;
                            param_2 = param_2 + 4;
                        }
                        else
                        {
                            *pbVar6 = cVar1 << 4 | param_2[3] - 0x30;
                            pbVar6 = pbVar6 + 1;
                            param_2 = param_2 + 4;
                        }
                        break;
                    }
                }
                if (DAT_004d1f9c < 2)
                {
                    uVar3 = (byte)PTR_DAT_004d1d90[(char)param_2[2] * 2] & 4;
                }
                else
                {
                    uVar3 = __isctype((int)(char)param_2[2], 4);
                }
                if (uVar3 == 0)
                    goto switchD_00421552_caseD_23;
                if (DAT_004d1f9c < 2)
                {
                    uVar3 = (byte)PTR_DAT_004d1d90[(char)param_2[2] * 2] & 4;
                }
                else
                {
                    uVar3 = __isctype((int)(char)param_2[2], 4);
                }
                if (uVar3 == 0)
                {
                    cVar1 = _tolower((int)(char)param_2[2]);
                    *pbVar6 = cVar1 + 0xa9;
                    pbVar6 = pbVar6 + 1;
                    param_2 = param_2 + 3;
                }
                else
                {
                    *pbVar6 = param_2[2] - 0x30;
                    pbVar6 = pbVar6 + 1;
                    param_2 = param_2 + 3;
                }
                break;
            case 0x5c:
                *pbVar6 = 0x5c;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x61:
                *pbVar6 = 7;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x62:
                *pbVar6 = 8;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x66:
                *pbVar6 = 0xc;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x6e:
                *pbVar6 = 10;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x72:
                *pbVar6 = 0xd;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x74:
                *pbVar6 = 9;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
                break;
            case 0x76:
                *pbVar6 = 0xb;
                pbVar6 = pbVar6 + 1;
                param_2 = param_2 + 2;
            }
        }
        else
        {
            iVar4 = 1;
            bVar5 = 0;
            do
            {
                bVar5 = bVar5 << 3 | param_2[iVar4] - 0x30;
                iVar4 = iVar4 + 1;
            } while (iVar4 < 4);
            *pbVar6 = bVar5;
            pbVar6 = pbVar6 + 1;
            param_2 = param_2 + 4;
        }
        bVar5 = *param_2;
    } while (true);
}

void FUN_00421810(void)

{
    int iVar1;

    iVar1 = FUN_00421b90();
    if (iVar1 == 0)
    {
        FUN_00421b20(1);
        iVar1 = FUN_00421c90();
        if (iVar1 == 0)
        {
            // PlatformAbstraction->dump_exit
            (**(code **)(DAT_00ecc420 + 0x18))(s_elfSaveLoad_SaveThisGameStruct___004b6c94,
                                               s_D__devel_QA5_pc_gnome_SpecPlat_r_004b6cb8, 0x4f);
        }
    }
    FUN_0044e500(0, 0);
    return;
}

bool FUN_00421850(undefined_32 param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_32 *puVar4;
    undefined_32 *puVar5;
    int local_154;
    undefined_32 local_150[20];
    undefined_8 local_100[256];

    local_154 = 0;
    iVar3 = 0;
    _sprintf(local_100, &DAT_004b2524 /* "%s%s" */, s___data_player__004b4f6c, param_1);
    FUN_00484600(local_100, &PTR_DAT_004b4f7c);
    iVar1 = _fopen(local_100, &DAT_004b5c4c /* "rb" */);
    if (iVar1 == 0)
    {
        iVar3 = 1;
        goto LAB_004218f7;
    }
    iVar2 = fread_locked(&local_154, 1, 4, iVar1);
    if ((iVar2 == 0) || (local_154 != 0x10003))
    {
    LAB_004218e2:
        iVar3 = 1;
    }
    else
    {
        iVar2 = fread_locked(local_150, 1, 0x50, iVar1);
        if (iVar2 == 0)
            goto LAB_004218e2;
    }
    fclose(iVar1);
LAB_004218f7:
    if (iVar3 == 0)
    {
        puVar4 = local_150;
        puVar5 = &DAT_00e364b4;
        QMEMCPY(iVar1, puVar4, puVar5, 0x14)
        DAT_004b6c90 = iVar3;
        DAT_00e364f0 = iVar3;
        _sprintf(&DAT_004eb3d0, &DAT_004b2304 /* "%s" */, local_150);
        FUN_0044e500(0, 0);
    }
    return iVar3 == 0;
}

//----- (004219D0) --------------------------------------------------------
// a1 = profile name (example: "anakin.sav")
// Returns TRUE on sucess
bool FUN_004219d0(undefined_32 param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_32 *puVar4;
    undefined_32 *puVar5;
    undefined_32 local_154;
    undefined_32 local_150[20];
    undefined_8 local_100[256];

    local_154 = 0x10003;
    puVar4 = &DAT_00e364b4;
    puVar5 = local_150;
    QMEMCPY(iVar3, puVar4, puVar5, 0x14)
    if (DAT_004b6c90 < 0)
    {
        return false;
    }
    _sprintf(local_100, &DAT_004b2524 /* "%s%s" */, s___data_player__004b4f6c, param_1);
    FUN_00484600(local_100, &PTR_DAT_004b4f7c);
    iVar3 = _fopen(local_100, &DAT_004b6cfc);
    if (iVar3 != 0)
    {
        iVar1 = fwrite(&local_154, 1, 4, iVar3);
        iVar2 = fwrite(local_150, 1, 0x50, iVar3);
        fclose(iVar3);
        return iVar2 != 0 && iVar1 != 0;
    }
    return false;
}

undefined_32 FUN_00421b20(int param_1)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;
    undefined_32 local_50[20];

    puVar2 = &DAT_00e364b4;
    puVar3 = local_50;
    QMEMCPY(iVar1, puVar2, puVar3, 0x14)
    FUN_0044e320(&DAT_00e364a0);
    if (param_1 == 0)
    {
        puVar2 = local_50;
        puVar3 = &DAT_00e364b4;
        QMEMCPY(iVar1, puVar2, puVar3, 0x14)
        return 1;
    }
    DAT_004eb3d0 = DAT_004d55cc;
    DAT_004b6c90 = -1;
    return 1;
}

bool FUN_00421b90(void)

{
    char cVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    char *pcVar5;
    int local_104;
    undefined_8 local_100[256];

    local_104 = 0;
    iVar4 = 0;
    _sprintf(local_100, &DAT_004b2524 /* "%s%s" */, s___data_player__004b4f6c, s_tgfd_dat_004b6d00);
    iVar2 = _fopen(local_100, &DAT_004b5c4c /* "rb" */);
    if (iVar2 == 0)
    {
        iVar4 = 1;
        goto LAB_00421c24;
    }
    iVar3 = fread_locked(&local_104, 1, 4, iVar2);
    if ((iVar3 == 0) || (local_104 != 0x10003))
    {
    LAB_00421c0f:
        iVar4 = 1;
    }
    else
    {
        iVar3 = fread_locked(&DAT_00e364a0, 1, 0xfd4, iVar2);
        if (iVar3 == 0)
            goto LAB_00421c0f;
    }
    fclose(iVar2);
LAB_00421c24:
    if (iVar4 == 0)
    {
        _sprintf(&DAT_004eb3d0, &DAT_004b2304 /* "%s" */, &DAT_00e364b4);
        iVar2 = -1;
        pcVar5 = &DAT_004eb3d0;
        do
        {
            if (iVar2 == 0)
                break;
            iVar2 = iVar2 + -1;
            cVar1 = *pcVar5;
            pcVar5 = pcVar5 + 1;
        } while (cVar1 != '\0');
        DAT_004b6c90 = (iVar2 != -2) - 1;
        DAT_00e364f0 = iVar4;
        iVar2 = FUN_00421d80();
        if (iVar2 != 0)
        {
            FUN_0044e530(0, 0);
            FUN_00421b20(0);
        }
    }
    return iVar4 == 0;
}

bool FUN_00421c90(void)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_32 local_104;
    undefined_8 buff[256];

    local_104 = 0x10003;
    iVar1 = FUN_00421d80();
    if (iVar1 != 0)
    {
        FUN_0044e530(0, 0);
        FUN_00421b20(0);
    }
    create_dir(s___data_player__004b4f6c);
    _sprintf(buff, &DAT_004b2524 /* "%s%s" */, s___data_player__004b4f6c, s_tgfd_dat_004b6d00);
    iVar1 = _fopen(buff, &DAT_004b6cfc);
    if (iVar1 != 0)
    {
        iVar2 = fwrite(&local_104, 1, 4, iVar1);
        iVar3 = fwrite(&DAT_00e364a0, 1, 0xfd4, iVar1);
        fclose(iVar1);
        return iVar3 != 0 && iVar2 != 0;
    }
    return false;
}

bool FUN_00421d80(void)

{
    return DAT_00e364b0 == 0;
}

undefined_32 FUN_00421d90(void)

{
    int iVar1;
    undefined_32 uVar2;

    if (DAT_004b6d20 == 0)
    {
        return 0;
    }
    FUN_00408640(2);
    if (DAT_004eb474 == 0)
    {
        iVar1 = FUN_004848a0();
        if (iVar1 == 0)
        {
            return 0;
        }
    }
    FUN_00408640(4);
    DAT_004eb464 = FUN_0048bee0(0x4b0);
    if (DAT_004eb464 == 0)
    {
        return 0;
    }
    FUN_00408640(6);
    DAT_004eb458 = 1;
    DAT_004eb450 = 1;
    if (DAT_004eb474 == 0)
    {
        FUN_00423210();
    }
    else
    {
        ResumeThread(DAT_004eb478);
    }
    FUN_00408640(8);
    iVar1 = parse_audio_config(s_current_004b2640);
    if (iVar1 < 0)
    {
        FUN_004220b0();
        FUN_00422140(s_current_004b2640);
    }
    if (DAT_004b6d20 == 0)
    {
        uVar2 = FUN_00421eb0(0);
        return uVar2;
    }
    FUN_00408640(10);
    iVar1 = file_access_fopen(s___data_sounds_map_004b740c);
    if (iVar1 == 0)
    {
        FUN_00422060();
    }
    else
    {
        FUN_00421f30();
    }
    file_access_close();
    FUN_00408640(0xf);
    set_output_gain(1.0f);
    FUN_00449ea0();
    FUN_00408640(0x14);
    return 1;
}

undefined_32 FUN_00421eb0(int param_1)

{
    if (DAT_004eb450 == 0)
    {
        return 0;
    }
    FUN_004226c0();
    if (param_1 == 0)
    {
        FUN_00485070(DAT_004eb414);
        SuspendThread(DAT_004eb478);
    }
    else
    {
        FUN_004232c0();
    }
    if (DAT_004eb464 != 0)
    {
        FUN_0048c050(DAT_004eb464);
        DAT_004eb464 = 0;
    }
    if (param_1 != 0)
    {
        FUN_00484a20();
    }
    DAT_004eb450 = 0;
    DAT_004eb474 = (uint)(param_1 == 0);
    return 1;
}

undefined_32 __fastcall FUN_00421f30(int param_1)

{
    byte bVar1;
    int iVar2;
    byte *pbVar3;
    byte *pbVar4;
    bool bVar5;

    iVar2 = parse_line();
    if ((iVar2 == 0) || (iVar2 = _strcmpi(DAT_00ec8e84, s_NUMSOUNDS_004b742c), iVar2 != 0))
    {
        if (*(int *)(PTR_DAT_004b6d34 + 0x28) != 0)
        {
            FUN_004226c0();
        }
        return 1;
    }
    DAT_00e9f360 = atoi(DAT_00ec8e88);
    if (DAT_00e9f360 != 0)
    {
        FUN_00422770(DAT_00e9f360);
        iVar2 = parse_line();
        while (iVar2 != 0)
        {
            pbVar4 = &DAT_004b3e7c;
            pbVar3 = DAT_00ec8e84;
            do
            {
                bVar1 = *pbVar3;
                bVar5 = bVar1 < *pbVar4;
                if (bVar1 != *pbVar4)
                {
                LAB_00421fdd:
                    iVar2 = (1 - (uint)bVar5) - (uint)(bVar5 != 0);
                    goto LAB_00421fe2;
                }
                if (bVar1 == 0)
                    break;
                bVar1 = pbVar3[1];
                bVar5 = bVar1 < pbVar4[1];
                if (bVar1 != pbVar4[1])
                    goto LAB_00421fdd;
                pbVar3 = pbVar3 + 2;
                pbVar4 = pbVar4 + 2;
            } while (bVar1 != 0);
            iVar2 = 0;
        LAB_00421fe2:
            if (iVar2 == 0)
            {
                return 0;
            }
            iVar2 = _strcmpi(DAT_00ec8e84, s_NUMVOICES_004b7420);
            if (iVar2 == 0)
            {
                iVar2 = atoi(DAT_00ec8e88);
                DAT_00e9f360 = DAT_00e9f360 - iVar2;
            }
            else
            {
                if (DAT_004eb450 != 0)
                {
                    param_1 = FUN_004227e0(DAT_00ec8e84, 1);
                }
                if (param_1 == 0)
                {
                    param_1 = FUN_004227e0(s_sfx_crash_wood_wav_004b286c, 1);
                }
            }
            iVar2 = parse_line();
        }
    }
    return 0;
}

undefined_32 FUN_00422060(void)

{
    undefined_8 **ppuVar1;
    int iVar2;
    undefined_8 **ppuVar3;

    FUN_00422770(0x57);
    if (PTR_s_ex_lrg1_wav_004b6d38 != NULL)
    {
        ppuVar3 = &PTR_s_ex_lrg1_wav_004b6d38;
        do
        {
            iVar2 = FUN_004227e0(*ppuVar3, 1);
            if (iVar2 == 0)
            {
                FUN_004227e0(s_sfx_crash_wood_wav_004b286c, 1);
            }
            ppuVar1 = ppuVar3 + 2;
            ppuVar3 = ppuVar3 + 2;
        } while (*ppuVar1 != NULL);
    }
    return 0;
}

void FUN_004220b0(void)

{
    DAT_004b6d20 = DAT_004eb458;
    if ((DAT_004eb458 == 0) || (DAT_0050d550 = 1, DAT_0050d55c == 0))
    {
        DAT_0050d550 = 0;
    }
    DAT_004b6d14 = 0;
    DAT_004b6d18 = DAT_004eb458;
    if ((DAT_004eb458 == 0) || (DAT_004b6d1c = 1, DAT_0050d554 == 0))
    {
        DAT_004b6d1c = 0;
    }
    DAT_004b6d24 = 1.0f;
    FUN_00484d40(1.0f);
    DAT_004eb45c = 0;
    DAT_004eb460 = 0;
    DAT_004b6d28 = DAT_004eb458;
    DAT_00e364a5 = 0xe1;
    DAT_00e364a6 = 200;
    return;
}

undefined_32 FUN_00422140(undefined_32 param_1)

{
    int iVar1;
    undefined_8 *puVar2;
    undefined_8 local_140[32];
    undefined_8 local_120[32];
    undefined_8 local_100[256];

    _sprintf(local_100, s__s_s__s_004b4830, s___data_config__004b252c, param_1, s_audio_cfg_004b749c);
    iVar1 = FUN_004877d0();
    if (iVar1 == 0)
    {
        FUN_00487960();
        return -1;
    }
    _sprintf(local_120, s_AUDIO_004b7494);
    iVar1 = FUN_004879f0(s___________s_SETTINGS_004b4810, local_120);
    if (iVar1 == 0)
    {
        puVar2 = &DAT_004b480c;
        if (DAT_004b6d20 == 0)
        {
            puVar2 = &DAT_004b4808;
        }
        _sprintf(local_140, s_SYS__s_004b748c, puVar2);
        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
        if (iVar1 == 0)
        {
            puVar2 = &DAT_004b480c;
            if (DAT_004b6d14 == 0)
            {
                puVar2 = &DAT_004b4808;
            }
            _sprintf(local_140, s_HIRES__s_004b7480, puVar2);
            iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
            if (iVar1 == 0)
            {
                puVar2 = &DAT_004b480c;
                if (DAT_0050d550 == 0)
                {
                    puVar2 = &DAT_004b4808;
                }
                _sprintf(local_140, s_3D__s_004b7478, puVar2);
                iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                if (iVar1 == 0)
                {
                    puVar2 = &DAT_004b480c;
                    if (DAT_004b6d18 == 0)
                    {
                        puVar2 = &DAT_004b4808;
                    }
                    _sprintf(local_140, s_DOPPLER__s_004b746c, puVar2);
                    iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                    if (iVar1 == 0)
                    {
                        puVar2 = &DAT_004b480c;
                        if (DAT_004b6d1c == 0)
                        {
                            puVar2 = &DAT_004b4808;
                        }
                        _sprintf(local_140, s_REFLECTIONS__s_004b47f8, puVar2);
                        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                        if (iVar1 == 0)
                        {
                            _sprintf(local_140, s_GAINMATCH__0_2f_004b745c, (double)DAT_004b6d24);
                            iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                            if (iVar1 == 0)
                            {
                                puVar2 = &DAT_004b480c;
                                if (DAT_004b6d28 == 0)
                                {
                                    puVar2 = &DAT_004b4808;
                                }
                                _sprintf(local_140, s_VOICE__s_004b7450, puVar2);
                                iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                if (iVar1 == 0)
                                {
                                    puVar2 = &DAT_004b480c;
                                    if (DAT_004eb45c == 0)
                                    {
                                        puVar2 = &DAT_004b4808;
                                    }
                                    _sprintf(local_140, s_MUSIC__s_004b7444, puVar2);
                                    iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                    if (iVar1 == 0)
                                    {
                                        puVar2 = &DAT_004b480c;
                                        if (DAT_004eb460 == 0)
                                        {
                                            puVar2 = &DAT_004b4808;
                                        }
                                        _sprintf(local_140, s_REVERB__s_004b7438, puVar2);
                                        iVar1 = FUN_004879f0(s___28s__28s_004b3d10, local_120, local_140);
                                        if (iVar1 == 0)
                                        {
                                            iVar1 = FUN_004879a0();
                                            if (iVar1 == 0)
                                            {
                                                FUN_00487960();
                                                return 1;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    FUN_00487960();
    return 0;
}

// 00422440
undefined_32 parse_audio_config(undefined_32 param_1)

{
    byte bVar1;
    int iVar2;
    byte *pbVar3;
    byte *pbVar4;
    bool bVar5;
    float10 fVar6;
    undefined_8 local_100[256];

    if (DAT_004eb450 != 0)
    {
        _sprintf(local_100, s__s_s__s_004b4830, s___data_config__004b252c, param_1, s_audio_cfg_004b749c);
        iVar2 = file_access_fopen(local_100);
        if (iVar2 == 0)
        {
            file_access_close();
            return -1;
        }
        iVar2 = read_line();
        while (iVar2 != 0)
        {
            pbVar4 = &DAT_004b3e7c;
            pbVar3 = DAT_00ec8e84;
            do
            {
                bVar1 = *pbVar3;
                bVar5 = bVar1 < *pbVar4;
                if (bVar1 != *pbVar4)
                {
                LAB_004224df:
                    iVar2 = (1 - (uint)bVar5) - (uint)(bVar5 != 0);
                    goto LAB_004224e4;
                }
                if (bVar1 == 0)
                    break;
                bVar1 = pbVar3[1];
                bVar5 = bVar1 < pbVar4[1];
                if (bVar1 != pbVar4[1])
                    goto LAB_004224df;
                pbVar3 = pbVar3 + 2;
                pbVar4 = pbVar4 + 2;
            } while (bVar1 != 0);
            iVar2 = 0;
        LAB_004224e4:

            if (iVar2 == 0)
                break;
            iVar2 = _strcmpi(DAT_00ec8e84, s_AUDIO_004b7494);
            if (iVar2 == 0)
            {
                iVar2 = _strcmpi(DAT_00ec8e8c, s_HIRES_004b74d4);
                if (iVar2 == 0)
                {
                    iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                    DAT_004b6d14 = (uint)(iVar2 == 0);
                }
                else
                {
                    iVar2 = _strcmpi(DAT_00ec8e8c, &PTR_DAT_004b74d0);
                    if (iVar2 == 0)
                    {
                        iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                        DAT_004b6d20 = (uint)(iVar2 == 0);
                    }
                    else
                    {
                        iVar2 = _strcmpi(DAT_00ec8e8c, &DAT_004b74cc);
                        if (iVar2 == 0)
                        {
                            iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                            DAT_0050d550 = (uint)(iVar2 == 0);
                        }
                        else
                        {
                            iVar2 = _strcmpi(DAT_00ec8e8c, s_DOPPLER_004b74c4);
                            if (iVar2 == 0)
                            {
                                iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                                DAT_004b6d18 = (uint)(iVar2 == 0);
                            }
                            else
                            {
                                iVar2 = _strcmpi(DAT_00ec8e8c, s_GAINMATCH_004b74b8);
                                if (iVar2 == 0)
                                {
                                    fVar6 = (float10)atof(DAT_00ec8e90);
                                    DAT_004b6d24 = (float)fVar6;
                                    FUN_00484d40(DAT_004b6d24);
                                }
                                else
                                {
                                    iVar2 = _strcmpi(DAT_00ec8e8c, s_VOICE_004b74b0);
                                    if (iVar2 == 0)
                                    {
                                        iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                                        DAT_004b6d28 = (uint)(iVar2 == 0);
                                    }
                                    else
                                    {
                                        iVar2 = _strcmpi(DAT_00ec8e8c, s_MUSIC_004b74a8);
                                        if (iVar2 == 0)
                                        {
                                            iVar2 = _strcmpi(DAT_00ec8e90, &DAT_004b480c);
                                            DAT_004eb45c = (uint)(iVar2 == 0);
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            iVar2 = parse_line();
        }
        file_access_close();
    }
    return 1;
}

void FUN_004226c0(void)

{
    uint uVar1;
    int iVar2;
    int iVar3;
    uint uVar4;

    uVar4 = 0;
    iVar3 = *(int *)(PTR_DAT_004b6d34 + 0x28);
    if (iVar3 != 0)
    {
        if (*(int *)(PTR_DAT_004b6d34 + 0x20) != 0)
        {
            iVar2 = 0;
            do
            {
                uVar1 = *(uint *)(iVar3 + 0x24);
                if ((uVar1 & 1) != 0)
                {
                    if (DAT_004b6d2c == 0)
                    {
                        if ((uVar1 & 2) == 0)
                        {
                            FUN_00422d10(iVar3);
                            goto LAB_00422713;
                        }
                    }
                    else
                    {
                        FUN_00422d10(iVar3);
                        uVar1 = *(uint *)(iVar3 + 0x24);
                    }
                    *(uint *)(iVar3 + 0x24) = uVar1 & 0xfffffffd;
                }
            LAB_00422713:
                FUN_004231f0(*(int *)(PTR_DAT_004b6d34 + 0x28) + iVar2);
                uVar4 = uVar4 + 1;
                iVar2 = iVar2 + 0x4c;
                iVar3 = iVar3 + 0x4c;
            } while (uVar4 < *(uint *)(PTR_DAT_004b6d34 + 0x20));
        }
        _free(*(undefined_32 *)(PTR_DAT_004b6d34 + 0x28));
        *(undefined_32 *)(PTR_DAT_004b6d34 + 0x20) = 0;
        *(undefined_32 *)(PTR_DAT_004b6d34 + 0x24) = 0;
        *(undefined_32 *)(PTR_DAT_004b6d34 + 0x28) = 0;
    }
    return;
}

undefined_32 FUN_00422770(int param_1)

{
    undefined_32 uVar1;
    uint uVar2;
    int iVar3;
    undefined_32 *puVar4;

    uVar1 = _malloc(param_1 * 0x4c);
    *(undefined_32 *)(PTR_DAT_004b6d34 + 0x28) = uVar1;
    if (*(undefined_32 **)(PTR_DAT_004b6d34 + 0x28) == NULL)
    {
        return 0;
    }
    puVar4 = *(undefined_32 **)(PTR_DAT_004b6d34 + 0x28);
    MEMSET(uVar2, puVar4, 0, param_1 * 0x13 & 0x3fffffff)
    for (iVar3 = 0; iVar3 != 0; iVar3 = iVar3 + -1)
    {
        *(undefined_8 *)puVar4 = 0;
        puVar4 = (undefined_32 *)((int)puVar4 + 1);
    }
    *(int *)(PTR_DAT_004b6d34 + 0x24) = param_1;
    *(undefined_32 *)(PTR_DAT_004b6d34 + 0x20) = 0;
    return 1;
}

undefined_32 *FUN_004227e0(byte *param_1, int param_2)

{
    undefined_32 *puVar1;
    byte bVar2;
    bool bVar3;
    byte *pbVar4;
    int iVar5;
    undefined_32 *puVar6;
    char *pcVar7;
    undefined_8 *puVar8;
    uint uVar9;
    uint uVar10;
    byte *pbVar11;
    undefined_32 *puVar12;
    undefined_32 *puVar13;
    bool bVar14;
    int local_284;
    char local_280[128];
    undefined_8 local_200[512];

    bVar3 = false;
    local_284 = 0;
    if (DAT_004eb450 == 0)
    {
        return NULL;
    }
    pbVar11 = &DAT_004b7580;
    pbVar4 = param_1;
    do
    {
        bVar2 = *pbVar4;
        bVar14 = bVar2 < *pbVar11;
        if (bVar2 != *pbVar11)
        {
        LAB_00422838:
            iVar5 = (1 - (uint)bVar14) - (uint)(bVar14 != 0);
            goto LAB_0042283d;
        }
        if (bVar2 == 0)
            break;
        bVar2 = pbVar4[1];
        bVar14 = bVar2 < pbVar11[1];
        if (bVar2 != pbVar11[1])
            goto LAB_00422838;
        pbVar4 = pbVar4 + 2;
        pbVar11 = pbVar11 + 2;
    } while (bVar2 != 0);
    iVar5 = 0;
LAB_0042283d:
    if (iVar5 == 0)
    {
        return NULL;
    }
    puVar6 = (undefined_32 *)FUN_004231b0(param_1);
    if (puVar6 == NULL)
    {
        pcVar7 = s___data_wavs_22K___data_wavs_22K__004b7558;
        if (DAT_004b6d14 == 0)
        {
            pcVar7 = s___data_wavs_11K___data_wavs_11K__004b751c;
        }
        _sprintf(local_200, s__s__s_s__s_s_004b74e4, pcVar7, &DAT_00e9f300, s___data_wavs_Music_004b74f4, &DAT_004d55cc,
                 s___data_wavs_Voice_004b7508);
        puVar8 = local_200;
        do
        {
            puVar8 = (undefined_8 *)FUN_0048c2d0(puVar8, local_280, 0x80, &DAT_004b3b5c);
            if (local_280[0] != '\0')
            {
                _sprintf(local_280, s__s_c_s_004b74dc, local_280, 0x5c, param_1);
                // PlatformAbstraction->fopen
                local_284 = (**(code **)(DAT_00ecc420 + 0x30))(local_280, &DAT_004b5c4c /* "rb" */);
                if (local_284 != 0)
                {
                    bVar3 = true;
                    break;
                }
            }
        } while (puVar8 != NULL);
        if (!bVar3)
        {
            return NULL;
        }
        uVar9 = *(uint *)(PTR_DAT_004b6d34 + 0x20);
        if (uVar9 < *(uint *)(PTR_DAT_004b6d34 + 0x24))
        {
            puVar6 = (undefined_32 *)(*(int *)(PTR_DAT_004b6d34 + 0x28) + uVar9 * 0x4c);
            puVar6[8] = uVar9;
            _strncpy((char *)puVar6, (char *)param_1, 0x1f);
            *(char *)((int)puVar6 + 0x1f) = '\0';
            uVar9 = FUN_004851a0(local_284, puVar6 + 0xb, puVar6 + 0xc, puVar6 + 0xd, puVar6 + 0xf);
            puVar6[10] = uVar9;
            if (uVar9 != 0)
            {
                uVar10 = (uint)((ulonglong)uVar9 / ((ulonglong)(uint)puVar6[0xb] / 1000));
                puVar6[0xe] = uVar10;
                if (puVar6[0xc] == 0x10)
                {
                    puVar6[0xe] = uVar10 >> 1;
                }
                if (puVar6[0xd] != 0)
                {
                    puVar6[0xe] = (uint)puVar6[0xe] >> 1;
                }
                puVar6[9] = 0;
                puVar6[0x11] = 1;
                if (0x81330 < uVar9)
                {
                    puVar6[9] = 8;
                }
                FUN_004231d0(puVar6);
                *(int *)(PTR_DAT_004b6d34 + 0x20) = *(int *)(PTR_DAT_004b6d34 + 0x20) + 1;
                // PlatformAbstraction->fclose
                (**(code **)(DAT_00ecc420 + 0x34))(local_284);
                return puVar6;
            }
        }
    }
    else
    {
        if (((DAT_004b6d2c == 0) && (param_2 != 0)) && ((*(byte *)(puVar6 + 9) & 9) == 0))
        {
            FUN_00422ac0(puVar6);
        }
        if (*(uint *)(PTR_DAT_004b6d34 + 0x20) < *(uint *)(PTR_DAT_004b6d34 + 0x24))
        {
            puVar1 = (undefined_32 *)(*(int *)(PTR_DAT_004b6d34 + 0x28) + *(uint *)(PTR_DAT_004b6d34 + 0x20) * 0x4c);
            puVar12 = puVar6;
            puVar13 = puVar1;
            QMEMCPY(iVar5, puVar12, puVar13, 0x13)
            if ((puVar6[9] & 8) == 0)
            {
                puVar6[9] = puVar6[9] | 4;
                puVar1[9] = puVar1[9] | 2;
            }
            puVar1[8] = *(undefined_32 *)(PTR_DAT_004b6d34 + 0x20);
            *(int *)(PTR_DAT_004b6d34 + 0x20) = *(int *)(PTR_DAT_004b6d34 + 0x20) + 1;
            return puVar1;
        }
    }
    if (local_284 != 0)
    {
        // PlatformAbstraction->fclose
        (**(code **)(DAT_00ecc420 + 0x34))(local_284);
    }
    return NULL;
}

int FUN_00422a90(int param_1)

{
    if ((-1 < param_1) && (param_1 < *(int *)(PTR_DAT_004b6d34 + 0x20)))
    {
        return *(int *)(PTR_DAT_004b6d34 + 0x28) + param_1 * 0x4c;
    }
    return 0;
}

undefined_32 FUN_00422ac0(int param_1)

{
    bool bVar1;
    char *pcVar2;
    undefined_8 *puVar3;
    undefined_32 uVar4;
    int iVar5;
    int iVar6;
    char local_280[128];
    undefined_8 local_200[512];

    iVar6 = 0;
    if ((*(uint *)(param_1 + 0x24) & 1) != 0)
    {
        return 0;
    }
    if ((PTR_IMAGE_DOS_HEADER_004b6d10 < (undefined_8 *)(DAT_004eb44c + *(int *)(param_1 + 0x28)))
        && ((*(uint *)(param_1 + 0x24) & 8) == 0))
    {
        FUN_00422f60(*(int *)(param_1 + 0x28) + 0x19000);
    }
    iVar5 = DAT_004eb414;
    if ((*(byte *)(param_1 + 0x24) & 8) == 0)
    {
        iVar5 = FUN_00484aa0(*(undefined_32 *)(param_1 + 0x34), *(undefined_32 *)(param_1 + 0x2c),
                             *(undefined_32 *)(param_1 + 0x30), *(undefined_32 *)(param_1 + 0x28), DAT_004b6d30);
        if (iVar5 == 0)
            goto LAB_00422cd2;
        DAT_004eb44c = DAT_004eb44c + *(int *)(param_1 + 0x28);
    }
    *(int *)(param_1 + 0x48) = iVar5;
    bVar1 = false;
    pcVar2 = s___data_wavs_22K___data_wavs_22K__004b7558;
    if (DAT_004b6d14 == 0)
    {
        pcVar2 = s___data_wavs_11K___data_wavs_11K__004b751c;
    }
    _sprintf(local_200, s__s__s_s__s_s_004b74e4, pcVar2, &DAT_00e9f300, s___data_wavs_Music_004b74f4, &DAT_004d55cc,
             s___data_wavs_Voice_004b7508);
    puVar3 = local_200;
    do
    {
        puVar3 = (undefined_8 *)FUN_0048c2d0(puVar3, local_280, 0x80, &DAT_004b3b5c);
        if (local_280[0] != '\0')
        {
            _sprintf(local_280, s__s_c_s_004b74dc, local_280, 0x5c, param_1);
            // PlatformAbstraction->fopen
            iVar6 = (**(code **)(DAT_00ecc420 + 0x30))(local_280, &DAT_004b5c4c /* "rb" */);
            if (iVar6 != 0)
            {
                bVar1 = true;
                break;
            }
        }
    } while (puVar3 != NULL);
    if (bVar1)
    {
        if ((*(byte *)(param_1 + 0x24) & 8) != 0)
        {
            uVar4 = FUN_004083c1();
            return uVar4;
        }
        // PlatformAbstraction->fseek
        (**(code **)(DAT_00ecc420 + 0x4c))(iVar6, *(undefined_32 *)(param_1 + 0x3c), 0);
        iVar5 = FUN_00422f00(iVar6, param_1);
        if (iVar5 != 0)
        {
            *(uint *)(param_1 + 0x24) = *(uint *)(param_1 + 0x24) | 1;
            // PlatformAbstraction->fclose
            (**(code **)(DAT_00ecc420 + 0x34))(iVar6);
            return 1;
        }
    }
LAB_00422cd2:
    if (iVar6 != 0)
    {
        // PlatformAbstraction->fclose
        (**(code **)(DAT_00ecc420 + 0x34))(iVar6);
    }
    if (*(int *)(param_1 + 0x48) != 0)
    {
        release_ia3d(*(int *)(param_1 + 0x48));
    }
    *(undefined_32 *)(param_1 + 0x48) = 0;
    return 0;
}

undefined_32 FUN_00422c0d(void)

{
    int in_EAX;
    int iVar1;
    int unaff_ESI;
    undefined_32 unaff_EDI;

    if ((in_EAX != 0) && ((*(byte *)(in_EAX + 0x24) & 1) != 0))
    {
        FUN_00422d10();
    }
    DAT_004eb40c = *(int *)(unaff_ESI + 0x28);
    DAT_004eb404 = unaff_EDI;
    DAT_004eb418 = unaff_ESI;
    // PlatformAbstraction->fseek
    (**(code **)(DAT_00ecc420 + 0x4c))();
    iVar1 = FUN_004233a0();
    DAT_004eb40c = DAT_004eb40c - iVar1;
    *(uint *)(unaff_ESI + 0x24) = *(uint *)(unaff_ESI + 0x24) | 1;
    LeaveCriticalSection((LPCRITICAL_SECTION)&DAT_004b7e7e);
    return 1;
}

undefined_32 FUN_00422d10(int param_1)

{
    if ((*(uint *)(param_1 + 0x24) & 1) == 0)
    {
        return 0;
    }
    if ((*(uint *)(param_1 + 0x24) & 8) == 0)
    {
        release_ia3d(*(undefined_32 *)(param_1 + 0x48));
        *(undefined_32 *)(param_1 + 0x48) = 0;
        DAT_004eb44c = DAT_004eb44c - *(int *)(param_1 + 0x28);
        *(undefined_32 *)(param_1 + 0x48) = 0;
        *(uint *)(param_1 + 0x24) = *(uint *)(param_1 + 0x24) & 0xfffffffe;
        return 1;
    }
    if (DAT_004eb418 == param_1)
    {
        // PlatformAbstraction->fclose
        (**(code **)(DAT_00ecc420 + 0x34))(DAT_004eb404);
        DAT_004eb404 = 0;
        DAT_004eb40c = 0;
        DAT_004eb418 = 0;
    }
    *(undefined_32 *)(param_1 + 0x48) = 0;
    *(uint *)(param_1 + 0x24) = *(uint *)(param_1 + 0x24) & 0xfffffffe;
    return 1;
}

void FUN_00422da0(void)

{
    uint uVar1;
    int iVar2;
    uint uVar3;

    iVar2 = *(int *)(PTR_DAT_004b6d34 + 0x28);
    if ((iVar2 != 0) && (uVar3 = 0, *(int *)(PTR_DAT_004b6d34 + 0x20) != 0))
    {
        do
        {
            uVar1 = *(uint *)(iVar2 + 0x24);
            if ((uVar1 & 1) != 0)
            {
                if (DAT_004b6d2c == 0)
                {
                    if ((uVar1 & 2) == 0)
                    {
                        FUN_00422d10(iVar2);
                        goto LAB_00422dee;
                    }
                }
                else
                {
                    FUN_00422d10(iVar2);
                    uVar1 = *(uint *)(iVar2 + 0x24);
                }
                *(uint *)(iVar2 + 0x24) = uVar1 & 0xfffffffd;
            }
        LAB_00422dee:
            uVar3 = uVar3 + 1;
            iVar2 = iVar2 + 0x4c;
        } while (uVar3 < *(uint *)(PTR_DAT_004b6d34 + 0x20));
    }
    uVar3 = 0;
    do
    {
        FUN_00449e00(&DAT_00e67e40 + uVar3);
        FUN_00449e00((int)&DAT_00e68060 + uVar3);
        uVar3 = uVar3 + 0x44;
    } while (uVar3 < 0x220);
    return;
}

int FUN_00422e30(int param_1, undefined_32 param_2, int *param_3)

{
    int iVar1;
    undefined_8 local_20[32];

    iVar1 = 0;
    if ((*(byte *)(param_1 + 0x24) & 1) == 0)
    {
        FUN_00422ac0(param_1);
        if ((*(byte *)(param_1 + 0x24) & 8) != 0)
        {
            DAT_004eb408 = param_2;
        }
        if ((*(byte *)(param_1 + 0x24) & 1) == 0)
        {
            return 0;
        }
    }
    *(undefined_32 *)(param_1 + 0x44) = 1;
    if ((param_3 != NULL) && (*param_3 != 0))
    {
        _sprintf(local_20, &PTR_DAT_004b7588, param_1);
        iVar1 = FUN_00423050(local_20);
        if (iVar1 == 0)
        {
            *param_3 = 0;
        }
    }
    if ((*(byte *)(param_1 + 0x24) & 8) == 0)
    {
        if (iVar1 != 0)
        {
            return iVar1;
        }
        iVar1 = FUN_004850c0(*(undefined_32 *)(param_1 + 0x48), 0);
        if ((iVar1 == 1) && (*(uint *)(param_1 + 0x20) < DAT_00e9f360))
        {
            iVar1 = FUN_00484bb0(*(undefined_32 *)(param_1 + 0x48));
            return iVar1;
        }
    }
    return *(int *)(param_1 + 0x48);
}

bool FUN_00422f00(undefined_32 param_1, int param_2)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;

    iVar3 = param_2;
    iVar1 = FUN_00485110(*(undefined_32 *)(param_2 + 0x48), *(undefined_32 *)(param_2 + 0x28), &param_2);
    if (iVar1 == 0)
    {
        return false;
    }
    // PlatformAbstraction->fread
    uVar2 = (**(code **)(DAT_00ecc420 + 0x38))(param_1, iVar1, param_2);
    iVar3 = FUN_00485170(*(undefined_32 *)(iVar3 + 0x48), iVar1, uVar2);
    return iVar3 != 0;
}

uint FUN_00422f60(uint param_1)

{
    uint uVar1;
    int iVar2;
    uint uVar3;
    int iVar4;
    uint uVar5;
    uint local_8;
    uint local_4;

    local_4 = DAT_004eb470;
    local_8 = 0;
    uVar3 = 0;
    while (true)
    {
        iVar4 = *(int *)(PTR_DAT_004b6d34 + 0x28) + DAT_004eb46c * 0x4c;
        uVar5 = DAT_004eb46c;
        if (DAT_004eb46c < *(uint *)(PTR_DAT_004b6d34 + 0x20))
        {
            do
            {
                uVar1 = *(uint *)(iVar4 + 0x24);
                if (((((uVar1 & 1) != 0) && ((uVar1 & 8) == 0)) && ((DAT_004b6d2c != 0 || ((uVar1 & 6) == 0))))
                    && (*(int *)(iVar4 + 0x40) == 0))
                {
                    iVar2 = FUN_004850c0(*(undefined_32 *)(iVar4 + 0x48), 0);
                    if (iVar2 == 0)
                    {
                        if (*(int *)(iVar4 + 0x44) == 0)
                        {
                            uVar3 = uVar3 + *(int *)(iVar4 + 0x28);
                            FUN_00422d10(iVar4);
                            DAT_004eb454 = 2;
                            if (param_1 <= uVar3)
                            {
                                DAT_004eb470 = local_4;
                                DAT_004eb46c = uVar5 + 1;
                                return uVar3;
                            }
                        }
                        else
                        {
                            *(undefined_32 *)(iVar4 + 0x44) = 0;
                        }
                    }
                }
                uVar5 = uVar5 + 1;
                iVar4 = iVar4 + 0x4c;
            } while (uVar5 < *(uint *)(PTR_DAT_004b6d34 + 0x20));
        }
        if (1 < local_8)
            break;
        local_8 = local_8 + 1;
        local_4 = (uint)(local_4 == 0);
        DAT_004eb46c = 0;
    }
    return 0;
}

int FUN_00423050(int param_1)

{
    char *pcVar1;
    int iVar2;
    int iVar3;
    undefined_32 uVar4;
    undefined_32 uStack_94;
    undefined_32 uStack_90;
    undefined_32 uStack_8c;
    int iStack_88;
    undefined_32 uStack_84;
    undefined_8 local_80[128];

    if (param_1 == 0)
    {
        return 0;
    }
    pcVar1 = s___data_wavs_22K_004b759c;
    if (DAT_004b6d14 == 0)
    {
        pcVar1 = s___data_wavs_11K_004b758c;
    }
    _sprintf(local_80, s__s_c_s_004b74dc, pcVar1, 0x5c, param_1);
    // PlatformAbstraction->fopen
    iVar2 = (**(code **)(DAT_00ecc420 + 0x30))(local_80, &DAT_004b5c4c /* "rb" */);
    if (iVar2 == 0)
    {
        return 0;
    }
    iVar3 = FUN_004851a0(iVar2, &uStack_8c, &uStack_84, &uStack_94, &iStack_88);
    if ((iVar3 != 0) && (iStack_88 = FUN_00484aa0(uStack_94, uStack_8c, uStack_84, iVar3, 0), iStack_88 != 0))
    {
        iVar3 = FUN_00485110(iStack_88, iVar3, &uStack_90);
        if (iVar3 == 0)
        {
            return 0;
        }
        // PlatformAbstraction->fread
        uVar4 = (**(code **)(DAT_00ecc420 + 0x38))(iVar2, iVar3, uStack_90);
        iVar3 = FUN_00485170(iStack_88, iVar3, uVar4);
        if (iVar3 != 0)
        {
            // PlatformAbstraction->fclose
            (**(code **)(DAT_00ecc420 + 0x34))(iVar2);
            return iStack_88;
        }
    }
    // PlatformAbstraction->fclose
    (**(code **)(DAT_00ecc420 + 0x34))(iVar2);
    if (iStack_88 != 0)
    {
        release_ia3d(iStack_88);
    }
    return 0;
}

bool FUN_00423190(int param_1)

{
    return DAT_004eb418 == param_1;
}

void FUN_004231b0(undefined_32 param_1)

{
    FUN_0048c160(DAT_004eb464, param_1);
    return;
}

void FUN_004231d0(undefined_32 param_1)

{
    FUN_0048c0a0(DAT_004eb464, param_1, param_1);
    return;
}

void FUN_004231f0(undefined_32 param_1)

{
    FUN_0048c210(DAT_004eb464, param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00423210(void)

{
    DAT_004eb410 = 0x2b110;
    DAT_004eb404 = 0;
    DAT_004eb40c = 0;
    DAT_004eb418 = 0;
    DAT_004eb408 = 0;
    DAT_004eb414 = FUN_00484aa0(1, 0x5622, 0x10, 0x2b110, 4);
    DAT_004eb400 = CreateEventA((LPSECURITY_ATTRIBUTES)0x0, 0, 0, (LPCSTR)0x0);
    FUN_00423350();
    DAT_004eb478 = CreateThread((LPSECURITY_ATTRIBUTES)0x0, 0, (LPTHREAD_START_ROUTINE)&DAT_00423330, (LPVOID)0x0, 0,
                                (LPDWORD)&DAT_004eb3f8);
    DAT_004eb3fc = CreateEventA((LPSECURITY_ATTRIBUTES)0x0, 0, 0, (LPCSTR)0x0);
    _DAT_004eb47c = 1;
    DAT_004eb44c = DAT_004eb44c + DAT_004eb410;
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_004232c0(void)

{
    CloseHandle(DAT_004eb400);
    DAT_004eb400 = (HANDLE)0x0;
    release_ia3d(DAT_004eb414);
    DAT_004eb414 = 0;
    if (DAT_004eb3fc != (HANDLE)0x0)
    {
        CloseHandle(DAT_004eb3fc);
    }
    DAT_004eb3fc = (HANDLE)0x0;
    TerminateThread(DAT_004eb478, 0);
    DAT_004eb478 = (HANDLE)0x0;
    _DAT_004eb47c = 0;
    return 1;
}

void FUN_00423350(void)

{
    int *piVar1;
    int iVar2;
    uint *puVar3;
    uint local_8[2];

    piVar1 = DAT_004eb414;
    local_8[0] = DAT_004eb410 >> 1;
    local_8[1] = DAT_004eb410 - 1;
    puVar3 = local_8;
    iVar2 = 2;
    do
    {
        (**(code **)(*piVar1 + 0xec))(piVar1, *puVar3, DAT_004eb400);
        puVar3 = puVar3 + 1;
        iVar2 = iVar2 + -1;
    } while (iVar2 != 0);
    return;
}

//----- (004233A0) --------------------------------------------------------
// a1 = some kind of file/stream-object which is at least 64 bytes
// a2 = Stream write offset in bytes
// a3 = Number of bytes to write
// Returns the number of bytes written to buffer
// Helper-thread.c
uint FUN_004233a0(int param_1, undefined_32 param_2, uint param_3)

{
    int *piVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    undefined_32 *puVar6;
    undefined_32 uVar7;
    uint uVar8;
    int iVar9;
    undefined_32 uVar10;

    uVar2 = param_3;
    piVar1 = DAT_004eb414;
    if (param_1 == 0)
    {
        return 0;
    }
    if (DAT_004eb40c == 0)
    {
        return 0;
    }
    uVar10 = 0;
    iVar9 = 0;
    uVar7 = param_2;
    uVar8 = param_3;

    // dword_4EB414->Lock(a2, a3, &t3, &t2, 0, 0, 0) < 0)
    iVar3 = (**(code **)(*DAT_004eb414 + 0x2c))(DAT_004eb414, param_2, param_3, &param_3, &param_2, 0, 0);
    if (iVar3 < 0)
    {
        return 0;
    }
    uVar5 = DAT_004eb40c;
    if (uVar2 <= DAT_004eb40c)
    {
        uVar5 = uVar2;
    }
    puVar6 = NULL;
    MEMSET(uVar4, puVar6, 0, uVar2 >> 2)
    for (uVar4 = uVar2 & 3; uVar4 != 0; uVar4 = uVar4 - 1)
    {
        *(undefined_8 *)puVar6 = 0;
        puVar6 = (undefined_32 *)((int)puVar6 + 1);
    }
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(DAT_004eb404, 0, uVar5);
    if ((uVar5 < uVar2) && (DAT_004eb408 != 0))
    {
        // PlatformAbstraction->fseek
        (**(code **)(DAT_00ecc420 + 0x4c))(DAT_004eb404, *(undefined_32 *)(iVar9 + 0x3c), 0);
        DAT_004eb40c = *(uint *)(iVar9 + 0x28);
        // PlatformAbstraction->fread
        (**(code **)(DAT_00ecc420 + 0x38))(DAT_004eb404, uVar5, uVar2 - uVar5);
    }
    // dword_4EB414->Unlock(t3, t2, 0, 0);
    iVar3 = (**(code **)(*piVar1 + 0x30))(piVar1, 0, uVar10, 0, 0);
    if (iVar3 < 0)
    {
        // dword_4EB414->Unlock(t3, t2, 0, 0);
        iVar3 = (**(code **)(*piVar1 + 0x30))(piVar1, uVar8, uVar7, 0, 0);
    }
    return (iVar3 < 0) - 1 & uVar5;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00423580(void)

{
    float fVar1;
    undefined_32 uVar2;
    uint extraout_ECX;
    uint extraout_EDX;
    int iVar3;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    if (DAT_004b4318 != 0)
    {
        FUN_00404dd0();
        FUN_0041c1d0(); // timers of race and results screen
        FUN_00408220();
        FUN_00415400();
        FUN_00445980();
        **(undefined_32 **)(DAT_00df7f2c + 0x48) = 0;
        *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x48) + 4) = DAT_00dfb2ec;
        *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x48) + 8) = DAT_00dfb2f0;
        if (_DAT_00dfb2e0 < 5.0)
        {
            fVar1 = 5.0;
        }
        else
        {
            fVar1 = _DAT_00dfb2e0;
            if (179.0 < _DAT_00dfb2e0)
            {
                fVar1 = 179.0;
            }
        }
        *(float *)(DAT_00df7f2c + 0x38) = fVar1;
        FUN_0048fd10();
        local_30 = DAT_00dfb21c;
        local_2c = DAT_00dfb220;
        local_24 = DAT_00dfb22c;
        local_28 = DAT_00dfb224;
        local_18 = DAT_00dfb23c;
        local_20 = DAT_00dfb230;
        local_1c = DAT_00dfb234;
        local_c = DAT_00dfb24c;
        local_14 = DAT_00dfb240;
        local_10 = DAT_00dfb244;
        local_8 = DAT_00dfb250;
        local_4 = DAT_00dfb254;
        rdCamera_Update(&local_30);
        FUN_0048db60();
        FUN_0041b7f0();
        if (DAT_0050b588 != 0)
        {
            FUN_00489cd0(DAT_0050b588 & 0xffffff00 | (uint)DAT_00e229a8, extraout_EDX & 0xffffff00 | (uint)DAT_00e229aa,
                         extraout_ECX & 0xffffff00 | (uint)DAT_00e229ac, 0);
        }
        FUN_00445980();
        DAT_004b7a3c = 0;
        FUN_00426910();
        FUN_004104f0();
        FUN_0048dce0();
        FUN_0048dd80();
        if ((DAT_004d79dc != 0) && (DAT_0050b5c0 != 0))
        {
            uVar2 = FUN_0048db90();
            _sprintf(&DAT_00ecbc20, s__02_3f__d_004b7ad4, (double)_DAT_0050b5d4, uVar2);
            FUN_004887c0(&DAT_00ecbc20, 4, 4);
        }
        FUN_00489ab0();
        if (DAT_0050b5c4 != 0)
        {
            if (DAT_004b7a00 != 0)
            {
                FUN_00408640(0x62);
                FUN_004252a0(PTR_s_Goldie_znm_004b7a28);
                FUN_004252a0(PTR_s_TextCrawl_znm_004b7a2c);
                FUN_004252a0(PTR_s_IntroScene_znm_004b7a30);
            }
            DAT_0050b5c4 = 0;
        }
        if ((DAT_004d79dc != 0) && (DAT_0050b5c0 != 0))
        {
            DAT_0050b5d8 = DAT_0050b5d8 + 1;
            _DAT_0050b5e0 = timeGetTime();
            if (1000 < _DAT_0050b5e0 - DAT_0050b5e4)
            {
                iVar3 = DAT_0050b5d8 - DAT_0050b5dc;
                DAT_0050b5dc = DAT_0050b5d8;
                _DAT_0050b5d4 = ((float)iVar3 * 1000.0) / (float)(ulonglong)(_DAT_0050b5e0 - DAT_0050b5e4);
                DAT_0050b5e4 = _DAT_0050b5e0;
            }
        }
    }
    return;
}

bool FUN_00423840(int param_1, int param_2, int param_3)

{
    int iVar1;

    if ((param_2 == DAT_00ec8600) && (param_3 == DAT_00ec8604))
    {
        return false;
    }
    FUN_0048a1c0();
    FUN_00488030();
    iVar1 = FUN_00487f00(*(undefined_32 *)(param_1 + 0x14), 0);
    if (iVar1 == 0)
    {
        return true;
    }
    iVar1 = FUN_00489ec0(*(undefined_32 *)(param_1 + 0x18));
    return iVar1 == 0;
}

// 004238a0
undefined_32 setWindowPos_init(void)

{
    if ((DAT_0050b5c8 != 0) && (DAT_004b7a34 != 0))
    {
        setWindowPos(200, 0x14);
        return 1;
    }
    return 0;
}

// 004238d0
// int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int nCmdShow);
int32_t WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int32_t nCmdShow)

{
    main(hInstance, hPrevInstance, pCmdLine, nCmdShow, s_Episode_I_Racer_004b7ae0);
    return 0;
}

// Not dumped
// UndefinedFunction_00423900
int LAB_00423900(undefined4 param_1, uint param_2, uint param_3, int param_4, undefined4 *param_5)

{
    DAT_0050b5a8 = 0;
    if (param_2 < 0x1d)
    {
        if (param_2 == 0x1c)
        {
            FUN_00423aa0(param_1, param_3, param_4);
            return 0;
        }
        if (param_2 == 6)
        {
            FUN_00423ac0(param_1, param_3 & 0xffff, param_4, param_3 >> 0x10);
            return 0;
        }
    }
    else if (param_2 < 0x113)
    {
        if (param_2 == 0x112)
        {
            if ((param_3 == 0xf100) || (param_3 == 0xf140))
            {
                DAT_0050b5a8 = 1;
            }
        }
        else
        {
            switch (param_2)
            {
            case 0x100:
            case 0x104:
                if ((DAT_004eb1dc == 0) || (DAT_00ea0250 == 0))
                {
                    FUN_004080c0(param_3, param_4 >> 0x10 & 0x1ff, 1);
                    FUN_00415640(param_3, 1);
                }
                break;
            case 0x101:
            case 0x105:
                if ((DAT_004eb1dc == 0) || (DAT_00ea0250 == 0))
                {
                    FUN_004080c0(param_3, param_4 >> 0x10 & 0x1ff, 0);
                    FUN_00415640(param_3, 0);
                }
                else
                {
                    FUN_0041be80(param_3);
                }
            }
        }
    }
    else
    {
        if (param_2 == 0x214)
        {
            FUN_00423b90(param_1, param_3, param_4);
            return 0;
        }
        if (param_2 == 0x232)
        {
            FUN_00423c80(param_1);
            return 0;
        }
    }
    if (DAT_0050b5a8 != 0)
    {
        *param_5 = 0;
    }
    return DAT_0050b5a8;
}

void FUN_00423aa0(undefined_32 param_1, undefined_32 param_2)

{
    FUN_00423ae0(param_1, param_2);
    return;
}

void FUN_00423ac0(undefined_32 param_1, int param_2)

{
    FUN_00423ae0(param_1, param_2 != 0);
    return;
}

void FUN_00423ae0(HWND param_1, int param_2)

{
    if (param_2 != 0)
    {
        if (DAT_0050b5d0 == 0)
        {
            if ((DAT_0050b560 == 0) && (DAT_0050b568 == 0))
            {
                ShowWindow(param_1, 3);
            }
            setWindowPos_init();
            FUN_00488100(1);
            FUN_0048ac50();
            setWindowPos_init();
        }
        PTR_FUN_004b7a38 = FUN_00423580;
        DAT_0050b5d0 = 1;
        FUN_004804b0(0);
        FUN_00485a30(param_2);
        return;
    }
    PTR_FUN_004b7a38 = platform_noop;
    FUN_00488100(0);
    DAT_0050b5d0 = 0;
    FUN_004804b0(1);
    FUN_00485a30(0);
    return;
}

void FUN_00423b90(HWND param_1, undefined_32 param_2, int *param_3)

{
    int iVar1;
    int iVar2;
    tagRECT local_20;
    tagRECT local_10;

    GetWindowRect(param_1, &local_20);
    GetClientRect(param_1, &local_10);
    local_10.right = (local_20.right - local_20.left) - local_10.right;
    local_10.bottom = (local_20.bottom - local_20.top) - local_10.bottom;
    switch (param_2)
    {
    case 1:
    case 2:
        iVar2 = (param_3[2] - local_10.right) - *param_3;
        param_1 = (HWND)((int)(iVar2 + (iVar2 >> 0x1f & 3U)) >> 2);
        break;
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
        param_1 = (HWND)(((param_3[3] - param_3[1]) - local_10.bottom) / 3);
    }
    DAT_004eb550 = (int)param_1 * 3;
    DAT_0050b594 = (int)param_1 * 4;
    iVar2 = DAT_004eb550;
    if (DAT_004eb550 < 0x50)
    {
        iVar2 = 0x50;
    }
    iVar1 = DAT_0050b594;
    if (DAT_0050b594 < 0x3c)
    {
        iVar1 = 0x3c;
    }
    param_3[3] = param_3[1] + iVar2 + local_10.bottom;
    param_3[2] = *param_3 + iVar1 + local_10.right;
    DAT_0050b5a8 = 1;
    return;
}

void FUN_00423c80(void)

{
    int iVar1;

    iVar1 = setWindowPos_init();
    if (iVar1 == 0)
    {
        FUN_00423840(&DAT_0050b560, DAT_004eb550, DAT_0050b594);
    }
    return;
}

// 00423cb0
void platform_noop(void)

{
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 00423cc0
// ~= Main_Startup
undefined_32 load_registry_options(undefined_32 param_1)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_8 local_100[256];

    _DAT_0050b5a0 = 1;
    parse_command_line_args(param_1);
    stdPlatform_InitServices(&DAT_00e9f280);
    _DAT_00e9f288 = platform_writeConsole;
    _DAT_00e9f290 = platform_writeConsole;
    _DAT_00e9f294 = platform_writeConsole;
    copy_platform_abstraction(&DAT_00e9f280); // -> DAT_00ecc420
    parse_racer_tab(s___data_racer_tab_004b7bb4);
    setWindowPos_init();
    FUN_004081c0();
    FUN_00410fd0();
    _DAT_0050b598 = GetModuleHandleA((LPCSTR)0x0);
    FUN_0049d060(0x80000002, s_Software_LucasArts_Entertainment_004b7b64);
    DAT_0050b560 = FUN_0049d230(s_FullScreen_004b7b58, DAT_0050b560);
    DAT_0050b564 = FUN_0049d230(s_Fix_Flicker_004b7b4c, DAT_0050b564);
    DAT_0050b568 = 0;
    DAT_0050b56c = FUN_0049d230(s_UseFett_004b7b44, DAT_0050b56c);
    iVar1 = FUN_0048bc10();
    if (iVar1 == 0)
    {
        MessageBoxA((HWND)0x0, s_Direct3D_Failure_No_3D_Hardware_F_004b4900, s_Racer_Error_004b4928, 0x30);
        return 0;
    }
    FUN_004246c0(1);
    setWindowPos_init();
    FUN_00424180(iVar1, &DAT_0050b560);
    _DAT_0050b58c = 1;
    if (DAT_0050b5b0 != 0)
    {
        uVar2 = get_hwnd(&DAT_0050b560);
        _DAT_0050b58c = FUN_004246d0(uVar2);
        return 0;
    }
    FUN_004246c0(0);
    if ((DAT_0050b560 == 0) && (DAT_0050b568 == 0))
    {
        ShowWindow(DAT_0050b59c, 3);
    }
    DAT_0050cb68 = DAT_0050b568;
    FUN_0048be20(iVar1);
    FUN_00490950(&DAT_00e9f280);
    DAT_0050b59c = (HWND)get_hwnd();
    FUN_00425500();
    create_dir(s___data_config__004b252c);
    _sprintf(local_100, &DAT_004b2524 /* "%s%s" */, s___data_config__004b252c, s_current_004b2640);
    create_dir(local_100);
    iVar1 = FUN_00409b10(&DAT_0050b560);
    if (iVar1 != 0)
    {
        _sprintf(s_Unknown_error_004b75f8, s_Unable_to_open_display_for_3D____004b7b20, &DAT_00ecbc20);
        FUN_00424150();
        return 0;
    }
    setWindowPos_init();
    FUN_00408510();
    FUN_00408640(0);
    uVar2 = FUN_004112e1();
    return uVar2;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00423efd(void)

{
    int iVar1;
    int iVar2;
    code *unaff_EBX;
    undefined_32 *puVar3;

    FUN_00408640(0x14);
    iVar1 = FUN_00404b10();
    if (iVar1 != 0)
    {
        _sprintf(s_Unknown_error_004b75f8, s_ERROR__elfControl_Initialize_fai_004b7af8, &DAT_00ecbc20);
        FUN_00424150();
        return 0;
    }
    FUN_00408640(0x19);
    FUN_0049d210(s_FullScreen_004b7b58, DAT_0050b560);
    FUN_0049d210(s_Fix_Flicker_004b7b4c, DAT_0050b564); // probably added by GOG ?
    FUN_0049d210(s_DevMode_004b7af0, DAT_0050b568);
    FUN_0049d210(s_UseFett_004b7b44, DAT_0050b56c);
    FUN_00409800(&DAT_0050b560);
    FUN_00408640(0x26);
    FUN_0049ce90(&LAB_00423900); // set a function pointer
    FUN_00408640(0x28);
    FUN_00445960();
    FUN_00408640(0x2d);
    FUN_00445a50();
    FUN_00408640(0x32);
    FUN_00411950();
    FUN_00408640(0x3c);
    FUN_00421810();
    FUN_00408640(0x41);
    DAT_0050b558 = NULL;
    iVar1 = 0x1f;
    if (((DAT_00ec8e5c == 0x7c00) && (DAT_00ec8e60 == 0x3e0)) && (DAT_00ec8e64 == 0x1f))
    {
        DAT_0050b558 = &DAT_004eb558;
        iVar2 = 0xffff;
        do
        {
            *(ushort *)(DAT_0050b558 + iVar2 * 2) = (ushort)iVar2 & 0x1f | (ushort)(iVar2 >> 1) & 0x7fe0;
            iVar2 = iVar2 + -1;
        } while (-1 < iVar2);
    }
    puVar3 = &DAT_004eb484;
    for (; iVar1 != 0; iVar1 = iVar1 + -1)
    {
        *puVar3 = 0;
        puVar3 = puVar3 + 1;
    }
    DAT_004eb484 = 0x7c;
    _DAT_004eb488 = 7;
    _DAT_004eb490 = 0x280;
    _DAT_004eb48c = 0x1e0;
    _DAT_004eb4ec = 0x800;
    if ((DAT_0050b560 == 0) && (DAT_0050b568 == 0))
    {
        (*unaff_EBX)(DAT_0050b59c, 3);
    }
    FUN_00408640(0x5a);
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// Always called right before exiting the program
void FUN_004240d0(void)

{
    _DAT_0050b5a0 = 0;
    FUN_00408620();
    FUN_0044e560();
    FUN_00449e50();
    FUN_00412e40();
    FUN_00426910();
    FUN_00409af0();
    FUN_00421eb0(1);
    FUN_00404da0();
    FUN_00409d00();
    // PlatformAbstraction->unused0. Oops, but where is it initialized ?
    (**(code **)(DAT_00ecc420 + 0x14))(s_rdShutdown____004b7bc8);
    FUN_00490990();
    FUN_0049d0e0();
    FUN_0049ce90(0);
    FUN_00421330();
    FUN_00484760();
    return;
}

void thunk_FUN_00423580(void)

{
    // WARNING: Could not recover jumptable at 0x00424140. Too many branches
    // WARNING: Treating indirect jump as call
    (*(code *)PTR_FUN_004b7a38)();
    return;
}

void FUN_00424150(void)

{
    FUN_004240d0();
    MessageBoxA((HWND)0x0, s_Unknown_error_004b75f8, s_Unable_to_continue_Error_004b7bd8, 0x2010);
    _exit_0(1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00424180(uint *param_1, uint *param_2)

{
    byte bVar1;
    byte *pbVar2;
    int iVar3;
    int iVar4;
    byte *pbVar5;
    byte *pbVar6;
    undefined_32 *puVar7;
    uint uVar8;
    undefined_32 *puVar9;
    bool bVar10;
    undefined_32 auStack_168[16];
    undefined_32 uStack_128;
    char *pcStack_124;
    byte *pbStack_120;
    char *pcStack_11c;
    uint *puStack_118;
    byte local_100;
    undefined_32 local_ff;

    local_100 = DAT_004d55cc;
    puVar7 = &local_ff;
    MEMSET(iVar4, puVar7, 0, 0x3f)
    *(undefined_16 *)puVar7 = 0;
    *(undefined_8 *)((int)puVar7 + 2) = 0;
    puStack_118 = (uint *)&DAT_004d55cc;
    DAT_0050b5ac = param_1;
    pcStack_11c = (char *)0x100;
    pbStack_120 = &local_100;
    pcStack_124 = s_Display_004b7c20;
    param_2[4] = *param_1 - 1;
    uStack_128 = 0x4241d5;
    FUN_0049d2e0();
    uVar8 = 0;
    if (*DAT_0050b5ac != 0)
    {
        pbVar5 = (byte *)(DAT_0050b5ac[1] + 0x80);
        do
        {
            pbVar6 = &local_100;
            pbVar2 = pbVar5;
            do
            {
                bVar1 = *pbVar2;
                bVar10 = bVar1 < *pbVar6;
                if (bVar1 != *pbVar6)
                {
                LAB_00424218:
                    iVar4 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
                    goto LAB_0042421d;
                }
                if (bVar1 == 0)
                    break;
                bVar1 = pbVar2[1];
                bVar10 = bVar1 < pbVar6[1];
                if (bVar1 != pbVar6[1])
                    goto LAB_00424218;
                pbVar2 = pbVar2 + 2;
                pbVar6 = pbVar6 + 2;
            } while (bVar1 != 0);
            iVar4 = 0;
        LAB_0042421d:
            if (iVar4 == 0)
            {
                param_2[4] = uVar8;
                break;
            }
            uVar8 = uVar8 + 1;
            pbVar5 = pbVar5 + 0x2b4;
        } while (uVar8 < *DAT_0050b5ac);
    }
    puStack_118 = (uint *)&DAT_004d55cc;
    pcStack_11c = (char *)0x100;
    iVar4 = DAT_0050b5ac[1] + param_2[4] * 0x2b4;
    param_2[6] = *(int *)(iVar4 + 0x2ac) - 1;
    pbStack_120 = &local_100;
    pcStack_124 = s_3D_Device_004b7c14;
    uStack_128 = 0x424284;
    FUN_0049d2e0();
    uVar8 = 0;
    if (*(uint *)(iVar4 + 0x2ac) != 0)
    {
        pbVar5 = (byte *)(*(int *)(iVar4 + 0x2b0) + 0xb4);
        do
        {
            pbVar6 = &local_100;
            pbVar2 = pbVar5;
            do
            {
                bVar1 = *pbVar2;
                bVar10 = bVar1 < *pbVar6;
                if (bVar1 != *pbVar6)
                {
                LAB_004242c9:
                    iVar3 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
                    goto LAB_004242ce;
                }
                if (bVar1 == 0)
                    break;
                bVar1 = pbVar2[1];
                bVar10 = bVar1 < pbVar6[1];
                if (bVar1 != pbVar6[1])
                    goto LAB_004242c9;
                pbVar2 = pbVar2 + 2;
                pbVar6 = pbVar6 + 2;
            } while (bVar1 != 0);
            iVar3 = 0;
        LAB_004242ce:
            if (iVar3 == 0)
            {
                param_2[6] = uVar8;
                break;
            }
            uVar8 = uVar8 + 1;
            pbVar5 = pbVar5 + 0x368;
        } while (uVar8 < *(uint *)(iVar4 + 0x2ac));
    }
    puStack_118 = (uint *)0x280;
    pcStack_11c = s_Display_Width_004b7c04;
    DAT_004eb500 = 1.0f;
    pbStack_120 = (byte *)0x424306;
    _DAT_004eb504 = FUN_0049d180();
    puStack_118 = (uint *)0x1e0;
    pcStack_11c = s_Display_Height_004b7bf4;
    pbStack_120 = (byte *)0x42431d;
    DAT_004eb508 = FUN_0049d180();
    puStack_118 = param_2;
    _DAT_004eb51c = 0x10;
    _DAT_004eb518 = 1;
    puVar7 = &DAT_004eb500;
    puVar9 = auStack_168;
    QMEMCPY(iVar3, puVar7, puVar9, 0x14)
    uVar8 = FUN_004243c0();
    param_2[5] = uVar8;
    puVar7 = (undefined_32 *)(*(int *)(iVar4 + 0x2a8) + uVar8 * 0x50);
    puVar9 = &DAT_004eb500;
    QMEMCPY(iVar3, puVar7, puVar9, 0x14)
    param_2[8] = 4;
    param_2[9] = 3;
    param_2[10] = 1;
    *param_2 = (uint)(DAT_004b79f8 == 0);
    param_2[1] = 0;
    param_2[2] = DAT_0050b5b4;
    param_2[3] = 0;
    return;
}

uint FUN_004243c0(undefined_32 param_1, int param_2, int param_3)

{
    uint uVar1;
    int *piVar2;
    uint uVar3;
    int param_11;

    uVar1 = *(uint *)(*(int *)(DAT_0050b5ac + 4) + 0x2a4 + *(int *)(param_11 + 0x10) * 0x2b4);
    uVar3 = 0;
    if (uVar1 != 0)
    {
        piVar2 = (int *)(*(int *)(*(int *)(DAT_0050b5ac + 4) + *(int *)(param_11 + 0x10) * 0x2b4 + 0x2a8) + 4);
        uVar3 = 0;
        while (((piVar2[6] != 0x10 || (*piVar2 != param_2)) || (piVar2[1] != param_3)))
        {
            uVar3 = uVar3 + 1;
            piVar2 = piVar2 + 0x14;
            if (uVar1 <= uVar3)
            {
                return 0;
            }
        }
    }
    return uVar3;
}

// 00424430
undefined_32 parse_command_line_args(undefined_32 param_1)

{
    int iVar1;
    int iVar2;
    float10 fVar3;

    iVar1 = strtok(param_1, &DAT_004b7c68);
    if (iVar1 == 0)
    {
        return 0;
    }
    do
    {
        iVar2 = _strcmpi(iVar1, &DAT_004b7c64);
        if (iVar2 == 0)
        {
            iVar1 = strtok(0, &DAT_004b7c68);
            DAT_004b6d20 = 0;
        }
        else
        {
            iVar2 = _strcmpi(iVar1, &DAT_004b7c60);
            if (iVar2 == 0)
            {
                iVar1 = strtok(0, &DAT_004b7c68);
                DAT_004b6d2c = 0;
            }
            else
            {
                iVar2 = _strcmpi(iVar1, &DAT_004b7c5c);
                if (iVar2 == 0)
                {
                    iVar1 = strtok(0, &DAT_004b7c68);
                    if (iVar1 == 0)
                    {
                        return 1;
                    }
                    fVar3 = (float10)atof(iVar1);
                    DAT_004c7d78 = (float)fVar3;
                    if (fVar3 < (float10)0.0)
                    {
                        DAT_004c7d78 = 0.0;
                    }
                }
                else
                {
                    iVar2 = _strcmpi(iVar1, &DAT_004b7c58);
                    if (iVar2 == 0)
                    {
                        iVar1 = strtok(0, &DAT_004b7c68);
                        if (iVar1 == 0)
                        {
                            return 1;
                        }
                        fVar3 = (float10)atof(iVar1);
                        DAT_004c7d74 = (float)fVar3;
                        if (fVar3 < (float10)0.0)
                        {
                            DAT_004c7d74 = 0.0;
                        }
                    }
                    else
                    {
                        iVar2 = _strcmpi(iVar1, &DAT_004b7c50);
                        if (iVar2 != 0)
                        {
                            iVar2 = _strcmpi(iVar1, s__force_004b7c48);
                            if (iVar2 == 0)
                            {
                                iVar1 = strtok(0, &DAT_004b7c68);
                                DAT_004b4938 = 0;
                            }
                            else
                            {
                                iVar2 = _strcmpi(iVar1, s__3DImpacts_004b7c3c);
                                if (iVar2 == 0)
                                {
                                    iVar1 = strtok(0, &DAT_004b7c68);
                                    DAT_004c7aa8 = 0;
                                }
                                else
                                {
                                    iVar2 = _strcmpi(iVar1, &DAT_004b7c38);
                                    if (iVar2 == 0)
                                    {
                                        iVar1 = strtok(0, &DAT_004b7c68);
                                        DAT_0050b5b0 = 1;
                                    }
                                    else
                                    {
                                        iVar2 = _strcmpi(iVar1, &DAT_004b7c34);
                                        if (iVar2 == 0)
                                        {
                                            iVar1 = strtok(0, &DAT_004b7c68);
                                            DAT_004b7a00 = 0;
                                        }
                                        else
                                        {
                                            iVar2 = _strcmpi(iVar1, &DAT_004b7c30);
                                            if (iVar2 == 0)
                                            {
                                                iVar1 = strtok(0, &DAT_004b7c68);
                                                DAT_004b79f8 = 0;
                                            }
                                            else
                                            {
                                                iVar1 = _strcmpi(iVar1, s__snafu_004b7c28);
                                                if (iVar1 != 0)
                                                    goto LAB_004244fa;
                                                iVar1 = strtok(0, &DAT_004b7c68);
                                                DAT_0050b5c0 = 1;
                                            }
                                        }
                                    }
                                }
                            }
                            goto LAB_0042450a;
                        }
                        iVar1 = strtok(0, &DAT_004b7c68);
                        if (iVar1 == 0)
                        {
                            return 1;
                        }
                        DAT_004b6718 = atoi(iVar1);
                    }
                }
            LAB_004244fa:
                iVar1 = strtok(0, &DAT_004b7c68);
            }
        }
    LAB_0042450a:
        if (iVar1 == 0)
        {
            return 1;
        }
    } while (true);
}

void FUN_004246c0(undefined_32 param_1)

{
    DAT_0050b5c8 = param_1;
    return;
}

void FUN_004246d0(HWND param_1, LPARAM param_2)

{
    HINSTANCE hInstance;

    hInstance = (HINSTANCE)GetWindowLongA(param_1, -6);
    DialogBoxParamA(hInstance, (LPCSTR)0x65, param_1, (DLGPROC)&LAB_00424700, param_2);
    return;
}

// Not Decompiled ?
// //----- (00424700) --------------------------------------------------------
// BOOL __stdcall DialogFunc(HWND hWnd, UINT a2, WPARAM a3, LPARAM dwNewLong)
// {
//     if (a2 == 272)
//     {
//         // Some cool debug dialog?
//         return sub_424760(hWnd, a3, dwNewLong);
//     }

//     if (a2 == 273)
//     {
//         // The Star Wars Racer graphics settings dialog (which lists all
//         devices
//         // and resolutions)
//         sub_424A90(hWnd, (unsigned __int16)a3, dwNewLong, a3 >> 16);
//         return 1;
//     }

//     return 0;
// }

undefined_32 FUN_00424760(HWND param_1, undefined_32 param_2, UINT *param_3)

{
    HWND hDlg;
    UINT *dwNewLong;
    HWND pHVar1;
    WPARAM WVar2;
    LPCSTR pCVar3;

    dwNewLong = param_3;
    hDlg = param_1;
    FUN_00425820(param_1);
    pHVar1 = GetDlgItem(param_1, 0x406);
    param_1 = (HWND)0x0;
    if (*DAT_0050b5ac != 0)
    {
        param_3 = NULL;
        do
        {
            if (*(int *)(DAT_0050b5ac[1] + (int)param_3 + 0x104) == 1)
            {
                _sprintf(&DAT_00ecbc20, &DAT_004b2304 /* "%s" */, DAT_0050b5ac[1] + (int)param_3 + 0x80);
                WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)&DAT_00ecbc20);
                SendMessageA(pHVar1, 0x151, WVar2, (LPARAM)param_1);
                if (param_1 == (HWND)dwNewLong[4])
                {
                    SendMessageA(pHVar1, 0x14e, WVar2, 0);
                }
            }
            param_1 = (HWND)((int)param_1 + 1);
            param_3 = (UINT *)((int)param_3 + 0x2b4);
        } while (param_1 < *DAT_0050b5ac);
    }
    pHVar1 = GetDlgItem(hDlg, 0x3f0);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)s_Vertex_Only_004b7d84);
    SendMessageA(pHVar1, 0x151, WVar2, 1);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)s_Wire_Frame_004b7d78);
    SendMessageA(pHVar1, 0x151, WVar2, 2);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)s_Solid_004b7d70);
    SendMessageA(pHVar1, 0x151, WVar2, 3);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)s_Texture_004b7d68);
    SendMessageA(pHVar1, 0x151, WVar2, 4);
    SendMessageA(pHVar1, 0x14e, WVar2, 0);
    pHVar1 = GetDlgItem(hDlg, 0x3f1);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)&DAT_004b7d60);
    SendMessageA(pHVar1, 0x151, WVar2, 1);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)&PTR_DAT_004b7d5c);
    SendMessageA(pHVar1, 0x151, WVar2, 0);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)s_Diffuse_004b7d54);
    SendMessageA(pHVar1, 0x151, WVar2, 2);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)s_Gouraud_004b7d4c);
    SendMessageA(pHVar1, 0x151, WVar2, 3);
    SendMessageA(pHVar1, 0x14e, WVar2, 0);
    pHVar1 = GetDlgItem(hDlg, 0x3f4);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)&DAT_004b7d60);
    SendMessageA(pHVar1, 0x151, WVar2, 0);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)s_Bilinear_004b7d40);
    SendMessageA(pHVar1, 0x14e, WVar2, 0);
    SendMessageA(pHVar1, 0x151, WVar2, 1);
    WVar2 = SendMessageA(pHVar1, 0x143, 0, (LPARAM)s_Trilinear_004b7d34);
    SendMessageA(pHVar1, 0x151, WVar2, 2);
    FUN_00424e50(hDlg, dwNewLong);
    SetWindowLongA(hDlg, 8, (LONG)dwNewLong);
    CheckDlgButton(hDlg, 0x3ea, *dwNewLong);
    CheckDlgButton(hDlg, 0x3ee, dwNewLong[1]);
    CheckDlgButton(hDlg, 0x3ef, dwNewLong[2]);
    CheckDlgButton(hDlg, 0x3f5, dwNewLong[3]);
    pCVar3 = (LPCSTR)lookup_translation(s__MONDOTEXT_H_0525_Racer_Display_S_004b7d08);
    SetDlgItemTextA(hDlg, 0x65, pCVar3);
    pCVar3 = (LPCSTR)lookup_translation(s__MONDOTEXT_H_0526_Graphics_Hardw_004b7ce4);
    SetDlgItemTextA(hDlg, 0x408, pCVar3);
    pCVar3 = (LPCSTR)lookup_translation(s__MONDOTEXT_H_0527_3D_Device_004b7cc8);
    SetDlgItemTextA(hDlg, 0x409, pCVar3);
    pCVar3 = (LPCSTR)lookup_translation(s__MONDOTEXT_H_0528_Display_Mode_004b7ca8);
    SetDlgItemTextA(hDlg, 0x40a, pCVar3);
    pCVar3 = (LPCSTR)lookup_translation(s__MONDOTEXT_H_0529__Accept_004b7c8c);
    SetDlgItemTextA(hDlg, 1, pCVar3);
    pCVar3 = (LPCSTR)lookup_translation(s__MONDOTEXT_H_0530__Cancel_004b7c70);
    SetDlgItemTextA(hDlg, 2, pCVar3);
    return 1;
}

void FUN_00424a90(HWND param_1, int param_2, undefined_32 param_3, int param_4)

{
    int iVar1;
    uint *puVar2;
    HWND pHVar3;
    WPARAM WVar4;
    uint uVar5;
    UINT UVar6;
    OLECHAR local_208[130];
    CHAR local_104[260];

    puVar2 = (uint *)GetWindowLongA(param_1, 8);
    if (0x3e9 < param_2)
    {
        if (param_2 == 0x405)
        {
            if (param_4 == 1)
            {
                pHVar3 = GetDlgItem(param_1, 0x405);
                WVar4 = SendMessageA(pHVar3, 0x147, 0, 0);
                uVar5 = SendMessageA(pHVar3, 0x150, WVar4, 0);
                puVar2[5] = uVar5;
            }
        }
        else if (param_2 == 0x406)
        {
            if (param_4 == 1)
            {
                pHVar3 = GetDlgItem(param_1, 0x406);
                WVar4 = SendMessageA(pHVar3, 0x147, 0, 0);
                uVar5 = SendMessageA(pHVar3, 0x150, WVar4, 0);
                puVar2[4] = uVar5;
                FUN_00424e50(param_1, puVar2);
                return;
            }
        }
        else if ((param_2 == 0x407) && (param_4 == 1))
        {
            pHVar3 = GetDlgItem(param_1, 0x407);
            WVar4 = SendMessageA(pHVar3, 0x147, 0, 0);
            uVar5 = SendMessageA(pHVar3, 0x150, WVar4, 0);
            puVar2[6] = uVar5;
            return;
        }
        return;
    }
    if (param_2 == 0x3e9)
    {
        if (param_4 != 2)
        {
            return;
        }
        param_2 = 1;
    }
    else if (param_2 != 1)
    {
        if (param_2 != 2)
        {
            return;
        }
        param_2 = 2;
        goto LAB_00424d42;
    }
    pHVar3 = GetDlgItem(param_1, 0x407);
    WVar4 = SendMessageA(pHVar3, 0x147, 0, 0);
    uVar5 = SendMessageA(pHVar3, 0x150, WVar4, 0);
    puVar2[6] = uVar5;
    pHVar3 = GetDlgItem(param_1, 0x405);
    WVar4 = SendMessageA(pHVar3, 0x147, 0, 0);
    uVar5 = SendMessageA(pHVar3, 0x150, WVar4, 0);
    puVar2[5] = uVar5;
    pHVar3 = GetDlgItem(param_1, 0x3f0);
    WVar4 = SendMessageA(pHVar3, 0x147, 0, 0);
    uVar5 = SendMessageA(pHVar3, 0x150, WVar4, 0);
    puVar2[8] = uVar5;
    if (uVar5 == 2)
    {
        puVar2[10] = 1;
    }
    pHVar3 = GetDlgItem(param_1, 0x3f1);
    WVar4 = SendMessageA(pHVar3, 0x147, 0, 0);
    uVar5 = SendMessageA(pHVar3, 0x150, WVar4, 0);
    puVar2[9] = uVar5;
    pHVar3 = GetDlgItem(param_1, 0x3f4);
    WVar4 = SendMessageA(pHVar3, 0x147, 0, 0);
    uVar5 = SendMessageA(pHVar3, 0x150, WVar4, 0);
    puVar2[7] = uVar5;
    iVar1 = *(int *)(DAT_0050b5ac + 4) + puVar2[4] * 0x2b4;
    FUN_0049d250(s_Display_004b7c20, iVar1 + 0x80);
    FUN_0049d250(s_3D_Device_004b7c14,
                 *(int *)(*(int *)(DAT_0050b5ac + 4) + 0x2b0 + puVar2[4] * 0x2b4) + 0xb4 + puVar2[6] * 0x368);
    FUN_0049d100(s_Display_Width_004b7c04, *(undefined_32 *)(puVar2[5] * 0x50 + 4 + *(int *)(iVar1 + 0x2a8)));
    FUN_0049d100(s_Display_Height_004b7bf4, *(undefined_32 *)(puVar2[5] * 0x50 + 8 + *(int *)(iVar1 + 0x2a8)));
    StringFromGUID2((GUID *)(*(int *)(DAT_0050b5ac + 4) + 0x294 + puVar2[4] * 0x2b4), local_208, 0x104);
    WideCharToMultiByte(0, 0, local_208, -1, local_104, 0x104, (LPCSTR)0x0, (LPBOOL)0x0);
    FUN_0049d250(&DAT_004b7d90, local_104);
    UVar6 = IsDlgButtonChecked(param_1, 0x3ea);
    *puVar2 = (uint)(UVar6 == 1);
    UVar6 = IsDlgButtonChecked(param_1, 0x3ee);
    puVar2[1] = (uint)(UVar6 == 1);
    UVar6 = IsDlgButtonChecked(param_1, 0x3ef);
    puVar2[2] = (uint)(UVar6 == 1);
    UVar6 = IsDlgButtonChecked(param_1, 0x3f5);
    puVar2[3] = (uint)(UVar6 == 1);
LAB_00424d42:
    EndDialog(param_1, param_2);
    _exit_0(0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00424e50(HWND param_1, int param_2)

{
    int iVar1;
    int iVar2;
    bool bVar3;
    HWND hWnd;
    HWND hWnd_00;
    WPARAM WVar4;
    uint lParam;
    int iVar5;

    hWnd = GetDlgItem(param_1, 0x405);
    hWnd_00 = GetDlgItem(param_1, 0x407);
    lParam = 0;
    SendMessageA(hWnd, 0x14b, 0, 0);
    SendMessageA(hWnd_00, 0x14b, 0, 0);
    bVar3 = false;
    iVar1 = *(int *)(DAT_0050b5ac + 4) + *(int *)(param_2 + 0x10) * 0x2b4;
    if (*(int *)(*(int *)(DAT_0050b5ac + 4) + 0x2ac + *(int *)(param_2 + 0x10) * 0x2b4) != 0)
    {
        param_1 = (HWND)0x0;
        do
        {
            _sprintf(&DAT_00ecbc20, &DAT_004b2304 /* "%s" */, (int)param_1 + 0xb4 + *(int *)(iVar1 + 0x2b0));
            WVar4 = SendMessageA(hWnd_00, 0x143, 0, (LPARAM)&DAT_00ecbc20);
            SendMessageA(hWnd_00, 0x151, WVar4, lParam);
            if (*(uint *)(param_2 + 0x18) == lParam)
            {
                SendMessageA(hWnd_00, 0x14e, WVar4, 0);
                bVar3 = true;
            }
            lParam = lParam + 1;
            param_1 = (HWND)((int)param_1 + 0x368);
        } while (lParam < *(uint *)(iVar1 + 0x2ac));
    }
    if (!bVar3)
    {
        SendMessageA(hWnd_00, 0x14e, 0, 0);
    }
    _DAT_004eb51c = 0x10;
    iVar5 = 0;
    param_1 = (HWND)0x0;
    if (*(int *)(*(int *)(DAT_0050b5ac + 4) + 0x2a4 + *(int *)(param_2 + 0x10) * 0x2b4) != 0)
    {
        do
        {
            iVar2 = iVar5 + *(int *)(iVar1 + 0x2a8);
            _sprintf(&DAT_00ecbc20, s__dx_d__dbpp_004b7d98, *(undefined_32 *)(iVar2 + 4), *(undefined_32 *)(iVar2 + 8),
                     *(undefined_32 *)(iVar5 + 0x1c + *(int *)(iVar1 + 0x2a8)));
            if (*(int *)(iVar5 + 0x1c + *(int *)(iVar1 + 0x2a8)) == 0x10)
            {
                WVar4 = SendMessageA(hWnd, 0x143, 0, (LPARAM)&DAT_00ecbc20);
                SendMessageA(hWnd, 0x151, WVar4, (LPARAM)param_1);
                if ((*(int *)(iVar5 + 4 + *(int *)(iVar1 + 0x2a8)) == _DAT_004eb504)
                    && (*(int *)(iVar5 + *(int *)(iVar1 + 0x2a8) + 8) == DAT_004eb508))
                {
                    SendMessageA(hWnd, 0x14e, WVar4, 0);
                }
            }
            param_1 = (HWND)((int)param_1 + 1);
            iVar5 = iVar5 + 0x50;
        } while (param_1 < *(uint *)(*(int *)(DAT_0050b5ac + 4) + 0x2a4 + *(int *)(param_2 + 0x10) * 0x2b4));
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_004252a0(undefined_32 param_1)

{
    undefined_32 uVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    undefined_8 local_100[256];

    uVar1 = DAT_004b2940;
    FUN_004804b0(1);
    if ((DAT_00ec8dac < 0x280) || (DAT_00ec8db0 < 0x1e0))
    {
        iVar3 = (**(code **)(*DAT_0052e638 + 0x18))(DAT_0052e638, &DAT_004eb484, &DAT_004eb480, 0);
        if (iVar3 != 0)
        {
            DAT_0050b5bc = 1;
        }
    }
    else
    {
        DAT_0050b5bc = 1;
    }
    uVar2 = DAT_00ec8db0;
    uVar8 = DAT_00ec8dac;
    if (DAT_0050b5bc == 0)
    {
        _DAT_00e9f2f0 = 0;
        _DAT_00e9f2f4 = 0;
        uVar7 = 0;
        uVar6 = 0;
        _DAT_00e9f2fc = 0x1e0;
        _DAT_00e9f2f8 = 0x280;
        if (0.75 <= (float)(ulonglong)DAT_00ec8db0 / (float)(ulonglong)DAT_00ec8dac)
        {
            uVar5 = __ftol();
            uVar6 = uVar2 - uVar5 >> 1;
        }
        else
        {
            uVar4 = __ftol();
            uVar7 = uVar8 - uVar4 >> 1;
            uVar5 = uVar2;
            uVar8 = uVar4;
        }
        _DAT_00e9f358 = uVar8 + uVar7;
        _DAT_00e9f35c = uVar5 + uVar6;
        _DAT_00e9f350 = uVar7;
        _DAT_00e9f354 = uVar6;
    }
    SmushStartup(DAT_0050b59c, 0);
    if (DAT_0050b5c4 == 0)
    {
        if (DAT_004b6d20 == 0)
        {
            uVar8 = 0;
        }
        else
        {
            uVar8 = ((uint)DAT_00e364a6 * 0x7f) / 0xff;
        }
    }
    else
    {
        uVar8 = 0x7f;
    }
    SmushSetVolume(uVar8);
    FUN_00488410(&DAT_00ec8da0, 0, 0);
    FUN_00489ab0();
    if (DAT_0050b560 == 0)
    {
        FUN_00488410(&DAT_00ec8da0, 0, 0);
    }
    DAT_004b2940 = 0;
    FUN_00425500();
    _sprintf(local_100, s__s_s_s_004b3e84, &DAT_00e9f300, s___data_anims__004b7da4, param_1);
    SmushPlay(local_100, 0xf, 0, 0, 0, 0x280, 0x1e0, -1, 0, &LAB_00425070, 1, 1000000, 1000000);
    DAT_004b2940 = uVar1;
    SmushShutdown();
    if (DAT_0050b5bc == 0)
    {
        (**(code **)(*DAT_004eb480 + 8))(DAT_004eb480);
    }
    FUN_004804b0(0);
    return 1;
}

undefined_32 FUN_00425500(void)

{
    char cVar1;
    DWORD dwLen;
    LPCVOID lpData;
    BOOL BVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;
    uint uVar6;
    uint uVar7;
    undefined_32 *puVar8;
    ushort *puVar9;
    char *pcVar10;
    char *pcVar11;
    char *pcVar12;
    undefined_32 *puVar13;
    ushort *local_38c;
    uint local_388;
    DWORD local_384;
    char local_380[128];
    undefined_8 local_300[128];
    CHAR local_280[128];
    undefined_32 local_200[4];
    undefined_32 local_1ef;
    CHAR local_100[256];

    puVar8 = &local_1ef;
    MEMSET(iVar5, puVar8, 0, 0x3b)
    *(undefined_16 *)puVar8 = 0;
    *(undefined_8 *)((int)puVar8 + 2) = 0;
    if (DAT_004b79fc == 0)
    {
        _sprintf(&DAT_00e9f300, &DAT_004d55cc);
        return 0;
    }
    dwLen = GetFileVersionInfoSizeA(s_swep1rcr_exe_004b7f24, &local_384);
    if (dwLen != 0)
    {
        lpData = (LPCVOID)_malloc(dwLen);
        BVar2 = GetFileVersionInfoA(s_swep1rcr_exe_004b7f24, 0, dwLen, lpData);
        if ((BVar2 != 0)
            && (BVar2 = VerQueryValueA(lpData, s__VarFileInfo_Translation_004b7f08, &local_38c, &local_388),
                BVar2 != 0))
        {
            w_sprintfA(local_100, s__StringFileInfo__04X_04X_FileVer_004b7ee0, (uint)*local_38c, (uint)local_38c[1]);
            BVar2 = VerQueryValueA(lpData, local_100, &local_38c, &local_388);
            if (BVar2 != 0)
            {
                uVar6 = -1;
                do
                {
                    puVar9 = local_38c;
                    if (uVar6 == 0)
                        break;
                    uVar6 = uVar6 - 1;
                    puVar9 = (ushort *)((int)local_38c + 1);
                    cVar1 = *(char *)local_38c;
                    local_38c = puVar9;
                } while (cVar1 != '\0');
                uVar6 = ~uVar6;
                puVar8 = (undefined_32 *)((int)puVar9 - uVar6);
                puVar13 = local_200;
                QMEMCPY(uVar7, puVar8, puVar13, uVar6 >> 2)
                for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
                {
                    *(undefined_8 *)puVar13 = *(undefined_8 *)puVar8;
                    puVar8 = (undefined_32 *)((int)puVar8 + 1);
                    puVar13 = (undefined_32 *)((int)puVar13 + 1);
                }
            }
        }
        _free(lpData);
    }
    iVar5 = FUN_0049d2e0(s_CD_Path_004b7ed8, &DAT_00e9f300, 0x50, &DAT_004d55cc);
    if (iVar5 == 0)
    {
        GetDriveTypeA(&DAT_00e9f300);
        _sprintf(local_300, s__s__swheel_map_004b7ec0, &DAT_00e9f300, s___data_config_default__004b3e8c);
        _fopen(local_300, &DAT_004b7ebc);
        _sprintf(local_380, s_racer_s_004b7e4c, s_100_0_004b7e54);
        do
        {
            GetVolumeInformationA(&DAT_00e9f300, local_280, 0x80, (LPDWORD)0x0, (LPDWORD)0x0, (LPDWORD)0x0, (LPSTR)0x0,
                                  0);
            uVar6 = -1;
            pcVar11 = local_380;
            do
            {
                if (uVar6 == 0)
                    break;
                uVar6 = uVar6 - 1;
                cVar1 = *pcVar11;
                pcVar11 = pcVar11 + 1;
            } while (cVar1 != '\0');
            _strncmp(local_280, local_380, ~uVar6 - 2);
            _sprintf(local_300, s__s__swheel_map_004b7ec0, &DAT_00e9f300, s___data_config_default__004b3e8c);
            _sprintf(local_200, &DAT_004b2524 /* "%s%s" */, &DAT_00e9f300, s__Data_Anims_PlanetG_znm_004b7e2c);
            iVar5 = FUN_004a0590(local_200, 0);
            if (iVar5 != -1)
            {
                iVar4 = __filelength(iVar5);
                if (iVar4 == 0x11214e7)
                {
                    __close(iVar5);
                    uVar6 = -1;
                    pcVar11 = &DAT_004b7db4;
                    goto code_r0x004257ed;
                }
                __close(iVar5);
            }
            _sprintf(local_100, s_Error__Please_insert_CD_ROM___s__004b7dc8, local_380);
            iVar5 = MessageBoxA(DAT_0050b59c, local_100, s_CD_ERROR_004b7dbc, 0x31);
        } while (iVar5 != 2);
    }
    else
    {
        MessageBoxA(DAT_0050b59c, s_Error__Please_reinstall_program__004b7e5c, s_BAD_INSTALL_004b7eb0, 0x10);
    }
    FUN_004240d0();
    uVar3 = _exit_0(0);
    return uVar3;
    while (true)
    {
        uVar6 = uVar6 - 1;
        pcVar10 = pcVar11 + 1;
        cVar1 = *pcVar11;
        pcVar11 = pcVar10;
        if (cVar1 == '\0')
            break;
    code_r0x004257ed:
        pcVar10 = pcVar11;
        if (uVar6 == 0)
            break;
    }
    uVar6 = ~uVar6;
    iVar5 = -1;
    pcVar11 = &DAT_00e9f300;
    do
    {
        pcVar12 = pcVar11;
        if (iVar5 == 0)
            break;
        iVar5 = iVar5 + -1;
        pcVar12 = pcVar11 + 1;
        cVar1 = *pcVar11;
        pcVar11 = pcVar12;
    } while (cVar1 != '\0');
    puVar8 = (undefined_32 *)(pcVar10 + -uVar6);
    puVar13 = (undefined_32 *)(pcVar12 + -1);
    QMEMCPY(uVar7, puVar8, puVar13, uVar6 >> 2)
    for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
    {
        *(undefined_8 *)puVar13 = *(undefined_8 *)puVar8;
        puVar8 = (undefined_32 *)((int)puVar8 + 1);
        puVar13 = (undefined_32 *)((int)puVar13 + 1);
    }
    return 0;
}

undefined_32 FUN_00425820(HWND param_1)

{
    HWND hWnd;
    int iVar1;
    int iVar2;
    tagRECT *lpRect;
    tagRECT local_30;
    tagRECT local_20;
    tagRECT local_10;

    GetWindowRect(param_1, &local_30);
    GetClientRect(param_1, &local_10);
    iVar1 = local_30.right - local_30.left;
    lpRect = &local_20;
    iVar2 = local_30.bottom - local_30.top;
    hWnd = GetDesktopWindow();
    GetWindowRect(hWnd, lpRect);
    local_30.top = (((local_20.bottom - local_30.bottom) - local_30.top) - local_20.top) / 2;
    local_30.left = (((local_20.right - local_30.right) - local_30.left) - local_20.left) / 2;
    local_30.bottom = iVar2 + local_30.top;
    local_30.right = iVar1 + local_30.left;
    MoveWindow(param_1, local_30.left, local_30.top, local_30.right - local_30.left, local_30.bottom - local_30.top, 1);
    return 1;
}

void FUN_004258e0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00e9edc0;
    MEMSET(iVar1, puVar2, 0, 300)
    DAT_0050b5ec = 0;
    return;
}

void FUN_00425900(int param_1)

{
    ushort *puVar1;
    undefined_32 uVar2;

    (&DAT_00e9edc0)[DAT_0050b5ec] = param_1;
    DAT_0050b5ec = DAT_0050b5ec + 1;
    *(undefined_32 *)(param_1 + 0xf0) = 0;
    if ((*(uint *)(param_1 + 0x100) & 0x20) == 0)
    {
        uVar2 = *(undefined_32 *)(param_1 + 0x108);
    }
    else
    {
        uVar2 = *(undefined_32 *)(param_1 + 0x10c);
    }
    *(undefined_32 *)(param_1 + 0xf4) = uVar2;
    *(undefined_32 *)(param_1 + 0xf8) = uVar2;
    *(undefined_32 *)(param_1 + 0xfc) = uVar2;
    *(undefined_32 *)(param_1 + 0xdc) = 0;
    if ((((byte) * (uint *)(param_1 + 0x100) & 0xf) == 8) && (*(int *)(param_1 + 0x124) != 0))
    {
        puVar1 = (ushort *)(*(int *)(param_1 + 0x124) + 0xc);
        *puVar1 = *puVar1 & 0xfff7;
    }
    *(uint *)(param_1 + 0x100) = *(uint *)(param_1 + 0x100) | 0x1000000;
    return;
}

float10 FUN_00425980(int param_1, float param_2, int param_3)

{
    float10 fVar1;

    fVar1 = (float10) * (float *)(*(int *)(param_1 + 0x11c) + param_3 * 4);
    return ((float10)param_2 - fVar1) / ((float10) * (float *)(*(int *)(param_1 + 0x11c) + 4 + param_3 * 4) - fVar1);
}

void FUN_004259b0(float *param_1, int param_2, float param_3, int param_4)

{
    int iVar1;
    int iVar2;
    float10 fVar3;

    iVar2 = param_4 * 4 + 4;
    if (*(float *)(*(int *)(param_2 + 0x11c) + iVar2) < param_3)
    {
        *param_1 = *(float *)(*(int *)(param_2 + 0x120) + iVar2);
        return;
    }
    iVar1 = param_4 * 4;
    if (param_3 <= *(float *)(iVar1 + *(int *)(param_2 + 0x11c)))
    {
        *param_1 = *(float *)(*(int *)(param_2 + 0x120) + iVar1);
        return;
    }
    fVar3 = (float10)FUN_00425980(param_2, param_3, param_4);
    *param_1 = (1.0 - (float)fVar3) * *(float *)(iVar1 + *(int *)(param_2 + 0x120))
        + *(float *)(*(int *)(param_2 + 0x120) + iVar2) * (float)fVar3;
    return;
}

void FUN_00425a60(float *param_1, int param_2, float param_3, int param_4)

{
    undefined_32 *puVar1;
    float fVar2;
    float fVar3;
    float10 fVar4;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    float local_8;
    float local_4;

    if (*(float *)(*(int *)(param_2 + 0x11c) + 4 + param_4 * 4) < param_3)
    {
        *param_1 = *(float *)(*(int *)(param_2 + 0x120) + (param_4 * 3 + 3) * 4);
        param_1[1] = *(float *)(*(int *)(param_2 + 0x120) + 0x10 + param_4 * 0xc);
        param_1[2] = *(float *)(*(int *)(param_2 + 0x120) + 0x14 + param_4 * 0xc);
        return;
    }
    if (param_3 <= *(float *)(*(int *)(param_2 + 0x11c) + param_4 * 4))
    {
        param_4 = param_4 * 0xc;
        *param_1 = *(float *)(*(int *)(param_2 + 0x120) + param_4);
        param_1[1] = *(float *)(*(int *)(param_2 + 0x120) + 4 + param_4);
        param_1[2] = *(float *)(*(int *)(param_2 + 0x120) + 8 + param_4);
        return;
    }
    fVar4 = (float10)FUN_00425980(param_2, param_3, param_4);
    fVar2 = (float)fVar4;
    puVar1 = (undefined_32 *)(*(int *)(param_2 + 0x120) + param_4 * 0xc);
    local_18 = *puVar1;
    local_14 = puVar1[1];
    local_10 = puVar1[2];
    local_8 = (float)puVar1[4];
    fVar3 = *(float *)(*(int *)(param_2 + 0x120) + (param_4 * 3 + 3) * 4);
    local_4 = (float)puVar1[5];
    param_1[1] = fVar2 * local_8;
    param_1[2] = fVar2 * local_4;
    *param_1 = fVar3 * fVar2;
    vec3f_multiply_add(param_1, param_1, 1.0 - fVar2, &local_18);
    return;
}

void FUN_00425ba0(undefined_32 *param_1, int param_2, float param_3, int param_4)

{
    int iVar1;
    int iVar2;
    int iVar3;
    float10 fVar4;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_8 local_30[16];
    undefined_8 local_20[16];
    undefined_8 local_10[16];

    iVar1 = param_4 + 1;
    if (*(float *)(*(int *)(param_2 + 0x11c) + iVar1 * 4) < param_3)
    {
        param_4 = param_4 * 0x10;
        *param_1 = *(undefined_32 *)(iVar1 * 0x10 + *(int *)(param_2 + 0x120));
        param_1[1] = *(undefined_32 *)(*(int *)(param_2 + 0x120) + 0x14 + param_4);
        param_1[2] = *(undefined_32 *)(*(int *)(param_2 + 0x120) + 0x18 + param_4);
        param_1[3] = *(undefined_32 *)(*(int *)(param_2 + 0x120) + 0x1c + param_4);
        return;
    }
    if (param_3 <= *(float *)(*(int *)(param_2 + 0x11c) + param_4 * 4))
    {
        param_4 = param_4 * 0x10;
        *param_1 = *(undefined_32 *)(*(int *)(param_2 + 0x120) + param_4);
        param_1[1] = *(undefined_32 *)(*(int *)(param_2 + 0x120) + 4 + param_4);
        param_1[2] = *(undefined_32 *)(*(int *)(param_2 + 0x120) + 8 + param_4);
        param_1[3] = *(undefined_32 *)(*(int *)(param_2 + 0x120) + 0xc + param_4);
        return;
    }
    fVar4 = (float10)FUN_00425980(param_2, param_3, param_4);
    iVar3 = *(int *)(param_2 + 0x120);
    local_50 = *(undefined_32 *)(param_4 * 0x10 + iVar3);
    iVar2 = param_4 * 0x10 + iVar3;
    local_4c = *(undefined_32 *)(iVar2 + 4);
    local_48 = *(undefined_32 *)(iVar2 + 8);
    local_44 = *(undefined_32 *)(iVar2 + 0xc);
    local_40 = *(undefined_32 *)(iVar1 * 0x10 + iVar3);
    local_3c = *(undefined_32 *)(iVar2 + 0x14);
    local_38 = *(undefined_32 *)(iVar2 + 0x18);
    local_34 = *(undefined_32 *)(iVar2 + 0x1c);
    FUN_00481620(local_20, &local_50);
    FUN_00481620(local_30, &local_40);
    FUN_004813a0(local_20, local_30, (float)fVar4, local_10);
    FUN_00481520(param_1, local_10);
    return;
}

void FUN_00425d10(int param_1)

{
    float local_18;
    float local_14;
    float local_10;
    undefined_8 local_c[12];

    FUN_00425a60(&local_18, param_1, *(undefined_32 *)(param_1 + 0x114), *(undefined_32 *)(param_1 + 0x118));
    if ((*(uint *)(param_1 + 0x100) & 0x20000000) != 0)
    {
        FUN_00425a60(local_c, param_1, (float)*(int *)(param_1 + 0xec), *(undefined_32 *)(param_1 + 0xe8));
        local_18 = *(float *)(param_1 + 0xe4) * local_18;
        local_14 = *(float *)(param_1 + 0xe4) * local_14;
        local_10 = *(float *)(param_1 + 0xe4) * local_10;
        vec3f_multiply_add(&local_18, &local_18, 1.0 - *(float *)(param_1 + 0xe4), local_c);
    }
    if (*(int *)(param_1 + 0x124) != 0)
    {
        FUN_00431620(*(int *)(param_1 + 0x124), local_18, local_14, local_10);
    }
    return;
}

void FUN_00425de0(int param_1)

{
    float local_b0;
    float local_ac;
    float local_a8;
    undefined_8 local_a4[12];
    undefined_8 local_98[12];
    undefined_8 local_8c[12];
    undefined_8 local_80[64];
    undefined_8 local_40[64];

    FUN_00425a60(&local_b0, param_1, *(undefined_32 *)(param_1 + 0x114), *(undefined_32 *)(param_1 + 0x118));
    if ((*(uint *)(param_1 + 0x100) & 0x20000000) != 0)
    {
        FUN_00425a60(local_98, param_1, (float)*(int *)(param_1 + 0xec), *(undefined_32 *)(param_1 + 0xe8));
        local_b0 = *(float *)(param_1 + 0xe4) * local_b0;
        local_ac = *(float *)(param_1 + 0xe4) * local_ac;
        local_a8 = *(float *)(param_1 + 0xe4) * local_a8;
        vec3f_multiply_add(&local_b0, &local_b0, 1.0 - *(float *)(param_1 + 0xe4), local_98);
    }
    if (*(int *)(param_1 + 0x124) != 0)
    {
        FUN_004316a0(*(int *)(param_1 + 0x124), local_80);
        FUN_00480730(local_80, local_a4, local_40, local_8c);
        FUN_00480850(local_80, local_a4, local_40, &local_b0);
        FUN_00431640(*(undefined_32 *)(param_1 + 0x124), local_80);
    }
    return;
}

void FUN_00425f00(int param_1)

{
    int iVar1;
    undefined_32 local_e8;
    undefined_32 local_e4;
    undefined_32 local_e0;
    float local_dc;
    undefined_8 local_d8[12];
    undefined_8 local_cc[12];
    undefined_8 local_c0[16];
    undefined_8 local_b0[16];
    undefined_8 local_a0[16];
    undefined_8 local_90[16];
    undefined_8 local_80[64];
    undefined_8 local_40[64];

    FUN_00425ba0(&local_e8, param_1, *(undefined_32 *)(param_1 + 0x114), *(undefined_32 *)(param_1 + 0x118));
    if ((*(uint *)(param_1 + 0x100) & 0x20000000) != 0)
    {
        FUN_00425ba0(local_a0, param_1, (float)*(int *)(param_1 + 0xec), *(undefined_32 *)(param_1 + 0xe8));
        FUN_00481620(local_90, local_a0);
        FUN_00481620(local_c0, &local_e8);
        FUN_004813a0(local_90, local_c0, *(undefined_32 *)(param_1 + 0xe4), local_b0);
        FUN_00481520(&local_e8, local_b0);
    }
    iVar1 = *(int *)(param_1 + 0x124);
    if (iVar1 != 0)
    {
        if ((local_dc < 0.0001) && (-0.0001 < local_dc))
        {
            FUN_004315f0(iVar1, 0, 0, 0);
            return;
        }
        FUN_004316a0(iVar1, local_80);
        FUN_00480730(local_80, local_d8, local_40, local_cc);
        FUN_00431150(local_40, local_dc, local_e8, local_e4, local_e0);
        FUN_00480850(local_80, local_d8, local_40, local_cc);
        FUN_00431640(*(undefined_32 *)(param_1 + 0x124), local_80);
    }
    return;
}

void FUN_00426080(int param_1)

{
    int *piVar1;
    int iVar2;
    int *piVar3;
    undefined_32 uVar4;

    iVar2 = *(int *)(param_1 + 0x118);
    if (*(float *)(param_1 + 0x114) <= *(float *)(*(int *)(param_1 + 0x11c) + 4 + iVar2 * 4))
    {
        uVar4 = *(undefined_32 *)(*(int *)(param_1 + 0x120) + iVar2 * 4);
    }
    else
    {
        uVar4 = *(undefined_32 *)(*(int *)(param_1 + 0x120) + iVar2 * 4 + 4);
    }
    piVar3 = *(int **)(param_1 + 0x124);
    if (piVar3 != NULL)
    {
        iVar2 = *piVar3;
        while (iVar2 != 0)
        {
            FUN_00431860(iVar2, 2, uVar4);
            piVar1 = piVar3 + 1;
            piVar3 = piVar3 + 1;
            iVar2 = *piVar1;
        }
    }
    return;
}

void FUN_004260f0(float param_1, int param_2)

{
    int iVar1;
    int iVar2;
    float fVar3;
    short sVar4;
    short sVar5;
    float local_4;

    fVar3 = param_1;
    FUN_004259b0(&param_1, param_1, *(undefined_32 *)((int)param_1 + 0x114), *(undefined_32 *)((int)param_1 + 0x118));
    if ((*(uint *)((int)fVar3 + 0x100) & 0x20000000) != 0)
    {
        FUN_00425a60(&local_4, fVar3, (float)*(int *)((int)fVar3 + 0xec), *(undefined_32 *)((int)fVar3 + 0xe8));
        param_1 = (1.0 - *(float *)((int)fVar3 + 0xe4)) * local_4 + param_1 * *(float *)((int)fVar3 + 0xe4);
    }
    iVar1 = *(int *)((int)fVar3 + 0x124);
    if ((iVar1 != 0) && (iVar2 = *(int *)(iVar1 + 8), iVar2 != 0))
    {
        if (param_2 == 0)
        {
            param_2 = (int)*(short *)(iVar2 + 4);
            sVar4 = __ftol();
            *(short *)(iVar1 + 4) = sVar4;
            sVar5 = *(short *)(iVar2 + 4);
            if (sVar5 < sVar4)
            {
                do
                {
                    *(short *)(iVar1 + 4) = *(short *)(iVar1 + 4) - sVar5;
                    sVar5 = *(short *)(iVar2 + 4);
                } while (sVar5 < *(short *)(iVar1 + 4));
            }
            if (*(short *)(iVar1 + 4) < 0)
            {
                do
                {
                    *(short *)(iVar1 + 4) = *(short *)(iVar1 + 4) + *(short *)(iVar2 + 4);
                } while (*(short *)(iVar1 + 4) < 0);
                return;
            }
        }
        else
        {
            param_2 = (int)*(short *)(iVar2 + 6);
            sVar4 = __ftol();
            *(short *)(iVar1 + 6) = sVar4;
            sVar5 = *(short *)(iVar2 + 6);
            if (sVar5 < sVar4)
            {
                do
                {
                    *(short *)(iVar1 + 6) = *(short *)(iVar1 + 6) - sVar5;
                    sVar5 = *(short *)(iVar2 + 6);
                } while (sVar5 < *(short *)(iVar1 + 6));
            }
            sVar5 = *(short *)(iVar1 + 6);
            while (sVar5 < 0)
            {
                *(short *)(iVar1 + 6) = *(short *)(iVar1 + 6) + *(short *)(iVar2 + 6);
                sVar5 = *(short *)(iVar1 + 6);
            }
        }
    }
    return;
}

int FUN_00426220(int param_1)

{
    float *pfVar1;
    float *pfVar2;
    int iVar3;

    iVar3 = *(int *)(param_1 + 0x104);
    pfVar1 = *(float **)(param_1 + 0x11c);
    if (pfVar1[iVar3 + -1] < *(float *)(param_1 + 0x114))
    {
        return iVar3 + -2;
    }
    if (*(float *)(param_1 + 0x114) < *pfVar1)
    {
        return 0;
    }
    iVar3 = iVar3 + -2;
    pfVar2 = pfVar1 + iVar3;
    if (*(float *)(param_1 + 0x114) < pfVar1[iVar3])
    {
        do
        {
            pfVar1 = pfVar2 + -1;
            pfVar2 = pfVar2 + -1;
            iVar3 = iVar3 + -1;
        } while (*(float *)(param_1 + 0x114) < *pfVar1);
    }
    return iVar3;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00426290(int param_1, float param_2, undefined_32 param_3)

{
    float fVar1;
    float fVar2;
    undefined_32 uVar3;

    fVar1 = *(float *)(param_1 + 0x114) - param_2;
    *(uint *)(param_1 + 0x100) = *(uint *)(param_1 + 0x100) | 0x20000000;
    *(float *)(param_1 + 0xe0) = *(float *)(param_1 + 0xdc);
    if (fVar1 < 0.0)
    {
        fVar1 = -fVar1;
    }
    fVar2 = (float)_DAT_00e22a40;
    *(float *)(param_1 + 0x114) = param_2;
    *(float *)(param_1 + 0xe4) = (fVar1 - fVar2) / *(float *)(param_1 + 0xdc);
    uVar3 = FUN_00426220(param_1);
    *(undefined_32 *)(param_1 + 0xe8) = uVar3;
    uVar3 = __ftol();
    *(undefined_32 *)(param_1 + 0xec) = uVar3;
    *(undefined_32 *)(param_1 + 0x114) = param_3;
    uVar3 = FUN_00426220(param_1);
    *(undefined_32 *)(param_1 + 0x118) = uVar3;
    FUN_00426330(param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00426330(float param_1)

{
    uint uVar1;
    int iVar2;
    float fVar3;
    float fVar4;
    undefined_32 uVar5;
    int iVar6;
    float local_8;
    float local_4;

    fVar4 = param_1;
    uVar1 = *(uint *)((int)param_1 + 0x100);
    *(uint *)((int)param_1 + 0x100) = uVar1 & 0xbfffffff;
    if ((uVar1 & 0x1000000) == 0)
    {
        if ((uVar1 & 0x20000000) == 0)
        {
            fVar3 = *(float *)((int)param_1 + 0x110) * _DAT_004b7fa8 * (float)_DAT_00e22a40
                + *(float *)((int)param_1 + 0x114);
        }
        else
        {
            *(uint *)((int)param_1 + 0x100) = uVar1 & 0xbfffffff | 2.0f;
            fVar3 = (float)_DAT_00e22a40 / *(float *)((int)param_1 + 0xe0) + *(float *)((int)param_1 + 0xe4);
            *(float *)((int)param_1 + 0xe4) = fVar3;
            if (fVar3 < 1.0)
                goto LAB_004263ed;
            *(uint *)((int)param_1 + 0x100) = uVar1 & 0x9fffffff | 2.0f;
            fVar3 = (*(float *)((int)param_1 + 0xe4) - 1.0) * *(float *)((int)param_1 + 0x110) * _DAT_004b7fa8
                    * *(float *)((int)param_1 + 0xe0)
                + *(float *)((int)param_1 + 0x114);
        }
        *(float *)((int)param_1 + 0x114) = fVar3;
    }
    else
    {
        *(uint *)((int)param_1 + 0x100) = uVar1 & 0xbeffffff;
    }
LAB_004263ed:
    uVar1 = *(uint *)((int)param_1 + 0x100);
    if ((uVar1 & 0x6000000) != 0)
    {
        if ((*(float *)((int)param_1 + 0x114) < *(float *)((int)param_1 + 0xf0))
            || (*(float *)((int)param_1 + 0xf4) < *(float *)((int)param_1 + 0x114)))
        {
            param_1 = *(float *)((int)param_1 + 0xfc);
            local_8 = 0.0;
            local_4 = param_1;
        }
        else if ((uVar1 & 0x2000000) == 0)
        {
            *(uint *)((int)param_1 + 0x100) = uVar1 & 0xfbffffef;
        }
        else
        {
            *(uint *)((int)param_1 + 0x100) = uVar1 & 0xfdffffff | 0x10;
        }
    }
    uVar1 = *(uint *)((int)fVar4 + 0x100);
    if ((uVar1 & 0x6000000) == 0)
    {
        param_1 = *(float *)((int)fVar4 + 0xf4);
        local_8 = *(float *)((int)fVar4 + 0xf0);
        local_4 = *(float *)((int)fVar4 + 0xf8);
    }
    if (param_1 < *(float *)((int)fVar4 + 0x114))
    {
        if ((uVar1 & 0x10) == 0)
        {
            *(float *)((int)fVar4 + 0x114) = param_1;
            uVar5 = FUN_00426220(fVar4);
            *(undefined_32 *)((int)fVar4 + 0x118) = uVar5;
            return;
        }
        if ((uVar1 & 0x40) == 0)
        {
            do
            {
                fVar3 = *(float *)((int)fVar4 + 0x114) - local_4;
                *(float *)((int)fVar4 + 0x114) = fVar3;
                *(uint *)((int)fVar4 + 0x100) = *(uint *)((int)fVar4 + 0x100) | 2.0f;
            } while (param_1 < fVar3);
            uVar5 = FUN_00426220(fVar4);
            *(undefined_32 *)((int)fVar4 + 0x118) = uVar5;
            return;
        }
        FUN_00426290(fVar4, param_1, local_8);
        uVar5 = FUN_00426220(fVar4);
        *(undefined_32 *)((int)fVar4 + 0x118) = uVar5;
        return;
    }
    if (*(float *)((int)fVar4 + 0x114) < local_8)
    {
        if ((uVar1 & 0x10) == 0)
        {
            *(float *)((int)fVar4 + 0x114) = local_8;
            uVar5 = FUN_00426220(fVar4);
            *(undefined_32 *)((int)fVar4 + 0x118) = uVar5;
            return;
        }
        if ((uVar1 & 0x40) == 0)
        {
            do
            {
                fVar3 = local_4 + *(float *)((int)fVar4 + 0x114);
                *(float *)((int)fVar4 + 0x114) = fVar3;
                *(uint *)((int)fVar4 + 0x100) = *(uint *)((int)fVar4 + 0x100) | 2.0f;
            } while (fVar3 < local_8);
            uVar5 = FUN_00426220(fVar4);
            *(undefined_32 *)((int)fVar4 + 0x118) = uVar5;
            return;
        }
        FUN_00426290(fVar4, local_8, param_1);
        uVar5 = FUN_00426220(fVar4);
        *(undefined_32 *)((int)fVar4 + 0x118) = uVar5;
        return;
    }
    iVar2 = *(int *)((int)fVar4 + 0x11c);
    if (*(float *)((int)fVar4 + 0x114) < *(float *)(iVar2 + *(int *)((int)fVar4 + 0x118) * 4))
    {
        do
        {
            if (*(int *)((int)fVar4 + 0x118) < 1)
                break;
            iVar6 = *(int *)((int)fVar4 + 0x118) + -1;
            *(int *)((int)fVar4 + 0x118) = iVar6;
        } while (*(float *)((int)fVar4 + 0x114) < *(float *)(iVar2 + iVar6 * 4));
    }
    if (*(float *)(iVar2 + 4 + *(int *)((int)fVar4 + 0x118) * 4) < *(float *)((int)fVar4 + 0x114))
    {
        do
        {
            if (*(int *)((int)fVar4 + 0x104) + -2 <= *(int *)((int)fVar4 + 0x118))
            {
                return;
            }
            iVar6 = *(int *)((int)fVar4 + 0x118) + 1;
            *(int *)((int)fVar4 + 0x118) = iVar6;
        } while (*(float *)(iVar2 + 4 + iVar6 * 4) < *(float *)((int)fVar4 + 0x114));
    }
    return;
}

void FUN_00426660(void)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    int *piVar4;

    iVar3 = 0;
    if (0 < DAT_0050b5ec)
    {
        piVar4 = &DAT_00e9edc0;
        do
        {
            iVar1 = *piVar4;
            if (((iVar1 != 0) && ((*(uint *)(iVar1 + 0x100) & 0x80000000) == 0))
                && ((*(uint *)(iVar1 + 0x100) & 0x10000000) != 0))
            {
                FUN_00426330(iVar1);
                uVar2 = *(uint *)(iVar1 + 0x100) & 0xf;
                switch (uVar2)
                {
                case 2:
                    FUN_00426080(iVar1);
                    break;
                case 8:
                    FUN_00425f00(iVar1);
                    break;
                case 9:
                    FUN_00425d10(iVar1);
                    break;
                case 10:
                    FUN_00425de0(iVar1);
                    break;
                case 0xb:
                case 0xc:
                    if (uVar2 == 0xb)
                    {
                        FUN_004260f0(iVar1, 0);
                    }
                    else
                    {
                        FUN_004260f0(iVar1, 1);
                    }
                }
            }
            iVar3 = iVar3 + 1;
            piVar4 = piVar4 + 1;
        } while (iVar3 < DAT_0050b5ec);
    }
    return;
}

int FUN_00426740(int param_1, uint param_2)

{
    int iVar1;
    int *piVar2;
    int iVar3;

    if ((param_1 != 0) && (iVar3 = 0, 0 < DAT_0050b5ec))
    {
        piVar2 = &DAT_00e9edc0;
        do
        {
            iVar1 = *piVar2;
            if ((((iVar1 != 0) && ((*(uint *)(iVar1 + 0x100) & 0x80000000) == 0))
                 && (param_2 == (*(uint *)(iVar1 + 0x100) & 0xf)))
                && (param_1 == *(int *)(iVar1 + 0x124)))
            {
                return iVar1;
            }
            iVar3 = iVar3 + 1;
            piVar2 = piVar2 + 1;
        } while (iVar3 < DAT_0050b5ec);
    }
    return 0;
}

void FUN_004267a0(int param_1, float param_2, float param_3)

{
    if (param_3 < param_2)
    {
        do
        {
            // WARNING: Do nothing block with infinite loop
        } while (true);
    }
    if (param_2 < 0.0)
    {
        param_2 = 0.0;
    }
    if (param_3 < 0.0)
    {
        param_3 = 0.0;
    }
    *(float *)(param_1 + 0xf0) = param_2;
    *(float *)(param_1 + 0xf8) = param_3 - param_2;
    *(float *)(param_1 + 0xf4) = param_3;
    return;
}

// param_2 is a mask
void FUN_00426810(int param_1, uint param_2)

{
    *(uint *)(param_1 + 0x100) = *(uint *)(param_1 + 0x100) | param_2;
    return;
}

void FUN_00426820(int param_1, uint param_2)

{
    *(uint *)(param_1 + 0x100) = *(uint *)(param_1 + 0x100) & ~param_2;
    return;
}

void FUN_00426840(int param_1, undefined_32 param_2)

{
    undefined_32 uVar1;

    *(undefined_32 *)(param_1 + 0x114) = param_2;
    uVar1 = FUN_00426220(param_1);
    *(undefined_32 *)(param_1 + 0x118) = uVar1;
    *(uint *)(param_1 + 0x100) = *(uint *)(param_1 + 0x100) | 0x1000000;
    return;
}

void FUN_00426880(int param_1, undefined_32 param_2)

{
    *(undefined_32 *)(param_1 + 0x110) = param_2;
    return;
}

void FUN_00426890(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;

    *(undefined_32 *)(param_1 + 0xe4) = 0;
    *(uint *)(param_1 + 0x100) = *(uint *)(param_1 + 0x100) | 0x20000000;
    *(undefined_32 *)(param_1 + 0xe0) = param_3;
    *(undefined_32 *)(param_1 + 0xe8) = *(undefined_32 *)(param_1 + 0x118);
    uVar1 = __ftol();
    *(undefined_32 *)(param_1 + 0xec) = uVar1;
    *(undefined_32 *)(param_1 + 0x114) = param_2;
    uVar1 = FUN_00426220(param_1);
    *(undefined_32 *)(param_1 + 0x118) = uVar1;
    return;
}

void FUN_00426900(int param_1, undefined_32 param_2)

{
    *(undefined_32 *)(param_1 + 0xdc) = param_2;
    return;
}

void FUN_00426910(void)

{
    return;
}

void FUN_00426920(void)

{
    int iVar1;
    int iVar2;

    if ((DAT_004c2584 == 0) && (-1 < DAT_004b8544))
    {
        iVar1 = __ftol(DAT_004b8548);
        iVar2 = FUN_00445690(iVar1);
        if (iVar2 != 0)
        {
            FUN_004456a0((float)iVar1);
            iVar1 = __ftol();
        }
        FUN_00426cc0(DAT_004b8544, 7, 0.25f, (float)iVar1, 1);
    }
    return;
}

void thunk_FUN_00449d60(void)

{
    FUN_00449ea0();
    DAT_0050c68c = 1;
    return;
}

void thunk_FUN_00449e30(void)

{
    undefined_32 *puVar1;

    puVar1 = &DAT_00e68078;
    do
    {
        *puVar1 = 0;
        puVar1 = puVar1 + 0x11;
    } while ((int)puVar1 < 0xe68298);
    return;
}

bool FUN_004269c0(int param_1)

{
    if ((0x8d < param_1) && (param_1 < 0xa6))
    {
        return true;
    }
    return param_1 == 0x22;
}

void FUN_004269f0(undefined_8 param_1)

{
    DAT_0050c688 = param_1;
    return;
}

void FUN_00426a00(int param_1, short param_2, float param_3, float param_4, short param_5, int param_6, int param_7,
                  undefined_32 *param_8)

{
    byte bVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    undefined_32 uVar5;
    int iVar6;
    int iVar7;
    short sVar8;
    float local_4;

    if (param_6 == 0)
    {
        local_4 = 1.0;
    }
    else
    {
        local_4 = 1.0 - (float)(uint)DAT_0050b707 * 0.003921569;
    }
    iVar2 = FUN_004269c0(param_1);
    bVar1 = DAT_00e364a5;
    if (iVar2 != 0)
    {
        bVar1 = DAT_00e364a6;
    }
    iVar3 = FUN_004269c0(param_1);
    iVar2 = DAT_00e22a30;
    sVar8 = 8;
    if (iVar3 == 0)
    {
        sVar8 = param_2;
    }
    local_4 = local_4 * (float)(uint)bVar1 * 0.003921569 * param_4;
    if (local_4 != 0.0)
    {
        if ((((byte)DAT_00e364a8 & 1) == 0) && (param_5 != -999))
        {
            param_5 = 0x40;
        }
        if (-1 < param_1)
        {
            if (param_6 != 0)
            {
                iVar3 = 0;
                piVar4 = &DAT_00e68064;
                do
                {
                    if ((piVar4[1] != 0) && (*piVar4 == param_1))
                    {
                        if ((local_4 * 32767.0 < (float)(&DAT_00e68078)[iVar3 * 0x11])
                            && ((&DAT_00e6806c)[iVar3 * 0x11] == DAT_00e22a30))
                        {
                            return;
                        }
                        (&DAT_00e68074)[iVar3 * 0x11] = param_3 + param_3;
                        uVar5 = __ftol();
                        (&DAT_00e68078)[iVar3 * 0x11] = uVar5;
                        (&DAT_00e6807c)[iVar3 * 0x22] = param_5;
                        (&DAT_00e68070)[iVar3 * 0x11] = (int)sVar8;
                        (&DAT_00e6806c)[iVar3 * 0x11] = iVar2;
                        (&DAT_00e6808c)[iVar3 * 0x11] = param_8[0];
                        (&DAT_00e68090)[iVar3 * 0x11] = param_8[1];
                        (&DAT_00e68094)[iVar3 * 0x11] = param_8[2];
                        goto LAB_00426bd4;
                    }
                    piVar4 = piVar4 + 0x11;
                    iVar3 = iVar3 + 1;
                } while ((int)piVar4 < 0xe68284);
            }
            iVar3 = -1;
            iVar6 = 0;
            piVar4 = &DAT_00e68060;
            do
            {
                if ((*piVar4 == -1) && (iVar3 == -1))
                {
                    iVar3 = iVar6;
                }
                piVar4 = piVar4 + 0x11;
                iVar6 = iVar6 + 1;
            } while ((int)piVar4 < 0xe68280);
            if (iVar3 == -1)
            {
                iVar6 = (int)sVar8;
                iVar7 = 0;
                piVar4 = &DAT_00e68070;
                do
                {
                    if (*piVar4 < iVar6)
                    {
                        iVar6 = *piVar4;
                        iVar3 = iVar7;
                    }
                    piVar4 = piVar4 + 0x11;
                    iVar7 = iVar7 + 1;
                } while ((int)piVar4 < 0xe68290);
                if (iVar3 == -1)
                {
                    return;
                }
            }
            (&DAT_00e68064)[iVar3 * 0x11] = param_1;
            (&DAT_00e68060)[iVar3 * 0x11] = 0xfffffffe;
            (&DAT_00e68068)[iVar3 * 0x11] = param_6;
            (&DAT_00e6806c)[iVar3 * 0x11] = iVar2;
            (&DAT_00e68070)[iVar3 * 0x11] = (int)sVar8;
            (&DAT_00e68074)[iVar3 * 0x11] = param_3 + param_3;
            uVar5 = __ftol();
            (&DAT_00e68078)[iVar3 * 0x11] = uVar5;
            (&DAT_00e6807c)[iVar3 * 0x22] = param_5;
            (&DAT_00e6808c)[iVar3 * 0x11] = param_8[0];
            (&DAT_00e68090)[iVar3 * 0x11] = param_8[1];
            (&DAT_00e68094)[iVar3 * 0x11] = param_8[2];
            (&DAT_00e68098)[iVar3 * 0x11] = -(uint)(param_7 != 0) & (uint)param_8;
        LAB_00426bd4:
            uVar5 = DAT_004b8550;
            (&DAT_00e6809c)[iVar3 * 0x11] = DAT_004b8554;
            (&DAT_00e680a0)[iVar3 * 0x11] = uVar5;
            return;
        }
    }
    return;
}

void FUN_00426c80(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, float param_4, undefined_32 param_5)

{
    if (0.0 < param_4)
    {
        FUN_00426a00(param_1, param_2, param_3, param_4, 0x40, param_5, 0, &DAT_0050b5f0);
    }
    return;
}

void FUN_00426cc0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, float param_4, undefined_32 param_5)

{
    if (param_4 < 1.0)
    {
        param_4 = 1.0;
    }
    FUN_00426a00(param_1, param_2, param_3, param_4, 0x40, param_5, 0, &DAT_0050b5f0);
    return;
}

// boost related
void FUN_00426d10(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5, undefined_32 param_6, undefined_32 param_7, undefined_32 param_8,
                  undefined_32 param_9)

{
    undefined_32 uVar1;
    undefined_32 uVar2;

    uVar2 = DAT_004b8554;
    uVar1 = DAT_004b8550;
    DAT_004b8550 = param_8;
    DAT_004b8554 = param_9;
    FUN_00426d80(param_1, param_2, param_3, param_4, param_5, param_6, param_7);
    DAT_004b8550 = uVar1;
    DAT_004b8554 = uVar2;
    return;
}

void FUN_00426d80(int param_1, undefined_32 param_2, undefined_32 param_3, float param_4, float *param_5, int param_6,
                  uint param_7)

{
    float fVar1;
    uint uVar2;
    undefined_32 uVar3;
    int *piVar4;
    float10 fVar5;
    float local_78;
    float local_74;
    float local_70;
    float local_6c;
    float local_68;
    float local_64;
    undefined_32 local_5c[3];
    undefined_8 local_50[16];
    int local_40[4];
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    float local_20[4];
    float local_10;
    float local_c;
    float local_8;

    local_40[0] = 0x7f;
    local_40[1] = 0x80;
    local_40[2] = 0x72;
    local_40[3] = 0x79;
    local_30 = 0x7a;
    local_2c = 0xaa;
    local_28 = 0xab;
    local_24 = 0xac;
    local_20[0] = 2.424246e-43;
    if (-1 < (int)param_7)
    {
        uVar2 = 0;
        piVar4 = local_40;
        do
        {
            if (param_1 == *piVar4)
                goto LAB_00426dff;
            uVar2 = uVar2 + 1;
            piVar4 = piVar4 + 1;
        } while (uVar2 < 9);
        if (DAT_0050d550 != 0)
        {
            if (param_4 <= 0.0)
            {
                return;
            }
            FUN_00426a00(param_1, param_2, param_3, param_4, 0xfffffc19, param_6, ~-(uint)(param_6 != 0) & param_7,
                         param_5);
            return;
        }
    }
LAB_00426dff:
    FUN_00429330(local_40, param_5);
    FUN_004315a0(local_50, local_20, &local_10);
    local_68 = *param_5 - local_10;
    local_64 = param_5[1] - local_c;
    fVar1 = (param_5[2] - local_8) * (param_5[2] - local_8) + local_64 * local_64 + local_68 * local_68;
    if (DAT_004b8554 * DAT_004b8554 <= fVar1)
    {
        return;
    }
    if (DAT_004b8550 * DAT_004b8550 < fVar1)
    {
        fVar5 = (float10)SQRT3(fVar1);
        fVar5 = (float10)1.0 - (fVar5 - (float10)DAT_004b8550) / ((float10)DAT_004b8554 - (float10)DAT_004b8550);
        local_78 = (float)fVar5;
        if (fVar5 < (float10)0.01)
        {
            return;
        }
        if (local_78 <= 1.0)
            goto LAB_00426f00;
    }
    local_78 = 1.0;
LAB_00426f00:
    if (((byte)DAT_00e996dc & 8) != 0)
    {
        FUN_00480890(local_50, param_5, &local_74);
        local_74 = local_74 - local_10;
        local_70 = local_70 - local_c;
        local_6c = local_6c - local_8;
        if ((((0.01 <= local_74) || (0.01 <= -local_74)) || (0.01 <= local_70)) || (0.01 <= -local_70))
        {
            rdVector_Normalize3(&local_74);
            rdVector_Cross3(local_5c, &local_74, &local_30);
            rdVector_Len3(local_5c);
        }
    }
    uVar3 = __ftol();
    if (local_78 * param_4 <= 0.0)
    {
        return;
    }
    FUN_00426a00(param_1, param_2, param_3, local_78 * param_4, uVar3, param_6, 0, &DAT_0050b5f0);
    return;
}

void FUN_004270c0(void)

{
    if (DAT_0050c68c != 0)
    {
        FUN_00426910();
        return;
    }
    return;
}

void FUN_004270d0(void)

{
    if ((DAT_00e364a5 == '\0') && (DAT_00e364a6 == '\0'))
    {
        return;
    }
    FUN_00449ef0();
    return;
}

void FUN_004270f0(undefined_32 param_1, undefined_32 param_2)

{
    DAT_004b8550 = param_1;
    DAT_004b8554 = param_2;
    return;
}

undefined_32 FUN_00427110(int param_1, int param_2, uint param_3)

{
    undefined_32 uVar1;
    short sVar2;

    if ((DAT_004eb450 != 0) && (param_3 != -1))
    {
        switch (param_1)
        {
        case 0:
            if (param_2 < 0)
            {
                return -1;
            }
            if (0x16 < param_2)
            {
                return -1;
            }
            if ((int)param_3 < 1)
            {
                return -1;
            }
            if (0x32 < param_3)
            {
                return -1;
            }
            sVar2 = *(short *)(&DAT_004b7fb0 + param_3 * 2);
            break;
        case 1:
            if (param_2 < 0)
            {
                return -1;
            }
            if (0x16 < param_2)
            {
                return -1;
            }
            if ((int)param_3 < 1)
            {
                return -1;
            }
            if (0x25 < param_3)
            {
                return -1;
            }
            sVar2 = *(short *)(&DAT_004b8018 + param_3 * 2);
            break;
        case 2:
            if ((int)param_3 < 1)
            {
                return -1;
            }
            if (0x38 < param_3)
            {
                return -1;
            }
            sVar2 = *(short *)(&DAT_004b8068 + param_3 * 2);
            break;
        case 3:
            if ((int)param_3 < 1)
            {
                return -1;
            }
            if (4 < param_3)
            {
                return -1;
            }
            sVar2 = *(short *)(&DAT_004b80e0 + param_3 * 2);
            break;
        case 4:
            if ((int)param_3 < 1)
            {
                return -1;
            }
            if (0x67 < param_3)
            {
                return -1;
            }
            sVar2 = *(short *)(&DAT_004b80f0 + param_3 * 2);
            break;
        case 5:
            if ((int)param_3 < 1)
            {
                return -1;
            }
            if (0xa8 < param_3)
            {
                return -1;
            }
            sVar2 = *(short *)(&DAT_004b81c0 + param_3 * 2);
            break;
        case 6:
            if ((int)param_3 < 1)
            {
                return -1;
            }
            if (0x68 < param_3)
            {
                return -1;
            }
            sVar2 = *(short *)(&DAT_004b8318 + param_3 * 2);
            break;
        case 7:
            if ((int)param_3 < 1)
            {
                return -1;
            }
            if (0xa7 < param_3)
            {
                return -1;
            }
            sVar2 = *(short *)(&DAT_004b83f0 + param_3 * 2);
            break;
        default:
            goto switchD_00427145_caseD_8;
        }
        if (-1 < sVar2)
        {
            // WARNING: Could not recover jumptable at 0x00427272. Too many
            // branches WARNING: Treating indirect jump as call
            uVar1 = (*(code *)(&PTR_LAB_00427344)[(byte)(&DAT_00427350)[param_1]])();
            return uVar1;
        }
    }
switchD_00427145_caseD_8:
    return -1;
}

undefined_32 FUN_00427360(int param_1, int param_2)

{
    if ((param_1 < 0) || (1 < param_1))
    {
        if (0.0 < (float)(&DAT_0050b600)[param_1])
        {
            return 1;
        }
    }
    else if (0.0 < (float)(&DAT_0050b620)[param_2])
    {
        return 1;
    }
    return 0;
}

int FUN_004273b0(undefined_16 param_1)

{
    int iVar1;

    (&DAT_004b85e0)[DAT_0050b6dc] = param_1;
    iVar1 = DAT_0050b6dc + 1;
    DAT_0050b6dc = (short)(iVar1 % 3);
    return iVar1 / 3;
}

undefined_32 FUN_004273e0(int param_1)

{
    short *psVar1;

    psVar1 = &DAT_004b85e0;
    do
    {
        if (*psVar1 == param_1)
        {
            return 1;
        }
        psVar1 = psVar1 + 1;
    } while ((int)psVar1 < 0x4b85e6);
    return 0;
}

void FUN_00427410(int param_1, undefined_32 param_2, int param_3, int param_4)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;

    iVar1 = FUN_00450b00(MAGIC('T', 'e', 's', 't'));
    if (0 < iVar1)
    {
        iVar1 = FUN_0045d350();
        if (iVar1 == 0)
        {
            return;
        }
        if (DAT_004b6d28 == 0)
        {
            return;
        }
    }
    FUN_00426910(param_1, param_2);
    iVar1 = FUN_00427360(param_1, param_2);
    if (((iVar1 == 0) && (iVar1 = FUN_00427110(param_1, param_2, param_3), iVar1 != -1))
        && ((iVar2 = FUN_004273e0(iVar1), iVar2 == 0 || ((param_1 == 6 && (param_3 == 0x27))))))
    {
        puVar3 = &DAT_00e67e60;
        do
        {
            if ((puVar3[-7] == iVar1) && (iVar2 = FUN_004850c0(*puVar3, 0), iVar2 == 1))
            {
                return;
            }
            puVar3 = puVar3 + 0x11;
        } while ((int)puVar3 < 0xe68080);
        FUN_004273b0(iVar1);
        if (param_4 == 0)
        {
            FUN_00426c80(iVar1, 7, 0.25f, 1.0f, 0);
        }
        else
        {
            FUN_00426d10(iVar1, 7, 0.25f, 1.0f, param_4, 0, 1, 0x41700000, 0x469c4000);
        }
        FUN_00427530(param_1, param_2, iVar1, param_3);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00427530(int param_1, int param_2, undefined_32 param_3, int param_4)

{
    float10 fVar1;

    fVar1 = (float10)FUN_0044a930(param_3);
    if (-1 < param_1)
    {
        if (param_1 < 2)
        {
            (&DAT_0050b620)[param_2] = (float)(fVar1 - (float10)-1.0);
            *(int *)(&DAT_0050b680 + param_2 * 4) = param_1;
            return;
        }
        if (param_1 == 2)
        {
            _DAT_0050b608 = *(float *)(&DAT_004b85e4 + param_4 * 4) - -0.25;
            return;
        }
    }
    (&DAT_0050b600)[param_1] = (float)(fVar1 - (float10)-1.0);
    return;
}

int FUN_00427590(undefined_32 param_1, undefined_32 param_2, int param_3, int param_4, int param_5, int param_6,
                 int param_7, undefined_32 param_8)

{
    int iVar1;
    uint uVar2;
    int local_20[8];

    local_20[0] = param_3;
    iVar1 = FUN_00427110(param_1, param_2, param_3);
    uVar2 = (uint)(iVar1 != -1);
    local_20[uVar2] = param_4;
    iVar1 = FUN_00427110(param_1, param_2, param_4);
    if (iVar1 != -1)
    {
        uVar2 = uVar2 + 1;
    }
    local_20[uVar2] = param_5;
    iVar1 = FUN_00427110(param_1, param_2, param_5);
    if (iVar1 != -1)
    {
        uVar2 = uVar2 + 1;
    }
    local_20[uVar2] = param_6;
    iVar1 = FUN_00427110(param_1, param_2, param_6);
    if (iVar1 != -1)
    {
        uVar2 = uVar2 + 1;
    }
    local_20[uVar2] = param_7;
    iVar1 = FUN_00427110(param_1, param_2, param_7);
    if (iVar1 != -1)
    {
        uVar2 = uVar2 + 1;
    }
    if (uVar2 != 0)
    {
        rand();
        iVar1 = __ftol();
        if (iVar1 < 0)
        {
            iVar1 = 0;
        }
        iVar1 = local_20[iVar1 % (int)uVar2];
        FUN_00427410(param_1, param_2, iVar1, param_8);
    }
    return iVar1;
}

uint FUN_00427670(int param_1, uint param_2)

{
    return *(uint *)(&DAT_00e9ed60 + param_1 * 4) & param_2;
}

void FUN_00427690(int param_1, uint param_2)

{
    *(uint *)(&DAT_00e9ed60 + param_1 * 4) = *(uint *)(&DAT_00e9ed60 + param_1 * 4) | param_2;
    return;
}

void FUN_004276a0(int param_1, uint param_2)

{
    *(uint *)(&DAT_00e9ed60 + param_1 * 4) = *(uint *)(&DAT_00e9ed60 + param_1 * 4) & ~param_2;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004276c0(void)

{
    float fVar1;
    float fVar2;
    int iVar3;
    float *pfVar4;
    float10 fVar5;

    fVar5 = (float10)FUN_004456a0();
    if ((float10)0.0 < fVar5)
    {
        DAT_004b85d4 = -1;
    }
    pfVar4 = (float *)&DAT_0050b600;
    iVar3 = DAT_004b85d4;
    do
    {
        if (((0.0 <= *pfVar4)
             && (fVar1 = *pfVar4, fVar2 = (float)_DAT_00e22a40, *pfVar4 = fVar1 - fVar2, fVar1 - fVar2 <= 0.0))
            && (iVar3 != -1))
        {
            FUN_00427410(DAT_004b85d8, DAT_004b85dc, iVar3, 0);
            iVar3 = -1;
            DAT_004b85d4 = -1;
        }
        pfVar4 = pfVar4 + 1;
    } while ((int)pfVar4 < 0x50b620);
    pfVar4 = (float *)&DAT_0050b620;
    do
    {
        if (((0.0 <= *pfVar4)
             && (fVar1 = *pfVar4, fVar2 = (float)_DAT_00e22a40, *pfVar4 = fVar1 - fVar2, fVar1 - fVar2 <= 0.0))
            && (iVar3 != -1))
        {
            FUN_00427410(DAT_004b85d8, DAT_004b85dc, iVar3, 0);
            iVar3 = -1;
            DAT_004b85d4 = -1;
        }
        pfVar4 = pfVar4 + 1;
    } while ((int)pfVar4 < 0x50b67c);
    return;
}

void FUN_004277b0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5, undefined_32 param_6)

{
    FUN_00427410(param_1, param_2, param_3, 0);
    DAT_004b85d8 = param_4;
    DAT_004b85dc = param_5;
    DAT_004b85d4 = param_6;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004277f0(undefined_32 param_1)

{
    int iVar1;

    switch (param_1)
    {
    case 0:
        DAT_0050b6e0 = 0;
        DAT_004b8744 = -1;
        return;
    case 1:
        DAT_0050b6e0 = 1;
        iVar1 = FUN_00450b00(MAGIC('T', 'e', 's', 't'));
        if (iVar1 < 1)
        {
            DAT_004b8744 = 0x8f;
            return;
        }
        break;
    case 2:
        DAT_0050b6e0 = 2;
        _DAT_0050b6e8 = 0xbe4ccccd;
        return;
    case 3:
        DAT_0050b6e0 = 3;
        _DAT_0050b6e8 = 0xc0000000;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00427880(void)

{
    float fVar1;
    float10 fVar2;
    float local_4;

    FUN_00449d70(1.0 - (float)(uint)DAT_0050b707 * 0.003921569);
    fVar2 = (float10)FUN_004456a0();
    local_4 = (float)((float10)1.0 - fVar2 * (float10)0.9);
    fVar2 = (float10)FUN_004456a0();
    if ((float10)0.0 < fVar2)
    {
        local_4 = 0.1;
    }
    local_4 = local_4 * _DAT_0050b6e4;
    _DAT_0050b6ec = __ftol();
    _DAT_0050b6f4 = _DAT_0050b6f4 + (float)_DAT_00e22a40;
    fVar1 = (float)(uint)(DAT_004b8748 == 0x22);
    if ((_DAT_0050b6f0 <= 0.0) || (_DAT_0050b6f0 = _DAT_0050b6f0 - (float)_DAT_00e22a40, 0.0 < _DAT_0050b6f0))
    {
    LAB_0042797a:
        if (fVar1 == 0.0)
            goto LAB_00427a0e;
    }
    else if (fVar1 == 0.0)
    {
        local_4 = 1.0;
        _DAT_0050b6f0 = fVar1;
        FUN_00426c80(DAT_004b8748, 7, 0.25f, 1.0f, 0);
        goto LAB_0042797a;
    }
    if ((_DAT_0050b6f0 <= 0.0) && (fVar2 = (float10)FUN_004456a0(), fVar2 == (float10)0.0))
    {
        if (9.0 <= _DAT_0050b6f4)
        {
            DAT_004b8748 = -1;
        }
        else
        {
            local_4 = (9.0 - _DAT_0050b6f4) * 0.5;
            if (1.0 < local_4)
            {
                local_4 = 1.0;
            }
            FUN_00426c80(DAT_004b8748, 7, 0.25f, local_4, 1);
        }
    }
LAB_00427a0e:
    if (DAT_0050b6e0 == 1)
    {
        _DAT_0050b6e4 = 1.0;
        if (-1 < DAT_004b8744)
        {
            FUN_00426c80(DAT_004b8744, 7, 0.25f, local_4, 1);
        }
        FUN_004277f0(3, DAT_004b8744);
    }
    else if ((1 < DAT_0050b6e0) && (DAT_0050b6e0 < 4))
    {
        _DAT_0050b6e4 = _DAT_0050b6e8 * (float)_DAT_00e22a40 + _DAT_0050b6e4;
        if (_DAT_0050b6e4 <= 0.0)
        {
            FUN_004277f0(0, -1);
        }
        else if (-1 < DAT_004b8744)
        {
            FUN_00426c80(DAT_004b8744, 7, 0.25f, local_4, 1);
            return;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00427b20(int param_1, int param_2, float *param_3)

{
    float fVar1;
    float fVar2;
    float *pfVar3;
    bool bVar4;
    int iVar5;
    float *pfVar6;

    bVar4 = false;
    if ((param_1 == 4) && (param_2 < 3))
    {
        bVar4 = true;
    }
    if ((bVar4) && (_DAT_004b8798 = _DAT_004b8798 - (float)_DAT_00e22a40, _DAT_004b8798 <= 0.0))
    {
        iVar5 = rand();
        _DAT_004b8798 = (float)iVar5 * 4.656613e-10 * 20.0 - -10.0;
        FUN_00426c80(0x24, 6, 0.25f, 1.0f, 0);
    }
    if (param_2 == 3)
    {
        if (param_1 == 1)
        {
            pfVar6 = (float *)&DAT_004b8928;
        }
        else
        {
            pfVar6 = param_3;
            if (param_1 == 4)
            {
                pfVar6 = (float *)&DAT_004b8cc8;
            }
        }
    }
    else
    {
        pfVar6 = (float *)(&PTR_DAT_004b8fa8)[param_1 * 3 + param_2];
    }
    if (pfVar6 != NULL)
    {
        fVar1 = *pfVar6;
        bVar4 = false;
        while ((0.0 <= fVar1 && (!bVar4)))
        {
            fVar1 = *pfVar6;
            fVar2 = pfVar6[1];
            pfVar3 = param_3;
            if ((fVar2 < fVar1) && (fVar2 = fVar2 - -1.0, (float)param_3 < fVar1))
            {
                pfVar3 = (float *)((float)param_3 - -1.0);
            }
            if (((fVar1 < fVar2) && (fVar1 = ((float)pfVar3 - fVar1) / (fVar2 - fVar1), 0.0 < fVar1)) && (fVar1 < 1.0))
            {
                bVar4 = true;
                if ((*(byte *)((int)pfVar6 + 10) & 1) == 0)
                {
                    if (fVar1 < 0.25)
                    {
                    LAB_00427d07:
                        fVar2 = fVar1 * 4.0;
                    }
                    else
                    {
                        fVar2 = 1.0;
                        if (0.75 < fVar1)
                        {
                            fVar1 = 1.0 - fVar1;
                            goto LAB_00427d07;
                        }
                    }
                    if (*(short *)(pfVar6 + 2) == 5)
                    {
                        fVar2 = fVar2 * 0.8;
                    }
                    if (0.0 < fVar2)
                    {
                        FUN_00426c80((int)*(short *)(pfVar6 + 2), 6, 0.25f, fVar2, 1);
                    }
                }
                else
                {
                    _DAT_004b879c = _DAT_004b879c - (float)_DAT_00e22a40;
                    if (_DAT_004b879c <= 0.0)
                    {
                        iVar5 = rand();
                        _DAT_004b879c = (float)iVar5 * 4.656613e-10 * 10.0 - -5.0;
                        FUN_00426c80((int)*(short *)(pfVar6 + 2), 6, 0.25f, 1.0f, 0);
                    }
                }
            }
            fVar1 = pfVar6[3];
            pfVar6 = pfVar6 + 3;
        }
    }
    return;
}

void FUN_00427d70(void)

{
    FUN_00449e30();
    DAT_004b8748 = -1;
    DAT_004b85d4 = -1;
    return;
}

void FUN_00427d90(float *param_1, int param_2)

{
    int *piVar1;
    float *pfVar2;
    float fVar3;
    undefined_32 uVar4;
    int *piVar5;
    float *pfVar6;

    if ((DAT_004b6d2c != 0) && (DAT_004eb450 != 0))
    {
        FUN_00449e50();
        FUN_00422da0();
        FUN_00449ea0();
        if (-1 < DAT_004b9008)
        {
            piVar5 = &DAT_004b9008;
            do
            {
                if (-1 < *piVar5)
                {
                    uVar4 = FUN_00422a90(*piVar5);
                    FUN_00422e30(uVar4, 0, 0);
                }
                piVar1 = piVar5 + 1;
                piVar5 = piVar5 + 1;
            } while (-1 < *piVar1);
        }
        if (param_2 == 3)
        {
            if (param_1 == (float *)0x1)
            {
                pfVar6 = (float *)&DAT_004b8928;
            }
            else
            {
                pfVar6 = param_1;
                if (param_1 == (float *)&DAT_00000004)
                {
                    pfVar6 = (float *)&DAT_004b8cc8;
                }
            }
        }
        else
        {
            pfVar6 = (float *)(&PTR_DAT_004b8fa8)[(int)param_1 * 3 + param_2];
        }
        fVar3 = *pfVar6;
        while (0.0 <= fVar3)
        {
            if (-1 < *(short *)(pfVar6 + 2))
            {
                uVar4 = FUN_00422a90((int)*(short *)(pfVar6 + 2));
                FUN_00422e30(uVar4, 0, 0);
            }
            pfVar2 = pfVar6 + 3;
            pfVar6 = pfVar6 + 3;
            fVar3 = *pfVar2;
        }
        if (-1 < *(short *)(&DAT_004b8780 + (int)param_1 * 2))
        {
            uVar4 = FUN_00422a90((int)*(short *)(&DAT_004b8780 + (int)param_1 * 2));
            FUN_00422e30(uVar4, 0, 0);
        }
        FUN_00427f10();
    }
    return;
}

void FUN_00427ea0(int param_1, int param_2, int param_3)

{
    if (param_3 == 0)
    {
        if (param_2 != 3)
        {
            DAT_004b9090 = (int)*(short *)((int)&PTR_DAT_004b8750 + param_2 * 2 + param_1 * 6);
            DAT_004b8744 = DAT_004b9090;
            return;
        }
        if (param_1 == 1)
        {
            DAT_004b9090 = 0x92;
            DAT_004b8744 = 0x92;
            return;
        }
        if (param_1 == 4)
        {
            DAT_004b9090 = 0x96;
            DAT_004b8744 = 0x96;
            return;
        }
    }
    else
    {
        DAT_004b8744 = DAT_004b9090;
    }
    return;
}

void FUN_00427f10(void)

{
    undefined_32 uVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    undefined_32 *puVar5;

    iVar2 = FUN_00450b00(MAGIC('T', 'e', 's', 't'));
    iVar4 = 0;
    if (0 < iVar2)
    {
        do
        {
            iVar3 = FUN_00450b30(MAGIC('T', 'e', 's', 't'), iVar4);
            if (iVar3 != 0)
            {
                puVar5 = &DAT_004b9098;
                uVar1 = **(undefined_32 **)(*(int *)(iVar3 + 0x1e70) + 0x18);
                do
                {
                    FUN_00427fb0(1, uVar1, *puVar5, 0);
                    puVar5 = puVar5 + 1;
                } while (puVar5 < &DAT_004b90c8);
                if ((*(byte *)(iVar3 + 0x60) & 0x20) != 0)
                {
                    puVar5 = &DAT_004b90c8;
                    do
                    {
                        FUN_00427fb0(1, uVar1, *puVar5, 0);
                        puVar5 = puVar5 + 1;
                    } while (puVar5 < &DAT_004b90f0);
                }
            }
            iVar4 = iVar4 + 1;
        } while (iVar4 < iVar2);
    }
    return;
}

void FUN_00427fb0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;

    iVar1 = FUN_00450b00(MAGIC('T', 'e', 's', 't'));
    if (0 < iVar1)
    {
        iVar1 = FUN_0045d350();
        if (iVar1 == 0)
        {
            return;
        }
        if (DAT_004b6d28 == 0)
        {
            return;
        }
    }
    iVar1 = FUN_00427110(param_1, param_2, param_3);
    if ((iVar1 != -1)
        && ((iVar1 = FUN_00422a90(iVar1),
             (undefined_8 *)(*(int *)(iVar1 + 0x28) + DAT_004eb44c) <= PTR_IMAGE_DOS_HEADER_004b6d10
                 || ((*(byte *)(iVar1 + 0x24) & 8) != 0))))
    {
        FUN_00422e30(iVar1, 1, 0);
    }
    return;
}

void FUN_00428030(int param_1, uint param_2, float param_3, float param_4)

{
    int iVar1;
    undefined_32 uVar2;
    uint uVar3;
    uint uVar4;

    if (DAT_0050c058 == 0)
    {
        uVar4 = *(uint *)(param_1 + 0x14);
        if (((uVar4 & 0x20) != 0) && ((uVar4 & param_2) != 0))
        {
            iVar1 = *(int *)(param_1 + 0x1c);
            if (iVar1 == 0)
            {
                uVar4 = (uint) * (char *)(param_1 + 0x1b);
                if ((int)uVar4 < 0xff)
                {
                    uVar2 = __ftol(*(float *)(param_1 + 8) * param_3 * 0.0625, *(float *)(param_1 + 0xc) * param_4, 0,
                                   0, 0, 2, uVar4 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x18),
                                   *(undefined_8 *)(param_1 + 0x19),
                                   param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x1a), *(char *)(param_1 + 0x1b));
                    uVar2 = __ftol(uVar2);
                    FUN_0044f670(0, uVar2);
                    return;
                }
                uVar2 = __ftol(*(float *)(param_1 + 8) * param_3 * 0.0625, *(float *)(param_1 + 0xc) * param_4, 0, 0, 0,
                               0x10000000, *(undefined_8 *)(param_1 + 0x18),
                               param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x19),
                               uVar4 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x1a), -1);
                uVar2 = __ftol(uVar2);
                FUN_0044f670(0, uVar2);
                return;
            }
            uVar3 = 0;
            if ((uVar4 & 0x2000) != 0)
            {
                uVar3 = 0x10;
            }
            if ((param_2 & 1) == 0)
            {
                uVar3 = 0;
            }
            if ((uVar4 & 0x10) != 0)
            {
                uVar3 = uVar3 | 0x8000;
            }
            if (((char)*(byte *)(param_1 + 0x1b) != 0xff) || ((uVar4 & 0x400) != 0))
            {
                uVar3 = uVar3 | 1;
            }
            if ((uVar4 & 0x1000) != 0)
            {
                uVar3 = uVar3 | 0x20000;
            }
            if ((uVar4 & 4) != 0)
            {
                uVar3 = uVar3 | 0x2000;
            }
            if ((uVar4 & 8) != 0)
            {
                uVar3 = uVar3 | 0x4000;
            }
            if ((uVar4 & 0x40) != 0)
            {
                uVar3 = uVar3 | 0x10000;
            }
            if ((uVar4 & 0x80) != 0)
            {
                uVar3 = uVar3 | 0x3000000;
            }
            if ((uVar4 & 0x100) != 0)
            {
                uVar3 = uVar3 | 0x800000;
            }
            if ((uVar4 & 0x8000) != 0)
            {
                uVar3 = uVar3 | 0x10000000;
            }
            if ((uVar4 & 0x4000) != 0)
            {
                uVar3 = uVar3 | 0x400000;
            }
            if ((uVar4 & 0x200) != 0)
            {
                uVar3 = uVar3 | 2;
            }
            if ((uVar4 & 0x10000) != 0)
            {
                uVar3 = uVar3 | 0x40;
            }
            uVar2 = __ftol(uVar3, uVar4 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x18),
                           param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x19),
                           uVar4 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x1a),
                           param_2 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x1b));
            uVar2 = __ftol(uVar2);
            uVar2 = __ftol(*(float *)(param_1 + 8) * param_3, *(float *)(param_1 + 0xc) * param_4,
                           *(undefined_32 *)(param_1 + 0x10), uVar2);
            uVar2 = __ftol(uVar2);
            FUN_0044f670(iVar1, uVar2);
        }
    }
    return;
}

void FUN_00428270(int param_1)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;

    if (param_1 == 2)
    {
        iVar1 = 1;
    }
    else if (param_1 == 1)
    {
        iVar1 = 2;
    }
    else
    {
        iVar1 = 0x800;
        if (param_1 != 3)
        {
            iVar1 = param_1;
        }
    }
    iVar2 = 0;
    if (0 < DAT_0050b6fc)
    {
        puVar3 = &DAT_00e9ec60;
        do
        {
            FUN_00428030(*puVar3, iVar1, 1.0f, 1.0f);
            iVar2 = iVar2 + 1;
            puVar3 = puVar3 + 1;
        } while (iVar2 < DAT_0050b6fc);
    }
    if (param_1 == 3)
    {
        DAT_0050b6fc = 0;
    }
    return;
}

void FUN_004282f0(short param_1, undefined_32 param_2)

{
    int iVar1;

    if (param_1 < 400)
    {
        iVar1 = (int)param_1;
        if (DAT_004b91b8 <= iVar1)
        {
            DAT_004b91b8 = iVar1 + 1;
        }
        iVar1 = iVar1 * 0x20;
        *(undefined_16 *)(&DAT_00e9ba60 + iVar1) = 0;
        *(undefined_16 *)(&DAT_00e9ba62 + iVar1) = 0;
        *(undefined_32 *)(&DAT_00e9ba68 + iVar1) = 1.0f;
        *(undefined_32 *)(&DAT_00e9ba6c + iVar1) = 1.0f;
        *(undefined_32 *)(&DAT_00e9ba70 + iVar1) = 0;
        *(undefined_32 *)(&DAT_00e9ba74 + iVar1) = 1;
        (&DAT_00e9ba78)[iVar1] = 0xff;
        (&DAT_00e9ba79)[iVar1] = 0xff;
        (&DAT_00e9ba7a)[iVar1] = 0xff;
        (&DAT_00e9ba7b)[iVar1] = 0xff;
        *(undefined_32 *)(&DAT_00e9ba7c + iVar1) = param_2;
    }
    return;
}

void FUN_00428370(void)

{
    int iVar1;

    FUN_00412e20();
    iVar1 = 0;
    if (0 < DAT_004b91b8)
    {
        do
        {
            FUN_004282f0(iVar1, 0);
            iVar1 = iVar1 + 1;
        } while (iVar1 < DAT_004b91b8);
    }
    DAT_004b91b8 = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004283b0(int param_1)

{
    uint uVar1;
    uint extraout_ECX;
    uint uVar2;
    uint uVar3;
    int iVar4;
    int iVar5;
    undefined_8 *puVar6;
    undefined_64 uVar7;
    undefined_32 uVar8;
    uint uVar9;
    float local_8;
    float local_4;

    FUN_0044f600();
    uVar1 = FUN_0044f640(&local_4, &local_8);
    if (param_1 == 2)
    {
        iVar4 = 1;
    }
    else if (param_1 == 1)
    {
        iVar4 = 2;
    }
    else
    {
        iVar4 = 0x800;
        if (param_1 != 3)
        {
            iVar4 = param_1;
        }
    }
    if (param_1 == 3)
    {
        uVar9 = uVar1 & 0xffffff00 | (uint)DAT_0050b70b;
        if ('\0' < (char)DAT_0050b70b)
        {
            if ((char)DAT_0050b70b < 0xff)
            {
                uVar1 = uVar1 & 0xffffff00 | (uint)DAT_0050b70a;
                uVar2 = extraout_ECX & 0xffffff00 | _DAT_0050b708 >> 8 & 0xff;
                uVar8 = 2;
            }
            else
            {
                uVar1 = CONCAT31((undefined3)((char)DAT_0050b70b >> 7), DAT_0050b70a);
                uVar9 = -1;
                uVar2 = extraout_ECX & 0xffffff00 | _DAT_0050b708 >> 8 & 0xff;
                uVar8 = 0;
            }
            FUN_0044f670(0, 0, 0, local_4 * 20.0, local_8 * 240.0, 0, 0, 0, uVar8, _DAT_0050b708, uVar2, uVar1, uVar9);
        }
    }
    iVar5 = 0;
    if (0 < DAT_004b91b8)
    {
        puVar6 = &DAT_00e9ba60;
        do
        {
            FUN_00428030(puVar6, iVar4, local_4, local_8);
            iVar5 = iVar5 + 1;
            puVar6 = puVar6 + 0x20;
        } while (iVar5 < DAT_004b91b8);
    }
    uVar7 = FUN_00428270(param_1);
    uVar1 = (uint)((ulonglong)uVar7 >> 0x20);
    if (param_1 == 3)
    {
        uVar9 = (uint)uVar7 & 0xffffff00 | (uint)DAT_0050b707;
        if ('\0' < (char)DAT_0050b707)
        {
            uVar2 = (uint)(char)DAT_0050b707;
            if ((int)uVar2 < 0xff)
            {
                uVar3 = uVar1 & 0xffffff00 | (uint)DAT_0050b706;
                uVar1 = uVar2 & 0xffffff00 | _DAT_0050b704 >> 8 & 0xff;
                uVar8 = 2;
            }
            else
            {
                uVar3 = uVar1 & 0xffffff00 | (uint)DAT_0050b706;
                uVar9 = -1;
                uVar1 = uVar2 & 0xffffff00 | _DAT_0050b704 >> 8 & 0xff;
                uVar8 = 0;
            }
            FUN_0044f670(0, 0, 0, local_4 * 20.0, local_8 * 240.0, 0, 0, 0, uVar8, _DAT_0050b704, uVar1, uVar3, uVar9);
        }
        if (DAT_0050b700 != 0)
        {
            FUN_0044f670(0, 0, 0, local_4 * 20.0, local_8 * _DAT_004b91bc, 0, 0, 0, 2, 0, 0, 0, -1);
            uVar8 = __ftol(local_4 * 20.0, (240.0 - _DAT_004b91c0) * local_8, 0, 0, 0, 2, 0, 0, 0, -1);
            FUN_0044f670(0, 0, uVar8);
        }
    }
    FUN_00426910();
    return;
}

// 004285d0
void sprite_enable_display(short param_1, int param_2)

{
    if (param_1 == -0xc9)
    {
        DAT_0050b700 = (uint)(param_2 != 0);
        return;
    }
    if (param_1 == -0x67)
    {
        DAT_0050b707 = -(param_2 != 0);
        return;
    }
    if (param_1 == -0x68)
    {
        DAT_0050b70b = -(param_2 != 0);
        return;
    }
    if (-1 < param_1)
    {
        if (param_2 != 0)
        {
            *(uint *)(&DAT_00e9ba74 + param_1 * 0x20) = *(uint *)(&DAT_00e9ba74 + param_1 * 0x20) | 0x20;
            return;
        }
        *(uint *)(&DAT_00e9ba74 + param_1 * 0x20) = *(uint *)(&DAT_00e9ba74 + param_1 * 0x20) & 0xffffffdf;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

//----- (00428660) --------------------------------------------------------
// a1 = sprite slot
// a2 = x position?
// a3 = y position?
// Probably returns nothing
void sprite_set_pos(short param_1, short param_2, short param_3)

{
    if (param_1 == -0xc9)
    {
        _DAT_004b91bc = (float)(int)param_2;
        _DAT_004b91c0 = (float)(int)param_3;
        return;
    }
    if (-1 < param_1)
    {
        *(short *)(&DAT_00e9ba60 + param_1 * 0x20) = param_2;
        *(short *)(&DAT_00e9ba62 + param_1 * 0x20) = param_3;
    }
    return;
}

void FUN_004286c0(short param_1, undefined_16 param_2, undefined_16 param_3)

{
    if (-1 < param_1)
    {
        *(undefined_16 *)(&DAT_00e9ba64 + param_1 * 0x20) = param_2;
        *(undefined_16 *)(&DAT_00e9ba66 + param_1 * 0x20) = param_3;
    }
    return;
}

//----- (004286F0) --------------------------------------------------------
// a1 = sprite slot
// a2 = x size?
// a3 = y size?
// Probably returns nothing
void sprite_scale(short param_1, undefined_32 param_2, undefined_32 param_3)

{
    if (-1 < param_1)
    {
        *(undefined_32 *)(&DAT_00e9ba68 + param_1 * 0x20) = param_2;
        *(undefined_32 *)(&DAT_00e9ba6c + param_1 * 0x20) = param_3;
    }
    return;
}

void FUN_00428720(short param_1, undefined_32 param_2)

{
    if (-1 < param_1)
    {
        *(undefined_32 *)(&DAT_00e9ba70 + param_1 * 0x20) = param_2;
    }
    return;
}

//----- (00428740) --------------------------------------------------------
// a1 = sprite slot
// a2 = red?
// a3 = green?
// a4 = blue?
// a5 = alpha?
// Probably returns nothing
void sprite_set_color(short param_1, undefined_8 param_2, undefined_8 param_3, undefined_8 param_4, undefined_8 param_5)

{
    int iVar1;

    if (param_1 == -0x67)
    {
        DAT_0050b704 = param_2;
        DAT_0050b705 = param_3;
        DAT_0050b706 = param_4;
        DAT_0050b707 = param_5;
        return;
    }
    if (param_1 == -0x68)
    {
        DAT_0050b708 = param_2;
        DAT_0050b709 = param_3;
        DAT_0050b70a = param_4;
        DAT_0050b70b = param_5;
        return;
    }
    if (-1 < param_1)
    {
        iVar1 = param_1 * 0x20;
        (&DAT_00e9ba78)[iVar1] = param_2;
        (&DAT_00e9ba79)[iVar1] = param_3;
        (&DAT_00e9ba7a)[iVar1] = param_4;
        (&DAT_00e9ba7b)[iVar1] = param_5;
    }
    return;
}

void FUN_004287e0(short param_1, uint param_2)

{
    *(uint *)(&DAT_00e9ba74 + param_1 * 0x20) = *(uint *)(&DAT_00e9ba74 + param_1 * 0x20) | param_2;
    return;
}

void FUN_00428800(short param_1, uint param_2)

{
    *(uint *)(&DAT_00e9ba74 + param_1 * 0x20) = *(uint *)(&DAT_00e9ba74 + param_1 * 0x20) & ~param_2;
    return;
}

void FUN_00428820(undefined_32 param_1)

{
    FUN_0044f630(param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00428830(void)

{
    int iVar1;
    int iVar2;

    iVar2 = 0x20;
    iVar1 = 0;
    do
    {
        iVar2 = iVar2 + -1;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x14) = 1.0f;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x18) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x1c) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x20) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x24) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x28) = 1.0f;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x2c) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x30) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x34) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x38) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x3c) = 1.0f;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x40) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x44) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x48) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x4c) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x50) = 1.0f;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 8) = 0;
        *(undefined_16 *)(PTR_DAT_004b91c4 + iVar1 + 4) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x6c) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x70) = 0;
        *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x74) = 0;
        iVar1 = iVar1 + 0x7c;
    } while (iVar2 != 0);
    DAT_00e9b9c0 = DAT_00e9b9c0 & 0xfffffffe;
    _DAT_0050c034 = PTR_DAT_004b91c4;
    DAT_0050c038 = 0;
    DAT_00e9b9c4 = 0;
    DAT_00e9b9c6 = 0;
    _DAT_00e9b9e0 = 0;
    _DAT_00e9b9e4 = 10.0f;
    DAT_00e9ba40 = 0;
    DAT_00e9ba44 = 0;
    DAT_00e9b9e8 = 1.0f;
    DAT_00e9b9ec = 0;
    DAT_00e9b9f0 = 0;
    DAT_00e9b9f4 = 0;
    DAT_00e9b9f8 = 0;
    DAT_00e9b9fc = 1.0f;
    DAT_00e9ba00 = 0;
    DAT_00e9ba04 = 0;
    DAT_00e9ba08 = 0;
    DAT_00e9ba0c = 0;
    DAT_00e9ba10 = 1.0f;
    DAT_00e9ba14 = 0;
    DAT_00e9ba18 = 0;
    DAT_00e9ba1c = 0;
    DAT_00e9ba20 = 0;
    DAT_00e9ba24 = 1.0f;
    _DAT_00e9ba28 = 0;
    _DAT_00e9ba2c = 0;
    _DAT_00e9ba30 = 0;
    FUN_00428a40(1, 4);
    return;
}

void FUN_00428a40(int param_1, uint param_2)

{
    *(uint *)(PTR_DAT_004b91c4 + param_1 * 0x7c) = *(uint *)(PTR_DAT_004b91c4 + param_1 * 0x7c) | param_2;
    return;
}

// load a value into
void FUN_00428a60(short param_1, undefined_16 param_2, undefined_32 param_3, undefined_16 param_4)

{
    int iVar1;

    iVar1 = param_1 * 0x7c;
    *(undefined_16 *)(PTR_DAT_004b91c4 + iVar1 + 6) = param_4;
    *(undefined_16 *)(PTR_DAT_004b91c4 + iVar1 + 4) = param_2;
    *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 8) = param_3;
    return;
}

void FUN_00428aa0(short param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                  undefined_32 param_6, undefined_32 param_7)

{
    int iVar1;

    iVar1 = param_1 * 0x7c;
    *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x54) = param_2;
    *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x58) = param_3;
    *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x5c) = param_4;
    *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x60) = param_5;
    *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x64) = param_6;
    *(undefined_32 *)(PTR_DAT_004b91c4 + iVar1 + 0x68) = param_7;
    return;
}

void FUN_00428b10(short param_1, undefined_32 param_2, undefined_16 param_3)

{
    *(undefined_16 *)(PTR_DAT_004b91c4 + param_1 * 0x7c + 0xc) = param_3;
    *(undefined_32 *)(PTR_DAT_004b91c4 + param_1 * 0x7c + 0x10) = param_2;
    return;
}

void FUN_00428b40(short param_1, int param_2)

{
    int iVar1;

    if (param_2 != 0)
    {
        iVar1 = FUN_004318b0(param_2);
        if (iVar1 != -1)
        {
            iVar1 = FUN_004318b0(param_2);
            *(uint *)(PTR_DAT_004b91c4 + iVar1 * 0x7c) = *(uint *)(PTR_DAT_004b91c4 + iVar1 * 0x7c) & 0xfffffffe;
        }
        if (param_1 == -1)
        {
            DAT_0050c038 = -1;
            return;
        }
        FUN_00431b90(param_2, (int)param_1);
        *(uint *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c) = *(uint *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c) | 1;
        DAT_0050c03c = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00428bd0(short param_1)

{
    if (DAT_0050c038 != -1)
    {
        *(uint *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c) =
            *(uint *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c) & 0xfffffffe;
    }
    if (param_1 == -1)
    {
        DAT_0050c038 = -1;
        return;
    }
    DAT_0050c038 = (int)param_1;
    _DAT_0050c034 = (uint *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c);
    *_DAT_0050c034 = *_DAT_0050c034 | 1;
    DAT_0050c03c = 0;
    return;
}

void FUN_00428c40(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;

    if (param_1 == 3)
    {
        FUN_004316a0(param_2, param_3);
        return;
    }
    if (param_1 == 2)
    {
        FUN_004316a0(param_2, param_3);
        return;
    }
    iVar1 = get_self(param_2);
    if (iVar1 == 0xd065)
    {
        FUN_004316a0(param_2, param_3);
        return;
    }
    iVar1 = get_self(param_2);
    if (iVar1 == 0xd065)
    {
        FUN_004316a0(param_2, param_3);
        return;
    }
    mat_set_identity(param_3);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00428cd0(undefined_32 param_1)

{
    float fVar1;
    float fVar2;
    uint uVar3;
    undefined_32 *puVar4;
    float local_d8;
    float local_d4;
    float local_d0;
    float local_cc;
    float local_c8;
    float local_c4;
    float local_c0;
    float local_bc;
    float local_b8;
    float local_b4;
    float local_b0;
    float local_ac;
    float local_a8;
    float local_a4;
    float local_a0;
    float local_9c;
    float local_98;
    float local_94;
    float local_90;
    float local_8c;
    float local_84;
    undefined_32 local_80;
    undefined_32 local_7c;
    undefined_32 local_78;
    undefined_32 local_74;
    undefined_32 local_70;
    undefined_32 local_6c;
    undefined_32 local_68;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    FUN_00430b80(PTR_DAT_004b91c4 + DAT_00e9b9c4 * 0x7c + 0x14, &local_c0);
    FUN_00430b80(PTR_DAT_004b91c4 + (short)DAT_00e9b9c6 * 0x7c + 0x14, &local_d8);
    local_90 = _DAT_00e9b9e0 / _DAT_00e9b9e4;
    FUN_00430b80(&DAT_00e9b9e8, &local_a8);
    fVar2 = local_90;
    local_a8 = local_d8 - local_c0;
    local_a4 = local_d4 - local_bc;
    local_a0 = local_d0 - local_b8;
    vec3f_multiply_add(&local_a8, &local_c0, local_90, &local_a8);
    if (DAT_00e9ba44 == NULL)
    {
        if (local_90 <= 0.0)
        {
            local_8c = local_cc - local_b4;
            fVar1 = local_c4 - local_ac;
            if (180.0 < local_8c)
            {
                local_cc = local_cc - 360.0;
            }
            if (local_8c < -180.0)
            {
                local_cc = local_cc - -360.0;
            }
            _DAT_00e9b9d4 = local_cc;
            _DAT_00e9b9c8 = local_b4;
            _DAT_00e9b9d0 = local_ac;
            if (180.0 < fVar1)
            {
                local_c4 = local_c4 - 360.0;
            }
        }
        else
        {
            local_8c = local_b4 - _DAT_00e9b9c8;
            _DAT_00e9b9d0 = local_ac - _DAT_00e9b9d0;
            if (180.0 < local_8c)
            {
                local_b4 = local_b4 - 360.0;
            }
            if (local_8c < -180.0)
            {
                local_b4 = local_b4 - -360.0;
            }
            if (180.0 < _DAT_00e9b9d0)
            {
                local_ac = local_ac - 360.0;
            }
            if (_DAT_00e9b9d0 < -180.0)
            {
                local_ac = local_ac - -360.0;
            }
            _DAT_00e9b9d4 = local_cc - _DAT_00e9b9d4;
            local_84 = local_c4 - _DAT_00e9b9dc;
            if (180.0 < _DAT_00e9b9d4)
            {
                local_cc = local_cc - 360.0;
            }
            if (_DAT_00e9b9d4 < -180.0)
            {
                local_cc = local_cc - -360.0;
            }
            _DAT_00e9b9d4 = local_cc;
            _DAT_00e9b9c8 = local_b4;
            _DAT_00e9b9d0 = local_ac;
            fVar1 = local_84;
            if (180.0 < local_84)
            {
                local_c4 = local_c4 - 360.0;
            }
        }
        if (fVar1 < -180.0)
        {
            local_c4 = local_c4 - -360.0;
        }
        local_9c = _DAT_00e9b9d4 - _DAT_00e9b9c8;
        local_98 = local_c8 - local_b0;
        local_94 = local_c4 - _DAT_00e9b9d0;
        _DAT_00e9b9d8 = local_c8;
        _DAT_00e9b9dc = local_c4;
        _DAT_00e9b9cc = local_b0;
        local_cc = _DAT_00e9b9d4;
        local_b4 = _DAT_00e9b9c8;
        local_ac = _DAT_00e9b9d0;
        vec3f_multiply_add(&local_9c, &local_b4, fVar2, &local_9c);
        mat_set_rotation_translation(&DAT_00e9b9e8, &local_a8);
    }
    else
    {
        puVar4 = DAT_00e9ba44;
        if (DAT_00e9ba40 != 1)
        {
            if (DAT_00e9ba40 == 0)
            {
                local_80 = *DAT_00e9ba44;
                local_7c = DAT_00e9ba44[1];
                local_78 = DAT_00e9ba44[2];
                local_74 = DAT_00e9ba44[3];
                local_70 = DAT_00e9ba44[4];
                local_6c = DAT_00e9ba44[5];
                local_68 = DAT_00e9ba44[6];
                local_64 = DAT_00e9ba44[7];
                local_60 = DAT_00e9ba44[8];
                local_5c = DAT_00e9ba44[9];
                local_58 = DAT_00e9ba44[10];
                local_54 = DAT_00e9ba44[0xb];
                local_50 = DAT_00e9ba44[0xc];
                local_4c = DAT_00e9ba44[0xd];
                local_48 = DAT_00e9ba44[0xe];
                local_44 = DAT_00e9ba44[0xf];
                puVar4 = &local_50;
            }
            else
            {
                FUN_00428c40((int)DAT_00e9ba40, DAT_00e9ba44, &local_80);
                puVar4 = &local_50;
            }
        }
        FUN_00481220(&local_a8, puVar4, &DAT_00e9b9e8, &local_a8, local_94);
    }
    local_3c = DAT_00e9b9ec;
    local_38 = DAT_00e9b9f0;
    local_40 = DAT_00e9b9e8;
    local_30 = DAT_00e9b9f8;
    local_2c = DAT_00e9b9fc;
    local_34 = DAT_00e9b9f4;
    local_24 = DAT_00e9ba04;
    local_20 = DAT_00e9ba08;
    local_28 = DAT_00e9ba00;
    local_18 = DAT_00e9ba10;
    local_14 = DAT_00e9ba14;
    local_1c = DAT_00e9ba0c;
    local_c = DAT_00e9ba1c;
    local_8 = DAT_00e9ba20;
    local_10 = DAT_00e9ba18;
    local_4 = DAT_00e9ba24;
    FUN_00431950(param_1, &local_40);
    if (*(int *)(PTR_DAT_004b91c4 + DAT_00e9b9c4 * 0x7c + 0x78) != 0)
    {
        FUN_00431a50(*(int *)(PTR_DAT_004b91c4 + DAT_00e9b9c4 * 0x7c + 0x78), 2, 1, 0x10, 2);
    }
    if (*(int *)(PTR_DAT_004b91c4 + (short)DAT_00e9b9c6 * 0x7c + 0x78) != 0)
    {
        FUN_00431a50(*(int *)(PTR_DAT_004b91c4 + (short)DAT_00e9b9c6 * 0x7c + 0x78), 2, 1, 0x10, 2);
    }
    _DAT_00e9b9e0 = _DAT_00e9b9e0 + (float)_DAT_00e22a40;
    if (_DAT_00e9b9e4 <= _DAT_00e9b9e0)
    {
        uVar3 = *(uint *)(PTR_DAT_004b91c4 + (short)DAT_00e9b9c6 * 0x7c + 0x78);
        if (uVar3 != 0)
        {
            uVar3 = FUN_00431a50(uVar3, 2, 0xfffffffe, 0x10, 3);
        }
        FUN_00428bd0(uVar3 & 0xffff0000 | (uint)DAT_00e9b9c6);
        *(uint *)(PTR_DAT_004b91c4 + DAT_00e9b9c4 * 0x7c) =
            *(uint *)(PTR_DAT_004b91c4 + DAT_00e9b9c4 * 0x7c) & 0xfffffffe;
    }
    return;
}

void FUN_004292b0(undefined_32 param_1)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;

    iVar1 = __RTC_NumErrors();
    iVar4 = 0;
    if (iVar1 < 1)
    {
        mat_set_identity(param_1);
        return;
    }
    do
    {
        iVar2 = FUN_004318d0(iVar4);
        if (iVar2 != 0)
        {
            uVar3 = get_self(iVar2);
            if ((uVar3 & 1) != 0)
            {
                iVar1 = FUN_004318b0(iVar2);
                FUN_0044bb10(param_1, PTR_DAT_004b91c4 + iVar1 * 0x7c + 0x14);
                return;
            }
        }
        iVar4 = iVar4 + 1;
    } while (iVar4 < iVar1);
    mat_set_identity(param_1);
    return;
}

void FUN_00429330(int param_1, float *param_2)

{
    float fVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    uint uVar4;
    uint uVar5;
    int iVar6;
    int iVar7;
    float local_c;

    local_c = -1.0;
    uVar2 = FUN_004318d0(1);
    uVar3 = FUN_004318d0(2);
    uVar4 = get_self(uVar2);
    uVar5 = get_self(uVar3);
    iVar6 = param_1;
    if ((uVar4 & 1) != 0)
    {
        iVar6 = FUN_004318b0(uVar2);
        local_c = (param_2[2] - *(float *)(PTR_DAT_004b91c4 + iVar6 * 0x7c + 0x4c))
                * (param_2[2] - *(float *)(PTR_DAT_004b91c4 + iVar6 * 0x7c + 0x4c))
            + (param_2[1] - *(float *)(PTR_DAT_004b91c4 + iVar6 * 0x7c + 0x48))
                * (param_2[1] - *(float *)(PTR_DAT_004b91c4 + iVar6 * 0x7c + 0x48))
            + (*param_2 - *(float *)(PTR_DAT_004b91c4 + iVar6 * 0x7c + 0x44))
                * (*param_2 - *(float *)(PTR_DAT_004b91c4 + iVar6 * 0x7c + 0x44));
    }
    if ((uVar5 & 1) == 0)
    {
        fVar1 = -1.0;
        iVar7 = param_1;
    }
    else
    {
        iVar7 = FUN_004318b0(uVar3);
        fVar1 = (param_2[2] - *(float *)(PTR_DAT_004b91c4 + iVar7 * 0x7c + 0x4c))
                * (param_2[2] - *(float *)(PTR_DAT_004b91c4 + iVar7 * 0x7c + 0x4c))
            + (param_2[1] - *(float *)(PTR_DAT_004b91c4 + iVar7 * 0x7c + 0x48))
                * (param_2[1] - *(float *)(PTR_DAT_004b91c4 + iVar7 * 0x7c + 0x48))
            + (*param_2 - *(float *)(PTR_DAT_004b91c4 + iVar7 * 0x7c + 0x44))
                * (*param_2 - *(float *)(PTR_DAT_004b91c4 + iVar7 * 0x7c + 0x44));
    }
    if ((0.0 <= fVar1) && (fVar1 <= local_c))
    {
        FUN_0044bb10(param_1, PTR_DAT_004b91c4 + iVar7 * 0x7c + 0x14);
        return;
    }
    if (0.0 <= local_c)
    {
        FUN_0044bb10(param_1, PTR_DAT_004b91c4 + iVar6 * 0x7c + 0x14);
        return;
    }
    mat_set_identity(param_1);
    return;
}

undefined_32 FUN_004294e0(int param_1)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;

    iVar1 = __RTC_NumErrors();
    iVar4 = 0;
    if (iVar1 < 1)
    {
        return 0;
    }
    while (((iVar2 = FUN_004318d0(iVar4), iVar2 == 0 || (uVar3 = get_self(iVar2), (uVar3 & 1) == 0))
            || (iVar2 = FUN_004318b0(iVar2), iVar2 != param_1)))
    {
        iVar4 = iVar4 + 1;
        if (iVar1 <= iVar4)
        {
            return 0;
        }
    }
    return 1;
}

void FUN_00429540(void)

{
    float fVar1;
    undefined_8 *puVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    int iVar6;
    byte *pbVar7;
    short sVar8;
    undefined_32 *puVar9;
    float local_c4;
    float local_c0;
    float local_bc;
    float local_b8;
    float local_b4;
    float local_b0;
    int local_ac;
    int local_a8;
    float local_a4;
    float local_a0;
    float local_9c;
    undefined_32 local_98;
    undefined_32 local_94;
    undefined_32 local_90;
    undefined_32 local_8c;
    undefined_32 local_88;
    undefined_32 local_84;
    undefined_32 local_80;
    undefined_32 local_7c;
    undefined_32 local_78;
    undefined_32 local_74;
    undefined_32 local_70;
    undefined_32 local_6c;
    undefined_32 local_68;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    float local_48;
    float local_44;
    float local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    float local_28;
    float local_24;
    float local_20;
    undefined_32 local_1c;
    undefined_8 local_18[12];
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar5 = 0x20;
    iVar6 = 0;
    iVar3 = 0;
    do
    {
        iVar5 = iVar5 + -1;
        *(uint *)(PTR_DAT_004b91c4 + iVar3) = *(uint *)(PTR_DAT_004b91c4 + iVar3) & 0xfffffffd;
        iVar3 = iVar3 + 0x7c;
    } while (iVar5 != 0);
    sVar8 = 0;
    iVar3 = __RTC_NumErrors();
    if (0 < iVar3)
    {
        iVar3 = 0;
        do
        {
            iVar6 = FUN_004318d0(iVar3);
            if (iVar6 != 0)
            {
                iVar3 = FUN_004318b0(iVar6);
                uVar4 = get_self(iVar6);
                if ((((uVar4 & 1) != 0) && (-1 < iVar3)) && (iVar3 < 0x20))
                {
                    *(uint *)(PTR_DAT_004b91c4 + iVar3 * 0x7c) = *(uint *)(PTR_DAT_004b91c4 + iVar3 * 0x7c) | 2;
                }
            }
            sVar8 = sVar8 + 1;
            iVar3 = (int)sVar8;
            iVar5 = __RTC_NumErrors();
        } while (iVar3 < iVar5);
    }
    local_ac = 0x20;
    local_a8 = 0;
    do
    {
        pbVar7 = PTR_DAT_004b91c4 + local_a8;
        if ((*(short *)(pbVar7 + 4) != 0) && ((*pbVar7 & 3) != 0))
        {
            sVar8 = *(short *)(pbVar7 + 6);
            if (sVar8 == 0)
            {
                puVar9 = *(undefined_32 **)(pbVar7 + 8);
                *(undefined_32 *)(pbVar7 + 0x14) = *puVar9;
                *(undefined_32 *)(pbVar7 + 0x18) = puVar9[1];
                *(undefined_32 *)(pbVar7 + 0x1c) = puVar9[2];
                *(undefined_32 *)(pbVar7 + 0x20) = puVar9[3];
                *(undefined_32 *)(pbVar7 + 0x24) = puVar9[4];
                *(undefined_32 *)(pbVar7 + 0x28) = puVar9[5];
                *(undefined_32 *)(pbVar7 + 0x2c) = puVar9[6];
                *(undefined_32 *)(pbVar7 + 0x30) = puVar9[7];
                *(undefined_32 *)(pbVar7 + 0x34) = puVar9[8];
                *(undefined_32 *)(pbVar7 + 0x38) = puVar9[9];
                *(undefined_32 *)(pbVar7 + 0x3c) = puVar9[10];
                *(undefined_32 *)(pbVar7 + 0x40) = puVar9[0xb];
                *(undefined_32 *)(pbVar7 + 0x44) = puVar9[0xc];
                *(undefined_32 *)(pbVar7 + 0x48) = puVar9[0xd];
                *(undefined_32 *)(pbVar7 + 0x4c) = puVar9[0xe];
                *(undefined_32 *)(pbVar7 + 0x50) = puVar9[0xf];
            }
            else if (sVar8 == 1)
            {
                mat_set_rotation_translation(pbVar7 + 0x14, *(undefined_32 *)(pbVar7 + 8));
            }
            else
            {
                FUN_00428c40((int)sVar8, *(undefined_32 *)(pbVar7 + 8), pbVar7 + 0x14);
            }
            puVar9 = (undefined_32 *)(pbVar7 + 0x14);
            local_b8 = *(float *)(pbVar7 + 0x54);
            local_b4 = *(float *)(pbVar7 + 0x58);
            local_b0 = *(float *)(pbVar7 + 0x5c);
            if (((local_b8 != 0.0) || (local_b4 != 0.0)) || (local_b0 != 0.0))
            {
                mat_transform(&local_b8, &local_b8, puVar9);
                *(float *)(pbVar7 + 0x44) = local_b8 + *(float *)(pbVar7 + 0x44);
                *(float *)(pbVar7 + 0x48) = local_b4 + *(float *)(pbVar7 + 0x48);
                *(float *)(pbVar7 + 0x4c) = local_b0 + *(float *)(pbVar7 + 0x4c);
            }
            local_a4 = *(float *)(pbVar7 + 0x60);
            local_a0 = *(float *)(pbVar7 + 100);
            local_9c = *(float *)(pbVar7 + 0x68);
            if (((local_a4 != 0.0) || (local_a0 != 0.0)) || (local_9c != 0.0))
            {
                mat_set_rotation(&local_98, local_a4, local_a0, local_9c);
                mat_mult_inplace(puVar9, &local_98);
            }
            sVar8 = *(short *)(pbVar7 + 4);
            if (((sVar8 == 2) || (sVar8 == 3)) || (sVar8 == 4))
            {
                FUN_00430b80(puVar9, local_18);
                sVar8 = *(short *)(pbVar7 + 0xc);
                if (sVar8 == 1)
                {
                    local_c4 = *(float *)(pbVar7 + 0x6c) + **(float **)(pbVar7 + 0x10);
                    local_c0 = *(float *)(pbVar7 + 0x70) + *(float *)(*(int *)(pbVar7 + 0x10) + 4);
                    local_bc = *(float *)(pbVar7 + 0x74) + *(float *)(*(int *)(pbVar7 + 0x10) + 8);
                }
                else
                {
                    if (sVar8 == 0)
                    {
                        local_58 = **(undefined_32 **)(pbVar7 + 0x10);
                        local_54 = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 4);
                        local_50 = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 8);
                        local_4c = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 0xc);
                        local_48 = *(float *)(*(int *)(pbVar7 + 0x10) + 0x10);
                        local_44 = *(float *)(*(int *)(pbVar7 + 0x10) + 0x14);
                        local_40 = *(float *)(*(int *)(pbVar7 + 0x10) + 0x18);
                        local_3c = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 0x1c);
                        local_38 = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 0x20);
                        local_34 = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 0x24);
                        local_30 = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 0x28);
                        local_2c = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 0x2c);
                        local_28 = *(float *)(*(int *)(pbVar7 + 0x10) + 0x30);
                        local_24 = *(float *)(*(int *)(pbVar7 + 0x10) + 0x34);
                        local_20 = *(float *)(*(int *)(pbVar7 + 0x10) + 0x38);
                        local_1c = *(undefined_32 *)(*(int *)(pbVar7 + 0x10) + 0x3c);
                    }
                    else
                    {
                        FUN_00428c40((int)sVar8, *(undefined_32 *)(pbVar7 + 0x10), &local_58);
                    }
                    local_c4 = *(float *)(pbVar7 + 0x6c) + local_28;
                    local_c0 = *(float *)(pbVar7 + 0x70) + local_24;
                    local_bc = *(float *)(pbVar7 + 0x74) + local_20;
                    if (*(short *)(pbVar7 + 4) == 4)
                    {
                        fVar1 = local_40;
                        if (local_40 < 0.0)
                        {
                            fVar1 = -local_40;
                        }
                        local_c4 = (fVar1 * 40.0 - -1.0) * local_48 + local_c4;
                        fVar1 = local_40;
                        if (local_40 < 0.0)
                        {
                            fVar1 = -local_40;
                        }
                        local_c0 = (fVar1 * 40.0 - -1.0) * local_44 + local_c0;
                        fVar1 = local_40;
                        if (local_40 < 0.0)
                        {
                            fVar1 = -local_40;
                        }
                        local_bc = (fVar1 * 40.0 - -1.0) * local_40 + local_bc;
                    }
                }
                FUN_00481220(pbVar7 + 0x44, &local_c4, puVar9, local_18, local_4);
                if (*(short *)(pbVar7 + 4) == 3)
                {
                    if (*(short *)(pbVar7 + 6) == 0)
                    {
                        **(undefined_32 **)(pbVar7 + 8) = *puVar9;
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 4) = *(undefined_32 *)(pbVar7 + 0x18);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 8) = *(undefined_32 *)(pbVar7 + 0x1c);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0xc) = *(undefined_32 *)(pbVar7 + 0x20);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x10) = *(undefined_32 *)(pbVar7 + 0x24);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x14) = *(undefined_32 *)(pbVar7 + 0x28);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x18) = *(undefined_32 *)(pbVar7 + 0x2c);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x1c) = *(undefined_32 *)(pbVar7 + 0x30);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x20) = *(undefined_32 *)(pbVar7 + 0x34);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x24) = *(undefined_32 *)(pbVar7 + 0x38);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x28) = *(undefined_32 *)(pbVar7 + 0x3c);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x2c) = *(undefined_32 *)(pbVar7 + 0x40);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x30) = *(undefined_32 *)(pbVar7 + 0x44);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x34) = *(undefined_32 *)(pbVar7 + 0x48);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x38) = *(undefined_32 *)(pbVar7 + 0x4c);
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x3c) = *(undefined_32 *)(pbVar7 + 0x50);
                    }
                    else if (*(short *)(pbVar7 + 6) == 1)
                    {
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0xc) = local_c;
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x10) = local_8;
                        *(undefined_32 *)(*(int *)(pbVar7 + 8) + 0x14) = local_4;
                    }
                }
            }
        }
        local_a8 = local_a8 + 0x7c;
        local_ac = local_ac + -1;
    } while (local_ac != 0);
    iVar3 = __RTC_NumErrors();
    puVar2 = PTR_DAT_004c7cdc;
    if (iVar3 == 0)
    {
        if (DAT_0050c038 == -1)
        {
            FUN_00428cd0(PTR_DAT_004c7cdc);
        }
        else
        {
            if (DAT_0050c03c == 0)
            {
                DAT_0050c03c = 1;
            }
            local_98 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x14);
            local_94 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x18);
            local_90 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x1c);
            local_8c = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x20);
            local_88 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x24);
            local_84 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x28);
            local_80 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x2c);
            local_7c = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x30);
            local_78 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x34);
            local_74 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x38);
            local_70 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x3c);
            local_6c = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x40);
            local_68 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x44);
            local_64 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x48);
            local_60 = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x4c);
            local_5c = *(undefined_32 *)(PTR_DAT_004b91c4 + DAT_0050c038 * 0x7c + 0x50);
            if (PTR_DAT_004c7cdc == NULL)
            {
                return;
            }
            FUN_00431950(PTR_DAT_004c7cdc, &local_98);
        }
        if (puVar2 != NULL)
        {
            FUN_00431900(puVar2, &DAT_00e996c0, &DAT_00e996cc);
            return;
        }
    }
    else
    {
        iVar5 = 0;
        iVar3 = __RTC_NumErrors();
        if (0 < iVar3)
        {
            do
            {
                iVar6 = FUN_004318d0(iVar5);
                if (iVar6 != 0)
                {
                    iVar3 = FUN_004318b0(iVar6);
                    uVar4 = get_self(iVar6);
                    if ((uVar4 & 1) != 0)
                    {
                        if (iVar3 == -1)
                        {
                            FUN_00428cd0(iVar6);
                        }
                        else
                        {
                            if (DAT_0050c03c == 0)
                            {
                                DAT_0050c03c = 1;
                            }
                            local_98 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x14);
                            local_94 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x18);
                            local_90 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x1c);
                            local_8c = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x20);
                            local_88 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x24);
                            local_84 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x28);
                            local_80 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x2c);
                            local_7c = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x30);
                            local_78 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x34);
                            local_74 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x38);
                            local_70 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x3c);
                            local_6c = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x40);
                            local_68 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x44);
                            local_64 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x48);
                            local_60 = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x4c);
                            local_5c = *(undefined_32 *)(PTR_DAT_004b91c4 + iVar3 * 0x7c + 0x50);
                            FUN_00431950(iVar6, &local_98);
                        }
                    }
                }
                iVar5 = iVar5 + 1;
                iVar3 = __RTC_NumErrors();
            } while (iVar5 < iVar3);
        }
        if (iVar6 != 0)
        {
            FUN_00431900(iVar6, &DAT_00e996c0, &DAT_00e996cc);
        }
    }
    return;
}

void FUN_00429cd0(int param_1)

{
    (&DAT_0050c070)[DAT_0050c07c] = DAT_0050c04c;
    DAT_00e9a9b4 = DAT_00e9a9b4 + 1;
    DAT_0050c07c = param_1;
    DAT_0050c04c = (&DAT_0050c070)[param_1];
    (&DAT_00e9a9c0)[DAT_00e9a9b4] = param_1;
    return;
}

void FUN_00429d10(void)

{
    (&DAT_0050c070)[DAT_0050c07c] = DAT_0050c04c;
    if (0 < DAT_00e9a9b4)
    {
        DAT_00e9a9b4 = DAT_00e9a9b4 + -1;
    }
    DAT_0050c07c = (&DAT_00e9a9c0)[DAT_00e9a9b4];
    DAT_0050c04c = (&DAT_0050c070)[(&DAT_00e9a9c0)[DAT_00e9a9b4]];
    return;
}

//----- (00429D50) --------------------------------------------------------
// a1 = pointer to value to be modified
// a2 = factor a (from user input for example)
// a3 = factor b (constant scaling factor for example)
// a4 = min value
// a5 = max value
void FUN_00429d50(float *param_1, float param_2, float param_3, float param_4, float param_5)

{
    float fVar1;

    fVar1 = param_3 * param_2 + *param_1;
    *param_1 = fVar1;
    if (fVar1 < param_4)
    {
        *param_1 = param_4;
    }
    // FIXME: This is different in the decompilation, but I assume the
    // decompiler messed up
    if (param_5 < *param_1)
    {
        *param_1 = param_5;
    }
    return;
}

//----- (00429D90) --------------------------------------------------------
// a1 = pointer to value to be modified
// a2 = factor a (from user input for example)
// a3 = factor b (constant scaling factor for example)
// a4 = min value
// a5 = max value
// Probably void, but would return a5 otherwise
void FUN_00429d90(int *param_1, undefined_32 param_2, undefined_32 param_3, int param_4, int param_5)

{
    int iVar1;

    iVar1 = __ftol();
    *param_1 = iVar1;
    if (iVar1 < param_4)
    {
        *param_1 = param_4;
    }
    if (param_5 < *param_1)
    {
        *param_1 = param_5;
    }
    return;
}

undefined_32 FUN_00429dc0(undefined_32 param_1, undefined_32 param_2, undefined_8 *param_3, undefined_32 *param_4,
                          float *param_5)

{
    int iVar1;
    undefined_32 uVar2;
    float10 fVar3;

    *param_3 = 0;
    iVar1 = FUN_00450aa0(MAGIC('T', 'e', 's', 't'), DAT_0050c050);
    if (iVar1 != 0)
    {
        *param_4 = 0xffffd8f0;
        switch (param_1)
        {
        case 0:
            uVar2 = lookup_translation(*(undefined_32 *)(*(int *)(*(int *)(iVar1 + 0x1e70) + 0x18) + 0x18));
            uVar2 = lookup_translation(*(undefined_32 *)(*(int *)(*(int *)(iVar1 + 0x1e70) + 0x18) + 0x14), uVar2);
            _sprintf(param_2, s_Name___s__s_004b92c0, uVar2);
            *param_5 = -99999.0;
            return 1;
        case 1:
            _sprintf(param_2, s_Anti_Skid_004b92b4);
            *param_5 = *(float *)(iVar1 + 0x6c);
            return 1;
        case 2:
            _sprintf(param_2, s_Turn_Response_004b92a4);
            *param_5 = *(float *)(iVar1 + 0x70);
            return 1;
        case 3:
            _sprintf(param_2, s_Max_Turn_Rate_004b9294);
            *param_5 = *(float *)(iVar1 + 0x74);
            return 1;
        case 4:
            _sprintf(param_2, s_Acceleration_004b9284);
            *param_5 = *(float *)(iVar1 + 0x78);
            return 1;
        case 5:
            _sprintf(param_2, s_Max_Speed_004b9278);
            *param_5 = *(float *)(iVar1 + 0x7c);
            return 1;
        case 6:
            _sprintf(param_2, s_AirBrake_Inv_004b9268);
            *param_5 = *(float *)(iVar1 + 0x80);
            return 1;
        case 7:
            _sprintf(param_2, s_Decel_Inv_004b925c);
            *param_5 = *(float *)(iVar1 + 0x84);
            return 1;
        case 8:
            _sprintf(param_2, s_Boost_Thrust_004b924c);
            *param_5 = *(float *)(iVar1 + 0x88);
            return 1;
        case 9:
            _sprintf(param_2, s_Heat_Rate_004b9240);
            *param_5 = *(float *)(iVar1 + 0x8c);
            return 1;
        case 10:
            _sprintf(param_2, s_Cool_Rate_004b9234);
            *param_5 = *(float *)(iVar1 + 0x90);
            return 1;
        case 0xb:
            _sprintf(param_2, s_Hover_Height_004b9224);
            *param_5 = *(float *)(iVar1 + 0x94);
            return 1;
        case 0xc:
            _sprintf(param_2, s_Repair_Rate_004b9218);
            *param_5 = *(float *)(iVar1 + 0x98);
            return 1;
        case 0xd:
            _sprintf(param_2, s_Bump_Mass_004b920c);
            *param_5 = *(float *)(iVar1 + 0x9c);
            return 1;
        case 0xe:
            _sprintf(param_2, s_Dmg_Immunity_004b91fc);
            *param_5 = *(float *)(iVar1 + 0xa0);
            return 1;
        case 0xf:
            _sprintf(param_2, s_ISect_Radius_004b91ec);
            *param_5 = *(float *)(iVar1 + 0xa8);
            return 1;
        case 0x10:
            _sprintf(param_2, s_AI_Look_Ahead_004b91dc);
            fVar3 = (float10)SQRT3(*(undefined_32 *)(iVar1 + 0x108));
            *param_5 = (float)fVar3;
            return 1;
        default:
            _sprintf(param_2, s_Unimplemented_004b91cc);
            *param_5 = 0.0;
        }
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042a110(undefined_32 param_1, float param_2)

{
    float fVar1;
    int iVar2;
    float10 fVar3;
    float local_4;

    fVar1 = param_2;
    _DAT_0050c080 = 1;
    iVar2 = FUN_00450aa0(MAGIC('T', 'e', 's', 't'), DAT_0050c050);
    if (iVar2 != 0)
    {
        switch (param_1)
        {
        case 0:
            param_2 = 1.0;
            if (fVar1 <= 0.0)
            {
                param_2 = -1.0;
            }
            DAT_0050c050 = __ftol();
            iVar2 = FUN_00450aa0(MAGIC('T', 'e', 's', 't'), DAT_0050c050);
            if ((iVar2 == 0) || ((*(ushort *)(iVar2 + 6) & 0x100) != 0))
            {
                if (0.0 <= param_2)
                {
                    DAT_0050c050 = 0;
                    return;
                }
                do
                {
                    DAT_0050c050 = DAT_0050c050 + 1;
                    iVar2 = FUN_00450aa0(MAGIC('T', 'e', 's', 't'), DAT_0050c050);
                    if ((iVar2 == 0) || ((*(ushort *)(iVar2 + 6) & 0x100) != 0))
                    {
                        param_2 = 0.0;
                        DAT_0050c050 = DAT_0050c050 + -1;
                    }
                } while (param_2 < 0.0);
                return;
            }
            break;
        case 1:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x6c), param_2, 0.01f, 0.05f, 1.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x1c) = *(undefined_32 *)(iVar2 + 0x6c);
            return;
        case 2:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x70), param_2, 1.0f, 10.0f, 1000.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x20) = *(undefined_32 *)(iVar2 + 0x70);
            return;
        case 3:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x74), param_2, 1.0f, 10.0f, 1000.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x24) = *(undefined_32 *)(iVar2 + 0x74);
            return;
        case 4:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x78), param_2, 0.01f, 0.02f, 10.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x28) = *(undefined_32 *)(iVar2 + 0x78);
            return;
        case 5:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x7c), param_2, 1.0f, 100.0f, 2000.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x2c) = *(undefined_32 *)(iVar2 + 0x7c);
            return;
        case 6:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x80), param_2, 0.5f, 2.0f, 1000.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x30) = *(undefined_32 *)(iVar2 + 0x80);
            return;
        case 7:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x84), param_2, 0.5f, 2.0f, 1000.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x34) = *(undefined_32 *)(iVar2 + 0x84);
            return;
        case 8:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x88), param_2, 1.0f, 10.0f, 1000.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x38) = *(undefined_32 *)(iVar2 + 0x88);
            return;
        case 9:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x8c), param_2, 0.1f, 0.1f, 30.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x3c) = *(undefined_32 *)(iVar2 + 0x8c);
            return;
        case 10:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x90), param_2, 0.1f, 0.1f, 20.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x40) = *(undefined_32 *)(iVar2 + 0x90);
            return;
        case 0xb:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x94), param_2, 0.05f, 3.0f, 30.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x44) = *(undefined_32 *)(iVar2 + 0x94);
            return;
        case 0xc:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x98), param_2, 0.01f, 0, 1.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x48) = *(undefined_32 *)(iVar2 + 0x98);
            return;
        case 0xd:
            FUN_00429d50((undefined_32 *)(iVar2 + 0x9c), param_2, 0.1f, 1.0f, 100.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x4c) = *(undefined_32 *)(iVar2 + 0x9c);
            return;
        case 0xe:
            FUN_00429d50((undefined_32 *)(iVar2 + 0xa0), param_2, 0.01f, 0, 1.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x50) = *(undefined_32 *)(iVar2 + 0xa0);
            return;
        case 0xf:
            FUN_00429d50((undefined_32 *)(iVar2 + 0xa8), param_2, 0.05f, 0.05f, 20.0f);
            *(undefined_32 *)(*(int *)(iVar2 + 0x1e70) + 0x54) = *(undefined_32 *)(iVar2 + 0xa8);
            return;
        case 0x10:
            fVar3 = (float10)SQRT3(*(undefined_32 *)(iVar2 + 0x108));
            local_4 = (float)fVar3;
            FUN_00429d50(&local_4, param_2, 1.0f, 10.0f, 500.0f);
            *(float *)(iVar2 + 0x108) = local_4 * local_4;
        }
    }
    return;
}

undefined_32 FUN_0042a580(undefined_32 param_1, undefined_32 param_2, undefined_8 *param_3, undefined_32 *param_4,
                          float *param_5)

{
    int iVar1;
    char *pcVar2;

    *param_3 = 0;
    *param_4 = 0xffffd8f0;
    *param_5 = -10000.0;
    switch (param_1)
    {
    case 0:
        _sprintf(param_2, s_Debug_Level_004b939c);
        *param_4 = DAT_0050c040;
        return 1;
    case 1:
        if (((byte)DAT_0050c048 & 4) == 0)
        {
            _sprintf(param_2, s________004b9394);
            return 1;
        }
        if (DAT_0050ca28 != 0)
        {
            _sprintf(param_2, s_Invincibility_On_004b9380);
            return 1;
        }
        pcVar2 = s_Invincibility_Off_004b936c;
        break;
    case 2:
        if (((byte)DAT_0050c048 & 8) == 0)
        {
            _sprintf(param_2, s________004b9394);
            return 1;
        }
        _sprintf(param_2, s_AI_Level_x10_004b935c);
        *param_5 = DAT_004c707c * 10.0;
        return 1;
    case 3:
        if (((byte)DAT_0050c048 & 8) != 0)
        {
            _sprintf(param_2, s_AI_SPREAD_004b9350);
            *param_5 = DAT_004c7080;
            return 1;
        }
        pcVar2 = s________004b9394;
        break;
    case 4:
        if (((byte)DAT_0050c048 & 8) != 0)
        {
            _sprintf(param_2, s_Death_SpeedMin_004b9340);
            *param_5 = DAT_004c7bb8;
            return 1;
        }
        pcVar2 = s________004b9394;
        break;
    case 5:
        if (((byte)DAT_0050c048 & 8) != 0)
        {
            _sprintf(param_2, s_Death_SpeedDrop_004b9330);
            *param_5 = DAT_004c7bbc;
            return 1;
        }
        pcVar2 = s________004b9394;
        break;
    case 6:
        if (((byte)DAT_0050c048 & 0x10) != 0)
        {
            if (DAT_0050ca24 != 0)
            {
                _sprintf(param_2, s_Spline_Markers_On_004b931c);
                *param_5 = -99999.0;
                return 1;
            }
            pcVar2 = s_Spline_Markers_Off_004b9308;
        LAB_0042a792:
            _sprintf(param_2, pcVar2);
            *param_5 = -99999.0;
            return 1;
        }
        pcVar2 = s________004b9394;
        break;
    case 7:
        if (((byte)DAT_0050c048 & 0x20) != 0)
        {
            if ((DAT_00e996dc & 0x4000) != 0)
            {
                _sprintf(param_2, s_Mirrored_Mode_On_004b92f4);
                *param_5 = -99999.0;
                return 1;
            }
            pcVar2 = s_Mirrored_Mode_Off_004b92e0;
            goto LAB_0042a792;
        }
        pcVar2 = s________004b9394;
        break;
    case 8:
        if (((byte)DAT_0050c048 & 2) == 0)
        {
            pcVar2 = s________004b9394;
        }
        else
        {
            iVar1 = FUN_00450aa0(MAGIC('T', 'e', 's', 't'), DAT_0050c050);
            if (iVar1 == 0)
            {
                return 0;
            }
            if ((*(ushort *)(iVar1 + 6) & 0x100) != 0)
            {
                return 0;
            }
            pcVar2 = s_Edit_Vehicle_Stats_004b92cc;
        }
        break;
    default:
        _sprintf(param_2, s_Unimplemented_004b91cc);
        return 0;
    }
    _sprintf(param_2, pcVar2);
    return 1;
}

undefined_32 FUN_0042a840(undefined_32 param_1, undefined_32 param_2, undefined_8 *param_3, undefined_32 *param_4,
                          undefined_32 *param_5)

{
    undefined_32 uVar1;

    *param_3 = 0;
    *param_4 = 0xffffd8f0;
    *param_5 = 0xc61c4000;
    switch (param_1)
    {
    case 0:
        uVar1 = lookup_translation(s__SCREENTEXT_535__cContinue_004b9468);
        _sprintf(param_2, uVar1);
        if (DAT_0050c064 != 0)
        {
            uVar1 = lookup_translation(s__SCREENTEXT_366___Are_you_sure__004b9448);
            _sprintf(param_2, &DAT_004b9440, uVar1);
            return 1;
        }
        break;
    case 1:
        uVar1 = lookup_translation(s__SCREENTEXT_536__cRestart_Race_004b93ec);
        _sprintf(param_2, uVar1);
        if (DAT_0050c064 != 0)
        {
            uVar1 = lookup_translation(s__SCREENTEXT_367___Yes_004b93d4);
            _sprintf(param_2, &DAT_004b9440, uVar1);
            return 1;
        }
        break;
    case 2:
        uVar1 = lookup_translation(s__SCREENTEXT_657__cQuit_Race_004b9424);
        _sprintf(param_2, uVar1);
        if (DAT_0050c064 != 0)
        {
            uVar1 = lookup_translation(s__SCREENTEXT_368___No_004b940c);
            _sprintf(param_2, &DAT_004b9440, uVar1);
            return 1;
        }
        break;
    case 3:
        uVar1 = lookup_translation(s__SCREENTEXT_658__cQuit_Game_004b93a8);
        _sprintf(param_2, uVar1);
        if (DAT_0050c064 != 0)
        {
            _sprintf(param_2, &DAT_004d55cc);
        }
        break;
    case 4:
        if (DAT_0050c044 < 1)
        {
            _sprintf(param_2, s_Unimplemented_004b91cc);
            return 0;
        }
        _sprintf(param_2, s__cGame_Cheats_004b93c4);
        return 1;
    default:
        _sprintf(param_2, s_Unimplemented_004b91cc);
        return 0;
    }
    return 1;
}

void FUN_0042a9f0(undefined_32 param_1, undefined_32 param_2)

{
    switch (param_1)
    {
    case 0:
        FUN_00429d90(&DAT_0050c040, param_2, 1.0f, 0, 6);
        return;
    case 1:
        if (((byte)DAT_0050c048 & 4) != 0)
        {
            DAT_0050ca28 = (uint)(DAT_0050ca28 == 0);
            return;
        }
        break;
    case 2:
        if (((byte)DAT_0050c048 & 8) != 0)
        {
            FUN_00429d50(&DAT_004c707c, param_2, 0.001f, 0.2f, 2.0f);
            return;
        }
        break;
    case 3:
        if (((byte)DAT_0050c048 & 8) != 0)
        {
            FUN_00429d50(&DAT_004c7080, param_2, 0.5f, 2.0f, 200.0f);
            return;
        }
        break;
    case 4:
        if (((byte)DAT_0050c048 & 8) != 0)
        {
            FUN_00429d50(&DAT_004c7bb8, param_2, 1.0f, 20.0f, 1000.0f);
            return;
        }
        break;
    case 5:
        if (((byte)DAT_0050c048 & 8) != 0)
        {
            FUN_00429d50(&DAT_004c7bbc, param_2, 1.0f, 20.0f, 500.0f);
            return;
        }
        break;
    case 6:
        if (((byte)DAT_0050c048 & 0x10) != 0)
        {
            DAT_0050ca24 = (uint)(DAT_0050ca24 == 0);
            return;
        }
        break;
    case 7:
        if (((byte)DAT_0050c048 & 0x20) != 0)
        {
            if ((DAT_00e996dc & 0x4000) != 0)
            {
                DAT_00e996dc = DAT_00e996dc & 0xffffbfff;
                return;
            }
            DAT_00e996dc = DAT_00e996dc | 0x4000;
        }
    }
    return;
}

void FUN_0042ab60(int param_1)

{
    if ((param_1 == 8) && (((byte)DAT_0050c048 & 2) != 0))
    {
        FUN_00429cd0(1);
    }
    return;
}

void FUN_0042ab80(int param_1)

{
    if (param_1 == 0)
    {
        DAT_0050c054 = param_1;
        DAT_004b2940 = 1;
        FUN_00445780();
    }
    if (param_1 == 2)
    {
        if (DAT_0050c064 == 0)
        {
            DAT_0050c064 = 1;
            DAT_0050c068 = param_1;
            DAT_0050c04c = 1;
        }
        else
        {
            DAT_0050c064 = 0;
            DAT_0050c04c = DAT_0050c068;
        }
    }
    if (param_1 == 1)
    {
        if (DAT_0050c064 == 0)
        {
            DAT_004b2940 = 1;
            DAT_0050c054 = 2;
            FUN_00445780();
        }
        else if (DAT_0050c068 == 2)
        {
            DAT_004b2940 = 1;
            DAT_0050c054 = 1;
            FUN_00445780();
        }
        else if (DAT_0050c068 == 3)
        {
            FUN_004240d0();
            _exit_0(0);
        }
    }
    if ((param_1 == 3) && (DAT_0050c064 == 0))
    {
        DAT_0050c064 = 1;
        DAT_0050c068 = param_1;
        DAT_0050c04c = 1;
    }
    if (param_1 == 4)
    {
        FUN_00429cd0(0);
    }
    return;
}

undefined_32 FUN_0042ac70(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                          undefined_32 param_5)

{
    undefined_32 uVar1;

    if (DAT_0050c07c == 0)
    {
        uVar1 = FUN_0042a580(param_1, param_2, param_3, param_4, param_5);
        return uVar1;
    }
    if (DAT_0050c07c == 1)
    {
        uVar1 = FUN_00429dc0(param_1, param_2, param_3, param_4, param_5);
        return uVar1;
    }
    if (DAT_0050c07c == 2)
    {
        uVar1 = FUN_0042a840(param_1, param_2, param_3, param_4, param_5);
        return uVar1;
    }
    return param_5;
}

void FUN_0042acf0(undefined_32 param_1, undefined_32 param_2)

{
    if (DAT_0050c07c == 0)
    {
        FUN_0042a9f0(param_1, param_2);
        return;
    }
    if (DAT_0050c07c == 1)
    {
        FUN_0042a110(param_1, param_2);
    }
    return;
}

void FUN_0042ad30(undefined_32 param_1)

{
    if (DAT_0050c07c == 0)
    {
        FUN_0042ab60(param_1);
        return;
    }
    if (DAT_0050c07c == 2)
    {
        FUN_0042ab80(param_1);
    }
    return;
}

void FUN_0042ad60(void)

{
    int iVar1;

    if (DAT_0050c070 == -2)
    {
        iVar1 = 3;
        do
        {
            iVar1 = iVar1 + -1;
            DAT_0050c07c = -1;
        } while (iVar1 != 0);
    }
    DAT_0050c04c = DAT_0050c070;
    DAT_0050c054 = 0;
    DAT_00e9a9b4 = 0;
    iVar1 = FUN_00450b30(MAGIC('J', 'd', 'g', 'e'), 0);
    if ((*(ushort *)(iVar1 + 6) & 0x1000) != 0)
    {
        DAT_0050c07c = 0;
        (&DAT_00e9a9c0)[DAT_00e9a9b4] = 0;
        return;
    }
    DAT_0050c064 = 0;
    DAT_0050c04c = 0;
    DAT_0050c07c = 2;
    (&DAT_00e9a9c0)[DAT_00e9a9b4] = 2;
    return;
}

undefined_32 FUN_0042adf0(void)

{
    return DAT_0050c054;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042ae00(void)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;
    float10 fVar6;
    float local_36c;
    float local_368;
    float local_364;
    int local_360;
    float local_35c;
    float local_358;
    float local_354;
    double local_350;
    undefined_8 local_348[64];
    char local_308[256];
    undefined_8 local_208[256];
    undefined_8 local_108[260];

    if (DAT_0050c058 == 0)
    {
        if ((DAT_0050c07c != 2) && (_DAT_004b91c8 == 0))
        {
            DAT_0050c084 = 1;
        }
        fVar6 = (float10)FUN_004456a0();
        local_368 = (float)fVar6;
        local_358 = (float)rand();
        local_354 = (float)(int)local_358 * 4.656613e-10 * 0.25 - -0.75;
        if (((((byte)DAT_0050c048 & 1) != 0) && (DAT_0050c044 < 1)) && (DAT_00e98eb0 != 0))
        {
            if ((DAT_0050c044 == 0) && (DAT_00e98eb0 == 0x1000))
            {
                DAT_0050c044 = -1;
            }
            else if ((DAT_0050c044 == -1) && (DAT_00e98eb0 == 0x800))
            {
                DAT_0050c044 = -2;
            }
            else if ((DAT_0050c044 == -2) && (DAT_00e98eb0 == 0x2000))
            {
                DAT_0050c044 = -3;
            }
            else if ((DAT_0050c044 != -3) || (DAT_0050c044 = 1, DAT_00e98eb0 != 0x400))
            {
                DAT_0050c044 = 0;
            }
        }
        if (1.0 <= local_368)
        {
            if (DAT_0050c07c == 2)
            {
                iVar1 = FUN_0045e120(0x4000);
                if (iVar1 != 0)
                {
                    DAT_0050c04c = DAT_0050c04c + -1;
                    if (DAT_0050c04c < 0)
                    {
                        DAT_0050c04c = 0;
                    }
                    else
                    {
                        FUN_00426c80(0x55, 6, 0.25f, 1.0f, 0);
                    }
                }
                iVar1 = FUN_0045e120(0x8000);
                if (iVar1 != 0)
                {
                    DAT_0050c04c = DAT_0050c04c + 1;
                    iVar1 = FUN_0042ac70(DAT_0050c04c, local_348, local_308, &local_360, &local_36c);
                    if (iVar1 == 0)
                    {
                        DAT_0050c04c = DAT_0050c04c + -1;
                    }
                    else
                    {
                        FUN_00426c80(0x55, 6, 0.25f, 1.0f, 0);
                    }
                }
                DAT_004b2940 = 0;
                if (DAT_004d6b40 != 0)
                {
                    DAT_004d6b48 = 0;
                    DAT_004d6b40 = 0;
                    FUN_0042ad30(DAT_0050c04c);
                }
                if (DAT_004d6b44 != 0)
                {
                    if (DAT_0050c07c == 2)
                    {
                        DAT_0050c04c = 0;
                    }
                    FUN_0042ad30(DAT_0050c04c);
                }
            }
            else
            {
                if ((((DAT_00e98eb0 & 4) != 0) || ((DAT_00e98eb0 & 0x4000) != 0))
                    && (DAT_0050c04c = DAT_0050c04c + -1, DAT_0050c04c < 0))
                {
                    DAT_0050c04c = 0;
                    iVar1 = FUN_0042ac70(0, local_348, local_308, &local_360, &local_36c);
                    while (iVar1 != 0)
                    {
                        DAT_0050c04c = DAT_0050c04c + 1;
                        iVar1 = FUN_0042ac70(DAT_0050c04c, local_348, local_308, &local_360, &local_36c);
                    }
                    DAT_0050c04c = DAT_0050c04c + -1;
                }
                if (((DAT_00e98eb0 & 8) != 0) || ((DAT_00e98eb0 & 0x8000) != 0))
                {
                    DAT_0050c04c = DAT_0050c04c + 1;
                    iVar1 = FUN_0042ac70(DAT_0050c04c, local_348, local_308, &local_360, &local_36c);
                    if (iVar1 == 0)
                    {
                        DAT_0050c04c = 0;
                    }
                }
                if ((DAT_00e98eb0 & 0x20) != 0)
                {
                    FUN_0042acf0(DAT_0050c04c, 1.0f);
                }
                if ((DAT_00e98eb0 & 0x10) != 0)
                {
                    FUN_0042acf0(DAT_0050c04c, -1.0f);
                }
                if ((DAT_00e98eb0 & 0x1000) != 0)
                {
                    FUN_0042acf0(DAT_0050c04c, -1.0f);
                }
                if (((DAT_00e98eb0 & 0x2000) != 0) || ((DAT_00e98eb0 & 1) != 0))
                {
                    FUN_0042acf0(DAT_0050c04c, 1.0f);
                }
                if ((DAT_00e98eb0 & 0x400) != 0)
                {
                    FUN_0042acf0(DAT_0050c04c, 10.0f);
                }
                if ((DAT_00e98eb0 & 0x800) != 0)
                {
                    FUN_0042acf0(DAT_0050c04c, 0xc1200000);
                }
                if ((DAT_00e98eb0 & 1) != 0)
                {
                    FUN_0042ad30(DAT_0050c04c);
                }
                if ((DAT_00e98eb0 & 0x200) != 0)
                {
                    FUN_00445780();
                }
                if ((DAT_00e98eb0 & 2) != 0)
                {
                    FUN_00429d10();
                }
            }
        }
        if (DAT_0050c064 != 0)
        {
            if (DAT_0050c04c < 1)
            {
                DAT_0050c04c = 1;
            }
            if (2 < DAT_0050c04c)
            {
                DAT_0050c04c = 2;
            }
        }
        iVar1 = 0;
        local_368 = 0.0;
        iVar4 = 0x42;
        do
        {
            iVar2 = FUN_0042ac70(iVar1, local_348, local_308, &local_360, &local_36c);
            if (iVar2 != 0)
            {
                if ((-9999.99 <= local_36c) || (-10000 < local_360))
                {
                    local_350 = (double)local_36c;
                    if (local_36c <= -9999.99)
                    {
                        uVar3 = lookup_translation(s__s_s___d_004b948c, local_348, local_360);
                        _sprintf(local_108, uVar3);
                    }
                    else
                    {
                        uVar3 = lookup_translation(s__s_s____2f_004b9498, local_348, local_350);
                        _sprintf(local_108, uVar3);
                    }
                }
                else
                {
                    uVar3 = lookup_translation(s__s_s_004b94a4, local_348);
                    _sprintf(local_108, uVar3);
                }
                if (iVar4 < 0xd2)
                {
                    iVar5 = 0x19;
                    iVar2 = (int)local_368 + 0x14;
                }
                else
                {
                    iVar5 = 0xa5;
                    iVar2 = (int)local_368 + -0x78;
                }
                local_35c = 255.0;
                local_364 = 255.0;
                if (iVar1 == DAT_0050c04c)
                {
                    local_35c = 0.0;
                    local_364 = 55.0;
                }
                if (DAT_0050c07c == 2)
                {
                    iVar5 = 0xa0;
                    fVar6 = (float10)FUN_004456a0();
                    iVar2 = iVar4;
                    if ((float10)0.0 < fVar6)
                    {
                        local_350 = (double)((ulonglong)local_350 & 0xffffffff00000000
                                             | (ulonglong)(uint)(float)(fVar6 * (float10)255.0));
                        if (iVar1 == DAT_0050c04c)
                        {
                            local_35c = local_354 * 255.0;
                            local_358 = local_354 * 250.0;
                            local_364 = local_354 * 50.0;
                        }
                        else
                        {
                            local_35c = 170.0;
                            local_358 = 160.0;
                            local_364 = 0.0;
                        }
                        _sprintf(local_208, &DAT_004b2304 /* "%s" */, local_108);
                        uVar3 = __ftol(local_208);
                        uVar3 = __ftol(uVar3);
                        uVar3 = __ftol(uVar3);
                        uVar3 = __ftol(uVar3);
                        create_text_entry_3(0xa0, iVar4, uVar3);
                    }
                }
                else
                {
                    uVar3 = lookup_translation(s__f4_s_004b9484, local_108);
                    _sprintf(local_208, uVar3);
                    uVar3 = __ftol(-1, local_208);
                    uVar3 = __ftol(-1, uVar3);
                    create_text_entry_0(iVar5, iVar2, uVar3);
                    if (iVar1 != DAT_0050c04c)
                        goto LAB_0042b521;
                    if (local_308[0] != '\0')
                    {
                        uVar3 = lookup_translation(s__s_s_004b94a4, local_308);
                        _sprintf(local_208, uVar3);
                        create_text_entry_0(iVar5 + 0x82, iVar2 + -0x1e, 0, -1, 0xffffff80, -1, local_208);
                    }
                }
                if ((iVar1 == DAT_0050c04c) && (local_308[0] != '\0'))
                {
                    uVar3 = lookup_translation(s__s_s_004b94a4, local_308);
                    _sprintf(local_208, uVar3);
                    create_text_entry_0(iVar5 + 0x82, iVar2 + -0x1e, 0, -1, 0xffffff80, -1, local_208);
                }
            }
        LAB_0042b521:
            iVar4 = iVar4 + 0xc;
            iVar1 = iVar1 + 1;
            local_368 = (float)((int)local_368 + 0xe);
        } while (iVar4 < 0x162);
        (&DAT_0050c070)[DAT_0050c07c] = DAT_0050c04c;
    }
    else
    {
        DAT_00e9a9b8 = DAT_00e9a9b8 + -1;
        if (DAT_00e9a9b8 < 1)
        {
            DAT_00e9a9b8 = 10;
            DAT_00e9a9b0 = DAT_00e9a9b0 + 1;
            if (3 < DAT_00e9a9b0)
            {
                DAT_0050c058 = 0;
                return;
            }
        }
    }
    return;
}

// recursive
int FUN_0042b560(int param_1)

{
    int iVar1;
    uint uVar2;
    int **ppiVar3;
    int iVar4;

    if (param_1 != 0)
    {
        iVar1 = get_self(param_1);
        if (iVar1 == 0x3064)
        {
            iVar1 = 0;
            if (0 < *(int *)(param_1 + 0x14))
            {
                ppiVar3 = *(int ***)(param_1 + 0x18);
                do
                {
                    iVar4 = **ppiVar3;
                    if (iVar4 != 0)
                    {
                        return iVar4;
                    }
                    iVar1 = iVar1 + 1;
                    ppiVar3 = ppiVar3 + 1;
                } while (iVar1 < *(int *)(param_1 + 0x14));
                return iVar4;
            }
        }
        else
        {
            uVar2 = get_self(param_1);
            if ((uVar2 & 0x4000) != 0)
            {
                iVar4 = 0;
                iVar1 = FUN_00431780(param_1);
                if (0 < iVar1)
                {
                    do
                    {
                        iVar1 = FUN_0042b560(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar4 * 4));
                        if (iVar1 != 0)
                        {
                            return iVar1;
                        }
                        iVar4 = iVar4 + 1;
                        iVar1 = FUN_00431780(param_1);
                    } while (iVar4 < iVar1);
                }
            }
        }
    }
    return 0;
}

void FUN_0042b5e0(int param_1, short param_2, short param_3, short param_4, short param_5, short param_6, short param_7)

{
    int iVar1;

    if ((param_1 != 0) && (iVar1 = *(int *)(param_1 + 0xc), iVar1 != 0))
    {
        if (-1 < param_2)
        {
            *(char *)(iVar1 + 0x20) = (char)param_2;
        }
        if (-1 < param_3)
        {
            *(char *)(iVar1 + 0x21) = (char)param_3;
        }
        if (-1 < param_4)
        {
            *(char *)(iVar1 + 0x22) = (char)param_4;
        }
        if (-1 < param_5)
        {
            *(char *)(iVar1 + 0x23) = (char)param_5;
        }
        if (-1 < param_6)
        {
            *(char *)(iVar1 + 0x24) = (char)param_6;
        }
        if (-1 < param_7)
        {
            *(char *)(iVar1 + 0x25) = (char)param_7;
        }
    }
    return;
}

void FUN_0042b640(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                  undefined_32 param_6, undefined_32 param_7)

{
    int iVar1;
    uint uVar2;
    int iVar3;

    if (param_1 != 0)
    {
        iVar1 = get_self(param_1);
        if (iVar1 == 0x3064)
        {
            iVar1 = 0;
            if (0 < *(int *)(param_1 + 0x14))
            {
                do
                {
                    FUN_0042b5e0(**(undefined_32 **)(*(int *)(param_1 + 0x18) + iVar1 * 4), param_2, param_3, param_4,
                                 param_5, param_6, param_7);
                    iVar1 = iVar1 + 1;
                } while (iVar1 < *(int *)(param_1 + 0x14));
                return;
            }
        }
        else
        {
            uVar2 = get_self(param_1);
            if ((uVar2 & 0x4000) != 0)
            {
                iVar3 = 0;
                iVar1 = FUN_00431780(param_1);
                if (0 < iVar1)
                {
                    do
                    {
                        FUN_0042b640(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar3 * 4), param_2, param_3, param_4,
                                     param_5, param_6, param_7);
                        iVar3 = iVar3 + 1;
                        iVar1 = FUN_00431780(param_1);
                    } while (iVar3 < iVar1);
                }
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042b710(int param_1, float *param_2, float *param_3, float *param_4, float *param_5, float *param_6,
                  int param_7)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float local_5c;
    float local_58;
    float local_54;
    float local_50;
    float local_4c;
    float local_48;
    float local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    local_10 = DAT_00e375b0;
    local_14 = DAT_00e375ac;
    local_40 = _DAT_00e37580;
    local_3c = _DAT_00e37584;
    local_38 = _DAT_00e37588;
    local_34 = _DAT_00e3758c;
    fVar1 = (float)((int)*(short *)(param_1 + 0x10) / 2);
    local_30 = _DAT_00e37590;
    fVar3 = (float)((int)*(short *)(param_1 + 0x12) / 2);
    local_2c = _DAT_00e37594;
    fVar2 = fVar1 * 0.5;
    fVar4 = fVar3 * 0.5;
    local_28 = _DAT_00e37598;
    local_24 = _DAT_00e3759c;
    fVar5 =
        (float)((int)((int)*(short *)(param_1 + 0x18) + ((int)*(short *)(param_1 + 0x18) >> 0x1f & 3U)) >> 2) - fVar2;
    fVar6 =
        (float)((int)((int)*(short *)(param_1 + 0x1a) + ((int)*(short *)(param_1 + 0x1a) >> 0x1f & 3U)) >> 2) - fVar4;
    local_1c = DAT_00e375a4;
    local_18 = DAT_00e375a8;
    local_20 = _DAT_00e375a0;
    local_c = _DAT_00e375b4;
    local_8 = _DAT_00e375b8;
    local_4 = _DAT_00e375bc;
    *param_3 = -1000.0;
    *param_4 = -1000.0;
    if (param_7 == 0)
    {
        local_5c = *param_2 - _DAT_0050c6e8;
        local_58 = param_2[1] - _DAT_0050c6ec;
        local_54 = param_2[2] - _DAT_0050c6f0;
        param_2 = &local_5c;
    }
    FUN_00480690(&local_50, param_2, &local_40);
    if ((DAT_00e996dc & 0x4000) != 0)
    {
        local_50 = -local_50;
    }
    if (0.01 < local_44)
    {
        fVar2 = (local_50 / local_44 - -1.0) * fVar2 + fVar5;
        fVar4 = (1.0 - local_4c / local_44) * fVar4 + fVar6;
        *param_5 = local_48 / local_44;
        *param_6 = local_44;
        if ((((fVar5 - 8.0 < fVar2) && (fVar2 < (fVar5 + fVar1) - -8.0)) && (fVar6 - 8.0 < fVar4))
            && (fVar4 < (fVar6 + fVar3) - -8.0))
        {
            *param_3 = fVar2;
            *param_4 = fVar4;
        }
    }
    return;
}

void FUN_0042ba20(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, float param_4, undefined_32 param_5,
                  float param_6, undefined_32 param_7, undefined_32 param_8, undefined_32 param_9)

{
    undefined_32 uVar1;
    undefined_32 uVar2;

    uVar1 = __ftol();
    uVar2 = __ftol();
    FUN_0042bb00(param_1, uVar1, uVar2);
    uVar1 = __ftol();
    sprite_set_color(param_1, param_7, param_8, param_9, uVar1);
    param_4 = (0.7 - (1.0 - param_6) * -0.3) * param_4;
    sprite_scale(param_1, param_4, param_4);
    sprite_enable_display(param_1, 1);
    return;
}

void FUN_0042bb00(undefined_32 param_1)

{
    undefined_32 uVar1;

    uVar1 = __ftol();
    uVar1 = __ftol(uVar1);
    sprite_set_pos(param_1, uVar1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042bb50(int param_1, int param_2, int param_3)

{
    float fVar1;
    byte bVar2;
    float fVar3;
    float fVar4;
    int iVar5;
    uint uVar6;
    ushort extraout_var;
    int iVar7;
    undefined_16 extraout_var_00;
    uint extraout_ECX;
    uint extraout_ECX_00;
    uint extraout_ECX_01;
    undefined_16 extraout_var_01;
    uint extraout_EDX;
    uint extraout_EDX_00;
    int *piVar8;
    byte *pbVar9;
    int iVar10;
    float10 fVar11;
    ulonglong uVar12;

    iVar10 = param_1;
    if (0x31 < (int)(&DAT_00e9a3c0)[param_3])
    {
        sprite_enable_display(*(undefined_16 *)(&DAT_004b94c8 + param_3), 0);
        piVar8 = &DAT_004b94e0 + param_3 * 8;
        iVar10 = 8;
        uVar6 = extraout_EDX;
        do
        {
            if (*piVar8 != -1)
            {
                sprite_enable_display(uVar6 & 0xffff0000 | (uint) * (ushort *)piVar8, 0);
                uVar6 = extraout_EDX_00;
            }
            piVar8 = piVar8 + 1;
            iVar10 = iVar10 + -1;
        } while (iVar10 != 0);
        return;
    }
    iVar7 = param_1 - DAT_00ec86c4 / 2;
    iVar5 = param_2 - DAT_00ec85e8 / 2;
    fVar3 = 1.0 - (float)(&DAT_00e9a3c0)[param_3] * 0.02;
    fVar4 = fVar3 * *(float *)(&DAT_004b94d0 + param_3 * 4);
    fVar11 = (float10)SQRT3((float)(iVar7 * iVar7 + iVar5 * iVar5));
    fVar1 = (float)(fVar11 * (float10)0.0125);
    if (fVar11 * (float10)0.0125 <= (float10)1.0)
    {
        __ftol();
    }
    __ftol();
    uVar6 = __ftol();
    if ((int)_DAT_00e9a830 < (int)uVar6)
    {
        _DAT_00e9a830 = uVar6;
    }
    sprite_enable_display(uVar6 & 0xffff0000 | (uint) * (ushort *)(&DAT_004b94c8 + param_3), 1);
    FUN_0042bb00(CONCAT22(extraout_var_00, *(undefined_16 *)(&DAT_004b94c8 + param_3)), param_1, param_2);
    sprite_scale(CONCAT22(extraout_var_01, *(undefined_16 *)(&DAT_004b94c8 + param_3)), fVar4, fVar4);
    iVar5 = FUN_00445690();
    if (iVar5 == 0)
    {
        iVar5 = 0xff;
    }
    else
    {
        FUN_004456a0();
        iVar5 = __ftol();
    }
    uVar6 = iVar5 * (char)(&DAT_004b94db)[param_3 * 4];
    sprite_set_color(uVar6 & 0xffff0000 | (uint) * (ushort *)(&DAT_004b94c8 + param_3),
                     -((int)uVar6 >> 0x1f) & 0xffffff00U | (uint)(byte)(&DAT_004b94d8)[param_3 * 4],
                     (int)uVar6 / 0xff & 0xffffff00U | (uint)(byte)(&DAT_004b94d9)[param_3 * 4],
                     uVar6 & 0xffffff00 | (uint)(byte)(&DAT_004b94da)[param_3 * 4], (int)uVar6 / 0xff);
    uVar6 = (uint)extraout_var << 0x10;
    if ((fVar1 <= 2.0) && (uVar6 = FUN_004376b0(), uVar6 != 0))
    {
        fVar11 = (float10)FUN_004456a0();
        bVar2 = (&DAT_004b94db)[param_3 * 4];
        param_1 = 8;
        pbVar9 = &DAT_00e9a6a1 + param_3 * 0x18;
        param_3 = param_3 << 5;
        uVar6 = extraout_ECX;
        do
        {
            if (*(int *)((int)&DAT_004b94e0 + param_3) != -1)
            {
                uVar12 =
                    sprite_enable_display(uVar6 & 0xffff0000 | (uint) * (ushort *)((int)&DAT_004b94e0 + param_3), 1);
                FUN_0042ba20(*(undefined_32 *)((int)&DAT_004b94e0 + param_3), iVar10, param_2,
                             *(undefined_32 *)(&DAT_00e99780 + param_3), *(undefined_32 *)(&DAT_00e9a440 + param_3),
                             (float)(uint)bVar2 * 0.003921569
                                 * (float)(((float10)2.0 - (float10)fVar1) * (float10)0.5 * (float10)fVar3
                                           * ((float10)1.0 - fVar11 * (float10)0.6)),
                             extraout_ECX_00 & 0xffffff00 | (uint)pbVar9[-1],
                             (uint)(uVar12 & 0xffffff00ffffff00) | (uint)*pbVar9,
                             (uint)((uVar12 & 0xffffff00ffffff00) >> 0x20) | (uint)pbVar9[1]);
                uVar6 = extraout_ECX_01;
            }
            pbVar9 = pbVar9 + 3;
            param_3 = param_3 + 4;
            param_1 = param_1 + -1;
        } while (param_1 != 0);
        return;
    }
    piVar8 = &DAT_004b94e0 + param_3 * 8;
    iVar10 = 8;
    do
    {
        if (*piVar8 != -1)
        {
            uVar6 = sprite_enable_display(uVar6 & 0xffff0000 | (uint) * (ushort *)piVar8, 0);
        }
        piVar8 = piVar8 + 1;
        iVar10 = iVar10 + -1;
    } while (iVar10 != 0);
    return;
}

void FUN_0042be60(void)

{
    char cVar1;
    float fVar2;
    short *psVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    char *pcVar7;
    int local_30;
    short *local_2c;
    int local_28;
    float *local_24;
    int local_20;
    int local_1c;
    int local_18;
    int local_14;
    int local_10;
    short *local_c;
    undefined_8 local_8[4];
    float local_4;

    FUN_00431c40(&local_20, &local_28, &local_2c, &local_4, local_8);
    local_c = (short *)(local_28 * DAT_00ec85e8 + (int)local_2c);
    local_24 = NULL;
    do
    {
        if (-1 < *(int *)((int)&DAT_004b94c8 + (int)local_24))
        {
            iVar5 = *(int *)((int)&DAT_00e9a480 + (int)local_24);
            if (iVar5 < -500)
            {
                *(undefined_32 *)((int)&DAT_00e9a3c0 + (int)local_24) = 0x32;
            }
            else
            {
                local_30 = 0;
                local_1c = -iVar5 + 0xc;
                local_18 = DAT_00ec86c4 + -8 + -iVar5;
                local_10 = -*(int *)((int)&DAT_00e9a488 + (int)local_24);
                local_14 = local_10 + 0xc;
                local_10 = DAT_00ec85e8 + -8 + local_10;
                psVar3 = (short *)((int)local_2c + (iVar5 + -4) * local_20
                                   + (*(int *)((int)&DAT_00e9a488 + (int)local_24) + -4) * local_28);
                iVar5 = 0;
                do
                {
                    iVar4 = 0;
                    do
                    {
                        if (((((iVar4 < local_1c) || (local_18 <= iVar4)) || (iVar5 < local_14)) || (local_10 <= iVar5))
                            || (((local_2c <= psVar3 && (psVar3 < local_c))
                                 && (((local_20 == 1 && (*(char *)psVar3 != -1))
                                      || ((local_20 == 2 && (*psVar3 != -1))))))))
                        {
                            local_30 = local_30 + 1;
                        }
                        psVar3 = (short *)((int)psVar3 + local_20);
                        iVar4 = iVar4 + 1;
                    } while (iVar4 < 8);
                    psVar3 = (short *)((int)psVar3 + local_28 + local_20 * -8);
                    iVar5 = iVar5 + 1;
                } while (iVar5 < 8);
                *(int *)((int)&DAT_00e9a3c0 + (int)local_24) = local_30;
            }
        }
        local_24 = (float *)((int)local_24 + 4);
    } while ((int)local_24 < 8);
    switch (local_20)
    {
    case 1:
        local_4 = DAT_004b94b0;
        break;
    case 2:
        local_4 = DAT_004b94b4;
        break;
    case 3:
        local_4 = DAT_004b94bc;
        break;
    case 4:
        local_4 = DAT_004b94b8;
    }
    iVar5 = 0;
    do
    {
        *(undefined_32 *)((int)&DAT_00e9a7e0 + iVar5) = 0xc47a0000;
        if (-1 < *(int *)((int)&DAT_00e9a720 + iVar5))
        {
            fVar2 = 0.0;
            if (0 < local_20)
            {
                pcVar7 = (char *)((int)local_2c + local_20 + local_20 * *(int *)((int)&DAT_00e9a720 + iVar5)
                                  + *(int *)((int)&DAT_00e9a780 + iVar5) * local_28);
                iVar4 = local_20 * 8;
                iVar6 = local_20;
                do
                {
                    cVar1 = (char)iVar4;
                    iVar4 = iVar4 + -8;
                    local_c = (short *)((uint)(byte)pcVar7[-1] << (cVar1 - 8U & 0x1f));
                    pcVar7 = pcVar7 + -1;
                    iVar6 = iVar6 + -1;
                    fVar2 = fVar2 + (float)(int)local_c;
                } while (iVar6 != 0);
            }
            *(float *)((int)&DAT_00e9a7e0 + iVar5) = fVar2 * local_4;
        }
        iVar5 = iVar5 + 4;
    } while (iVar5 < 0x50);
    iVar5 = 0;
    local_24 = (float *)&DAT_00e99d80;
    do
    {
        if (*(char *)((int)&DAT_00e9a6e0 + iVar5) != '\0')
        {
            iVar4 = (&DAT_00e99ce0)[iVar5];
            *local_24 = -1000.0;
            if (-1 < iVar4)
            {
                fVar2 = 0.0;
                if (0 < local_20)
                {
                    pcVar7 = (char *)((int)local_2c + local_20 + local_20 * iVar4 + (&DAT_00e99c40)[iVar5] * local_28);
                    iVar4 = local_20 * 8;
                    iVar6 = local_20;
                    do
                    {
                        cVar1 = (char)iVar4;
                        iVar4 = iVar4 + -8;
                        local_c = (short *)((uint)(byte)pcVar7[-1] << (cVar1 - 8U & 0x1f));
                        pcVar7 = pcVar7 + -1;
                        iVar6 = iVar6 + -1;
                        fVar2 = fVar2 + (float)(int)local_c;
                    } while (iVar6 != 0);
                }
                *local_24 = fVar2 * local_4;
            }
        }
        local_24 = local_24 + 1;
        iVar5 = iVar5 + 1;
    } while ((int)local_24 < 0xe99e20);
    iVar5 = 0;
    if (0 < DAT_0050c088)
    {
        local_24 = (float *)&DAT_00e9a8e0;
        do
        {
            iVar4 = (&DAT_00e9a8a0)[iVar5];
            *local_24 = -1000.0;
            if (-1 < iVar4)
            {
                fVar2 = 0.0;
                if (0 < local_20)
                {
                    pcVar7 = (char *)((int)local_2c + local_20 + local_20 * iVar4 + (&DAT_00e9a920)[iVar5] * local_28);
                    iVar4 = local_20 * 8;
                    iVar6 = local_20;
                    do
                    {
                        cVar1 = (char)iVar4;
                        iVar4 = iVar4 + -8;
                        local_c = (short *)((uint)(byte)pcVar7[-1] << (cVar1 - 8U & 0x1f));
                        pcVar7 = pcVar7 + -1;
                        iVar6 = iVar6 + -1;
                        fVar2 = fVar2 + (float)(int)local_c;
                    } while (iVar6 != 0);
                }
                *local_24 = fVar2 * local_4;
            }
            iVar5 = iVar5 + 1;
            local_24 = local_24 + 1;
        } while (iVar5 < DAT_0050c088);
    }
    FUN_00431cd0();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042c1a0(undefined_32 param_1)

{
    bool bVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    undefined_8 *puVar4;
    undefined_32 *puVar5;
    int iVar6;
    undefined_8 local_10[4];
    undefined_8 local_c[4];
    undefined_8 local_8[4];
    undefined_8 local_4[4];

    iVar6 = 0;
    sprite_enable_display(0xffffff98, 0);
    if ((((DAT_0050c048 & 0x200) == 0) || (DAT_0050c040 < 1)) || ((DAT_00e98e90 & 0x1100) != 0x1100))
    {
        _DAT_00e9a830 = 0;
        bVar1 = false;
        puVar4 = &DAT_00e9a3e0;
        puVar5 = &DAT_00e9a590;
        do
        {
            if (-1 < (int)(&DAT_004b94c8)[iVar6])
            {
                uVar2 = (&DAT_00e99c20)[iVar6];
                (&DAT_00e9a598)[iVar6] = (&DAT_00e9a480)[iVar6];
                uVar3 = (&DAT_00e99c28)[iVar6];
                *puVar5 = (&DAT_00e9a488)[iVar6];
                (&DAT_00e9a480)[iVar6] = uVar2;
                (&DAT_00e9a488)[iVar6] = uVar3;
                bVar1 = true;
                FUN_0042b710(param_1, puVar4, local_10, local_c, local_4, local_8, 1);
                uVar2 = __ftol();
                (&DAT_00e99c20)[iVar6] = uVar2;
                uVar3 = __ftol();
                (&DAT_00e99c28)[iVar6] = uVar3;
                FUN_0042bb50(uVar2, uVar3, iVar6);
            }
            puVar4 = puVar4 + 0xc;
            iVar6 = iVar6 + 1;
            puVar5 = puVar5 + 1;
        } while ((int)puVar4 < 0xe9a3f8);
        if (bVar1)
        {
            uVar2 = __ftol();
            sprite_set_color(0xffffff98, -1, -1, 0xffffffc8, uVar2);
        }
    }
    return;
}

void FUN_0042c2d0(int param_1, undefined_8 param_2)

{
    (&DAT_004b94db)[param_1 * 4] = param_2;
    return;
}

void FUN_0042c2e0(int param_1, undefined_32 param_2, undefined_32 *param_3, undefined_32 param_4, undefined_8 param_5,
                  undefined_8 param_6, undefined_8 param_7, undefined_8 param_8)

{
    int iVar1;

    if ((-1 < param_1) && (param_1 < 2))
    {
        (&DAT_004b94c8)[param_1] = param_2;
        iVar1 = param_1 * 0xc;
        *(undefined_32 *)(&DAT_00e9a3e0 + iVar1) = *param_3;
        *(undefined_32 *)(&DAT_00e9a3e4 + iVar1) = param_3[1];
        *(undefined_32 *)(&DAT_00e9a3e8 + iVar1) = param_3[2];
        *(undefined_32 *)(&DAT_004b94d0 + param_1 * 4) = param_4;
        (&DAT_00e9a598)[param_1] = 0xfffffc18;
        (&DAT_00e9a480)[param_1] = 0xfffffc18;
        (&DAT_00e99c20)[param_1] = 0xfffffc18;
        (&DAT_004b94d8)[param_1 * 4] = param_5;
        (&DAT_004b94d9)[param_1 * 4] = param_6;
        (&DAT_004b94da)[param_1 * 4] = param_7;
        (&DAT_004b94db)[param_1 * 4] = param_8;
    }
    return;
}

void FUN_0042c380(int param_1, int param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                  undefined_8 param_6, undefined_8 param_7, undefined_8 param_8)

{
    if ((((-1 < param_1) && (param_1 < 2)) && (-1 < param_2)) && (param_2 < 8))
    {
        param_2 = param_2 + param_1 * 8;
        *(undefined_32 *)(&DAT_00e99780 + param_2 * 4) = param_5;
        (&DAT_004b94e0)[param_2] = param_3;
        *(undefined_32 *)(&DAT_00e9a440 + param_2 * 4) = param_4;
        (&DAT_00e9a6a0)[param_2 * 3] = param_6;
        (&DAT_00e9a6a1)[param_2 * 3] = param_7;
        (&DAT_00e9a6a2)[param_2 * 3] = param_8;
    }
    return;
}

void FUN_0042c3e0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_004b94e0;
    MEMSET(iVar1, puVar2, -1, 0x10)
    DAT_004b94c8 = -1;
    DAT_004b94cc = -1;
    return;
}

void FUN_0042c400(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00e9a840;
    MEMSET(iVar1, puVar2, 0xffffd8f1, 0x14)
    return;
}

void FUN_0042c420(int param_1, undefined_32 *param_2, undefined_32 param_3)

{
    (&DAT_00e9a840)[param_1] = param_3;
    param_1 = param_1 * 0xc;
    *(undefined_32 *)(&DAT_00e9a4a0 + param_1) = *param_2;
    *(undefined_32 *)(&DAT_00e9a4a4 + param_1) = param_2[1];
    *(undefined_32 *)(&DAT_00e9a4a8 + param_1) = param_2[2];
    return;
}

void FUN_0042c460(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00e9a400;
    MEMSET(iVar1, puVar2, -1, 10)
    puVar2 = &DAT_00e9a5a0;
    MEMSET(iVar1, puVar2, -1, 10)
    puVar2 = &DAT_00e9a6e0;
    MEMSET(iVar1, puVar2, 0, 10)
    return;
}

void FUN_0042c490(int param_1, undefined_32 *param_2)

{
    int iVar1;

    if (param_1 < 0x28)
    {
        iVar1 = param_1 * 0xc;
        *(undefined_32 *)(&DAT_00e99e20 + iVar1) = *param_2;
        *(undefined_32 *)(&DAT_00e99e24 + iVar1) = param_2[1];
        *(undefined_32 *)(&DAT_00e99e28 + iVar1) = param_2[2];
        (&DAT_00e99d80)[param_1] = 0xc47a0000;
        *(undefined_8 *)((int)&DAT_00e9a6e0 + param_1) = 1;
    }
    return;
}

void FUN_0042c4e0(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    if (param_1 < 10)
    {
        (&DAT_00e9a5a0)[param_1] = param_2;
        (&DAT_00e9a400)[param_1] = param_3;
    }
    return;
}

void FUN_0042c500(void)

{
    DAT_0050c088 = 0;
    return;
}

void FUN_0042c510(undefined_32 param_1, float param_2)

{
    float fVar1;
    float fVar2;
    int iVar3;
    undefined_32 uVar4;
    uint uVar5;
    undefined_8 *puVar6;
    int iVar7;
    float10 fVar8;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    undefined_8 local_c[4];
    undefined_8 local_8[8];

    fVar2 = param_2;
    puVar6 = &DAT_00e9a4a0;
    iVar7 = 0;
    do
    {
        if (fVar2 == 0.0)
        {
            *(undefined_32 *)((int)&DAT_00e9a720 + iVar7) = 0xfffffc18;
            *(undefined_32 *)((int)&DAT_00e9a780 + iVar7) = 0xfffffc18;
        }
        else
        {
            *(undefined_32 *)((int)&DAT_00e9a5e0 + iVar7) = 0xfffffc18;
            *(undefined_32 *)((int)&DAT_00e9a640 + iVar7) = 0xfffffc18;
        }
        if (*(int *)((int)&DAT_00e9a840 + iVar7) != -9999)
        {
            fVar8 = (float10)vec3f_distance(puVar6, &DAT_0050c6e8);
            local_14 = (float)fVar8;
            if (((float10)40.0 < fVar8) && (local_14 < 1500.0))
            {
                if (400.0 <= local_14)
                {
                    local_18 = (1500.0 - local_14) * 255.0 * 0.0009090909;
                }
                else
                {
                    local_18 = 255.0;
                }
                if (128.0 < local_18)
                {
                    local_18 = 128.0;
                }
                iVar3 = FUN_00445690();
                if (iVar3 != 0)
                {
                    local_18 = local_18 * 0.5;
                }
                FUN_0042b710(param_1, puVar6, &local_1c, &param_2, &local_10, local_c, 0);
                if (-4.0 < local_1c)
                {
                    iVar3 = *(int *)((int)&DAT_00e9a840 + iVar7);
                    if (iVar3 < 0)
                    {
                        param_2 = param_2 - 20.0;
                        fVar1 = 8.0;
                    }
                    else
                    {
                        param_2 = param_2 - 13.0;
                        fVar1 = 4.0;
                    }
                    local_1c = local_1c - fVar1;
                    if (((local_1c < (float)DAT_00ec86c4) && (0.0 < param_2)) && (param_2 < (float)DAT_00ec85e8))
                    {
                        if (fVar2 == 0.0)
                        {
                            uVar4 = __ftol();
                            *(undefined_32 *)((int)&DAT_00e9a720 + iVar7) = uVar4;
                            uVar4 = __ftol();
                            *(undefined_32 *)((int)&DAT_00e9a780 + iVar7) = uVar4;
                        }
                        else
                        {
                            uVar4 = __ftol();
                            *(undefined_32 *)((int)&DAT_00e9a5e0 + iVar7) = uVar4;
                            uVar4 = __ftol();
                            *(undefined_32 *)((int)&DAT_00e9a640 + iVar7) = uVar4;
                        }
                        if ((local_10 < 0.0) || (local_10 < *(float *)((int)&DAT_00e9a7e0 + iVar7)))
                        {
                            if (iVar3 < 0)
                            {
                                _sprintf(local_8, s__f1_s_d_004b957c, -iVar3);
                                uVar5 = __ftol(local_8);
                                uVar5 = uVar5 & 0xffffff00 | (uint)(byte)((char)uVar5 + 0x28);
                                uVar4 = 0;
                            }
                            else
                            {
                                uVar4 = lookup_translation(&DAT_004b9584, iVar3);
                                _sprintf(local_8, uVar4);
                                uVar5 = __ftol(local_8);
                                uVar4 = -1;
                            }
                            uVar4 = __ftol(-1, -1, uVar4, uVar5);
                            uVar4 = __ftol(uVar4);
                            FUN_0042c7a0(uVar4);
                        }
                    }
                }
            }
        }
        puVar6 = puVar6 + 0xc;
        iVar7 = iVar7 + 4;
    } while ((int)puVar6 < 0xe9a590);
    return;
}

void FUN_0042c7a0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5, undefined_32 param_6, undefined_32 param_7)

{
    undefined_32 uVar1;

    uVar1 = __ftol(param_3, param_4, param_5, param_6, param_7);
    uVar1 = __ftol(uVar1);
    create_text_entry_0(uVar1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042c800(undefined_32 param_1)

{
    float fVar1;
    uint in_EAX;
    int iVar2;
    undefined_32 uVar3;
    undefined_16 extraout_var;
    uint uVar4;
    undefined_16 extraout_var_00;
    undefined_16 extraout_var_01;
    undefined_16 extraout_var_02;
    undefined_16 extraout_var_03;
    undefined_16 extraout_var_04;
    undefined_16 extraout_var_05;
    undefined_16 extraout_var_06;
    undefined_16 extraout_var_07;
    undefined_8 *puVar5;
    int iVar6;
    int iVar7;
    float *pfVar8;
    float10 fVar9;
    float local_20;
    float local_1c;
    float local_18;
    undefined_32 local_14;
    float local_10;
    float local_c;
    float *local_8;
    float local_4;

    iVar6 = 0;
    do
    {
        sprite_enable_display(in_EAX & 0xffff0000 | (uint) * (ushort *)((int)&DAT_00e9a5a0 + iVar6), 0);
        in_EAX = sprite_enable_display(CONCAT22(extraout_var_00, *(undefined_16 *)((int)&DAT_00e9a400 + iVar6)), 0);
        iVar6 = iVar6 + 4;
    } while (iVar6 < 0x28);
    iVar6 = 0;
    local_8 = (float *)&DAT_00e99d80;
    puVar5 = &DAT_00e99e20;
    iVar7 = 0;
    do
    {
        pfVar8 = local_8;
        (&DAT_00e99ce0)[iVar6] = 0xfffffc18;
        (&DAT_00e99c40)[iVar6] = 0xfffffc18;
        if (*(char *)((int)&DAT_00e9a6e0 + iVar6) != '\0')
        {
            fVar9 = (float10)vec3f_distance(puVar5, &DAT_0050c6e8);
            if (fVar9 < (float10)_DAT_004b9578)
            {
                iVar2 = FUN_00445690();
                local_14 = 0x43000000;
                if (iVar2 == 0)
                {
                    local_14 = 255.0f;
                }
                FUN_0042b710(param_1, puVar5, &local_20, &local_1c, &local_c, &local_10, 0);
                if (0.0 < local_20)
                {
                    if (0.1 < local_10)
                    {
                        local_18 = 100.0 / local_10;
                    }
                    else
                    {
                        local_18 = 1000.0;
                    }
                    if (2.0 < local_18)
                    {
                        local_18 = 2.0;
                    }
                    if (((local_20 < (float)DAT_00ec86c4) && (0.0 < local_1c)) && (local_1c < (float)DAT_00ec85e8))
                    {
                        uVar3 = __ftol();
                        (&DAT_00e99ce0)[iVar6] = uVar3;
                        uVar3 = __ftol();
                        (&DAT_00e99c40)[iVar6] = uVar3;
                        if (((*pfVar8 != -1000.0) && ((local_c < 0.0 || (local_c < *pfVar8))))
                            && (fVar1 = (160.0 - local_20) * 0.3333333, local_4 = fVar1, iVar7 < 0x28))
                        {
                            uVar4 = *(uint *)((int)&DAT_00e9a5a0 + iVar7);
                            if (uVar4 != -1)
                            {
                                sprite_enable_display(
                                    CONCAT22(extraout_var_01, *(undefined_16 *)((int)&DAT_00e9a5a0 + iVar7)), 1);
                                uVar3 = __ftol();
                                uVar3 = __ftol(uVar3);
                                FUN_0042bb00(CONCAT22(extraout_var_05, *(undefined_16 *)((int)&DAT_00e9a5a0 + iVar7)),
                                             uVar3);
                                FUN_00428720(CONCAT22(extraout_var, *(undefined_16 *)((int)&DAT_00e9a5a0 + iVar7)),
                                             fVar1);
                                sprite_scale(CONCAT22(extraout_var_02, *(undefined_16 *)((int)&DAT_00e9a5a0 + iVar7)),
                                             1.0f, 1.0f);
                                uVar3 = __ftol();
                                uVar4 = sprite_set_color(
                                    CONCAT22(extraout_var_06, *(undefined_16 *)((int)&DAT_00e9a5a0 + iVar7)), -1, -1,
                                    -1, uVar3);
                            }
                            if (*(int *)((int)&DAT_00e9a400 + iVar7) != -1)
                            {
                                sprite_enable_display(
                                    uVar4 & 0xffff0000 | (uint) * (ushort *)((int)&DAT_00e9a400 + iVar7), 1);
                                uVar3 = __ftol();
                                uVar3 = __ftol(uVar3);
                                FUN_0042bb00(CONCAT22(extraout_var_03, *(undefined_16 *)((int)&DAT_00e9a400 + iVar7)),
                                             uVar3);
                                FUN_00428720(CONCAT22(extraout_var_07, *(undefined_16 *)((int)&DAT_00e9a400 + iVar7)),
                                             fVar1);
                                sprite_scale((uint)local_18 & 0xffff0000
                                                 | (uint) * (ushort *)((int)&DAT_00e9a400 + iVar7),
                                             local_18, local_18);
                                uVar3 = __ftol();
                                sprite_set_color(
                                    CONCAT22(extraout_var_04, *(undefined_16 *)((int)&DAT_00e9a400 + iVar7)), -1, -1,
                                    -1, uVar3);
                            }
                            iVar7 = iVar7 + 4;
                            pfVar8 = local_8;
                        }
                    }
                }
            }
        }
        puVar5 = puVar5 + 0xc;
        iVar6 = iVar6 + 1;
        local_8 = pfVar8 + 1;
    } while ((int)puVar5 < 0xe9a000);
    return;
}

void FUN_0042cb00(undefined_32 param_1)

{
    undefined_32 uVar1;
    uint uVar2;
    undefined_16 extraout_var;
    undefined_16 extraout_var_00;
    undefined_16 extraout_var_01;
    undefined_16 extraout_var_02;
    undefined_8 *puVar3;
    float *pfVar4;
    int *piVar5;
    int iVar6;
    float10 fVar7;
    float local_10;
    float local_c;
    float local_8;
    undefined_8 local_4[4];

    iVar6 = 0;
    if (0 < DAT_0050c088)
    {
        piVar5 = &DAT_00e9a5a0;
        pfVar4 = (float *)&DAT_00e9a8e0;
        puVar3 = &DAT_00e997c0;
        do
        {
            (&DAT_00e9a8a0)[iVar6] = 0xfffffc18;
            (&DAT_00e9a920)[iVar6] = 0xfffffc18;
            fVar7 = (float10)vec3f_distance(puVar3, &DAT_0050c6e8);
            if ((((fVar7 < (float10)1500.0)
                  && (FUN_0042b710(param_1, puVar3, &local_c, &local_10, &local_8, local_4, 0), -4.0 < local_c))
                 && (local_c < (float)DAT_00ec86c4))
                && ((0.0 < local_10 && (local_10 < (float)DAT_00ec85e8))))
            {
                uVar1 = __ftol();
                (&DAT_00e9a8a0)[iVar6] = uVar1;
                uVar1 = __ftol();
                (&DAT_00e9a920)[iVar6] = uVar1;
                if (((local_8 < 0.0) || (local_8 < *pfVar4)) && (*piVar5 != -1))
                {
                    sprite_enable_display(CONCAT22(extraout_var_01, *(undefined_16 *)piVar5), 1);
                    uVar1 = __ftol();
                    uVar2 = __ftol(uVar1);
                    FUN_0042bb00(uVar2 & 0xffff0000 | (uint) * (ushort *)piVar5, uVar2);
                    FUN_00428720(CONCAT22(extraout_var_00, *(undefined_16 *)piVar5), 0);
                    sprite_scale(CONCAT22(extraout_var_02, *(undefined_16 *)piVar5), 1.0f, 1.0f);
                    sprite_set_color(CONCAT22(extraout_var, *(undefined_16 *)piVar5), -1, -1, -1, -1);
                }
            }
            iVar6 = iVar6 + 1;
            puVar3 = puVar3 + 0xc;
            pfVar4 = pfVar4 + 1;
            piVar5 = piVar5 + 1;
        } while (iVar6 < DAT_0050c088);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// Looks suspiciously like Occlusion-Queries.c sub_433D60 from swep1-re
void FUN_0042cca0(float param_1)

{
    byte *pbVar1;
    float fVar2;
    bool bVar3;
    char cVar4;
    float fVar5;
    int iVar6;
    int iVar7;
    uint uVar8;
    undefined_32 uVar9;
    undefined_16 extraout_var;
    undefined_16 extraout_var_00;
    uint extraout_ECX;
    uint extraout_ECX_00;
    undefined_16 extraout_var_01;
    undefined_16 extraout_var_02;
    undefined_16 extraout_var_03;
    undefined_16 extraout_var_04;
    undefined_16 uVar10;
    int iVar11;
    float *pfVar12;
    int *piVar13;
    float *pfVar14;
    ulonglong uVar15;
    ulonglong uVar16;
    float local_3c;
    float local_38;
    int local_34;
    float local_30;
    int *local_2c;
    int local_28;
    float local_24;
    float local_20;
    undefined_32 local_1c;
    float *local_18;
    int local_14;
    int local_10;
    int local_c;
    undefined_8 local_8[4];
    undefined_8 local_4[4];

    iVar6 = (int)param_1;
    if (DAT_004b9520 != '\0')
    {
        FUN_00431c40(&local_28, &local_14, &local_10, local_4, local_8);
        switch (local_28)
        {
        case 1:
            local_30 = DAT_004b94b0;
            break;
        case 2:
            local_30 = DAT_004b94b4;
            break;
        case 3:
            local_30 = DAT_004b94bc;
            break;
        case 4:
            local_30 = DAT_004b94b8;
        }
        local_34 = 0;
        if (0 < (int)DAT_004b9534)
        {
            local_18 = (float *)&DAT_00e9a000;
            local_2c = &DAT_00e9a280;
            pfVar14 = (float *)&DAT_00e99868;
            do
            {
                pfVar12 = local_18;
                piVar13 = local_2c;
                if (*local_2c != -1)
                {
                    if ((&DAT_00e9a960)[local_34] == '\0')
                    {
                        sprite_enable_display(DAT_004b9534 & 0xffff0000 | (uint) * (ushort *)local_2c, 0);
                        iVar7 = rand();
                        fVar5 = _DAT_0050c6f0;
                        fVar2 = _DAT_0050c6ec;
                        if (0.7 < (float)iVar7 * 4.656613e-10)
                        {
                            pfVar14[-2] = _DAT_0050c6e8;
                            pfVar14[-1] = fVar2;
                            (&DAT_00e9a960)[local_34] = 1;
                            *pfVar14 = fVar5;
                            iVar7 = rand();
                            pfVar14[-2] =
                                ((float)iVar7 * 4.656613e-10 * 800.0 - 400.0) * *(float *)(iVar6 + 0x70) + pfVar14[-2];
                            iVar7 = rand();
                            pfVar14[-1] =
                                ((float)iVar7 * 4.656613e-10 * 800.0 - 400.0) * *(float *)(iVar6 + 0x74) + pfVar14[-1];
                            iVar7 = rand();
                            *pfVar14 =
                                ((float)iVar7 * 4.656613e-10 * 800.0 - 400.0) * *(float *)(iVar6 + 0x78) + *pfVar14;
                            iVar7 = rand();
                            fVar2 = (float)iVar7 * 4.656613e-10 * 340.0 - -10.0;
                            pfVar14[-2] = *(float *)(iVar6 + 0x80) * fVar2 + pfVar14[-2];
                            pfVar14[-1] = *(float *)(iVar6 + 0x84) * fVar2 + pfVar14[-1];
                            *pfVar14 = *(float *)(iVar6 + 0x88) * fVar2 + *pfVar14;
                            iVar7 = rand();
                            pfVar14[-2] =
                                ((float)iVar7 * 4.656613e-10 * 190.0 - -10.0) * *(float *)(iVar6 + 0x90) + pfVar14[-2];
                            iVar7 = rand();
                            pfVar14[-1] =
                                ((float)iVar7 * 4.656613e-10 * 190.0 - -10.0) * *(float *)(iVar6 + 0x94) + pfVar14[-1];
                            iVar7 = rand();
                            fVar2 = *(float *)(iVar6 + 0x98);
                            *pfVar12 = -1.0;
                            pfVar12[1] = -1.0;
                            *pfVar14 = ((float)iVar7 * 4.656613e-10 * 190.0 - -10.0) * fVar2 + *pfVar14;
                        }
                    }
                    else
                    {
                        fVar2 = _DAT_004b9528 * (float)_DAT_00e22a40;
                        *pfVar14 = *pfVar14 - _DAT_004b952c * (float)_DAT_00e22a40;
                        pfVar14[-2] = pfVar14[-2] - fVar2;
                    }
                    if ((&DAT_00e9a960)[local_34] != '\0')
                    {
                        if ((&DAT_00e9a960)[local_34] == '\x02')
                        {
                            (&DAT_00e9a960)[local_34] = 0;
                        }
                        FUN_0042b710(iVar6, pfVar14 + -2, &local_3c, &local_38, &local_24, &local_20, 0);
                        if ((((local_3c <= 0.0) || (local_38 <= 0.0)) || ((float)DAT_00ec86c4 <= local_3c))
                            || ((float)DAT_00ec85e8 <= local_38))
                        {
                            uVar8 = -DAT_00ec86c4 & 0xffff0000;
                            if (((local_3c < (float)-DAT_00ec86c4)
                                 || (bVar3 = (float)(DAT_00ec86c4 * 2) < local_3c,
                                     uVar8 = (uint)CONCAT21((short)(uVar8 >> 0x10), bVar3) << 8, bVar3))
                                || (bVar3 = (float)(DAT_00ec85e8 * 2) < local_38,
                                    uVar8 = (uint)CONCAT21((short)((uint)(DAT_00ec85e8 * 2) >> 0x10), bVar3) << 8,
                                    bVar3))
                            {
                                (&DAT_00e9a960)[local_34] = 0;
                            }
                        }
                        else
                        {
                            iVar7 = __ftol();
                            iVar7 = local_14 * iVar7 + local_10;
                            uVar8 = __ftol();
                            fVar2 = 0.0;
                            if (0 < local_28)
                            {
                                iVar7 = local_28 + iVar7 + uVar8;
                                uVar8 = local_28 * 8;
                                iVar11 = local_28;
                                do
                                {
                                    cVar4 = (char)uVar8;
                                    pbVar1 = (byte *)(iVar7 + -1);
                                    uVar8 = uVar8 - 8;
                                    iVar7 = iVar7 + -1;
                                    iVar11 = iVar11 + -1;
                                    fVar2 = fVar2 + (float)((uint)*pbVar1 << (cVar4 - 8U & 0x1f));
                                    pfVar12 = local_18;
                                } while (iVar11 != 0);
                            }
                            uVar8 = uVar8 & 0xffff0000;
                            piVar13 = local_2c;
                            if ((0.0 < local_24) && (fVar2 * local_30 < local_24))
                            {
                                (&DAT_00e9a960)[local_34] = 2;
                            }
                        }
                        param_1 = 100.0;
                        if (0.01 < local_20)
                        {
                            param_1 = 100.0 / local_20;
                        }
                        if (param_1 < 0.01)
                        {
                            param_1 = 0.01;
                        }
                        param_1 = param_1 * 0.15;
                        if (_DAT_004b952c <= 100.0)
                        {
                            if (_DAT_004b952c <= 300.0)
                            {
                                if (0.15 < param_1)
                                {
                                    param_1 = 0.15;
                                }
                            }
                            else if (0.1 < param_1)
                            {
                                param_1 = 0.1;
                            }
                        }
                        else if (0.04 < param_1)
                        {
                            param_1 = 0.04;
                        }
                        local_18 = (float *)((uint)local_18 & 0xffff0000 | (uint)(ushort)(short)DAT_004b9527);
                        sprite_enable_display(uVar8 & 0xffff0000 | (uint) * (ushort *)piVar13, 1);
                        uVar9 = __ftol();
                        uVar9 = __ftol(uVar9);
                        FUN_0042bb00(CONCAT22(extraout_var, *(undefined_16 *)piVar13), uVar9);
                        if (0.0 <= *pfVar12)
                        {
                            local_1c = __ftol();
                            local_2c = (int *)__ftol();
                            local_c = __ftol();
                            uVar8 = __ftol();
                            if ((local_c < 3) && ((int)uVar8 < 3))
                            {
                                FUN_00428800(uVar8 & 0xffff0000 | (uint) * (ushort *)piVar13, 0x4000);
                                uVar10 = extraout_var_03;
                            }
                            else
                            {
                                FUN_0042d330(uVar8 & 0xffff0000 | (uint) * (ushort *)piVar13, local_1c, local_2c);
                                FUN_004287e0(CONCAT22(extraout_var_00, *(undefined_16 *)piVar13), 0x4000);
                                uVar10 = extraout_var_04;
                            }
                        }
                        else
                        {
                            sprite_enable_display(CONCAT22(extraout_var_01, *(undefined_16 *)piVar13), 0);
                            uVar10 = extraout_var_02;
                        }
                        sprite_scale(CONCAT22(uVar10, *(undefined_16 *)piVar13), param_1, param_1);
                        uVar15 = FUN_00445690();
                        uVar16 = uVar15 & 0xffffffff00000000 | ZEXT48(local_18);
                        uVar8 = extraout_ECX;
                        if ((int)uVar15 != 0)
                        {
                            uVar16 = __ftol();
                            uVar8 = extraout_ECX_00;
                        }
                        sprite_set_color(_DAT_004b9524 & 0xffff0000 | (uint) * (ushort *)piVar13, _DAT_004b9524,
                                         (uint)(uVar16 >> 0x20) & 0xffffff00 | _DAT_004b9524 >> 8 & 0xff,
                                         uVar8 & 0xffffff00 | _DAT_004b9524 >> 0x10 & 0xff, (int)uVar16);
                        *pfVar12 = local_3c;
                        pfVar12[1] = local_38;
                    }
                }
                local_34 = local_34 + 1;
                pfVar14 = pfVar14 + 3;
                local_2c = piVar13 + 1;
                local_18 = pfVar12 + 2;
            } while (local_34 < (int)DAT_004b9534);
        }
        FUN_00431cd0();
    }
    return;
}

void FUN_0042d330(undefined_32 param_1)

{
    undefined_32 uVar1;

    uVar1 = __ftol();
    uVar1 = __ftol(uVar1);
    FUN_004286c0(param_1, uVar1);
    return;
}

void FUN_0042d380(void)

{
    uint in_EAX;
    int *piVar1;
    int iVar2;

    iVar2 = 0;
    piVar1 = &DAT_00e9a280;
    do
    {
        if (*piVar1 != -1)
        {
            in_EAX = sprite_enable_display(in_EAX & 0xffff0000 | (uint) * (ushort *)piVar1, 0);
        }
        (&DAT_00e9a960)[iVar2] = 0;
        piVar1 = piVar1 + 1;
        iVar2 = iVar2 + 1;
    } while ((int)piVar1 < 0xe9a3c0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042d3c0(undefined_32 param_1, undefined_32 param_2)

{
    _DAT_004b9528 = param_1;
    _DAT_004b952c = param_2;
    return;
}

void FUN_0042d3e0(undefined_8 param_1, undefined_8 param_2, undefined_8 param_3, undefined_8 param_4)

{
    DAT_004b9524 = param_1;
    DAT_004b9525 = param_2;
    DAT_004b9526 = param_3;
    DAT_004b9527 = param_4;
    return;
}

void FUN_0042d410(int param_1)

{
    DAT_004b9534 = 0x50;
    if (param_1 < 0x51)
    {
        DAT_004b9534 = param_1;
    }
    FUN_0042d380();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042d430(undefined_32 param_1)

{
    _DAT_004b9530 = param_1;
    return;
}

void FUN_0042d440(void)

{
    DAT_004b9520 = 0;
    FUN_0042d380();
    return;
}

void FUN_0042d450(void)

{
    DAT_004b9520 = 1;
    return;
}

void FUN_0042d460(int param_1, undefined_32 param_2)

{
    (&DAT_00e9a280)[param_1] = param_2;
    return;
}

void FUN_0042d470(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = (undefined_32 *)&DAT_00e9a960;
    MEMSET(iVar1, puVar2, 0, 0x14)
    puVar2 = &DAT_00e9a280;
    MEMSET(iVar1, puVar2, -1, 0x50)
    return;
}

void FUN_0042d490(undefined_32 param_1, undefined_32 param_2)

{
    if (DAT_004b94c0 != 0)
    {
        FUN_0042c1a0(param_1);
        FUN_0042c800(param_1);
        FUN_0042cb00(param_1);
        FUN_0042cca0(param_1);
        FUN_0042c510(param_1, param_2);
        return;
    }
    DAT_0050c088 = 0;
    FUN_0042c510(param_1, param_2);
    return;
}

void thunk_FUN_0042be60(void)

{
    char cVar1;
    float fVar2;
    short *psVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    char *pcVar7;
    int iStack_30;
    short *psStack_2c;
    int iStack_28;
    float *pfStack_24;
    int iStack_20;
    int iStack_1c;
    int iStack_18;
    int iStack_14;
    int iStack_10;
    short *psStack_c;
    undefined_8 auStack_8[4];
    float fStack_4;

    FUN_00431c40(&iStack_20, &iStack_28, &psStack_2c, &fStack_4, auStack_8);
    psStack_c = (short *)(iStack_28 * DAT_00ec85e8 + (int)psStack_2c);
    pfStack_24 = NULL;
    do
    {
        if (-1 < *(int *)((int)&DAT_004b94c8 + (int)pfStack_24))
        {
            iVar5 = *(int *)((int)&DAT_00e9a480 + (int)pfStack_24);
            if (iVar5 < -500)
            {
                *(undefined_32 *)((int)&DAT_00e9a3c0 + (int)pfStack_24) = 0x32;
            }
            else
            {
                iStack_30 = 0;
                iStack_1c = -iVar5 + 0xc;
                iStack_18 = DAT_00ec86c4 + -8 + -iVar5;
                iStack_10 = -*(int *)((int)&DAT_00e9a488 + (int)pfStack_24);
                iStack_14 = iStack_10 + 0xc;
                iStack_10 = DAT_00ec85e8 + -8 + iStack_10;
                psVar3 = (short *)((int)psStack_2c + (iVar5 + -4) * iStack_20
                                   + (*(int *)((int)&DAT_00e9a488 + (int)pfStack_24) + -4) * iStack_28);
                iVar5 = 0;
                do
                {
                    iVar4 = 0;
                    do
                    {
                        if (((((iVar4 < iStack_1c) || (iStack_18 <= iVar4)) || (iVar5 < iStack_14))
                             || (iStack_10 <= iVar5))
                            || (((psStack_2c <= psVar3 && (psVar3 < psStack_c))
                                 && (((iStack_20 == 1 && (*(char *)psVar3 != -1))
                                      || ((iStack_20 == 2 && (*psVar3 != -1))))))))
                        {
                            iStack_30 = iStack_30 + 1;
                        }
                        psVar3 = (short *)((int)psVar3 + iStack_20);
                        iVar4 = iVar4 + 1;
                    } while (iVar4 < 8);
                    psVar3 = (short *)((int)psVar3 + iStack_28 + iStack_20 * -8);
                    iVar5 = iVar5 + 1;
                } while (iVar5 < 8);
                *(int *)((int)&DAT_00e9a3c0 + (int)pfStack_24) = iStack_30;
            }
        }
        pfStack_24 = (float *)((int)pfStack_24 + 4);
    } while ((int)pfStack_24 < 8);
    switch (iStack_20)
    {
    case 1:
        fStack_4 = DAT_004b94b0;
        break;
    case 2:
        fStack_4 = DAT_004b94b4;
        break;
    case 3:
        fStack_4 = DAT_004b94bc;
        break;
    case 4:
        fStack_4 = DAT_004b94b8;
    }
    iVar5 = 0;
    do
    {
        *(undefined_32 *)((int)&DAT_00e9a7e0 + iVar5) = 0xc47a0000;
        if (-1 < *(int *)((int)&DAT_00e9a720 + iVar5))
        {
            fVar2 = 0.0;
            if (0 < iStack_20)
            {
                pcVar7 = (char *)((int)psStack_2c + iStack_20 + iStack_20 * *(int *)((int)&DAT_00e9a720 + iVar5)
                                  + *(int *)((int)&DAT_00e9a780 + iVar5) * iStack_28);
                iVar4 = iStack_20 * 8;
                iVar6 = iStack_20;
                do
                {
                    cVar1 = (char)iVar4;
                    iVar4 = iVar4 + -8;
                    psStack_c = (short *)((uint)(byte)pcVar7[-1] << (cVar1 - 8U & 0x1f));
                    pcVar7 = pcVar7 + -1;
                    iVar6 = iVar6 + -1;
                    fVar2 = fVar2 + (float)(int)psStack_c;
                } while (iVar6 != 0);
            }
            *(float *)((int)&DAT_00e9a7e0 + iVar5) = fVar2 * fStack_4;
        }
        iVar5 = iVar5 + 4;
    } while (iVar5 < 0x50);
    iVar5 = 0;
    pfStack_24 = (float *)&DAT_00e99d80;
    do
    {
        if (*(char *)((int)&DAT_00e9a6e0 + iVar5) != '\0')
        {
            iVar4 = (&DAT_00e99ce0)[iVar5];
            *pfStack_24 = -1000.0;
            if (-1 < iVar4)
            {
                fVar2 = 0.0;
                if (0 < iStack_20)
                {
                    pcVar7 =
                        (char *)((int)psStack_2c + iStack_20 + iStack_20 * iVar4 + (&DAT_00e99c40)[iVar5] * iStack_28);
                    iVar4 = iStack_20 * 8;
                    iVar6 = iStack_20;
                    do
                    {
                        cVar1 = (char)iVar4;
                        iVar4 = iVar4 + -8;
                        psStack_c = (short *)((uint)(byte)pcVar7[-1] << (cVar1 - 8U & 0x1f));
                        pcVar7 = pcVar7 + -1;
                        iVar6 = iVar6 + -1;
                        fVar2 = fVar2 + (float)(int)psStack_c;
                    } while (iVar6 != 0);
                }
                *pfStack_24 = fVar2 * fStack_4;
            }
        }
        pfStack_24 = pfStack_24 + 1;
        iVar5 = iVar5 + 1;
    } while ((int)pfStack_24 < 0xe99e20);
    iVar5 = 0;
    if (0 < DAT_0050c088)
    {
        pfStack_24 = (float *)&DAT_00e9a8e0;
        do
        {
            iVar4 = (&DAT_00e9a8a0)[iVar5];
            *pfStack_24 = -1000.0;
            if (-1 < iVar4)
            {
                fVar2 = 0.0;
                if (0 < iStack_20)
                {
                    pcVar7 =
                        (char *)((int)psStack_2c + iStack_20 + iStack_20 * iVar4 + (&DAT_00e9a920)[iVar5] * iStack_28);
                    iVar4 = iStack_20 * 8;
                    iVar6 = iStack_20;
                    do
                    {
                        cVar1 = (char)iVar4;
                        iVar4 = iVar4 + -8;
                        psStack_c = (short *)((uint)(byte)pcVar7[-1] << (cVar1 - 8U & 0x1f));
                        pcVar7 = pcVar7 + -1;
                        iVar6 = iVar6 + -1;
                        fVar2 = fVar2 + (float)(int)psStack_c;
                    } while (iVar6 != 0);
                }
                *pfStack_24 = fVar2 * fStack_4;
            }
            iVar5 = iVar5 + 1;
            pfStack_24 = pfStack_24 + 1;
        } while (iVar5 < DAT_0050c088);
    }
    FUN_00431cd0();
    return;
}

// 0042d500
void __setargv(void)

{
    DAT_004b94c0 = 1;
    return;
}

void FUN_0042d510(void)

{
    DAT_004b94c0 = 0;
    return;
}

// 0042d520
void model_decompressor(char *param_1, char *param_2)

{
    char cVar1;
    char cVar2;
    bool bVar3;
    char *pcVar4;
    int iVar5;
    char *pcVar6;
    short sVar7;
    int iVar8;
    uint uVar9;
    int iVar10;

    uVar9 = 1;
    bVar3 = false;
    pcVar6 = param_1;
    do
    {
        cVar1 = *pcVar6;
        pcVar6 = pcVar6 + 1;
        sVar7 = 0;
        do
        {
            if (((int)cVar1 & 1 << ((byte)sVar7 & 0x1f)) == 0)
            {
                cVar2 = *pcVar6;
                pcVar4 = pcVar6 + 1;
                pcVar6 = pcVar6 + 2;
                iVar5 = (int)*pcVar4 + ((int)cVar2 & 0xfU) * 0x100;
                if (iVar5 == 0)
                {
                    bVar3 = true;
                    break;
                }
                iVar8 = ((int)cVar2 >> 4) + 1;
                iVar10 = 0;
                pcVar4 = param_2;
                if (-1 < iVar8)
                {
                    do
                    {
                        param_2 = pcVar4 + 1;
                        cVar2 = param_1[(iVar5 + iVar10 & 0xfffU) - 0x1000];
                        *pcVar4 = cVar2;
                        param_1[uVar9 - 0x1000] = cVar2;
                        uVar9 = uVar9 + 1 & 0xfff;
                        iVar10 = iVar10 + 1;
                        pcVar4 = param_2;
                    } while (iVar10 <= iVar8);
                }
            }
            else
            {
                cVar2 = *pcVar6;
                pcVar6 = pcVar6 + 1;
                *param_2 = cVar2;
                param_2 = param_2 + 1;
                param_1[uVar9 - 0x1000] = cVar2;
                uVar9 = uVar9 + 1 & 0xfff;
            }
            sVar7 = sVar7 + 1;
        } while (sVar7 < 8);
        if (bVar3)
        {
            return;
        }
    } while (true);
}

//----- (0042D600) --------------------------------------------------------
undefined_8 *level_data_get_file(undefined_32 param_1)

{
    switch (param_1)
    {
    case 0:
        return &DAT_0050c098;
    case 1:
        return &DAT_0050c08c;
    case 2:
        return &DAT_0050c090;
    case 3:
        return &DAT_0050c094;
    default:
        return NULL;
    }
}

//----- (0042D640) --------------------------------------------------------
void level_data_read(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    undefined_32 *puVar1;

    puVar1 = (undefined_32 *)level_data_get_file(param_1);
    fseek(*puVar1, param_2, 0 /*SEEK_SET*/);
    fread_locked(param_3, param_4, 1, *puVar1);
    return;
}

//----- (0042D680) --------------------------------------------------------
void level_data_open(undefined_8 *param_1)

{
    int *piVar1;
    int iVar2;
    undefined_8 *puVar3;

    puVar3 = param_1;
    switch (param_1)
    {
    case NULL:
        puVar3 = PTR_s_data_lev01_out_modelblock_bin_004b9598;
        break;
    case (undefined_8 *)0x1:
        puVar3 = PTR_s_data_lev01_out_spriteblock_bin_004b958c;
        break;
    case (undefined_8 *)0x2:
        puVar3 = PTR_s_data_lev01_out_splineblock_bin_004b9590;
        break;
    case (undefined_8 *)0x3:
        puVar3 = PTR_s_data_lev01_out_textureblock_bin_004b9594;
    }
    piVar1 = (int *)level_data_get_file(param_1);
    if (*piVar1 == 0)
    {
        iVar2 = _fopen(puVar3, &DAT_004b5c4c /* "rb" */);
        *piVar1 = iVar2;
        if (iVar2 == 0)
        {
            do
            {
                // WARNING: Do nothing block with infinite loop
            } while (true);
        }
    }
    return;
}

//----- (0042D6F0) --------------------------------------------------------
void level_data_close(undefined_32 param_1)

{
    undefined_32 *puVar1;

    puVar1 = (undefined_32 *)level_data_get_file(param_1);
    fclose(*puVar1);
    *puVar1 = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042d720(void)

{
    int iVar1;
    undefined_8 **ppuVar2;
    undefined_32 local_4;

    iVar1 = 0;
    local_4 = 0;
    if (0 < DAT_004bf91c)
    {
        ppuVar2 = &PTR_DAT_004bf920;
        do
        {
            FUN_00445ee0(3, 0, 0x40, 0x80, 0x40, 0x80, ppuVar2, &local_4, 1, 0);
            iVar1 = iVar1 + 1;
            ppuVar2 = ppuVar2 + 1;
        } while (iVar1 < DAT_004bf91c);
    }
    iVar1 = 0;
    if (0 < DAT_004bf7e4)
    {
        ppuVar2 = &PTR_DAT_004bf7e8;
        do
        {
            FUN_00445ee0(3, 0, 0x40, 0x80, 0x40, 0x80, ppuVar2, &local_4, 1, 0);
            iVar1 = iVar1 + 1;
            ppuVar2 = ppuVar2 + 1;
        } while (iVar1 < DAT_004bf7e4);
    }
    iVar1 = 0;
    if (0 < DAT_004bf84c)
    {
        ppuVar2 = &PTR_DAT_004bf850;
        do
        {
            FUN_00445ee0(3, 0, 0x40, 0x80, 0x40, 0x80, ppuVar2, &local_4, 1, 0);
            iVar1 = iVar1 + 1;
            ppuVar2 = ppuVar2 + 1;
        } while (iVar1 < DAT_004bf84c);
    }
    iVar1 = 0;
    if (0 < DAT_004bf8b4)
    {
        ppuVar2 = &PTR_DAT_004bf8b8;
        do
        {
            FUN_00445ee0(3, 0, 0x40, 0x80, 0x40, 0x80, ppuVar2, &local_4, 1, 0);
            iVar1 = iVar1 + 1;
            ppuVar2 = ppuVar2 + 1;
        } while (iVar1 < DAT_004bf8b4);
    }
    iVar1 = 0;
    if (0 < DAT_004bf984)
    {
        ppuVar2 = &PTR_DAT_004bf988;
        do
        {
            FUN_00445ee0(3, 0, 0x40, 0x80, 0x40, 0x80, ppuVar2, &local_4, 1, 0);
            iVar1 = iVar1 + 1;
            ppuVar2 = ppuVar2 + 1;
        } while (iVar1 < DAT_004bf984);
    }
    DAT_0050c0c0 = 7;
    DAT_00e99720 = &DAT_004bf918;
    _DAT_00e99724 = &DAT_004bf8b0;
    _DAT_00e99728 = &DAT_004bf848;
    _DAT_00e9972c = &DAT_004bf8b0;
    _DAT_00e99730 = &DAT_004bf980;
    _DAT_00e99734 = &DAT_004bf918;
    DAT_00e99738 = &DAT_004bf7e0;
    DAT_0050c0c4 = &DAT_004bf918;
    return;
}

void FUN_0042d8d0(short param_1)

{
    if (DAT_0050c0c0 <= param_1)
    {
        param_1 = (short)DAT_0050c0c0 + -1;
    }
    if (param_1 < 0)
    {
        param_1 = 0;
    }
    DAT_0050c0c4 = (&DAT_00e99720)[param_1];
    return;
}

void FUN_0042d900(undefined_32 param_1)

{
    FUN_0042d8d0(param_1);
    return;
}

void FUN_0042d910(undefined_16 param_1, undefined_16 param_2)

{
    DAT_0050c0b8._0_2_ = param_1;
    DAT_0050c0b8._2_2_ = param_2;
    return;
}

void FUN_0042d930(undefined_16 *param_1, undefined_16 *param_2)

{
    *param_1 = (undefined_16)DAT_0050c0b8;
    *param_2 = DAT_0050c0b8._2_2_;
    return;
}

void FUN_0042d950(undefined_8 param_1, undefined_8 param_2, undefined_8 param_3, undefined_8 param_4)

{
    DAT_004bfa0c = param_1;
    DAT_004bfa0d = param_2;
    DAT_004bfa0e = param_3;
    DAT_004bfa0f = param_4;
    DAT_00e99764 = 0;
    return;
}

// WARNING: Could not reconcile some variable overlaps
// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042d990(short param_1, short param_2, short param_3, short param_4, short param_5, short param_6,
                  short param_7, short param_8)

{
    short sVar1;
    float fVar2;
    float fVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    float local_18;
    float local_14;
    float local_10;

    sVar1 = DAT_0050c0a8;
    local_14 = (float)DAT_00ec86c4 * 0.003125;
    local_18 = (float)DAT_00ec85e8 * 0.004166667;
    if (local_14 < 1.0)
    {
        local_14 = 1.0;
    }
    if (local_18 < 1.0)
    {
        local_18 = 1.0;
    }
    if (DAT_0050c0a8 < DAT_0050c0a0)
    {
        DAT_0050c0a0 = __ftol();
        DAT_0050c09c = __ftol();
        DAT_0050c0a8 = __ftol();
    }
    else
    {
        if (local_14 * (float)(int)(short)(param_1 - param_3) < (float)(int)DAT_0050c0a0)
        {
            DAT_0050c0a0 = __ftol();
        }
        if (local_18 * (float)(int)(short)(param_2 - param_4) < (float)(int)DAT_0050c09c)
        {
            DAT_0050c09c = __ftol();
        }
        if ((float)(int)sVar1 < local_14 * (float)(int)(short)(param_5 + (param_1 - param_3)))
        {
            DAT_0050c0a8 = __ftol();
        }
        if (local_18 * (float)(int)(short)(param_6 + (param_2 - param_4)) <= (float)(int)DAT_0050c0a4)
            goto LAB_0042dbb4;
    }
    DAT_0050c0a4 = __ftol();
LAB_0042dbb4:
    local_10 = (float)(int)param_7 * 0.015625;
    _param_5 = (float)((int)param_5 + (int)param_7) * 0.015625;
    _param_6 = (float)(int)param_8 * 0.0078125;
    _param_8 = (float)((int)param_6 + (int)param_8) * 0.0078125;
    if (DAT_0050c0ac == '\0')
    {
        local_14 = (float)__ftol();
        _param_3 = __ftol();
        _param_1 = __ftol();
        iVar4 = __ftol();
    }
    else
    {
        local_14 = (float)__ftol();
        _param_3 = __ftol();
        _param_1 = __ftol();
        iVar4 = __ftol();
    }
    if (DAT_0050c0b0 != '\0')
    {
        iVar6 = (int)local_14._0_2_;
        if (DAT_00e99758 < iVar6)
        {
            return;
        }
        iVar5 = (int)param_3;
        if (DAT_00e9975c < iVar5)
        {
            return;
        }
        iVar7 = (int)param_1;
        if (iVar7 < DAT_00e99750)
        {
            return;
        }
        iVar8 = (int)(short)iVar4;
        if (iVar8 < DAT_00e99754)
        {
            return;
        }
        if (iVar6 < DAT_00e99750)
        {
            local_14 = (float)((int)local_14 + (DAT_00e99750 - iVar6));
            local_10 = (float)(DAT_00e99750 - iVar6) + local_10;
        }
        if (iVar5 < DAT_00e99754)
        {
            _param_3 = _param_3 + (DAT_00e99754 - iVar5);
            _param_6 = (float)(DAT_00e99754 - iVar5) + _param_6;
        }
        if (DAT_00e99758 < iVar7)
        {
            _param_1 = _param_1 - (iVar7 - DAT_00e99758);
            _param_5 = _param_5 - (float)(iVar7 - DAT_00e99758);
        }
        if (DAT_00e9975c < iVar8)
        {
            iVar4 = iVar4 - (iVar8 - DAT_00e9975c);
            _param_8 = _param_8 - (float)(iVar8 - DAT_00e9975c);
        }
    }
    fVar3 = _param_6;
    fVar2 = _param_5;
    if (_DAT_0050c0c8 == 0xbf)
    {
        _param_5 = local_10;
        local_10 = fVar2;
        _param_6 = _param_8;
        _param_8 = fVar3;
    }
    FUN_004329c0(local_14, _param_3, _param_1, iVar4, local_10, _param_6, _param_5, _param_8);
    return;
}

void FUN_0042ddf0(int param_1, int param_2)

{
    if (param_2 < *(int *)(param_1 + 4))
    {
        FUN_00432190(*(undefined_32 *)(param_1 + 8 + param_2 * 4), 1, 1);
    }
    return;
}

void FUN_0042de10(undefined_32 param_1, int param_2)

{
    FUN_0042de30(param_1, (&DAT_00e99720)[param_2]);
    return;
}

int FUN_0042de30(int param_1, uint param_2)

{
    char cVar1;
    bool bVar2;
    int iVar3;
    int iVar4;
    byte bVar5;
    int iVar6;
    int iVar7;
    int local_8;
    uint local_4;

    iVar3 = param_2;
    local_8 = 0;
    bVar2 = false;
    iVar7 = 0;
    do
    {
        bVar5 = *(byte *)(iVar7 + param_1);
        if (bVar5 == 0)
        {
            bVar2 = true;
        }
        if (bVar5 == 0x7e)
        {
            cVar1 = *(char *)(iVar7 + 1 + param_1);
            iVar7 = iVar7 + 1;
            if (cVar1 == 'n')
            {
                bVar2 = true;
            }
            else
            {
                bVar5 = (cVar1 != '~') - 1U & 0x7e;
            }
        }
        if ((bVar5 != 0) && (!bVar2))
        {
            param_2 = (uint)bVar5;
            if (bVar5 == 0x5f)
            {
                bVar5 = 0x20;
                param_2 = 0x20;
            }
            if (((0x60 < bVar5) && (bVar5 < 0x7b)) && (*(byte *)(iVar3 + 0x5b) < 0x61))
            {
                bVar5 = bVar5 - 0x20;
                param_2 = (uint)bVar5;
            }
            iVar4 = 0;
            if (((0x96 < bVar5) && (*(int *)(iVar3 + 0x60) != 0)) && ((&DAT_004bf9c2)[param_2] != 0xff))
            {
                iVar6 = (uint)(byte)(&DAT_004bf9c2)[param_2] * 2;
                local_4 = (uint)(byte)(&DAT_004bfa10)[iVar6];
                bVar5 = (&DAT_004bfa11)[iVar6];
                param_2 = (uint)bVar5;
                if (bVar5 == 0xff)
                {
                    iVar4 = local_4 * 0x10 + *(int *)(iVar3 + 0x60);
                    bVar5 = 0;
                    param_2 = 0;
                }
            }
            if (((*(int *)(iVar3 + 0x5c) != 0) && (*(byte *)(iVar3 + 0x5a) <= bVar5))
                && (bVar5 < *(byte *)(iVar3 + 0x5b) || bVar5 == *(byte *)(iVar3 + 0x5b)))
            {
                iVar4 = (param_2 - *(byte *)(iVar3 + 0x5a)) * 0x10 + *(int *)(iVar3 + 0x5c);
            }
            if (iVar4 != 0)
            {
                local_8 = local_8 + *(short *)(iVar4 + 2);
            }
        }
        iVar7 = iVar7 + 1;
    } while (!bVar2);
    return local_8;
}

int FUN_0042df70(int param_1, uint param_2)

{
    char cVar1;
    bool bVar2;
    int iVar3;
    int iVar4;
    byte bVar5;
    int iVar6;
    int iVar7;
    int local_c;
    int local_8;
    uint local_4;

    iVar3 = param_2;
    local_c = 0;
    local_8 = 0;
    bVar2 = false;
    iVar7 = 0;
    do
    {
        bVar5 = *(byte *)(iVar7 + param_1);
        if (bVar5 == 0)
        {
            bVar2 = true;
        }
        if (bVar5 == 0x7e)
        {
            cVar1 = *(char *)(iVar7 + 1 + param_1);
            iVar7 = iVar7 + 1;
            if (cVar1 == 'n')
            {
                bVar2 = true;
            }
            else
            {
                bVar5 = (cVar1 != '~') - 1U & 0x7e;
            }
        }
        if ((bVar5 != 0) && (!bVar2))
        {
            param_2 = (uint)bVar5;
            if (bVar5 == 0x5f)
            {
                bVar5 = 0x20;
                param_2 = 0x20;
            }
            if (((0x60 < bVar5) && (bVar5 < 0x7b)) && (*(byte *)(iVar3 + 0x5b) < 0x61))
            {
                bVar5 = bVar5 - 0x20;
                param_2 = (uint)bVar5;
            }
            iVar4 = 0;
            if (((0x96 < bVar5) && (*(int *)(iVar3 + 0x60) != 0)) && ((&DAT_004bf9c2)[param_2] != 0xff))
            {
                iVar6 = (uint)(byte)(&DAT_004bf9c2)[param_2] * 2;
                local_4 = (uint)(byte)(&DAT_004bfa10)[iVar6];
                bVar5 = (&DAT_004bfa11)[iVar6];
                param_2 = (uint)bVar5;
                if (bVar5 == 0xff)
                {
                    iVar4 = local_4 * 0x10 + *(int *)(iVar3 + 0x60);
                    bVar5 = 0;
                    param_2 = 0;
                }
            }
            if (((*(int *)(iVar3 + 0x5c) != 0) && (*(byte *)(iVar3 + 0x5a) <= bVar5))
                && (bVar5 < *(byte *)(iVar3 + 0x5b) || bVar5 == *(byte *)(iVar3 + 0x5b)))
            {
                iVar4 = (param_2 - *(byte *)(iVar3 + 0x5a)) * 0x10 + *(int *)(iVar3 + 0x5c);
            }
            if (iVar4 != 0)
            {
                local_8 = local_8 + *(short *)(iVar4 + 0xe);
                local_c = local_c + 1;
            }
        }
        iVar7 = iVar7 + 1;
    } while (!bVar2);
    if (local_c != 0)
    {
        return local_8 / local_c;
    }
    return 0;
}

void FUN_0042e0e0(int param_1, int param_2, int *param_3, int *param_4)

{
    int iVar1;
    int iVar2;

    if (param_3 != NULL)
    {
        *param_3 = -1;
    }
    if (param_4 != NULL)
    {
        *param_4 = -1;
    }
    iVar2 = param_1;
    if (*(int *)(param_2 + 0x5c) != 0)
    {
        iVar1 = (int)(char)param_1;
        if (((int)(uint) * (byte *)(param_2 + 0x5a) <= iVar1) && (iVar1 <= (int)(uint) * (byte *)(param_2 + 0x5b)))
        {
            iVar2 = (iVar1 - (uint) * (byte *)(param_2 + 0x5a)) * 0x10 + *(int *)(param_2 + 0x5c);
            param_1 = (int)*(short *)(iVar2 + 0xe);
            iVar2 = (int)*(short *)(iVar2 + 2);
        }
    }
    if (param_3 != NULL)
    {
        *param_3 = iVar2;
    }
    if (param_4 != NULL)
    {
        *param_4 = param_1;
    }
    return;
}

// WARNING: Type propagation algorithm not settling
// WARNING: Could not reconcile some variable overlaps
// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042e150(int *param_1, int *param_2, short param_3)

{
    char cVar1;
    bool bVar2;
    uint uVar3;
    byte bVar4;
    int iVar5;
    uint uVar6;
    int *piVar7;
    short sVar8;
    uint extraout_ECX;
    int *extraout_ECX_00;
    uint extraout_ECX_01;
    int *piVar9;
    char *pcVar10;
    int iVar11;
    uint extraout_ECX_02;
    short sVar12;
    uint extraout_EDX;
    uint uVar13;
    uint uVar14;
    uint uVar15;
    uint uVar16;
    uint uVar17;
    ulonglong uVar18;
    uint local_78;
    uint local_70;
    int *local_6c;
    uint local_68;
    char *local_64;
    int local_60;
    int *local_5c;
    int *local_48;
    int local_40;
    uint local_3c;
    uint local_24;
    uint local_20;
    int *local_1c;
    uint local_18;
    uint local_14;
    uint local_10;
    uint local_c;
    char *local_8;
    uint local_4;

    uVar3 = DAT_0050c0b8;
    local_48 = NULL;
    local_5c = NULL;
    bVar2 = false;
    local_64 = (char *)((uint)local_64 & 0xffff0000 | DAT_0050c0b8 >> 0x10);
    local_60 = 0;
    FUN_0042ddf0(param_2, (int)param_3);
    local_40 = 0;
    cVar1 = *(char *)param_1;
    local_68 = uVar3;
    iVar11 = local_60;
    uVar14 = local_4;
    uVar15 = local_4;
    uVar16 = local_4;
    uVar17 = local_4;
    do
    {
        if ((cVar1 == '\0') || (DAT_0050c0b4 < local_40))
        {
            DAT_0050c0bc = (undefined_16)local_68;
            DAT_0050c0be = local_64._0_2_;
            return;
        }
        bVar4 = *(byte *)(iVar11 + (int)param_1);
        _DAT_0050c0c8 = (uint)bVar4;
        piVar9 = param_1;
        local_60 = iVar11;
        if (bVar4 != 0x7e)
            goto LAB_0042e384;
        bVar4 = *(byte *)(iVar11 + 1 + (int)param_1);
        piVar9 = (int *)((uint)param_1 & 0xffffff00);
        local_60 = iVar11 + 1;
        iVar5 = (int)(char)bVar4;
        uVar6 = iVar5 - 0x30;
        switch (iVar5)
        {
        case 0x30:
        case 0x31:
        case 0x32:
        case 0x33:
        case 0x34:
        case 0x35:
        case 0x36:
        case 0x37:
        case 0x38:
        case 0x39:
            DAT_004bfa0f = (byte)(_DAT_004bfa0c >> 0x18);
            bVar4 = 0;
            FUN_0042d950(uVar6 & 0xffff0000 | (uint) * (byte *)(iVar5 + 0x4bf9b8 + uVar6 * 2),
                         *(undefined_8 *)(iVar5 + 0x4bf9b9 + uVar6 * 2),
                         (uint)param_1 & 0xffff0000 | (uint) * (byte *)(iVar5 + 0x4bf9ba + uVar6 * 2),
                         (short)(char)DAT_004bfa0f);
            FUN_0044e290(0, 0, _DAT_004bfa0c, extraout_ECX & 0xffffff00 | _DAT_004bfa0c >> 8 & 0xff,
                         extraout_EDX & 0xffffff00 | _DAT_004bfa0c >> 0x10 & 0xff,
                         extraout_ECX & 0xffffff00 | _DAT_004bfa0c >> 0x18);
            piVar9 = extraout_ECX_00;
            break;
        case 0x62:
            local_40 = local_40 + 1;
        case 0x7e:
            bVar4 = 0;
            break;
        case 99:
            iVar11 = FUN_0042de30((char *)(iVar11 + 2 + (int)param_1), DAT_0050c0c4);
            iVar11 = iVar11 / 2;
            goto LAB_0042e268;
        case 0x6b:
            bVar2 = !bVar2;
            bVar4 = 0;
            break;
        case 0x6e:
            bVar4 = 0;
            DAT_0050c0b8 = DAT_0050c0b8 & 0xffff0000 | uVar3 & 0xffff;
            local_68 = uVar3;
            piVar9 = (int *)((uint)param_1 & 0xffff0000 | (uint) * (ushort *)(param_2 + 0x13));
            local_64 = local_64 + (int)piVar9;
            break;
        case 0x6f:
            bVar4 = 0;
            piVar9 = local_5c;
            local_5c = (int *)(uint)(local_5c == NULL);
            break;
        case 0x70:
            local_48 = NULL;
            local_5c = NULL;
            bVar2 = false;
            bVar4 = 0;
            break;
        case 0x72:
            iVar11 = FUN_0042de30((char *)(iVar11 + 2 + (int)param_1), DAT_0050c0c4);
        LAB_0042e268:
            bVar4 = 0;
            DAT_0050c0b8 = DAT_0050c0b8 & 0xffff0000 | (uint)(int *)(uVar3 - iVar11) & 0xffff;
            local_68 = DAT_0050c0b8;
            piVar9 = (int *)(uVar3 - iVar11);
            break;
        case 0x73:
            local_48 = (int *)(uint)(local_48 == NULL);
            bVar4 = 0;
            piVar9 = local_48;
            break;
        case 0x74:
            bVar4 = 0x7e;
        }
    LAB_0042e384:
        if ((DAT_00e99768 == 0) || (local_40 == DAT_0050c0b4))
        {
            local_3c = 0;
            sVar8 = -5;
            if ((0x96 < bVar4) && ((piVar9 = (int *)param_2[0x18], piVar9 != NULL && ((&DAT_004bf9c2)[bVar4] != 0xff))))
            {
                uVar6 = (uint)(byte)(&DAT_004bf9c2)[bVar4] * 2;
                if ((&DAT_004bfa10)[uVar6] == 0xff)
                {
                    bVar4 = (&DAT_004bfa11)[uVar6];
                    piVar9 = (int *)((uint)piVar9 & 0xffffff00 | (uint)bVar4);
                }
                else
                {
                    piVar7 = piVar9 + (uint)(byte)(&DAT_004bfa10)[uVar6] * 4;
                    piVar9 = (int *)((uint)param_2 & 0xffff0000 | (uint) * (ushort *)(piVar7 + 2));
                    if (*(ushort *)(piVar7 + 2) == 0xffff)
                    {
                        sVar8 = -2;
                    }
                    else
                    {
                        sVar8 = (short)*(char *)piVar7;
                        uVar16 = uVar16 & 0xffff0000 | (uint) * (ushort *)((int)piVar7 + 6);
                        uVar17 = uVar17 & 0xffff0000 | (uint) * (ushort *)(piVar7 + 1);
                        uVar15 = uVar15 & 0xffff0000 | (uint) * (ushort *)(piVar7 + 3);
                        uVar14 = uVar14 & 0xffff0000 | (uint) * (ushort *)((int)piVar7 + 0xe);
                        local_70 = local_70 & 0xffff0000 | (uint) * (ushort *)((int)piVar7 + 10);
                        local_6c = piVar9;
                        if (*param_2 == 0)
                        {
                            local_78 = local_78 & 0xffff0000 | (uint)(ushort)(short)*(char *)((int)piVar7 + 1);
                        }
                        else
                        {
                            local_78 = 0;
                        }
                    }
                    local_8 = local_64;
                    local_4 = local_68;
                    local_20 = local_70;
                    local_1c = local_6c;
                    local_24 = local_78;
                    if (sVar8 == param_3)
                    {
                        uVar13 = local_68;
                        if (local_5c == NULL)
                        {
                            if (local_48 == NULL)
                            {
                                if (!bVar2)
                                    goto LAB_0042e74b;
                                FUN_0044e290(0, 0, 0, 0, 0, (uint)piVar7 & 0xffffff00 | (uint)DAT_004bfa0f);
                                FUN_0042d990(local_68 - 1, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                             local_78);
                                FUN_0042d990(local_68 + 1, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                             local_78);
                                FUN_0042d990(local_68, local_64 + -1, uVar16, uVar17, uVar15, uVar14, local_6c,
                                             local_70, local_78);
                            }
                            else
                            {
                                FUN_0044e290(0, 0, 0, 0, 0, (uint)piVar7 & 0xffffff00 | (uint)DAT_004bfa0f);
                                uVar13 = local_68 + 1;
                            }
                        }
                        else
                        {
                            FUN_0044e290(0, 0, 0, 0, 0, (uint)piVar7 & 0xffffff00 | (uint)DAT_004bfa0f);
                            pcVar10 = local_64 + -1;
                            iVar11 = local_68 - 1;
                            FUN_0042d990(iVar11, pcVar10, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                            iVar5 = local_68 + 1;
                            FUN_0042d990(iVar5, local_64 + 1, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                         local_78);
                            FUN_0042d990(iVar5, pcVar10, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                            FUN_0042d990(iVar11, local_64 + 1, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                         local_78);
                            FUN_0042d990(iVar11, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                         local_78);
                            FUN_0042d990(iVar5, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                            FUN_0042d990(local_68, pcVar10, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                         local_78);
                        }
                        uVar18 = FUN_0042d990(uVar13, local_64 + 1, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                              local_78);
                        FUN_0044e290(0, 0, _DAT_004bfa0c,
                                     (uint)((uVar18 & 0xffffff00ffffff00) >> 0x20) | _DAT_004bfa0c >> 8 & 0xff,
                                     extraout_ECX_01 & 0xffffff00 | _DAT_004bfa0c >> 0x10 & 0xff,
                                     (uint)(uVar18 & 0xffffff00ffffff00) | _DAT_004bfa0c >> 0x18);
                    }
                LAB_0042e74b:
                    bVar4 = (&DAT_004bfa11)[uVar6];
                    piVar9 = (int *)(uVar6 & 0xffffff00 | (uint)bVar4);
                    local_18 = uVar14;
                    local_14 = uVar15;
                    local_10 = uVar17;
                    local_c = uVar16;
                    if (bVar4 != 0xff)
                        goto LAB_0042e786;
                    local_3c = (uint) * (ushort *)((int)piVar7 + 2);
                }
                if ((char)piVar9 == -1)
                {
                    bVar4 = 0;
                }
            }
        LAB_0042e786:
            if (bVar4 == 0)
            {
                sVar12 = -2;
            }
            else
            {
                if (bVar4 == 0x5f)
                {
                    bVar4 = 0x20;
                }
                if (((0x60 < bVar4) && (bVar4 < 0x7b)) && (*(byte *)((int)param_2 + 0x5b) < 0x61))
                {
                    bVar4 = bVar4 - 0x20;
                }
                if (param_2[0x17] != 0)
                {
                    piVar9 = (int *)((uint)piVar9 & 0xffffff00);
                    if ((*(byte *)((int)param_2 + 0x5a) <= bVar4)
                        && (bVar4 < *(byte *)((int)param_2 + 0x5b) || bVar4 == *(byte *)((int)param_2 + 0x5b)))
                    {
                        pcVar10 =
                            (char *)(((uint)bVar4 - (uint) * (byte *)((int)param_2 + 0x5a)) * 0x10 + param_2[0x17]);
                        piVar9 = (int *)((uint)pcVar10 & 0xffff0000 | (uint) * (ushort *)(pcVar10 + 8));
                        if (*(ushort *)(pcVar10 + 8) == 0xffff)
                        {
                            sVar12 = -2;
                            local_3c = (uint) * (ushort *)(pcVar10 + 2);
                        }
                        else
                        {
                            sVar12 = (short)*pcVar10;
                            uVar16 = uVar16 & 0xffff0000 | (uint) * (ushort *)(pcVar10 + 6);
                            uVar17 = uVar17 & 0xffff0000 | (uint) * (ushort *)(pcVar10 + 4);
                            uVar15 = uVar15 & 0xffff0000 | (uint) * (ushort *)(pcVar10 + 0xc);
                            uVar14 = uVar14 & 0xffff0000 | (uint) * (ushort *)(pcVar10 + 0xe);
                            local_70 = local_70 & 0xffff0000 | (uint) * (ushort *)(pcVar10 + 10);
                            local_6c = piVar9;
                            if (*param_2 == 0)
                            {
                                local_78 = local_78 & 0xffff0000 | (uint)(ushort)(short)pcVar10[1];
                                local_3c = (uint) * (ushort *)(pcVar10 + 2);
                                piVar9 = (int *)((uint)param_2 & 0xffff0000 | (uint)(ushort)(short)pcVar10[1]);
                            }
                            else
                            {
                                local_78 = 0;
                                local_3c = (uint) * (ushort *)(pcVar10 + 2);
                                piVar9 = param_2;
                            }
                        }
                        goto LAB_0042e873;
                    }
                }
                sVar12 = -2;
                local_3c = 0;
            }
        LAB_0042e873:
            if ((bVar4 != 0) && (sVar12 == param_3))
            {
                uVar6 = local_68;
                if (local_5c == NULL)
                {
                    if (local_48 != NULL)
                    {
                        FUN_0044e290(0, 0, 0, 0, 0, DAT_004bfa0f);
                        uVar6 = local_68 + 1;
                        goto LAB_0042eadd;
                    }
                    if (bVar2)
                    {
                        FUN_0044e290(0, 0, 0, 0, 0, DAT_004bfa0f);
                        FUN_0042d990(local_68 - 1, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                     local_78);
                        FUN_0042d990(local_68 + 1, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                     local_78);
                        FUN_0042d990(local_68, local_64 + -1, uVar16, uVar17, uVar15, uVar14, local_6c, local_70,
                                     local_78);
                        goto LAB_0042eadd;
                    }
                }
                else
                {
                    FUN_0044e290(0, 0, 0, 0, 0, (uint)piVar9 & 0xffffff00 | (uint)DAT_004bfa0f);
                    pcVar10 = local_64 + -1;
                    iVar11 = local_68 - 1;
                    FUN_0042d990(iVar11, pcVar10, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                    iVar5 = local_68 + 1;
                    FUN_0042d990(iVar5, local_64 + 1, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                    FUN_0042d990(iVar5, pcVar10, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                    FUN_0042d990(iVar11, local_64 + 1, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                    FUN_0042d990(iVar11, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                    FUN_0042d990(iVar5, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                    FUN_0042d990(local_68, pcVar10, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                LAB_0042eadd:
                    uVar18 =
                        FUN_0042d990(uVar6, local_64 + 1, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
                    FUN_0044e290(0, 0, _DAT_004bfa0c,
                                 (uint)((uVar18 & 0xffffff00ffffff00) >> 0x20) | _DAT_004bfa0c >> 8 & 0xff,
                                 extraout_ECX_02 & 0xffffff00 | _DAT_004bfa0c >> 0x10 & 0xff,
                                 (uint)(uVar18 & 0xffffff00ffffff00) | _DAT_004bfa0c >> 0x18);
                }
                FUN_0042d990(local_68, local_64, uVar16, uVar17, uVar15, uVar14, local_6c, local_70, local_78);
            }
            if (sVar8 == param_3)
            {
                FUN_0042d990(local_4, local_8, local_c, local_10, local_14, local_18, local_1c, local_20, local_24);
            }
            local_68 = local_68 + local_3c;
        }
        iVar11 = local_60 + 1;
        cVar1 = *(char *)(iVar11 + (int)param_1);
    } while (true);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0042ec50(char *param_1)

{
    int iVar1;
    bool bVar2;
    undefined_16 uVar3;
    undefined_16 uVar4;
    int iVar5;
    uint extraout_ECX;
    uint extraout_ECX_00;
    uint uVar6;
    uint extraout_ECX_01;
    uint uVar7;
    uint extraout_EDX;
    uint extraout_EDX_00;
    uint extraout_EDX_01;
    undefined_16 extraout_var;
    undefined_16 extraout_var_00;
    undefined_16 uVar8;
    uint uVar9;

    FUN_0042d8d0(0);
    bVar2 = false;
    DAT_0050c0a0 = 1000;
    DAT_0050c0a8 = -1000;
    DAT_00e99768 = 0;
    uVar7 = extraout_EDX & 0xffffff00;
    iVar5 = 0;
    if (*param_1 != '\0')
    {
        uVar7 = CONCAT31((int3)(uVar7 >> 8), 0x62);
        do
        {
            if (bVar2)
                break;
            if ((param_1[iVar5] == '~') && (param_1[iVar5 + 1] == 'b'))
            {
                bVar2 = true;
                DAT_00e99768 = 1;
            }
            iVar1 = iVar5 + 1;
            iVar5 = iVar5 + 1;
        } while (param_1[iVar1] != '\0');
    }
    uVar9 = 0;
    iVar5 = 0;
    if ((*param_1 == '~') && (param_1[1] == 'f'))
    {
        FUN_0042d8d0((ushort)(short)param_1[2] - 0x30);
        iVar5 = 3;
        uVar9 = extraout_ECX;
        uVar7 = extraout_EDX_00;
    }
    DAT_0050c0ac = 0;
    uVar6 = uVar9 & 0xffffff00;
    if ((*param_1 == '~') && (param_1[1] == 'F'))
    {
        DAT_0050c0ac = 1;
        FUN_0042d8d0((uVar9 & 0xffff0000 | (uint)(ushort)(short)param_1[2]) - 0x30);
        iVar5 = 3;
        uVar6 = extraout_ECX_00;
        uVar7 = extraout_EDX_01;
    }
    uVar4 = DAT_0050c0b8._2_2_;
    uVar3 = (undefined_16)DAT_0050c0b8;
    FUN_0044e290(0, 0, _DAT_004bfa0c, uVar6 & 0xffffff00 | _DAT_004bfa0c >> 8 & 0xff, _DAT_004bfa0c >> 0x10 & 0xff,
                 uVar7 & 0xffffff00 | _DAT_004bfa0c >> 0x18);
    uVar9 = 0;
    uVar7 = *(uint *)(DAT_0050c0c4 + 4);
    uVar8 = extraout_var;
    if (0 < (int)uVar7)
    {
        do
        {
            DAT_0050c0b8._0_2_ = uVar3;
            DAT_0050c0b8._2_2_ = uVar4;
            FUN_0042e150(param_1 + iVar5, DAT_0050c0c4, uVar9);
            uVar9 = uVar9 + 1;
            uVar7 = extraout_ECX_01;
            uVar8 = extraout_var_00;
        } while ((int)uVar9 < *(int *)(DAT_0050c0c4 + 4));
    }
    if ((short)DAT_0050c0a0 < DAT_0050c0a8)
    {
        if ((short)DAT_0050c09c < (short)DAT_0050c0a4)
        {
            FUN_00484020(uVar9 & 0xffff0000 | (uint)DAT_0050c0a0, uVar7 & 0xffff0000 | (uint)DAT_0050c09c,
                         CONCAT22(uVar8, DAT_0050c0a8), DAT_0050c0c4 & 0xffff0000 | (uint)DAT_0050c0a4);
        }
    }
    DAT_0050c0b8._0_2_ = DAT_0050c0bc;
    DAT_0050c0b8._2_2_ = DAT_0050c0be;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void __fastcall FUN_0042edc0(undefined_32 param_1_00, uint param_2, char param_1)

{
    uint in_EAX;
    int iVar1;
    char *pcVar2;

    FUN_0044e290(0, 0, _DAT_004bfa0c, param_2 & 0xffffff00 | _DAT_004bfa0c >> 8 & 0xff, _DAT_004bfa0c >> 0x10 & 0xff,
                 in_EAX & 0xffffff00 | _DAT_004bfa0c >> 0x18);
    DAT_00e99764 = 1;
    if (param_1 == '_')
    {
        param_1 = ' ';
    }
    if ((('`' < param_1) && (param_1 < '{')) && (*(byte *)((int)DAT_0050c0c4 + 0x5b) < 0x61))
    {
        param_1 = param_1 + -0x20;
    }
    if (DAT_0050c0c4[0x17] != 0)
    {
        iVar1 = (int)param_1;
        if ((((int)(uint) * (byte *)((int)DAT_0050c0c4 + 0x5a) <= iVar1)
             && (iVar1 <= (int)(uint) * (byte *)((int)DAT_0050c0c4 + 0x5b)))
            && (pcVar2 = (char *)((iVar1 - (uint) * (byte *)((int)DAT_0050c0c4 + 0x5a)) * 0x10 + DAT_0050c0c4[0x17]),
                *(short *)(pcVar2 + 8) != -1))
        {
            _DAT_00e99740 = (int)*(short *)(pcVar2 + 6);
            iVar1 = (int)*pcVar2;
            _DAT_00e99708 = (int)*(short *)(pcVar2 + 4);
            DAT_00e9970c = (int)*(short *)(pcVar2 + 0xc);
            DAT_00e99704 = (int)*(short *)(pcVar2 + 0xe);
            _DAT_00e99700 = (int)*(short *)(pcVar2 + 8);
            _DAT_00e996fc = (int)*(short *)(pcVar2 + 10);
            if (*DAT_0050c0c4 == 0)
            {
                _DAT_00e99760 = (int)pcVar2[1];
            }
            else
            {
                _DAT_00e99760 = 0;
            }
            goto LAB_0042ee99;
        }
    }
    iVar1 = -2;
LAB_0042ee99:
    if (-1 < iVar1)
    {
        FUN_0042ddf0(DAT_0050c0c4, iVar1);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void __thiscall FUN_0042eeb0(uint param_1_00, int param_1, uint param_2, char param_3)

{
    int iVar1;
    int iVar2;
    undefined_16 extraout_var;
    ushort extraout_var_00;
    undefined_16 extraout_var_01;
    ushort extraout_var_02;
    ushort extraout_var_03;
    undefined_16 extraout_var_04;
    ushort extraout_var_05;
    uint uVar3;
    undefined_16 extraout_var_06;
    ushort extraout_var_07;
    ushort extraout_var_08;
    undefined_16 extraout_var_09;
    ushort extraout_var_10;
    uint uVar4;
    ushort extraout_var_11;
    ushort extraout_var_12;
    ushort extraout_var_13;
    undefined_16 extraout_var_14;
    ushort extraout_var_15;
    ushort extraout_var_16;
    undefined_16 extraout_var_17;
    uint extraout_ECX;
    ushort extraout_var_18;
    uint extraout_ECX_00;
    uint uVar5;
    ushort extraout_var_19;
    undefined_16 extraout_var_20;
    ushort extraout_var_21;
    ushort extraout_var_22;
    uint extraout_ECX_01;
    uint extraout_ECX_02;
    uint extraout_ECX_03;
    ushort extraout_var_23;
    ushort extraout_var_24;
    undefined_16 extraout_var_25;
    ushort extraout_var_26;
    ushort extraout_var_27;
    undefined_16 extraout_var_28;
    ushort extraout_var_29;
    ushort extraout_var_30;
    ushort extraout_var_31;
    uint extraout_EDX;
    undefined_16 extraout_var_32;
    ushort extraout_var_33;
    ushort extraout_var_34;
    undefined_16 extraout_var_35;
    uint extraout_EDX_00;
    int iVar6;
    ulonglong uVar7;

    param_1 = param_1 - (int)DAT_00e9970c / 2;
    uVar5 = DAT_00e99704 - ((int)DAT_00e99704 >> 0x1f) & 0xffffff00;
    iVar6 = (int)DAT_00e99704 / 2 + param_2;
    if (param_3 == 'o')
    {
        FUN_0044e290(0, 0, 0, 0, 0, uVar5 | DAT_004bfa0f);
        iVar1 = iVar6 + -1;
        iVar2 = param_1 + -1;
        FUN_0042d990(iVar2, iVar1, CONCAT22(extraout_var_11, DAT_00e99740), CONCAT22(extraout_var, DAT_00e99708),
                     DAT_00e9970c & 0xffff | (uint)extraout_var_23 << 0x10,
                     DAT_00e99704 & 0xffff | (uint)extraout_var_11 << 0x10, CONCAT22(extraout_var, DAT_00e99700),
                     CONCAT22(extraout_var_23, DAT_00e996fc), CONCAT22(extraout_var_11, DAT_00e99760));
        FUN_0042d990(param_1 + 1, iVar6 + 1, CONCAT22(extraout_var_24, DAT_00e99740),
                     CONCAT22(extraout_var_24, DAT_00e99708), DAT_00e9970c & 0xffff | (uint)extraout_var_24 << 0x10,
                     DAT_00e99704 & 0xffff | (uint)extraout_var_24 << 0x10, CONCAT22(extraout_var_24, DAT_00e99700),
                     CONCAT22(extraout_var_24, DAT_00e996fc), CONCAT22(extraout_var_24, DAT_00e99760));
        FUN_0042d990(param_1 + 1, iVar1, CONCAT22(extraout_var_00, DAT_00e99740),
                     CONCAT22(extraout_var_25, DAT_00e99708), DAT_00e9970c & 0xffff | (uint)extraout_var_12 << 0x10,
                     DAT_00e99704 & 0xffff | (uint)extraout_var_00 << 0x10, CONCAT22(extraout_var_25, DAT_00e99700),
                     CONCAT22(extraout_var_12, DAT_00e996fc), CONCAT22(extraout_var_00, DAT_00e99760));
        FUN_0042d990(iVar2, iVar6 + 1, CONCAT22(extraout_var_13, DAT_00e99740), CONCAT22(extraout_var_01, DAT_00e99708),
                     DAT_00e9970c & 0xffff | (uint)extraout_var_26 << 0x10,
                     DAT_00e99704 & 0xffff | (uint)extraout_var_13 << 0x10, CONCAT22(extraout_var_01, DAT_00e99700),
                     CONCAT22(extraout_var_26, DAT_00e996fc), CONCAT22(extraout_var_13, DAT_00e99760));
        FUN_0042d990(iVar2, iVar6, CONCAT22(extraout_var_27, DAT_00e99740), CONCAT22(extraout_var_14, DAT_00e99708),
                     DAT_00e9970c & 0xffff | (uint)extraout_var_02 << 0x10,
                     DAT_00e99704 & 0xffff | (uint)extraout_var_27 << 0x10, CONCAT22(extraout_var_14, DAT_00e99700),
                     CONCAT22(extraout_var_02, DAT_00e996fc), CONCAT22(extraout_var_27, DAT_00e99760));
        FUN_0042d990(param_1 + 1, iVar6, CONCAT22(extraout_var_03, DAT_00e99740),
                     CONCAT22(extraout_var_28, DAT_00e99708), DAT_00e9970c & 0xffff | (uint)extraout_var_15 << 0x10,
                     DAT_00e99704 & 0xffff | (uint)extraout_var_03 << 0x10, CONCAT22(extraout_var_28, DAT_00e99700),
                     CONCAT22(extraout_var_15, DAT_00e996fc), CONCAT22(extraout_var_03, DAT_00e99760));
        FUN_0042d990(param_1, iVar1, CONCAT22(extraout_var_16, DAT_00e99740), CONCAT22(extraout_var_04, DAT_00e99708),
                     DAT_00e9970c & 0xffff | (uint)extraout_var_29 << 0x10,
                     DAT_00e99704 & 0xffff | (uint)extraout_var_16 << 0x10, CONCAT22(extraout_var_04, DAT_00e99700),
                     CONCAT22(extraout_var_29, DAT_00e996fc), CONCAT22(extraout_var_16, DAT_00e99760));
        uVar7 =
            FUN_0042d990(param_1, iVar6 + 1, CONCAT22(extraout_var_30, DAT_00e99740),
                         CONCAT22(extraout_var_17, DAT_00e99708), DAT_00e9970c & 0xffff | (uint)extraout_var_05 << 0x10,
                         DAT_00e99704 & 0xffff | (uint)extraout_var_30 << 0x10, CONCAT22(extraout_var_17, DAT_00e99700),
                         CONCAT22(extraout_var_05, DAT_00e996fc), CONCAT22(extraout_var_30, DAT_00e99760));
        uVar3 = (uint)(uVar7 & 0xffffff00ffffff00) | _DAT_004bfa0c >> 0x18;
        uVar4 = extraout_ECX & 0xffffff00 | _DAT_004bfa0c >> 0x10 & 0xff;
        uVar5 = (uint)((uVar7 & 0xffffff00ffffff00) >> 0x20) | _DAT_004bfa0c >> 8 & 0xff;
    }
    else
    {
        if (param_3 == 's')
        {
            FUN_0044e290(0, 0, 0, 0, 0, uVar5 | DAT_004bfa0f);
            FUN_0042d990(param_1 + 1, iVar6 + 1, CONCAT22(extraout_var_18, DAT_00e99740),
                         CONCAT22(extraout_var_06, DAT_00e99708), DAT_00e9970c & 0xffff | (uint)extraout_var_31 << 0x10,
                         DAT_00e99704 & 0xffff | (uint)extraout_var_18 << 0x10, CONCAT22(extraout_var_06, DAT_00e99700),
                         CONCAT22(extraout_var_31, DAT_00e996fc), CONCAT22(extraout_var_18, DAT_00e99760));
            uVar5 = extraout_ECX_00 & 0xffffff00 | _DAT_004bfa0c >> 0x18;
            uVar4 = extraout_EDX & 0xffffff00 | _DAT_004bfa0c >> 0x10 & 0xff;
            uVar3 = uVar5;
        }
        else
        {
            if (param_3 != 'f')
                goto LAB_0042f2f8;
            FUN_0044e290(0, 0, 0, 0, 0, param_2 & 0xffffff00 | (uint)DAT_004bfa0f);
            FUN_0042d990(param_1 + -1, iVar6, CONCAT22(extraout_var_07, DAT_00e99740),
                         CONCAT22(extraout_var_32, DAT_00e99708), DAT_00e9970c & 0xffff | (uint)extraout_var_19 << 0x10,
                         DAT_00e99704 & 0xffff | (uint)extraout_var_07 << 0x10, CONCAT22(extraout_var_32, DAT_00e99700),
                         CONCAT22(extraout_var_19, DAT_00e996fc), CONCAT22(extraout_var_07, DAT_00e99760));
            FUN_0042d990(param_1 + 1, iVar6, CONCAT22(extraout_var_33, DAT_00e99740),
                         CONCAT22(extraout_var_20, DAT_00e99708), DAT_00e9970c & 0xffff | (uint)extraout_var_08 << 0x10,
                         DAT_00e99704 & 0xffff | (uint)extraout_var_33 << 0x10, CONCAT22(extraout_var_20, DAT_00e99700),
                         CONCAT22(extraout_var_08, DAT_00e996fc), CONCAT22(extraout_var_33, DAT_00e99760));
            FUN_0042d990(param_1, iVar6 + -1, CONCAT22(extraout_var_21, DAT_00e99740),
                         CONCAT22(extraout_var_09, DAT_00e99708), DAT_00e9970c & 0xffff | (uint)extraout_var_34 << 0x10,
                         DAT_00e99704 & 0xffff | (uint)extraout_var_21 << 0x10, CONCAT22(extraout_var_09, DAT_00e99700),
                         CONCAT22(extraout_var_34, DAT_00e996fc), CONCAT22(extraout_var_21, DAT_00e99760));
            uVar7 = FUN_0042d990(
                param_1, iVar6 + 1, CONCAT22(extraout_var_10, DAT_00e99740), CONCAT22(extraout_var_35, DAT_00e99708),
                DAT_00e9970c & 0xffff | (uint)extraout_var_22 << 0x10,
                DAT_00e99704 & 0xffff | (uint)extraout_var_10 << 0x10, CONCAT22(extraout_var_35, DAT_00e99700),
                CONCAT22(extraout_var_22, DAT_00e996fc), CONCAT22(extraout_var_10, DAT_00e99760));
            uVar3 = (uint)((uVar7 & 0xffffff00ffffff00) >> 0x20) | _DAT_004bfa0c >> 0x18;
            uVar4 = (uint)(uVar7 & 0xffffff00ffffff00) | _DAT_004bfa0c >> 0x10 & 0xff;
            uVar5 = extraout_ECX_01;
        }
        uVar5 = uVar5 & 0xffffff00 | _DAT_004bfa0c >> 8 & 0xff;
    }
    FUN_0044e290(0, 0, _DAT_004bfa0c, uVar5, uVar4, uVar3);
    DAT_00e99764 = 1;
    param_1_00 = extraout_ECX_02;
    param_2 = extraout_EDX_00;
LAB_0042f2f8:
    uVar7 = CONCAT44(param_2, DAT_00e99764);
    if (DAT_00e99764 == 0)
    {
        uVar7 = FUN_0044e290(0, 0, _DAT_004bfa0c, param_1_00 & 0xffffff00 | _DAT_004bfa0c >> 8 & 0xff,
                             _DAT_004bfa0c >> 0x10 & 0xff, param_2 & 0xffffff00 | _DAT_004bfa0c >> 0x18);
        DAT_00e99764 = 1;
        param_1_00 = extraout_ECX_03;
    }
    uVar5 = (uint)((uVar7 & 0xffff0000ffff0000) >> 0x20);
    uVar3 = (uint)(uVar7 & 0xffff0000ffff0000);
    FUN_0042d990(param_1, iVar6, uVar5 | DAT_00e99740, param_1_00 & 0xffff0000 | (uint)DAT_00e99708,
                 uVar3 | DAT_00e9970c & 0xffff, uVar5 | DAT_00e99704 & 0xffff,
                 param_1_00 & 0xffff0000 | (uint)DAT_00e99700, uVar3 | DAT_00e996fc, uVar5 | DAT_00e99760);
    return;
}

// 0042f380
// deg to cos [out] sin [out]
void sin_cos(float degree, float *sin_out, float *cos_out)

{
    float10 tmp;
    float10 cos_res;

    // deg to rad  0.0055555555556 = 1/180
    tmp = (float10)degree * (float10)3.141592653589793 * (float10)0.005555555555555556;
    cos_res = (float10)fcos(tmp);
    tmp = (float10)fsin(tmp);
    *cos_out = (float)cos_res;
    *sin_out = (float)tmp;
    return;
}

// 0042f3b0
// sin / cos = tan
float10 tan(float param_1)

{
    float local_4;

    sin_cos(param_1, &param_1, &local_4);
    return (float10)param_1 / (float10)local_4;
}

// 0042f3e0
// amazing pyplot reveal that this is an arctan() * 180/pi approximation
float10 arctan(float param_1)

{
    float fVar1;
    bool bVar2;
    float10 fVar3;
    float10 fVar4;
    float10 fVar5;
    float local_4;

    if (0.999999 < param_1)
    {
        return (float10)90.0;
    }
    if (param_1 < -0.999999)
    {
        return (float10)-90.0;
    }
    if ((0.7071068 <= param_1) || (param_1 <= -0.7071068))
    {
        local_4 = param_1;
        bVar2 = true;
        fVar1 = 1.0 - param_1 * param_1;
        if (0.0 <= param_1)
        {
            fVar3 = (float10)SQRT3(fVar1);
        }
        else
        {
            fVar3 = (float10)SQRT3(fVar1);
            fVar3 = -fVar3;
        }
        param_1 = (float)fVar3;
    }
    else
    {
        bVar2 = false;
    }
    if ((0.001 <= param_1) || (param_1 <= -0.001))
    {
        fVar1 = (float)((float10)param_1 * (float10)param_1);
        fVar3 = (float10)param_1 * (float10)param_1 * (float10)param_1;
        fVar4 = fVar3 * (float10)fVar1;
        fVar5 = fVar4 * (float10)fVar1;
        fVar3 = (float10)param_1
            - ((float10)(float)fVar5 * (float10)-0.04464286 + fVar4 * (float10)-0.075 + fVar3 * (float10)-0.1666667
               + fVar5 * (float10)fVar1 * (float10)-0.047446);
    }
    else
    {
        fVar3 = (float10)param_1;
    }
    fVar3 = fVar3 * (float10)180.0 * (float10)0.3183098861837907;
    if (bVar2)
    {
        if (local_4 < 0.0)
        {
            return (float10)-90.0 - fVar3;
        }
        fVar3 = (float10)90.0 - fVar3;
    }
    return fVar3;
}

// find a better name, but also what is its real mathematical purpose
float10 ninety_minus_arctan(undefined_32 param_1)

{
    float10 fVar1;

    fVar1 = (float10)arctan(param_1);
    return (float10)90.0 - fVar1;
}

// 0042f560
float10 arctan2(float param_1, float param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float10 fVar5;
    float10 fVar6;
    float10 fVar7;

    if ((0.0001 <= param_2) || (param_2 < -0.0001))
    {
        if ((0.0001 <= param_1) || (param_1 < -0.0001))
        {
            fVar2 = param_1;
            if (param_1 < 0.0)
            {
                fVar2 = -param_1;
            }
            fVar4 = param_2;
            if (param_2 < 0.0)
            {
                fVar4 = -param_2;
            }
            fVar1 = fVar4;
            fVar3 = fVar2;
            if (fVar4 < fVar2)
            {
                fVar1 = fVar2;
                fVar3 = fVar4;
            }
            fVar3 = fVar3 / fVar1;
            if ((0.0001 <= fVar3) || (fVar3 < -0.0001))
            {
                fVar1 = (float)((float10)fVar3 * (float10)fVar3);
                fVar5 = (float10)fVar3 * (float10)fVar3 * (float10)fVar3;
                fVar6 = fVar5 * (float10)fVar1;
                fVar7 = fVar6 * (float10)fVar1;
                fVar5 = (((((float10)fVar3 - fVar5 * (float10)0.3333333) - fVar6 * (float10)-0.2)
                          - (float10)(float)fVar7 * (float10)0.1428571)
                         - fVar7 * (float10)fVar1 * (float10)-0.063235)
                    * (float10)180.0 * (float10)0.3183098861837907;
            }
            else
            {
                fVar5 = (float10)0.0;
            }
            if (fVar4 < fVar2)
            {
                fVar5 = (float10)90.0 - fVar5;
            }
        }
        else
        {
            fVar5 = (float10)0.0;
        }
    }
    else
    {
        fVar5 = (float10)90.0;
    }
    if (param_2 < -0.0001)
    {
        fVar5 = (float10)180.0 - fVar5;
    }
    if (param_1 < -0.0001)
    {
        fVar5 = -fVar5;
    }
    return fVar5;
}

// 0042f6e0
void vec2f_add(float *param_1, float *param_2, float *param_3)

{
    param_1[0] = param_3[0] + param_2[0];
    param_1[1] = param_2[1] + param_3[1];
    return;
}

// 0042f700
void vec2f_scale(float *param_1, float param_2, float *param_3)

{
    param_1[0] = param_3[0] * param_2;
    param_1[1] = param_3[1] * param_2;
    return;
}

// 0042f720
void vec2f_multiply_add(float *param_1, float *param_2, float param_3, float *param_4)

{
    param_1[0] = param_4[0] * param_3 + param_2[0];
    param_1[1] = param_4[1] * param_3 + param_2[1];
    return;
}

// 0042f750
void vec2f_norm(float *param_1)

{
    SQRT3(param_1[0] * param_1[0] + param_1[1] * param_1[1]);
    return;
}

// 0042f780
void vec2f_normalize(float *param_1)

{
    float10 fVar1;

    fVar1 = (float10)vec2f_norm(param_1);
    if ((float10)0.0001 <= fVar1)
    {
        param_1[0] = (float)((float10)param_1[0] / fVar1);
        param_1[1] = (float)((float10)param_1[1] / fVar1);
    }
    return;
}

// 0042f7b0
void vec3f_set(undefined_32 *param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    param_1[0] = param_2;
    param_1[1] = param_3;
    param_1[2] = param_4;
    return;
}

// 0042f7d0
void vec3f_copy(undefined_32 *param_1, undefined_32 *param_2)

{
    param_1[0] = param_2[0];
    param_1[1] = param_2[1];
    param_1[2] = param_2[2];
    return;
}

// 0042f7f0
undefined_32 vec3f_equal(float *param_1, float *param_2)

{
    if (((param_1[0] == param_2[0]) && (param_1[1] == param_2[1])) && (param_1[2] == param_2[2]))
    {
        return 1;
    }
    return 0;
}

// 0042f830
void vec3f_add(float *param_1, float *param_2, float *param_3)

{
    param_1[0] = param_3[0] + param_2[0];
    param_1[1] = param_3[1] + param_2[1];
    param_1[2] = param_3[2] + param_2[2];
    return;
}

// 0042f860
void vec3f_sub(float *param_1, float *param_2, float *param_3)

{
    param_1[0] = param_2[0] - param_3[0];
    param_1[1] = param_2[1] - param_3[1];
    param_1[2] = param_2[2] - param_3[2];
    return;
}

// 0042f890
float10 vec3f_squared_norm(float *param_1, float *param_2)

{
    return (float10)param_2[0] * (float10)param_1[0] + (float10)param_1[2] * (float10)param_2[2]
        + (float10)param_1[1] * (float10)param_2[1];
}

// 0042f8c0
float10 rdVector_Len3(float *param_1)

{
    return SQRT3(param_1[0] * param_1[0] + param_1[2] * param_1[2] + param_1[1] * param_1[1]);
}

// 0042f910
float10 vec3f_squared_distance(float *param_1, float *param_2)

{
    return ((float10)param_1[2] - (float10)param_2[2]) * ((float10)param_1[2] - (float10)param_2[2])
        + ((float10)param_1[1] - (float10)param_2[1]) * (float10)(float)((float10)param_1[1] - (float10)param_2[1])
        + ((float10)param_1[0] - (float10)param_2[0]) * (float10)(float)((float10)param_1[0] - (float10)param_2[0]);
}

// 0042f950
void vec3f_distance(float *param_1, float *param_2)

{
    SQRT3((param_2[2] - param_1[2]) * (param_2[2] - param_1[2]) + (param_2[1] - param_1[1]) * (param_2[1] - param_1[1])
          + (param_2[0] - param_1[0]) * (param_2[0] - param_1[0]));
    return;
}

// 0042f9b0
void rdVector_Normalize3(float *param_1)

{
    float10 fVar1;

    fVar1 = (float10)rdVector_Len3(param_1);
    if ((float10)0.0001 <= fVar1)
    {
        param_1[0] = (float)((float10)param_1[0] / fVar1);
        param_1[1] = (float)((float10)param_1[1] / fVar1);
        param_1[2] = (float)((float10)param_1[2] / fVar1);
    }
    return;
}

// param_1 [out]
// 0042f9f0
void rdVector_Cross3(float *param_1, float *param_2, float *param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float fVar8;

    fVar1 = param_2[0];
    fVar2 = param_3[0];
    fVar3 = param_3[2];
    fVar4 = param_3[1];
    fVar5 = param_2[2];
    fVar6 = param_2[1];
    fVar7 = param_2[1];
    fVar8 = param_3[1];
    param_1[1] = param_3[0] * param_2[2] - param_2[0] * param_3[2];
    param_1[2] = fVar1 * fVar4 - fVar2 * fVar6;
    param_1[0] = fVar3 * fVar7 - fVar5 * fVar8;
    return;
}

// 0042fa50
void rdVector_Scale3(float *param_1, float param_2, float *param_3)

{
    param_1[0] = param_3[0] * param_2;
    param_1[1] = param_3[1] * param_2;
    param_1[2] = param_3[2] * param_2;
    return;
}

// 0042fa80
void vec3f_multiply_add(float *param_1, float *param_2, float param_3, float *param_4)

{
    param_1[0] = param_4[0] * param_3 + param_2[0];
    param_1[1] = param_4[1] * param_3 + param_2[1];
    param_1[2] = param_4[2] * param_3 + param_2[2];
    return;
}

// 0042fac0
void vec3f_multiply2_add(float *param_1, float param_2, float *param_3, float param_4, float *param_5)

{
    param_1[0] = param_5[0] * param_4 + param_3[0] * param_2;
    param_1[1] = param_5[1] * param_4 + param_3[1] * param_2;
    param_1[2] = param_5[2] * param_4 + param_3[2] * param_2;
    return;
}

// 0042fb10
// Set given row (column?) of Mat4 from Vec3 ?!
void FUN_0042fb10(int param_1, int param_2, undefined_32 *param_3)

{
    undefined_32 *puVar1;

    puVar1 = (undefined_32 *)(param_2 * 0x10 + param_1);
    puVar1[0] = param_3[0];
    puVar1[1] = param_3[1];
    puVar1[2] = param_3[2];
    return;
}

// 0042fb40
// Get given row (column?) of Mat4 to Vec3 ?!
void FUN_0042fb40(int param_1, int param_2, undefined_32 *param_3)

{
    undefined_32 *puVar1;

    puVar1 = (undefined_32 *)(param_2 * 0x10 + param_1);
    param_3[0] = puVar1[0];
    param_3[1] = puVar1[1];
    param_3[2] = puVar1[2];
    return;
}

// 0042fb70
// param_1 [out]
// looks like mat mult
void mat_mult(float *param_1, float *param_2, float *param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float fVar8;
    float fVar9;
    float fVar10;
    float fVar11;
    float fVar12;
    float fVar13;
    float fVar14;
    float fVar15;
    float fVar16;
    float fVar17;
    float fVar18;
    float fVar19;
    float fVar20;
    float fVar21;
    float fVar22;
    float fVar23;
    float fVar24;
    float fVar25;
    float fVar26;
    float fVar27;
    float fVar28;
    float fVar29;
    float fVar30;
    float fVar31;
    float fVar32;

    fVar9 = param_2[2];
    fVar10 = param_2[3];
    fVar1 = param_3[0];
    fVar11 = param_2[4];
    fVar2 = param_3[1];
    fVar3 = param_3[4];
    fVar12 = param_2[5];
    fVar4 = param_3[5];
    fVar13 = param_2[6];
    fVar5 = param_2[0];
    fVar6 = param_3[8];
    fVar14 = param_2[7];
    fVar7 = param_2[1];
    fVar15 = param_2[8];
    fVar16 = param_2[9];
    fVar8 = param_3[9];
    fVar17 = param_2[10];
    fVar18 = param_2[0xb];
    fVar19 = param_2[0xc];
    fVar20 = param_2[0xd];
    fVar21 = param_2[0xe];
    fVar22 = param_3[2];
    fVar23 = param_3[6];
    fVar24 = param_2[0xf];
    fVar25 = param_3[10];
    fVar26 = param_3[3];
    fVar27 = param_3[0xc];
    fVar28 = param_3[7];
    fVar29 = param_3[0xe];
    fVar30 = param_3[0xb];
    fVar31 = param_3[0xd];
    fVar32 = param_3[0xf];
    param_1[0] = fVar27 * fVar10 + fVar6 * fVar9 + fVar3 * fVar7 + fVar1 * fVar5;
    param_1[1] = fVar31 * fVar10 + fVar8 * fVar9 + fVar4 * fVar7 + fVar2 * fVar5;
    param_1[2] = fVar29 * fVar10 + fVar25 * fVar9 + fVar23 * fVar7 + fVar22 * fVar5;
    param_1[3] = fVar32 * fVar10 + fVar30 * fVar9 + fVar28 * fVar7 + fVar26 * fVar5;
    param_1[4] = fVar27 * fVar14 + fVar6 * fVar13 + fVar3 * fVar12 + fVar1 * fVar11;
    param_1[5] = fVar31 * fVar14 + fVar8 * fVar13 + fVar4 * fVar12 + fVar2 * fVar11;
    param_1[6] = fVar29 * fVar14 + fVar25 * fVar13 + fVar23 * fVar12 + fVar22 * fVar11;
    param_1[7] = fVar32 * fVar14 + fVar30 * fVar13 + fVar28 * fVar12 + fVar26 * fVar11;
    param_1[8] = fVar27 * fVar18 + fVar6 * fVar17 + fVar3 * fVar16 + fVar1 * fVar15;
    param_1[9] = fVar31 * fVar18 + fVar8 * fVar17 + fVar4 * fVar16 + fVar2 * fVar15;
    param_1[10] = fVar29 * fVar18 + fVar25 * fVar17 + fVar23 * fVar16 + fVar22 * fVar15;
    param_1[0xb] = fVar32 * fVar18 + fVar30 * fVar17 + fVar28 * fVar16 + fVar26 * fVar15;
    param_1[0xc] = fVar27 * fVar24 + fVar6 * fVar21 + fVar3 * fVar20 + fVar1 * fVar19;
    param_1[0xd] = fVar31 * fVar24 + fVar8 * fVar21 + fVar4 * fVar20 + fVar2 * fVar19;
    param_1[0xe] = fVar29 * fVar24 + fVar25 * fVar21 + fVar23 * fVar20 + fVar22 * fVar19;
    param_1[0xf] = fVar32 * fVar24 + fVar30 * fVar21 + fVar28 * fVar20 + fVar26 * fVar19;
    return;
}

// 0042ff80
// param_1 [in] [out]
// looks like mat mult in place
void mat_mult_inplace(float *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float fVar8;
    float fVar9;
    float fVar10;
    float fVar11;
    float fVar12;
    float fVar13;
    float fVar14;
    float fVar15;
    float fVar16;

    fVar1 = param_1[8];
    fVar2 = param_1[0xc];
    fVar3 = param_1[4];
    fVar4 = param_1[0];
    fVar9 = param_1[9];
    fVar5 = param_1[5];
    fVar10 = param_1[0xd];
    fVar11 = param_1[10];
    param_1[0] = param_2[0] * fVar4 + fVar3 * param_2[1] + fVar2 * param_2[3] + fVar1 * param_2[2];
    fVar12 = param_1[0xe];
    fVar6 = param_1[1];
    fVar7 = param_1[6];
    fVar13 = param_1[3];
    param_1[1] = param_2[0] * fVar6 + fVar5 * param_2[1] + fVar10 * param_2[3] + fVar9 * param_2[2];
    fVar14 = param_1[7];
    fVar8 = param_1[2];
    fVar15 = param_1[0xb];
    fVar16 = param_1[0xf];
    param_1[2] = param_2[0] * fVar8 + fVar7 * param_2[1] + fVar12 * param_2[3] + fVar11 * param_2[2];
    param_1[3] = param_2[0] * fVar13 + fVar14 * param_2[1] + fVar16 * param_2[3] + fVar15 * param_2[2];
    param_1[4] = fVar4 * param_2[4] + fVar2 * param_2[7] + fVar1 * param_2[6] + fVar3 * param_2[5];
    param_1[5] = fVar6 * param_2[4] + fVar10 * param_2[7] + fVar9 * param_2[6] + fVar5 * param_2[5];
    param_1[6] = fVar8 * param_2[4] + fVar12 * param_2[7] + fVar11 * param_2[6] + fVar7 * param_2[5];
    param_1[7] = fVar13 * param_2[4] + fVar16 * param_2[7] + fVar15 * param_2[6] + fVar14 * param_2[5];
    param_1[8] = fVar1 * param_2[10] + fVar3 * param_2[9] + fVar4 * param_2[8] + fVar2 * param_2[0xb];
    param_1[9] = fVar9 * param_2[10] + fVar5 * param_2[9] + fVar6 * param_2[8] + fVar10 * param_2[0xb];
    param_1[10] = fVar11 * param_2[10] + fVar7 * param_2[9] + fVar8 * param_2[8] + fVar12 * param_2[0xb];
    param_1[0xb] = fVar15 * param_2[10] + fVar14 * param_2[9] + fVar13 * param_2[8] + fVar16 * param_2[0xb];
    param_1[0xc] = fVar3 * param_2[0xd] + fVar4 * param_2[0xc] + fVar2 * param_2[0xf] + fVar1 * param_2[0xe];
    param_1[0xd] = fVar5 * param_2[0xd] + fVar6 * param_2[0xc] + fVar10 * param_2[0xf] + fVar9 * param_2[0xe];
    param_1[0xe] = fVar7 * param_2[0xd] + fVar8 * param_2[0xc] + fVar12 * param_2[0xf] + fVar11 * param_2[0xe];
    param_1[0xf] = fVar14 * param_2[0xd] + fVar13 * param_2[0xc] + fVar16 * param_2[0xf] + fVar15 * param_2[0xe];
    return;
}

// 00430310
// now is that a transform matrix, a camera matrix... ?
void mat_unk1(float *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;

    fVar4 = param_2[6] * param_2[6] + param_2[5] * param_2[5] + param_2[4] * param_2[4];
    fVar1 = param_2[1];
    fVar2 = param_2[2];
    fVar3 = *param_2;
    fVar5 = param_2[10] * param_2[10] + param_2[9] * param_2[9] + param_2[8] * param_2[8];
    param_1[1] = param_2[4] / fVar4;
    param_1[2] = param_2[8] / fVar5;
    param_1[6] = param_2[9] / fVar5;
    fVar1 = fVar3 * fVar3 + fVar2 * fVar2 + fVar1 * fVar1;
    param_1[4] = param_2[1] / fVar1;
    param_1[8] = param_2[2] / fVar1;
    param_1[9] = param_2[6] / fVar4;
    *param_1 = *param_2 / fVar1;
    param_1[5] = param_2[5] / fVar4;
    fVar1 = param_2[10];
    param_1[3] = 0.0;
    param_1[7] = 0.0;
    param_1[0xb] = 0.0;
    param_1[0xf] = 1.0;
    param_1[10] = fVar1 / fVar5;
    fVar2 = param_2[0xc];
    fVar1 = param_2[0xe];
    fVar3 = param_2[0xd];
    param_1[0xc] = -(*param_1 * fVar2 + fVar3 * param_1[4] + fVar1 * param_1[8]);
    param_1[0xd] = -(fVar3 * param_1[5] + fVar2 * param_1[1] + fVar1 * param_1[9]);
    param_1[0xe] = -(fVar1 * param_1[10] + fVar3 * param_1[6] + fVar2 * param_1[2]);
    return;
}

// 004304c0
// still a matrix ?
// insert Mr incredible uncanny meme here
undefined_32 FUN_004304c0(float *param_1, float *param_2, float *param_3)

{
    float fVar1;
    float *pfVar2;
    float *pfVar3;
    float *pfVar4;
    float *pfVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    float *pfVar10;
    float local_28;
    float *local_24;
    float *local_20;
    int local_18;
    float local_c[3];

    local_20 = local_c;
    iVar8 = 0;
    pfVar10 = param_2;
    do
    {
        iVar6 = 0;
        local_28 = 0.0;
        pfVar5 = pfVar10;
        do
        {
            *(float *)(((int)param_1 - (int)param_2) + (int)pfVar5) = *pfVar5;
            fVar1 = *pfVar5;
            if (*pfVar5 < 0.0)
            {
                fVar1 = -fVar1;
            }
            if (local_28 < fVar1)
            {
                if (fVar1 == 0.0)
                {
                    return 0;
                }
                *local_20 = 1.0 / fVar1;
                local_28 = fVar1;
            }
            iVar6 = iVar6 + 1;
            pfVar5 = pfVar5 + 1;
        } while (iVar6 < 3);
        iVar8 = iVar8 + 1;
        pfVar10 = pfVar10 + 4;
        local_20 = local_20 + 1;
    } while (iVar8 < 3);
    iVar6 = 0;
    iVar8 = (int)param_3 - (int)param_1;
    local_20 = param_1;
    local_24 = param_1;
    pfVar10 = param_1;
    while (true)
    {
        iVar9 = 0;
        pfVar5 = param_1;
        pfVar3 = pfVar10;
        if (0 < iVar6)
        {
            do
            {
                fVar1 = *pfVar3;
                pfVar2 = pfVar10;
                pfVar4 = pfVar5;
                iVar7 = iVar9;
                if (0 < iVar9)
                {
                    do
                    {
                        iVar7 = iVar7 + -1;
                        fVar1 = fVar1 - *pfVar2 * *pfVar4;
                        pfVar2 = pfVar2 + 4;
                        pfVar4 = pfVar4 + 1;
                    } while (iVar7 != 0);
                }
                *pfVar3 = fVar1;
                iVar9 = iVar9 + 1;
                pfVar5 = pfVar5 + 4;
                pfVar3 = pfVar3 + 4;
            } while (iVar9 < iVar6);
        }
        local_28 = 0.0;
        if (iVar6 < 3)
        {
            param_3 = (float *)(((int)local_c - (int)param_1) + (int)pfVar10);
            pfVar5 = local_20;
            pfVar3 = local_24;
            iVar9 = iVar6;
            do
            {
                fVar1 = *pfVar5;
                pfVar2 = pfVar10;
                pfVar4 = pfVar3;
                iVar7 = iVar6;
                if (0 < iVar6)
                {
                    do
                    {
                        iVar7 = iVar7 + -1;
                        fVar1 = fVar1 - *pfVar2 * *pfVar4;
                        pfVar2 = pfVar2 + 4;
                        pfVar4 = pfVar4 + 1;
                    } while (iVar7 != 0);
                }
                *pfVar5 = fVar1;
                if (fVar1 < 0.0)
                {
                    fVar1 = -fVar1;
                }
                if (local_28 <= fVar1 * *param_3)
                {
                    local_28 = fVar1 * *param_3;
                    local_18 = iVar9;
                }
                iVar9 = iVar9 + 1;
                pfVar3 = pfVar3 + 4;
                pfVar5 = pfVar5 + 4;
                param_3 = param_3 + 1;
            } while (iVar9 < 3);
        }
        if (iVar6 != local_18)
        {
            pfVar3 = param_1 + local_18 * 4;
            iVar9 = 3;
            pfVar5 = local_24;
            do
            {
                fVar1 = *pfVar3;
                *pfVar3 = *pfVar5;
                pfVar3 = pfVar3 + 1;
                *pfVar5 = fVar1;
                iVar9 = iVar9 + -1;
                pfVar5 = pfVar5 + 1;
            } while (iVar9 != 0);
            local_c[local_18] = *(float *)(((int)local_c - (int)param_1) + (int)pfVar10);
        }
        *(int *)(iVar8 + (int)pfVar10) = local_18;
        if (*local_20 == 0.0)
            break;
        if (iVar6 != 2)
        {
            fVar1 = *local_20;
            if (iVar6 + 1 < 3)
            {
                iVar9 = 3 - (iVar6 + 1);
                pfVar5 = (float *)((int)param_1 * -3 + 0x10 + (int)pfVar10 * 4 + iVar6 * 4);
                do
                {
                    iVar9 = iVar9 + -1;
                    *pfVar5 = *pfVar5 * (1.0 / fVar1);
                    pfVar5 = pfVar5 + 4;
                } while (iVar9 != 0);
            }
        }
        iVar6 = iVar6 + 1;
        local_24 = local_24 + 4;
        pfVar10 = pfVar10 + 1;
        local_20 = local_20 + 5;
        if (2 < iVar6)
        {
            return 1;
        }
    }
    return 0;
}

// still a matrix ?
// insert Mr incredible uncanny meme here
void FUN_00430730(int param_1, int param_2, float *param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float *pfVar4;
    int iVar5;
    int iVar6;
    float *pfVar7;
    int iVar8;
    float *pfVar9;
    float *pfVar10;

    pfVar4 = param_3;
    iVar6 = -1;
    iVar8 = 0;
    param_2 = param_2 - (int)param_3;
    do
    {
        iVar5 = *(int *)(param_2 + (int)param_3);
        fVar1 = pfVar4[iVar5];
        pfVar4[iVar5] = *param_3;
        if (iVar6 < 0)
        {
            if (fVar1 != 0.0)
            {
                iVar6 = iVar8;
            }
        }
        else if (iVar6 <= iVar8 + -1)
        {
            pfVar10 = pfVar4 + iVar6;
            pfVar7 = (float *)(param_1 + (iVar6 + iVar8 * 4) * 4);
            iVar5 = ((iVar8 + -1) - iVar6) + 1;
            do
            {
                fVar2 = *pfVar10;
                fVar3 = *pfVar7;
                pfVar7 = pfVar7 + 1;
                pfVar10 = pfVar10 + 1;
                iVar5 = iVar5 + -1;
                fVar1 = fVar1 - fVar2 * fVar3;
            } while (iVar5 != 0);
        }
        *param_3 = fVar1;
        iVar8 = iVar8 + 1;
        param_3 = param_3 + 1;
    } while (iVar8 < 3);
    pfVar10 = (float *)(param_1 + 0x28);
    iVar6 = 3;
    iVar8 = 8;
    do
    {
        fVar1 = *(float *)((int)pfVar4 + iVar8);
        if (iVar6 < 3)
        {
            pfVar9 = (float *)((int)pfVar4 + iVar8 + 4);
            pfVar7 = (float *)(param_1 + (iVar6 + iVar8) * 4);
            iVar5 = 3 - iVar6;
            do
            {
                fVar2 = *pfVar7;
                fVar3 = *pfVar9;
                pfVar7 = pfVar7 + 1;
                pfVar9 = pfVar9 + 1;
                iVar5 = iVar5 + -1;
                fVar1 = fVar1 - fVar2 * fVar3;
            } while (iVar5 != 0);
        }
        fVar2 = *pfVar10;
        pfVar10 = pfVar10 + -5;
        iVar5 = iVar6 + -2;
        *(float *)((int)pfVar4 + iVar8) = fVar1 / fVar2;
        iVar6 = iVar6 + -1;
        iVar8 = iVar8 + -4;
    } while (-1 < iVar5);
    return;
}

// 00430810
// looks like a legit matrix function here
void mat_unk2(float *param_1, int param_2)

{
    float fVar1;
    float fVar2;
    undefined_32 uVar3;
    float fVar4;
    int iVar5;
    undefined_32 *puVar6;
    undefined_32 *puVar7;
    int iVar8;
    undefined_32 local_58[3];
    undefined_8 local_4c[12];
    float local_40[4];
    float local_30;
    float local_2c;
    float local_28;
    float local_20;
    float local_1c;
    float local_18;

    iVar5 = FUN_004304c0(param_1, param_2, local_4c);
    if (iVar5 != 0)
    {
        iVar5 = 0;
        do
        {
            local_58[0] = 0;
            local_58[1] = 0;
            local_58[2] = 0;
            *(undefined_32 *)((int)local_58 + iVar5) = 1.0f;
            FUN_00430730(param_1, local_4c, local_58);
            puVar7 = local_58;
            puVar6 = (undefined_32 *)((int)local_40 + iVar5);
            iVar8 = 3;
            do
            {
                uVar3 = *puVar7;
                puVar7 = puVar7 + 1;
                *puVar6 = uVar3;
                puVar6 = puVar6 + 4;
                iVar8 = iVar8 + -1;
            } while (iVar8 != 0);
            iVar5 = iVar5 + 4;
        } while (iVar5 < 0xc);
        *param_1 = local_40[0];
        param_1[1] = local_40[1];
        param_1[2] = local_40[2];
        param_1[4] = local_30;
        param_1[0xf] = 1.0;
        param_1[5] = local_2c;
        param_1[6] = local_28;
        param_1[8] = local_20;
        param_1[3] = 0.0;
        param_1[7] = 0.0;
        param_1[9] = local_1c;
        param_1[0xb] = 0.0;
        param_1[10] = local_18;
        fVar1 = *(float *)(param_2 + 0x34);
        fVar2 = *(float *)(param_2 + 0x30);
        fVar4 = *(float *)(param_2 + 0x38);
        param_1[0xc] = -(fVar2 * local_40[0] + fVar4 * local_20 + fVar1 * local_30);
        param_1[0xd] = -(fVar2 * local_40[1] + fVar4 * local_1c + fVar1 * local_2c);
        param_1[0xe] = -(fVar2 * local_40[2] + fVar4 * local_18 + fVar1 * local_28);
    }
    return;
}

// 00430980
// res [out]
void mat_transform(float *res, float *v, float *m)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float fVar8;
    float fVar9;
    float fVar10;
    float fVar11;
    float fVar12;

    fVar1 = m[6];
    fVar2 = m[10];
    fVar3 = m[2];
    fVar4 = v[1];
    fVar5 = m[4];
    fVar6 = v[2];
    fVar7 = m[8];
    fVar8 = v[0];
    fVar9 = m[0];
    fVar10 = v[1];
    fVar11 = v[2];
    fVar12 = v[0];
    res[1] = m[1] * v[0] + m[9] * v[2] + m[5] * v[1];
    res[2] = fVar3 * fVar8 + fVar2 * fVar6 + fVar1 * fVar4;
    res[0] = fVar9 * fVar12 + fVar7 * fVar11 + fVar5 * fVar10;
    return;
}

// 00430a00
// Like mat_transform but also apply translation
void mat_transform_translate(float *res, float *v, float *m)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float fVar8;
    float fVar9;
    float fVar10;
    float fVar11;
    float fVar12;
    float fVar13;
    float fVar14;

    fVar1 = m[6];
    fVar2 = m[10];
    fVar3 = m[2];
    fVar4 = v[1];
    fVar5 = m[4];
    fVar6 = v[2];
    fVar7 = m[8];
    fVar8 = *v;
    fVar9 = *m;
    fVar10 = v[1];
    fVar11 = m[0xe];
    fVar12 = v[2];
    fVar13 = v[0];
    fVar14 = m[0xc];
    res[1] = m[1] * v[0] + m[9] * v[2] + m[5] * v[1] + m[0xd];
    res[2] = fVar3 * fVar8 + fVar2 * fVar6 + fVar1 * fVar4 + fVar11;
    res[0] = fVar9 * fVar13 + fVar7 * fVar12 + fVar5 * fVar10 + fVar14;
    return;
}

// TODO: set col / line in mat ?
// 00430a90
void FUN_00430a90(undefined_32 *param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5)

{
    param_1[0] = param_2;
    param_1[1] = param_3;
    param_1[2] = param_4;
    param_1[3] = param_5;
    return;
}

void FUN_00430ab0(float *param_1, float *param_2, float *param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float fVar8;
    float fVar9;
    float fVar10;
    float fVar11;
    float fVar12;
    float fVar13;
    float fVar14;
    float fVar15;
    float fVar16;
    float fVar17;
    float fVar18;
    float fVar19;
    float fVar20;
    float fVar21;
    float fVar22;
    float fVar23;
    float fVar24;

    fVar1 = param_3[10];
    fVar2 = param_3[0xe];
    fVar3 = param_3[0xb];
    fVar4 = param_3[0xf];
    fVar5 = param_2[2];
    fVar6 = param_3[6];
    fVar7 = param_2[3];
    fVar8 = param_2[2];
    fVar9 = param_3[7];
    fVar10 = param_2[1];
    fVar11 = param_2[3];
    fVar12 = param_3[8];
    fVar13 = param_3[2];
    fVar14 = param_2[0];
    fVar15 = param_3[0xc];
    fVar16 = param_2[1];
    fVar17 = param_2[2];
    fVar18 = param_3[3];
    fVar19 = param_2[0];
    fVar20 = param_2[3];
    fVar21 = param_3[4];
    fVar22 = param_2[1];
    fVar23 = param_3[0];
    fVar24 = param_2[0];
    param_1[1] =
        param_3[1] * param_2[0] + param_3[5] * param_2[1] + param_3[0xd] * param_2[3] + param_3[9] * param_2[2];
    param_1[2] = fVar13 * fVar14 + fVar6 * fVar10 + fVar2 * fVar7 + fVar1 * fVar5;
    param_1[3] = fVar18 * fVar19 + fVar9 * fVar16 + fVar4 * fVar11 + fVar3 * fVar8;
    param_1[0] = fVar23 * fVar24 + fVar21 * fVar22 + fVar15 * fVar20 + fVar12 * fVar17;
    return;
}

void FUN_00430b80(float *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float10 fVar5;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    param_2[0] = param_1[0xc];
    param_2[1] = param_1[0xd];
    param_2[2] = param_1[0xe];
    fVar1 = param_1[4];
    fVar2 = param_1[5];
    fVar3 = param_1[6];
    local_18 = -param_1[0];
    local_14 = -param_1[1];
    local_10 = -param_1[2];
    local_1c = 0.0;
    local_24 = fVar1;
    local_20 = fVar2;
    fVar5 = (float10)rdVector_Len3(&local_24);
    fVar4 = (float)fVar5;
    if ((float10)0.001 <= fVar5)
    {
        if (local_20 / fVar4 <= 1.0)
        {
            fVar5 = (float10)ninety_minus_arctan(local_20 / fVar4);
            if (0.0 < fVar1)
            {
                fVar5 = -fVar5;
            }
        }
        else
        {
            fVar5 = (float10)0.0;
        }
        param_2[3] = (float)fVar5;
    }
    else
    {
        fVar5 = (float10)ninety_minus_arctan(-local_18);
        if (0.0 < local_14 == 0.0 < fVar3)
        {
            fVar5 = -fVar5;
        }
        param_2[5] = (float)fVar5;
        param_2[3] = 0.0;
    }
    if (0.001 <= fVar4)
    {
        fVar1 = (local_1c * fVar3 + local_20 * fVar2 + local_24 * fVar1) / fVar4;
        if (fVar1 < 1.0)
        {
            fVar5 = (float10)ninety_minus_arctan(fVar1);
            param_2[4] = (float)fVar5;
        }
        else
        {
            param_2[4] = 0.0;
        }
    }
    else
    {
        param_2[4] = 90.0;
    }
    if (fVar3 < 0.0)
    {
        param_2[4] = -param_2[4];
    }
    local_c = -local_20;
    local_8 = local_24;
    local_4 = 0.0;
    fVar5 = (float10)rdVector_Len3(&local_c);
    if (0.001 <= fVar4)
    {
        fVar1 = (float)(((float10)local_4 * (float10)local_10 + (float10)local_8 * (float10)local_14
                         + (float10)local_c * (float10)local_18)
                        / fVar5);
        if (fVar1 < 1.0)
        {
            if (-1.0 < fVar1)
            {
                fVar5 = (float10)ninety_minus_arctan(fVar1);
                param_2[5] = (float)fVar5;
            }
            else
            {
                param_2[5] = 180.0;
            }
        }
        else
        {
            param_2[5] = 0.0;
        }
        if (local_10 < 0.0)
        {
            param_2[5] = -param_2[5];
            return;
        }
    }
    return;
}

// 00430e00
// set a rotation matrix. Second argument is yaw, also used to store sin_gamma
// mat [out], yaw, roll, pitch or x, z, y rotations (NOT in this order)
void mat_add_rotation(float *m, float sin_gamma, undefined_32 roll, undefined_32 pitch)

{
    float cos_gamma;
    float sin_beta;
    float cos_beta;
    float sin_alpha;
    float cos_alpha;

    sin_cos(sin_gamma, &sin_alpha, &cos_alpha); // alpha yaw x rotation
    sin_cos(roll, &sin_gamma, &cos_gamma); // gamma roll z rotation
    sin_cos(pitch, &sin_beta, &cos_beta); // beta pitch y rotation

    // looks like every handness is opposed to the traditionnal order which look like this
    // https://math.stackexchange.com/questions/4085540/why-do-the-signs-of-sin-theta-change-in-3d-rotation-matrices-about-the-differ
    // instead we have this one where every rotation is reversed (if everything is reverse nothing is ?)
    // Ry(beta) * Rx(gamma) * Rz(alpha) == pitch * roll * yaw
    // axis explaination: https://i.ytimg.com/vi/alGbA33FByo/maxresdefault.jpg
    // [ cos(beta) |  0  | -sin(beta) ] [ 1  |      0      |     0      ] [  cos(alpha) | sin(alpha) | 0 ]
    // [ 0         |  1  |      0     ] [ 0  |  cos(gamma) | sin(gamma) ] [ -sin(alpha) | cos(alpha) | 0 ]
    // [ sin(beta) |  0  |  cos(beta) ] [ 0  | -sin(gamma) | cos(gamma) ] [      0      |     0      | 1 ]

    m[0] = cos_beta * cos_alpha - sin_beta * sin_alpha * sin_gamma;
    m[1] = sin_beta * cos_alpha * sin_gamma + cos_beta * sin_alpha;
    m[2] = -(sin_beta * cos_gamma);
    // 3 unchanged
    m[4] = -(cos_gamma * sin_alpha);
    m[5] = cos_gamma * cos_alpha;
    m[6] = sin_gamma;
    // 7 unchanged
    m[8] = cos_beta * sin_alpha * sin_gamma + sin_beta * cos_alpha;
    m[9] = sin_beta * sin_alpha - cos_beta * cos_alpha * sin_gamma;
    m[10] = cos_beta * cos_gamma;
    // 11 unchanged
    return;
}

// 00430f10
// Looks rotation for 2D ?
void FUN_00430f10(float *param_1, float param_2, undefined_32 param_3, undefined_32 param_4)

{
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    sin_cos(param_2, &local_8, &local_4);
    sin_cos(param_3, &param_2, &local_14);
    sin_cos(param_4, &local_10, &local_c);
    param_1[0] = local_c * local_4 - local_10 * local_8 * param_2;
    param_1[1] = local_10 * local_4 * param_2 + local_c * local_8;
    param_1[2] = -(local_10 * local_14);
    param_1[3] = -(local_14 * local_8);
    param_1[4] = local_14 * local_4;
    param_1[5] = param_2;
    param_1[6] = local_c * local_8 * param_2 + local_10 * local_4;
    param_1[7] = local_10 * local_8 - local_c * local_4 * param_2;
    param_1[8] = local_c * local_14;
    return;
}

// set rotation with 0 translation
void mat_set_rotation(int param_1, undefined_32 yaw, undefined_32 roll, undefined_32 pitch)

{
    *(undefined_32 *)(param_1 + 0x30) = 0; // [12]
    *(undefined_32 *)(param_1 + 0x34) = 0; // [13]
    *(undefined_32 *)(param_1 + 0x38) = 0; // [14]
    *(undefined_32 *)(param_1 + 0xc) = 0; // [3]
    *(undefined_32 *)(param_1 + 0x1c) = 0; // [7]
    *(undefined_32 *)(param_1 + 0x2c) = 0; // [11]
    *(undefined_32 *)(param_1 + 0x3c) = 1.0f; // [15]
    mat_add_rotation(param_1, yaw, roll, pitch);
    return;
}

// set rotation with translation from vector
void mat_set_rotation_translation(int param_1, undefined_32 *param_2)

{
    *(undefined_32 *)(param_1 + 0x30) = param_2[0]; // [12]
    *(undefined_32 *)(param_1 + 0x34) = param_2[1]; // [13]
    *(undefined_32 *)(param_1 + 0x38) = param_2[2]; // [14]
    *(undefined_32 *)(param_1 + 0xc) = 0; // [3]
    *(undefined_32 *)(param_1 + 0x1c) = 0; // [7]
    *(undefined_32 *)(param_1 + 0x2c) = 0; // [11]
    *(undefined_32 *)(param_1 + 0x3c) = 1.0f; // [15]
    mat_add_rotation(param_1, param_2[3], param_2[4], param_2[5]);
    return;
}

// 004310b0
void mat_set_diagonal(undefined_32 *param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    param_1[0] = param_2;
    param_1[5] = param_3;
    param_1[10] = param_4;
    param_1[1] = 0;
    param_1[2] = 0;
    param_1[3] = 0;
    param_1[4] = 0;
    param_1[6] = 0;
    param_1[7] = 0;
    param_1[8] = 0;
    param_1[9] = 0;
    param_1[0xb] = 0;
    param_1[0xc] = 0;
    param_1[0xd] = 0;
    param_1[0xe] = 0;
    param_1[0xf] = 1.0f;
    return;
}

// 00431100
void mat_set_translation(undefined_32 *param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    param_1[1] = 0;
    param_1[2] = 0;
    param_1[3] = 0;
    param_1[4] = 0;
    param_1[6] = 0;
    param_1[7] = 0;
    param_1[8] = 0;
    param_1[9] = 0;
    param_1[0xb] = 0;
    param_1[0xc] = param_2;
    param_1[0xd] = param_3;
    param_1[0] = 1.0f;
    param_1[5] = 1.0f;
    param_1[10] = 1.0f;
    param_1[0xe] = param_4;
    param_1[0xf] = 1.0f;
    return;
}

void FUN_00431150(float *param_1, float param_2, float param_3, float param_4, float param_5)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float local_20[8];

    sin_cos(param_2, local_20, &param_2);
    if (param_5 < 0.999)
    {
        if (-0.999 < param_5)
        {
            fVar4 = param_3 * param_3;
            fVar1 = param_4 * param_4;
            fVar2 = fVar1 * param_2;
            fVar5 = (1.0 - fVar4) - fVar1;
            fVar3 = fVar4 * param_2;
            param_2 = 1.0 - param_2;
            param_1[0] = (fVar3 * fVar5 + fVar2) / (1.0 - fVar5) + fVar4;
            fVar4 = param_4 * param_3 * param_2;
            param_1[5] = (fVar2 * fVar5 + fVar3) / (1.0 - fVar5) + fVar1;
            fVar1 = param_5 * param_3 * param_2;
            param_2 = param_5 * param_4 * param_2;
            param_1[10] = fVar3 + fVar2 + fVar5;
            param_1[1] = local_20[0] * param_5 + fVar4;
            param_1[4] = fVar4 - local_20[0] * param_5;
            param_1[2] = fVar1 - local_20[0] * param_4;
            param_1[8] = local_20[0] * param_4 + fVar1;
            param_1[6] = local_20[0] * param_3 + param_2;
            param_1[9] = param_2 - local_20[0] * param_3;
        }
        else
        {
            param_1[0] = param_2;
            param_1[5] = param_2;
            param_1[1] = -local_20[0];
            param_1[4] = local_20[0];
            param_1[2] = 0.0;
            param_1[6] = 0.0;
            param_1[8] = 0.0;
            param_1[9] = 0.0;
            param_1[10] = 1.0;
        }
    }
    else
    {
        param_1[0] = param_2;
        param_1[5] = param_2;
        param_1[4] = -local_20[0];
        param_1[1] = local_20[0];
        param_1[2] = 0.0;
        param_1[6] = 0.0;
        param_1[8] = 0.0;
        param_1[9] = 0.0;
        param_1[10] = 1.0;
    }
    param_1[0xc] = 0.0;
    param_1[0xd] = 0.0;
    param_1[0xe] = 0.0;
    param_1[3] = 0.0;
    param_1[7] = 0.0;
    param_1[0xb] = 0.0;
    param_1[0xf] = 1.0;
    return;
}

void FUN_00431390(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5, undefined_32 param_6)

{
    undefined_8 local_40[64];

    FUN_00431150(local_40, param_2, param_3, param_4, param_5);
    mat_mult(param_1, local_40, param_6);
    return;
}

void mat_set_identity(undefined_32 *param_1)

{
    *param_1 = 1.0f;
    param_1[1] = 0;
    param_1[2] = 0;
    param_1[3] = 0;
    param_1[4] = 0;
    param_1[5] = 1.0f;
    param_1[6] = 0;
    param_1[7] = 0;
    param_1[8] = 0;
    param_1[9] = 0;
    param_1[10] = 1.0f;
    param_1[0xb] = 0;
    param_1[0xc] = 0;
    param_1[0xd] = 0;
    param_1[0xe] = 0;
    param_1[0xf] = 1.0f;
    return;
}

void FUN_00431410(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5, undefined_32 param_6)

{
    undefined_8 local_40[64];

    FUN_00431150(local_40, param_3, param_4, param_5, param_6);
    mat_mult(param_1, param_2, local_40);
    return;
}

// 00431450
void mat_multiply_rows(float *param_1, float param_2, float param_3, float param_4, float *param_5)

{
    param_1[0] = param_2 * param_5[0];
    param_1[1] = param_5[1] * param_2;
    param_1[2] = param_5[2] * param_2;
    param_1[3] = param_5[3] * param_2;
    param_1[4] = param_5[4] * param_3;
    param_1[5] = param_5[5] * param_3;
    param_1[6] = param_5[6] * param_3;
    param_1[7] = param_5[7] * param_3;
    param_1[8] = param_5[8] * param_4;
    param_1[9] = param_5[9] * param_4;
    param_1[10] = param_5[10] * param_4;
    param_1[0xb] = param_5[0xb] * param_4;
    param_1[0xc] = param_5[0xc];
    param_1[0xd] = param_5[0xd];
    param_1[0xe] = param_5[0xe];
    param_1[0xf] = param_5[0xf];
    return;
}

void FUN_004314f0(float *param_1, float *param_2, float *param_3, float *param_4)

{
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    local_18 = param_3[0] - param_2[0];
    local_c = param_4[0] - param_3[0];
    local_8 = param_4[1] - param_3[1];
    local_4 = param_4[2] - param_3[2];
    local_14 = param_3[1] - param_2[1];
    local_10 = param_3[2] - param_2[2];
    rdVector_Cross3(param_1, &local_18, &local_c);
    rdVector_Normalize3(param_1);
    param_1[3] = param_2[0] * param_1[0] + param_1[1] * param_2[1] + param_1[2] * param_2[2];
    return;
}

void FUN_004315a0(float *param_1, float *param_2, float *param_3)

{
    param_1[0] = param_2[0];
    param_1[1] = param_2[1];
    param_1[2] = param_2[2];
    rdVector_Normalize3(param_1);
    param_1[3] = param_3[0] * param_1[0] + param_3[1] * param_1[1] + param_3[2] * param_1[2];
    return;
}

void FUN_004315f0(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    FUN_00430f10(param_1 + 0x1c, param_2, param_3, param_4);
    *(byte *)(param_1 + 0xc) = *(byte *)(param_1 + 0xc) | 3;
    return;
}

void FUN_00431620(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    *(undefined_32 *)(param_1 + 0x40) = param_2;
    *(byte *)(param_1 + 0xc) = *(byte *)(param_1 + 0xc) | 3;
    *(undefined_32 *)(param_1 + 0x44) = param_3;
    *(undefined_32 *)(param_1 + 0x48) = param_4;
    return;
}

void FUN_00431640(int param_1, undefined_32 *param_2)

{
    undefined_32 uVar1;

    *(undefined_32 *)(param_1 + 0x1c) = param_2[0];
    *(undefined_32 *)(param_1 + 0x20) = param_2[1];
    *(undefined_32 *)(param_1 + 0x24) = param_2[2];
    *(undefined_32 *)(param_1 + 0x28) = param_2[4];
    *(undefined_32 *)(param_1 + 0x2c) = param_2[5];
    *(undefined_32 *)(param_1 + 0x30) = param_2[6];
    *(undefined_32 *)(param_1 + 0x34) = param_2[8];
    *(undefined_32 *)(param_1 + 0x38) = param_2[9];
    *(undefined_32 *)(param_1 + 0x3c) = param_2[10];
    *(undefined_32 *)(param_1 + 0x40) = param_2[0xc];
    *(undefined_32 *)(param_1 + 0x44) = param_2[0xd];
    uVar1 = param_2[0xe];
    *(byte *)(param_1 + 0xc) = *(byte *)(param_1 + 0xc) | 3;
    *(undefined_32 *)(param_1 + 0x48) = uVar1;
    return;
}

void FUN_004316a0(int param_1, undefined_32 *param_2)

{
    param_2[0] = *(undefined_32 *)(param_1 + 0x1c);
    param_2[1] = *(undefined_32 *)(param_1 + 0x20);
    param_2[2] = *(undefined_32 *)(param_1 + 0x24);
    param_2[3] = 0;
    param_2[4] = *(undefined_32 *)(param_1 + 0x28);
    param_2[5] = *(undefined_32 *)(param_1 + 0x2c);
    param_2[6] = *(undefined_32 *)(param_1 + 0x30);
    param_2[7] = 0;
    param_2[8] = *(undefined_32 *)(param_1 + 0x34);
    param_2[9] = *(undefined_32 *)(param_1 + 0x38);
    param_2[10] = *(undefined_32 *)(param_1 + 0x3c);
    param_2[0xb] = 0;
    param_2[0xc] = *(undefined_32 *)(param_1 + 0x40);
    param_2[0xd] = *(undefined_32 *)(param_1 + 0x44);
    param_2[0xe] = *(undefined_32 *)(param_1 + 0x48);
    param_2[0xf] = 1.0f;
    return;
}

void FUN_00431710(undefined_32 param_1, undefined_32 param_2)

{
    undefined_8 local_40[64];

    mat_set_rotation_translation(local_40, param_2);
    FUN_00431640(param_1, local_40);
    return;
}

void FUN_00431740(int param_1, undefined_32 param_2)

{
    *(undefined_32 *)(param_1 + 0x1c) = param_2;
    return;
}

void FUN_00431750(int param_1, int param_2, undefined_32 param_3)

{
    if ((param_2 < 8) && (-1 < param_2))
    {
        *(undefined_32 *)(param_1 + 0x1c + param_2 * 4) = param_3;
    }
    return;
}

// 00431770
undefined_32 get_self(undefined_32 *param_1)

{
    return *param_1;
}

undefined_32 FUN_00431780(int param_1)

{
    return *(undefined_32 *)(param_1 + 0x14);
}

int FUN_00431790(int param_1, int param_2)

{
    if (param_1 == 0)
    {
        return param_1;
    }
    return *(int *)(*(int *)(param_1 + 0x18) + param_2 * 4);
}

int FUN_004317b0(int param_1)

{
    return (int)*(short *)(param_1 + 0x20);
}

int FUN_004317c0(int param_1)

{
    return (int)*(short *)(param_1 + 0x22);
}

undefined_32 FUN_004317d0(int param_1)

{
    return *(undefined_32 *)(param_1 + 0x24);
}

void FUN_004317e0(int param_1, int param_2, undefined_32 *param_3, undefined_32 *param_4)

{
    if (param_2 == 0)
    {
        *param_3 = *(undefined_32 *)(param_1 + 0x2c);
        *param_4 = *(undefined_32 *)(param_1 + 0x28);
        return;
    }
    *param_3 = 0;
    *param_4 = 0;
    return;
}

void FUN_00431820(int param_1, undefined_32 *param_2)

{
    param_2[0] = *(undefined_32 *)(param_1 + 8);
    param_2[1] = *(undefined_32 *)(param_1 + 0xc);
    param_2[2] = *(undefined_32 *)(param_1 + 0x10);
    param_2[3] = *(undefined_32 *)(param_1 + 0x14);
    param_2[4] = *(undefined_32 *)(param_1 + 0x18);
    param_2[5] = *(undefined_32 *)(param_1 + 0x1c);
    return;
}

undefined_32 FUN_00431850(int param_1, int param_2)

{
    return *(undefined_32 *)(*(int *)(param_1 + 0x18) + param_2 * 4);
}

void FUN_00431860(int param_1, int param_2, undefined_32 param_3)

{
    if (param_2 == 2)
    {
        *(undefined_32 *)(param_1 + 8) = param_3;
    }
    return;
}

uint FUN_00431880(uint *param_1, int param_2)

{
    uint uVar1;

    uVar1 = -1;
    if (((param_1 != NULL) && (param_2 == 1)) && (uVar1 = ((int)(char)*param_1 & 8U) >> 3, (*param_1 & 0x40) != 0))
    {
        uVar1 = (uVar1 != 0) + 2;
    }
    return uVar1;
}

// get surface pointer, a struct containing ground types
undefined_32 FUN_004318b0(int param_1)

{
    return *(undefined_32 *)(param_1 + 4);
}

// 004318c0
undefined_32 __RTC_NumErrors(void)

{
    return 4;
}

undefined_32 *FUN_004318d0(int param_1)

{
    if ((-1 < param_1) && (param_1 < 4))
    {
        return &DAT_00dfb040 + param_1 * 0x5b;
    }
    return NULL;
}

void FUN_00431900(int param_1, undefined_32 *param_2, undefined_32 *param_3)

{
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    FUN_00430b80(param_1 + 0xb0, &local_18);
    *param_2 = local_18;
    param_2[1] = local_14;
    param_2[2] = local_10;
    *param_3 = local_c;
    param_3[1] = local_8;
    param_3[2] = local_4;
    return;
}

void FUN_00431950(int param_1, undefined_32 *param_2)

{
    *(undefined_32 *)(param_1 + 0xb0) = *param_2;
    *(undefined_32 *)(param_1 + 0xb4) = param_2[1];
    *(undefined_32 *)(param_1 + 0xb8) = param_2[2];
    *(undefined_32 *)(param_1 + 0xbc) = param_2[3];
    *(undefined_32 *)(param_1 + 0xc0) = param_2[4];
    *(undefined_32 *)(param_1 + 0xc4) = param_2[5];
    *(undefined_32 *)(param_1 + 200) = param_2[6];
    *(undefined_32 *)(param_1 + 0xcc) = param_2[7];
    *(undefined_32 *)(param_1 + 0xd0) = param_2[8];
    *(undefined_32 *)(param_1 + 0xd4) = param_2[9];
    *(undefined_32 *)(param_1 + 0xd8) = param_2[10];
    *(undefined_32 *)(param_1 + 0xdc) = param_2[0xb];
    *(undefined_32 *)(param_1 + 0xe0) = param_2[0xc];
    *(undefined_32 *)(param_1 + 0xe4) = param_2[0xd];
    *(undefined_32 *)(param_1 + 0xe8) = param_2[0xe];
    *(undefined_32 *)(param_1 + 0xec) = param_2[0xf];
    mat_mult(param_1 + 0x70, param_1 + 0x30, (undefined_32 *)(param_1 + 0xb0));
    return;
}

void FUN_00431a00(int param_1, undefined_32 param_2)

{
    *(undefined_32 *)(param_1 + 0x168) = param_2;
    return;
}

void FUN_00431a10(int param_1, int param_2, undefined_32 param_3)

{
    if (param_2 == 4)
    {
        *(undefined_32 *)(param_1 + 0x15c) = param_3;
    }
    if (param_2 == 3)
    {
        *(undefined_32 *)(param_1 + 0x164) = param_3;
    }
    if (param_2 == 6)
    {
        *(undefined_32 *)(param_1 + 0x158) = param_3;
    }
    if (param_2 == 5)
    {
        *(undefined_32 *)(param_1 + 0x160) = param_3;
    }
    return;
}

// recursive
uint *FUN_00431a50(int param_1, int param_2, uint param_3, uint param_4, int param_5)

{
    uint *puVar1;
    undefined_32 uVar2;
    int iVar3;

    if (param_1 == 0)
    {
    LAB_00431af9:
        puVar1 = NULL;
    }
    else
    {
        if (param_2 == 0)
        {
            puVar1 = (uint *)(param_1 + 8);
        }
        else
        {
            if (param_2 != 2)
                goto LAB_00431af9;
            puVar1 = (uint *)(param_1 + 4);
        }
        if ((param_4 & 0x10) != 0)
        {
            if (param_5 == 2)
            {
                *puVar1 = *puVar1 | param_3;
            }
            else if (param_5 == 3)
            {
                *puVar1 = *puVar1 & param_3;
            }
            else if (param_5 == 1)
            {
                *puVar1 = param_3;
            }
        }
        if ((param_4 & 0x20) != 0)
        {
            puVar1 = (uint *)get_self(param_1);
            if (((uint)puVar1 & 0x4000) != 0)
            {
                iVar3 = 0;
                puVar1 = (uint *)FUN_00431780(param_1);
                if (0 < (int)puVar1)
                {
                    do
                    {
                        uVar2 = FUN_00431790(param_1, iVar3, param_2, param_3, param_4 & 0x10, param_5);
                        FUN_00431a50(uVar2);
                        iVar3 = iVar3 + 1;
                        puVar1 = (uint *)FUN_00431780(param_1);
                    } while (iVar3 < (int)puVar1);
                    return puVar1;
                }
            }
        }
    }
    return puVar1;
}

undefined_32 FUN_00431b00(int param_1, int param_2)

{
    if (param_2 == 0)
    {
        return *(undefined_32 *)(param_1 + 8);
    }
    if (param_2 == 2)
    {
        return *(undefined_32 *)(param_1 + 4);
    }
    return 0;
}

void FUN_00431b20(uint *param_1, uint param_2)

{
    param_1[1] = -1;
    param_1[2] = -1;
    *param_1 = param_2;
    *(undefined_16 *)(param_1 + 3) = 0;
    *(undefined_16 *)((int)param_1 + 0xe) = 0;
    param_1[4] = 0;
    if ((param_2 & 0x4000) != 0)
    {
        param_1[5] = 0;
        param_1[6] = 0;
        if (param_2 == 0xd065)
        {
            param_1[0x13] = 0;
            param_1[0x14] = 0;
            param_1[0x15] = 0;
            param_1[7] = 1.0f;
            param_1[8] = 0;
            param_1[9] = 0;
            param_1[10] = 0;
            param_1[0xb] = 1.0f;
            param_1[0xc] = 0;
            param_1[0xd] = 0;
            param_1[0xe] = 0;
            param_1[0xf] = 1.0f;
            param_1[0x10] = 0;
            param_1[0x11] = 0;
            param_1[0x12] = 0;
        }
    }
    return;
}

void FUN_00431b90(int param_1, undefined_32 param_2)

{
    *(undefined_32 *)(param_1 + 4) = param_2;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00431ba0(void)

{
    _DAT_00e996c0 = 0;
    _DAT_00e996c4 = 0;
    _DAT_00e996c8 = 0;
    _DAT_00e996cc = 0;
    _DAT_00e996d0 = 0;
    _DAT_00e996d4 = 0;
    _DAT_00e996d8 = 0;
    _DAT_00e996e0 = 0;
    _DAT_00e996e2 = 2;
    DAT_00e996dc = 9;
    _DAT_00e996e8 = 1.0f;
    _DAT_00e996e4 = 1.0f;
    _DAT_00e996ec = 0;
    _DAT_00e996f0 = 1;
    _DAT_00e996f4 = 0x1e;
    _DAT_00e996f6 = 0;
    _DAT_00e996f8 = 0;
    return;
}

void FUN_00431c40(void)

{
    int *piVar1;
    int iVar2;
    undefined_32 unaff_EDI;
    undefined_32 *puVar3;
    undefined_32 *unaff_retaddr;
    undefined_32 local_7c[4];
    undefined_32 uStack_6c;
    uint uStack_3c;
    uint *puStack_10;
    undefined_32 *puStack_c;
    undefined_32 *puStack_8;
    undefined_32 *puStack_4;

    piVar1 = (int *)FUN_00488a80();
    puVar3 = local_7c;
    MEMSET(iVar2, puVar3, 0, 0x1f)
    local_7c[0] = 0x7c;
    (**(code **)(*piVar1 + 100))(piVar1, 0, local_7c, 1, 0);
    *puStack_c = unaff_EDI;
    *puStack_10 = uStack_3c >> 3;
    *puStack_8 = uStack_6c;
    *puStack_4 = *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x48) + 4);
    *unaff_retaddr = *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x48) + 8);
    return;
}

void FUN_00431cd0(void)

{
    int *piVar1;

    piVar1 = (int *)FUN_00488a80();
    (**(code **)(*piVar1 + 0x80))(piVar1, 0);
    return;
}

void FUN_00431cf0(char *param_1)

{
    int iVar1;
    int unaff_EBX;
    int *unaff_EBP;
    undefined_32 *puVar2;
    ushort *puVar3;
    undefined_32 *puVar4;
    int iVar5;
    undefined_8 *puVar6;
    undefined_32 local_80[2];
    ushort *puStack_78;

    local_80[0] = 0;
    iVar1 = _strncmp(param_1, s_invert_004bfd08, 5);
    if (iVar1 != 0)
    {
        _sprintf(param_1, s_invert_004bfd08);
        puVar2 = local_80;
        puVar6 = &DAT_004af208;
        (**(code **)**(undefined_32 **)(*(int *)(param_1 + 0x90) + 0x7c))(
            *(undefined_32 **)(*(int *)(param_1 + 0x90) + 0x7c));
        puVar4 = (undefined_32 *)&stack0xffffff78;
        MEMSET(iVar1, puVar4, 0, 0x1f)
        (**(code **)(*unaff_EBP + 100))(unaff_EBP, 0, &stack0xffffff78, 1);
        if (((uint)puVar6 & 8) == 0)
        {
            iVar1 = 0;
        }
        else
        {
            iVar1 = (int)unaff_EBP / 2;
        }
        if (0 < (int)puVar2)
        {
            do
            {
                puVar3 = puStack_78;
                iVar5 = unaff_EBX;
                if (0 < unaff_EBX)
                {
                    do
                    {
                        puStack_78 = puVar3 + 1;
                        iVar5 = iVar5 + -1;
                        *puVar3 = *puVar3 & 0xfff | ~(*puVar3 & 0xf000);
                        puVar3 = puStack_78;
                    } while (iVar5 != 0);
                }
                puVar2 = (undefined_32 *)((int)puVar2 + -1);
                puStack_78 = puStack_78 + (iVar1 - unaff_EBX);
            } while (puVar2 != NULL);
        }
        (**(code **)(iRam00000000 + 0x80))(0, 0);
    }
    return;
}

// texture.c
//----- (00431DF0) --------------------------------------------------------
// Color inversion?
// (not actually a function?)
// a3 = must be anything but "invcol"
// Probably returns void
void FUN_00431df0(char *param_1)

{
    int iVar1;
    int unaff_EBX;
    int *unaff_EBP;
    undefined_32 *puVar2;
    ushort *puVar3;
    undefined_32 *puVar4;
    int iVar5;
    undefined_8 *puVar6;
    undefined_32 local_80[2];
    ushort *puStack_78;

    local_80[0] = 0;
    iVar1 = _strncmp(param_1, s_invcol_004bfd10, 5);
    if (iVar1 != 0)
    {
        _sprintf(param_1, s_invcol_004bfd10);
        puVar2 = local_80;
        puVar6 = &DAT_004af208;
        // something->QueryInterface(
        //     &unk_4AF208, &v11); // FIXME: Used to say `.., &v10, a, b); ?!
        (**(code **)**(undefined_32 **)(*(int *)(param_1 + 0x90) + 0x7c))(
            *(undefined_32 **)(*(int *)(param_1 + 0x90) + 0x7c));
        puVar4 = (undefined_32 *)&stack0xffffff78;
        MEMSET(iVar1, puVar4, 0, 0x1f)
        // v11->Lock(0, &v12, 1, 0);
        (**(code **)(*unaff_EBP + 100))(unaff_EBP, 0, &stack0xffffff78, 1);
        if (((uint)puVar6 & 8) == 0)
        {
            iVar1 = 0;
        }
        else
        {
            iVar1 = (int)unaff_EBP / 2;
        }
        if (0 < (int)puVar2)
        {
            do
            {
                puVar3 = puStack_78;
                iVar5 = unaff_EBX;
                if (0 < unaff_EBX)
                {
                    do
                    {
                        puStack_78 = puVar3 + 1;
                        iVar5 = iVar5 + -1;
                        *puVar3 = *puVar3 & 0xf000 | ~(*puVar3 & 0xfff);
                        puVar3 = puStack_78;
                    } while (iVar5 != 0);
                }
                puVar2 = (undefined_32 *)((int)puVar2 + -1);
                puStack_78 = puStack_78 + (iVar1 - unaff_EBX);
            } while (puVar2 != NULL);
        }
        // v11->Unlock(0);
        (**(code **)(iRam00000000 + 0x80))(0, 0);
    }
    return;
}

// WARNING: Removing unreachable block (ram,0x00431f7f)

void FUN_00431ef0(char *param_1)

{
    int iVar1;
    undefined_8 *puVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    int *piVar5;
    undefined_8 *puVar6;
    int *piVar7;
    int local_80[2];
    int iStack_78;

    local_80[0] = 0;
    iVar1 = _strncmp(param_1, s_noalpha_004bfd18, 7);
    if (iVar1 != 0)
    {
        _sprintf(param_1, s_noalpha_004bfd18);
        piVar7 = local_80;
        puVar4 = *(undefined_32 **)(*(int *)(param_1 + 0x90) + 0x7c);
        puVar6 = &DAT_004af208;
        (**(code **)*puVar4)();
        puVar3 = (undefined_32 *)&stack0xffffff78;
        MEMSET(iVar1, puVar3, 0, 0x1f)
        piVar5 = (int *)&stack0xffffff78;
        (**(code **)(*piVar7 + 100))(piVar7, 0, piVar5, 1);
        if (0 < (int)puVar4)
        {
            do
            {
                puVar2 = puVar6;
                if (0 < (int)puVar6)
                {
                    do
                    {
                        *(byte *)(iStack_78 + 1) = *(byte *)(iStack_78 + 1) | 0x80;
                        iStack_78 = iStack_78 + 2;
                        puVar2 = puVar2 + -1;
                    } while (puVar2 != NULL);
                }
                puVar4 = (undefined_32 *)((int)puVar4 + -1);
                iStack_78 = iStack_78 + ((int)piVar5 - (int)puVar6) * 2;
            } while (puVar4 != NULL);
        }
        (**(code **)(*piVar5 + 0x80))(piVar5, 0);
    }
    return;
}

// WARNING: Removing unreachable block (ram,0x0043205f)

void FUN_00431fd0(char *param_1)

{
    int iVar1;
    undefined_8 *puVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    int *piVar5;
    undefined_8 *puVar6;
    int *piVar7;
    int local_80[2];
    int iStack_78;

    local_80[0] = 0;
    iVar1 = _strncmp(param_1, s_noalpha_004bfd18, 7);
    if (iVar1 != 0)
    {
        _sprintf(param_1, s_noalpha_004bfd18);
        piVar7 = local_80;
        puVar4 = *(undefined_32 **)(*(int *)(param_1 + 0x90) + 0x7c);
        puVar6 = &DAT_004af208;
        (**(code **)*puVar4)();
        puVar3 = (undefined_32 *)&stack0xffffff78;
        MEMSET(iVar1, puVar3, 0, 0x1f)
        piVar5 = (int *)&stack0xffffff78;
        (**(code **)(*piVar7 + 100))(piVar7, 0, piVar5, 1);
        if (0 < (int)puVar4)
        {
            do
            {
                puVar2 = puVar6;
                if (0 < (int)puVar6)
                {
                    do
                    {
                        *(byte *)(iStack_78 + 1) = *(byte *)(iStack_78 + 1) | 0xf0;
                        iStack_78 = iStack_78 + 2;
                        puVar2 = puVar2 + -1;
                    } while (puVar2 != NULL);
                }
                puVar4 = (undefined_32 *)((int)puVar4 + -1);
                iStack_78 = iStack_78 + ((int)piVar5 - (int)puVar6) * 2;
            } while (puVar4 != NULL);
        }
        (**(code **)(*piVar5 + 0x80))(piVar5, 0);
    }
    return;
}

// WARNING: Removing unreachable block (ram,0x0043213f)

void FUN_004320b0(char *param_1)

{
    int iVar1;
    undefined_8 *puVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    int *piVar5;
    undefined_8 *puVar6;
    int *piVar7;
    int local_80[2];
    ushort *puStack_78;

    local_80[0] = 0;
    iVar1 = _strncmp(param_1, s_saturate_004bfd20, 8);
    if (iVar1 != 0)
    {
        _sprintf(param_1, s_saturate_004bfd20);
        piVar7 = local_80;
        puVar4 = *(undefined_32 **)(*(int *)(param_1 + 0x90) + 0x7c);
        puVar6 = &DAT_004af208;
        (**(code **)*puVar4)();
        puVar3 = (undefined_32 *)&stack0xffffff78;
        MEMSET(iVar1, puVar3, 0, 0x1f)
        piVar5 = (int *)&stack0xffffff78;
        (**(code **)(*piVar7 + 100))(piVar7, 0, piVar5, 1);
        if (0 < (int)puVar4)
        {
            do
            {
                puVar2 = puVar6;
                if (0 < (int)puVar6)
                {
                    do
                    {
                        *puStack_78 = *puStack_78 | 0xfff;
                        puStack_78 = puStack_78 + 1;
                        puVar2 = puVar2 + -1;
                    } while (puVar2 != NULL);
                }
                puVar4 = (undefined_32 *)((int)puVar4 + -1);
                puStack_78 = puStack_78 + ((int)piVar5 - (int)puVar6);
            } while (puVar4 != NULL);
        }
        (**(code **)(*piVar5 + 0x80))(piVar5, 0);
    }
    return;
}

void FUN_00432190(undefined_32 param_1)

{
    DAT_0050c0cc = 1;
    DAT_00e996a4 = param_1;
    return;
}

void FUN_004321b0(short param_1, short param_2, short param_3, short param_4, float param_5, float param_6, int param_7,
                  int param_8, float param_9)

{
    float fVar1;
    float *pfVar2;
    short sVar3;
    undefined_32 *puVar4;
    int iVar5;
    int iVar6;
    uint uVar7;
    int iVar8;
    undefined_32 *puVar9;
    undefined_32 *puVar10;
    float10 extraout_ST0;
    float10 fVar11;
    float10 extraout_ST0_00;
    float10 fVar12;
    float10 extraout_ST0_01;
    float10 extraout_ST1;
    float10 extraout_ST1_00;
    float10 extraout_ST1_01;
    short local_14;

    if ((DAT_0050c9fc == 0) || ((float)DAT_0050c9fc != param_9))
    {
        if (DAT_0050ca00 == 0)
        {
            return;
        }
        if ((float)DAT_0050ca00 != param_9)
        {
            return;
        }
        param_9 = DAT_0050ca08;
    }
    else
    {
        param_9 = DAT_0050ca04;
    }
    puVar4 = (undefined_32 *)FUN_0048dba0();
    if (param_7 == 1)
    {
        FUN_004320b0(DAT_00e996a4);
    }
    puVar10 = (undefined_32 *)puVar4[6];
    *puVar4 = 0x2e;
    puVar4[1] = 1;
    puVar4[7] = DAT_00e996a4;
    puVar4[8] = 0;
    puVar4[0xd] = 0;
    puVar4[0xe] = 0;
    puVar4[0xf] = 0;
    pfVar2 = (float *)puVar4[4];
    puVar9 = (undefined_32 *)puVar4[5];
    fVar1 = *(float *)(*(int *)(DAT_00df7f2c + 0x48) + 4);
    if (param_8 == 1)
    {
        fVar1 = 100.0;
    }
    iVar5 = (int)param_2;
    iVar8 = (int)param_4;
    iVar6 = (int)param_1;
    param_5 = param_5 / (float)(ulonglong) * (uint *)(puVar4[7] + 0x80);
    param_6 = param_6 / (float)(ulonglong) * (uint *)(puVar4[7] + 0x84);
    if (0.25 <= param_9)
    {
        if (0.75 <= param_9)
        {
            puVar4[2] = 5;
            fVar12 = (float10)iVar8;
            pfVar2[6] = (float)iVar6;
            pfVar2[7] = (float)iVar5;
            pfVar2[8] = fVar1;
            pfVar2[9] = (float)iVar6;
            pfVar2[10] = (float)iVar8;
            pfVar2[0xb] = fVar1;
            sVar3 = __ftol();
            pfVar2[0xc] = (float)(sVar3 + iVar6);
            pfVar2[0xd] = (float)extraout_ST1_01;
            pfVar2[0xe] = (float)fVar12;
            puVar9[4] = param_5;
            puVar9[6] = param_5;
            puVar9[5] = 0;
            puVar9[7] = param_6;
            puVar9[9] = param_6;
            puVar9[8] = param_5 - (param_9 - 0.75) * 4.0 * (param_5 - param_5 * 0.5);
            fVar11 = extraout_ST0_01;
        }
        else
        {
            puVar4[2] = 4;
            pfVar2[6] = (float)iVar6;
            pfVar2[7] = (float)iVar5;
            pfVar2[8] = fVar1;
            pfVar2[9] = (float)iVar6;
            sVar3 = __ftol();
            pfVar2[10] = (float)(sVar3 + iVar5);
            pfVar2[0xb] = (float)extraout_ST1_00;
            puVar9[4] = param_5;
            puVar9[5] = 0;
            puVar9[6] = param_5;
            puVar9[7] = param_6 * ((param_9 + param_9) - 0.5);
            fVar11 = extraout_ST0_00;
            fVar12 = extraout_ST1_00;
        }
    }
    else
    {
        puVar4[2] = 3;
        sVar3 = __ftol();
        fVar11 = (float10)iVar5;
        pfVar2[6] = (float)((int)param_3 - (int)sVar3);
        pfVar2[7] = (float)iVar5;
        pfVar2[8] = (float)extraout_ST1;
        puVar9[5] = 0;
        puVar9[4] = (float)((float10)param_5 * extraout_ST0);
        fVar12 = extraout_ST1;
    }
    local_14 = (short)(iVar5 + iVar8 >> 1);
    fVar1 = (float)(int)param_3;
    pfVar2[1] = (float)(int)local_14;
    pfVar2[2] = (float)fVar12;
    pfVar2[3] = fVar1;
    pfVar2[4] = (float)fVar11;
    pfVar2[5] = (float)fVar12;
    *pfVar2 = fVar1;
    puVar9[1] = param_6 * 0.5;
    *puVar9 = 0;
    puVar9[2] = 0;
    puVar9[3] = 0;
    iVar5 = (int)&DAT_00e37530 - (int)puVar10;
    iVar6 = 4;
    do
    {
        uVar7 = 0;
        puVar9 = puVar10;
        if (puVar4[2] != 0)
        {
            do
            {
                uVar7 = uVar7 + 1;
                *puVar9 = *(undefined_32 *)(iVar5 + (int)puVar10);
                puVar9 = puVar9 + 4;
            } while (uVar7 < (uint)puVar4[2]);
        }
        puVar10 = puVar10 + 1;
        iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
    FUN_0048de10(puVar4[2], 7);
    return;
}

void FUN_00432580(int param_1)

{
    uint uVar1;
    int iVar2;

    uVar1 = 0;
    if (*(int *)(param_1 + 0x7c) != 0)
    {
        iVar2 = 0;
        do
        {
            uVar1 = uVar1 + 1;
            *(undefined_32 *)(*(int *)(param_1 + 0x6c) + 0x1c + iVar2) = DAT_00e996a4;
            iVar2 = iVar2 + 0x48;
        } while (uVar1 < *(uint *)(param_1 + 0x7c));
    }
    return;
}

void FUN_004325b0(short param_1, short param_2, short param_3, short param_4, float param_5, float param_6, int param_7,
                  int param_8)

{
    float fVar1;
    float *pfVar2;
    float *pfVar3;
    undefined_32 *puVar4;
    uint uVar5;
    undefined_32 *puVar6;

    puVar6 = (undefined_32 *)FUN_0048dba0();
    if (param_7 == 1)
    {
        FUN_004320b0(DAT_00e996a4);
    }
    *puVar6 = 0x2e;
    puVar6[1] = 1;
    puVar6[2] = 4;
    puVar6[0xe] = 0;
    puVar6[0xf] = 0;
    pfVar2 = (float *)puVar6[5];
    puVar6[7] = DAT_00e996a4;
    puVar6[8] = 0;
    puVar6[0xd] = 0;
    pfVar3 = (float *)puVar6[4];
    puVar4 = (undefined_32 *)puVar6[6];
    fVar1 = *(float *)(*(int *)(DAT_00df7f2c + 0x48) + 4);
    if (param_8 == 1)
    {
        fVar1 = 50.0;
    }
    pfVar3[2] = fVar1;
    pfVar3[5] = fVar1;
    pfVar3[8] = fVar1;
    pfVar3[0xb] = fVar1;
    *pfVar3 = (float)(int)param_1;
    pfVar3[1] = (float)(int)param_2;
    pfVar3[3] = (float)(int)param_1;
    pfVar3[4] = (float)(int)param_4;
    pfVar3[6] = (float)(int)param_3;
    pfVar3[7] = (float)(int)param_4;
    pfVar3[9] = (float)(int)param_3;
    pfVar3[10] = (float)(int)param_2;
    puVar4[0xc] = DAT_00e37530;
    puVar4[8] = DAT_00e37530;
    puVar4[4] = DAT_00e37530;
    *puVar4 = DAT_00e37530;
    puVar4[0xd] = DAT_00e37534;
    puVar4[9] = DAT_00e37534;
    puVar4[5] = DAT_00e37534;
    puVar4[1] = DAT_00e37534;
    puVar4[0xe] = DAT_00e37538;
    puVar4[10] = DAT_00e37538;
    puVar4[6] = DAT_00e37538;
    puVar4[2] = DAT_00e37538;
    puVar4[0xf] = DAT_00e3753c;
    puVar4[0xb] = DAT_00e3753c;
    puVar4[7] = DAT_00e3753c;
    puVar4[3] = DAT_00e3753c;
    uVar5 = *(uint *)(puVar6[7] + 0x80);
    pfVar2[1] = 0.0;
    *pfVar2 = param_5 / (float)(ulonglong)uVar5;
    pfVar2[2] = param_5 / (float)(ulonglong) * (uint *)(puVar6[7] + 0x80);
    uVar5 = *(uint *)(puVar6[7] + 0x84);
    pfVar2[4] = 0.0;
    pfVar2[3] = param_6 / (float)(ulonglong)uVar5;
    uVar5 = *(uint *)(puVar6[7] + 0x84);
    pfVar2[6] = 0.0;
    pfVar2[7] = 0.0;
    pfVar2[5] = param_6 / (float)(ulonglong)uVar5;
    FUN_0048de10(puVar6[2], 7);
    return;
}

void FUN_004327e0(short param_1, short param_2, short param_3, short param_4, short param_5, short param_6,
                  short param_7, short param_8)

{
    float fVar1;
    float *pfVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    undefined_32 uVar5;
    undefined_32 *puVar6;

    puVar6 = (undefined_32 *)FUN_0048dba0();
    *puVar6 = 0x2e;
    puVar6[1] = 1;
    puVar6[2] = 4;
    puVar6[0xe] = 0;
    puVar6[0xf] = 0;
    uVar5 = DAT_00e996a4;
    puVar6[8] = 0;
    puVar6[7] = uVar5;
    puVar6[0xd] = 0;
    pfVar2 = (float *)puVar6[4];
    fVar1 = *(float *)(*(int *)(DAT_00df7f2c + 0x48) + 4);
    puVar3 = (undefined_32 *)puVar6[5];
    puVar4 = (undefined_32 *)puVar6[6];
    *pfVar2 = (float)(int)param_1;
    pfVar2[1] = (float)(int)param_2;
    pfVar2[2] = fVar1;
    pfVar2[3] = (float)(int)param_3;
    pfVar2[4] = (float)(int)param_4;
    pfVar2[5] = fVar1;
    pfVar2[6] = (float)(int)param_5;
    pfVar2[7] = (float)(int)param_6;
    pfVar2[8] = fVar1;
    pfVar2[9] = (float)(int)param_7;
    pfVar2[10] = (float)(int)param_8;
    pfVar2[0xb] = fVar1;
    puVar4[0xc] = DAT_00e37530;
    puVar4[8] = DAT_00e37530;
    puVar4[4] = DAT_00e37530;
    *puVar4 = DAT_00e37530;
    puVar4[0xd] = DAT_00e37534;
    puVar4[9] = DAT_00e37534;
    puVar4[5] = DAT_00e37534;
    puVar4[1] = DAT_00e37534;
    puVar4[0xe] = DAT_00e37538;
    puVar4[10] = DAT_00e37538;
    puVar4[6] = DAT_00e37538;
    puVar4[2] = DAT_00e37538;
    puVar4[0xf] = DAT_00e3753c;
    puVar4[0xb] = DAT_00e3753c;
    puVar4[7] = DAT_00e3753c;
    puVar4[3] = DAT_00e3753c;
    *puVar3 = 1.0f;
    puVar3[2] = 1.0f;
    puVar3[3] = 1.0f;
    puVar3[5] = 1.0f;
    puVar3[1] = 0;
    puVar3[4] = 0;
    puVar3[6] = 0;
    puVar3[7] = 0;
    FUN_0048de10(puVar6[2], 7);
    return;
}

void FUN_004329c0(short param_1, short param_2, short param_3, short param_4, undefined_32 param_5,
                  undefined_32 param_6, undefined_32 param_7, undefined_32 param_8)

{
    float fVar1;
    float *pfVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    undefined_32 uVar5;
    undefined_32 *puVar6;

    puVar6 = (undefined_32 *)FUN_0048dba0();
    *puVar6 = 0x2e;
    puVar6[1] = 1;
    puVar6[2] = 4;
    puVar6[0xe] = 0;
    puVar6[0xf] = 0;
    uVar5 = DAT_00e996a4;
    puVar6[8] = 0;
    puVar6[7] = uVar5;
    puVar6[0xd] = 0;
    fVar1 = *(float *)(*(int *)(DAT_00df7f2c + 0x48) + 4);
    pfVar2 = (float *)puVar6[4];
    puVar3 = (undefined_32 *)puVar6[5];
    puVar4 = (undefined_32 *)puVar6[6];
    *pfVar2 = (float)(int)param_1;
    pfVar2[2] = fVar1;
    pfVar2[3] = (float)(int)param_1;
    pfVar2[5] = fVar1;
    pfVar2[1] = (float)(int)param_2;
    pfVar2[6] = (float)(int)param_3;
    pfVar2[7] = (float)(int)param_4;
    pfVar2[4] = (float)(int)param_4;
    pfVar2[8] = fVar1;
    pfVar2[9] = (float)(int)param_3;
    pfVar2[10] = (float)(int)param_2;
    pfVar2[0xb] = fVar1;
    puVar4[0xc] = DAT_00e37530;
    puVar4[8] = DAT_00e37530;
    puVar4[4] = DAT_00e37530;
    *puVar4 = DAT_00e37530;
    puVar4[0xd] = DAT_00e37534;
    puVar4[9] = DAT_00e37534;
    puVar4[5] = DAT_00e37534;
    puVar4[1] = DAT_00e37534;
    puVar4[0xe] = DAT_00e37538;
    puVar4[10] = DAT_00e37538;
    puVar4[6] = DAT_00e37538;
    puVar4[2] = DAT_00e37538;
    puVar4[0xf] = DAT_00e3753c;
    puVar4[0xb] = DAT_00e3753c;
    puVar4[7] = DAT_00e3753c;
    puVar4[3] = DAT_00e3753c;
    puVar3[1] = param_6;
    *puVar3 = param_5;
    puVar3[2] = param_5;
    puVar3[3] = param_8;
    puVar3[5] = param_8;
    puVar3[4] = param_7;
    puVar3[6] = param_7;
    puVar3[7] = param_6;
    FUN_0048de10(puVar6[2], 7);
    return;
}

void FUN_00432b80(int param_1, byte **param_2)

{
    byte *pbVar1;
    float fVar2;
    int iVar3;
    float *pfVar4;
    float *pfVar5;
    float *pfVar6;
    uint uVar7;
    float *pfVar8;
    int iVar9;
    byte *pbVar10;
    int iVar11;
    float local_10[4];

    iVar3 = *(int *)(param_1 + 0x54);
    pfVar4 = *(float **)(param_1 + 0x58);
    iVar9 = *(int *)(param_1 + 0x74);
    pbVar10 = *param_2;
    local_10[3] = 1.0;
    local_10[2] = 1.0;
    local_10[1] = 1.0;
    local_10[0] = 1.0;
    if (pbVar10 != NULL)
    {
        iVar11 = *(int *)(pbVar10 + 0xc);
        if (iVar11 != 0)
        {
            if ((*(byte *)(param_1 + 0x88) & 1) != 0)
            {
                local_10[0] = (float)(uint) * (byte *)(iVar11 + 0x22) * 0.003921569;
                local_10[1] = (float)(uint) * (byte *)(iVar11 + 0x23) * 0.003921569;
                local_10[2] = (float)(uint) * (byte *)(iVar11 + 0x24) * 0.003921569;
            }
            if ((*(byte *)(param_1 + 0x88) & 2) != 0)
            {
                local_10[3] = (float)(uint) * (byte *)(iVar11 + 0x25) * 0.003921569;
            }
        }
        if (((*pbVar10 & 0x11) == 0) && ((*(byte *)(param_1 + 0x88) & 4) == 0))
        {
            if (iVar9 != 0)
            {
                pbVar10 = param_2[0xd] + 0xc;
                pfVar5 = pfVar4;
                param_1 = iVar9;
                do
                {
                    uVar7 = 0;
                    pfVar6 = pfVar5;
                    pfVar8 = local_10;
                    do
                    {
                        pbVar1 = pbVar10 + uVar7;
                        uVar7 = uVar7 + 1;
                        pfVar5 = pfVar6 + 1;
                        fVar2 = (float)(uint)*pbVar1 * *pfVar8 * 0.003921569;
                        *(float *)((iVar3 - (int)pfVar4) + -4 + (int)pfVar5) = fVar2;
                        *pfVar6 = fVar2;
                        pfVar6 = pfVar5;
                        pfVar8 = pfVar8 + 1;
                    } while (uVar7 < 4);
                    pbVar10 = pbVar10 + 0x10;
                    param_1 = param_1 + -1;
                } while (param_1 != 0);
                return;
            }
        }
        else if (iVar9 != 0)
        {
            pbVar10 = param_2[0xd] + 0xf;
            pfVar5 = pfVar4 + 3;
            param_2 = (byte **)iVar9;
            do
            {
                pfVar8 = local_10;
                pfVar6 = pfVar5 + -3;
                iVar9 = iVar3 - (int)pfVar4;
                iVar11 = 4;
                do
                {
                    fVar2 = *pfVar8;
                    pfVar8 = pfVar8 + 1;
                    *(float *)((int)pfVar6 + iVar9) = fVar2;
                    *pfVar6 = fVar2;
                    pfVar6 = pfVar6 + 1;
                    iVar11 = iVar11 + -1;
                } while (iVar11 != 0);
                if ((*(byte *)(param_1 + 0x88) & 4) != 0)
                {
                    fVar2 = (float)(uint)*pbVar10 * local_10[3] * 0.003921569;
                    *(float *)((int)pfVar5 + iVar9) = fVar2;
                    *pfVar5 = fVar2;
                }
                pbVar10 = pbVar10 + 0x10;
                pfVar5 = pfVar5 + 4;
                param_2 = (byte **)((int)param_2 + -1);
            } while (param_2 != (byte **)0x0);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00432d30(void)

{
    undefined_32 *puVar1;
    byte bVar2;
    byte *pbVar3;
    int iVar4;
    float fVar5;
    float fVar6;
    bool bVar7;
    uint uVar8;
    int iVar9;
    float *pfVar10;
    undefined_32 uVar11;
    uint uVar12;
    int iVar13;
    char cVar14;
    float *pfVar16;
    int *piVar17;
    uint uVar18;
    float *pfVar19;
    uint uVar20;
    uint *puVar21;
    ushort *puVar22;
    uint *puVar23;
    undefined_32 *puVar24;
    float *pfVar25;
    byte bVar26;
    uint param_1;
    float param_2;
    float *param_3;
    float param_4;
    int param_5;
    uint param_7;
    uint param_8;
    char cStack00000026;
    char cStack00000029;
    char cStack0000002a;
    uint param_11;
    int param_12;
    uint param_15;
    uint param_16;
    int *in_stack_00024050;
    int in_stack_00024054;
    byte **in_stack_00024058;
    uint in_stack_0002405c;
    char cVar15;

    __alloca_probe();
    uVar18 = 0;
    pbVar3 = *in_stack_00024058;
    bVar7 = false;
    param_5 = 0;
    param_7 = 0;
    param_4 = 1.0;
    param_2 = 1.0;
    param_15 = 0;
    bVar26 = 0;
    param_16 = 1;
    if (pbVar3 == NULL)
        goto LAB_00432f8f;
    iVar9 = *(int *)(pbVar3 + 0xc);
    iVar13 = *(int *)(pbVar3 + 8);
    if (iVar13 == 0)
    {
        param_15 = FUN_00409040(pbVar3);
    }
    else
    {
        param_15 = *(uint *)(iVar13 + 0x38);
        if (*(int *)(iVar13 + 0x1c) != 0)
        {
            bVar2 = *(byte *)(*(int *)(iVar13 + 0x1c) + 3);
            if ((bVar2 & 0x10) != 0)
            {
                param_4 = 2.0;
            }
            if ((bVar2 & 1) != 0)
            {
                param_2 = 2.0;
            }
            if (((bVar2 & 0x20) != 0) && ((bVar2 & 2) != 0))
            {
                param_5 = 1;
            }
        }
    }
    if (iVar9 != 0)
    {
        uVar18 = *(uint *)(iVar9 + 0x18) | *(uint *)(iVar9 + 0x1c);
        uVar8 = 0;
        do
        {
            if ((*(char *)(uVar8 + 6 + iVar9) == '\x03') || (*(char *)(iVar9 + 0xe + uVar8) == '\x03'))
            {
                bVar26 = 1;
                break;
            }
            uVar8 = uVar8 + 1;
        } while (uVar8 < 4);
        uVar8 = 4;
        do
        {
            if ((*(char *)(uVar8 + 6 + iVar9) == '\x03') || (*(char *)(iVar9 + 0xe + uVar8) == '\x03'))
            {
                bVar26 = bVar26 | 2;
                in_stack_0002405c = in_stack_0002405c | 2;
                break;
            }
            uVar8 = uVar8 + 1;
        } while (uVar8 < 8);
        if (_DAT_0050c618 != param_15)
        {
            if ((uVar18 & 0x30) == 0)
            {
                in_stack_0002405c = in_stack_0002405c | 0x20;
            }
            if ((uVar18 == 0xc81049f8) || (uVar18 == 0xc8104b50))
            {
            LAB_00432f36:
                in_stack_0002405c = in_stack_0002405c | 0x21;
            }
            else if (uVar18 == 0xc1841c8)
            {
                if (param_15 != 0)
                {
                    FUN_00431cf0(param_15);
                }
                in_stack_0002405c = in_stack_0002405c | 0x421;
            }
            else if ((_DAT_0050c620 != param_15) && (_DAT_0050c624 != param_15))
            {
                if ((uVar18 == 0xc81041d8) || (uVar18 == 0xc81049d8))
                    goto LAB_00432f36;
                if (uVar18 == 0xf0a2008)
                {
                    in_stack_0002405c = in_stack_0002405c | 0x20;
                }
                else if (uVar18 == 0xc184950)
                {
                    in_stack_0002405c = in_stack_0002405c | 0x20;
                    bVar26 = bVar26 | 4;
                }
                else if ((((uVar18 != 0xc180079) && (_DAT_0050c61c != param_15)) && (uVar18 != 0xc8104340))
                         && (((uVar18 & 0x800) == 0 && (param_15 != 0))))
                {
                    if (*(int *)(param_15 + 0x7c) == 1)
                    {
                        FUN_00431ef0(param_15);
                    }
                    if (*(int *)(param_15 + 0x7c) == 2)
                    {
                        FUN_00431fd0(param_15);
                    }
                }
            }
        }
        if (uVar18 == 0xf0a2008)
        {
            param_5 = 1;
        }
        if (param_5 != 0)
        {
            in_stack_0002405c = in_stack_0002405c | 0xc;
        }
    }
    if ((uVar18 != 0xc81041c8) && ((*pbVar3 & 0x11) != 0))
    {
        bVar7 = true;
        param_16 = 3;
    }
LAB_00432f8f:
    puVar22 = (ushort *)in_stack_00024058[0xd];
    uVar18 = (uint) * (short *)((int)in_stack_00024058 + 0x3a);
    *(uint *)(in_stack_00024054 + 0x74) = uVar18;
    iVar9 = FUN_00408e60(pbVar3, uVar18 * 0xc);
    *(int *)(in_stack_00024054 + 0x4c) = iVar9;
    *(uint *)(in_stack_00024054 + 0x78) = uVar18;
    pfVar10 = (float *)FUN_00408e60(pbVar3, uVar18 * 8);
    *(float **)(in_stack_00024054 + 0x50) = pfVar10;
    param_3 = (float *)FUN_00408e60(pbVar3, uVar18 << 4);
    *(float **)(in_stack_00024054 + 0x54) = param_3;
    uVar11 = FUN_00408e60(pbVar3, uVar18 << 4);
    *(undefined_32 *)(in_stack_00024054 + 0x58) = uVar11;
    uVar11 = FUN_00408e60(pbVar3, uVar18 * 0xc);
    *(undefined_32 *)(in_stack_00024054 + 0x70) = uVar11;
    *(undefined_32 *)(in_stack_00024054 + 0x44) = 4;
    *(uint *)(in_stack_00024054 + 0x48) = param_16;
    *(byte *)(in_stack_00024054 + 0x88) = bVar26;
    FUN_00430a90(in_stack_00024054 + 0x5c, 1.0f, 1.0f, 1.0f, 1.0f);
    if (uVar18 != 0)
    {
        fVar5 = param_4 * 4096.0;
        param_4 = 0.0;
        pfVar25 = (float *)(iVar9 + 8);
        fVar6 = param_2 * 4096.0;
        param_2 = 0.0;
        pfVar19 = pfVar10;
        param_8 = uVar18;
        do
        {
            pfVar25[-2] = (float)(int)CONCAT11((char)*puVar22, (char)((uint)*puVar22 >> 8));
            pfVar25[-1] = (float)(int)CONCAT11((char)puVar22[1], (char)((uint)puVar22[1] >> 8));
            *pfVar25 = (float)(int)CONCAT11((char)puVar22[2], (char)((uint)puVar22[2] >> 8));
            *pfVar19 = (float)(int)CONCAT11((char)puVar22[4], (char)((uint)puVar22[4] >> 8)) / fVar5;
            pfVar19[1] = (float)(int)CONCAT11((char)puVar22[5], (char)((uint)puVar22[5] >> 8)) / fVar6;
            if (bVar7)
            {
                *param_3 = 1.0;
                param_3[1] = 1.0;
                param_3[2] = 1.0;
                param_3[3] = 1.0;
                *(float *)((int)param_2 + *(int *)(in_stack_00024054 + 0x70)) =
                    (float)(int)(char)*(byte *)(puVar22 + 6) * 0.0078125;
                *(float *)((int)param_2 + 4 + *(int *)(in_stack_00024054 + 0x70)) =
                    (float)(int)(char)*(byte *)((int)puVar22 + 0xd) * 0.0078125;
                *(float *)((int)param_2 + 8 + *(int *)(in_stack_00024054 + 0x70)) =
                    (float)(int)(char)*(byte *)(puVar22 + 7) * 0.0078125;
                rdVector_Normalize3((int)param_2 + *(int *)(in_stack_00024054 + 0x70));
            }
            else
            {
                uVar8 = 0;
                pfVar16 = param_3;
                do
                {
                    iVar9 = uVar8 + 0xc;
                    uVar8 = uVar8 + 1;
                    *pfVar16 = (float)(uint) * (byte *)(iVar9 + (int)puVar22) * 0.003921569;
                    pfVar16 = pfVar16 + 1;
                } while (uVar8 < 4);
            }
            pfVar16 = (float *)((int)param_4 + *(int *)(in_stack_00024054 + 0x58));
            pfVar19 = pfVar19 + 2;
            pfVar25 = pfVar25 + 3;
            *pfVar16 = *param_3;
            pfVar16[1] = param_3[1];
            pfVar16[2] = param_3[2];
            pfVar16[3] = param_3[3];
            param_2 = (float)((int)param_2 + 0xc);
            puVar22 = puVar22 + 8;
            param_4 = (float)((int)param_4 + 0x10);
            param_3 = param_3 + 4;
            param_8 = param_8 - 1;
        } while (param_8 != 0);
    }
    uVar8 = uVar18;
    if (param_5 != 0)
    {
        for (; uVar8 != 0; uVar8 = uVar8 - 1)
        {
            *pfVar10 = *pfVar10 - 1.0;
            pfVar10[1] = pfVar10[1] - 1.0;
            pfVar10 = pfVar10 + 2;
        }
    }
    bVar7 = false;
    iVar9 = 0;
    piVar17 = in_stack_00024050;
    do
    {
        iVar13 = *piVar17 << 0x18;
        if (iVar13 == 0x5000000)
        {
            iVar9 = iVar9 + 0x18;
        }
        else if (iVar13 == 0x6000000)
        {
            iVar9 = iVar9 + 0x30;
        }
        else if (iVar13 == -0x21000000)
        {
            bVar7 = true;
        }
        piVar17 = piVar17 + 2;
    } while (!bVar7);
    uVar8 = FUN_00408e60(pbVar3, iVar9);
    bVar7 = false;
    iVar9 = param_5;
    do
    {
        iVar13 = *in_stack_00024050;
        iVar4 = in_stack_00024050[1];
        uVar12 = iVar13 << 0x18;
        cVar14 = (char)((uint)iVar13 >> 8) >> 1;
        cStack00000026 = (char)((uint)iVar13 >> 0x10);
        cVar15 = (char)(iVar13 >> 0x19);
        if (uVar12 < 0x5000001)
        {
            if (uVar12 == 0x5000000)
            {
                uVar20 = cVar14 + param_5;
                param_3 = (float *)((cStack00000026 >> 1) + param_5);
                uVar12 = cVar15 + param_5;
                if (uVar18 < uVar20)
                {
                    uVar20 = 0;
                }
                if (uVar18 < param_3)
                {
                    param_3 = NULL;
                }
                if (uVar18 < uVar12)
                {
                    uVar12 = 0;
                }
                iVar9 = param_7 * 0x48;
                FUN_004923c0(&stack0x0000004c + iVar9);
                *(uint *)(&stack0x00000058 + iVar9) = param_16;
                *(uint *)(&stack0x00000060 + iVar9) = uVar8;
                *(uint *)(&stack0x0000004c + iVar9) = param_7;
                *(uint *)(&stack0x00000050 + iVar9) = in_stack_0002405c;
                *(undefined_32 *)(&stack0x00000054 + iVar9) = 4;
                *(undefined_32 *)(&stack0x0000005c + iVar9) = 3;
                **(uint **)(&stack0x00000060 + iVar9) = uVar20;
                *(float **)(*(int *)(&stack0x00000060 + iVar9) + 4) = param_3;
                *(uint *)(*(int *)(&stack0x00000060 + iVar9) + 8) = uVar12;
                *(uint *)(&stack0x00000064 + iVar9) = uVar8 + 0xc;
                uVar8 = uVar8 + 0x18;
                param_7 = param_7 + 1;
                **(uint **)(&stack0x00000064 + iVar9) = uVar20;
                *(float **)(*(int *)(&stack0x00000064 + iVar9) + 4) = param_3;
                *(uint *)(*(int *)(&stack0x00000064 + iVar9) + 8) = uVar12;
                *(uint *)(&stack0x00000068 + iVar9) = param_15;
                iVar9 = param_5;
            }
            else if (uVar12 == 0x1000000)
            {
                _DAT_00e996a0 = in_stack_00024050[1] + *(short *)((int)in_stack_00024058 + 0x3e) * -0x10;
                param_5 = (int)((_DAT_00e996a0 - (int)in_stack_00024058[0xd])
                                + (_DAT_00e996a0 - (int)in_stack_00024058[0xd] >> 0x1f & 0xfU))
                    >> 4;
                iVar9 = param_5;
            }
        }
        else if (uVar12 == 0x6000000)
        {
            cStack00000029 = (char)((uint)iVar4 >> 8);
            param_4 = (float)(cVar14 + iVar9);
            cStack0000002a = (char)((uint)iVar4 >> 0x10);
            param_11 = (cStack00000026 >> 1) + iVar9;
            uVar12 = (cStack00000029 >> 1) + iVar9;
            param_8 = cVar15 + iVar9;
            param_3 = (float *)((cStack0000002a >> 1) + iVar9);
            param_1 = (char)(iVar4 >> 0x19) + iVar9;
            if (uVar18 < uVar12)
            {
                uVar12 = 0;
            }
            if (uVar18 < param_3)
            {
                param_3 = NULL;
            }
            if (uVar18 < param_1)
            {
                param_1 = 0;
            }
            if (uVar18 < (uint)param_4)
            {
                param_4 = 0.0;
            }
            if (uVar18 < param_11)
            {
                param_11 = 0;
            }
            if (uVar18 < param_8)
            {
                param_8 = 0;
            }
            iVar9 = param_7 * 0x48;
            puVar21 = (uint *)(&stack0x0000004c + iVar9);
            if (param_7 < param_7 + 2)
            {
                param_12 = (param_7 + 2) - param_7;
                puVar23 = puVar21;
                do
                {
                    FUN_004923c0(puVar21);
                    puVar23[3] = param_16;
                    puVar23[5] = uVar8;
                    puVar23[1] = in_stack_0002405c;
                    *puVar23 = param_7;
                    puVar23[2] = 4;
                    puVar23[4] = 3;
                    puVar23[6] = uVar8 + 0xc;
                    puVar23[7] = param_15;
                    uVar8 = uVar8 + 0x18;
                    puVar23 = puVar23 + 0x12;
                    puVar21 = puVar21 + 0x12;
                    param_12 = param_12 + -1;
                } while (param_12 != 0);
            }
            **(uint **)(&stack0x00000060 + iVar9) = (uint)param_4;
            *(uint *)(*(int *)(&stack0x00000060 + iVar9) + 4) = param_11;
            *(uint *)(*(int *)(&stack0x00000060 + iVar9) + 8) = param_8;
            **(uint **)(&stack0x00000064 + iVar9) = (uint)param_4;
            *(uint *)(*(int *)(&stack0x00000064 + iVar9) + 4) = param_11;
            *(uint *)(*(int *)(&stack0x00000064 + iVar9) + 8) = param_8;
            **(uint **)(&stack0x000000a8 + iVar9) = uVar12;
            *(float **)(*(int *)(&stack0x000000a8 + iVar9) + 4) = param_3;
            *(uint *)(*(int *)(&stack0x000000a8 + iVar9) + 8) = param_1;
            **(uint **)(&stack0x000000ac + iVar9) = uVar12;
            *(float **)(*(int *)(&stack0x000000ac + iVar9) + 4) = param_3;
            *(uint *)(*(int *)(&stack0x000000ac + iVar9) + 8) = param_1;
            param_7 = param_7 + 2;
            iVar9 = param_5;
        }
        else if (uVar12 == 0xdf000000)
        {
            bVar7 = true;
        }
        in_stack_00024050 = in_stack_00024050 + 2;
    } while (!bVar7);
    *(uint *)(in_stack_00024054 + 0x7c) = param_7;
    uVar11 = FUN_00408e60(pbVar3, param_7 * 0x48);
    *(undefined_32 *)(in_stack_00024054 + 0x6c) = uVar11;
    if (param_7 != 0)
    {
        iVar9 = 0;
        do
        {
            puVar24 = (undefined_32 *)(iVar9 + *(int *)(in_stack_00024054 + 0x6c));
            FUN_004923c0(puVar24);
            *puVar24 = *(undefined_32 *)(&stack0x0000004c + iVar9);
            puVar24[1] = *(undefined_32 *)(&stack0x00000050 + iVar9);
            puVar24[2] = *(undefined_32 *)(&stack0x00000054 + iVar9);
            puVar24[3] = *(undefined_32 *)(&stack0x00000058 + iVar9);
            puVar24[4] = *(undefined_32 *)(&stack0x0000005c + iVar9);
            puVar24[5] = *(undefined_32 *)(&stack0x00000060 + iVar9);
            puVar24[6] = *(undefined_32 *)(&stack0x00000064 + iVar9);
            puVar1 = (undefined_32 *)(&stack0x00000068 + iVar9);
            iVar9 = iVar9 + 0x48;
            param_7 = param_7 - 1;
            puVar24[7] = *puVar1;
        } while (param_7 != 0);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00433680(int param_1)

{
    if (param_1 != 0)
    {
        _DAT_0050c0d0 = 0;
    }
    return;
}

void FUN_004336a0(void)

{
    if (DAT_0050c454 == 0)
    {
        FUN_00454d40(0, 1);
    }
    else if (*(int *)(DAT_0050c454 + 8) != 1)
    {
        FUN_00454d40(DAT_0050c454, 1);
        return;
    }
    return;
}

void FUN_004336d0(undefined_32 param_1)

{
    if (DAT_0050c454 != 0)
    {
        FUN_00454d40(DAT_0050c454, param_1);
    }
    return;
}

void FUN_004336f0(undefined_32 param_1)

{
    DAT_0050c454 = param_1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00433700(void)

{
    if (DAT_0050c454 != 0)
    {
        _DAT_004bfec8 = *(undefined_32 *)(DAT_0050c454 + 8);
    }
    DAT_004bfecc = -1;
    return;
}

void FUN_00433720(void)

{
    FUN_00454d40(DAT_0050c454, 9);
    DAT_004d6b6c = 1;
    return;
}

void FUN_00433740(void)

{
    FUN_00433700();
    FUN_00454d40(DAT_0050c454, 0xc);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00433760(void)

{
    undefined_32 uVar1;

    if (DAT_004d5e00 != 0)
    {
        uVar1 = FUN_00414d90(0, 0x186b8);
        FUN_00414e60(uVar1, 0);
        FUN_00411820(0x30d41);
        uVar1 = FUN_00414d90(0, 0x30d41);
        FUN_00414e60(uVar1, 0);
        _DAT_00ea0180 = 0;
    }
    DAT_004bfedc = -1;
    DAT_0050c944 = -1;
    return;
}

void FUN_004337d0(void)

{
    DAT_0050c478 = 5;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004337e0(int *param_1, undefined_32 param_2, int param_3, float param_4, float param_5, float param_6,
                  float param_7, int param_8, undefined_32 param_9, undefined_32 param_10)

{
    uint *puVar1;
    float fVar2;
    int iVar3;
    int iVar4;
    float10 fVar5;
    undefined_32 local_1f4;
    undefined_32 local_1f0;
    undefined_32 local_1ec;
    undefined_32 local_1e8;
    float local_1e4;
    undefined_32 local_1e0;
    undefined_32 local_1dc;
    undefined_32 local_1d8;
    float local_1d4[3];
    float local_1c8[3];
    undefined_8 local_1bc[12];
    undefined_8 local_1b0[12];
    undefined_8 local_1a4[16];
    undefined_8 local_194[16];
    undefined_8 local_184[16];
    undefined_8 local_174[8];
    float local_16c;
    float local_164;
    float local_160;
    undefined_8 local_158[16];
    undefined_8 local_148[16];
    undefined_8 local_138[32];
    undefined_8 local_118[12];
    undefined_8 local_10c[12];
    float local_100[4];
    float local_f0;
    float local_ec;
    undefined_8 local_e0[48];
    undefined_8 local_b0[16];
    undefined_8 local_a0[48];
    undefined_8 local_70[16];
    undefined_8 local_60[64];
    undefined_8 local_20[32];

    if (param_1 != NULL)
    {
        iVar4 = param_1[0x3c];
        if (param_8 != 0)
        {
            local_1e4 = 0.0;
            do
            {
                fVar2 = local_1e4;
                sin_cos(((float)(int)local_1e4 * 0.01 - -0.1) * (float)_DAT_00e22a38 * 360.0,
                        local_100 + (int)local_1e4, local_20 + (int)local_1e4 * 4);
                local_1e4 = (float)((int)fVar2 + 1);
            } while ((uint)local_1e4 < 8);
        }
        if (param_3 != 0)
        {
            fVar2 = *(float *)(&DAT_004c271c + iVar4 * 0x34);
            if ((fVar2 < 0.3) || (5.0 < fVar2))
            {
                fVar2 = 1.0;
            }
            param_4 = fVar2 * param_4;
            param_5 = fVar2 * param_5;
            param_6 = fVar2 * param_6;
        }
        FUN_00481b30(param_1[5], &DAT_004c0088);
        FUN_00481b30(param_1[1], &DAT_004c0098);
        FUN_00481b30(param_1[2], &DAT_004c0098);
        FUN_00481b30(param_1[3], &DAT_004c0098);
        FUN_00481b30(param_1[4], &DAT_004c0098);
        if (param_1[0x3e] != 0)
        {
            puVar1 = (uint *)(param_1[0x3e] + 0x10);
            *puVar1 = *puVar1 | 1;
        }
        if (param_1[2] != 0)
        {
            puVar1 = (uint *)(param_1[2] + 0x10);
            *puVar1 = *puVar1 | 1;
        }
        if (param_1[4] != 0)
        {
            puVar1 = (uint *)(param_1[4] + 0x10);
            *puVar1 = *puVar1 | 1;
        }
        FUN_0044bb10(local_60, param_2);
        mat_multiply_rows(local_60, param_4, param_5, param_6, local_60);
        iVar3 = *param_1;
        if (iVar3 != 0)
        {
            FUN_00431740(iVar3, 0);
            FUN_00431a50(iVar3, 2, 3, 0x10, 2);
        }
        if ((((byte)DAT_0050c048 & 0x80) == 0) || ((DAT_00e98e94 & 0x400) == 0))
        {
            iVar3 = param_1[1];
            if (iVar3 != 0)
            {
                FUN_0044bb10(local_1a4, local_60);
                vec3f_copy(&local_164, &DAT_004c7094 + iVar4 * 0x6c);
                mat_transform(&local_1f0, &local_164, local_1a4);
                vec3f_add(local_174, local_174, &local_1f0);
                if (param_8 != 0)
                {
                    vec3f_multiply_add(local_174, local_174, local_100[3] * 0.2, local_184);
                    vec3f_copy(&local_1f0, local_194);
                    rdVector_Normalize3(&local_1f0);
                    FUN_00431390(local_1a4, local_100[1] * 5.0, local_1f0, local_1ec, local_1e8, local_1a4);
                }
                FUN_00431640(iVar3, local_1a4);
                FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                iVar3 = param_1[3];
                if (iVar3 != 0)
                {
                    vec3f_copy(&local_164, &DAT_004c7a40);
                    mat_transform(&local_1f0, &local_164, local_60);
                    vec3f_add(local_174, local_174, &local_1f0);
                    if (param_8 != 0)
                    {
                        vec3f_multiply_add(local_174, local_174, local_100[3] * 0.2, local_184);
                        vec3f_copy(&local_1f0, local_194);
                        rdVector_Normalize3(&local_1f0);
                        FUN_00431390(local_1a4, local_100[1] * 5.0, local_1f0, local_1ec, local_1e8, local_1a4);
                    }
                    FUN_00431640(iVar3, local_1a4);
                    FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                }
                iVar3 = param_1[0x3e];
                if (iVar3 != 0)
                {
                    vec3f_copy(&local_1f0, local_174);
                    mat_set_diagonal(local_1a4, param_4, param_5, param_6);
                    vec3f_copy(local_174, &local_1f0);
                    local_16c = param_7;
                    mat_multiply_rows(local_1a4, 0x3b83126f, 0x3b83126f, 0x3b83126f, local_1a4);
                    FUN_00431640(iVar3, local_1a4);
                    FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                }
            }
            iVar3 = param_1[2];
            if (iVar3 != 0)
            {
                FUN_0044bb10(local_1a4, local_60);
                vec3f_copy(&local_164, &DAT_004c7094 + iVar4 * 0x6c);
                local_164 = -local_164;
                mat_transform(&local_1f0, &local_164, local_1a4);
                vec3f_add(local_174, local_174, &local_1f0);
                if (param_8 != 0)
                {
                    vec3f_multiply_add(local_174, local_174, local_f0 * 0.2, local_184);
                    vec3f_copy(&local_1f0, local_194);
                    rdVector_Normalize3(&local_1f0);
                    FUN_00431390(local_1a4, local_100[2] * 5.0, local_1f0, local_1ec, local_1e8, local_1a4);
                }
                FUN_00431640(iVar3, local_1a4);
                FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                iVar3 = param_1[4];
                if (iVar3 != 0)
                {
                    vec3f_copy(&local_164, &DAT_004c7a40);
                    local_164 = -local_164;
                    mat_transform(&local_1f0, &local_164, local_60);
                    vec3f_add(local_174, local_174, &local_1f0);
                    if (param_8 != 0)
                    {
                        vec3f_multiply_add(local_174, local_174, local_100[2] * 0.2, local_184);
                        vec3f_copy(&local_1f0, local_194);
                        rdVector_Normalize3(&local_1f0);
                        FUN_00431390(local_1a4, local_100[0] * 5.0, local_1f0, local_1ec, local_1e8, local_1a4);
                    }
                    FUN_00431640(iVar3, local_1a4);
                    FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                }
                iVar3 = param_1[0x3f];
                if (iVar3 != 0)
                {
                    vec3f_copy(&local_1f0, local_174);
                    mat_set_diagonal(local_1a4, param_4, param_5, param_6);
                    vec3f_copy(local_174, &local_1f0);
                    local_16c = param_7;
                    mat_multiply_rows(local_1a4, 0x3b83126f, 0x3b83126f, 0x3b83126f, local_1a4);
                    FUN_00431640(iVar3, local_1a4);
                    FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                }
            }
            iVar3 = param_1[5];
            if (iVar3 != 0)
            {
                FUN_0044bb10(local_1a4, local_60);
                vec3f_copy(&local_164, &DAT_004c7088 + iVar4 * 0x6c);
                mat_transform(&local_1f0, &local_164, local_1a4);
                vec3f_add(local_174, local_174, &local_1f0);
                if (param_8 != 0)
                {
                    local_1e4 = (float)((char)(&DAT_004c2724)[iVar4 * 0x34] * 10);
                    local_16c = param_6 * 1.5 + (float)(int)local_1e4 + param_7;
                    vec3f_multiply_add(local_174, local_174, local_ec * 0.1, local_184);
                    vec3f_copy(&local_1f0, local_194);
                    rdVector_Normalize3(&local_1f0);
                    FUN_00431390(local_1a4, local_100[1] * 10.0, local_1f0, local_1ec, local_1e8, local_1a4);
                }
                FUN_00431640(iVar3, local_1a4);
                FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                if (local_160 == 0.0)
                {
                    if (param_1[1] != 0)
                    {
                        FUN_00431640(param_1[1], local_1a4);
                    }
                    if (param_1[2] != 0)
                    {
                        FUN_00431640(param_1[2], local_1a4);
                    }
                }
                iVar3 = param_1[0x40];
                if (iVar3 != 0)
                {
                    vec3f_copy(&local_1f0, local_174);
                    mat_set_diagonal(local_1a4, param_4, param_5, param_6);
                    vec3f_copy(local_174, &local_1f0);
                    local_16c = param_7;
                    mat_multiply_rows(local_1a4, 0x3b83126f, 0x3b83126f, 0x3b83126f, local_1a4);
                    FUN_00431640(iVar3, local_1a4);
                    FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                }
            }
            FUN_0046f2c0(0, param_1, param_9, param_10);
            if (param_1[6] != 0)
            {
                FUN_00431a50(param_1[6], 2, 0xfffffffc, 0x10, 3);
            }
            if (param_1[7] != 0)
            {
                FUN_00431a50(param_1[7], 2, 0xfffffffc, 0x10, 3);
            }
            if (param_1[8] != 0)
            {
                FUN_00431a50(param_1[8], 2, 0xfffffffc, 0x10, 3);
            }
            if (param_1[9] != 0)
            {
                FUN_00431a50(param_1[9], 2, 0xfffffffc, 0x10, 3);
            }
            if (param_1[10] != 0)
            {
                FUN_00431a50(param_1[10], 2, 0xfffffffc, 0x10, 3);
            }
            if (param_1[0xb] != 0)
            {
                FUN_00431a50(param_1[0xb], 2, 0xfffffffc, 0x10, 3);
            }
            if (param_1[0xc] != 0)
            {
                FUN_00431a50(param_1[0xc], 2, 0xfffffffc, 0x10, 3);
            }
            if (param_1[0xd] != 0)
            {
                FUN_00431a50(param_1[0xd], 2, 0xfffffffc, 0x10, 3);
            }
            if (0 < DAT_0050c478)
            {
                DAT_0050c478 = DAT_0050c478 + -1;
            }
            if (param_1[10] != 0)
            {
                FUN_004316a0(param_1[5], local_e0);
                vec3f_copy(&local_1e0, local_b0);
                FUN_004316a0(param_1[1], local_a0);
                vec3f_copy(local_1bc, local_70);
                vec3f_copy(local_1d4, &DAT_004c70ac + iVar4 * 0x6c);
                mat_transform(local_1d4, local_1d4, local_e0);
                vec3f_add(&local_1e0, local_1d4, &local_1e0);
                vec3f_copy(local_1c8, &DAT_004c70b8 + iVar4 * 0x6c);
                mat_transform(local_1c8, local_1c8, local_a0);
                vec3f_add(local_1bc, local_1c8, local_1bc);
                vec3f_sub(local_1b0, &local_1e0, local_1bc);
                fVar5 = (float10)rdVector_Len3(local_1b0);
                local_1e4 = (float)fVar5;
                rdVector_Normalize3(local_1b0);
                mat_set_translation(local_158, local_1e0, local_1dc, local_1d8);
                vec3f_copy(local_148, local_1b0);
                vec3f_set(local_138, 0, 0, 1.0f);
                rdVector_Cross3(local_158, local_148, local_138);
                rdVector_Cross3(local_138, local_158, local_148);
                mat_multiply_rows(local_158, param_4 * 0.004, local_1e4 * 0.01, param_6 * 0.004, local_158);
                FUN_00431640(param_1[10], local_158);
                if (0 < DAT_0050c478)
                {
                    vec3f_set(local_10c, 0, 0, 0);
                    vec3f_set(local_118, 0, 0, 0);
                    local_1f4 = 0x3fa66666;
                    if (param_8 == 0)
                    {
                        local_1f4 = 0.5f;
                    }
                    FUN_00481c30(param_1[10], local_10c, local_118, local_1f4, 1.0f, 0, 50.0f, 0);
                }
                if (param_1[10] != 0)
                {
                    FUN_00431a50(param_1[10], 2, 3, 0x10, 2);
                }
            }
            if (param_1[0xb] != 0)
            {
                FUN_004316a0(param_1[5], local_e0);
                vec3f_copy(&local_1e0, local_b0);
                FUN_004316a0(param_1[2], local_a0);
                vec3f_copy(local_1bc, local_70);
                vec3f_copy(local_1d4, &DAT_004c70ac + iVar4 * 0x6c);
                local_1d4[0] = -local_1d4[0];
                mat_transform(local_1d4, local_1d4, local_e0);
                vec3f_add(&local_1e0, local_1d4, &local_1e0);
                vec3f_copy(local_1c8, &DAT_004c70b8 + iVar4 * 0x6c);
                local_1c8[0] = -local_1c8[0];
                mat_transform(local_1c8, local_1c8, local_a0);
                vec3f_add(local_1bc, local_1c8, local_1bc);
                vec3f_sub(local_1b0, &local_1e0, local_1bc);
                fVar5 = (float10)rdVector_Len3(local_1b0);
                local_1e4 = (float)fVar5;
                rdVector_Normalize3(local_1b0);
                mat_set_translation(local_158, local_1e0, local_1dc, local_1d8);
                vec3f_copy(local_148, local_1b0);
                vec3f_set(local_138, 0, 0, 1.0f);
                rdVector_Cross3(local_158, local_148, local_138);
                rdVector_Cross3(local_138, local_158, local_148);
                mat_multiply_rows(local_158, param_4 * 0.004, local_1e4 * 0.01, param_6 * 0.004, local_158);
                FUN_00431640(param_1[0xb], local_158);
                if (0 < DAT_0050c478)
                {
                    vec3f_set(local_10c, 0, 0, 0);
                    vec3f_set(local_118, 0, 0, 0);
                    local_1f4 = 0x3fa66666;
                    if (param_8 == 0)
                    {
                        local_1f4 = 0.5f;
                    }
                    FUN_00481c30(param_1[0xb], local_10c, local_118, local_1f4, 1.0f, 0, 50.0f, 0);
                }
                if (param_1[0xb] != 0)
                {
                    FUN_00431a50(param_1[0xb], 2, 3, 0x10, 2);
                }
            }
            if (param_1[0xc] != 0)
            {
                FUN_004316a0(param_1[5], local_e0);
                vec3f_copy(&local_1e0, local_b0);
                FUN_004316a0(param_1[3], local_a0);
                vec3f_copy(local_1bc, local_70);
                vec3f_copy(local_1d4, &DAT_004c70ac + iVar4 * 0x6c);
                mat_transform(local_1d4, local_1d4, local_e0);
                vec3f_add(&local_1e0, local_1d4, &local_1e0);
                vec3f_copy(local_1c8, &DAT_004c70b8 + iVar4 * 0x6c);
                mat_transform(local_1c8, local_1c8, local_a0);
                vec3f_add(local_1bc, local_1c8, local_1bc);
                vec3f_sub(local_1b0, &local_1e0, local_1bc);
                fVar5 = (float10)rdVector_Len3(local_1b0);
                local_1e4 = (float)fVar5;
                rdVector_Normalize3(local_1b0);
                mat_set_translation(local_158, local_1e0, local_1dc, local_1d8);
                vec3f_copy(local_148, local_1b0);
                vec3f_set(local_138, 0, 0, 1.0f);
                rdVector_Cross3(local_158, local_148, local_138);
                rdVector_Cross3(local_138, local_158, local_148);
                mat_multiply_rows(local_158, param_4 * 0.004, local_1e4 * 0.01, param_6 * 0.004, local_158);
                FUN_00431640(param_1[0xc], local_158);
                if (0 < DAT_0050c478)
                {
                    vec3f_set(local_10c, 0, 0, 0);
                    vec3f_set(local_118, 0, 0, 0);
                    local_1f4 = 0x3fa66666;
                    if (param_8 == 0)
                    {
                        local_1f4 = 0.5f;
                    }
                    FUN_00481c30(param_1[0xc], local_10c, local_118, local_1f4, 1.0f, 0, 50.0f, 0);
                }
                if (param_1[0xc] != 0)
                {
                    FUN_00431a50(param_1[0xc], 2, 3, 0x10, 2);
                }
            }
            if (param_1[0xd] != 0)
            {
                FUN_004316a0(param_1[5], local_e0);
                vec3f_copy(&local_1e0, local_b0);
                FUN_004316a0(param_1[4], local_a0);
                vec3f_copy(local_1bc, local_70);
                vec3f_copy(local_1d4, &DAT_004c70ac + iVar4 * 0x6c);
                local_1d4[0] = -local_1d4[0];
                mat_transform(local_1d4, local_1d4, local_e0);
                vec3f_add(&local_1e0, local_1d4, &local_1e0);
                vec3f_copy(local_1c8, &DAT_004c70b8 + iVar4 * 0x6c);
                local_1c8[0] = -local_1c8[0];
                mat_transform(local_1c8, local_1c8, local_a0);
                vec3f_add(local_1bc, local_1c8, local_1bc);
                vec3f_sub(local_1b0, &local_1e0, local_1bc);
                fVar5 = (float10)rdVector_Len3(local_1b0);
                local_1e4 = (float)fVar5;
                rdVector_Normalize3(local_1b0);
                mat_set_translation(local_158, local_1e0, local_1dc, local_1d8);
                vec3f_copy(local_148, local_1b0);
                vec3f_set(local_138, 0, 0, 1.0f);
                rdVector_Cross3(local_158, local_148, local_138);
                rdVector_Cross3(local_138, local_158, local_148);
                mat_multiply_rows(local_158, param_4 * 0.004, local_1e4 * 0.01, param_6 * 0.004, local_158);
                FUN_00431640(param_1[0xd], local_158);
                if (0 < DAT_0050c478)
                {
                    vec3f_set(local_10c, 0, 0, 0);
                    vec3f_set(local_118, 0, 0, 0);
                    local_1f4 = 0x3fa66666;
                    if (param_8 == 0)
                    {
                        local_1f4 = 0.5f;
                    }
                    FUN_00481c30(param_1[0xd], local_10c, local_118, local_1f4, 1.0f, 0, 50.0f, 0);
                }
                if (param_1[0xd] != 0)
                {
                    FUN_00431a50(param_1[0xd], 2, 3, 0x10, 2);
                }
            }
            if (DAT_0050c478 == 4)
            {
                FUN_0043e6f0();
            }
            if (param_1[0x3b] != 0)
            {
                FUN_00431a50(param_1[0x3b], 2, 0xfffffffc, 0x10, 3);
            }
            if (((byte)DAT_0050c048 & 0x80) == 0)
            {
                return;
            }
            if ((DAT_00e98e94 & 0x1000) == 0)
            {
                return;
            }
            iVar4 = param_1[0x3b];
            if (iVar4 == 0)
            {
                return;
            }
        }
        else
        {
            iVar4 = *param_1;
            if (iVar4 != 0)
            {
                FUN_00431740(iVar4, 1);
                FUN_00431a50(iVar4, 2, 3, 0x10, 2);
            }
            iVar4 = param_1[0x4a];
            if (iVar4 == 0)
            {
                return;
            }
            FUN_0044bb10(local_1a4, local_60);
            mat_multiply_rows(local_1a4, 0x3b83126f, 0x3b83126f, 0x3b83126f, local_1a4);
            if (param_8 != 0)
            {
                vec3f_multiply_add(local_174, local_174, local_100[3] * 0.2, local_184);
            }
            FUN_00431640(iVar4, local_1a4);
        }
        FUN_00431a50(iVar4, 2, 3, 0x10, 2);
    }
    return;
}

void FUN_00434ea0(int param_1)

{
    FUN_00457410(param_1, *(int *)(param_1 + 0x68) != 0, 1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00434ec0(int param_1)

{
    undefined_32 uVar1;

    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        DAT_004c00a4 = DAT_004c00a4 + '\x01';
        if (DAT_004c00a4 == '\x02')
        {
            FUN_00426c80(0x74, 6, 0.25f, 0.5f, 0);
            _DAT_004c00a8 = 2.5;
        }
        _DAT_004c00ac = 255.0;
    }
    *(undefined_32 *)(param_1 + 0x68) = 0x15;
    DAT_004bfedc = 0xe;
    if (DAT_004c00a4 == '\0')
    {
        if (0 < DAT_004c00b0)
        {
            DAT_004c00b0 = DAT_004c00b0 + -1;
            goto LAB_004351ca;
        }
        uVar1 = lookup_translation(s__SCREENTEXT_476__f4_sStar_Wars___004c08a4);
        create_text_entry_1(0x1e, 0x1e, uVar1);
        uVar1 = lookup_translation(s__SCREENTEXT_477__f4_s_LucasArts_E_004c0868);
        create_text_entry_1(0x1e, 0x32, uVar1);
        uVar1 = lookup_translation(s__SCREENTEXT_478__f4_s_Lucasfilm_L_004c0824);
        create_text_entry_1(0x1e, 0x3c, uVar1);
        uVar1 = lookup_translation(s__SCREENTEXT_479__f4_sUsed_under_a_004c07f4);
        create_text_entry_1(0x1e, 0x46, uVar1);
        uVar1 = lookup_translation(s__SCREENTEXT_600__f4_sThe_LucasAr_004c07bc);
        create_text_entry_1(0x1e, 0x5a, uVar1);
        uVar1 = lookup_translation(s__SCREENTEXT_601__f4_strademark_o_004c0788);
        create_text_entry_1(0x1e, 100, uVar1);
        uVar1 = lookup_translation(s__SCREENTEXT_481__f4_sused_under_a_004c0758);
        create_text_entry_1(0x1e, 0x6e, uVar1);
        uVar1 = lookup_translation(s__SCREENTEXT_602__f4_sLicensed_to_004c072c);
        create_text_entry_1(0x1e, 0x82, uVar1);
        uVar1 = lookup_translation(s__SCREENTEXT_482__sExpansion_Pak_e_004c0700);
        create_text_entry_1(0x1e, 0xb4, uVar1);
        sprite_set_pos(0x52, 0xb4, 100);
        sprite_scale(0x52, 1.0f, 1.0f);
        uVar1 = 0x52;
    }
    else
    {
        if (DAT_004c00a4 != '\x01')
        {
            if (DAT_004c00a4 == '\x02')
            {
                if ((((DAT_0050c944 != 1) || (DAT_0050c484 != '\0'))
                     && (_DAT_004c00ac = _DAT_004c00ac - _DAT_00e22a50 * 255.0, _DAT_004c00ac < 0.0))
                    && (_DAT_004c00ac = 0.0, DAT_0050c484 != '\0'))
                {
                    sprite_set_color(0xffffff99, 0, 0, 0, -1);
                    FUN_00454d40(param_1, DAT_004bfedc);
                    return;
                }
                sprite_set_pos(0x56, 0x34, 0);
                sprite_scale(0x56, 1.0f, 1.0f);
                if (DAT_0050c484 == '\0')
                {
                    sprite_enable_display(0x56, 1);
                }
                uVar1 = __ftol();
                sprite_set_color(0x56, -1, -1, -1, uVar1);
                if (DAT_0050c944 != 1)
                {
                    sprite_set_pos(0x55, 0x52, 0xf);
                    sprite_scale(0x55, 1.0f, 1.0f);
                    sprite_enable_display(0x55, 1);
                    if (DAT_0050c484 == '\0')
                    {
                        uVar1 = -1;
                    }
                    else
                    {
                        uVar1 = __ftol();
                    }
                    sprite_set_color(0x55, -1, -1, -1, uVar1);
                }
            }
            goto LAB_004351ca;
        }
        sprite_set_pos(0x50, 0x57, 0x2e);
        sprite_scale(0x50, 1.0f, 1.0f);
        uVar1 = 0x50;
    }
    sprite_enable_display(uVar1, 1);
LAB_004351ca:
    if ((DAT_0050c944 == 0) && (0.0 < _DAT_004c00a8))
    {
        _DAT_004c00a8 = _DAT_004c00a8 - _DAT_00e22a50;
    }
    if (_DAT_004c00a8 <= 0.0)
    {
        _DAT_004c00a8 = 1.3;
        if (DAT_004c00a4 < '\x02')
        {
            DAT_0050c944 = -1;
            return;
        }
        DAT_0050c484 = '\x01';
        _DAT_004c00ac = 255.0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00435240(int param_1)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 uVar3;
    undefined_32 uVar4;
    char cVar5;

    DAT_0050c494 = DAT_0050c494 + 1;
    if (0x1e < DAT_0050c494)
    {
        DAT_0050c494 = 0;
    }
    uVar1 = FUN_00411480(1);
    FUN_00414e60(uVar1);
    iVar2 = FUN_00411800();
    if (iVar2 == 0)
    {
        FUN_00411820(0xb);
    }
    *(undefined_8 *)(param_1 + 0x6c) = DAT_0050c450;
    if (DAT_0050c44c == 0)
    {
        if (_DAT_0050c488 == 0)
        {
            _DAT_0050c488 = 1;
            FUN_00459150(param_1);
        }
        if (DAT_004c4000 != 0)
        {
            DAT_004c4000 = 0;
            DAT_0050c944 = 1;
            FUN_00426910();
            _DAT_004c0014 = 30.0;
            _DAT_0050c21c = -1;
            _DAT_0050c1d8 = 2.0;
            _DAT_0050c1dc = 1.0;
            _DAT_0050c1e0 = 1.0;
            _DAT_0050c220 = -1;
            _DAT_0050c218 = 0xff020100;
            DAT_0050c490 = '\x03';
            iVar2 = FUN_00440de0(1);
            if (iVar2 != 0)
            {
                iVar2 = (int)DAT_0050c490;
                DAT_0050c490 = DAT_0050c490 + '\x01';
                (&DAT_0050c218)[iVar2] = 3;
            }
        }
        _DAT_0050c1d8 = _DAT_0050c1d8 - _DAT_00e22a50;
        if (_DAT_0050c1d8 <= 0.0)
        {
            _DAT_0050c1d8 = 0.0;
        }
        if ((_DAT_0050c1d8 <= 0.0) && (_DAT_0050c1dc = _DAT_0050c1dc - _DAT_00e22a50, _DAT_0050c1dc <= 0.0))
        {
            _DAT_0050c1dc = 0.0;
        }
        if ((_DAT_0050c1dc <= 0.5) && (_DAT_0050c1e0 = _DAT_0050c1e0 - _DAT_00e22a50 * 5.0, _DAT_0050c1e0 <= 0.0))
        {
            _DAT_0050c1e0 = 0.0;
        }
        if (DAT_0050c944 == 0)
        {
            if (_DAT_004c0014 <= 0.0)
            {
                _DAT_004c0014 = 30.0;
                *(undefined_32 *)(param_1 + 100) = 2;
                DAT_0050c944 = -1;
            }
            FUN_004277f0(1, 0);
        }
        iVar2 = FUN_00411810();
        if (((*(int *)(iVar2 + 0x1c) == 0xb) && (((byte)DAT_0050c908 & 4) != 0)) && (((byte)DAT_0050c918 & 0x80) != 0))
        {
            *(bool *)(param_1 + 0x51) = *(char *)(param_1 + 0x51) == '\0';
            DAT_0050c454 = param_1;
        }
        cVar5 = 'P';
        if (*(char *)(param_1 + 0x51) != '\0')
        {
            cVar5 = 'M';
        }
        if (*(int *)(iVar2 + 0x1c) != 0xb)
        {
            cVar5 = (*(byte *)(iVar2 + 0x1c) & 1) + 0x4e;
        }
        if (*(int *)(iVar2 + 0x1c) == 0x81)
        {
            cVar5 = 'N';
        }
        sprite_set_pos(cVar5, 0, 0);
        sprite_scale(cVar5, 0.5f, 1.0f);
        if (*(char *)(param_1 + 0x51) != '\0')
        {
            sprite_scale(cVar5, 1.0f, 1.0f);
        }
        sprite_enable_display(cVar5, 1);
        sprite_set_color(cVar5, -1, -1, -1, 0xfffffffe);
        FUN_004287e0(cVar5, 0x10000);
        sprite_scale(cVar5, 1.0f, 1.0f);
        uVar1 = FUN_00414d90(iVar2, 0x272a);
        FUN_00414e60(uVar1, 0);
        uVar3 = FUN_00414d90(iVar2, 0x272b);
        FUN_00414e60(uVar3, 0);
        if (*(char *)(param_1 + 0x51) == '\0')
        {
            uVar4 = __ftol();
            sprite_set_pos(0x52, 0xc, uVar4);
            sprite_enable_display(0x52, 1);
            sprite_set_color(0x52, -1, -1, -1, 0xfffffffe);
            FUN_004287e0(0x52, 0x10000);
            uVar4 = __ftol();
            sprite_set_pos(0x53, 0x9b, uVar4);
            sprite_enable_display(0x53, 1);
            sprite_set_color(0x53, -1, -1, -1, 0xfffffffe);
            if (_DAT_0050c1d8 <= 0.0)
            {
                FUN_00414e60(uVar1, 1);
            }
            FUN_004287e0(0x53, 0x10000);
            sprite_set_pos(0x51, 0xe, 0x33);
            sprite_enable_display(0x51, 1);
            uVar1 = __ftol();
            sprite_set_color(0x51, -1, -1, -1, uVar1);
            FUN_004287e0(0x51, 0x10000);
            uVar1 = __ftol(0x46);
            sprite_set_pos(0x54, uVar1);
            sprite_enable_display(0x54, 1);
            sprite_set_color(0x54, -1, -1, -1, 0xfffffffe);
            if (_DAT_0050c1e0 <= 0.0)
            {
                FUN_00414e60(uVar3, 1);
            }
            FUN_004287e0(0x54, 0x10000);
        }
        return;
    }
    DAT_0050c44c = 0;
    *(undefined_8 *)(param_1 + 0x70) = 1;
    DAT_004bfedc = 0x12;
    DAT_0050c944 = -1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 00435700
// runs continuously on the vehicle/track select screen
void vehiclePlanetSelectScreenFunction(int param_1)

{
    undefined_8 uVar1;
    bool bVar2;
    int iVar3;
    undefined_32 uVar4;
    int *piVar5;
    undefined_32 *puVar6;
    undefined_8_1 *puVar7;
    int iVar8;
    float10 fVar9;
    float fVar10;
    float fVar11;
    undefined_8 local_14c[48];
    undefined_8 local_11c[16];
    undefined_8 local_10c[12];
    undefined_8 local_100[256];

    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        FUN_0043e5b0(0x431d0000);
        _DAT_0050c4a0 = 0;
        DAT_0050c49c = 0;
        DAT_00e295d4 = 0;
        DAT_004c00b4 = -1;
        DAT_004c00c0 = 1;
        FUN_0045bee0(param_1, 0x24, -1, 0);
        FUN_0043da10(param_1);
        iVar3 = 0;
        DAT_00e295d0 = 0;
        iVar8 = DAT_00e295d0;
        if (0 < DAT_00e295cc)
        {
            piVar5 = &DAT_00e99240;
            do
            {
                iVar8 = iVar3;
                if (*piVar5 == (int)(char)(&DAT_00e35a84)[*(char *)(param_1 + 0x6f) * 0x50])
                    break;
                iVar3 = iVar3 + 1;
                piVar5 = piVar5 + 2;
                iVar8 = DAT_00e295d0;
            } while (iVar3 < DAT_00e295cc);
        }
        DAT_00e295d0 = iVar8;
        FUN_0045cf60((&DAT_00e99240)[DAT_00e295d0 * 2], -1, 0, 0xff);
        FUN_004584a0(param_1, 0);
        DAT_00e99384 = 360.0;
    }
    bVar2 = false;
    if (DAT_0050c930 == 0)
    {
        DAT_0050c118 = (&DAT_00e99240)[DAT_00e295d0 * 2];
        if (DAT_00e295a0 <= 0.0)
        {
            if (DAT_0050c118 != -1)
            {
                fVar11 = 0.025 - (float)DAT_0050c118 * -0.05;
                FUN_0044b360(DAT_00e2afb8, fVar11, fVar11, fVar11, 0, 0, 0);
            }
        }
        else
        {
            fVar11 = 0.025 - (float)(&DAT_00e99240)[DAT_00e295d4 * 2] * -0.05;
            FUN_0044b360(DAT_00e2afb8, fVar11, fVar11, fVar11, 0, 0, 0);
            FUN_00457350(DAT_00e295d4);
        }
        if ((DAT_0050c49c == 5) && (fVar9 = (float10)FUN_00469b90(0xc0533333), fVar9 == (float10)0.0))
        {
            FUN_00468fe0(0x1c, 0);
            FUN_0044e560();
            if (DAT_004d5e00 == 0)
            {
                FUN_00454d40(param_1, DAT_004bfedc);
                return;
            }
            FUN_004118b0(0);
            return;
        }
        if (DAT_0050c49c == 0)
        {
            DAT_00e295ac = DAT_00e295ac - _DAT_00e22a50 * 3.3;
            if (DAT_00e295ac < 0.0)
            {
                DAT_00e295ac = 0.0;
            }
            if (DAT_004c00c0 != 0)
            {
                FUN_004550d0(param_1, 0x42d20000, 0x43070000);
            }
        }
        uVar4 = lookup_translation(s__SCREENTEXT_525__c_sSelect_Vehic_004c08e4);
        create_text_entry_1(0xa0, 0x19, uVar4); // set previous text x and y position
        uVar4 = lookup_translation((&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[DAT_0050c118 * 0xd]);
        uVar4 = lookup_translation((&PTR_s__SCREENTEXT_322___Anakin_004c2714)[DAT_0050c118 * 0xd], uVar4);
        uVar4 = lookup_translation(s__c_s_s__s_004c08d8, uVar4);
        _sprintf(local_100, uVar4);
        create_text_entry_0(0xa0, 0x2a, 0, -1, 0, -1, local_100);
        uVar4 = FUN_0042de10(local_100, 0);
        FUN_0042de10(local_100, 0, 0x2b, uVar4);
        uVar4 = __ftol();
        FUN_00440150(uVar4);
        *(uint *)(param_1 + 0x14) = *(uint *)(param_1 + 0x14) | 4;
        if ((DAT_00e295dc == 0) && (DAT_004c00b4 != (&DAT_00e99240)[DAT_00e295d4 * 2]))
        {
            bVar2 = true;
        }
        if ((DAT_0050c118 != -1) && ((DAT_00e2993c == 0 || (bVar2))))
        {
            // loads new racer upon switch
            FUN_004258e0();
            FUN_0045ce90(3);
            DAT_00e99384 = 0.0;
            FUN_00454bc0(*(undefined_32 *)(&DAT_004c2704 + DAT_0050c118 * 0x34),
                         *(undefined_32 *)(&DAT_004c2708 + DAT_0050c118 * 0x34), 0xf, 0);
            if (DAT_00e2993c != 0)
            {
                FUN_004337d0();
                *(int *)(DAT_00e2993c + 0xf0) = DAT_0050c118;
                FUN_0045ce10(*(undefined_32 *)(&DAT_004c2730 + DAT_0050c118 * 0x34), 0x1c, 2,
                             *(undefined_32 *)(&DAT_004c2720 + DAT_0050c118 * 0x34));
            }
            DAT_004c00b4 = DAT_0050c118;
            FUN_00454c90();
            FUN_0043e620(param_1);
            FUN_0045cf60(DAT_0050c118, -1, -1, 0xff);
        }
        if (_DAT_0050c4a0 == 0)
        {
            _DAT_0050c4a0 = 1;
        }
        DAT_00e99384 = DAT_00e99384 - _DAT_00e22a50 * -90.0;
        if (1800.0 < DAT_00e99384)
        {
            DAT_00e99384 = DAT_00e99384 - 1800.0; // loops pod rotation
        }
        if ((DAT_0050c49c == 1) && (fVar9 = (float10)FUN_00469b90(0xc0533333), fVar9 == (float10)0.0))
        {
            DAT_0050c49c = 2;
        }
        DAT_004c00b8 = DAT_00e295a0 * 4.0;
        if (DAT_004c00b8 < 0.001)
        {
            DAT_004c00b8 = 0.001;
        }
        if ((DAT_00e2993c != 0) && (0.0 < DAT_00e295a0))
        {
            FUN_0043e210();
            if (540.0 <= DAT_00e99384)
            {
                if (900.0 <= DAT_00e99384)
                {
                    if ((DAT_00e99384 < 900.0) || (1440.0 <= DAT_00e99384))
                    {
                        fVar9 = (float10)FUN_0045a420(DAT_00e99384 - 1440.0, 360.0f);
                        fVar11 = (float)-fVar9;
                        uVar4 = 0;
                        fVar10 = 100.08;
                    }
                    else
                    {
                        fVar11 = 0.0;
                        uVar4 = 0;
                        fVar9 = (float10)FUN_0045a420(DAT_00e99384 - 900.0, 0x44070000, 0, 0);
                        fVar10 = (float)((float10)280.08 - fVar9);
                    }
                }
                else
                {
                    fVar9 = (float10)FUN_0045a420(DAT_00e99384 - 540.0, 360.0f);
                    fVar11 = (float)((float10)180.0 - fVar9);
                    uVar4 = 0x43340000;
                    fVar10 = 100.08;
                }
            }
            else
            {
                fVar11 = 0.0;
                uVar4 = 0;
                fVar9 = (float10)FUN_0045a420(DAT_00e99384, 0x44070000, 0, 0);
                fVar10 = (float)((float10)100.08 - fVar9);
            }
            mat_set_rotation(local_14c, fVar10, uVar4, fVar11);
            vec3f_copy(local_11c, &DAT_004c449c);
            DAT_004c00b8 = DAT_004c00b8 * 0.5;
            vec3f_multiply2_add(local_11c, 0.5f, &DAT_004c449c, 0.5f, &DAT_004c4490);
            FUN_004337e0(DAT_00e2993c, local_14c, 1, DAT_004c00b8, DAT_004c00b8, DAT_004c00b8, 0xc490a000, 0, 1.0f,
                         1.0f);
            if (*(int *)(DAT_00e2993c + 0xec) != 0)
            {
                FUN_00431a50(*(int *)(DAT_00e2993c + 0xec), 2, 3, 0x10, 2);
            }
        }
        if (DAT_0050c49c == 0)
        {
            iVar8 = (int)*(char *)(param_1 + 0x6f);
            if (iVar8 < iVar8 + 1)
            {
                puVar6 = &DAT_0050c918 + iVar8;
                do
                {
                    iVar3 = DAT_00e295d0;
                    if (DAT_0050c930 != 0)
                        break;
                    FUN_00469c30(iVar8, 1.0f, 1);
                    if (iVar3 != DAT_00e295d0)
                    {
                        FUN_0045cf60((&DAT_00e99240)[DAT_00e295d0 * 2], -1, 0, 0xff);
                    }
                    if ((1.0 <= DAT_00e295a0) && (DAT_004d6b44 != 0))
                    {
                        FUN_004118b0(0);
                        FUN_00440550(0x4d);
                        if (*(int *)(param_1 + 0xc) == 3)
                        {
                            DAT_004bfedc = 3;
                            DAT_0050c49c = 1;
                            return;
                        }
                        FUN_00440550(0x4d);
                        if (*(char *)(param_1 + 0x6f) < '\x01')
                        {
                            DAT_0050c4a4 = 0;
                            DAT_0050c49c = 1;
                            DAT_004c00b4 = -1;
                            DAT_004bfedc = 1;
                            DAT_0050c944 = -1;
                            FUN_0044e560();
                            return;
                        }
                        DAT_0050c49c = 1;
                        *(char *)(param_1 + 0x6f) = *(char *)(param_1 + 0x6f) + -1;
                        DAT_004bfedc = 9;
                        return;
                    }
                    if ((1.0 <= DAT_00e295a0) && (DAT_004d6b48 != 0))
                    {
                        FUN_00440550(0x54);
                        DAT_0050c49c = 1;
                    }
                    if ((*(byte *)puVar6 & 8) != 0)
                    {
                        FUN_00440550(0x54);
                        DAT_004c00c0 = (uint)(DAT_004c00c0 == 0);
                    }
                    iVar8 = iVar8 + 1;
                    puVar6 = puVar6 + 1;
                } while (iVar8 < *(char *)(param_1 + 0x6f) + 1);
            }
            if (DAT_0050c49c == 1)
            {
                FUN_0043e5b0(*(undefined_32 *)(&DAT_004c2720 + (&DAT_00e99240)[DAT_00e295d0 * 2] * 0x34));
                iVar8 = (int)*(char *)(param_1 + 0x6f);
                if (iVar8 < iVar8 + 1)
                {
                    puVar7 = &DAT_00e35aa0 + iVar8 * 0x50;
                    do
                    {
                        *(undefined_8 *)(iVar8 + 0x73 + param_1) = *(undefined_8 *)(&DAT_00e99240 + DAT_00e295d0 * 2);
                        iVar3 = DAT_0050c4a4;
                        uVar1 = *(undefined_8 *)(&DAT_00e99240 + DAT_00e295d0 * 2);
                        puVar7[-0x1c] = uVar1;
                        if (iVar3 < 4)
                        {
                            if (*(char *)(&DAT_00e364b4 + iVar3 * 0x14) == '\0')
                            {
                                *puVar7 = 1;
                                *(undefined_32 *)(puVar7 + -8) = 400;
                            }
                            else
                            {
                                (&DAT_00e364d8)[iVar3 * 0x50] = uVar1;
                            }
                        }
                        iVar3 = FUN_0041d6b0();
                        if (iVar3 != 0)
                        {
                            FUN_0041dc30((&DAT_00e99240)[DAT_00e295d0 * 2]);
                        }
                        iVar8 = iVar8 + 1;
                        puVar7 = puVar7 + 0x50;
                    } while (iVar8 < *(char *)(param_1 + 0x6f) + 1);
                }
                FUN_0045cd50(param_1);
                if (*(int *)(param_1 + 0xc) != 3)
                {
                    if ((*(char *)(&DAT_00e364b4 + DAT_0050c4a4 * 0x14) == '\0') && (DAT_0050c4a4 < 4))
                    {
                        DAT_004bfedc = 2;
                        return;
                    }
                    if (*(char *)(param_1 + 0x70) + -1 <= (int)*(char *)(param_1 + 0x6f))
                    {
                        DAT_004bfedc = 0xc;
                        vec3f_copy(local_10c, &DAT_004c457c + *(char *)(param_1 + 0x50) * 0xc);
                        rand();
                        return;
                    }
                    *(char *)(param_1 + 0x6f) = *(char *)(param_1 + 0x6f) + '\x01';
                    DAT_004bfedc = 9;
                    return;
                }
                DAT_004bfedc = 3;
                return;
            }
            if (DAT_0050c49c == 2)
            {
                DAT_0050c49c = 3;
            }
        }
        else if (DAT_00e295a0 == 0.0)
        {
            DAT_0050c49c = DAT_0050c49c + 1;
            return;
        }
    }
    return;
}

void FUN_004360e0(int param_1, char param_2)

{
    int iVar1;
    ushort uVar2;
    uint uVar3;
    int iVar4;
    int iVar5;
    undefined_32 uVar6;
    int iVar7;
    uint uVar8;
    uint extraout_ECX;
    uint extraout_ECX_00;
    uint extraout_ECX_01;
    uint extraout_ECX_02;
    undefined_32 extraout_EDX;
    uint extraout_EDX_00;
    uint uVar9;
    undefined_64 uVar10;
    ulonglong uVar11;
    undefined_32 uVar12;
    undefined_32 uVar13;
    undefined_32 uVar14;
    uint local_1c;
    undefined_8 local_10;
    undefined_32 local_f;
    undefined_32 local_b;
    undefined_32 local_7;
    undefined_16 local_3;
    undefined_8 local_1;

    local_f = 0;
    local_b = 0;
    local_7 = 0;
    local_3 = 0;
    local_1 = 0;
    uVar2 = 0;
    uVar3 = (uint)param_2;
    iVar4 = uVar3 + 1;
    local_10 = DAT_004d55cc;
    do
    {
        if (iVar4 <= (int)uVar3)
        {
            return;
        }
        local_1c = 0;
        if ('\0' < (char)(&DAT_004bfee0)[uVar3])
        {
            do
            {
                if (*(char *)(param_1 + 0x6c) != '\0')
                {
                    param_1._0_1_ = (byte)(local_1c << 1);
                    uVar2 = *(short *)(&DAT_00e35a8a + uVar3 * 2) >> ((byte)param_1 & 0x1f) & 3;
                }
                iVar7 = uVar3 * 7 + 99 + local_1c;
                iVar1 = local_1c * 0x23;
                sprite_enable_display(iVar7, 1);
                sprite_set_pos(iVar7, iVar1 + 0x37, 0x5e);
                sprite_scale(iVar7, 0x3f2aacda, 0x3f2aacda);
                uVar11 = CONCAT44(extraout_EDX, uVar3);
                switch (uVar3)
                {
                case 0:
                    uVar6 = __ftol();
                    uVar14 = -1;
                    uVar13 = -1;
                    uVar12 = 0x32;
                    break;
                case 1:
                    uVar6 = __ftol();
                    uVar14 = 0x3e;
                    uVar13 = -1;
                    uVar12 = 0x44;
                    break;
                case 2:
                    uVar6 = __ftol();
                    uVar14 = 0x11;
                    uVar13 = 0xffffffbe;
                    uVar12 = 0xffffffa3;
                    break;
                case 3:
                    uVar6 = __ftol();
                    uVar14 = 0x20;
                    uVar13 = 0x59;
                    uVar12 = 0xffffff9d;
                    break;
                default:
                    goto switchD_00436239_caseD_4;
                }
                uVar11 = sprite_set_color(iVar7, uVar12, uVar13, uVar14, uVar6);
            switchD_00436239_caseD_4:
                iVar5 = FUN_00440aa0(param_1, (uint)(uVar11 & 0xffffff00ffffff00) | uVar3 & 0xff,
                                     (uint)((uVar11 & 0xffffff00ffffff00) >> 0x20) | local_1c & 0xff);
                if (iVar5 == 0)
                {
                    uVar6 = __ftol();
                    uVar14 = 0xffffff80;
                    uVar13 = 0xffffff80;
                    uVar12 = 0xffffff80;
                LAB_004362e7:
                    sprite_set_color(iVar7, uVar12, uVar13, uVar14, uVar6);
                }
                else if (uVar2 != 0)
                {
                    uVar6 = __ftol();
                    uVar14 = -1;
                    uVar13 = -1;
                    uVar12 = -1;
                    goto LAB_004362e7;
                }
                uVar10 = _sprintf(&local_10, s__f2_s_d_004c0940, local_1c + 1);
                uVar9 = (uint)((ulonglong)uVar10 >> 0x20);
                uVar8 = extraout_ECX;
                if (*(char *)(param_1 + 0x6c) == '\0')
                {
                LAB_00436328:
                    uVar10 =
                        FUN_00440aa0(param_1, uVar9 & 0xffffff00 | uVar3 & 0xff, uVar8 & 0xffffff00 | local_1c & 0xff);
                    uVar9 = (uint)((ulonglong)uVar10 >> 0x20);
                    if ((int)uVar10 == 0)
                    {
                        uVar6 = __ftol(&local_10);
                        create_text_entry_0(iVar1 + 0x3c, 0x6d, 0xffffff80, 0xffffff80, 0xffffff80, uVar6);
                        uVar6 = lookup_translation(s__SCREENTEXT_585__f4_c_sRace_004c0924);
                        uVar6 = __ftol(uVar6);
                        uVar14 = 0xffffff80;
                        uVar13 = 0xffffff80;
                        uVar12 = 0xffffff80;
                    }
                    else
                    {
                        uVar8 = extraout_ECX_01;
                        switch (uVar3)
                        {
                        case 0:
                            uVar6 = __ftol(&local_10);
                            create_text_entry_0(iVar1 + 0x3c, 0x6d, 0x32, -1, -1, uVar6);
                            uVar6 = lookup_translation(s__SCREENTEXT_585__f4_c_sRace_004c0924);
                            uVar6 = __ftol(uVar6);
                            uVar14 = -1;
                            uVar13 = -1;
                            uVar12 = 0x32;
                            break;
                        case 1:
                            uVar6 = __ftol(&local_10);
                            create_text_entry_0(iVar1 + 0x3c, 0x6d, 0x44, -1, 0x3e, uVar6);
                            uVar6 = lookup_translation(s__SCREENTEXT_585__f4_c_sRace_004c0924);
                            uVar6 = __ftol(uVar6);
                            uVar14 = 0x3e;
                            uVar13 = -1;
                            uVar12 = 0x44;
                            break;
                        case 2:
                            uVar6 = __ftol(&local_10);
                            create_text_entry_0(iVar1 + 0x3c, 0x6d, 0xffffffa3, 0xffffffbe, 0x11, uVar6);
                            uVar6 = lookup_translation(s__SCREENTEXT_585__f4_c_sRace_004c0924);
                            uVar6 = __ftol(uVar6);
                            uVar14 = 0x11;
                            uVar13 = 0xffffffbe;
                            uVar12 = 0xffffffa3;
                            break;
                        case 3:
                            uVar6 = __ftol(&local_10);
                            create_text_entry_0(iVar1 + 0x3c, 0x6d, 0xffffff9d, 0x59, 0x20, uVar6);
                            uVar6 = lookup_translation(s__SCREENTEXT_585__f4_c_sRace_004c0924);
                            uVar6 = __ftol(uVar6);
                            uVar14 = 0x20;
                            uVar13 = 0x59;
                            uVar12 = 0xffffff9d;
                            break;
                        default:
                            goto switchD_0043639c_caseD_4;
                        }
                    }
                    create_text_entry_0(iVar1 + 0x43, 0x6f, uVar12, uVar13, uVar14, uVar6);
                    uVar8 = extraout_ECX_02;
                    uVar9 = extraout_EDX_00;
                }
                else
                {
                    uVar10 =
                        FUN_00440a20((uint)uVar10 & 0xffffff00 | uVar3 & 0xff, uVar9 & 0xffffff00 | local_1c & 0xff);
                    uVar9 = (uint)((ulonglong)uVar10 >> 0x20);
                    uVar8 = extraout_ECX_00;
                    if ((int)uVar10 != 0)
                        goto LAB_00436328;
                }
            switchD_0043639c_caseD_4:
                if (((*(char *)(param_1 + 0x6c) != '\0') && (uVar2 == 0))
                    && (iVar7 = FUN_00440a20(uVar9 & 0xffffff00 | uVar3 & 0xff, uVar8 & 0xffffff00 | local_1c & 0xff),
                        iVar7 == 0))
                {
                    switch (uVar3)
                    {
                    case 0:
                        uVar6 = lookup_translation(s__SCREENTEXT_229__f4_s4th_004c0908);
                        uVar6 = __ftol(uVar6);
                        uVar14 = -1;
                        uVar13 = -1;
                        uVar12 = 0x32;
                        break;
                    case 1:
                        uVar6 = lookup_translation(s__SCREENTEXT_229__f4_s4th_004c0908);
                        uVar6 = __ftol(uVar6);
                        uVar14 = 0x3e;
                        uVar13 = -1;
                        uVar12 = 0x44;
                        break;
                    case 2:
                        uVar6 = lookup_translation(s__SCREENTEXT_229__f4_s4th_004c0908);
                        uVar6 = __ftol(uVar6);
                        uVar14 = 0x11;
                        uVar13 = 0xffffffbe;
                        uVar12 = 0xffffffa3;
                        break;
                    case 3:
                        uVar6 = lookup_translation(s__SCREENTEXT_229__f4_s4th_004c0908);
                        uVar6 = __ftol(uVar6);
                        uVar14 = 0x20;
                        uVar13 = 0x59;
                        uVar12 = 0xffffff9d;
                        break;
                    default:
                        goto switchD_0043654e_caseD_4;
                    }
                    create_text_entry_0(iVar1 + 0x3a, 0x6f, uVar12, uVar13, uVar14, uVar6);
                }
            switchD_0043654e_caseD_4:
                iVar7 = uVar3 * 7 + 0x7f + local_1c;
                sprite_enable_display(iVar7, 1);
                sprite_set_pos(iVar7, iVar1 + 0x35, 0x5c);
                sprite_scale(iVar7, 0x3f2aacda, 0x3f2aacda);
                uVar6 = __ftol();
                uVar11 = sprite_set_color(iVar7, 0xffffffa3, 0xffffffbe, 0x11, uVar6);
                iVar5 = FUN_00440aa0(param_1, (uint)(uVar11 & 0xffffff00ffffff00) | uVar3 & 0xff,
                                     (uint)((uVar11 & 0xffffff00ffffff00) >> 0x20) | local_1c & 0xff);
                if (iVar5 == 0)
                {
                    uVar6 = __ftol();
                    sprite_set_color(iVar7, 0xffffff80, 0xffffff80, 0xffffff80, uVar6);
                }
                if ((param_2 == *(char *)(param_1 + 0x5e))
                    && (uVar8 = FUN_00440af0(param_1, DAT_00e295d0), local_1c == uVar8))
                {
                    sprite_enable_display(iVar7, 0);
                    sprite_enable_display(0x62, 1);
                    sprite_set_pos(0x62, iVar1 + 0x32, 0x59);
                    sprite_scale(0x62, 0x3f2aacda, 0x3f2aacda);
                    uVar6 = __ftol();
                    sprite_set_color(0x62, 0x32, -1, -1, uVar6);
                }
                local_1c = local_1c + 1;
            } while ((int)local_1c < (int)(char)(&DAT_004bfee0)[uVar3]);
        }
        uVar3 = uVar3 + 1;
    } while (true);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004367c0(int param_1)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 local_6b[26];

    puVar2 = local_6b;
    MEMSET(iVar1, puVar2, 0, 0x1a)
    *(undefined_8 *)puVar2 = 0;
    if (*(int *)(param_1 + 0xc) == 9)
    {
        (&DAT_00e35a84)[*(char *)(param_1 + 0x6f) * 0x50] = 0;
    }
    iVar1 = *(char *)(param_1 + 0x6f) * 0x50;
    if ((&DAT_00e35a81)[iVar1] == '\x01')
    {
        FUN_0044e530((int)(char)(&DAT_00e35a82)[iVar1], (int)*(char *)(param_1 + 0x6f));
    }
    FUN_0044e560();
    _DAT_004c0204 = -1;
    puVar2 = &DAT_0050c4c0;
    MEMSET(iVar1, puVar2, 0, 8)
    _DAT_0050c4b8 = 0;
    _DAT_0050c4b4 = 0;
    FUN_00454d40(param_1, *(undefined_32 *)(param_1 + 0xc));
    return;
}

void FUN_00436860(int param_1)

{
    if (DAT_004c4000 != 0)
    {
        *(undefined_32 *)(param_1 + 0x10) = 0;
    }
    if ((*(int *)(param_1 + 0x10) != 0) && (DAT_004bfedc == -1))
    {
        FUN_00436fa0(param_1);
        return;
    }
    FUN_004368a0(param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// menu related
void FUN_004368a0(int param_1)

{
    bool bVar1;
    float fVar2;
    char cVar3;
    undefined_32 uVar4;
    int iVar5;
    int iVar6;
    char cVar7;
    int iVar8;
    float10 fVar9;
    char *pcVar10;
    char local_71;
    float local_6c;
    undefined_32 local_68;
    undefined_32 local_64;
    undefined_8 local_60[32];
    undefined_8 local_40[16];
    undefined_8 local_30[48];

    iVar8 = -1;
    _DAT_0050c480 = 0;
    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        if (*(int *)(param_1 + 0xc) == 0xd)
        {
            *(undefined_8 *)(param_1 + 0x5f) = 0;
        }
        vec3f_sub(&local_6c, &DAT_00e298f0, &DAT_00e2af90);
        fVar9 = (float10)rdVector_Len3(&local_6c);
        DAT_0050c11c = (float)fVar9;
        rdVector_Normalize3(&local_6c);
        fVar9 = (float10)arctan2(-local_6c, local_68);
        DAT_0050c2ec = (float)fVar9;
        fVar9 = (float10)arctan(local_64);
        DAT_0050c2e8 = (float)fVar9;
        if (DAT_0050c2ec < 0.0)
        {
            DAT_0050c2ec = DAT_0050c2ec - -360.0;
        }
        if (360.0 < DAT_0050c2ec)
        {
            DAT_0050c2ec = DAT_0050c2ec - 360.0;
        }
        if (DAT_0050c2e8 < -90.0)
        {
            DAT_0050c2e8 = DAT_0050c2e8 - -180.0;
        }
        if (90.0 < DAT_0050c2e8)
        {
            DAT_0050c2e8 = DAT_0050c2e8 - 180.0;
        }
        cVar7 = '\x01';
        _DAT_0050c308 = 0xffffff00;
        _DAT_0050c30c = -1;
        _DAT_0050c310 = -1;
        if (*(char *)(param_1 + 0x70) == '\x01')
        {
            _DAT_0050c308 = 0xffff0100;
            cVar7 = '\x02';
        }
        cVar3 = cVar7;
        if (*(char *)(param_1 + 0x6c) != '\0')
        {
            (&DAT_0050c308)[cVar7] = 2;
            (&DAT_0050c308)[(char)(cVar7 + '\x01')] = 3;
            cVar3 = cVar7 + '\x03';
            (&DAT_0050c308)[(char)(cVar7 + '\x02')] = 4;
            if (DAT_00e35aa0 < 4)
            {
                iVar6 = (int)cVar3;
                cVar3 = cVar7 + '\x04';
                (&DAT_0050c308)[iVar6] = 5;
            }
        }
        DAT_0050c524 = cVar3 + '\x01';
        (&DAT_0050c308)[cVar3] = 6;
    }
    uVar4 = lookup_translation(s__SCREENTEXT_474__c_sMain_Menu_004c0a60);
    create_text_entry_1(0xa0, 0x19, uVar4);
    cVar7 = '\0';
    if ('\0' < DAT_0050c524)
    {
        do
        {
            switch ((&DAT_0050c308)[cVar7])
            {
            case 0:
                pcVar10 = s__SCREENTEXT_69__f4_sStart_Race_004c0a40;
                break;
            case 1:
                pcVar10 = s__SCREENTEXT_523__f4_sInspect_Veh_004c0a18;
                goto LAB_00436af1;
            case 2:
                pcVar10 = s__SCREENTEXT_524__f4_sVehicle_Upg_004c09f0;
                goto LAB_00436ac7;
            case 3:
                pcVar10 = s__SCREENTEXT_102__f4_sBuy_Parts_004c09d0;
                break;
            case 4:
                pcVar10 = s__SCREENTEXT_103__f4_sJunkyard_004c09b0;
                goto LAB_00436af1;
            case 5:
                pcVar10 = s__SCREENTEXT_587__f4_sBuy_Pit_Dro_004c098c;
            LAB_00436ac7:
                uVar4 = lookup_translation(pcVar10);
                goto LAB_00436aff;
            case 6:
                pcVar10 = s__SCREENTEXT_473__f4_sChange_Vehi_004c0968;
                break;
            case 7:
                pcVar10 = s__SCREENTEXT_73__f4_sOptions_004c094c;
            LAB_00436af1:
                uVar4 = lookup_translation(pcVar10);
                goto LAB_00436aff;
            default:
                goto switchD_00436a98_caseD_8;
            }
            uVar4 = lookup_translation(pcVar10);
        LAB_00436aff:
            _sprintf(local_60, uVar4);
        switchD_00436a98_caseD_8:
            FUN_0043fce0(param_1, 0x3c, 0x50, 10, (int)*(char *)(param_1 + 0x5f), (int)cVar7, local_60);
            cVar7 = cVar7 + '\x01';
        } while (cVar7 < DAT_0050c524);
    }
    local_71 = '\0';
    if ('\0' < *(char *)(param_1 + 0x70))
    {
        do
        {
            iVar6 = (int)local_71;
            if (((&DAT_0050c918)[iVar6] & 0x8000) != 0)
            {
                cVar7 = *(char *)(param_1 + 0x5f) + '\x01';
                *(char *)(param_1 + 0x5f) = cVar7;
                if (DAT_0050c524 + -1 < (int)cVar7)
                {
                    *(undefined_8 *)(param_1 + 0x5f) = 0;
                }
                FUN_00440550(0x58);
            }
            if (((&DAT_0050c918)[iVar6] & 0x4000) != 0)
            {
                cVar7 = *(char *)(param_1 + 0x5f) + -1;
                *(char *)(param_1 + 0x5f) = cVar7;
                if (cVar7 < '\0')
                {
                    *(char *)(param_1 + 0x5f) = DAT_0050c524 + -1;
                }
                FUN_00440550(0x58);
            }
            iVar5 = FUN_00485880(0x38, 0);
            if ((((iVar5 != 0) || (iVar5 = FUN_00485880(0xb8, 0), iVar5 != 0))
                 || (iVar5 = FUN_00485880(0x2a, 0), iVar5 != 0))
                || (iVar5 = FUN_00485880(0x36, 0), iVar5 != 0))
            {
                fVar2 = DAT_0050c11c;
                bVar1 = false;
                DAT_0050c930 = 0;
                if ((0.1 < (float)(&DAT_00e98ea0)[iVar6]) || ((float)(&DAT_00e98ea0)[iVar6] < -0.1))
                {
                    bVar1 = true;
                    DAT_0050c2ec = DAT_0050c2ec - (float)(&DAT_00e98ea0)[iVar6] * _DAT_00e22a50 * 105.0;
                }
                if ((0.1 < (float)(&DAT_00e98e80)[iVar6]) || ((float)(&DAT_00e98e80)[iVar6] < -0.1))
                {
                    DAT_0050c2e8 = DAT_0050c2e8 - (float)(&DAT_00e98e80)[iVar6] * _DAT_00e22a50 * -67.5;
                    CLAMP(DAT_0050c2e8, -45.0, 45.0)
                    bVar1 = true;
                }
                if (bVar1)
                {
                    mat_set_rotation(local_40, DAT_0050c2ec, DAT_0050c2e8, 0);
                    vec3f_multiply_add(&DAT_00e2af90, &DAT_00e298f0, -DAT_0050c11c, local_30);
                    if (DAT_0050c11c != fVar2)
                    {
                        fVar9 = (float10)vec3f_distance(&DAT_00e298f0, &DAT_00e2af90);
                        DAT_0050c11c = (float)fVar9;
                    }
                    FUN_0044bb10(&DAT_00e2ae80, &DAT_00e298c0);
                }
            }
            if (DAT_004d6b44 != 0)
            {
                FUN_00440550(0x4d);
                iVar8 = 3;
                DAT_004bfedc = 0xd;
            }
            if (DAT_004d6b48 != 0)
            {
                FUN_00440550(0x54);
                if (*(char *)(param_1 + 0x5f) == '\0')
                {
                    iVar8 = -1;
                    FUN_0040a120(0);
                    FUN_00409d70(-1);
                    FUN_00409d70(0);
                    iVar6 = *(char *)(param_1 + 0x5d) * 0xc;
                    FUN_00427d90((int)(char)(&DAT_004bfef1)[iVar6], (int)(char)(&DAT_004bfef0)[iVar6]);
                    iVar6 = FUN_0041d6b0();
                    if ((iVar6 == 0) || (iVar6 = FUN_0041d6c0(), iVar6 != 0))
                    {
                        if ((*(char *)(param_1 + 0x6c) != '\0')
                            && (((DAT_00e35a84 != (&DAT_004bfef2)[*(char *)(param_1 + 0x5d) * 0xc]
                                  && (_DAT_00ec8854 != 0.0))
                                 && (_DAT_0050c458 == 0))))
                        {
                            DAT_004bfedc = 0xf;
                        }
                        DAT_0050c944 = -1;
                        iVar8 = FUN_004409d0(&DAT_00e35a60, &DAT_004c0948);
                        if ((iVar8 != 0) && (((byte)DAT_0050c908 & 4) != 0))
                        {
                            FUN_00440c10(param_1);
                        }
                        FUN_0041e660();
                        return;
                    }
                }
                else
                {
                    switch ((&DAT_0050c308)[*(char *)(param_1 + 0x5f)])
                    {
                    case 1:
                        DAT_004bfedc = 8;
                        iVar8 = 2;
                        *(undefined_32 *)(param_1 + 0x10) = 0;
                        FUN_0045a3e0();
                        break;
                    case 2:
                        DAT_004bfedc = 8;
                        iVar8 = 2;
                        *(undefined_32 *)(param_1 + 0x10) = 1;
                        FUN_0045a3e0();
                        break;
                    case 3:
                        DAT_004bfedc = 7;
                        iVar8 = 0;
                        *(undefined_32 *)(param_1 + 0x10) = 0;
                        break;
                    case 4:
                        iVar8 = 1;
                        DAT_004bfedc = 4;
                        break;
                    case 5:
                        DAT_004bfedc = 7;
                        iVar8 = 0;
                        *(undefined_32 *)(param_1 + 0x10) = 1;
                        break;
                    case 6:
                        DAT_004bfedc = 9;
                        *(char *)(param_1 + 0x6f) = local_71;
                        iVar8 = 3;
                        _DAT_0050c480 = 1;
                        break;
                    case 7:
                        *(undefined_32 *)(param_1 + 0x10) = 1;
                        return;
                    }
                }
            }
            local_71 = local_71 + '\x01';
        } while (local_71 < *(char *)(param_1 + 0x70));
    }
    if (iVar8 != -1)
    {
        if (*(int *)(param_1 + 0x38) == iVar8)
        {
            FUN_00454d40(param_1, DAT_004bfedc);
            return;
        }
        DAT_0050c944 = -1;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00436fa0(int param_1)

{
    uint uVar1;
    bool bVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;
    undefined_32 uVar6;

    bVar2 = false;
    iVar4 = DAT_0050c928 + 0x82;
    DAT_0050c928 = DAT_0050c928 + 1;
    _DAT_0050c224 = 0x43250000;
    _DAT_0050c43c = 0x428c0000;
    if (DAT_00e364a6 == 0)
    {
        uVar3 = lookup_translation(s__SCREENTEXT_91__sOFF_004c0ba8);
        uVar3 = __ftol(0xf, DAT_0050c528, 0, uVar3);
        FUN_0043fce0(param_1, 0xa5, uVar3);
    }
    else
    {
        sprite_enable_display(iVar4, 1);
        uVar3 = __ftol();
        uVar3 = __ftol(uVar3);
        sprite_set_pos(iVar4, uVar3);
        sprite_scale(iVar4, 0.125 - (float)(uint)DAT_00e364a6 * -0.03921569, 1.0f);
        sprite_set_color(iVar4, 0x32, -1, -1, -1);
        uVar3 = __ftol();
        uVar3 = __ftol(uVar3);
        uVar3 = __ftol(uVar3);
        uVar3 = __ftol(uVar3);
        FUN_00484020(uVar3);
    }
    uVar3 = lookup_translation(s__SCREENTEXT_81__r_sMusic__004c0b8c);
    uVar3 = __ftol(0xf, DAT_0050c528, 0, uVar3);
    FUN_0043fce0(param_1, 0x9b, uVar3);
    iVar4 = DAT_0050c928 + 0x82;
    DAT_0050c928 = DAT_0050c928 + 1;
    if (DAT_00e364a5 == 0)
    {
        uVar3 = lookup_translation(s__SCREENTEXT_91__sOFF_004c0ba8);
        uVar3 = __ftol(0xf, DAT_0050c528, 1, uVar3);
        FUN_0043fce0(param_1, 0xa5, uVar3);
    }
    else
    {
        sprite_enable_display(iVar4, 1);
        uVar3 = __ftol();
        uVar3 = __ftol(uVar3);
        sprite_set_pos(iVar4, uVar3);
        sprite_scale(iVar4, 0.125 - (float)(uint)DAT_00e364a5 * -0.03921569, 1.0f);
        sprite_set_color(iVar4, 0x32, -1, -1, -1);
        uVar3 = __ftol();
        uVar3 = __ftol(uVar3);
        uVar3 = __ftol(uVar3);
        uVar3 = __ftol(uVar3);
        FUN_00484020(uVar3);
    }
    uVar3 = lookup_translation(s__SCREENTEXT_82__r_sSound__004c0b70);
    uVar3 = __ftol(0xf, DAT_0050c528, 1, uVar3);
    FUN_0043fce0(param_1, 0x9b, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_83__r_sAudio__004c0b54);
    uVar3 = __ftol(0xf, DAT_0050c528, 2, uVar3);
    FUN_0043fce0(param_1, 0x9b, uVar3);
    if ((DAT_00e364a8 & 1) == 0)
    {
        uVar3 = lookup_translation(s__SCREENTEXT_85__sMONO_004c0b24);
    }
    else
    {
        uVar3 = lookup_translation(s__SCREENTEXT_84__sSTEREO_004c0b3c);
    }
    uVar3 = __ftol(0xf, DAT_0050c528, 2, uVar3);
    FUN_0043fce0(param_1, 0xa5, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_89__r_sLens_flares__004c0b04);
    uVar3 = __ftol(0xf, DAT_0050c528, 3, uVar3);
    FUN_0043fce0(param_1, 0x9b, uVar3);
    if ((DAT_00e364a8 & 2) == 0)
    {
        uVar3 = lookup_translation(s__SCREENTEXT_91__sOFF_004c0ba8);
    }
    else
    {
        uVar3 = lookup_translation(s__SCREENTEXT_90__sON_004c0af0);
    }
    uVar3 = __ftol(0xf, DAT_0050c528, 3, uVar3);
    FUN_0043fce0(param_1, 0xa5, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_467__r_sResolution__004c0ad0);
    uVar3 = __ftol(0xf, DAT_0050c528, 4, uVar3);
    FUN_0043fce0(param_1, 0x9b, uVar3);
    if ((DAT_00e364a8 & 0x10) == 0)
    {
        uVar3 = lookup_translation(s__SCREENTEXT_469__sLo_res_004c0a98);
    }
    else
    {
        uVar3 = lookup_translation(s__SCREENTEXT_468__sHi_res_004c0ab4);
    }
    uVar3 = __ftol(0xf, DAT_0050c528, 4, uVar3);
    FUN_0043fce0(param_1, 0xa5, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_92__c_sExit_004c0a80);
    uVar3 = __ftol(0xf, DAT_0050c528, 5, uVar3);
    FUN_0043fce0(param_1, 0xa0, uVar3);
    iVar5 = 0;
    iVar4 = DAT_0050c528;
    if ('\0' < *(char *)(param_1 + 0x70))
    {
        while (true)
        {
            if (DAT_004d6b48 != 0)
            {
                FUN_00440550(0x4d);
                bVar2 = true;
                iVar4 = DAT_0050c528;
            }
            if (DAT_004d6b44 != 0)
            {
                FUN_00440550(0x4d);
                bVar2 = true;
                iVar4 = DAT_0050c528;
            }
            if (bVar2)
                break;
            if (((&DAT_0050c918)[iVar5] & 0x8000) != 0)
            {
                DAT_0050c528 = iVar4 + 1;
                if (DAT_004c0208 < DAT_0050c528)
                {
                    DAT_0050c528 = 0;
                }
                FUN_00440550(0x58);
                iVar4 = DAT_0050c528;
            }
            if (((&DAT_0050c918)[iVar5] & 0x4000) != 0)
            {
                DAT_0050c528 = iVar4 + -1;
                if (DAT_0050c528 < 0)
                {
                    DAT_0050c528 = DAT_004c0208;
                }
                FUN_00440550(0x58);
                iVar4 = DAT_0050c528;
            }
            if (((&DAT_0050c918)[iVar5] & 0x30000) != 0)
            {
                if (iVar4 == 2)
                {
                    DAT_00e364a8 = DAT_00e364a8 ^ 1;
                }
                if (iVar4 == 3)
                {
                    DAT_00e364a8 = DAT_00e364a8 ^ 2;
                }
                if (iVar4 == 4)
                {
                    DAT_00e364a8 = DAT_00e364a8 ^ 0x10;
                }
                if ((1 < iVar4) && (iVar4 != 5))
                {
                    FUN_00440550(0x58);
                    iVar4 = DAT_0050c528;
                }
            }
            if (iVar4 == 0)
            {
                uVar1 = (&DAT_0050c908)[iVar5];
                if (((uVar1 & 0x20000) != 0) && (DAT_00e364a6 != 0xff))
                {
                    if ((float)(uint)DAT_00e364a6 + _DAT_00e22a50 * 255.0 <= 255.0)
                    {
                        DAT_00e364a6 = __ftol();
                    }
                    else
                    {
                        DAT_00e364a6 = 0xff;
                    }
                }
                if (((uVar1 & 0x10000) != 0) && (DAT_00e364a6 != 0))
                {
                    if (0.0 <= (float)(uint)DAT_00e364a6 - _DAT_00e22a50 * 255.0)
                    {
                        DAT_00e364a6 = __ftol();
                    }
                    else
                    {
                        DAT_00e364a6 = 0;
                    }
                }
                uVar6 = 0.25f;
                uVar3 = 0x9b;
            LAB_00437679:
                FUN_00426c80(uVar3, 6, uVar6, 1.0f, 1);
                iVar4 = DAT_0050c528;
            }
            else if (iVar4 == 1)
            {
                uVar1 = (&DAT_0050c908)[iVar5];
                if (((uVar1 & 0x20000) != 0) && (DAT_00e364a5 != 0xff))
                {
                    if ((float)(uint)DAT_00e364a5 + _DAT_00e22a50 * 255.0 <= 255.0)
                    {
                        DAT_00e364a5 = __ftol();
                    }
                    else
                    {
                        DAT_00e364a5 = 0xff;
                    }
                }
                if (((uVar1 & 0x10000) != 0) && (DAT_00e364a5 != 0))
                {
                    if (0.0 <= (float)(uint)DAT_00e364a5 - _DAT_00e22a50 * 255.0)
                    {
                        DAT_00e364a5 = __ftol();
                    }
                    else
                    {
                        DAT_00e364a5 = 0;
                    }
                }
                uVar6 = 0x3e000000;
                uVar3 = 0x4f;
                goto LAB_00437679;
            }
            iVar5 = iVar5 + 1;
            if (*(char *)(param_1 + 0x70) <= iVar5)
            {
                return;
            }
        }
        FUN_0044e560();
        *(undefined_32 *)(param_1 + 0x10) = 0;
    }
    return;
}

undefined_32 FUN_004376b0(void)

{
    return DAT_00ec86b0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004376c0(int param_1)

{
    int iVar1;
    undefined_32 uVar2;
    float10 fVar3;
    int local_124;
    uint *local_120;
    float local_118;
    float local_114;
    undefined_8 local_10c[8];
    undefined_32 local_104;
    undefined_8 local_100[256];

    FUN_0043da90(param_1, DAT_004c4000, 0x14);
    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        _DAT_00e99358 = -300.0;
        DAT_0050c468 = 0;
        if (*(int *)(param_1 + 0x3c) != 0)
        {
            FUN_0045a840(param_1);
        }
        DAT_0050c46c = 0;
        DAT_0050c1f8 = 4 - (_DAT_00e35aa0 & 0xff);
        DAT_0050c52c = 0;
        if (*(int *)(param_1 + 0x10) == 0)
        {
            FUN_0045bee0(param_1, 1, -1, 0);
            DAT_0050c934 = 0;
            FUN_0045c9d0(param_1, 1);
            DAT_0050c474 = 1;
            FUN_0045cf60((int)*(char *)(param_1 + 0x73),
                         (int)(char)(&DAT_004c1cbb)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                         (int)(char)(&DAT_004c1cb9)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                         (&DAT_00e2a6c1)[DAT_00e295d0 * 0x38]);
            DAT_004c020c = DAT_00e295d0;
        }
        else
        {
            DAT_00e99400 = (ushort)(DAT_00e35a98 < 1000);
            DAT_0050c52c = (uint)(DAT_0050c1f8 != 0);
            iVar1 = FUN_00440b50(param_1);
            if (iVar1 != 0)
            {
                FUN_0045bee0(param_1, 2, -1, 0);
            }
        }
    }
    FUN_00437ea0(param_1);
    if (*(int *)(param_1 + 0x10) == 0)
    {
        if (DAT_004c020c != DAT_00e295d0)
        {
            DAT_004c020c = DAT_00e295d0;
            DAT_0050c474 = 1;
            FUN_0045cf60((int)*(char *)(param_1 + 0x73),
                         (int)(char)(&DAT_004c1cbb)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                         (int)(char)(&DAT_004c1cb9)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                         (&DAT_00e2a6c1)[DAT_00e295d0 * 0x38]);
            FUN_0043eb50();
        }
    }
    else if (((0 < DAT_0050c1f8) && (DAT_0050c930 != 1)) && (_DAT_00e99358 == -300.0))
    {
        DAT_0050c468 = 1;
        DAT_0050c930 = 5;
        FUN_00468fe0(DAT_0050c1f8 + 0x33, 3);
    }
    if (*(int *)(param_1 + 0x34) == 1)
    {
        FUN_0043ec10();
        FUN_004550d0(param_1, 20.0f, 0x43070000);
    }
    else
    {
        FUN_0043f380(param_1);
    }
    if (((DAT_0050c470 == 0) && (DAT_0050c468 == 0))
        && ((*(int *)(param_1 + 0x34) == 1 && ((DAT_0050c930 == 0 || (DAT_0050c930 == 5))))))
    {
        uVar2 = lookup_translation(
            (&PTR_s__SCREENTEXT_280___R_20_Repulsorg_004c1cc4)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 4]);
        uVar2 = lookup_translation(s__c_s_s_004c0bc0, uVar2);
        _sprintf(local_100, uVar2);
        create_text_entry_0(0xa0, 0x19, 0x32, -1, -1, -1, local_100);
        uVar2 = FUN_0042de10(local_100, 0);
        FUN_0042de10(local_100, 0, 0x1a, uVar2);
        uVar2 = __ftol();
        FUN_00440150(uVar2);
    }
    FUN_0043dba0(param_1);
    FUN_00455dc0(param_1);
    DAT_0050c474 = 0;
    if ((*(int *)(param_1 + 8) == 3) || (local_124 = 0, *(char *)(param_1 + 0x70) < '\x01'))
    {
        return;
    }
    local_120 = &DAT_0050c908;
    do
    {
        if ((DAT_0050c468 == 0) && (DAT_004eb39c == 0))
        {
            if (DAT_004d6b48 != 0)
            {
                FUN_00440550(0x54);
                if (*(int *)(param_1 + 0x10) == 0)
                {
                    if (DAT_00e295d0 != -1)
                    {
                        if (DAT_0050c470 == 0)
                        {
                            if ((DAT_0050c930 == 0) || (DAT_0050c930 == 5))
                            {
                                DAT_0050c474 = 1;
                                DAT_0050c470 = 1;
                                DAT_00e99400 = 0;
                                DAT_0050c468 = 1;
                                FUN_0043eb50();
                            }
                        }
                        else
                        {
                            if (DAT_00e99400 == 0)
                            {
                                FUN_00468fe0(0x1c, 0x19);
                                FUN_00440800(param_1);
                            }
                            else
                            {
                                FUN_00468fe0(0x1c, 0x1a);
                            }
                            DAT_0050c474 = 1;
                            DAT_00e99400 = 0;
                            DAT_0050c470 = 0;
                            DAT_0050c954 = 1;
                            DAT_0050c468 = -1;
                        }
                    }
                }
                else if (*(int *)(param_1 + 0x10) == 1)
                {
                    if (DAT_0050c52c == 0)
                    {
                        if (0 < DAT_0050c1f8)
                        {
                            DAT_0050c52c = 1;
                            DAT_0050c468 = 1;
                            DAT_00e99400 = 0;
                            FUN_00468fe0(DAT_0050c1f8 + 0x33, 3);
                        }
                    }
                    else if (DAT_00e99400 == 1)
                    {
                        DAT_00e99400 = 0;
                        DAT_0050c52c = 0;
                        DAT_0050c468 = -1;
                        FUN_00468fe0(DAT_0050c1f8 + 0x33, 4);
                        if (DAT_0050c47c != 2)
                            goto LAB_00437e79;
                        DAT_0050c47c = 0;
                        DAT_004bfedc = 8;
                        DAT_0050c944 = -1;
                    }
                    else if (999 < DAT_00e35a98)
                    {
                        FUN_0044afb0(*(undefined_32 *)(&DAT_00e299cc + DAT_0050c1f8 * 4), &local_118);
                        vec3f_copy(local_10c, &DAT_004c401c);
                        local_104 = 0xc2700000;
                        fVar3 = (float10)arctan2(local_118 - 12.0, -116.0 - local_114);
                        FUN_00468800(DAT_0050c1f8 + 0x33, 10, &local_118, local_10c, (float)fVar3, (float)fVar3);
                        DAT_00e35a98 = DAT_00e35a98 + -1000;
                        DAT_0050c1f8 = DAT_0050c1f8 + -1;
                        _DAT_00e35aa0 = _DAT_00e35aa0 & 0xffffff00 | (uint)(byte)(DAT_00e35aa0 + 1);
                        FUN_0044e560();
                        if (DAT_0050c1f8 < 1)
                        {
                            DAT_0050c52c = 0;
                            DAT_0050c468 = 0xffff;
                            if (DAT_0050c47c == 2)
                            {
                                DAT_004bfedc = 8;
                                DAT_0050c468 = 0xffff;
                                DAT_0050c47c = 0;
                                DAT_0050c52c = 0;
                                DAT_0050c944 = -1;
                                return;
                            }
                            *(undefined_8 *)(param_1 + 0x5f) = 1;
                            FUN_00454d40(param_1, 3);
                            return;
                        }
                        FUN_00468fe0(DAT_0050c1f8 + 0x33, 3);
                    }
                }
            }
            if (DAT_004d6b44 != 0)
            {
                FUN_00440550(0x4d);
                if (DAT_0050c52c == 0)
                {
                    if (DAT_0050c470 == 0)
                    {
                        DAT_0050c474 = 1;
                        if (DAT_0050c47c == 1)
                        {
                            DAT_004bfedc = 8;
                            DAT_0050c474 = 1;
                            DAT_0050c944 = -1;
                            return;
                        }
                        FUN_00454d40(param_1, 3);
                    }
                    else
                    {
                        FUN_00468fe0(0x1c, 0x1a);
                        DAT_0050c474 = 1;
                        DAT_0050c470 = 0;
                        DAT_0050c954 = 1;
                        DAT_00e99400 = 0;
                        DAT_0050c468 = -1;
                    }
                }
                else
                {
                    DAT_00e99400 = 0;
                    DAT_0050c468 = -1;
                    if (DAT_0050c47c != 2)
                    {
                    LAB_00437e79:
                        DAT_0050c52c = 0;
                        FUN_00454d40(param_1, 3);
                        return;
                    }
                    DAT_0050c47c = 0;
                    DAT_004bfedc = 8;
                    DAT_0050c944 = -1;
                }
            }
        }
        if ((*(int *)(param_1 + 0x10) == 0) && (FUN_00469c30(0, 1.0f, 0), DAT_0050c470 == 0))
        {
            if (((*local_120 & 0x20000) != 0) && (DAT_00e295d0 < DAT_00e295cc + -1))
            {
                _DAT_0050c938 = _DAT_00e22a50 * 50.0 + _DAT_0050c938;
                if (1.5 < _DAT_0050c938)
                {
                    _DAT_0050c938 = 1.5;
                }
                _DAT_0050c93c = _DAT_0050c93c - _DAT_00e22a50 * 5.5;
                if (_DAT_0050c93c < -1.0)
                {
                    _DAT_0050c93c = -1.0;
                }
            }
            if (((*local_120 & 0x10000) != 0) && (0 < DAT_00e295d0))
            {
                _DAT_0050c938 = _DAT_00e22a50 * 50.0 + _DAT_0050c938;
                if (1.5 < _DAT_0050c938)
                {
                    _DAT_0050c938 = 1.5;
                }
                _DAT_0050c93c = _DAT_00e22a50 * 5.5 + _DAT_0050c93c;
                if (1.0 < _DAT_0050c93c)
                {
                    _DAT_0050c93c = 1.0;
                }
            }
        }
        local_120 = local_120 + 1;
        local_124 = local_124 + 1;
        if (*(char *)(param_1 + 0x70) <= local_124)
        {
            return;
        }
    } while (true);
}

void FUN_00437ea0(int param_1)

{
    int iVar1;

    iVar1 = FUN_00427670(0, 0x10);
    if (iVar1 != 0)
    {
        iVar1 = FUN_00427670(0, 0x20);
        if (iVar1 != 0)
        {
            FUN_004276a0(0, 0x20);
            if (*(int *)(param_1 + 0x10) == 0)
            {
                iVar1 = FUN_00427670(0, 2);
                if (iVar1 == 0)
                {
                    FUN_00427690(0, 2);
                    FUN_00427410(2, 0, 1, 0);
                    return;
                }
                FUN_00427590(2, 0, 0x16, 0x17, 0x1e, 0x1f, 0x38, 0);
                return;
            }
            iVar1 = FUN_00427670(0, 8);
            if (iVar1 == 0)
            {
                FUN_00427690(0, 8);
                FUN_00427410(2, 0, 0xf, 0);
                return;
            }
            FUN_00427590(2, 0, 0x29, 0x2e, 0x2f, 0x30, 0xc, 0);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00437f70(int param_1)

{
    bool bVar1;
    float fVar2;
    float fVar3;
    undefined_32 *puVar4;
    short sVar5;
    int iVar6;
    short *psVar7;
    int iVar8;
    int *piVar9;
    float *pfVar10;
    int iVar11;
    short *psVar12;
    undefined_8 *puVar13;
    float10 fVar14;
    float10 fVar15;
    short *local_e4;
    float local_d8;
    float local_d4;
    float local_d0;
    int local_cc;
    undefined_16 *local_c8;
    undefined_16 *local_c4;
    double local_c0;
    double local_b8;
    undefined_8 local_b0[8];
    float local_a8;
    undefined_8 local_a4[12];
    undefined_8 local_98[12];
    undefined_8 local_8c[12];
    undefined_8 local_80[48];
    float local_50;
    float local_4c;
    undefined_32 local_48;
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    local_c4 = (undefined_16 *)0.1f;
    local_c8 = (undefined_16 *)0.1f;
    if (*(char *)(param_1 + 0x60) == '\0')
    {
        *(undefined_8 *)(param_1 + 0x60) = 1;
        return;
    }
    if ((*(int *)(param_1 + 8) == 3) || (*(int *)(param_1 + 8) == 8))
    {
        if (DAT_004c4000 != 0)
        {
            DAT_004c0214 = -1;
        }
        local_cc = 0;
        if ('\0' < *(char *)(param_1 + 0x70))
        {
            piVar9 = (int *)&DAT_00e2993c;
            pfVar10 = (float *)&DAT_00e99368;
            do
            {
                iVar11 = local_cc;
                if (*piVar9 != 0)
                {
                    pfVar10[-1] = (float)local_cc * -2500.0;
                    *pfVar10 = 50.0;
                    *pfVar10 = (float)((char)(&DAT_004c2724)[*(char *)(local_cc + 0x73 + param_1) * 0x34] * 10) - -50.0;
                    mat_set_rotation(local_40, 0, 0, 0);
                    vec3f_set(local_10, pfVar10[-2], pfVar10[-1], *pfVar10);
                    if (DAT_004c0214 != -1)
                    {
                        iVar6 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), DAT_004c0214);
                        iVar6 = *(int *)(iVar6 + 0x14);
                        if (iVar6 == 0xd)
                        {
                        LAB_004380b1:
                            DAT_004c0218 = (undefined_16 *)((float)DAT_004c0218 - _DAT_00e22a50);
                        }
                        else if (iVar6 == 0xe)
                        {
                            iVar6 = rand();
                            DAT_004c0218 =
                                (undefined_16 *)(((float)iVar6 * 4.656613e-10 * 0.4 - 0.2) + (float)DAT_004c0218);
                        }
                        else if (iVar6 == 0xf)
                            goto LAB_004380b1;
                        if ((float)DAT_004c0218 < 0.1)
                        {
                            DAT_004c0218 = (undefined_16 *)0.1f;
                        }
                        if (1.5 < (float)DAT_004c0218)
                        {
                            DAT_004c0218 = (undefined_16 *)1.5f;
                        }
                        if (DAT_004c0210 == 2)
                        {
                            local_c4 = DAT_004c0218;
                        }
                        else
                        {
                            local_c8 = DAT_004c0218;
                        }
                    }
                    FUN_004337e0(*piVar9, local_40, 0, 0x428c0000, 0x428c0000, 0x428c0000, 0xc31d0000, 1, local_c4,
                                 local_c8);
                }
                local_cc = iVar11 + 1;
                pfVar10 = pfVar10 + 10;
                piVar9 = piVar9 + 1;
            } while (local_cc < *(char *)(param_1 + 0x70));
        }
        iVar11 = 0;
        do
        {
            iVar6 = *(int *)(&DAT_00e29a54)[iVar11];
            if (iVar6 != 0)
            {
                FUN_00431a50(iVar6, 2, 0xfffffffc, 0x10, 3);
                vec3f_set(local_98, 0x44434000, (float)(iVar11 * 100 + -0x20a), 0xc31d0000);
                vec3f_set(local_8c, 0, 0, 0);
                if (iVar11 == 3)
                {
                    vec3f_set(local_98, 0x44434000, 0xc3c28000, 0xc2ce0000);
                    vec3f_set(local_8c, 0, 45.0f, 0);
                }
                mat_set_rotation_translation(local_80, local_98);
                mat_multiply_rows(local_80, 0.5f, 0.5f, 0.5f, local_80);
                FUN_00431640(iVar6, local_80);
                FUN_00431a50(iVar6, 2, 3, 0x10, 2);
            }
            iVar11 = iVar11 + 1;
        } while (iVar11 < 4);
        if ((DAT_004c4000 != 0) && (*(int *)(param_1 + 0x3c) != 2))
        {
            iVar11 = 0;
            if ('\0' < *(char *)(param_1 + 0x70))
            {
                local_cc = 0;
                do
                {
                    vec3f_copy(&local_d8, &DAT_004c43d0);
                    local_d0 = -157.0;
                    vec3f_copy(&DAT_00e298a0, &DAT_004c43dc);
                    _DAT_00e298a4 = _DAT_00e298a4 - (float)local_cc;
                    fVar14 = (float10)arctan2(local_d8 - _DAT_004c43dc, _DAT_004c43e0 - local_d4);
                    iVar6 = *(int *)(param_1 + 0x34) * 0x20;
                    fVar15 = (float10)arctan2(_DAT_00e298a0 - *(float *)(&DAT_004c401c + iVar6),
                                              *(float *)(&DAT_004c4020 + iVar6) - _DAT_00e298a4);
                    FUN_00468800(iVar11 + 0x1c, 0x14, &local_d8, &DAT_00e298a0, (float)fVar14, (float)fVar15);
                    iVar11 = iVar11 + 1;
                    local_cc = local_cc + 0x9c4;
                } while (iVar11 < *(char *)(param_1 + 0x70));
            }
            rand();
            DAT_0050c138 = __ftol();
            iVar11 = 1;
            psVar12 = &DAT_0050c13a;
            do
            {
                do
                {
                    rand();
                    sVar5 = __ftol();
                    *psVar12 = sVar5;
                    if (0x50c138 < (int)psVar12)
                    {
                        psVar7 = &DAT_0050c138;
                        iVar6 = iVar11;
                        do
                        {
                            if (*psVar12 == *psVar7)
                            {
                                *psVar12 = -1;
                            }
                            psVar7 = psVar7 + 1;
                            iVar6 = iVar6 + -1;
                        } while (iVar6 != 0);
                    }
                    puVar4 = DAT_00e2993c;
                } while (*psVar12 == -1);
                psVar12 = psVar12 + 1;
                iVar11 = iVar11 + 1;
            } while ((int)psVar12 < 0x50c140);
            DAT_004bfed4 = 1;
            DAT_004bfed8 = 2;
            local_c4 = (undefined_16 *)0x11;
            local_c8 = (undefined_16 *)0x1f;
            if (DAT_00e2993c[1] == 0)
            {
                DAT_004bfed4 = 5;
                local_c4 = (undefined_16 *)0x2d;
            }
            if (DAT_00e2993c[2] == 0)
            {
                DAT_004bfed8 = 5;
                local_c8 = (undefined_16 *)0x2d;
            }
            if (DAT_00e35aa0 != '\0')
            {
                local_cc = 0x34;
                local_e4 = &DAT_0050c138;
                puVar13 = &DAT_0050c230;
                iVar11 = 0;
                do
                {
                    switch (*local_e4)
                    {
                    case 0:
                        sVar5 = 0;
                        do
                        {
                            local_c0 = (double)_DAT_00e99310;
                            local_b8 = (double)((_DAT_00e99310 - _DAT_00e99304 * -2.0) * 0.3333333);
                            iVar6 = rand();
                            iVar6 = rand(((float)local_c0 - (float)local_b8) * (float)iVar6 * 4.656613e-10
                                             + (float)local_b8,
                                         0xc31d0000);
                            fVar2 = (_DAT_00e9930c - _DAT_00e99300) * (float)iVar6 * 4.656613e-10 + _DAT_00e99300;
                            fVar14 = (float10)FUN_0045cf00();
                            vec3f_set(&local_d8, (float)(fVar14 * (float10)fVar2));
                            if (0.0 <= local_d8)
                            {
                                DAT_004c0210 = DAT_004bfed4;
                                _DAT_0050c534 = local_c8;
                            }
                            else
                            {
                                DAT_004c0210 = DAT_004bfed8;
                                _DAT_0050c534 = local_c4;
                            }
                            FUN_00482c40(*puVar4, puVar4[(int)_DAT_0050c534], &local_d8, 10, puVar13,
                                         &DAT_0050c148 + iVar11, &DAT_0050c0e0 + iVar11);
                            FUN_00482dd0(local_b0, local_a4, puVar13, &DAT_0050c148 + iVar11, &DAT_0050c0e0 + iVar11);
                        } while (((local_a8 - 90.0) - 32.0 <= -157.0)
                                 && (bVar1 = sVar5 < 0x14, sVar5 = sVar5 + 1, bVar1));
                        FUN_004316a0(puVar4[DAT_004c0210], local_80);
                        vec3f_copy(&local_d8, local_b0);
                        fVar14 = (float10)arctan2(local_d8 - local_50, local_4c - local_d4);
                        iVar6 = local_cc;
                        FUN_00468800(local_cc, 0xe, &local_d8, &local_d8, (float)fVar14, (float)fVar14);
                        DAT_004c0214 = iVar6;
                        break;
                    case 1:
                        FUN_004316a0(puVar4[5], local_80);
                        iVar6 = rand(local_48);
                        fVar14 = (float10)FUN_0045cf00((_DAT_00e99350 - _DAT_00e99344) * (float)iVar6 * 4.656613e-10
                                                       + _DAT_00e99344);
                        vec3f_set(&local_d8, (float)(((float10)_DAT_00e99340 - (float10)30.0) * fVar14));
                        FUN_00482c40(*puVar4, puVar4[0x2d], &local_d8, 10, puVar13, &DAT_0050c148 + iVar11,
                                     &DAT_0050c0e0 + iVar11);
                        FUN_00482dd0(local_b0, local_a4, puVar13, &DAT_0050c148 + iVar11, &DAT_0050c0e0 + iVar11);
                        vec3f_copy(&local_d8, local_b0);
                        if (0.0 <= local_d8)
                            goto LAB_004388f8;
                        local_d8 = local_d8 - 30.0;
                        break;
                    case 2:
                        FUN_004316a0(puVar4[DAT_004bfed8], local_80);
                        local_c0 = (double)_DAT_00e99310;
                        local_b8 = (double)((_DAT_00e99310 - _DAT_00e99304 * -2.0) * 0.3333333);
                        iVar6 = rand();
                        vec3f_set(&local_d8, _DAT_00e99300 - 30.0,
                                  ((float)local_c0 - (float)local_b8) * (float)iVar6 * 4.656613e-10 + (float)local_b8,
                                  local_48);
                        FUN_00482c40(*puVar4, puVar4[(int)local_c4], &local_d8, 10, puVar13, &DAT_0050c148 + iVar11,
                                     &DAT_0050c0e0 + iVar11);
                        FUN_00482dd0(local_b0, local_a4, puVar13, &DAT_0050c148 + iVar11, &DAT_0050c0e0 + iVar11);
                        vec3f_copy(&local_d8, local_b0);
                        local_d8 = local_d8 - 30.0;
                        break;
                    case 3:
                        FUN_004316a0(puVar4[DAT_004bfed4], local_80);
                        local_c0 = (double)_DAT_00e99310;
                        local_b8 = (double)((_DAT_00e99310 - _DAT_00e99304 * -2.0) * 0.3333333);
                        iVar6 = rand();
                        vec3f_set(&local_d8, _DAT_00e9932c - -30.0,
                                  ((float)local_c0 - (float)local_b8) * (float)iVar6 * 4.656613e-10 + (float)local_b8,
                                  local_48);
                        FUN_00482c40(*puVar4, puVar4[(int)local_c8], &local_d8, 10, puVar13, &DAT_0050c148 + iVar11,
                                     &DAT_0050c0e0 + iVar11);
                        FUN_00482dd0(local_b0, local_a4, puVar13, &DAT_0050c148 + iVar11, &DAT_0050c0e0 + iVar11);
                        vec3f_copy(&local_d8, local_b0);
                    LAB_004388f8:
                        local_d8 = local_d8 - -30.0;
                    }
                    if ((0 < *local_e4) && (*local_e4 < 4))
                    {
                        local_d0 = local_d0 - 20.0;
                        vec3f_copy(&DAT_00e298a0, &local_d8);
                        _DAT_00e298a0 = _DAT_00e298a0 * -1.0;
                        fVar14 = (float10)arctan2(local_d8 - _DAT_00e298a0, _DAT_00e298a4 - local_d4);
                        FUN_00468800(local_cc, 8, &local_d8, &local_d8, (float)fVar14, (float)fVar14);
                    }
                    iVar11 = iVar11 + 0xc;
                    puVar13 = puVar13 + 0x28;
                    local_e4 = local_e4 + 1;
                    iVar6 = local_cc + 1;
                    iVar8 = local_cc + -0x33;
                    local_cc = iVar6;
                } while (iVar8 < (int)(_DAT_00e35aa0 & 0xff));
            }
            fVar2 = _DAT_00e99310 - -500.0;
            iVar11 = rand(0xc31d0000);
            iVar11 = rand(((_DAT_00e99310 - -1500.0) - fVar2) * (float)iVar11 * 4.656613e-10 + fVar2);
            vec3f_set(&local_d8, (float)iVar11 * 4.656613e-10 * 2000.0 - 1000.0);
            iVar11 = rand();
            fVar2 = (float)iVar11 * 4.656613e-10 * 360.0;
            FUN_00468800(0x14, 0x29, &local_d8, &local_d8, fVar2, fVar2);
            fVar2 = _DAT_00e99300 - 500.0;
            iVar11 = rand(0xc31d0000);
            iVar11 = rand((_DAT_00e99310 - -1000.0) * (float)iVar11 * 4.656613e-10 - 1000.0);
            vec3f_set(&local_d8, ((_DAT_00e99300 - 1000.0) - fVar2) * (float)iVar11 * 4.656613e-10 + fVar2);
            iVar11 = rand();
            fVar2 = (float)iVar11 * 4.656613e-10 * 360.0;
            FUN_00468800(0x13, 0x28, &local_d8, &local_d8, fVar2, fVar2);
        }
        iVar11 = 0;
        if (DAT_00e35aa0 != '\0')
        {
            local_c4 = &DAT_0050c138;
            local_c8 = (undefined_16 *)&DAT_0050c230;
            iVar6 = 0;
            do
            {
                iVar8 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), iVar11 + 0x34);
                FUN_00482dd0(local_b0, local_a4, local_c8, &DAT_0050c148 + iVar6, &DAT_0050c0e0 + iVar6);
                pfVar10 = (float *)(iVar8 + 0x44);
                vec3f_copy(pfVar10, local_b0);
                switch (*local_c4)
                {
                case 0:
                    fVar3 = *(float *)(iVar8 + 0x4c) - 90.0;
                    break;
                case 1:
                    if (0.0 <= *pfVar10)
                    {
                        *pfVar10 = *pfVar10 - -30.0;
                        fVar3 = *(float *)(iVar8 + 0x4c) - 20.0;
                    }
                    else
                    {
                        *pfVar10 = *pfVar10 - 30.0;
                        fVar3 = *(float *)(iVar8 + 0x4c) - 20.0;
                    }
                    break;
                case 2:
                    fVar2 = *pfVar10 - 30.0;
                    goto LAB_00438bfb;
                case 3:
                    fVar2 = *pfVar10 - -30.0;
                LAB_00438bfb:
                    fVar3 = *(float *)(iVar8 + 0x4c) - 20.0;
                    *pfVar10 = fVar2;
                    break;
                default:
                    goto switchD_00438ba0_caseD_4;
                }
                *(float *)(iVar8 + 0x4c) = fVar3;
            switchD_00438ba0_caseD_4:
                FUN_0044b270(*(undefined_32 *)(iVar8 + 0x30), pfVar10);
                iVar11 = iVar11 + 1;
                iVar6 = iVar6 + 0xc;
                local_c8 = local_c8 + 0x14;
                local_c4 = local_c4 + 1;
            } while (iVar11 < (int)(_DAT_00e35aa0 & 0xff));
        }
        FUN_00456200(param_1);
        if ((DAT_004c4000 != 0) && (DAT_0050c47c == 1))
        {
            DAT_0050c47c = 0;
            *(undefined_32 *)(param_1 + 0x10) = 1;
        }
        if (*(int *)(param_1 + 0x10) == 1)
        {
            _DAT_0050c958 = _DAT_0050c958 + _DAT_00e22a50;
            if (0.4 < _DAT_0050c958)
            {
                _DAT_0050c958 = 0.4;
            }
            if (*(int *)(param_1 + 8) == 8)
            {
                FUN_004396d0(param_1);
            }
        }
        else
        {
            _DAT_0050c958 = _DAT_0050c958 - _DAT_00e22a50;
            if (_DAT_0050c958 < 0.0)
            {
                _DAT_0050c958 = 0.0;
            }
            if (*(int *)(param_1 + 8) == 8)
            {
                FUN_00438d20(param_1);
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00438d20(uint *param_1)

{
    bool bVar1;
    bool bVar2;
    bool bVar3;
    float fVar4;
    int iVar5;
    undefined_32 uVar6;
    undefined_8_1 *puVar7;
    int iVar8;
    int iVar9;
    float10 fVar10;
    char *pcVar11;
    float local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_8 local_40[16];
    undefined_8 local_30[48];

    iVar5 = (int)param_1;
    bVar1 = false;
    bVar2 = false;
    bVar3 = false;
    if (DAT_004c021c == 0)
    {
        if (DAT_004c4000 != 0)
            goto LAB_00438d57;
        if (DAT_0050c930 == 4)
            goto LAB_00438d53;
    }
    else
    {
    LAB_00438d53:
        if (DAT_004c4000 != 0)
        {
        LAB_00438d57:
            _sprintf(&DAT_0050c328, &DAT_004d55cc);
            if (DAT_004c4000 != 0)
            {
                vec3f_set(&DAT_00e2af90, 0, 0, 0);
            }
        }
        *(undefined_32 *)((int)param_1 + 0x34) = 0x14;
        FUN_0043f8e0(param_1, 0x14, 0);
        vec3f_sub(&local_4c, &DAT_00e298f0, &DAT_00e2af90);
        fVar10 = (float10)rdVector_Len3(&local_4c);
        DAT_0050c210 = (float)fVar10;
        rdVector_Normalize3(&local_4c);
        fVar10 = (float10)arctan2(-local_4c, local_48);
        DAT_0050c1fc = (float)fVar10;
        fVar10 = (float10)arctan(local_44);
        DAT_0050c2f0 = (float)fVar10;
        if (DAT_0050c1fc < 0.0)
        {
            DAT_0050c1fc = DAT_0050c1fc - -360.0;
        }
        if (360.0 < DAT_0050c1fc)
        {
            DAT_0050c1fc = DAT_0050c1fc - 360.0;
        }
        if (DAT_0050c2f0 < -90.0)
        {
            DAT_0050c2f0 = DAT_0050c2f0 - -180.0;
        }
        if (90.0 < DAT_0050c2f0)
        {
            DAT_0050c2f0 = DAT_0050c2f0 - 180.0;
        }
        DAT_004c0220 = 1;
        _DAT_0050c95c = 0.0;
        DAT_004c021c = 0;
        DAT_004c4000 = 0;
        DAT_0050c930 = 0;
    }
    if ((DAT_004c0220 != 0) && (_DAT_0050c95c = _DAT_0050c95c + _DAT_00e22a50, 5.0 <= _DAT_0050c95c))
    {
        _DAT_0050c95c = 5.0;
    }
    switch (*(undefined_32 *)((int)param_1 + 0x34))
    {
    case 0x14:
        puVar7 = &DAT_004d55cc;
        goto LAB_00438fa9;
    case 0x15:
        pcVar11 = s__SCREENTEXT_152__c_sCockpit_004c0cb8;
        break;
    case 0x16:
        pcVar11 = s__SCREENTEXT_153__c_sEngine_1_004c0c98;
        break;
    case 0x17:
        pcVar11 = s__SCREENTEXT_154__c_sEngine_2_004c0c78;
        break;
    case 0x18:
        pcVar11 = s__SCREENTEXT_155__c_sEngine_3_004c0c58;
        break;
    case 0x19:
        pcVar11 = s__SCREENTEXT_156__c_sEngine_4_004c0c38;
        break;
    case 0x1a:
        pcVar11 = s__SCREENTEXT_158__c_sPT01_004c0c1c;
        break;
    case 0x1b:
        pcVar11 = s__SCREENTEXT_159__c_sPT02_004c0c00;
        break;
    case 0x1c:
        pcVar11 = s__SCREENTEXT_160__c_sPT03_004c0be4;
        break;
    case 0x1d:
        pcVar11 = s__SCREENTEXT_161__c_sPT04_004c0bc8;
        break;
    case 0x1e:
        uVar6 = lookup_translation((&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[*(char *)((int)param_1 + 0x73) * 0xd]);
        uVar6 =
            lookup_translation((&PTR_s__SCREENTEXT_322___Anakin_004c2714)[*(char *)((int)param_1 + 0x73) * 0xd], uVar6);
        uVar6 = lookup_translation(s__c_s_s__s_004c08d8, uVar6);
        _sprintf(&DAT_0050c328, uVar6);
    default:
        goto switchD_00438ef9_caseD_b;
    }
    puVar7 = (undefined_8_1 *)lookup_translation(pcVar11);
LAB_00438fa9:
    _sprintf(&DAT_0050c328, puVar7);
switchD_00438ef9_caseD_b:
    create_text_entry_0(0xa0, 0xc3, 0, -1, 0, -1, &DAT_0050c328);
    iVar9 = 0;
    if ('\0' < *(char *)((int)param_1 + 0x70))
    {
        param_1 = &DAT_0050c908;
        do
        {
            fVar4 = DAT_0050c210;
            if (DAT_004eb39c == 0)
            {
                if (DAT_004d6b48 != 0)
                {
                    FUN_00440550(0x54);
                    DAT_004c021c = 1;
                    return;
                }
                if (DAT_004d6b44 != 0)
                {
                    FUN_00440550(0x4d);
                    DAT_004c021c = 1;
                    _DAT_0050c958 = 0;
                    FUN_00454d40(iVar5, 3);
                    return;
                }
            }
            if ((0.1 < (float)(&DAT_00e98ea0)[iVar9]) || ((float)(&DAT_00e98ea0)[iVar9] < -0.1))
            {
                if (DAT_004c0220 == 0)
                {
                    bVar2 = true;
                    DAT_0050c1fc = DAT_0050c1fc - (float)(&DAT_00e98ea0)[iVar9] * _DAT_00e22a50 * -70.0 * 1.5;
                }
                if (_DAT_0050c95c == 5.0)
                {
                    bVar3 = true;
                }
                DAT_004c0220 = 0;
            }
            if ((0.1 < (float)(&DAT_00e98e80)[iVar9]) || ((float)(&DAT_00e98e80)[iVar9] < -0.1))
            {
                if (DAT_004c0220 == 0)
                {
                    DAT_0050c2f0 = DAT_0050c2f0 - (float)(&DAT_00e98e80)[iVar9] * _DAT_00e22a50 * -45.0 * 1.5;
                    if (89.0 < DAT_0050c2f0)
                    {
                        DAT_0050c2f0 = 89.0;
                    }
                    if (DAT_0050c2f0 < -89.0)
                    {
                        DAT_0050c2f0 = -89.0;
                    }
                    bVar2 = true;
                }
                if (_DAT_0050c95c == 5.0)
                {
                    bVar3 = true;
                }
                DAT_004c0220 = 0;
            }
            if ((*param_1 & 4) != 0)
            {
                if (DAT_004c0220 == 0)
                {
                    DAT_0050c210 = DAT_0050c210 - _DAT_00e22a50 * 800.0;
                    if (DAT_0050c210 < 100.0)
                    {
                        DAT_0050c210 = 100.0;
                    }
                    bVar2 = true;
                }
                if (_DAT_0050c95c == 5.0)
                {
                    bVar3 = true;
                }
                DAT_004c0220 = 0;
            }
            if ((*param_1 & 8) != 0)
            {
                if (DAT_004c0220 == 0)
                {
                    DAT_0050c210 = DAT_0050c210 - _DAT_00e22a50 * -800.0;
                    if (1336.0 < DAT_0050c210)
                    {
                        DAT_0050c210 = 1336.0;
                    }
                    bVar2 = true;
                }
                if (_DAT_0050c95c == 5.0)
                {
                    bVar3 = true;
                }
                DAT_004c0220 = 0;
            }
            if ((((byte)DAT_0050c908 & 0x10) != 0) && (DAT_0050c930 != 3))
            {
                iVar8 = *(int *)(iVar5 + 0x34) + 1;
                *(int *)(iVar5 + 0x34) = iVar8;
                if ((iVar8 == 0x16) && (*(int *)(&DAT_004c2704 + *(char *)(iVar9 + 0x73 + iVar5) * 0x34) == 0x1e))
                {
                    *(undefined_32 *)(iVar5 + 0x34) = 0x1a;
                }
                if ((*(int *)(iVar5 + 0x34) == 0x18)
                    && (*(int *)(&DAT_004c2704 + *(char *)(iVar9 + 0x73 + iVar5) * 0x34) != 0x28))
                {
                    *(undefined_32 *)(iVar5 + 0x34) = 0x1a;
                }
                if ((*(int *)(iVar5 + 0x34) < 0x1e) && ((int)(_DAT_00e35aa0 & 0xff) < *(int *)(iVar5 + 0x34) + -0x19))
                {
                    *(undefined_32 *)(iVar5 + 0x34) = 0x1e;
                }
                if (0x1e < *(int *)(iVar5 + 0x34))
                {
                    *(undefined_32 *)(iVar5 + 0x34) = 0x14;
                }
                bVar1 = true;
                if (_DAT_0050c95c == 5.0)
                {
                    bVar3 = true;
                }
                DAT_004c0220 = 0;
                _DAT_0050c95c = 0.0;
            }
            if ((((byte)DAT_0050c908 & 0x20) != 0) && (DAT_0050c930 != 3))
            {
                iVar8 = *(int *)(iVar5 + 0x34) + -1;
                *(int *)(iVar5 + 0x34) = iVar8;
                if (iVar8 == 0x19)
                {
                    if (*(int *)(&DAT_004c2704 + *(char *)(iVar9 + 0x73 + iVar5) * 0x34) == 0x1e)
                    {
                        *(undefined_32 *)(iVar5 + 0x34) = 0x15;
                    }
                    if ((*(int *)(iVar5 + 0x34) == 0x19)
                        && (*(int *)(&DAT_004c2704 + *(char *)(iVar9 + 0x73 + iVar5) * 0x34) != 0x28))
                    {
                        *(undefined_32 *)(iVar5 + 0x34) = 0x17;
                    }
                }
                if ((int)(_DAT_00e35aa0 & 0xff) < *(int *)(iVar5 + 0x34) + -0x19)
                {
                    *(uint *)(iVar5 + 0x34) = (_DAT_00e35aa0 & 0xff) + 0x19;
                }
                if (*(int *)(iVar5 + 0x34) < 0x14)
                {
                    *(undefined_32 *)(iVar5 + 0x34) = 0x1e;
                }
                bVar1 = true;
                if (_DAT_0050c95c == 5.0)
                {
                    bVar3 = true;
                }
                DAT_004c0220 = 0;
                _DAT_0050c95c = 0.0;
            }
            if ((!bVar1) || (bVar3))
            {
                FUN_0043fbc0(iVar5, *(undefined_32 *)(iVar5 + 0x34));
            }
            else
            {
                FUN_0043f8e0(iVar5, *(undefined_32 *)(iVar5 + 0x34), 1);
                bVar1 = false;
            }
            if ((bVar2) || (DAT_0050c930 == 3))
            {
                mat_set_rotation(local_40, DAT_0050c1fc, DAT_0050c2f0, 0);
                vec3f_multiply_add(&DAT_00e298f0, &DAT_00e2af90, DAT_0050c210, local_30);
                if (_DAT_00e298f8 < -147.0)
                {
                    vec3f_multiply_add(&DAT_00e298f0, &DAT_00e2af90,
                                       ((_DAT_00e2af98 - -147.0) / (_DAT_00e2af98 - _DAT_00e298f8)) * DAT_0050c210,
                                       local_30);
                }
                if (1066.0 < _DAT_00e298f8)
                {
                    vec3f_multiply_add(&DAT_00e298f0, &DAT_00e2af90,
                                       ((_DAT_00e2af98 - 1066.0) / (_DAT_00e2af98 - _DAT_00e298f8)) * DAT_0050c210,
                                       local_30);
                }
                if (DAT_0050c210 != fVar4)
                {
                    fVar10 = (float10)vec3f_distance(&DAT_00e298f0, &DAT_00e2af90);
                    DAT_0050c210 = (float)fVar10;
                }
                if (bVar2)
                {
                    FUN_0044bb10(&DAT_00e2b3e0, &DAT_00e2af60);
                }
                bVar2 = false;
            }
            iVar9 = iVar9 + 1;
            param_1 = param_1 + 1;
        } while (iVar9 < *(char *)(iVar5 + 0x70));
    }
    if (bVar3)
    {
        DAT_004c0220 = 0;
        _DAT_0050c95c = 0.0;
        FUN_0043f8e0(iVar5, *(undefined_32 *)(iVar5 + 0x34), 1);
        vec3f_sub(&local_4c, &DAT_00e298f0, &DAT_00e2af90);
        fVar10 = (float10)rdVector_Len3(&local_4c);
        DAT_0050c210 = (float)fVar10;
        rdVector_Normalize3(&local_4c);
        fVar10 = (float10)arctan2(-local_4c, local_48);
        DAT_0050c1fc = (float)fVar10;
        fVar10 = (float10)arctan(local_44);
        DAT_0050c2f0 = (float)fVar10;
        if (DAT_0050c1fc < 0.0)
        {
            DAT_0050c1fc = DAT_0050c1fc - -360.0;
        }
        if (360.0 < DAT_0050c1fc)
        {
            DAT_0050c1fc = DAT_0050c1fc - 360.0;
        }
        if (DAT_0050c2f0 < -90.0)
        {
            DAT_0050c2f0 = DAT_0050c2f0 - -180.0;
        }
        if (90.0 < DAT_0050c2f0)
        {
            DAT_0050c2f0 = DAT_0050c2f0 - 180.0;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004396d0(int param_1)

{
    undefined_32 uVar1;
    int iVar2;
    uint uVar3;
    undefined_8 local_70[48];
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    if ((DAT_004c0228 != 0) || (DAT_004c4000 != 0))
    {
        DAT_0050c538 = 0;
        if (DAT_004c4000 == 0)
        {
            DAT_0050c950 = 0;
        }
        FUN_0045a840(param_1);
        FUN_0045cf60((int)*(char *)(param_1 + 0x73),
                     (int)(char)(&DAT_004c1cbb)[(char)(&DAT_00e2b220)[DAT_0050c950 * 0x38] * 0x10], 0, 0xff);
        FUN_00455720();
        FUN_004556c0();
        DAT_0050c930 = 0;
        DAT_004c4000 = 0;
        DAT_004c0228 = 0;
    }
    if (DAT_0050c538 == 1)
    {
        DAT_0050c538 = 2;
        FUN_004316a0(*(undefined_32 *)(DAT_00e2993c + DAT_004bfed4 * 4), local_40);
        vec3f_copy(&DAT_004c43fc, local_10);
        vec3f_copy(&DAT_004c43f0, local_10);
        _DAT_004c43f0 = _DAT_00e9932c - -200.0;
        _DAT_004c43fc = 0;
        _DAT_004c43f4 = _DAT_00e99330 - -300.0;
        _DAT_004c43f8 = _DAT_004c43f8 - -200.0;
        FUN_004316a0(*(undefined_32 *)(DAT_00e2993c + 0x14), local_40);
        vec3f_copy(&DAT_004c441c, local_10);
        vec3f_copy(&DAT_004c4410, local_10);
        _DAT_004c4410 = _DAT_004c4410 - -50.0;
        _DAT_004c4418 = 0xc3180000;
        _DAT_004c4414 = _DAT_004c4414 - 300.0;
        FUN_004316a0(*(undefined_32 *)(DAT_00e2993c + 0x14), local_40);
        vec3f_copy(&DAT_004c443c, local_10);
        vec3f_copy(&DAT_004c4430, local_10);
        _DAT_004c4430 = _DAT_004c4430 - 100.0;
        _DAT_004c4434 = _DAT_004c4434 - 500.0;
        _DAT_004c4438 = _DAT_004c4438 - -100.0;
        FUN_004316a0(*(undefined_32 *)(DAT_00e2993c + DAT_004bfed8 * 4), local_40);
        vec3f_copy(&DAT_004c445c, local_10);
        vec3f_copy(&DAT_004c4450, local_10);
        _DAT_004c4450 = _DAT_00e99300 - 300.0;
        _DAT_004c4458 = 0xc3180000;
        _DAT_004c4454 = _DAT_00e99310 - -300.0;
        if ((int)DAT_0050c950 < 7)
        {
            uVar3 = (int)DAT_0050c950 >> 0x1f;
            FUN_0045bee0(param_1, (((DAT_0050c950 ^ uVar3) - uVar3 & 3 ^ uVar3) - uVar3) + 0x1f, -1, 0);
        }
        else
        {
            _DAT_0050c45c = 1;
        }
    }
    uVar1 = lookup_translation(
        (&PTR_s__SCREENTEXT_280___R_20_Repulsorg_004c1cc4)[(char)(&DAT_00e2b220)[DAT_0050c950 * 0x38] * 4]);
    uVar1 = lookup_translation(&DAT_004b6c00, uVar1);
    _sprintf(local_70, uVar1);
    if (DAT_0050c950 == 7)
    {
        if (DAT_00e35aa0 < 4)
        {
            uVar1 = lookup_translation(s__SCREENTEXT_588__sPit_Droid_Mana_004c0cfc);
        }
        else
        {
            uVar1 = lookup_translation(s__SCREENTEXT_99__sNo_more_pit_dro_004c0cd4);
        }
        _sprintf(local_70, uVar1);
    }
    uVar1 = __ftol(local_70);
    create_text_entry_0(0x1e, 0x2c, -1, -1, -1, uVar1);
    if (DAT_004bfed0 != 0)
    {
        _DAT_0050c45c = 1;
        _DAT_004c0224 = 1;
        DAT_004bfed0 = 0;
    }
    if ((DAT_004eb39c == 0) && (DAT_004d6b44 != 0))
    {
        FUN_00440550(0x4d);
        DAT_004c0228 = 1;
        FUN_00454d40(param_1, 3);
        return;
    }
    if ((((&DAT_0050c918)[*(char *)(param_1 + 0x6f)] & 0x10000) != 0) && (0 < (int)DAT_0050c950))
    {
        DAT_0050c950 = DAT_0050c950 - 1;
        _DAT_0050c45c = 1;
        FUN_00440550(0x58);
    }
    if ((((&DAT_0050c918)[*(char *)(param_1 + 0x6f)] & 0x20000) != 0) && ((int)DAT_0050c950 < 7))
    {
        DAT_0050c950 = DAT_0050c950 + 1;
        _DAT_0050c45c = 1;
        FUN_00440550(0x58);
    }
    if ((((&DAT_0050c918)[*(char *)(param_1 + 0x6f)] & 0x4000) != 0) && (1 < (int)DAT_0050c950))
    {
        DAT_0050c950 = DAT_0050c950 - 2;
        _DAT_0050c45c = 1;
        FUN_00440550(0x58);
    }
    if ((((&DAT_0050c918)[*(char *)(param_1 + 0x6f)] & 0x8000) != 0) && ((int)DAT_0050c950 < 6))
    {
        DAT_0050c950 = DAT_0050c950 + 2;
        _DAT_0050c45c = 1;
        FUN_00440550(0x58);
    }
    if ((_DAT_0050c45c != 0) && (DAT_0050c950 != -1))
    {
        _DAT_0050c45c = 0;
        FUN_004556c0();
        if ((int)DAT_0050c950 < 7)
        {
            FUN_0045cf60((int)*(char *)(param_1 + 0x73),
                         (int)(char)(&DAT_004c1cbb)[(char)(&DAT_00e2b220)[DAT_0050c950 * 0x38] * 0x10], 0, 0xff);
            uVar3 = (int)DAT_0050c950 >> 0x1f;
            iVar2 = (((DAT_0050c950 ^ uVar3) - uVar3 & 3 ^ uVar3) - uVar3) + 0x1f;
            if (iVar2 != *(int *)(param_1 + 0x34))
            {
                FUN_0045bee0(param_1, iVar2, -1, 0);
            }
        }
        else
        {
            FUN_0045cf60((int)*(char *)(param_1 + 0x73), DAT_0050c950, 0, 0xff);
            DAT_0050c930 = 1;
            *(undefined_32 *)(param_1 + 0x34) = 0x1a;
            FUN_0043f8e0(param_1, 0x1a, 0);
        }
    }
    if (((DAT_004eb39c == 0) && (DAT_004d6b48 != 0)) && ((DAT_0050c950 != 7 || (DAT_00e35aa0 != 4))))
    {
        FUN_00440550(0x54);
        DAT_004bfedc = 7;
        DAT_0050c47c = 1;
        if (DAT_0050c950 == 7)
        {
            DAT_0050c47c = 2;
            *(undefined_32 *)(param_1 + 0x10) = 1;
        }
        DAT_0050c944 = -1;
        _DAT_0050c958 = 0.4f;
    }
    if (DAT_0050c538 < 2)
    {
        DAT_0050c538 = DAT_0050c538 + 1;
    }
    return;
}

void FUN_00439c70(void)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 *param_4;
    undefined_32 local_60[8];
    undefined_8 local_40[64];

    puVar3 = local_60;
    QMEMCPY(iVar2, param_4, puVar3, 8)
    _sprintf(local_40, s__f4_c_s_s_004c0d24, local_60);
    uVar1 = __ftol(local_40);
    uVar1 = __ftol(0x32, -1, -1, uVar1);
    uVar1 = __ftol(uVar1);
    create_text_entry_0(uVar1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00439ce0(uint *param_1)

{
    ushort *puVar1;
    float fVar2;
    char cVar3;
    byte bVar4;
    ushort uVar5;
    undefined_32 uVar6;
    int *piVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    int iVar11;
    float *pfVar12;
    uint *puVar13;
    undefined_32 *puVar14;
    float *pfVar15;
    uint uVar16;
    int *piVar17;
    undefined_8_1 *puVar18;
    int iVar19;
    int local_168;
    uint local_164;
    uint local_160;
    undefined_8 local_159;
    float local_158[2];
    int local_150[20];
    undefined_8 local_100[256];

    local_159 = *(undefined_8 *)((int)param_1 + 0x5e);
    local_158[0] = 3599.99;
    local_158[1] = 3599.99;
    DAT_00e295c8 = __ftol();
    local_160 = (uint) * (byte *)((int)param_1 + 0x8f);
    if (*(char *)(param_1 + 0x1b) != '\0')
    {
        local_160 = 3;
    }
    uVar6 = lookup_translation(s__SCREENTEXT_189__c_sResults_004c0d74);
    create_text_entry_1(0xa0, 0x14, uVar6);
    piVar17 = local_150;
    MEMSET(iVar11, piVar17, 0, 0x14)
    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        _DAT_0050c1f4 = 2.0;
        iVar11 = 0;
        if (0 < (char)(&DAT_004bfee0)[*(char *)((int)param_1 + 0x5e)])
        {
            piVar17 = (int *)(&DAT_004c0018 + *(char *)((int)param_1 + 0x5e) * 0x1c);
            do
            {
                if ((int)*(char *)((int)param_1 + 0x5d) == *piVar17)
                {
                    DAT_0050c228 = (byte)iVar11;
                    break;
                }
                iVar11 = iVar11 + 1;
                piVar17 = piVar17 + 1;
            } while (iVar11 < (char)(&DAT_004bfee0)[*(char *)((int)param_1 + 0x5e)]);
        }
        _DAT_0050c114 = 0.0;
        DAT_0050c53c = 0;
        local_168 = 0;
        puVar14 = &DAT_0050c180;
        MEMSET(iVar11, puVar14, 0, 0x14)
        if ('\0' < *(char *)((int)param_1 + 0x72))
        {
            puVar14 = &DAT_00e29bc0;
            do
            {
                local_150[local_168] = (int)puVar14;
                if (puVar14 == NULL)
                {
                    *(char *)((int)param_1 + 0x72) = (char)local_168;
                    break;
                }
                if ((3599.99 < (float)puVar14[0x1d]) || ((float)puVar14[0x1d] < 0.0))
                {
                    puVar14[0x1d] = 0x4560ffd7;
                }
                if (local_160 != 0)
                {
                    pfVar15 = (float *)(puVar14 + 0x18);
                    uVar16 = local_160;
                    do
                    {
                        if ((3599.99 < *pfVar15) || (*pfVar15 < 0.0))
                        {
                            *pfVar15 = 3599.99;
                        }
                        pfVar15 = pfVar15 + 1;
                        uVar16 = uVar16 - 1;
                    } while (uVar16 != 0);
                }
                (&DAT_0050c180)[local_168] = puVar14;
                local_168 = local_168 + 1;
                puVar14 = puVar14 + 0x22;
            } while (local_168 < *(char *)((int)param_1 + 0x72));
        }
        local_168 = 1;
        if ('\x01' < *(char *)((int)param_1 + 0x72))
        {
            piVar17 = &DAT_0050c184;
            do
            {
                if (0x50c180 < (int)piVar17)
                {
                    piVar7 = &DAT_0050c180;
                    iVar11 = local_168;
                    do
                    {
                        iVar9 = *piVar17;
                        if (*(short *)(iVar9 + 0x5c) < *(short *)(*piVar7 + 0x5c))
                        {
                            *piVar17 = *piVar7;
                            *piVar7 = iVar9;
                        }
                        piVar7 = piVar7 + 1;
                        iVar11 = iVar11 + -1;
                    } while (iVar11 != 0);
                }
                local_168 = local_168 + 1;
                piVar17 = piVar17 + 1;
            } while (local_168 < *(char *)((int)param_1 + 0x72));
        }
        cVar3 = *(char *)(param_1 + 0x1c);
        uVar16 = 0;
        local_164 = (uint)cVar3;
        if (0 < (int)local_164)
        {
            do
            {
                pfVar15 = local_158 + uVar16;
                *pfVar15 = *(float *)(local_150[uVar16] + 0x60);
                iVar11 = 1;
                if (1 < local_160)
                {
                    pfVar12 = (float *)(local_150[uVar16] + 100);
                    do
                    {
                        if (*pfVar12 <= 0.0)
                            break;
                        if (*pfVar12 < *pfVar15)
                        {
                            *pfVar15 = *pfVar12;
                        }
                        iVar11 = iVar11 + 1;
                        pfVar12 = pfVar12 + 1;
                    } while (iVar11 < (int)local_160);
                }
                uVar16 = uVar16 + 1;
            } while ((int)uVar16 < (int)local_164);
        }
        if (((_DAT_0050c540 & 1) == 0) && (DAT_00e35a81 == '\0'))
        {
            uVar16 = uVar16 & 0xffffff00 | local_160;
            if (((((char)local_160 == '\x03')
                  && (*(float *)(local_150[0] + 0x74)
                      < *(float *)(&DAT_00e365f4
                                   + ((int)*(char *)((int)param_1 + 0x6e) + *(char *)((int)param_1 + 0x5d) * 2) * 4)))
                 && ((cVar3 == '\x01' || (*(float *)(local_150[0] + 0x74) < *(float *)(local_150[1] + 0x74)))))
                || ((local_158[0]
                         < *(float *)(&DAT_00e366bc
                                      + ((int)*(char *)((int)param_1 + 0x6e) + *(char *)((int)param_1 + 0x5d) * 2) * 4)
                     && ((cVar3 == '\x01' || (local_158[0] < local_158[1]))))))
            {
                _DAT_0050c540 = _DAT_0050c540 | 1;
                *(undefined_8 *)((int)param_1 + 0x6f) = 0;
                FUN_00454d40(param_1, 2);
                return;
            }
        }
        else
        {
            uVar16 = uVar16 & 0xffffff00 | local_160;
        }
        if (((('\x01' < cVar3) && ((_DAT_0050c540 & 2) == 0)) && (DAT_00e35ad1 == '\0'))
            && (((((char)uVar16 == '\x03'
                   && (*(float *)(local_150[1] + 0x74)
                       < *(float *)(&DAT_00e365f4
                                    + ((int)*(char *)((int)param_1 + 0x6e) + *(char *)((int)param_1 + 0x5d) * 2) * 4)))
                  && (*(float *)(local_150[1] + 0x74) < *(float *)(local_150[0] + 0x74)))
                 || ((local_158[1]
                          < *(float *)(&DAT_00e366bc
                                       + ((int)*(char *)((int)param_1 + 0x6e) + *(char *)((int)param_1 + 0x5d) * 2) * 4)
                      && (local_158[1] < local_158[0]))))))
        {
            _DAT_0050c540 = _DAT_0050c540 | 2;
            *(undefined_8 *)((int)param_1 + 0x6f) = 1;
            FUN_00454d40(param_1, 2);
            return;
        }
        if (((_DAT_0050c540 & 4) == 0) && (iVar11 = 0, 0 < (int)local_164))
        {
            puVar18 = &DAT_00e35a84;
            do
            {
                if ((((char)uVar16 == '\x03') && (iVar9 = local_150[iVar11], *(float *)(iVar9 + 0x74) < 3599.99))
                    && (iVar19 = (int)*(char *)((int)param_1 + 0x6e) + *(char *)((int)param_1 + 0x5d) * 2,
                        *(float *)(iVar9 + 0x74) < *(float *)(&DAT_00e365f4 + iVar19 * 4)))
                {
                    iVar8 = 0;
                    *(undefined_32 *)(&DAT_00e365f4 + iVar19 * 4) = *(undefined_32 *)(iVar9 + 0x74);
                    do
                    {
                        (&DAT_00e36784)[iVar8
                                        + ((int)*(char *)((int)param_1 + 0x6e) + *(char *)((int)param_1 + 0x5d) * 2)
                                            * 0x20] = puVar18[iVar8 + -0x24];
                        iVar8 = iVar8 + 1;
                    } while (iVar8 < 0x20);
                    (&DAT_00e37404)[*(char *)((int)param_1 + 0x5d) * 2 + (int)*(char *)((int)param_1 + 0x6e)] =
                        *puVar18;
                }
                if ((local_158[iVar11] < 3599.99)
                    && (iVar9 = (int)*(char *)((int)param_1 + 0x6e) + *(char *)((int)param_1 + 0x5d) * 2,
                        local_158[iVar11] < *(float *)(&DAT_00e366bc + iVar9 * 4)))
                {
                    *(float *)(&DAT_00e366bc + iVar9 * 4) = local_158[iVar11];
                    iVar9 = 0;
                    do
                    {
                        (&DAT_00e36dc4)[iVar9
                                        + ((int)*(char *)((int)param_1 + 0x6e) + *(char *)((int)param_1 + 0x5d) * 2)
                                            * 0x20] = puVar18[iVar9 + -0x24];
                        iVar9 = iVar9 + 1;
                    } while (iVar9 < 0x20);
                    (&DAT_00e37436)[*(char *)((int)param_1 + 0x5d) * 2 + (int)*(char *)((int)param_1 + 0x6e)] =
                        *puVar18;
                }
                iVar11 = iVar11 + 1;
                puVar18 = puVar18 + 0x50;
            } while (iVar11 < *(char *)(param_1 + 0x1c));
        }
        _DAT_0050c540 = _DAT_0050c540 | 4;
        DAT_004c022c = *(char *)(local_150[0] + 0x5c);
        DAT_004c0230 = -1;
        uVar16 = uVar16 & 0xffffff00;
        cVar3 = DAT_004c022c;
        if ('\x01' < *(char *)(param_1 + 0x1c))
        {
            DAT_004c0230 = *(char *)(local_150[1] + 0x5c);
            uVar16 = local_150[1] & 0xffffff00;
            if (DAT_004c0230 < DAT_004c022c)
            {
                cVar3 = DAT_004c0230;
            }
        }
        if ('\x03' < cVar3)
        {
            _DAT_0050c114 = (float)(cVar3 + -3) * -30.0;
            uVar16 = (uint) * (char *)((int)param_1 + 0x72);
            fVar2 = 150.0 - (float)uVar16 * 30.0;
            local_164 = uVar16;
            if (_DAT_0050c114 < fVar2)
            {
                _DAT_0050c114 = fVar2;
            }
        }
        if (((*(char *)(param_1 + 0x1c) == '\x01') && (*(char *)(param_1 + 0x1b) != '\0'))
            && ('\x03' < *(char *)((int)param_1 + 0x72)))
        {
            iVar11 = 0;
            uVar10 = (int)*(char *)((int)param_1 + 0x72) - 1;
            if (0 < (int)uVar10)
            {
                piVar17 = &DAT_0050c184;
                do
                {
                    uVar16 = piVar17[-1];
                    if (*(float *)(*piVar17 + 0x74) == *(float *)(uVar16 + 0x74))
                    {
                        puVar1 = (ushort *)(uVar16 + 0x5c);
                        uVar16 = uVar16 & 0xffff0000 | (uint)*puVar1;
                        *(ushort *)(*piVar17 + 0x5c) = *puVar1;
                    }
                    iVar11 = iVar11 + 1;
                    piVar17 = piVar17 + 1;
                    uVar10 = (int)*(char *)((int)param_1 + 0x72) - 1;
                } while (iVar11 < (int)uVar10);
            }
            if (((DAT_004c022c == '\x01') && (uVar10 = uVar10 & 0xffffff00, *(char *)(param_1 + 0x1b) != '\0'))
                && ((_DAT_0050c540 & 8) == 0))
            {
                uVar16 = uVar16 & 0xffffff00;
                uVar10 = (uint) * (char *)((int)param_1 + 0x5d);
                bVar4 = (&DAT_004bfef2)[uVar10 * 0xc];
                if ((bVar4 == 2) && (*(char *)((int)param_1 + 0x5d) != '\x01'))
                {
                    bVar4 = 0;
                }
                if (('\0' < (char)bVar4) && (uVar10 = 1 << (bVar4 & 0x1f), (uVar10 & DAT_00e35a94) == 0))
                {
                    DAT_00e35a94 = DAT_00e35a94 | uVar10;
                    DAT_00e364b0 = DAT_00e364b0 | DAT_00e35a94;
                    FUN_0044e560();
                    _DAT_0050c540 = _DAT_0050c540 | 8;
                    FUN_00454d40(param_1, 0x11);
                    return;
                }
            }
            cVar3 = FUN_00440a00(uVar10 & 0xffffff00 | (uint) * (byte *)((int)param_1 + 0x5e),
                                 uVar16 & 0xffffff00 | (uint)DAT_0050c228);
            if (DAT_004c022c <= cVar3)
            {
                local_164 = local_164 & 0xffffff00 | (uint) * (byte *)((int)param_1 + 0x5e);
                iVar11 = (int)*(short *)(&DAT_00e35a8a + (char)*(byte *)((int)param_1 + 0x5e) * 2)
                    >> ((DAT_0050c228 & 0xf) << 1);
                uVar5 = (ushort)(iVar11 >> 0x1f);
                iVar9 = FUN_00440a20(local_164, CONCAT31((int3)(iVar11 >> 0x1f), DAT_0050c228));
                if (iVar9 != 0)
                {
                    DAT_0050c53c =
                        (int)*(short *)((int)param_1 + (DAT_004c022c + 0x44 + *(char *)((int)param_1 + 0x91) * 4) * 2);
                    DAT_0050c53c = __ftol();
                    DAT_00e35a98 = DAT_00e35a98 + DAT_0050c53c;
                    bVar4 = *(byte *)((int)param_1 + 0x5e);
                    if ((char)bVar4 < '\x03')
                    {
                        iVar9 = (int)(char)bVar4;
                        iVar19 = (int)(char)DAT_0050c228;
                        if ((iVar19 == (char)(&DAT_004bfee0)[iVar9] + -1)
                            && ((DAT_00e35a88 & (byte)(1 << (bVar4 & 0x1f))) == 0))
                        {
                            local_159 = 3;
                            DAT_00e35a88 = DAT_00e35a88 | '\x01' << (bVar4 & 0x1f);
                            iVar9 = (int)*(char *)((int)param_1 + 0x5e);
                            *(undefined_8_1 *)((int)param_1 + 0x5d) = (&DAT_004c006c)[iVar9 * 4];
                        }
                        else if ((iVar19 < (char)(&DAT_004bfee0)[iVar9] + -1)
                                 && (((&DAT_00e35a85)[iVar9] & (byte)(1 << (DAT_0050c228 + 1 & 0x1f))) == 0))
                        {
                            *(undefined_8 *)((int)param_1 + 0x5d) = (&DAT_004c001c)[(iVar9 * 7 + iVar19) * 4];
                        }
                        (&DAT_00e35a85)[iVar9] = (&DAT_00e35a85)[iVar9] | '\x01' << (DAT_0050c228 + 1 & 0x1f);
                    }
                    FUN_0043d720(param_1, &DAT_00e29bc0);
                }
                if (((int)(char)DAT_0050c228 == (char)(&DAT_004bfee0)[*(char *)((int)param_1 + 0x5e)] + -1)
                    && (*(char *)((int)param_1 + 0x5e) == '\x02'))
                {
                    FUN_00440c10(param_1);
                }
                cVar3 = DAT_004c022c;
                if ((int)(short)((((ushort)iVar11 ^ uVar5) - uVar5 & 3 ^ uVar5) - uVar5) < 4 - DAT_004c022c)
                {
                    bVar4 = (byte)((char)DAT_0050c228 * 2);
                    uVar16 = (char)DAT_0050c228 * 2 + 1;
                    *(ushort *)(&DAT_00e35a8a + *(char *)((int)param_1 + 0x5e) * 2) =
                        *(ushort *)(&DAT_00e35a8a + *(char *)((int)param_1 + 0x5e) * 2)
                        & ~(ushort)(1 << (bVar4 & 0x1f));
                    *(ushort *)(&DAT_00e35a8a + *(char *)((int)param_1 + 0x5e) * 2) =
                        *(ushort *)(&DAT_00e35a8a + *(char *)((int)param_1 + 0x5e) * 2)
                        & ~(ushort)(1 << ((byte)uVar16 & 0x1f));
                    *(ushort *)(&DAT_00e35a8a + *(char *)((int)param_1 + 0x5e) * 2) =
                        *(ushort *)(&DAT_00e35a8a + *(char *)((int)param_1 + 0x5e) * 2)
                        | (ushort)(4 - (uVar16 & 0xffff0000 | (uint)(ushort)(short)cVar3) << (bVar4 & 0x1f));
                    if (((_DAT_00e35a8a == 0x3fff) && (_DAT_00e35a8c == 0x3fff)) && (_DAT_00e35a8e == 0x3fff))
                    {
                        if ((DAT_00e35a88 & 8) == 0)
                        {
                            DAT_00e35a88 = DAT_00e35a88 | 8;
                            local_159 = 3;
                            *(undefined_8 *)((int)param_1 + 0x5d) = DAT_004c0078;
                        }
                        else if ((_DAT_00e35a90 == 0xff) && ((DAT_00e364a8 & 0x20) == 0))
                        {
                            DAT_00e364a8 = DAT_00e364a8 | 0x20;
                        }
                    }
                }
            }
            iVar11 = 0;
            do
            {
                if ((byte)(&DAT_00e364ac)[iVar11] < (byte)(&DAT_00e35a85)[iVar11])
                {
                    (&DAT_00e364ac)[iVar11] = (&DAT_00e35a85)[iVar11];
                }
                iVar11 = iVar11 + 1;
            } while (iVar11 < 4);
        }
        *(undefined_8 *)((int)param_1 + 0x5e) = local_159;
        FUN_0044e560();
    }
    if ((0.0 < _DAT_0050c1f4) && (_DAT_0050c1f4 = _DAT_0050c1f4 - _DAT_00e22a50, _DAT_0050c1f4 <= 0.0))
    {
        FUN_00426c80(0xb6, 7, 0.25f, 1.0f, 0);
    }
    iVar11 = 0;
    if ('\0' < *(char *)((int)param_1 + 0x72))
    {
        piVar17 = &DAT_0050c180;
        local_164 = 0x1e;
        puVar13 = param_1;
        do
        {
            uVar16 = **(uint **)(*piVar17 + 0x18);
            uVar10 = uVar16;
            if (0x1e < (int)local_164)
            {
                piVar7 = &DAT_0050c180;
                iVar9 = iVar11;
                do
                {
                    puVar13 = *(uint **)(*piVar7 + 0x18);
                    if (uVar16 == *puVar13)
                    {
                        uVar10 = uVar10 + 0x17;
                    }
                    piVar7 = piVar7 + 1;
                    iVar9 = iVar9 + -1;
                } while (iVar9 != 0);
            }
            sprite_enable_display(uVar10, 1);
            uVar6 = __ftol();
            sprite_set_pos(uVar10, 0x1e, uVar6);
            sprite_scale(uVar10, 0.5f, 0.5f);
            bVar4 = __ftol();
            puVar13 = (uint *)((uint)puVar13 & 0xffffff00 | (uint)bVar4);
            sprite_set_color(uVar10, -1, -1, -1, puVar13);
            if ((iVar11 == DAT_004c022c + -1) || (iVar11 == DAT_004c0230 + -1))
            {
                uVar6 = lookup_translation(s__r_s_d__004c0d6c, (int)*(short *)(*piVar17 + 0x5c));
                _sprintf(local_100, uVar6);
                uVar5 = __ftol();
                uVar16 = uVar10 & 0xffff0000 | (uint)uVar5;
                create_text_entry_0(0x58, uVar16, 0xffffffa3, 0xffffffbe, 0x11, puVar13, local_100);
                uVar6 = lookup_translation(
                    (&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[**(int **)(*piVar17 + 0x18) * 0xd]);
                uVar6 = lookup_translation(
                    (&PTR_s__SCREENTEXT_322___Anakin_004c2714)[**(int **)(*piVar17 + 0x18) * 0xd], uVar6);
                uVar6 = lookup_translation(s__f4_s_s__s_004c0d60, uVar6);
                _sprintf(local_100, uVar6);
                uVar6 = __ftol(0xffffffa3, 0xffffffbe, 0x11, puVar13, local_100);
                create_text_entry_0(0x5c, uVar6);
                create_text_entry_4(0x109, uVar16, *(undefined_32 *)(*piVar17 + 0x74), 0xffffffa3, 0xffffffbe, 0x11,
                                    puVar13, 1);
                if (iVar11 == DAT_004c022c + -1)
                {
                    puVar18 = &DAT_00e35a60;
                }
                else
                {
                    puVar18 = &DAT_00e35ab0;
                }
                _sprintf(local_100, s__f4_s_s_004c0d58, puVar18);
                uVar6 = __ftol(0xffffffa3, 0xffffffbe, 0x11, puVar13, local_100);
                create_text_entry_0(100, uVar6);
            }
            else
            {
                uVar6 = lookup_translation(s__r_s_d__004c0d6c, (int)*(short *)(*piVar17 + 0x5c));
                _sprintf(local_100, uVar6);
                uVar5 = __ftol();
                uVar16 = uVar10 & 0xffff0000 | (uint)uVar5;
                create_text_entry_0(0x58, uVar16, 0x32, -1, -1, puVar13, local_100);
                uVar6 = lookup_translation(
                    (&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[**(int **)(*piVar17 + 0x18) * 0xd]);
                uVar6 = lookup_translation(
                    (&PTR_s__SCREENTEXT_322___Anakin_004c2714)[**(int **)(*piVar17 + 0x18) * 0xd], uVar6);
                uVar6 = lookup_translation(s__f4_s_s__s_004c0d60, uVar6);
                _sprintf(local_100, uVar6);
                uVar6 = __ftol(0x32, -1, -1, puVar13, local_100);
                create_text_entry_0(0x5c, uVar6);
                create_text_entry_4(0x109, uVar16, *(undefined_32 *)(*piVar17 + 0x74), 0x32, -1, -1, puVar13, 1);
            }
            iVar11 = iVar11 + 1;
            local_164 = local_164 + 0x1e;
            piVar17 = piVar17 + 1;
        } while (iVar11 < *(char *)((int)param_1 + 0x72));
    }
    if ('\x04' < *(char *)((int)param_1 + 0x72))
    {
        FUN_0043fe90(0x122, 0x1e, 0x90);
    }
    if (0 < DAT_0050c53c)
    {
        uVar6 = lookup_translation(s__SCREENTEXT_575__c_sYou_won__d_T_004c0d30, DAT_0050c53c);
        _sprintf(local_100, uVar6);
        create_text_entry_1(0x87, 0xcd, local_100);
        FUN_00457140(0, 0x40e00000, 0xc0e00000, 1.0f);
    }
    local_168 = 0;
    iVar11 = DAT_004bfedc;
    if ('\0' < *(char *)(param_1 + 0x1c))
    {
        pfVar15 = (float *)&DAT_00e98e80;
        do
        {
            if ((DAT_004d6b40 != 0) || (DAT_004d6b44 != 0))
            {
                uVar6 = FUN_00411480(1);
                FUN_00414e60(uVar6);
                FUN_00440550(0x54);
                if (*(char *)(param_1 + 0x1b) == '\0')
                {
                    iVar11 = FUN_0041d6b0();
                    iVar11 = (-(uint)(iVar11 != 0) & 0xfffffff5) + 0xc;
                    DAT_004bfedc = iVar11;
                }
                else if ((DAT_004c022c < '\x04') && (DAT_0050c228 == 6))
                {
                    piVar17 = &DAT_0050c180;
                    puVar13 = param_1 + 0x33;
                    do
                    {
                        iVar11 = *piVar17;
                        piVar17 = piVar17 + 1;
                        *(undefined_8 *)puVar13 = **(undefined_8 **)(iVar11 + 0x18);
                        puVar13 = (uint *)((int)puVar13 + 1);
                    } while ((int)piVar17 < 0x50c18c);
                    iVar11 = 0x10;
                    DAT_004bfedc = iVar11;
                }
                else
                {
                    iVar11 = 0xc;
                    DAT_004bfedc = iVar11;
                }
            }
            DAT_00e295c4 = 0;
            DAT_00e295c0 = 0;
            if ('\x04' < *(char *)((int)param_1 + 0x72))
            {
                if ((*pfVar15 < -0.1) || (0.1 < *pfVar15))
                {
                    _DAT_0050c114 = _DAT_0050c114 - *pfVar15 * _DAT_00e22a50 * -300.0;
                    if (0.0 < _DAT_0050c114)
                    {
                        _DAT_0050c114 = 0.0;
                    }
                    fVar2 = 150.0 - (float)(int)*(char *)((int)param_1 + 0x72) * 30.0;
                    if (_DAT_0050c114 < fVar2)
                    {
                        _DAT_0050c114 = fVar2;
                    }
                }
                DAT_00e295c0 = (uint)(_DAT_0050c114 < 0.0);
                if ((float)DAT_00e295c8 < _DAT_0050c114)
                {
                    DAT_00e295c4 = 1;
                }
            }
            pfVar15 = pfVar15 + 1;
            local_168 = local_168 + 1;
        } while (local_168 < *(char *)(param_1 + 0x1c));
    }
    if (iVar11 != -1)
    {
        _DAT_0050c540 = 0;
        DAT_0050c944 = -1;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043abc0(int param_1)

{
    bool bVar1;
    int iVar2;
    undefined_32 uVar3;
    uint extraout_EDX;
    uint extraout_EDX_00;
    uint extraout_EDX_01;
    uint extraout_EDX_02;
    uint extraout_EDX_03;
    uint extraout_EDX_04;
    uint extraout_EDX_05;
    uint extraout_EDX_06;
    uint uVar4;
    uint extraout_EDX_07;
    uint *puVar5;
    char local_109;
    int local_108;
    undefined_8 local_100[256];

    bVar1 = false;
    local_109 = '\0';
    iVar2 = FUN_0043da90(param_1, DAT_004c4000, 0x14);
    if (iVar2 == 0)
    {
        if (DAT_004c4000 != 0)
        {
            DAT_004c4000 = 0;
            _DAT_0050c544 = 0;
            DAT_0050c548 = 0;
            _DAT_00e99358 = 0xc3960000;
            DAT_0050c470 = 0;
            DAT_0050c954 = 0;
            DAT_0050c934 = 0;
            FUN_0045a840(param_1);
            DAT_00e295d0 = (int)(char)(&DAT_00e29860)[(*(int *)(param_1 + 0x34) + -4) * 3];
            FUN_0045cf60((int)*(char *)(param_1 + 0x73),
                         (int)(char)(&DAT_004c1cbb)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                         (int)(char)(&DAT_004c1cb9)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                         (&DAT_00e2a6c1)[DAT_00e295d0 * 0x38]);
            FUN_0043eb50();
            iVar2 = FUN_00440b50(param_1);
            if (iVar2 == 0)
            {
                DAT_0050c930 = 5;
            }
            else
            {
                FUN_0045bee0(param_1, *(undefined_32 *)(param_1 + 0x34), -1, 0);
            }
        }
        iVar2 = FUN_00427670(0, 0x10);
        if ((iVar2 != 0) && (iVar2 = FUN_00427670(0, 0x20), iVar2 != 0))
        {
            FUN_004276a0(0, 0x20);
            iVar2 = FUN_00427670(0, 4);
            if (iVar2 == 0)
            {
                FUN_00427690(0, 4);
                FUN_00427410(2, 0, 0x35, 0);
            }
            else
            {
                FUN_00427590(2, 0, 0x1f, 0x25, 0x2f, 0x33, 0x37, 0);
            }
        }
        FUN_0043ec10(param_1);
        if (*(int *)(param_1 + 0x34) != 3)
        {
            FUN_004550d0(param_1, 20.0f, 0x43070000);
        }
        if (((DAT_0050c934 == 0) || (DAT_0050c940 != 0)) && (*(int *)(param_1 + 0x34) != 3))
        {
            uVar3 = lookup_translation(
                (&PTR_s__SCREENTEXT_280___R_20_Repulsorg_004c1cc4)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 4]);
            uVar3 = lookup_translation(s__c_s_s_004c0bc0, uVar3);
            _sprintf(local_100, uVar3);
            create_text_entry_0(0xa0, 0x19, 0x32, -1, -1, -1, local_100);
            DAT_00e295bc = 1;
            DAT_00e295b8 = 1;
            uVar3 = FUN_0042de10(local_100, 0);
            FUN_0042de10(local_100, 0, 0x1a, uVar3);
            uVar3 = __ftol();
            FUN_00440150(uVar3);
        }
        FUN_0043dba0(param_1);
        FUN_00455dc0(param_1);
        if (((DAT_0050c934 != 0) && (DAT_0050c940 == 0)) && ((DAT_0050c470 == 0 && (DAT_0050c548 == 0))))
        {
            _DAT_0050c544 = 1;
        }
        if (_DAT_0050c544 != 0)
        {
            DAT_0050c474 = 1;
            DAT_0050c470 = 1;
            DAT_00e99400 = 0;
            _DAT_0050c544 = 0;
        }
        uVar4 = extraout_EDX;
        if (((DAT_0050c934 != 0) && (DAT_0050c46c == 0)) && (DAT_0050c548 != 0))
        {
            DAT_0050c548 = 0;
            FUN_0045c9d0(param_1, 0);
            uVar4 = extraout_EDX_00;
        }
        local_108 = 0;
        if ('\0' < *(char *)(param_1 + 0x70))
        {
            puVar5 = &DAT_0050c908;
            do
            {
                if (DAT_0050c940 != 0)
                {
                    return;
                }
                if (DAT_0050c468 != 0)
                {
                    return;
                }
                if (DAT_004d6b48 != 0)
                {
                    FUN_00440550(0x54);
                    if (DAT_0050c934 == 0)
                    {
                        FUN_0045c9d0(param_1, 1);
                        uVar4 = extraout_EDX_02;
                        if (*(int *)(param_1 + 0x34) == 3)
                        {
                            DAT_004bfedc = 7;
                            DAT_0050c944 = -1;
                            return;
                        }
                    }
                    else
                    {
                        uVar4 = extraout_EDX_01;
                        if (DAT_00e99400 == 0)
                        {
                            FUN_00440800(param_1);
                            uVar4 = extraout_EDX_03;
                        }
                        DAT_0050c474 = 1;
                        DAT_00e99400 = 0;
                        DAT_0050c470 = 0;
                        DAT_0050c954 = 1;
                        DAT_0050c468 = -1;
                        DAT_0050c548 = 1;
                    }
                }
                if ((DAT_004eb39c == 0) && (DAT_004d6b44 != 0))
                {
                    FUN_00440550(0x4d);
                    if (DAT_0050c470 == 0)
                    {
                        FUN_00454d40(param_1, 3);
                        uVar4 = extraout_EDX_05;
                    }
                    else
                    {
                        DAT_0050c474 = 1;
                        DAT_0050c470 = 0;
                        DAT_0050c954 = 1;
                        DAT_00e99400 = 0;
                        DAT_0050c468 = -1;
                        DAT_0050c548 = 1;
                        uVar4 = extraout_EDX_04;
                    }
                }
                DAT_00e295b4 = 0;
                DAT_00e295b0 = 0;
                if ((DAT_0050c934 == 0) && (DAT_0050c470 == 0))
                {
                    if ((*puVar5 & 0x10000) != 0)
                    {
                        if ((DAT_0050c930 == 5) || (DAT_0050c930 == 0))
                        {
                            local_109 = -1;
                        }
                        DAT_00e295b0 = 1;
                    }
                    if ((*puVar5 & 0x20000) != 0)
                    {
                        if ((DAT_0050c930 == 5) || (DAT_0050c930 == 0))
                        {
                            local_109 = '\x01';
                        }
                        DAT_00e295b4 = 1;
                    }
                }
                if (local_109 != '\0')
                {
                    FUN_0045bde0(param_1, uVar4 & 0xffff0000 | (uint)(ushort)(short)local_109, 1);
                    if (*(int *)(param_1 + 0x34) != 3)
                    {
                        bVar1 = true;
                    }
                    FUN_00440550(0x58);
                    uVar4 = extraout_EDX_06;
                }
                if (bVar1)
                {
                    DAT_00e295d0 = (int)(char)(&DAT_00e29860)[(*(int *)(param_1 + 0x34) + -4) * 3];
                    FUN_0045cf60((int)*(char *)(param_1 + 0x73),
                                 (int)(char)(&DAT_004c1cbb)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                                 (int)(char)(&DAT_004c1cb9)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                                 (&DAT_00e2a6c1)[DAT_00e295d0 * 0x38]);
                    FUN_0043eb50();
                    uVar4 = extraout_EDX_07;
                }
                puVar5 = puVar5 + 1;
                local_108 = local_108 + 1;
            } while (local_108 < *(char *)(param_1 + 0x70));
            return;
        }
    }
    return;
}

void FUN_0043b0b0(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar2 = 0;
    DAT_00e295c8 = 3;
    DAT_00e295cc = 0;
    if (*(char *)(param_1 + 0x6c) == '\0')
    {
        if (DAT_00e364af == '\0')
        {
            DAT_00e295c8 = 2;
        }
        iVar1 = (int)*(char *)(param_1 + 0x5e);
        iVar3 = 0;
        if ('\0' < (char)(&DAT_004bfee0)[iVar1])
        {
            do
            {
                if (((&DAT_00e364ac)[iVar1] & (byte)(1 << ((byte)iVar3 & 0x1f))) != 0)
                {
                    iVar2 = iVar2 + 1;
                    DAT_00e295cc = iVar2;
                }
                iVar1 = (int)*(char *)(param_1 + 0x5e);
                iVar3 = iVar3 + 1;
            } while (iVar3 < (char)(&DAT_004bfee0)[iVar1]);
        }
    }
    else
    {
        if (DAT_00e35a88 == '\0')
        {
            DAT_00e295c8 = 2;
        }
        iVar1 = (int)*(char *)(param_1 + 0x5e);
        iVar3 = 0;
        if ('\0' < (char)(&DAT_004bfee0)[iVar1])
        {
            do
            {
                if (((&DAT_00e35a85)[iVar1] & (byte)(1 << ((byte)iVar3 & 0x1f))) != 0)
                {
                    iVar2 = iVar2 + 1;
                    DAT_00e295cc = iVar2;
                }
                iVar1 = (int)*(char *)(param_1 + 0x5e);
                iVar3 = iVar3 + 1;
            } while (iVar3 < (char)(&DAT_004bfee0)[iVar1]);
        }
    }
    if ((DAT_004d5e00 != 0) && (*(char *)(param_1 + 0x5e) < '\x03'))
    {
        iVar2 = (int)(char)(&DAT_004bfee0)[*(char *)(param_1 + 0x5e)];
        DAT_00e295cc = iVar2;
    }
    if (iVar2 + -1 < DAT_00e295d0)
    {
        DAT_00e295d0 = iVar2 + -1;
    }
    DAT_00e295c0 = (uint)('\0' < *(char *)(param_1 + 0x5e));
    DAT_00e295c4 = (uint)(*(char *)(param_1 + 0x5e) < DAT_00e295c8);
    return;
}

void FUN_0043b1d0(int param_1)

{
    int iVar1;
    uint extraout_ECX;
    uint uVar2;
    int iVar3;

    DAT_00e295d0 = 0;
    iVar3 = 0;
    uVar2 = (uint) * (byte *)(param_1 + 0x5e);
    iVar1 = (int)(char)*(byte *)(param_1 + 0x5e);
    if ('\0' < (char)(&DAT_004bfee0)[iVar1])
    {
        do
        {
            if (*(int *)(&DAT_004c0018 + (iVar1 * 7 + iVar3) * 4) == (int)*(char *)(param_1 + 0x5d))
            {
                return;
            }
            iVar1 = FUN_00440aa0(param_1, uVar2, iVar3);
            if (iVar1 != 0)
            {
                DAT_00e295d0 = DAT_00e295d0 + 1;
            }
            uVar2 = extraout_ECX & 0xffffff00 | (uint) * (byte *)(param_1 + 0x5e);
            iVar3 = iVar3 + 1;
            iVar1 = (int)(char)*(byte *)(param_1 + 0x5e);
        } while (iVar3 < (char)(&DAT_004bfee0)[iVar1]);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043b240(void)

{
    byte bVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    uint extraout_ECX;
    uint extraout_ECX_00;
    uint unaff_EDI;
    uint *puVar5;
    undefined_32 uVar6;
    undefined_32 uVar7;
    undefined_32 uVar8;
    undefined_32 uVar9;
    char *pcVar10;
    undefined_8 local_100[256];

    iVar3 = DAT_0050c454;
    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        FUN_0045bee0(DAT_0050c454, 0x25, -1, 0);
        DAT_0050c54c = 0;
        if (*(int *)(iVar3 + 0xc) == 0xc)
        {
            DAT_00e295a0 = 1.0;
        }
        if ((*(int *)(iVar3 + 0xc) == 9) || (*(int *)(iVar3 + 0xc) == 1))
        {
            *(undefined_8 *)(iVar3 + 0x5e) = 0;
        }
        FUN_0043b0b0(iVar3);
        uVar2 = *(uint *)(iVar3 + 0xc);
        if ((uVar2 == 9) || (uVar2 == 1))
        {
            DAT_00e295d0 = 0;
            if ((*(char *)(iVar3 + 0x6c) != '\0')
                && (iVar4 = FUN_00440a20(extraout_ECX & 0xffffff00 | (uint) * (byte *)(iVar3 + 0x5e),
                                         uVar2 & 0xffffff00 | (uint)(byte)((char)DAT_00e295cc - 1)),
                    iVar4 != 0))
            {
                DAT_00e295d0 = DAT_00e295cc + -1;
            }
        }
        else
        {
            FUN_0043b1d0(iVar3);
        }
        FUN_004584a0(iVar3, 1);
        DAT_0050c134 = (&DAT_004bfef1)[*(char *)(iVar3 + 0x5d) * 0xc];
        DAT_0050c17c = *(byte *)(iVar3 + 0x5e);
    }
    if (DAT_0050c54c == 0)
    {
        if (DAT_00e295d4 == DAT_00e295d0)
        {
            uVar9 = 0x40533333;
            DAT_0050c134 = (&DAT_004bfef1)[*(char *)(iVar3 + 0x5d) * 0xc];
            DAT_0050c17c = *(byte *)(iVar3 + 0x5e);
            goto LAB_0043b357;
        }
    }
    else
    {
        uVar9 = 0xc0533333;
    LAB_0043b357:
        FUN_00469b90(uVar9);
    }
    iVar4 = FUN_00440af0(iVar3, DAT_00e295d0);
    *(undefined_8 *)(iVar3 + 0x5d) = (&DAT_004c0018)[(iVar4 + *(char *)(iVar3 + 0x5e) * 7) * 4];
    if (0.0 < DAT_00e295a0)
    {
        FUN_00456800(iVar3, (int)DAT_0050c134, DAT_00e295a0 * 0.5);
    }
    if (DAT_0050c54c != 0)
    {
        return;
    }
    iVar4 = *(char *)(iVar3 + 0x5d) * 0xc;
    if ((*(int *)(&DAT_004bfee8 + iVar4) == -1) || (*(int *)(&DAT_004bfeec + iVar4) == -1))
    {
        uVar9 = lookup_translation(s__c_s___Planet_not_loaded_______004c0ee4);
        _sprintf(local_100, uVar9);
        rand(-1, local_100);
        uVar9 = __ftol();
        rand(uVar9);
        uVar9 = __ftol();
        rand(uVar9);
        uVar9 = __ftol();
        create_text_entry_0(0xa0, 0xcd, uVar9);
    }
    uVar9 = FUN_00440620((int)*(char *)(iVar3 + 0x5d));
    uVar9 = lookup_translation(s__c_s_s_004c0bc0, uVar9);
    _sprintf(local_100, uVar9);
    create_text_entry_0(0xa0, 0x36, 0, -1, 0, -1, local_100);
    uVar9 = FUN_0042de10(local_100, 0);
    FUN_0042de10(local_100, 0, 0x37, uVar9);
    uVar9 = __ftol();
    FUN_00440150(uVar9);
    switch (*(undefined_8 *)(iVar3 + 0x5e))
    {
    case 0:
        uVar9 = lookup_translation(s__SCREENTEXT_530__f0_c_sAmateur_P_004c0eb0);
        uVar8 = -1;
        uVar7 = -1;
        uVar6 = 0x32;
        break;
    case 1:
        uVar9 = lookup_translation(s__SCREENTEXT_531__f0_c_sSemi_Pro_P_004c0e7c);
        uVar8 = 0x3e;
        uVar7 = -1;
        uVar6 = 0x44;
        break;
    case 2:
        uVar9 = lookup_translation(s__SCREENTEXT_532__f0_c_sGalactic_P_004c0e48);
        uVar8 = 0x11;
        uVar7 = 0xffffffbe;
        uVar6 = 0xffffffa3;
        break;
    case 3:
        uVar9 = lookup_translation(s__SCREENTEXT_533__f0_c_sInvitatio_004c0e10);
        uVar8 = 0x20;
        uVar7 = 0x59;
        uVar6 = 0xffffff9d;
        break;
    default:
        goto switchD_0043b503_caseD_4;
    }
    create_text_entry_0(0xa0, 0x22, uVar6, uVar7, uVar8, -1, uVar9);
switchD_0043b503_caseD_4:
    if (*(char *)(iVar3 + 0x6c) == '\0')
    {
        if (*(char *)(iVar3 + 0x6d) != '\0')
        {
            uVar9 = lookup_translation(s__SCREENTEXT_543__c_sTime_Attack_004c0dd0);
            goto LAB_0043b5c4;
        }
        if (*(char *)(iVar3 + 0x70) == '\x02')
        {
            uVar9 = lookup_translation(s__SCREENTEXT_544__c_s2_Player_004c0db0);
            goto LAB_0043b5c4;
        }
        pcVar10 = s__SCREENTEXT_542__c_sFree_Play_004c0d90;
    }
    else
    {
        pcVar10 = s__SCREENTEXT_541__c_sTournament_004c0df0;
    }
    uVar9 = lookup_translation(pcVar10);
LAB_0043b5c4:
    _sprintf(local_100, uVar9);
    create_text_entry_0(0xa0, 0x18, 0x32, -1, -1, -1, local_100);
    FUN_004360e0(iVar3, extraout_ECX_00 & 0xffffff00 | (uint)DAT_0050c17c);
    iVar4 = (unaff_EDI & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_004bfef1)[*(char *)(iVar3 + 0x5d) * 0xc]) + 0x45;
    sprite_enable_display(iVar4, 1);
    sprite_set_pos(iVar4, 0xa0, 0x91);
    sprite_scale(iVar4, 1.0f, 1.0f);
    sprite_set_color(iVar4, -1, -1, -1, -1);
    create_text_entry_0(0xe0, 0x8a, 0, -1, 0, -1,
                        &DAT_00e98f5c + (char)(&DAT_004bfef1)[*(char *)(iVar3 + 0x5d) * 0xc] * 0x5c);
    FUN_0043fe90(0x2d, 0x54, 0x1e);
    if (DAT_0050c54c == 0)
    {
        FUN_00469c30(0, 1.0f, 1);
        puVar5 = &DAT_0050c918;
        do
        {
            if (DAT_004eb39c == 0)
            {
                if ((DAT_004d6b48 != 0)
                    && ((iVar4 = FUN_0041d6b0(), iVar4 == 0 || (iVar4 = FUN_0041d6c0(), iVar4 != 0))))
                {
                    if (DAT_004d5e00 != 0)
                    {
                        FUN_004118b0(0);
                        return;
                    }
                    if (DAT_00e2a698 != 0)
                    {
                        return;
                    }
                    FUN_00440550(0x54);
                    FUN_004584a0(iVar3, 0);
                    FUN_00454d40(iVar3, 0xd);
                    DAT_0050c54c = 1;
                    return;
                }
                if ((DAT_004d6b44 != 0) && (DAT_00e2a698 == 0))
                {
                    if (DAT_004d5e00 != 0)
                    {
                        FUN_004118b0(0);
                        return;
                    }
                    FUN_00440550(0x4d);
                    iVar4 = FUN_0041d6b0();
                    if ((iVar4 != 0) && (iVar4 = FUN_0041d6c0(), iVar4 != 0))
                    {
                        return;
                    }
                    FUN_004584a0(iVar3, 0);
                    FUN_00454d40(iVar3, 9);
                    return;
                }
            }
            bVar1 = *(byte *)(iVar3 + 0x5e);
            if (DAT_0050c17c == bVar1)
            {
                if ((*puVar5 & 0x8000) != 0)
                {
                    if ((char)bVar1 < DAT_00e295c8)
                    {
                        *(byte *)(iVar3 + 0x5e) = bVar1 + 1;
                        DAT_00e295d4 = -1;
                        FUN_00440550(0x58);
                        FUN_0043b0b0(iVar3);
                    }
                    else
                    {
                        FUN_00440550(0x4b);
                    }
                }
                if ((*puVar5 & 0x4000) != 0)
                {
                    if (*(char *)(iVar3 + 0x5e) < '\x01')
                    {
                        FUN_00440550(0x4b);
                    }
                    else
                    {
                        *(char *)(iVar3 + 0x5e) = *(char *)(iVar3 + 0x5e) + -1;
                        DAT_00e295d4 = -1;
                        FUN_00440550(0x58);
                        FUN_0043b0b0(iVar3);
                    }
                }
            }
            puVar5 = puVar5 + 1;
        } while ((int)puVar5 < 0x50c91c);
        _DAT_00ea02b0 = (int)*(char *)(iVar3 + 0x5d);
        iVar4 = FUN_0041d6b0();
        if ((iVar4 == 0) || (iVar4 = FUN_0041d6c0(), iVar4 != 0))
        {
            DAT_00ea05ac = *(undefined_32 *)(&DAT_004bfee8 + *(char *)(iVar3 + 0x5d) * 0xc);
            FUN_0041e5a0();
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043b880(int param_1)

{
    char cVar1;
    int iVar2;
    uint uVar3;
    undefined_32 uVar4;
    undefined_8 *puVar5;
    uint extraout_ECX;
    uint extraout_ECX_00;
    int iVar6;
    int iVar7;
    uint *puVar8;
    char *pcVar9;
    int local_50;
    undefined_8 local_40[64];

    if (DAT_0050c558 == '\0')
    {
        _DAT_0050c558 = CONCAT31(DAT_0050c558_1, 0xc);
    }
    if (DAT_0050c55c == '\0')
    {
        _DAT_0050c55c = CONCAT31(DAT_0050c55c_1, 2);
    }
    cVar1 = DAT_0050c560;
    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        FUN_0045bee0(param_1, 0x25, -1, 0);
        DAT_0050c550 = 0;
        DAT_0050c554 = 0;
        if (*(int *)(param_1 + 0xc) == 0xc)
        {
            DAT_00e295a0 = 1.0;
        }
        FUN_0043b0b0(param_1);
        if (*(int *)(param_1 + 0xc) != 0xc)
        {
            FUN_0043b1d0(param_1);
        }
        _DAT_0050c430 = -1;
        DAT_0050c560 = '\0';
        _DAT_0050c434 = -1;
        _DAT_0050c438 = -1;
        iVar2 = FUN_00440bc0(param_1);
        if (iVar2 != 0)
        {
            iVar2 = (int)DAT_0050c560;
            DAT_0050c560 = DAT_0050c560 + '\x01';
            (&DAT_0050c430)[iVar2] = 0;
        }
        if (*(char *)(param_1 + 0x6c) == '\0')
        {
            cVar1 = DAT_0050c560 + '\x01';
            (&DAT_0050c430)[DAT_0050c560] = 2;
            if (*(char *)(param_1 + 0x6d) != '\0')
                goto LAB_0043b9b4;
            DAT_0050c560 = DAT_0050c560 + '\x02';
            (&DAT_0050c430)[cVar1] = 3;
            (&DAT_0050c430)[DAT_0050c560] = 4;
        }
        else
        {
            uVar3 = FUN_00440af0(param_1, DAT_00e295d0);
            iVar2 = FUN_00440a20(uVar3 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x5e), uVar3);
            cVar1 = DAT_0050c560;
            if (iVar2 == 0)
                goto LAB_0043b9b4;
            (&DAT_0050c430)[DAT_0050c560] = 1;
        }
        cVar1 = DAT_0050c560 + '\x01';
    }
LAB_0043b9b4:
    DAT_0050c560 = cVar1;
    uVar4 = FUN_00440af0(param_1, DAT_00e295d0);
    cVar1 = FUN_00440a00(extraout_ECX & 0xffffff00 | (uint) * (byte *)(param_1 + 0x5e), uVar4);
    iVar2 = 0xa0;
    if ((DAT_0050c554 == 0) && (iVar7 = 0, '\0' < DAT_0050c560))
    {
        do
        {
            switch ((&DAT_0050c430)[iVar7])
            {
            case 0:
                uVar4 = lookup_translation(s__SCREENTEXT_655__f4_sMirror__004c11d4);
                FUN_0043fce0(param_1, 0x1e, iVar2, 10, DAT_0050c550, iVar7, uVar4);
                if (*(char *)(param_1 + 0x6e) == '\0')
                {
                    puVar5 = (undefined_8 *)lookup_translation(s__SCREENTEXT_233__f4_sOFF_004c11a0);
                }
                else
                {
                    puVar5 = (undefined_8 *)lookup_translation(s__SCREENTEXT_232__f4_sON_004c11bc);
                }
                break;
            case 1:
                if (*(char *)(param_1 + 0x91) == '\x01')
                {
                    uVar4 = lookup_translation(s__SCREENTEXT_223__f4_sFair_004c1184);
                }
                else if (*(char *)(param_1 + 0x91) == '\x02')
                {
                    uVar4 = lookup_translation(s__SCREENTEXT_224__f4_sSkilled_004c1164);
                }
                else
                {
                    uVar4 = lookup_translation(s__SCREENTEXT_225__f4_sWinner_Take_004c113c);
                }
                _sprintf(local_40, uVar4);
                uVar4 = lookup_translation(s__SCREENTEXT_222__f4_sWinnings__004c111c);
                FUN_0043fce0(param_1, 0x1e, iVar2, 10, DAT_0050c550, iVar7, uVar4);
                FUN_0043fce0(param_1, 0x55, iVar2, 10, DAT_0050c550, iVar7, local_40);
                local_50 = iVar2 + 10;
                uVar4 = lookup_translation(s__SCREENTEXT_226__f4_s1st_004c1100);
                FUN_0043fce0(param_1, 0x2d, local_50, 10, DAT_0050c550, iVar7, uVar4);
                uVar4 = lookup_translation(s__SCREENTEXT_227__f4_s2nd_004c10e4);
                FUN_0043fce0(param_1, 0x2d, iVar2 + 0x14, 10, DAT_0050c550, iVar7, uVar4);
                uVar4 = lookup_translation(s__SCREENTEXT_228__f4_s3rd_004c10c8);
                FUN_0043fce0(param_1, 0x2d, iVar2 + 0x1e, 10, DAT_0050c550, iVar7, uVar4);
                if (cVar1 == '\x04')
                {
                    uVar4 = lookup_translation(s__SCREENTEXT_229__f4_s4th_004c0908);
                    FUN_0043fce0(param_1, 0x2d, iVar2 + 0x28, 10, DAT_0050c550, iVar7, uVar4);
                }
                iVar6 = 0;
                if (0 < cVar1)
                {
                    do
                    {
                        uVar4 = __ftol();
                        uVar4 = lookup_translation(s__f0_r_s_d_004c10bc, uVar4);
                        _sprintf(local_40, uVar4);
                        FUN_0043fce0(param_1, 0x69, local_50, 10, DAT_0050c550, iVar7, local_40);
                        iVar6 = iVar6 + 1;
                        local_50 = local_50 + 10;
                    } while (iVar6 < cVar1);
                }
                goto switchD_0043ba05_caseD_7;
            case 2:
                uVar4 = lookup_translation(s__f0_s_d_004c10b4, (int)*(char *)(param_1 + 0x8f));
                _sprintf(local_40, uVar4);
                pcVar9 = s__SCREENTEXT_214__f4_sLaps__004c1098;
                goto LAB_0043bdfd;
            case 3:
                uVar4 = lookup_translation(s__f0_s_d_004c10b4, _DAT_0050c558 & 0xff);
                _sprintf(local_40, uVar4);
                if ('\x01' < *(char *)(param_1 + 0x70))
                {
                    uVar4 = lookup_translation(s__f0_s_d_004c10b4, _DAT_0050c55c & 0xff);
                    _sprintf(local_40, uVar4);
                }
                pcVar9 = s__SCREENTEXT_216__f4_sRacers__004c1078;
                goto LAB_0043bd30;
            case 4:
                if (*(char *)(param_1 + 0x90) == '\x01')
                {
                    uVar4 = lookup_translation(s__SCREENTEXT_219__f4_sSlow_004c105c);
                }
                else if (*(char *)(param_1 + 0x90) == '\x02')
                {
                    uVar4 = lookup_translation(s__SCREENTEXT_220__f4_sAverage_004c103c);
                }
                else
                {
                    uVar4 = lookup_translation(s__SCREENTEXT_221__f4_sFast_004c1020);
                }
                _sprintf(local_40, uVar4);
                pcVar9 = s__SCREENTEXT_218__f4_sAI_Speed__004c1000;
            LAB_0043bd30:
                uVar4 = lookup_translation(pcVar9);
                FUN_0043fce0(param_1, 0x1e, iVar2, 10, DAT_0050c550, iVar7, uVar4);
                puVar5 = local_40;
                break;
            case 5:
                iVar2 = iVar2 + 10;
                uVar4 = lookup_translation(s__SCREENTEXT_231__f4_sDemo_mode__004c0fe0);
                FUN_0043fce0(param_1, 0x1e, iVar2, 10, DAT_0050c550, iVar7, uVar4);
                if (*(int *)(param_1 + 100) == 0)
                {
                    puVar5 = (undefined_8 *)lookup_translation(s__SCREENTEXT_233__f4_sOFF_004c11a0);
                }
                else
                {
                    puVar5 = (undefined_8 *)lookup_translation(s__SCREENTEXT_232__f4_sON_004c11bc);
                }
                break;
            case 6:
                if (*(int *)(param_1 + 0x68) < 0)
                {
                    uVar4 = lookup_translation(s__SCREENTEXT_234__f4_sOFF_004c0fc4);
                    _sprintf(local_40, uVar4);
                }
                else
                {
                    uVar4 = lookup_translation(&DAT_004b9584, *(int *)(param_1 + 0x68) + 1);
                    _sprintf(local_40, uVar4);
                }
                pcVar9 = s__f4_sCutscene__004c0fb4;
            LAB_0043bdfd:
                uVar4 = lookup_translation(pcVar9);
                FUN_0043fce0(param_1, 0x1e, iVar2, 10, DAT_0050c550, iVar7, uVar4);
                puVar5 = local_40;
                break;
            default:
                goto switchD_0043ba05_caseD_7;
            }
            FUN_0043fce0(param_1, 0x55, iVar2, 10, DAT_0050c550, iVar7, puVar5);
        switchD_0043ba05_caseD_7:
            iVar7 = iVar7 + 1;
        } while (iVar7 < DAT_0050c560);
    }
    if (DAT_0050c554 == 0)
    {
        uVar4 = 0x40533333;
    }
    else
    {
        uVar4 = 0xc0533333;
    }
    FUN_00469b90(uVar4);
    if (0.0 < DAT_00e295a0)
    {
        FUN_00456800(param_1, (int)(char)(&DAT_004bfef1)[*(char *)(param_1 + 0x5d) * 0xc], DAT_00e295a0 * 0.5);
    }
    if ((DAT_0050c554 == 0) && (FUN_00456c70(param_1, (int)*(char *)(param_1 + 0x5d), 0.5f), DAT_0050c554 == 0))
    {
        iVar2 = *(char *)(param_1 + 0x5d) * 0xc;
        if ((*(int *)(&DAT_004bfee8 + iVar2) == -1) || (*(int *)(&DAT_004bfeec + iVar2) == -1))
        {
            uVar4 = lookup_translation(s__c_s___Planet_not_loaded_______004c0ee4);
            _sprintf(local_40, uVar4);
            rand(-1, local_40);
            uVar4 = __ftol();
            rand(uVar4);
            uVar4 = __ftol();
            rand(uVar4);
            uVar4 = __ftol();
            create_text_entry_0(0xa0, 0xcd, uVar4);
        }
        uVar4 = FUN_00440620((int)*(char *)(param_1 + 0x5d));
        uVar4 = lookup_translation(s__c_s_s_004c0bc0, uVar4);
        _sprintf(local_40, uVar4);
        create_text_entry_0(0xa0, 0x25, 0, -1, 0, -1, local_40);
        uVar4 = FUN_0042de10(local_40, 0);
        FUN_0042de10(local_40, 0, 0x26, uVar4);
        uVar4 = __ftol();
        FUN_00440150(uVar4);
        FUN_004403e0(param_1, 100, 0x37, 255.0f, 0);
        FUN_004403e0(param_1, 0xdc, 0x37, 255.0f, 3);
        iVar2 = (int)*(char *)(param_1 + 0x6e) + *(char *)(param_1 + 0x5d) * 2;
        if (*(float *)(&DAT_00e365f4 + iVar2 * 4) < 3599.99)
        {
            iVar2 = (int)(char)(&DAT_00e37404)[iVar2];
            uVar4 = lookup_translation((&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[iVar2 * 0xd]);
            uVar4 = lookup_translation((&PTR_s__SCREENTEXT_322___Anakin_004c2714)[iVar2 * 0xd], uVar4);
            uVar4 = lookup_translation(s__f4_c_s_s__s_004c0fa4, uVar4);
            _sprintf(local_40, uVar4);
            create_text_entry_0(100, 0x4e, 0xffffffa3, 0xffffffbe, 0x11, -1, local_40);
            iVar2 = iVar2 + 0x17;
            sprite_enable_display(iVar2, 1);
            sprite_set_pos(iVar2, 0x54, 0x55);
            sprite_scale(iVar2, 0.5f, 0.5f);
            sprite_set_color(iVar2, -1, -1, -1, -1);
        }
        iVar2 = (int)*(char *)(param_1 + 0x6e) + *(char *)(param_1 + 0x5d) * 2;
        if (*(float *)(&DAT_00e366bc + iVar2 * 4) < 3599.99)
        {
            iVar2 = (int)(char)(&DAT_00e37436)[iVar2];
            uVar4 = lookup_translation((&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[iVar2 * 0xd]);
            uVar4 = lookup_translation((&PTR_s__SCREENTEXT_322___Anakin_004c2714)[iVar2 * 0xd], uVar4);
            uVar4 = lookup_translation(s__f4_c_s_s__s_004c0fa4, uVar4);
            _sprintf(local_40, uVar4);
            create_text_entry_0(0xdc, 0x4e, 0xffffffa3, 0xffffffbe, 0x11, -1, local_40);
            iVar2 = iVar2 + 0x2e;
            sprite_enable_display(iVar2, 1);
            sprite_set_pos(iVar2, 0xcc, 0x55);
            sprite_scale(iVar2, 0.5f, 0.5f);
            sprite_set_color(iVar2, -1, -1, -1, -1);
        }
        iVar2 = (int)(char)(&DAT_004bfef2)[*(char *)(param_1 + 0x5d) * 0xc];
        uVar4 = lookup_translation(s__SCREENTEXT_529__f4_c_sTrack_Fav_004c0f7c);
        create_text_entry_0(0xf0, 0x82, 0x32, -1, -1, -1, uVar4);
        uVar4 = lookup_translation((&PTR_s__SCREENTEXT_323___Skywalker_004c2718)[iVar2 * 0xd]);
        uVar4 = lookup_translation((&PTR_s__SCREENTEXT_322___Anakin_004c2714)[iVar2 * 0xd], uVar4);
        uVar4 = lookup_translation(s__f4_c_s_s__s_004c0fa4, uVar4);
        _sprintf(local_40, uVar4);
        create_text_entry_0(0xf0, 0x89, 0xffffffa3, 0xffffffbe, 0x11, -1, local_40);
        sprite_enable_display(iVar2, 1);
        sprite_set_pos(iVar2, 0xd0, 0x91);
        sprite_scale(iVar2, 1.0f, 1.0f);
        sprite_set_color(iVar2, -1, -1, -1, -1);
        if (*(char *)(param_1 + 0x6c) != '\0')
        {
            uVar4 = FUN_00440af0(param_1, DAT_00e295d0);
            iVar2 = FUN_00440a20(extraout_ECX_00 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x5e), uVar4);
            if (iVar2 != 0)
            {
                if (cVar1 == '\x03')
                {
                    pcVar9 = s__SCREENTEXT_527__f4_c_sMust_plac_004c0f40;
                }
                else
                {
                    pcVar9 = s__SCREENTEXT_528__f4_c_sMust_plac_004c0f04;
                }
                uVar4 = lookup_translation(pcVar9);
                create_text_entry_0(0xa0, 0x73, 0xffffffa3, 0xffffffbe, 0x11, -1, uVar4);
            }
        }
        if ((DAT_0050c554 == 0) && (1.0 <= DAT_00e295a0))
        {
            puVar8 = &DAT_0050c918;
            do
            {
                if (DAT_004eb39c == 0)
                {
                    if ((DAT_004d6b48 != 0)
                        && (((iVar2 = FUN_0041d6b0(), iVar2 == 0 || (iVar2 = FUN_0041d6c0(), iVar2 != 0))
                             && (DAT_00e2a698 == 0))))
                    {
                        FUN_00440550(0x54);
                        if (*(char *)(param_1 + 0x6c) == '\0')
                        {
                            if (*(char *)(param_1 + 0x6d) == '\0')
                            {
                                if (*(char *)(param_1 + 0x70) < '\x02')
                                {
                                    if ((*(int *)(param_1 + 100) == 0) || (DAT_0050c558 != '\x02'))
                                    {
                                        *(byte *)(param_1 + 0x72) = DAT_0050c558;
                                    }
                                    else
                                    {
                                        *(undefined_8 *)(param_1 + 0x72) = 1;
                                    }
                                }
                                else
                                {
                                    *(char *)(param_1 + 0x72) = DAT_0050c55c;
                                }
                            }
                            else
                            {
                                *(undefined_8 *)(param_1 + 0x72) = 1;
                            }
                        }
                        else
                        {
                            *(undefined_8 *)(param_1 + 0x72) = 0xc;
                        }
                        FUN_004584a0(param_1, 0);
                        FUN_0045bee0(param_1, 0x24, 3, 0);
                        DAT_0050c554 = 1;
                        return;
                    }
                    if ((DAT_004d6b44 != 0) && (DAT_00e2a698 == 0))
                    {
                        FUN_00440550(0x4d);
                        FUN_004584a0(param_1, 0);
                        FUN_00454d40(param_1, 0xc);
                        return;
                    }
                }
                if ('\x01' < DAT_0050c560)
                {
                    if ((*puVar8 & 0x4000) != 0)
                    {
                        DAT_0050c550 = DAT_0050c550 + -1;
                        FUN_00440550(0x58);
                    }
                    if ((*puVar8 & 0x8000) != 0)
                    {
                        DAT_0050c550 = DAT_0050c550 + 1;
                        FUN_00440550(0x58);
                    }
                    if (DAT_0050c550 < 0)
                    {
                        DAT_0050c550 = DAT_0050c560 + -1;
                    }
                    if (DAT_0050c560 + -1 < DAT_0050c550)
                    {
                        DAT_0050c550 = 0;
                    }
                }
                if ('\0' < DAT_0050c560)
                {
                    if ((*puVar8 & 0x20000) != 0)
                    {
                        switch ((&DAT_0050c430)[DAT_0050c550])
                        {
                        case 0:
                            *(bool *)(param_1 + 0x6e) = *(char *)(param_1 + 0x6e) == '\0';
                            break;
                        case 1:
                            *(char *)(param_1 + 0x91) = *(char *)(param_1 + 0x91) + '\x01';
                            break;
                        case 2:
                            *(char *)(param_1 + 0x8f) = *(char *)(param_1 + 0x8f) + '\x01';
                            break;
                        case 3:
                            if (*(char *)(param_1 + 0x70) < '\x02')
                            {
                                if (DAT_0050c558 == '\b')
                                {
                                    _DAT_0050c558 = CONCAT31(DAT_0050c558_1, 0xc);
                                }
                                else if (DAT_0050c558 == '\f')
                                {
                                    _DAT_0050c558 = CONCAT31(DAT_0050c558_1, 1);
                                }
                                else
                                {
                                    _DAT_0050c558 = _DAT_0050c558 & 0xffffff00 | (uint)(byte)(DAT_0050c558 << 1);
                                }
                            }
                            else
                            {
                                uVar3 = _DAT_0050c55c & 0xffffff00;
                                _DAT_0050c55c = uVar3 | (byte)(DAT_0050c55c + 2U);
                                if ((byte)(DAT_0050c55c + 2U) == 8)
                                {
                                    DAT_0050c55c_1 = (undefined3)(uVar3 >> 8);
                                    _DAT_0050c55c = CONCAT31(DAT_0050c55c_1, 2);
                                }
                            }
                            break;
                        case 4:
                            *(char *)(param_1 + 0x90) = *(char *)(param_1 + 0x90) + '\x01';
                            break;
                        case 5:
                            *(uint *)(param_1 + 100) = (uint)(*(int *)(param_1 + 100) == 0);
                            break;
                        case 6:
                            *(int *)(param_1 + 0x68) = *(int *)(param_1 + 0x68) + 1;
                        }
                        FUN_00440550(0x58);
                    }
                    if ((*puVar8 & 0x10000) != 0)
                    {
                        switch ((&DAT_0050c430)[DAT_0050c550])
                        {
                        case 0:
                            *(bool *)(param_1 + 0x6e) = *(char *)(param_1 + 0x6e) == '\0';
                            break;
                        case 1:
                            *(char *)(param_1 + 0x91) = *(char *)(param_1 + 0x91) + -1;
                            break;
                        case 2:
                            *(char *)(param_1 + 0x8f) = *(char *)(param_1 + 0x8f) + -1;
                            break;
                        case 3:
                            if (*(char *)(param_1 + 0x70) < '\x02')
                            {
                                if (DAT_0050c558 == 0xc)
                                {
                                    _DAT_0050c558 = CONCAT31(DAT_0050c558_1, 8);
                                }
                                else if (DAT_0050c558 == 1)
                                {
                                    _DAT_0050c558 = CONCAT31(DAT_0050c558_1, 0xc);
                                }
                                else
                                {
                                    _DAT_0050c558 = _DAT_0050c558 & 0xffffff00 | (uint)(DAT_0050c558 >> 1);
                                }
                            }
                            else
                            {
                                uVar3 = _DAT_0050c55c & 0xffffff00;
                                _DAT_0050c55c = uVar3 | (byte)(DAT_0050c55c - 2U);
                                if ((byte)(DAT_0050c55c - 2U) == 0)
                                {
                                    DAT_0050c55c_1 = (undefined3)(uVar3 >> 8);
                                    _DAT_0050c55c = CONCAT31(DAT_0050c55c_1, 6);
                                }
                            }
                            break;
                        case 4:
                            *(char *)(param_1 + 0x90) = *(char *)(param_1 + 0x90) + -1;
                            break;
                        case 5:
                            *(uint *)(param_1 + 100) = (uint)(*(int *)(param_1 + 100) == 0);
                            break;
                        case 6:
                            *(int *)(param_1 + 0x68) = *(int *)(param_1 + 0x68) + -1;
                        }
                        FUN_00440550(0x58);
                    }
                }
                if (*(char *)(param_1 + 0x8f) < '\x01')
                {
                    *(undefined_8 *)(param_1 + 0x8f) = 5;
                }
                if ('\x05' < *(char *)(param_1 + 0x8f))
                {
                    *(undefined_8 *)(param_1 + 0x8f) = 1;
                }
                if (*(char *)(param_1 + 0x90) < '\x01')
                {
                    *(undefined_8 *)(param_1 + 0x90) = 3;
                }
                if ('\x03' < *(char *)(param_1 + 0x90))
                {
                    *(undefined_8 *)(param_1 + 0x90) = 1;
                }
                if (*(char *)(param_1 + 0x91) < '\x01')
                {
                    *(undefined_8 *)(param_1 + 0x91) = 3;
                }
                if ('\x03' < *(char *)(param_1 + 0x91))
                {
                    *(undefined_8 *)(param_1 + 0x91) = 1;
                }
                if (*(int *)(param_1 + 0x68) < -1)
                {
                    *(undefined_32 *)(param_1 + 0x68) = 0x14;
                }
                if (0x14 < *(int *)(param_1 + 0x68))
                {
                    *(undefined_32 *)(param_1 + 0x68) = -1;
                }
                puVar8 = puVar8 + 1;
            } while ((int)puVar8 < 0x50c91c);
            iVar2 = FUN_0041d6b0();
            if ((iVar2 == 0) || (iVar2 = FUN_0041d6c0(), iVar2 != 0))
            {
                DAT_00ea05ac = *(undefined_32 *)(&DAT_004bfee8 + *(char *)(param_1 + 0x5d) * 0xc);
                FUN_0041e5a0();
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043c6f0(int param_1)

{
    float fVar1;
    int iVar2;
    int iVar3;
    undefined_32 uVar4;
    undefined_8 local_c[8];
    float local_4;

    iVar3 = 0;
    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        FUN_00449e50();
        DAT_0050c140 = 0;
        _DAT_0050c564 = 3.0;
        FUN_0045c010(&DAT_004c44dc, &DAT_004c44fc, 1, 0, 0);
        rand();
        DAT_0050c428 = __ftol();
    }
    FUN_00440d50(0, 0);
    iVar2 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), *(undefined_32 *)(param_1 + 0x40));
    fVar1 = *(float *)(iVar2 + 0xbc) * 0.8;
    if (1 < DAT_0050c140)
    {
        FUN_00469b90(0xc0533333);
    }
    if ((DAT_0050c140 == 3) && (0.0 < _DAT_0050c564))
    {
        *(float *)(param_1 + 0x4c) = fVar1 - 60.0;
        vec3f_copy(&DAT_00e2af90, param_1 + 0x44);
        _DAT_0050c564 = _DAT_0050c564 - _DAT_00e22a50;
    }
    if ('\0' < *(char *)(param_1 + 0x70))
    {
        do
        {
            if ((DAT_004d6b48 != 0) || (DAT_004d6b44 != 0))
            {
                FUN_0044b270((&DAT_00e29900)[*(int *)(param_1 + 0x40)], &DAT_004c457c);
                FUN_00466ec0(iVar2, 0);
                *(undefined_32 *)(param_1 + 0x40) = -1;
                DAT_00e295a0 = 0.0;
                DAT_004bfedc = 9;
            }
            iVar3 = iVar3 + 1;
        } while (iVar3 < *(char *)(param_1 + 0x70));
    }
    if (0.0 < DAT_00e295a0)
    {
        FUN_00456800(param_1, (int)DAT_0050c428, DAT_00e295a0 * 0.4);
    }
    if (DAT_004bfedc != 9)
    {
        if (((DAT_0050c140 == 0) && (0.0 < _DAT_0050c564))
            && (_DAT_0050c564 = _DAT_0050c564 - _DAT_00e22a50, _DAT_0050c564 <= 0.0))
        {
            FUN_0045c010(&DAT_004c44dc, &DAT_004c449c, 1, 0, 0);
            DAT_0050c140 = 1;
        }
        if (DAT_0050c930 == 0)
        {
            if (DAT_0050c140 == 1)
            {
                FUN_0044afb0((&DAT_00e29900)[*(int *)(param_1 + 0x40)], local_c);
                local_4 = fVar1 - 60.0;
                FUN_0045c010(&DAT_00e298f0, local_c, 1, 0, 0);
                vec3f_copy(iVar2 + 0x50, &DAT_004c451c);
                *(undefined_32 *)(iVar2 + 0x54) = 0xc3a00000;
                if (*(int *)(iVar2 + 8) == 1)
                {
                    uVar4 = 6;
                }
                else
                {
                    uVar4 = 0x14;
                }
                FUN_00466ec0(iVar2, uVar4);
                DAT_0050c140 = 2;
            }
            if ((DAT_0050c930 == 0) && (DAT_0050c140 == 2))
            {
                _DAT_0050c564 = 5.0;
                DAT_0050c140 = 3;
            }
        }
        if ((_DAT_0050c564 <= 0.0) && (DAT_0050c140 == 3))
        {
            FUN_0045c010(&DAT_00e298f0, &DAT_004c449c, 1, 0, 0);
            DAT_0050c140 = 4;
        }
        if (DAT_0050c930 != 0)
        {
            return;
        }
        if (DAT_0050c140 == 4)
        {
            FUN_0045c010(&DAT_004c4490, &DAT_00e2af90, 1, 0, 0);
            DAT_0050c140 = 5;
        }
        if (DAT_0050c930 != 0)
        {
            return;
        }
        if (DAT_0050c140 != 5)
        {
            return;
        }
    }
    FUN_00454d40(param_1, 9);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043ca30(int param_1)

{
    int iVar1;
    float *pfVar2;
    int *piVar3;
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    iVar1 = param_1;
    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        _DAT_0050c110 = 5.0;
        _DAT_0050c20c = 0;
        _DAT_0050c120 = 0;
        FUN_0044afb0(DAT_00e29970, &DAT_0050c2f8);
        vec3f_copy(&DAT_0050c440, &DAT_0050c2f8);
        _DAT_0050c300 = *(float *)(&DAT_004c2720 + *(char *)(param_1 + 0x73) * 0x34) * 0.6667 - 157.0;
        _DAT_0050c448 = _DAT_004c2788 * 0.6667 - 157.0;
        _DAT_0050c440 = _DAT_0050c440 - -60.0;
        _DAT_0050c444 = _DAT_0050c444 - -70.0;
        FUN_0044afb0(DAT_00e29974, &DAT_0050c128);
        vec3f_copy(&DAT_0050c318, &DAT_0050c128);
        _DAT_0050c130 = _DAT_004c2788 * 0.6667 - 157.0;
        _DAT_0050c320 = *(float *)(&DAT_004c2720 + *(char *)(param_1 + 0x73) * 0x34) * 0.6667 - 157.0;
        _DAT_0050c318 = _DAT_0050c318 - -60.0;
        _DAT_0050c31c = _DAT_0050c31c - 70.0;
        vec3f_set(&DAT_0050c440, 296.0f, -206.0f, -68.0f);
        vec3f_set(&DAT_0050c2f8, -315.0f, 365.0f, -82.0f);
        vec3f_set(&DAT_0050c318, 315.0f, -566.0f, -70.0f);
        vec3f_set(&DAT_0050c128, 0, -680.0f, -68.0f);
        vec3f_copy(&DAT_00e298f0, &DAT_0050c440);
        vec3f_copy(&DAT_00e2af90, &DAT_0050c128);
    }
    FUN_00426c80(0x1b, 7, 0.05f, 0.8f, 1);
    if (0.0 <= _DAT_0050c110)
    {
        _DAT_0050c110 = _DAT_0050c110 - _DAT_00e22a50 * 0.5;
        if (_DAT_0050c110 <= 0.0)
        {
            DAT_0050c944 = -1;
        }
    }
    param_1 = 0;
    piVar3 = &DAT_00e2993c;
    pfVar2 = (float *)&DAT_00e99364;
    do
    {
        if (*piVar3 != 0)
        {
            pfVar2[-1] = 0.0;
            *pfVar2 = (float)param_1 * -2500.0;
            pfVar2[1] = 50.0;
            if (*(char *)(iVar1 + 0x73) == '\a')
            {
                DAT_00e99364 = 200.0f;
            }
            if (*(char *)(iVar1 + 0x73) == '\x11')
            {
                DAT_00e99364 = 0x43c80000;
            }
            mat_set_rotation(local_40, 0, 0, 0);
            vec3f_set(local_10, pfVar2[-1], *pfVar2, pfVar2[1]);
            FUN_004337e0(*piVar3, local_40, 0, 0x428c0000, 0x428c0000, 0x428c0000, 0xc31d0000, 1, 1.0f, 1.0f);
        }
        pfVar2 = pfVar2 + 10;
        param_1 = param_1 + 1;
        piVar3 = piVar3 + 1;
    } while ((int)pfVar2 < 0xe993b4);
    if ((DAT_004d6b48 != 0) || (DAT_004d6b44 != 0))
    {
        _DAT_0050c110 = 0.0;
        DAT_0050c944 = -1;
    }
    if ((_DAT_0050c110 < 4.5) && (2.75 < _DAT_0050c110))
    {
        if (_DAT_0050c20c == 0)
        {
            _DAT_0050c20c = 1;
            FUN_00468fe0(0x1d, 0x18);
            FUN_00426c80((char)(&DAT_004bfef2)[*(char *)(iVar1 + 0x5d) * 0xc] + 0xb7, 7, 0.25f, 1.0f, 0);
        }
        create_text_entry_0(
            0xa0, 200, 0x78, 0xffffffaa, 0xffffffaa, -1,
            (&PTR_s__f4_o_cI_could_run_faster_than_y_004c0238)[(char)(&DAT_004bfef2)[*(char *)(iVar1 + 0x5d) * 0xc]]);
    }
    if ((_DAT_0050c110 < 2.5) && (0.25 < _DAT_0050c110))
    {
        if (_DAT_0050c120 == 0)
        {
            _DAT_0050c120 = 1;
            FUN_00468fe0(0x1c, 0x18);
            vec3f_copy(&DAT_00e298f0, &DAT_0050c318);
            vec3f_copy(&DAT_00e2af90, &DAT_0050c2f8);
            FUN_00426c80(DAT_00e35a84 + 0xb7, 7, 0.25f, 1.0f, 0);
        }
        create_text_entry_0(0xa0, 200, 0xffffffaa, 0xffffffaa, 0, -1,
                            (&PTR_s__f4_o_cI_could_run_faster_than_y_004c0238)[DAT_00e35a84]);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043ceb0(int **param_1)

{
    float fVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int **ppiVar6;
    char *pcVar7;
    undefined_32 uVar8;
    undefined_32 uVar9;
    undefined_32 uVar10;
    int local_68;
    int local_64;
    float local_60;
    undefined_8 local_5c[4];
    undefined_8 local_58[12];
    undefined_8 local_4c[12];
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    iVar4 = (int)param_1;
    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        _DAT_0050c0d8 = 33.0;
        DAT_0050c178 = '\0';
        pcVar7 = (char *)((int)param_1 + 0x73);
        iVar5 = 3;
        iVar3 = 0;
        do
        {
            *(undefined_32 *)((int)&DAT_0050c200 + iVar3) = *(undefined_32 *)(&DAT_004c2720 + *pcVar7 * 0x34);
            iVar2 = rand();
            pcVar7 = pcVar7 + 1;
            iVar5 = iVar5 + -1;
            *(float *)((int)&DAT_0050c1e8 + iVar3) = (float)iVar2 * 4.656613e-10 * 360.0;
            iVar3 = iVar3 + 4;
        } while (iVar5 != 0);
        vec3f_set(&DAT_00e2af90, 0, 0, 0xc2c80000);
        vec3f_set(&DAT_00e298f0, 300.0f, 0, 0xc2c80000);
        vec3f_copy(&DAT_00e2b470, &DAT_00e2af90);
        vec3f_copy(&DAT_00e29b90, &DAT_00e298f0);
        FUN_004276a0(0, 0x1000000);
        FUN_004277b0(3, 0, *(undefined_32 *)(&DAT_004c0298 + *(char *)((int)param_1 + 0x5e) * 4), 5, 0,
                     (int)*(short *)(&DAT_004c4a68 + *(char *)((int)param_1 + 0xcc) * 2));
    }
    iVar3 = FUN_00427360(3, 0);
    if ((iVar3 == 0) && (iVar3 = FUN_00427360(5, 0), iVar3 == 0))
    {
        param_1 = (int **)1.0f;
        iVar3 = FUN_00427670(0, 0x1000000);
        if (iVar3 == 0)
        {
            FUN_00427410(1, (int)*(char *)(iVar4 + 0xcc), 0xf, 0);
            FUN_00427690(0, 0x1000000);
        }
    }
    else
    {
        param_1 = (int **)0x3f400000;
    }
    FUN_00426c80(5, 6, 0.25f, param_1, 1);
    vec3f_set(local_58, 0, 0, 0);
    vec3f_set(local_4c, 0, 0, 0);
    switch (DAT_0050c178)
    {
    case '\0':
        if (32.0 <= _DAT_0050c0d8)
            goto switchD_0043d06b_caseD_6;
        _DAT_00e2b478 = _DAT_00e2b478 - -125.0;
        DAT_0050c178 = DAT_0050c178 + '\x01';
        _DAT_00e29b98 = _DAT_00e29b98 - -150.0;
        goto LAB_0043d231;
    case '\x01':
        if (30.0 <= _DAT_0050c0d8)
            goto switchD_0043d06b_caseD_6;
        DAT_0050c178 = DAT_0050c178 + '\x01';
        vec3f_set(&DAT_00e2b470, 0, 0, 0x41c80000);
        uVar10 = 0x43160000;
        uVar9 = 0x437a0000;
        uVar8 = 0xc3fa0000;
        break;
    case '\x02':
        if (23.0 <= _DAT_0050c0d8)
            goto switchD_0043d06b_caseD_6;
        uVar10 = 50.0f;
        DAT_0050c178 = DAT_0050c178 + '\x01';
        uVar9 = 0xc3480000;
        uVar8 = 0xc3fa0000;
        break;
    case '\x03':
        if (20.0 <= _DAT_0050c0d8)
            goto switchD_0043d06b_caseD_6;
        DAT_0050c178 = DAT_0050c178 + '\x01';
        vec3f_set(&DAT_00e2b470, 0, 0xc3160000, 0xc1c80000);
        uVar10 = 0;
        uVar9 = 0xc3c80000;
        uVar8 = 0x44480000;
        break;
    case '\x04':
        if (14.0 <= _DAT_0050c0d8)
            goto switchD_0043d06b_caseD_6;
        DAT_0050c178 = DAT_0050c178 + '\x01';
        vec3f_set(&DAT_00e2b470, 0, 0x43160000, 0xc2480000);
        uVar10 = 0xc1c80000;
        uVar9 = 300.0f;
        uVar8 = 100.0f;
        break;
    case '\x05':
        if (9.0 <= _DAT_0050c0d8)
            goto switchD_0043d06b_caseD_6;
        DAT_0050c178 = DAT_0050c178 + '\x01';
        vec3f_set(&DAT_00e2b470, 0, 0, 0x41c80000);
        uVar10 = 1000.0f;
        uVar9 = 0xc4fa0000;
        uVar8 = 0xc59c4000;
        break;
    default:
        goto switchD_0043d06b_caseD_6;
    }
    vec3f_set(&DAT_00e29b90, uVar8, uVar9, uVar10);
LAB_0043d231:
    FUN_0045c010(&DAT_00e29b90, &DAT_00e2b470, 1, 0, 1);
switchD_0043d06b_caseD_6:
    if (((0.0 <= _DAT_0050c0d8) && (_DAT_0050c0d8 = _DAT_0050c0d8 - _DAT_00e22a50, _DAT_0050c0d8 <= 0.0))
        && (DAT_0050c944 = -1, DAT_0050ca3c == 0))
    {
        DAT_004bfedc = 0xc;
    }
    iVar4 = *DAT_00e29a30;
    if (iVar4 != 0)
    {
        FUN_00431a50(iVar4, 2, 0xfffffffc, 0x10, 3);
        mat_set_rotation_translation(local_40, local_58);
        mat_multiply_rows(local_40, 0.4f, 0.4f, 0.4f, local_40);
        FUN_00431640(iVar4, local_40);
        FUN_00431a50(iVar4, 2, 3, 0x10, 2);
    }
    vec3f_set(local_4c, 0xc2960000, 0, 0);
    local_68 = 0;
    param_1 = (int **)&DAT_00e29a34;
    local_64 = 3;
    do
    {
        iVar4 = local_68;
        fVar1 = (float)(&DAT_0050c1e8)[local_68] - (float)(&DAT_0050c200)[local_68] * _DAT_00e22a50 * -0.5;
        (&DAT_0050c1e8)[local_68] = fVar1;
        if (360.0 < fVar1)
        {
            (&DAT_0050c1e8)[local_68] = fVar1 - 360.0;
        }
        sin_cos((&DAT_0050c1e8)[local_68], &local_60, local_5c);
        iVar3 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), local_68 + 0x1c);
        *(float *)(iVar3 + 0x4c) = (float)local_68 * -50.0 - local_60 * -15.0;
        FUN_0044b270(*(undefined_32 *)(iVar3 + 0x30), iVar3 + 0x44);
        local_68 = 2;
        ppiVar6 = param_1;
        do
        {
            iVar5 = **ppiVar6;
            if (iVar5 != 0)
            {
                FUN_00431a50(iVar5, 2, 0xfffffffc, 0x10, 3);
                mat_set_rotation_translation(local_40, local_58);
                mat_multiply_rows(local_40, 0.1f, 0.1f, 0.1f, local_40);
                vec3f_copy(local_10, iVar3 + 0x44);
                FUN_00431640(iVar5, local_40);
                FUN_00431a50(iVar5, 2, 3, 0x10, 2);
            }
            ppiVar6 = ppiVar6 + 3;
            local_68 = local_68 + -1;
        } while (local_68 != 0);
        local_68 = iVar4 + 1;
        param_1 = param_1 + 1;
        local_64 = local_64 + -1;
    } while (local_64 != 0);
    if (((DAT_004d6b48 != 0) || (DAT_004d6b44 != 0))
        && ((0 < DAT_0050c040 && (iVar4 = FUN_00440990(&DAT_00e35a60, &DAT_004c11f4), iVar4 != 0))))
    {
        _DAT_0050c0d8 = 0.0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043d4e0(void)

{
    undefined_8 local_40[64];

    if (DAT_004c4000 != 0)
    {
        DAT_004c4000 = 0;
        _DAT_0050c214 = 12.0;
        DAT_0050c1d0 = 0;
        vec3f_set(&DAT_0050c2d0, 0, 0x44960000, 50.0f);
        vec3f_set(&DAT_0050c2dc, 0, 0, 0);
        FUN_0044afb0(DAT_00e299d0, &DAT_00e2af90);
        _DAT_00e2af98 = 0xc2c20000;
        vec3f_copy(&DAT_00e298f0, &DAT_00e2af90);
        _DAT_00e298f4 = _DAT_00e298f4 - -500.0;
        FUN_00426c80(0xa1, 7, 0.25f, 0.8f, 0);
    }
    if ((_DAT_0050c214 <= 10.0) && (DAT_0050c1d0 == 0))
    {
        DAT_0050c1d0 = 1;
        vec3f_copy(&DAT_00e2b410, &DAT_00e2af90);
        vec3f_set(&DAT_00e2b470, 0, 0, 0);
        vec3f_copy(&DAT_00e2aeb0, &DAT_00e298f0);
        vec3f_copy(&DAT_00e29b90, &DAT_00e298f0);
        _DAT_00e29b90 = _DAT_00e29b90 - -500.0;
        DAT_0050c930 = 1;
    }
    _DAT_0050c2d4 = _DAT_0050c2d4 - _DAT_00e22a50 * 100.0;
    if (DAT_00e2993c != 0)
    {
        mat_set_rotation_translation(local_40, &DAT_0050c2d0);
        FUN_004337e0(DAT_00e2993c, local_40, 0, 0x428c0000, 0x428c0000, 0x428c0000, 0xc31d0000, 1, 0, 0);
        if (*(int *)(DAT_00e2993c + 0xec) != 0)
        {
            FUN_00431a50(*(int *)(DAT_00e2993c + 0xec), 2, 3, 0x10, 2);
        }
    }
    if (DAT_0050c944 != -1)
    {
        if ((_DAT_0050c214 < 0.0) || (_DAT_0050c214 = _DAT_0050c214 - _DAT_00e22a50, 0.0 < _DAT_0050c214))
        {
            if ((DAT_004d6b48 == 0) && (DAT_004d6b44 == 0))
            {
                return;
            }
            _DAT_0050c214 = 0.0;
        }
        DAT_0050c944 = -1;
        DAT_004bfedc = 5;
        return;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address
// 0043d720
// PartHealthFunction
// runs once after a race is completed in tournament mode
void FUN_0043d720(void)

{
    byte bVar1;
    char cVar2;
    int iVar3;
    int iVar4;
    byte bVar5;
    uint uVar6;
    int iVar7;
    uint local_c;
    uint local_8;

    iVar7 = 0;
    iVar3 = __ftol();
    MIN(iVar3, 0x5fa) // 1530
    iVar4 = 0;
    do
    {
        if ((&DAT_00e35aa1)[iVar4] != '\0')
        {
            iVar7 = iVar7 + 1; // number of upgrades
        }
        iVar4 = iVar4 + 1;
    } while (iVar4 < 7);

    if (iVar7 != 0)
    {
        rand();
        cVar2 = __ftol();
        bVar5 = 0x19 - cVar2;
        uVar6 = (uint)bVar5;
        if ((int)uVar6 <= iVar3)
        {
            do
            {
                rand();
                iVar7 = __ftol();
                if ((&DAT_00e35aa1)[iVar7] != '\0')
                {
                    if (bVar5 < (byte)(&DAT_00e35aa8)[iVar7])
                    {
                        (&DAT_00e35aa8)[iVar7] = (&DAT_00e35aa8)[iVar7] - bVar5;
                    }
                    else
                    {
                        (&DAT_00e35aa8)[iVar7] = 0;
                    }
                }
                iVar3 = iVar3 - uVar6;
                rand();
                cVar2 = __ftol();
                bVar5 = 0x19 - cVar2;
                uVar6 = (uint)bVar5;
            } while ((int)uVar6 <= iVar3);
        }
        iVar3 = 0;
        do
        {
            if ((&DAT_00e35aa1)[iVar3] == '\0')
            {
                (&DAT_00e35aa8)[iVar3] = 0xff;
            }
            iVar3 = iVar3 + 1;
        } while (iVar3 < 7);
        iVar7 = 0;
        iVar3 = 0;
        do
        {
            iVar7 = iVar7 + (0xff - (uint)(byte)(&DAT_00e35aa8)[iVar3]); // total part damage
            iVar3 = iVar3 + 1;
        } while (iVar3 < 7);
        uVar6 = (_DAT_00e35aa0 & 0xff) * 0xff; // droid total repair
        if (iVar7 <= (int)uVar6) // if droidTotalRepai >= totalPartsDamage
        {
            _DAT_00e35aa8 = -1; // 0xffff ffff eax
            _DAT_00e35aac = 0xffff; // ax
            DAT_00e35aae = 0xff; // a1
            FUN_0044e560();
            return;
        }
        rand();
        cVar2 = __ftol();
        bVar5 = 0x19 - cVar2; // [27, 77]
        local_c = (uint)bVar5;
        local_8 = uVar6;
        if (local_c <= uVar6)
        {
            do
            {
                rand();
                iVar3 = __ftol();
                bVar1 = (&DAT_00e35aa8)[iVar3];
                if (bVar1 != 0xff)
                {
                    if ((int)(0xff - (uint)bVar1) < (int)local_c)
                    {
                        (&DAT_00e35aa8)[iVar3] = 0xff;
                        local_c = (uint)(byte)(bVar5 + bVar1 + 1);
                    }
                    else
                    {
                        (&DAT_00e35aa8)[iVar3] = bVar5 + bVar1;
                    }
                    uVar6 = local_8 - local_c; // droidTotalRepair - randomRepair
                    local_8 = uVar6;
                }
                rand();
                cVar2 = __ftol();
                bVar5 = 0x19 - cVar2;
                local_c = (uint)bVar5;
            } while ((int)local_c <= (int)uVar6);
        }
        FUN_0044e560();
    }
    return;
}

void FUN_0043d970(void)

{
    int iVar1;

    iVar1 = 0;
    do
    {
        FUN_0043ea00(0, iVar1);
        iVar1 = iVar1 + 1;
    } while (iVar1 < 0x14);
    iVar1 = 0;
    do
    {
        FUN_0043ea00(1, iVar1);
        iVar1 = iVar1 + 1;
    } while (iVar1 < 4);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043d9a0(void)

{
    if (DAT_0050c568 == 0)
    {
        FUN_0044fce0(s_All_Pods__tracks_unlocked____004c11f8, 3.0f);
        if (DAT_0050c568 == 0)
        {
            DAT_0050c568 = 1;
            DAT_00e364a8 = DAT_00e364a8 | 0x20;
            DAT_00e364af = 0xf;
            DAT_00e364b0 = 0xfffffff;
            DAT_00e35a94 = 0xfffffff;
            _DAT_00e364e8 = 0xfffffff;
            DAT_00e364ac = 0xff;
            DAT_00e364ad = 0xff;
            DAT_00e364ae = 0xff;
            FUN_0044e560();
            return;
        }
    }
    return;
}

void FUN_0043da10(int param_1)

{
    uint uVar1;
    int iVar2;
    undefined_8_1 *puVar3;
    int iVar4;

    iVar2 = DAT_004d5e00;
    DAT_00e295cc = 0;
    puVar3 = &DAT_00e99244;
    uVar1 = (&DAT_00e35a94)[*(char *)(param_1 + 0x6f) * 0x14];
    iVar4 = 0;
    do
    {
        if ((((uVar1 | 0x22e01) & 1 << ((byte)iVar4 & 0x1f)) != 0) || (iVar2 != 0))
        {
            *(int *)(puVar3 + -4) = iVar4;
            *puVar3 = 0xff;
            puVar3[1] = 0;
            DAT_00e295cc = DAT_00e295cc + 1;
            puVar3 = puVar3 + 8;
        }
        iVar4 = iVar4 + 1;
    } while (iVar4 < 0x17);
    if (DAT_00e295cc < 0x17)
    {
        puVar3 = &DAT_00e99244 + DAT_00e295cc * 8;
        do
        {
            *(undefined_32 *)(puVar3 + -4) = -1;
            *puVar3 = 0xff;
            puVar3[1] = 0;
            puVar3 = puVar3 + 8;
        } while ((int)puVar3 < 0xe992fc);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0043da90(int param_1, int param_2, int param_3)

{
    bool bVar1;
    bool bVar2;

    bVar2 = true;
    if (param_2 != 0)
    {
        if (*(int *)(param_1 + 8) == 7)
        {
            return 0;
        }
        if (*(int *)(param_1 + 8) == 4)
        {
            return 0;
        }
        _DAT_00e99358 = -300.0;
        DAT_0050c468 = 1;
        DAT_004bfedc = -1;
        bVar2 = false;
    }
    if ((DAT_0050c468 != 0) && (bVar2))
    {
        _DAT_00e99358 = _DAT_00e99358 - (float)(int)DAT_0050c468 * _DAT_00e22a50 * -300.0 * 4.0;
        bVar2 = _DAT_00e99358 <= -300.0;
        if (bVar2)
        {
            _DAT_00e99358 = -300.0;
        }
        bVar1 = (float)param_3 <= _DAT_00e99358;
        if (bVar1)
        {
            _DAT_00e99358 = (float)param_3;
        }
        if ((((bVar1 || bVar2) && (DAT_0050c468 = 0, DAT_004bfedc != -1)) && (DAT_0050c944 == 0))
            && (DAT_0050c930 == 0))
        {
            FUN_00454d40(param_1, DAT_004bfedc);
            return 1;
        }
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043dba0(int param_1)

{
    float fVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    float *pfVar5;
    undefined_32 *puVar6;
    int iVar7;
    bool bVar8;
    float10 fVar9;
    undefined_8 *puVar10;
    float local_1c;
    float local_18;
    float local_14;
    int local_10;
    undefined_8 local_c[12];

    local_18 = 0.2;
    if ((_DAT_0050c93c < 0.0) && (_DAT_0050c93c = _DAT_0050c93c + _DAT_00e22a50, 0.0 < _DAT_0050c93c))
    {
        _DAT_0050c93c = 0.0;
    }
    if ((0.0 < _DAT_0050c93c) && (_DAT_0050c93c = _DAT_0050c93c - _DAT_00e22a50, _DAT_0050c93c < 0.0))
    {
        _DAT_0050c93c = 0.0;
    }
    if ((0.0 < _DAT_0050c938) && (_DAT_0050c938 = _DAT_0050c938 - _DAT_00e22a50, _DAT_0050c938 < 0.0))
    {
        _DAT_0050c938 = 0.0;
    }
    iVar4 = 0;
    iVar2 = DAT_00e295d0;
    iVar7 = DAT_00e295cc;
    if (0 < DAT_00e295cc)
    {
        pfVar5 = (float *)&DAT_00e2a6c4;
        do
        {
            if (*(int *)(param_1 + 0x38) == 0)
            {
                if (iVar4 != iVar2)
                {
                    fVar9 = (float10)arctan2(*pfVar5 - 12.0, -116.0 - pfVar5[1]);
                    iVar2 = DAT_00e295d0;
                    iVar7 = DAT_00e295cc;
                    pfVar5[9] = (float)(fVar9 - (float10)90.0);
                }
                if (pfVar5[2] == 106.0)
                {
                    sin_cos((1.5 - _DAT_0050c938) * 360.0, &local_14, &local_1c);
                    iVar2 = DAT_00e295d0;
                    iVar7 = DAT_00e295cc;
                    pfVar5[10] = local_1c * _DAT_0050c93c * 45.0;
                }
            }
            iVar4 = iVar4 + 1;
            pfVar5 = pfVar5 + 0xe;
        } while (iVar4 < iVar7);
    }
    if (DAT_0050c474 == 0)
        goto LAB_0043e101;
    iVar4 = 0;
    if (*(int *)(param_1 + 0x38) == 0)
    {
        if (0 < iVar7)
        {
            puVar6 = &DAT_00e2a6e4;
            do
            {
                local_10 = ((iVar2 - iVar4) + 9) * 10;
                sin_cos((float)local_10, &local_14, &local_1c);
                pfVar5 = (float *)(puVar6 + -2);
                bVar8 = iVar4 != DAT_00e295d0;
                *pfVar5 = 12.0 - local_1c * -256.0;
                puVar6[-1] = -116.0 - local_14 * -256.0;
                *puVar6 = 0x42d40000;
                if (bVar8)
                {
                    fVar9 = (float10)arctan2((float)puVar6[-8] - 12.0, -116.0 - (float)puVar6[-7]);
                    puVar6[1] = (float)(fVar9 - (float10)90.0);
                }
                sin_cos((1.5 - _DAT_0050c938) * 360.0, &local_14, &local_1c);
                bVar8 = iVar4 == DAT_00e295d0;
                puVar6[2] = local_1c * _DAT_0050c93c * 45.0;
                if (bVar8)
                {
                    if (DAT_0050c470 == 0)
                    {
                        vec3f_copy(pfVar5, &DAT_004c4558);
                        fVar1 = -116.0 - _DAT_004c455c;
                        puVar6[2] = 0;
                        fVar9 = (float10)arctan2(_DAT_004c4558 - 12.0, fVar1);
                        bVar8 = DAT_0050c954 == 0;
                        puVar6[1] = (float)(fVar9 - (float10)90.0);
                        if (bVar8)
                            goto LAB_0043df33;
                    }
                    else
                    {
                        FUN_0043e210();
                        vec3f_copy(local_c, &DAT_00e298f0);
                        vec3f_multiply_add(local_c, local_c, DAT_004c4564, &DAT_00e298c0);
                        vec3f_multiply_add(local_c, local_c, DAT_004c4568, &DAT_00e298d0);
                        vec3f_multiply_add(local_c, local_c, DAT_004c456c, &DAT_00e298e0);
                        vec3f_copy(pfVar5, local_c);
                        pfVar5 = (float *)(puVar6 + -8);
                    }
                    vec3f_multiply2_add(pfVar5, 0.2f, pfVar5, 0.8f, &DAT_00e298f0);
                }
            LAB_0043df33:
                vec3f_copy(puVar6 + -5, puVar6 + -8);
                iVar4 = iVar4 + 1;
                puVar6 = puVar6 + 0xe;
                iVar2 = DAT_00e295d0;
                iVar7 = DAT_00e295cc;
            } while (iVar4 < DAT_00e295cc);
        }
    }
    else if (*(int *)(param_1 + 0x38) == 1)
    {
        DAT_00e295d0 = (int)(char)(&DAT_00e29860)[(*(int *)(param_1 + 0x34) + -4) * 3];
        if ((DAT_00e295d0 < 0) || (*(int *)(param_1 + 0x34) + -4 < 0))
        {
            DAT_0050c474 = 0;
            return;
        }
        if (DAT_0050c470 == 0)
        {
            vec3f_copy(&DAT_00e2a6dc + DAT_00e295d0 * 0xe, &DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20);
            if (DAT_0050c954 != 0)
            {
                puVar6 = &DAT_00e2a6dc + DAT_00e295d0 * 0xe;
                goto LAB_0043e09d;
            }
        }
        else
        {
            FUN_0043e210();
            vec3f_copy(local_c, &DAT_00e298f0);
            vec3f_multiply_add(local_c, local_c, DAT_004c4564, &DAT_00e298c0);
            vec3f_multiply_add(local_c, local_c, DAT_004c4568, &DAT_00e298d0);
            vec3f_multiply_add(local_c, local_c, DAT_004c456c, &DAT_00e298e0);
            vec3f_copy(&DAT_00e2a6dc + DAT_00e295d0 * 0xe, local_c);
            puVar6 = &DAT_00e2a6c4 + DAT_00e295d0 * 0xe;
        LAB_0043e09d:
            vec3f_multiply2_add(puVar6, 0.2f, puVar6, 0.8f, &DAT_00e298f0);
        }
        vec3f_copy(&DAT_00e2a6d0 + DAT_00e295d0 * 0xe, &DAT_00e2a6c4 + DAT_00e295d0 * 0xe);
        iVar2 = DAT_00e295d0;
        iVar7 = DAT_00e295cc;
    }
    DAT_0050c474 = 0;
    DAT_0050c46c = 1;
    _DAT_0050c56c = 0.0;
LAB_0043e101:
    if (DAT_0050c940 != 0)
    {
        local_18 = 0.5;
    }
    if ((DAT_0050c46c != 0) && (_DAT_0050c56c < local_18))
    {
        _DAT_0050c56c = _DAT_0050c56c + _DAT_00e22a50;
        if (local_18 <= _DAT_0050c56c)
        {
            _DAT_0050c56c = local_18;
            DAT_0050c46c = 0;
        }
        iVar4 = DAT_0050c46c;
        iVar3 = 0;
        if (0 < iVar7)
        {
            pfVar5 = (float *)&DAT_00e2a6d0;
            do
            {
                if ((*(int *)(param_1 + 0x38) != 1) || (iVar2 == iVar3))
                {
                    fVar1 = _DAT_0050c56c / local_18;
                    pfVar5[-3] = (pfVar5[3] - *pfVar5) * fVar1 + *pfVar5;
                    pfVar5[-2] = (pfVar5[4] - pfVar5[1]) * fVar1 + pfVar5[1];
                    pfVar5[-1] = (pfVar5[5] - pfVar5[2]) * fVar1 + pfVar5[2];
                }
                iVar3 = iVar3 + 1;
                pfVar5 = pfVar5 + 0xe;
            } while (iVar3 < iVar7);
        }
        if ((iVar4 == 0) && (DAT_0050c954 != 0))
        {
            DAT_0050c954 = 0;
            if (*(int *)(param_1 + 0x38) == 0)
            {
                puVar10 = &DAT_004c4558;
            }
            else
            {
                puVar10 = &DAT_00e2af90;
            }
            vec3f_copy(&DAT_00e2a6c4 + iVar2 * 0xe, puVar10);
            (&DAT_00e2a6ec)[DAT_00e295d0 * 0xe] = 0;
        }
    }
    return;
}

void FUN_0043e210(void)

{
    float10 fVar1;
    float local_20;
    float local_1c;
    float local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_8 local_c[12];

    vec3f_copy(local_c, &DAT_00e298f0);
    vec3f_sub(&local_18, &DAT_00e2af90, &DAT_00e298f0);
    rdVector_Normalize3(&local_18);
    fVar1 = (float10)arctan2(-local_18, local_14);
    local_1c = (float)fVar1;
    fVar1 = (float10)arctan(local_10);
    local_20 = (float)fVar1;
    if (local_1c < 0.0)
    {
        local_1c = local_1c - -360.0;
    }
    if (360.0 < local_1c)
    {
        local_1c = local_1c - 360.0;
    }
    if (local_20 < -90.0)
    {
        local_20 = local_20 - -180.0;
    }
    if (90.0 < local_20)
    {
        local_20 = local_20 - 180.0;
    }
    mat_set_rotation(&DAT_00e298c0, local_1c, local_20, 0);
    vec3f_copy(&DAT_00e298f0, local_c);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0043e330(int param_1)

{
    bool bVar1;
    undefined_32 uVar2;
    int iVar3;

    bVar1 = false;
    DAT_004c4008 = 0;
    if (_DAT_0050c570 < 255.0)
    {
        _DAT_0050c570 = _DAT_0050c570 - _DAT_00e22a50 * -849.9999;
    }
    else
    {
        DAT_004c02a8 = DAT_004c02a8 + -1;
        bVar1 = DAT_004c02a8 < 1;
        _DAT_0050c570 = 255.0;
    }
    if (255.0 < _DAT_0050c570)
    {
        DAT_004c02a8 = 3;
        _DAT_0050c570 = 255.0;
    }
    uVar2 = __ftol();
    sprite_set_color(0xffffff99, 0, 0, 0, uVar2);
    if (bVar1)
    {
        _DAT_0050c570 = 0.0;
        if (DAT_004bfedc != -1)
        {
            if (((DAT_004bfedc == 1) && (*(int *)(param_1 + 8) == 0x12))
                && (iVar3 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), *(undefined_32 *)(param_1 + 0x40)), iVar3 != 0))
            {
                FUN_00466ec0(iVar3, 0);
            }
            DAT_0050c944 = 1;
            DAT_0050c940 = 0;
            FUN_00426910(1);
            thunk_FUN_00449e30();
            FUN_0044e560();
            FUN_00454d40(param_1, DAT_004bfedc);
            return 0;
        }
        sprite_enable_display(0xffffff99, 0);
        DAT_004c4008 = 1;
        DAT_0050c944 = 0;
        FUN_00426910(1);
        thunk_FUN_00449e30();
        FUN_0044e560();
        return 1;
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0043e490(void)

{
    bool bVar1;
    undefined_32 uVar2;

    bVar1 = false;
    if ((_DAT_004c02ac == 255.0) || (0 < DAT_004c02b4))
    {
        sprite_set_color(0xffffff99, 0, 0, 0, -1);
        DAT_004c02b4 = DAT_004c02b4 + -1;
        if (0 < DAT_004c02b4)
        {
            return 0;
        }
    }
    if (0.0 < _DAT_004c02ac)
    {
        _DAT_004c02ac = _DAT_004c02ac - _DAT_00e22a50 * 849.9999;
    }
    else
    {
        DAT_004c02b0 = DAT_004c02b0 + -1;
        bVar1 = DAT_004c02b0 < 1;
        _DAT_004c02ac = 0.0;
    }
    if (_DAT_004c02ac < 0.0)
    {
        DAT_004c02b0 = 3;
        _DAT_004c02ac = 0.0;
    }
    uVar2 = __ftol();
    sprite_set_color(0xffffff99, 0, 0, 0, uVar2);
    if (!bVar1)
    {
        return 0;
    }
    sprite_enable_display(0xffffff99, 0);
    _DAT_004c02ac = 255.0;
    DAT_004c02b4 = 3;
    DAT_004c4008 = 1;
    DAT_0050c944 = 0;
    return 1;
}

void FUN_0043e5b0(float param_1)

{
    float fVar1;
    float *pfVar2;

    pfVar2 = (float *)&DAT_004c4018;
    do
    {
        switch (*(undefined_16 *)(pfVar2 + 4))
        {
        case 0:
            fVar1 = param_1 - 60.0;
            break;
        case 1:
            *pfVar2 = param_1 - 157.0;
            pfVar2[3] = param_1 - 157.0;
            goto switchD_0043e5bf_caseD_3;
        case 2:
            fVar1 = param_1 - 157.0;
            break;
        default:
            goto switchD_0043e5bf_caseD_3;
        case 0xffff:
        case 4:
            fVar1 = param_1 - 145.0;
        }
        *pfVar2 = fVar1;
    switchD_0043e5bf_caseD_3:
        pfVar2 = pfVar2 + 8;
        if (0x4c4517 < (int)pfVar2)
        {
            return;
        }
    } while (true);
}

void FUN_0043e620(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    undefined_32 uVar5;
    undefined_8 local_c[12];

    vec3f_set(local_c, 0, 0, 0);
    FUN_00468800(0x1c, 0x1b, local_c, local_c, 0, 0);
    FUN_00468fe0(4, 0x43);
    FUN_00468fe0(0x16, 0x2a);
    FUN_00468fe0(0x17, 0x2e);
    iVar3 = 0x38;
    if (*(char *)(param_1 + 0x6c) == '\0')
    {
        *(undefined_32 *)(param_1 + 0x40) = 0x38;
    }
    else
    {
        *(undefined_32 *)(param_1 + 0x40) = 0x39;
    }
    piVar4 = &DAT_00e299e0;
    iVar2 = 3;
    do
    {
        iVar1 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), iVar3);
        if (iVar1 != 0)
        {
            if ((iVar3 == *(int *)(param_1 + 0x40)) || (*(int *)(iVar1 + 8) == 1))
            {
                if (*piVar4 != 0)
                {
                    uVar5 = 0;
                    goto LAB_0043e6cb;
                }
            }
            else if (*piVar4 != 0)
            {
                uVar5 = 0x11;
            LAB_0043e6cb:
                FUN_00468fe0(iVar3, uVar5);
            }
        }
        iVar3 = iVar3 + 1;
        piVar4 = piVar4 + 1;
        iVar2 = iVar2 + -1;
        if (iVar2 == 0)
        {
            *(undefined_32 *)(param_1 + 0x40) = -1;
            return;
        }
    } while (true);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043e6f0(void)

{
    int iVar1;
    int iVar2;
    undefined_8 *puVar3;
    float fVar4;
    float fVar5;
    undefined_32 uVar6;

    iVar2 = DAT_00e2993c;
    iVar1 = FUN_00482000(*(undefined_32 *)(DAT_00e2993c + 0x100), &DAT_00e99340, 0);
    if (iVar1 == 0)
    {
        vec3f_set(&DAT_00e99340, 0, 0, 0);
        uVar6 = 0xc1200000;
        fVar5 = -10.0;
        fVar4 = -10.0;
        puVar3 = &DAT_00e9934c;
    }
    else
    {
        fVar5 = (_DAT_00e99344 + _DAT_00e99350) * 0.5;
        fVar4 = _DAT_00e9934c - -100.0;
        uVar6 = 0xc31d0000;
        puVar3 = &DAT_004c43dc;
    }
    vec3f_set(puVar3, fVar4, fVar5, uVar6);
    iVar1 = FUN_00482000(*(undefined_32 *)(iVar2 + 0xf8), &DAT_00e99320, 0);
    if (iVar1 == 0)
    {
        vec3f_copy(&DAT_00e99320, &DAT_00e99340);
        vec3f_copy(&DAT_00e9932c, &DAT_00e9934c);
    }
    iVar2 = FUN_00482000(*(undefined_32 *)(iVar2 + 0xfc), &DAT_00e99300, 0);
    if (iVar2 == 0)
    {
        vec3f_copy(&DAT_00e99300, &DAT_00e99340);
        vec3f_copy(&DAT_00e9930c, &DAT_00e9934c);
        _DAT_00e99310 = (_DAT_00e99344 + _DAT_00e99350) * 0.5;
        _DAT_00e99344 = (_DAT_00e99344 - _DAT_00e99350 * -5.0) * 0.1666667;
        _DAT_00e99330 = _DAT_00e99310;
    }
    return;
}

void FUN_0043e840(int param_1)

{
    char cVar1;
    int iVar2;
    char cVar3;
    int iVar4;
    char *pcVar5;
    undefined_8_1 *puVar6;
    char *pcVar7;
    undefined_8_1 *puVar8;
    int iVar9;
    int local_4;

    cVar3 = '\0';
    iVar9 = 0;
    DAT_00e295cc = 0;
    iVar4 = 0;
    do
    {
        iVar2 = 0;
        if (0 < (char)(&DAT_004bfee0)[iVar4])
        {
            do
            {
                if (((uint)(byte)(&DAT_00e35a85)[iVar4] & 1 << ((byte)iVar2 & 0x1f)) != 0)
                {
                    cVar3 = cVar3 + '\x01';
                }
                iVar2 = iVar2 + 1;
            } while (iVar2 < (char)(&DAT_004bfee0)[iVar4]);
        }
        iVar4 = iVar4 + 1;
    } while (iVar4 < 4);
    iVar4 = 0;
    puVar8 = &DAT_00e2b221;
    do
    {
        puVar6 = puVar8 + 0x38;
        puVar8[-1] = (char)iVar4 * '\x06' + (&DAT_00e35aa1)[iVar4];
        *puVar8 = (&DAT_00e35aa8)[iVar4];
        iVar4 = iVar4 + 1;
        puVar8 = puVar6;
    } while ((int)puVar6 < 0xe2b3a9);
    if (*(int *)(param_1 + 8) == 7)
    {
        pcVar7 = &DAT_004c1cba;
        cVar1 = '\0';
        local_4 = 0;
        pcVar5 = &DAT_00e2b220;
        do
        {
            iVar4 = 0;
            do
            {
                if (((int)*pcVar5 != iVar4 + local_4) && ((int)*pcVar7 <= cVar3 + -3))
                {
                    iVar2 = iVar9 * 0x38;
                    iVar9 = iVar9 + 1;
                    (&DAT_00e2a6c0)[iVar2] = cVar1 * '\x06' + (char)iVar4;
                    (&DAT_00e2a6c1)[iVar2] = 0xff;
                }
                iVar4 = iVar4 + 1;
                pcVar7 = pcVar7 + 0x10;
            } while (iVar4 < 6);
            pcVar5 = pcVar5 + 0x38;
            cVar1 = cVar1 + '\x01';
            local_4 = local_4 + 6;
            DAT_00e295cc = iVar9;
        } while ((int)pcVar5 < 0xe2b3a8);
    }
    else if (*(int *)(param_1 + 8) == 4)
    {
        cVar3 = '\0';
        puVar8 = &DAT_00e29862;
        do
        {
            iVar4 = iVar9 * 0x38;
            iVar9 = iVar9 + 1;
            puVar6 = puVar8 + 3;
            (&DAT_00e2a6c0)[iVar4] = cVar3 * '\x06' + puVar8[-1];
            cVar3 = cVar3 + '\x01';
            (&DAT_00e2a6c1)[iVar4] = *puVar8;
            puVar8 = puVar6;
            DAT_00e295cc = iVar9;
        } while ((int)puVar6 < 0xe29877);
    }
    iVar4 = 0;
    if (0 < iVar9)
    {
        pcVar5 = &DAT_00e2a6c0;
        do
        {
            FUN_00454bc0(*(undefined_32 *)(&DAT_004c1cc0 + *pcVar5 * 0x10), -1, iVar4 + 0x62, 0);
            iVar4 = iVar4 + 1;
            pcVar5 = pcVar5 + 0x38;
        } while (iVar4 < DAT_00e295cc);
    }
    iVar4 = 0;
    pcVar5 = &DAT_00e2b220;
    do
    {
        FUN_00454bc0(*(undefined_32 *)(&DAT_004c1cc0 + *pcVar5 * 0x10), -1, iVar4 + 0x8e, 0);
        pcVar5 = pcVar5 + 0x38;
        iVar4 = iVar4 + 1;
    } while ((int)pcVar5 < 0xe2b3a8);
    return;
}

void FUN_0043ea00(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;

    if (param_1 == 0)
    {
        iVar1 = param_2 * 0x50;
        (&DAT_00e35a80)[iVar1] = 0;
        (&DAT_00e35a98)[param_2 * 0x14] = 400;
        (&DAT_00e35aa0)[iVar1] = 1;
        (&DAT_00e35a83)[iVar1] = 0;
        (&DAT_00e35a94)[param_2 * 0x14] = 0x22e01;
        (&DAT_00e35a9c)[param_2 * 0x14] = 0;
        (&DAT_00e35a81)[iVar1] = 1;
        (&DAT_00e35a84)[iVar1] = 0;
        (&DAT_00e35a82)[iVar1] = (char)param_2;
        *(undefined_32 *)(&DAT_00e35a8a + iVar1) = 0;
        *(undefined_32 *)(&DAT_00e35a8e + iVar1) = 0;
        (&DAT_00e35a85)[iVar1] = 1;
        (&DAT_00e35a86)[iVar1] = 1;
        (&DAT_00e35a87)[iVar1] = 1;
        (&DAT_00e35a88)[iVar1] = 0;
        iVar2 = 0;
        do
        {
            (&DAT_00e35aa1)[iVar1 + iVar2] = 0;
            (&DAT_00e35aa8)[iVar1 + iVar2] = 0xff;
            iVar2 = iVar2 + 1;
        } while (iVar2 < 7);
        puVar3 = (undefined_32 *)(&DAT_00e35a60 + iVar1);
        MEMSET(iVar2, puVar3, 0, 8)
    }
    else if (param_1 == 1)
    {
        iVar2 = param_2 * 0x50;
        (&DAT_00e364d4)[iVar2] = 0;
        (&DAT_00e364d6)[iVar2] = (char)param_2;
        *(undefined_32 *)(&DAT_00e364ec + iVar2) = 400;
        (&DAT_00e364f4)[iVar2] = 1;
        (&DAT_00e364d7)[iVar2] = 0;
        *(undefined_32 *)(&DAT_00e364e8 + iVar2) = 0x22e01;
        (&DAT_00e364f0)[param_2 * 0x14] = 0;
        (&DAT_00e364d5)[iVar2] = 1;
        iVar1 = 0;
        (&DAT_00e364d8)[iVar2] = 0;
        *(undefined_32 *)(&DAT_00e364de + iVar2) = 0;
        *(undefined_32 *)(&DAT_00e364e2 + iVar2) = 0;
        (&DAT_00e364d9)[iVar2] = 1;
        (&DAT_00e364da)[iVar2] = 1;
        (&DAT_00e364db)[iVar2] = 1;
        (&DAT_00e364dc)[iVar2] = 0;
        do
        {
            (&DAT_00e364f5)[iVar2 + iVar1] = 0;
            (&DAT_00e364fc)[iVar2 + iVar1] = 0xff;
            iVar1 = iVar1 + 1;
        } while (iVar1 < 7);
        puVar3 = &DAT_00e364b4 + param_2 * 0x14;
        MEMSET(iVar1, puVar3, 0, 8)
        (&DAT_00e36503)[iVar2] = 0;
        return;
    }
    return;
}

void FUN_0043eb50(void)

{
    int iVar1;
    int iVar2;

    iVar1 = __ftol();
    DAT_00e9935c = 1 - iVar1;
    iVar2 = __ftol();
    DAT_00e99220 = 1 - iVar2;
    DAT_00e99400 = (ushort)((1 - iVar1) + DAT_00e35a98 < 1 - iVar2);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043ec10(undefined_32 param_1)

{
    int iVar1;
    char cVar2;
    int iVar3;
    undefined_32 uVar4;
    int iVar5;
    uint *puVar6;
    undefined_8 local_40[32];
    undefined_8 local_20[32];

    if (((DAT_0050c470 != 0) || (DAT_0050c954 != 0)) && (DAT_0050c934 != 0))
    {
        iVar3 = __ftol();
        sprite_set_color(0x7b, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
        sprite_enable_display(0x7b, 1);
        sprite_set_pos(0x7b, 0x1e, iVar3);
        sprite_set_color(0x78, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(0x78, 1);
        sprite_set_pos(0x78, 0x22, iVar3 + 4);
        uVar4 = lookup_translation(
            (&PTR_s__SCREENTEXT_280___R_20_Repulsorg_004c1cc4)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 4]);
        uVar4 = lookup_translation(s__f4_c_s_s_004c0d24, uVar4);
        _sprintf(local_40, uVar4);
        create_text_entry_0(0x56, iVar3 + 6, 0x32, -1, -1, 0xfffffffe, local_40);
        sprite_set_color(0x80, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(0x80, 1);
        sprite_set_pos(0x80, 0x21, iVar3 + 0x13);
        FUN_004557e0(param_1, 0x88, (short)iVar3 + 0x11,
                     (float)(uint)(byte)(&DAT_00e2a6c1)[DAT_00e295d0 * 0x38] * 0.003921568, 0xc0000000, 10.0f,
                     0x42240000);
        sprite_set_color(0x79, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(0x79, 1);
        sprite_set_pos(0x79, 0x2a, iVar3 + 0x10);
        uVar4 = lookup_translation(s__SCREENTEXT_246__sPrice_004c12c8);
        create_text_entry_0(0x2c, iVar3 + 0x12, 0x32, -1, -1, 0xfffffffe, uVar4);
        uVar4 = lookup_translation(s__r_s_d_004c12c0, DAT_00e99220);
        _sprintf(local_40, uVar4);
        create_text_entry_0(0x87, iVar3 + 0x12, 0x32, -1, -1, 0xfffffffe, local_40);
        sprite_set_color(0x7a, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(0x7a, 1);
        sprite_set_pos(0x7a, 0x29, iVar3 + 0x1b);
        iVar3 = __ftol();
        sprite_set_color(0x7f, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
        sprite_enable_display(0x7f, 1);
        sprite_set_pos(0x7f, 0xae, iVar3);
        sprite_set_color(0x7d, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(0x7d, 1);
        sprite_set_pos(0x7d, 0xb3, iVar3 + 5);
        uVar4 = lookup_translation(s__SCREENTEXT_248__sReplace_004c12a4);
        create_text_entry_0(0xb6, iVar3 + 6, 0x32, -1, -1, 0xfffffffe, uVar4);
        sprite_set_color(0x81, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(0x81, 1);
        sprite_set_pos(0x81, 0xb2, iVar3 + 0x14);
        sprite_set_color(0x7c, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(0x7c, 1);
        sprite_set_pos(0x7c, 0xbe, iVar3 + 0x17);
        cVar2 = (&DAT_004c1cbb)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10];
        uVar4 = lookup_translation(
            (&PTR_s__SCREENTEXT_280___R_20_Repulsorg_004c1cc4)[(char)(&DAT_00e2b220)[cVar2 * 0x38] * 4]);
        uVar4 = lookup_translation(s__f4_c_s_s_004c0d24, uVar4);
        _sprintf(local_40, uVar4);
        create_text_entry_0(0xee, iVar3 + 0x1a, 0x32, -1, -1, 0xfffffffe, local_40);
        sprite_set_color(0x7e, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(0x7e, 1);
        sprite_set_pos(0x7e, 0xd6, iVar3 + 0x28);
        FUN_004557e0(param_1, 0xff, (short)iVar3 + 0x30, (float)(uint)(byte)(&DAT_00e35aa8)[cVar2] * 0.003921568,
                     0xc0000000, 0x40e00000, 0x41d00000);
        iVar5 = 0;
        do
        {
            iVar1 = iVar5 + 0x76;
            sprite_set_color(iVar1, 0x32, -1, -1, 0xfffffffe);
            sprite_enable_display(iVar1, 1);
            sprite_set_pos(iVar1, 0xc2, iVar3 + iVar5 * 0xb + 0x5d);
            iVar1 = iVar5 + 0x74;
            sprite_set_color(iVar1, 0x32, -1, -1, 0xfffffffe);
            sprite_enable_display(iVar1, 1);
            sprite_set_pos(iVar1, 0xdb, iVar3 + iVar5 * 0xd + 0x7c);
            iVar5 = iVar5 + 1;
        } while (iVar5 < 2);
        uVar4 = lookup_translation(s__SCREENTEXT_250__sTrade_004c128c);
        _sprintf(local_40, s__f4_s_004b9484, uVar4);
        create_text_entry_0(0xc4, iVar3 + 0x60, 0x32, -1, -1, 0xfffffffe, local_40);
        uVar4 = lookup_translation(s__SCREENTEXT_251__sCost_004c1274);
        _sprintf(local_40, s__f4_s_004b9484, uVar4);
        create_text_entry_0(0xc4, iVar3 + 0x6b, 0x32, -1, -1, 0xfffffffe, local_40);
        uVar4 = lookup_translation(s__r_s_d_004c12c0, DAT_00e9935c);
        _sprintf(local_40, uVar4);
        _sprintf(local_20, s__f4_s_004b9484, local_40);
        create_text_entry_0(0x114, iVar3 + 0x60, 0x32, -1, -1, 0xfffffffe, local_20);
        uVar4 = lookup_translation(s__r_s_d_004c12c0, DAT_00e99220 - DAT_00e9935c);
        _sprintf(local_40, uVar4);
        _sprintf(local_20, s__f4_s_004b9484, local_40);
        create_text_entry_0(0x114, iVar3 + 0x6b, 0x32, -1, -1, 0xfffffffe, local_20);
        if (DAT_00e35a98 < DAT_00e99220 - DAT_00e9935c)
        {
            DAT_00e99400 = 1;
        }
        iVar5 = (short)iVar3 + 0x7e;
        uVar4 = lookup_translation(s__SCREENTEXT_254__c_sBUY_004c125c);
        FUN_0043fce0(param_1, 0xfc, iVar5, 0xd, (int)(short)DAT_00e99400, 0, uVar4);
        uVar4 = lookup_translation(s__SCREENTEXT_257__c_sCANCEL_004c1240);
        FUN_0043fce0(param_1, 0xfc, iVar5, 0xd, (int)(short)DAT_00e99400, 1, uVar4);
        uVar4 = lookup_translation(s__SCREENTEXT_599__c_sTruguts_004c1224);
        create_text_entry_0(0xfe, iVar3 + 0xa5, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe, uVar4);
        FUN_00457140(0, 5.0f, (_DAT_00e99358 - 6.0) - 20.5, 1.0f);
        uVar4 = lookup_translation(s__r_sX__d_004c1218, DAT_00e35a98);
        _sprintf(local_40, uVar4);
        create_text_entry_0(0x122, iVar3 + 0xb4, 0x32, -1, -1, 0xfffffffe, local_40);
        if (DAT_00e35a98 < DAT_00e99220 - DAT_00e9935c)
        {
            create_text_entry_0(0x122, iVar3 + 0xb4, -1, 0, 0, 0xfffffffe, local_40);
        }
        puVar6 = &DAT_0050c918;
        iVar3 = DAT_00e99220;
        do
        {
            if ((DAT_0050c470 != 0) && ((*puVar6 & 0xc000) != 0))
            {
                if (DAT_00e35a98 < iVar3 - DAT_00e9935c)
                {
                    uVar4 = 0x4b;
                }
                else
                {
                    uVar4 = 0x58;
                    DAT_00e99400 = (ushort)(DAT_00e99400 == 0);
                }
                FUN_00440550(uVar4);
                iVar3 = DAT_00e99220;
            }
            puVar6 = puVar6 + 1;
        } while ((int)puVar6 < 0x50c91c);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// shop related
void FUN_0043f380(int param_1)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    uint *puVar4;
    int iVar5;
    undefined_8 local_40[32];
    undefined_8 local_20[32];

    iVar2 = __ftol();
    sprite_set_color(0x7f, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
    sprite_enable_display(0x7f, 1);
    sprite_set_pos(0x7f, 0xae, iVar2);
    sprite_set_color(0x81, 0x32, -1, -1, 0xfffffffe);
    sprite_enable_display(0x81, 1);
    sprite_set_pos(0x81, 0xb2, iVar2 + 0x14);
    sprite_set_color(0x7c, 0x32, -1, -1, 0xfffffffe);
    sprite_enable_display(0x7c, 1);
    sprite_set_pos(0x7c, 0xbe, iVar2 + 0x17);
    uVar3 = lookup_translation(s__SCREENTEXT_589__f4_sBuy_Pit_Dro_004c1374);
    create_text_entry_0(0xc1, iVar2 + 0x1a, 0x32, -1, -1, 0xfffffffe, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_590__f4_c_sBuy_more_p_004c1344);
    create_text_entry_0(99, iVar2 + 0x1e, 0x32, -1, -1, -1, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_591__f4_c_smake_fast_004c1314);
    create_text_entry_0(99, iVar2 + 0x26, 0x32, -1, -1, -1, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_592__f4_c_syour_dama_004c12e0);
    create_text_entry_0(99, iVar2 + 0x2e, 0x32, -1, -1, -1, uVar3);
    sprite_set_color(0x76, 0x32, -1, -1, 0xfffffffe);
    sprite_enable_display(0x76, 1);
    sprite_set_pos(0x76, 0xc2, iVar2 + 0x68);
    uVar3 = lookup_translation(s__r_s_d_004c12c0, 1000);
    _sprintf(local_40, uVar3);
    _sprintf(local_20, s__f4_s_004b9484, local_40);
    create_text_entry_0(0x114, iVar2 + 0x6b, 0x32, -1, -1, 0xfffffffe, local_20);
    iVar5 = 0;
    do
    {
        iVar1 = iVar5 + 0x74;
        sprite_set_color(iVar1, 0x32, -1, -1, 0xfffffffe);
        sprite_enable_display(iVar1, 1);
        sprite_set_pos(iVar1, 0xdb, iVar2 + iVar5 * 0xd + 0x7c);
        iVar5 = iVar5 + 1;
    } while (iVar5 < 2);
    uVar3 = lookup_translation(s__SCREENTEXT_251__sCost_004c1274);
    _sprintf(local_40, s__f4_s_004b9484, uVar3);
    create_text_entry_0(0xc4, iVar2 + 0x6b, 0x32, -1, -1, 0xfffffffe, local_40);
    iVar5 = (short)iVar2 + 0x7e;
    uVar3 = lookup_translation(s__SCREENTEXT_254__c_sBUY_004c125c);
    FUN_0043fce0(param_1, 0xfc, iVar5, 0xd, (int)(short)DAT_00e99400, 0, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_257__c_sCANCEL_004c1240);
    FUN_0043fce0(param_1, 0xfc, iVar5, 0xd, (int)(short)DAT_00e99400, 1, uVar3);
    uVar3 = lookup_translation(s__SCREENTEXT_599__c_sTruguts_004c1224);
    create_text_entry_0(0xfe, iVar2 + 0xa5, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe, uVar3);
    if ((_DAT_00e99358 == 20.0) && (DAT_0050c930 != 1))
    {
        FUN_00457140(0, 5.0f, (_DAT_00e99358 - 6.0) - 20.5, 1.0f);
    }
    uVar3 = lookup_translation(s__r_sX__d_004c1218, DAT_00e35a98);
    _sprintf(local_40, uVar3);
    create_text_entry_0(0x122, iVar2 + 0xb4, 0x32, -1, -1, 0xfffffffe, local_40);
    if (DAT_00e35a98 < 1000)
    {
        create_text_entry_0(0x122, iVar2 + 0xb4, -1, 0, 0, 0xfffffffe, local_40);
    }
    iVar2 = 0;
    if ('\0' < *(char *)(param_1 + 0x70))
    {
        puVar4 = &DAT_0050c918;
        do
        {
            if ((*puVar4 & 0xc000) != 0)
            {
                if (DAT_00e35a98 < 1000)
                {
                    uVar3 = 0x4b;
                }
                else
                {
                    uVar3 = 0x58;
                    DAT_00e99400 = (ushort)(DAT_00e99400 == 0);
                }
                FUN_00440550(uVar3);
            }
            iVar2 = iVar2 + 1;
            puVar4 = puVar4 + 1;
        } while (iVar2 < *(char *)(param_1 + 0x70));
    }
    if (DAT_00e35a98 < 1000)
    {
        DAT_00e99400 = 1;
    }
    return;
}

void FUN_0043f8e0(int param_1, int param_2, int param_3)

{
    float fVar1;
    undefined_32 uVar2;
    int iVar3;
    float10 fVar4;
    float local_58;
    float local_54;
    float local_50;
    undefined_8 local_4c[8];
    float local_44;
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    switch (param_2)
    {
    case 0x14:
        vec3f_set(&local_58, 0, 0, 0);
        break;
    case 0x15:
        uVar2 = *(undefined_32 *)(DAT_00e2993c + 0x14);
        goto LAB_0043f96e;
    case 0x16:
        uVar2 = *(undefined_32 *)(DAT_00e2993c + 4);
        goto LAB_0043f99c;
    case 0x17:
        FUN_004316a0(*(undefined_32 *)(DAT_00e2993c + 8), local_40);
        vec3f_copy(&local_58, local_10);
        break;
    case 0x18:
        uVar2 = *(undefined_32 *)(DAT_00e2993c + 0xc);
    LAB_0043f96e:
        FUN_004316a0(uVar2, local_40);
        vec3f_copy(&local_58, local_10);
        break;
    case 0x19:
        uVar2 = *(undefined_32 *)(DAT_00e2993c + 0x10);
    LAB_0043f99c:
        FUN_004316a0(uVar2, local_40);
        vec3f_copy(&local_58, local_10);
        break;
    case 0x1a:
    case 0x1b:
    case 0x1c:
    case 0x1d:
        FUN_0044afb0(*(undefined_32 *)(&DAT_00e29968 + param_2 * 4), &local_58);
        if (local_50 == -157.0)
        {
            local_50 = local_50 - -60.0;
        }
        else
        {
            local_50 = local_50 - -30.0;
        }
        break;
    case 0x1e:
        FUN_0044afb0(DAT_00e29970, &local_58);
        local_50 = *(float *)(&DAT_004c2720 + *(char *)(param_1 + 0x73) * 0x34) * 0.6667 - 157.0;
    }
    if (param_3 != 0)
    {
        FUN_0045c010(&DAT_00e298f0, &local_58, 3, 1, 0);
        return;
    }
    iVar3 = rand(local_50 - -400.0);
    iVar3 = rand(((float)iVar3 * 4.656613e-10 * 500.0 - 250.0) + local_54);
    vec3f_set(local_4c, ((float)iVar3 * 4.656613e-10 * 500.0 - 250.0) + local_58);
    if ((0x19 < param_2) && (param_2 < 0x1f))
    {
        fVar4 = (float10)FUN_0045cf00(local_50);
        iVar3 = rand();
        fVar4 = (float10)FUN_0045cf00(((float)iVar3 * 4.656613e-10 * 150.0 - -200.0) * (float)fVar4 + local_54);
        iVar3 = rand();
        vec3f_set(local_4c, ((float)iVar3 * 4.656613e-10 * 150.0 - -200.0) * (float)fVar4 + local_58);
        if (local_50 == -97.0)
        {
            fVar1 = 30.0;
        }
        else
        {
            fVar1 = -400.0;
        }
        local_44 = local_44 - fVar1;
    }
    FUN_0045c010(local_4c, &local_58, 1, 0, 0);
    return;
}

void FUN_0043fbc0(int param_1, int param_2)

{
    undefined_8 local_18[8];
    float local_10;
    undefined_8 local_c[12];

    if (0x19 < param_2)
    {
        if (param_2 < 0x1e)
        {
            FUN_0044afb0(*(undefined_32 *)(&DAT_00e29968 + param_2 * 4), local_18);
            if (local_10 == -157.0)
            {
                local_10 = local_10 - -60.0;
            }
            else
            {
                local_10 = local_10 - -30.0;
            }
        }
        else
        {
            if (param_2 != 0x1e)
            {
                return;
            }
            FUN_0044afb0(DAT_00e29970, local_18);
            local_10 = *(float *)(&DAT_004c2720 + *(char *)(param_1 + 0x73) * 0x34) * 0.6667 - 157.0;
        }
        if (DAT_0050c930 == 1)
        {
            FUN_0045c010(&DAT_00e29b90, local_18, 1, 0, 1);
            return;
        }
        if (DAT_0050c930 == 3)
        {
            FUN_0045c010(&DAT_00e298f0, local_18, 3, 1, 1);
            return;
        }
        vec3f_sub(local_c, &DAT_00e298f0, &DAT_00e2af90);
        vec3f_copy(&DAT_00e2af90, local_18);
        vec3f_add(&DAT_00e298f0, &DAT_00e2af90, local_c);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043fce0(int param_1, undefined_32 param_2, int param_3, int param_4, float param_5, float param_6,
                  undefined_32 param_7)

{
    float fVar1;
    float fVar2;
    undefined_32 uVar3;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    fVar2 = param_6;
    fVar1 = param_5;
    local_24 = 0x43230000;
    local_20 = 0x433e0000;
    local_1c = 0x41880000;
    local_c = 0x43230000;
    local_8 = 0x433e0000;
    local_4 = 0x41880000;
    local_18 = 0;
    local_14 = 255.0f;
    local_10 = 0;
    if (param_5 == param_6)
    {
        sin_cos(_DAT_0050c8f4 * 360.0, &param_5, &param_6);
        param_5 = (param_5 - -1.0) * 0.5;
        vec3f_multiply2_add(&local_24, param_5, &local_c, 1.0 - param_5, &local_18);
    }
    if ((*(int *)(param_1 + 8) == 3) && (*(int *)(param_1 + 0x10) == 1))
    {
        if ((fVar1 == 0.0) && (fVar2 == 0.0))
        {
            uVar3 = __ftol(-1);
            uVar3 = __ftol(uVar3);
            uVar3 = __ftol(uVar3);
            sprite_set_color(0x82, uVar3);
        }
        if ((fVar1 == 1.401298e-45) && (fVar2 == 1.401298e-45))
        {
            uVar3 = __ftol(-1);
            uVar3 = __ftol(uVar3);
            uVar3 = __ftol(uVar3);
            sprite_set_color(0x83, uVar3);
        }
    }
    if (fVar1 == fVar2)
    {
        uVar3 = __ftol(-1, param_7);
        uVar3 = __ftol(uVar3);
        uVar3 = __ftol(uVar3);
        create_text_entry_0(param_2, (int)fVar2 * param_4 + param_3, uVar3);
        return;
    }
    create_text_entry_0(param_2, (int)fVar2 * param_4 + param_3, 0x32, -1, -1, -1, param_7);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0043fe90(int param_1, int param_2, int param_3)

{
    float fVar1;
    undefined_32 uVar2;

    fVar1 = 838.2;
    if (DAT_00e295c0 == 0)
    {
        fVar1 = -838.2;
    }
    _DAT_0050c57c = fVar1 * _DAT_00e22a50 + _DAT_0050c57c;
    if (254.0 < _DAT_0050c57c)
    {
        _DAT_0050c57c = 254.0;
    }
    if (_DAT_0050c57c < 0.0)
    {
        _DAT_0050c57c = 0.0;
    }
    fVar1 = 838.2;
    if (DAT_00e295c4 == 0)
    {
        fVar1 = -838.2;
    }
    _DAT_0050c580 = fVar1 * _DAT_00e22a50 + _DAT_0050c580;
    if (254.0 < _DAT_0050c580)
    {
        _DAT_0050c580 = 254.0;
    }
    if (_DAT_0050c580 < 0.0)
    {
        _DAT_0050c580 = 0.0;
    }
    sprite_enable_display(0xb2, 1);
    sprite_set_pos(0xb2, param_1 + -0x1b, param_2 + -0xb);
    sprite_set_color(0xb2, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
    sprite_enable_display(0xb1, 1);
    sprite_set_pos(0xb1, param_1 + -0x14, param_2 + -7);
    uVar2 = __ftol();
    sprite_set_color(0xb1, 0x32, -1, -1, uVar2);
    sprite_enable_display(0xb5, 1);
    sprite_set_pos(0xb5, param_1 + -0x1b, param_3 + 0xf + param_2);
    sprite_set_color(0xb5, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
    sprite_enable_display(0xb4, 1);
    sprite_set_pos(0xb4, param_1 + -0x14, param_3 + 0x17 + param_2);
    uVar2 = __ftol();
    sprite_set_color(0xb4, 0x32, -1, -1, uVar2);
    sprite_enable_display(0xb7, 1);
    sprite_set_pos(0xb7, param_1 + -0x11, param_2 + 0x12);
    sprite_set_color(0xb7, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
    sprite_scale(0xb7, 1.0f, (float)param_3 * 0.3333);
    if ((DAT_00e295c4 != 0) && ((DAT_0050c908 & 0x8000) != 0))
    {
        sprite_enable_display(0xb6, 1);
        sprite_set_pos(0xb6, param_1 + -0x20, param_3 + -0x13 + param_2);
        sprite_set_color(0xb6, 0x32, -1, -1, 0xfffffffe);
    }
    if ((DAT_00e295c0 != 0) && ((DAT_0050c908 & 0x4000) != 0))
    {
        sprite_enable_display(0xb3, 1);
        sprite_set_pos(0xb3, param_1 + -0x20, param_2 + -0x11);
        sprite_set_color(0xb3, 0x32, -1, -1, 0xfffffffe);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00440150(undefined_32 param_1, int param_2)

{
    float fVar1;
    undefined_32 uVar2;

    fVar1 = 838.2;
    if (DAT_00e295b8 == 0)
    {
        fVar1 = -838.2;
    }
    _DAT_0050c584 = fVar1 * _DAT_00e22a50 + _DAT_0050c584;
    if (254.0 < _DAT_0050c584)
    {
        _DAT_0050c584 = 254.0;
    }
    if (_DAT_0050c584 < 0.0)
    {
        _DAT_0050c584 = 0.0;
    }
    fVar1 = 838.2;
    if (DAT_00e295bc == 0)
    {
        fVar1 = -838.2;
    }
    _DAT_0050c588 = fVar1 * _DAT_00e22a50 + _DAT_0050c588;
    if (254.0 < _DAT_0050c588)
    {
        _DAT_0050c588 = 254.0;
    }
    if (_DAT_0050c588 < 0.0)
    {
        _DAT_0050c588 = 0.0;
    }
    sprite_enable_display(0xae, 1);
    sprite_set_pos(0xae, 0x13, param_2 + -0xe);
    sprite_set_color(0xae, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
    sprite_enable_display(0xad, 1);
    sprite_set_pos(0xad, 0x16, param_2 + -7);
    uVar2 = __ftol();
    sprite_set_color(0xad, 0x32, -1, -1, uVar2);
    sprite_enable_display(0xab, 1);
    sprite_set_pos(0xab, 0x10b, param_2 + -0xe);
    sprite_set_color(0xab, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
    sprite_enable_display(0xaa, 1);
    sprite_set_pos(0xaa, 0x112, param_2 + -7);
    uVar2 = __ftol();
    sprite_set_color(0xaa, 0x32, -1, -1, uVar2);
    sprite_enable_display(0xb0, 1);
    sprite_set_pos(0xb0, 0x30, param_2 + -4);
    sprite_set_color(0xb0, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
    sprite_scale(0xb0, 0x42920000, 1.0f);
    if (DAT_00e295b4 != 0)
    {
        sprite_enable_display(0xac, 1);
        sprite_set_pos(0xac, 0xe8, param_2 + -0x13);
        sprite_set_color(0xac, 0x32, -1, -1, 0xfffffffe);
    }
    if (DAT_00e295b0 != 0)
    {
        sprite_enable_display(0xaf, 1);
        sprite_set_pos(0xaf, 0xc, param_2 + -0x13);
        sprite_set_color(0xaf, 0x32, -1, -1, 0xfffffffe);
    }
    return;
}

void FUN_004403e0(int param_1, int param_2, int param_3, undefined_32 param_4, char param_5)

{
    float fVar1;
    undefined_32 uVar2;
    undefined_8 *puVar3;
    int iVar4;
    char *pcVar5;

    if (param_5 == '\0')
    {
        pcVar5 = s__SCREENTEXT_545__f4_c_s3_Lap_Rec_004c13ac;
    LAB_00440404:
        uVar2 = lookup_translation(pcVar5);
        uVar2 = __ftol(uVar2);
        create_text_entry_0(param_2, param_3, 0x32, -1, -1, uVar2);
    }
    else if (param_5 == '\x03')
    {
        pcVar5 = s__SCREENTEXT_546__f4_c_sBest_Lap_004c13d0;
        goto LAB_00440404;
    }
    iVar4 = param_3 + 7;
    if (param_5 == '\x03')
    {
        fVar1 = *(float *)(&DAT_00e366bc + ((int)*(char *)(param_1 + 0x6e) + *(char *)(param_1 + 0x5d) * 2) * 4);
        if (3599.99 <= fVar1)
            goto LAB_00440528;
        uVar2 = __ftol(1);
        create_text_entry_4(param_2 + 0x1e, iVar4, fVar1, 0x32, -1, -1, uVar2);
        puVar3 = &DAT_00e36dc4 + ((int)*(char *)(param_1 + 0x6e) + *(char *)(param_1 + 0x5d) * 2) * 0x20;
    }
    else
    {
        fVar1 = *(float *)(&DAT_00e365f4 + ((int)*(char *)(param_1 + 0x6e) + *(char *)(param_1 + 0x5d) * 2) * 4);
        if (3599.99 <= fVar1)
        {
        LAB_00440528:
            uVar2 = __ftol(s__c_s______________004c1398);
            create_text_entry_0(param_2, iVar4, 0x32, -1, -1, uVar2);
            return;
        }
        uVar2 = __ftol(1);
        create_text_entry_4(param_2 + 0x1e, iVar4, fVar1, 0x32, -1, -1, uVar2);
        puVar3 = &DAT_00e36784 + ((int)*(char *)(param_1 + 0x6e) + *(char *)(param_1 + 0x5d) * 2) * 0x20;
    }
    FUN_00439c70((float)param_2, (float)(param_3 + 0xf), param_4, puVar3);
    return;
}

void FUN_00440550(undefined_32 param_1)

{
    undefined_32 uVar1;
    undefined_32 local_8;
    float local_4;

    uVar1 = 0;
    local_8 = 0x3e000000;
    local_4 = (float)(uint)DAT_00e364a5 * 0.003921569;
    switch (param_1)
    {
    case 0x4b:
        uVar1 = 1;
        local_8 = 0.5f;
        break;
    default:
        local_8 = 0.25f;
        uVar1 = 0;
        break;
    case 0x4d:
        local_8 = 0.25f;
        break;
    case 0x4f:
        uVar1 = 1;
        break;
    case 0x54:
        break;
    case 0x58:
        local_4 = local_4 * 0.75;
        local_8 = 0.25f;
    }
    FUN_00426c80(param_1, 6, local_8, local_4, uVar1);
    return;
}

undefined_32 FUN_00440620(undefined_32 param_1)

{
    undefined_32 uVar1;

    uVar1 = 0;
    switch (param_1)
    {
    case 0:
        uVar1 = lookup_translation(s__SCREENTEXT_497___The_Boonta_Tra_004c1728);
        return uVar1;
    case 1:
        uVar1 = lookup_translation(s__SCREENTEXT_498___The_Boonta_Cla_004c1700);
        return uVar1;
    case 2:
        uVar1 = lookup_translation(s__SCREENTEXT_499___Beedo_s_Wild_R_004c16dc);
        return uVar1;
    case 3:
        uVar1 = lookup_translation(s__SCREENTEXT_500___Howler_Gorge_004c16bc);
        return uVar1;
    case 4:
        uVar1 = lookup_translation(s__SCREENTEXT_501___Andobi_Mountai_004c1694);
        return uVar1;
    case 5:
        uVar1 = lookup_translation(s__SCREENTEXT_539___Ando_Prime_Cen_004c166c);
        return uVar1;
    case 6:
        uVar1 = lookup_translation(s__SCREENTEXT_503___Aquilaris_Clas_004c1648);
        return uVar1;
    case 7:
        uVar1 = lookup_translation(s__SCREENTEXT_504___Sunken_City_004c1628);
        return uVar1;
    case 8:
        uVar1 = lookup_translation(s__SCREENTEXT_505___Bumpy_s_Breake_004c1604);
        return uVar1;
    case 9:
        uVar1 = lookup_translation(s__SCREENTEXT_506___Scrapper_s_Run_004c15e0);
        return uVar1;
    case 10:
        uVar1 = lookup_translation(s__SCREENTEXT_507___Dethro_s_Reven_004c15bc);
        return uVar1;
    case 0xb:
        uVar1 = lookup_translation(s__SCREENTEXT_508___Abyss_004c15a4);
        return uVar1;
    case 0xc:
        uVar1 = lookup_translation(s__SCREENTEXT_509___Baroo_Coast_004c1584);
        return uVar1;
    case 0xd:
        uVar1 = lookup_translation(s__SCREENTEXT_510___Grabvine_Gatew_004c1560);
        return uVar1;
    case 0xe:
        uVar1 = lookup_translation(s__SCREENTEXT_511___Fire_Mountain_R_004c1538);
        return uVar1;
    case 0xf:
        uVar1 = lookup_translation(s__SCREENTEXT_540___Inferno_004c151c);
        return uVar1;
    case 0x10:
        uVar1 = lookup_translation(s__SCREENTEXT_513___Mon_Gazza_Spee_004c14f4);
        return uVar1;
    case 0x11:
        uVar1 = lookup_translation(s__SCREENTEXT_514___Spice_Mine_Run_004c14d0);
        return uVar1;
    case 0x12:
        uVar1 = lookup_translation(s__SCREENTEXT_515___Zugga_Challeng_004c14ac);
        return uVar1;
    case 0x13:
        uVar1 = lookup_translation(s__SCREENTEXT_516___Vengeance_004c1490);
        return uVar1;
    case 0x14:
        uVar1 = lookup_translation(s__SCREENTEXT_517___Executioner_004c1470);
        return uVar1;
    case 0x15:
        uVar1 = lookup_translation(s__SCREENTEXT_518___The_Gauntlet_004c1450);
        return uVar1;
    case 0x16:
        uVar1 = lookup_translation(s__SCREENTEXT_519___Malastare_100_004c1430);
        return uVar1;
    case 0x17:
        uVar1 = lookup_translation(s__SCREENTEXT_520___Dug_Derby_004c1414);
        return uVar1;
    case 0x18:
        uVar1 = lookup_translation(s__SCREENTEXT_521___Sebulba_s_Lega_004c13f0);
    }
    return uVar1;
}

void FUN_00440800(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    undefined_32 *puVar5;
    undefined_32 *puVar6;
    undefined_32 *puVar7;
    undefined_8 local_44[12];
    undefined_32 local_38[14];

    iVar3 = DAT_00e295d0;
    iVar1 = DAT_00e295d0 * 0x38;
    iVar4 = (int)(char)(&DAT_004c1cbb)[(char)(&DAT_00e2a6c0)[iVar1] * 0x10];
    DAT_00e35a98 = (DAT_00e35a98 - DAT_00e99220) + DAT_00e9935c;
    if (*(int *)(param_1 + 0x38) == 1)
    {
        (&DAT_00e2985e)[*(int *)(param_1 + 0x34) * 3] = (&DAT_00e35aa8)[iVar4];
    }
    puVar5 = (undefined_32 *)(&DAT_00e2a6c0 + iVar1);
    puVar6 = local_38;
    QMEMCPY(iVar2, puVar5, puVar6, 0xe)
    puVar5 = (undefined_32 *)(&DAT_00e2b220 + iVar4 * 0x38);
    puVar6 = puVar5;
    puVar7 = (undefined_32 *)(&DAT_00e2a6c0 + iVar1);
    QMEMCPY(iVar2, puVar6, puVar7, 0xe)
    puVar6 = local_38;
    puVar7 = puVar5;
    QMEMCPY(iVar1, puVar6, puVar7, 0xe)
    vec3f_copy(local_44, &DAT_00e2a6c4 + iVar3 * 0xe);
    vec3f_copy(&DAT_00e2a6c4 + DAT_00e295d0 * 0xe, &DAT_00e2b224 + iVar4 * 0xe);
    vec3f_copy(&DAT_00e2b224 + iVar4 * 0xe, local_44);
    (&DAT_00e35aa8)[iVar4] = (&DAT_00e2b221)[iVar4 * 0x38];
    iVar3 = DAT_00e295d0 + 0x62;
    (&DAT_00e35aa1)[iVar4] = (&DAT_004c1cb9)[*(char *)puVar5 * 0x10];
    FUN_0045cf30(iVar3, iVar4 + 0x8e);
    DAT_0050c474 = 1;
    FUN_0044e560();
    FUN_0045cf60((int)*(char *)(param_1 + 0x73),
                 (int)(char)(&DAT_004c1cbb)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                 (int)(char)(&DAT_004c1cb9)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10],
                 (&DAT_00e2a6c1)[DAT_00e295d0 * 0x38]);
    FUN_0043eb50();
    return;
}

undefined_32 FUN_00440990(char *param_1, char *param_2)

{
    if ((DAT_0050c048 & 0x4000) == 0)
    {
        return 0;
    }
    if (((*param_1 == *param_2) && (param_1[1] == param_2[1])) && (param_1[2] == param_2[2]))
    {
        return 1;
    }
    return 0;
}

undefined_32 FUN_004409d0(char *param_1, char *param_2)

{
    if (((*param_1 == *param_2) && (param_1[1] == param_2[1])) && (param_1[2] == param_2[2]))
    {
        return 1;
    }
    return 0;
}

undefined_8 FUN_00440a00(char param_1, char param_2)

{
    undefined_8 uVar1;

    if (('\x02' < param_1) || (uVar1 = 4, '\x05' < param_2))
    {
        uVar1 = 3;
    }
    return uVar1;
}

undefined_32 FUN_00440a20(undefined_32 param_1, undefined_32 param_2)

{
    char cVar1;
    char cVar2;

    cVar2 = (char)param_1;
    param_2._0_1_ = (char)param_2 * '\x02';
    param_1._0_2_ = *(short *)(&DAT_00e35a8a + cVar2 * 2) >> ((byte)param_2 & 0x1f) & 3;
    cVar1 = FUN_00440a00(param_1, param_2);
    if (((cVar1 != '\x03') || ((ushort)param_1 != 0))
        && (('\x02' < cVar2 || (((&DAT_00e35a85)[cVar2] & (byte)(1 << ((char)param_2 + 1U & 0x1f))) != 0))))
    {
        return 0;
    }
    return 1;
}

bool FUN_00440aa0(int param_1, char param_2, byte param_3)

{
    byte bVar1;

    bVar1 = (&DAT_00e35a85)[param_2];
    if ((DAT_004d5e00 != 0) && (param_2 < '\x03'))
    {
        return true;
    }
    if (*(char *)(param_1 + 0x6c) == '\0')
    {
        bVar1 = (&DAT_00e364ac)[param_2];
    }
    return ((byte)(1 << (param_3 & 0x1f)) & bVar1) != 0;
}

int FUN_00440af0(int param_1, int param_2)

{
    uint in_EAX;
    uint uVar1;
    int iVar2;
    int iVar3;

    iVar2 = -1;
    iVar3 = 0;
    uVar1 = in_EAX & 0xffffff00 | (uint) * (byte *)(param_1 + 0x5e);
    if ((char)(&DAT_004bfee0)[(char)*(byte *)(param_1 + 0x5e)] < '\x01')
    {
        return -1;
    }
    while ((uVar1 = FUN_00440aa0(param_1, uVar1, iVar3), uVar1 == 0 || (iVar2 = iVar2 + 1, iVar2 != param_2)))
    {
        uVar1 = uVar1 & 0xffffff00 | (uint) * (byte *)(param_1 + 0x5e);
        iVar3 = iVar3 + 1;
        if ((char)(&DAT_004bfee0)[(char)*(byte *)(param_1 + 0x5e)] <= iVar3)
        {
            return -1;
        }
    }
    return iVar3;
}

undefined_32 FUN_00440b50(int param_1)

{
    int iVar1;

    iVar1 = vec3f_equal(&DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20, &DAT_00e2af90);
    if (iVar1 != 0)
    {
        iVar1 = vec3f_equal(&DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20, &DAT_00e2b470);
        if (iVar1 != 0)
        {
            iVar1 = vec3f_equal(&DAT_004c4010 + *(int *)(param_1 + 0x34) * 0x20, &DAT_00e29b90);
            if (iVar1 != 0)
            {
                return 0;
            }
        }
    }
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00440bc0(int param_1)

{
    if (*(char *)(param_1 + 0x6c) == '\0')
    {
        if (((byte)DAT_00e364a8 & 0x20) != 0)
        {
            return 1;
        }
    }
    else if ((((_DAT_00e35a8a == 0x3fff) && (_DAT_00e35a8c == 0x3fff)) && (_DAT_00e35a8e == 0x3fff))
             && (_DAT_00e35a90 == 0xff))
    {
        return 1;
    }
    return 0;
}

// WARNING: Could not reconcile some variable overlaps

void FUN_00440c10(int param_1)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    byte bVar4;
    int iVar5;
    int iVar6;
    undefined_32 uStack_4;

    DAT_00e364a8 = DAT_00e364a8 | 0x40;
    DAT_0050ca3c = 1;
    uStack_4._2_1_ = 0;
    uStack_4 = 0;
    *(uint *)(param_1 + 0x14) = *(uint *)(param_1 + 0x14) | 8;
    iVar2 = FUN_004409d0(&DAT_00e35a60, &DAT_004c0948);
    if ((iVar2 != 0) && (((byte)DAT_0050c908 & 4) != 0))
    {
        DAT_00e29890 = *(undefined_8 *)(param_1 + 0x5d);
        uStack_4._2_1_ = 1;
        uStack_4 = 0x1010000;
    }
    if (uStack_4._2_1_ < 5)
    {
        do
        {
            rand();
            iVar2 = __ftol();
            rand();
            iVar3 = __ftol();
            bVar4 = (&DAT_00e35a85)[iVar2];
            if (uStack_4._3_1_ != '\0')
            {
                bVar4 = (&DAT_00e364ac)[iVar2];
            }
            if ((bVar4 & (byte)(1 << ((byte)iVar3 & 0x1f))) != 0)
            {
                iVar6 = (int)(char)uStack_4._2_1_;
                bVar1 = false;
                iVar5 = 0;
                if (0 < iVar6)
                {
                    do
                    {
                        if (*(int *)(&DAT_004c0018 + (iVar2 * 7 + iVar3) * 4) == (int)(char)(&DAT_00e29890)[iVar5])
                        {
                            bVar1 = true;
                            break;
                        }
                        iVar5 = iVar5 + 1;
                    } while (iVar5 < iVar6);
                }
                if (!bVar1)
                {
                    uStack_4._2_1_ = uStack_4._2_1_ + 1;
                    uStack_4 = uStack_4 & 0xff000000 | (uint)uStack_4._2_1_ << 0x10;
                    (&DAT_00e29890)[iVar6] = (&DAT_004c0018)[(iVar2 * 7 + iVar3) * 4];
                }
            }
        } while ((char)uStack_4._2_1_ < '\x05');
    }
    return;
}

void FUN_00440d50(undefined_32 param_1, undefined_32 param_2)

{
    undefined_32 uVar1;
    undefined_32 uVar2;

    uVar1 = FUN_00411810();
    uVar2 = FUN_00414d90(uVar1, 2);
    FUN_00414e60(uVar2, param_1);
    uVar1 = FUN_00414d90(uVar1, 4);
    FUN_00414e60(uVar1, param_2);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_16 *FUN_00440d90(void)

{
    if ((DAT_004c1770 != 0) || ((DAT_00e996dc & 0x1000) != 0))
    {
        _DAT_00e98ef4 = 0;
        _DAT_00e98ee4 = 0;
        DAT_00e98ee0 = 0;
        _DAT_00e98ee8 = 0;
        DAT_00e98ee2 = 0;
        _DAT_00e98eec = 0;
        _DAT_00e98ef0 = 0;
    }
    DAT_004c1770 = 0;
    return &DAT_00e98ee0;
}

undefined_32 FUN_00440de0(int param_1)

{
    return *(undefined_32 *)(&DAT_0050c5b0 + param_1 * 4);
}

void FUN_00440df0(void)

{
    uint uVar1;
    float fVar2;
    float fVar3;
    uint uVar4;
    uint uVar5;
    char *pcVar6;
    int iVar7;

    FUN_00440d90();
    pcVar6 = &DAT_00e98ef2;
    iVar7 = 0;
    do
    {
        uVar4 = (uint)(pcVar6[1] != '\0');
        if (*pcVar6 != '\0')
        {
            uVar4 = uVar4 | 2;
        }
        if (pcVar6[-0xb] != '\0')
        {
            uVar4 = uVar4 | 4;
        }
        if (pcVar6[-0xc] != '\0')
        {
            uVar4 = uVar4 | 8;
        }
        if (pcVar6[-0xd] != '\0')
        {
            uVar4 = uVar4 | 0x10;
        }
        if (pcVar6[-0xe] != '\0')
        {
            uVar4 = uVar4 | 0x20;
        }
        if (pcVar6[-9] != '\0')
        {
            uVar4 = uVar4 | 0x40;
        }
        if (pcVar6[-10] != '\0')
        {
            uVar4 = uVar4 | 0x80;
        }
        if (pcVar6[-1] != '\0')
        {
            uVar4 = uVar4 | 0x100;
        }
        if (pcVar6[-2] != '\0')
        {
            uVar4 = uVar4 | 0x200;
        }
        if (pcVar6[-3] != '\0')
        {
            uVar4 = uVar4 | 0x400;
        }
        if (pcVar6[-4] != '\0')
        {
            uVar4 = uVar4 | 0x800;
        }
        if (pcVar6[-5] != '\0')
        {
            uVar4 = uVar4 | 0x1000;
        }
        if (pcVar6[-6] != '\0')
        {
            uVar4 = uVar4 | 0x2000;
        }
        fVar2 = (float)(int)*(short *)(pcVar6 + -0x10) * 0.01;
        if (0.3 < fVar2)
        {
            uVar4 = uVar4 | 0x4000;
        }
        if (fVar2 < -0.3)
        {
            uVar4 = uVar4 | 0x8000;
        }
        fVar3 = (float)(int)*(short *)(pcVar6 + -0x12) * 0.01;
        if (fVar3 < -0.3)
        {
            uVar4 = uVar4 | 0x10000;
        }
        if (0.3 < fVar3)
        {
            uVar4 = uVar4 | 0x20000;
        }
        if ((-0.2 < fVar3) && (fVar3 < 0.2))
        {
            uVar4 = uVar4 | 0x40000;
        }
        if ((-0.2 < fVar2) && (fVar2 < 0.2))
        {
            uVar4 = uVar4 | 0x80000;
        }
        if ((fVar3 <= -0.2) && (-0.3 <= fVar3))
        {
            uVar4 = uVar4 | 0x100000;
        }
        if ((0.2 <= fVar3) && (fVar3 <= 0.3))
        {
            uVar4 = uVar4 | 0x200000;
        }
        if ((0.2 <= fVar2) && (fVar2 <= 0.3))
        {
            uVar4 = uVar4 | 0x400000;
        }
        if ((fVar2 <= -0.2) && (-0.3 <= fVar2))
        {
            uVar4 = uVar4 | 0x800000;
        }
        uVar1 = *(uint *)((int)&DAT_00e98e90 + iVar7);
        *(float *)((int)&DAT_00e98ea0 + iVar7) = fVar3;
        *(uint *)((int)&DAT_00e98e90 + iVar7) = uVar4;
        *(float *)((int)&DAT_00e98e80 + iVar7) = fVar2;
        uVar5 = uVar1 ^ uVar4;
        pcVar6 = pcVar6 + 0x18;
        *(uint *)((int)&DAT_00e98eb0 + iVar7) = uVar4 & uVar5;
        *(uint *)((int)&DAT_00e98ec0 + iVar7) = uVar1 & uVar5;
        iVar7 = iVar7 + 4;
    } while ((int)pcVar6 < 0xe98f52);
    return;
}

void FUN_00441010(undefined_32 param_1)

{
    DAT_0050c5c8 = param_1;
    return;
}

void FUN_00441020(void)

{
    DAT_0050c5d0 = 0;
    return;
}

undefined_32 FUN_00441030(void)

{
    return DAT_0050c5d0;
}

undefined_32 FUN_00441040(float *param_1, float *param_2, float *param_3, float *param_4, undefined_32 param_5,
                          undefined_32 param_6, undefined_32 param_7)

{
    int iVar1;
    float local_48[6];
    float local_30[3];
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    local_24 = *param_2 - *param_1;
    local_20 = param_2[1] - param_1[1];
    local_1c = param_2[2] - param_1[2];
    local_18 = *param_3 - *param_1;
    local_14 = param_3[1] - param_1[1];
    local_10 = param_3[2] - param_1[2];
    local_c = *param_4 - *param_1;
    local_8 = param_4[1] - param_1[1];
    local_4 = param_4[2] - param_1[2];
    rdVector_Cross3(local_48, param_5, param_6);
    if (((local_48[0] != 0.0) || (local_48[1] != 0.0)) || (local_48[2] != 0.0))
    {
        rdVector_Cross3(local_48, local_48 + 9, param_5);
        rdVector_Cross3(local_48 + 3, &local_18, param_6);
        rdVector_Cross3(local_48 + 6, &local_c, param_7);
        if (0.0 <= local_48[0])
        {
            param_3 = (float *)local_48[0];
        }
        else
        {
            param_3 = (float *)-local_48[0];
        }
        if (0.0 <= local_48[1])
        {
            param_2 = (float *)local_48[1];
        }
        else
        {
            param_2 = (float *)-local_48[1];
        }
        if (local_48[2] < 0.0)
        {
            local_48[2] = -local_48[2];
        }
        if (local_48[2] + (float)param_2 + (float)param_3 <= 0.0001)
        {
            if (0.0 <= local_48[3])
            {
                param_3 = (float *)local_48[3];
            }
            else
            {
                param_3 = (float *)-local_48[3];
            }
            if (0.0 <= local_48[4])
            {
                param_2 = (float *)local_48[4];
            }
            else
            {
                param_2 = (float *)-local_48[4];
            }
            if (local_48[5] < 0.0)
            {
                local_48[5] = -local_48[5];
            }
            if (local_48[5] + (float)param_2 + (float)param_3 < 0.001)
            {
                return 1;
            }
            if ((float)param_2 <= (float)param_3)
            {
                if (local_48[5] <= (float)param_3)
                {
                    iVar1 = 0;
                }
                else
                {
                    iVar1 = 2;
                }
            }
            else if (local_48[5] <= (float)param_2)
            {
                iVar1 = 1;
            }
            else
            {
                iVar1 = 2;
            }
            if (0.0 <= local_48[iVar1 + 3])
            {
                if (0.0 <= local_48[iVar1 + 6])
                {
                    return 1;
                }
            }
            else if (local_48[iVar1 + 6] <= 0.0)
            {
                return 1;
            }
        }
        else
        {
            if ((float)param_2 <= (float)param_3)
            {
                if (local_48[2] <= (float)param_3)
                {
                    iVar1 = 0;
                }
                else
                {
                    iVar1 = 2;
                }
            }
            else if (local_48[2] <= (float)param_2)
            {
                iVar1 = 1;
            }
            else
            {
                iVar1 = 2;
            }
            if (0.0 <= local_48[iVar1])
            {
                if ((0.0 <= local_48[iVar1 + 3]) && (0.0 <= local_48[iVar1 + 6]))
                {
                    return 1;
                }
            }
            else if ((local_48[iVar1 + 3] <= 0.0) && (local_48[iVar1 + 6] <= 0.0))
            {
                return 1;
            }
        }
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00441390(float param_1, float *param_2, float *param_3, float *param_4)

{
    if (param_1 <= DAT_00e98258 - 0.01)
    {
        DAT_00e98258 = param_1;
        _DAT_00e98e60 = *param_3;
        DAT_00e98e64 = param_3[1];
        DAT_00e98e68 = param_3[2];
        _DAT_00e98290 = *param_4;
        DAT_00e98294 = param_4[1];
        DAT_00e98298 = param_4[2];
        DAT_00e98254 = DAT_00e98284;
        DAT_00e98250 = 1;
    }
    else if ((param_2[2] - param_3[2]) * DAT_00e98298 + (param_2[1] - param_3[1]) * DAT_00e98294
                 + (*param_2 - *param_3) * _DAT_00e98290
             < *param_4 * (*param_2 - *param_3) + (param_2[1] - param_3[1]) * param_4[1]
                 + (param_2[2] - param_3[2]) * param_4[2])
    {
        DAT_00e98258 = param_1;
        _DAT_00e98e60 = *param_3;
        DAT_00e98e64 = param_3[1];
        DAT_00e98e68 = param_3[2];
        _DAT_00e98290 = *param_4;
        DAT_00e98294 = param_4[1];
        DAT_00e98254 = DAT_00e98284;
        DAT_00e98298 = param_4[2];
        DAT_00e98250 = 1;
        return;
    }
    return;
}

void FUN_004414e0(undefined_32 param_1, float *param_2, float *param_3, float *param_4, float *param_5,
                  undefined_32 param_6)

{
    float fVar1;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    local_30 = *param_3 - *param_2;
    local_2c = param_3[1] - param_2[1];
    local_28 = param_3[2] - param_2[2];
    local_24 = *param_4 - *param_3;
    local_20 = param_4[1] - param_3[1];
    local_1c = param_4[2] - param_3[2];
    local_18 = *param_2 - *param_4;
    local_14 = param_2[1] - param_4[1];
    local_10 = param_2[2] - param_4[2];
    FUN_004808f0(param_1, param_2, param_3, &local_30);
    FUN_004808f0(param_1, param_3, param_4, &local_24);
    FUN_004808f0(param_1, param_4, param_2, &local_18);
    param_3 =
        (float *)((param_5[2] - local_28) * (param_5[2] - local_28) + (param_5[1] - local_2c) * (param_5[1] - local_2c)
                  + (*param_5 - local_30) * (*param_5 - local_30));
    fVar1 = (param_5[2] - local_1c) * (param_5[2] - local_1c) + (param_5[1] - local_20) * (param_5[1] - local_20)
        + (*param_5 - local_24) * (*param_5 - local_24);
    local_c = local_30;
    local_8 = local_2c;
    local_4 = local_28;
    if (fVar1 < (float)param_3)
    {
        local_c = local_24;
        local_8 = local_20;
        local_4 = local_1c;
        param_3 = (float *)fVar1;
    }
    fVar1 = (param_5[2] - local_10) * (param_5[2] - local_10) + (param_5[1] - local_14) * (param_5[1] - local_14)
        + (*param_5 - local_18) * (*param_5 - local_18);
    if (fVar1 < (float)param_3)
    {
        local_c = local_18;
        local_8 = local_14;
        local_4 = local_10;
        param_3 = (float *)fVar1;
    }
    if ((float)param_3 <= DAT_00e98258)
    {
        FUN_00441390(param_3, param_5, &local_c, param_6);
    }
    return;
}

void FUN_00441710(float *param_1, float *param_2, float *param_3, float *param_4, float param_5)

{
    float fVar1;
    float local_c;
    float local_8;
    float local_4;

    local_c = *param_3 - *param_2;
    local_8 = param_3[1] - param_2[1];
    local_4 = param_3[2] - param_2[2];
    rdVector_Normalize3(&local_c);
    fVar1 = (local_c * *param_4 + local_8 * param_4[1] + local_4 * param_4[2])
        / (param_5 - (*param_2 * *param_4 + param_4[1] * param_2[1] + param_4[2] * param_2[2]));
    *param_1 = local_c * fVar1;
    param_1[1] = local_8 * fVar1;
    param_1[2] = local_4 * fVar1;
    *param_1 = *param_2 + local_c * fVar1;
    param_1[1] = param_2[1] + local_8 * fVar1;
    param_1[2] = param_2[2] + local_4 * fVar1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00441810(float *param_1, float *param_2, float *param_3, float *param_4, undefined_32 param_5,
                  undefined_32 param_6, undefined_32 param_7)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float *pfVar4;
    float *pfVar5;
    undefined_8 local_3c[12];
    undefined_8 local_30[12];
    float local_24;
    float local_20;
    float local_1c;
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    pfVar4 = param_1;
    fVar1 = param_1[2] * _DAT_00e985a8 + param_1[1] * _DAT_00e985a4 + _DAT_00e985a0 * *param_1;
    if ((DAT_00e98e00 < fVar1) && (fVar1 < DAT_00e9827c))
    {
        FUN_00441390(param_6, param_5, param_1, param_7);
        return;
    }
    fVar1 = _DAT_00e985a0 * *param_2 + _DAT_00e985a4 * param_2[1] + _DAT_00e985a8 * param_2[2];
    param_2._0_2_ = 0;
    param_6._0_2_ = 0;
    param_3._0_2_ = 0;
    fVar2 = _DAT_00e985a0 * *param_3 + _DAT_00e985a4 * param_3[1] + _DAT_00e985a8 * param_3[2];
    fVar3 = _DAT_00e985a0 * *param_4 + _DAT_00e985a4 * param_4[1] + _DAT_00e985a8 * param_4[2];
    if (DAT_00e98e00 <= fVar1)
    {
        if (DAT_00e9827c < fVar1)
        {
            param_2._0_2_ = 2;
        }
    }
    else
    {
        param_2._0_2_ = -1;
    }
    if (DAT_00e98e00 <= fVar2)
    {
        if (DAT_00e9827c < fVar2)
        {
            param_6._0_2_ = 2;
        }
    }
    else
    {
        param_6._0_2_ = -1;
    }
    if (DAT_00e98e00 <= fVar3)
    {
        if (DAT_00e9827c < fVar3)
        {
            param_3._0_2_ = 2;
        }
    }
    else
    {
        param_3._0_2_ = -1;
    }
    param_1 = (float *)DAT_00e9827c;
    switch ((int)(short)param_6 + (int)(short)param_3 + 3 + (int)(short)param_2)
    {
    default:
        return;
    case 1:
        param_1 = (float *)DAT_00e98e00;
        break;
    case 2:
        param_1 = (float *)DAT_00e98e00;
    case 5:
        if ((short)param_2 != 0)
        {
            FUN_00441710(local_30, param_2, param_3, &DAT_00e985a0, param_1);
            FUN_00441710(local_3c, param_2, param_4, &DAT_00e985a0, param_1);
            FUN_004414e0(pfVar4, local_30, param_3, local_3c, param_5, param_7);
            FUN_004414e0(pfVar4, local_3c, param_3, param_4, param_5, param_7);
            return;
        }
        if ((short)param_6 == 0)
        {
            FUN_00441710(local_30, param_4, param_2, &DAT_00e985a0, param_1);
            FUN_00441710(local_3c, param_4, param_3, &DAT_00e985a0, param_1);
            FUN_004414e0(pfVar4, local_30, param_2, local_3c, param_5, param_7);
            FUN_004414e0(pfVar4, local_3c, param_2, param_3, param_5, param_7);
            return;
        }
        FUN_00441710(local_30, param_3, param_4, &DAT_00e985a0, param_1);
        FUN_00441710(local_3c, param_3, param_2, &DAT_00e985a0, param_1);
        FUN_004414e0(pfVar4, local_30, param_4, local_3c, param_5, param_7);
        FUN_004414e0(pfVar4, local_3c, param_4, param_2, param_5, param_7);
        return;
    case 3:
    case 6:
        if ((short)param_6 == (short)param_3)
        {
            FUN_00441710(local_30, param_2, param_3, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(local_3c, param_2, param_4, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(&local_24, param_2, param_4, &DAT_00e985a0, DAT_00e98e00);
            pfVar5 = param_2;
        }
        else if ((short)param_3 == (short)param_2)
        {
            FUN_00441710(local_30, param_3, param_4, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(local_3c, param_3, param_2, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(&local_24, param_3, param_2, &DAT_00e985a0, DAT_00e98e00);
            pfVar5 = param_3;
            param_3 = param_4;
        }
        else
        {
            FUN_00441710(local_30, param_4, param_2, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(local_3c, param_4, param_3, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(&local_24, param_4, param_3, &DAT_00e985a0, DAT_00e98e00);
            pfVar5 = param_4;
            param_3 = param_2;
        }
        FUN_00441710(local_18, pfVar5, param_3, &DAT_00e985a0, DAT_00e98e00);
        FUN_004414e0(pfVar4, local_30, local_3c, &local_24, param_5, param_7);
        FUN_004414e0(pfVar4, local_30, &local_24, local_18, param_5, param_7);
        return;
    case 4:
        if ((short)param_2 == 0)
        {
            local_24 = *param_2;
            local_20 = param_2[1];
            local_1c = param_2[2];
            FUN_00441710(local_30, param_3, param_4, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(local_c, param_3, param_4, &DAT_00e985a0, DAT_00e98e00);
            pfVar5 = param_2;
            if ((short)param_6 == 2)
            {
                FUN_00441710(local_3c, param_2, param_3, &DAT_00e985a0, DAT_00e9827c);
            }
            else
            {
                FUN_00441710(local_3c, param_2, param_4, &DAT_00e985a0, DAT_00e9827c);
                param_4 = param_3;
            }
        }
        else if ((short)param_6 == 0)
        {
            local_24 = *param_3;
            local_20 = param_3[1];
            local_1c = param_3[2];
            FUN_00441710(local_30, param_4, param_2, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(local_c, param_4, param_2, &DAT_00e985a0, DAT_00e98e00);
            if ((short)param_3 == 2)
            {
                FUN_00441710(local_3c, param_3, param_4, &DAT_00e985a0, DAT_00e9827c);
                pfVar5 = param_3;
                param_4 = param_2;
            }
            else
            {
                FUN_00441710(local_3c, param_3, param_2, &DAT_00e985a0, DAT_00e9827c);
                pfVar5 = param_3;
            }
        }
        else
        {
            local_24 = *param_4;
            local_20 = param_4[1];
            local_1c = param_4[2];
            FUN_00441710(local_30, param_2, param_3, &DAT_00e985a0, DAT_00e9827c);
            FUN_00441710(local_c, param_2, param_3, &DAT_00e985a0, DAT_00e98e00);
            if ((short)param_2 == 2)
            {
                FUN_00441710(local_3c, param_4, param_2, &DAT_00e985a0, DAT_00e9827c);
                pfVar5 = param_4;
                param_4 = param_3;
            }
            else
            {
                FUN_00441710(local_3c, param_4, param_3, &DAT_00e985a0, DAT_00e9827c);
                pfVar5 = param_4;
                param_4 = param_2;
            }
        }
        FUN_00441710(local_18, pfVar5, param_4, &DAT_00e985a0, DAT_00e98e00);
        FUN_004414e0(pfVar4, local_30, local_3c, &local_24, param_5, param_7);
        FUN_004414e0(pfVar4, local_30, &local_24, local_c, param_5, param_7);
        FUN_004414e0(pfVar4, &local_24, local_18, local_c, param_5, param_7);
        return;
    case 7:
        break;
    }
    if ((short)param_2 == 0)
    {
        FUN_00441710(local_30, param_2, param_3, &DAT_00e985a0, param_1);
        FUN_00441710(local_3c, param_2, param_4, &DAT_00e985a0, param_1);
        FUN_004414e0(pfVar4, param_2, local_30, local_3c, param_5, param_7);
        return;
    }
    if ((short)param_6 != 0)
    {
        FUN_00441710(local_30, param_4, param_2, &DAT_00e985a0, param_1);
        FUN_00441710(local_3c, param_4, param_3, &DAT_00e985a0, param_1);
        FUN_004414e0(pfVar4, param_4, local_30, local_3c, param_5, param_7);
        return;
    }
    FUN_00441710(local_30, param_3, param_4, &DAT_00e985a0, param_1);
    FUN_00441710(local_3c, param_3, param_2, &DAT_00e985a0, param_1);
    FUN_004414e0(pfVar4, param_3, local_30, local_3c, param_5, param_7);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00442090(float *param_1, float *param_2, float *param_3, float *param_4, float *param_5)

{
    float *pfVar1;
    float fVar2;
    float fVar3;
    bool bVar4;
    float *pfVar5;
    int iVar6;
    float *pfVar7;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    pfVar5 = param_5;
    bVar4 = false;
    if ((param_5[1] - param_2[1]) * param_1[1] + (param_5[2] - param_2[2]) * param_1[2]
            + (*param_5 - *param_2) * *param_1
        < 0.0)
    {
        if (DAT_004c1778 == 0)
        {
            return;
        }
        bVar4 = true;
    }
    FUN_00480890(param_1, param_5, &local_30);
    fVar2 = (param_5[2] - local_28) * (param_5[2] - local_28) + (param_5[1] - local_2c) * (param_5[1] - local_2c)
        + (*param_5 - local_30) * (*param_5 - local_30);
    if (fVar2 <= _DAT_00e98e6c)
    {
        local_24 = *param_3 - *param_2;
        local_20 = param_3[1] - param_2[1];
        local_1c = param_3[2] - param_2[2];
        local_18 = *param_4 - *param_3;
        local_14 = param_4[1] - param_3[1];
        local_10 = param_4[2] - param_3[2];
        local_c = *param_2 - *param_4;
        local_8 = param_2[1] - param_4[1];
        local_4 = param_2[2] - param_4[2];
        iVar6 = FUN_00441040(&local_30, param_2, param_3, param_4, &local_24, &local_18, &local_c);
        if (iVar6 == 0)
        {
            FUN_004808f0(&local_30, param_2, param_3, &local_24);
            FUN_004808f0(&local_30, param_3, param_4, &local_18);
            FUN_004808f0(&local_30, param_4, param_2, &local_c);
            fVar2 = *param_5;
            pfVar7 = param_5 + 1;
            pfVar1 = param_5 + 2;
            param_5 = (float *)((param_5[2] - local_1c) * (param_5[2] - local_1c)
                                + (param_5[1] - local_20) * (param_5[1] - local_20)
                                + (*param_5 - local_24) * (*param_5 - local_24));
            fVar2 = (*pfVar1 - local_10) * (*pfVar1 - local_10) + (*pfVar7 - local_14) * (*pfVar7 - local_14)
                + (fVar2 - local_18) * (fVar2 - local_18);
            local_2c = local_20;
            local_30 = local_24;
            local_28 = local_1c;
            if (fVar2 < (float)param_5)
            {
                local_30 = local_18;
                local_2c = local_14;
                local_28 = local_10;
                param_5 = (float *)fVar2;
            }
            fVar3 = (pfVar5[2] - local_4) * (pfVar5[2] - local_4) + (pfVar5[1] - local_8) * (pfVar5[1] - local_8)
                + (*pfVar5 - local_c) * (*pfVar5 - local_c);
            fVar2 = (float)param_5;
            if (fVar3 < (float)param_5)
            {
                local_30 = local_c;
                local_2c = local_8;
                local_28 = local_4;
                fVar2 = fVar3;
            }
        }
        param_5 = (float *)fVar2;
        if ((DAT_0050c5d8 != 0) && (DAT_0050c5d4 < 0x3f))
        {
            iVar6 = DAT_0050c5d4 * 0xc;
            DAT_0050c5d4 = DAT_0050c5d4 + 1;
            *(float *)(&DAT_00e982a0 + iVar6) = local_30;
            *(float *)(&DAT_00e982a4 + iVar6) = local_2c;
            *(float *)(&DAT_00e982a8 + iVar6) = local_28;
        }
        if ((float)param_5 <= DAT_00e98258)
        {
            if (_DAT_00e98e1c == 3)
            {
                pfVar7 = param_3;
                if (bVar4)
                {
                    *param_1 = -*param_1;
                    param_1[1] = -param_1[1];
                    param_1[2] = -param_1[2];
                    pfVar7 = param_4;
                    param_4 = param_3;
                }
                FUN_00441810(&local_30, param_2, pfVar7, param_4, pfVar5, param_5, param_1);
                return;
            }
            DAT_00e98258 = (float)param_5;
            DAT_00e98254 = DAT_00e98284;
            DAT_00e98250 = 1;
            _DAT_00e98e60 = local_30;
            DAT_00e98e64 = local_2c;
            DAT_00e98e68 = local_28;
        }
    }
    return;
}

float10 FUN_00442470(float *param_1, float *param_2, float *param_3)

{
    float10 fVar1;

    fVar1 = (float10)param_2[4] * (float10)param_1[1] + (float10)param_2[5] * (float10)param_1[2]
        + (float10)*param_1 * (float10)param_2[3];
    if (((float10)-0.0001 <= fVar1) && (fVar1 <= (float10)0.0001))
    {
        return (float10)-1.0;
    }
    fVar1 = fVar1
        / ((float10)param_1[3]
           - ((float10)*param_1 * (float10)*param_2 + (float10)param_1[1] * (float10)param_2[1]
              + (float10)param_1[2] * (float10)param_2[2]));
    if (fVar1 < (float10)0.0)
    {
        return (float10)-1.0;
    }
    if ((float10)param_2[6] < fVar1)
    {
        return (float10)-1.0;
    }
    *param_3 = (float)(fVar1 * (float10)param_2[3]);
    param_3[1] = (float)(fVar1 * (float10)param_2[4]);
    param_3[2] = (float)(fVar1 * (float10)param_2[5]);
    *param_3 = *param_3 + *param_2;
    param_3[1] = param_2[1] + param_3[1];
    param_3[2] = param_2[2] + param_3[2];
    return fVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00442550(float *param_1, float *param_2, float *param_3, float *param_4, int param_5)

{
    float fVar1;
    bool bVar2;
    int iVar3;
    float10 fVar4;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    bVar2 = false;
    if (*(float *)(param_5 + 0xc) * *param_1 + *(float *)(param_5 + 0x14) * param_1[2]
            + *(float *)(param_5 + 0x10) * param_1[1]
        <= 0.0)
    {
        if (DAT_004c1774 == 0)
        {
            return;
        }
    }
    else
    {
        if (DAT_0050c5cc == 0)
        {
            return;
        }
        bVar2 = true;
    }
    fVar4 = (float10)FUN_00442470(param_1, param_5, &local_30);
    fVar1 = (float)fVar4;
    if (((float10)0.0 <= fVar4) && (fVar1 < DAT_00e98258))
    {
        local_24 = *param_3 - *param_2;
        local_20 = param_3[1] - param_2[1];
        local_1c = param_3[2] - param_2[2];
        local_18 = *param_4 - *param_3;
        local_14 = param_4[1] - param_3[1];
        local_10 = param_4[2] - param_3[2];
        local_c = *param_2 - *param_4;
        local_8 = param_2[1] - param_4[1];
        local_4 = param_2[2] - param_4[2];
        iVar3 = FUN_00441040(&local_30, param_2, param_3, param_4, &local_24, &local_18, &local_c);
        if (iVar3 != 0)
        {
            DAT_00e98258 = fVar1;
            _DAT_00e98e60 = local_30;
            DAT_00e98250 = 1;
            DAT_00e98e64 = local_2c;
            DAT_00e98e68 = local_28;
            DAT_00e98254 = DAT_00e98284;
            if (bVar2)
            {
                _DAT_00e98290 = -*param_1;
                DAT_00e98294 = -param_1[1];
                DAT_00e98298 = -param_1[2];
                return;
            }
            _DAT_00e98290 = *param_1;
            DAT_00e98294 = param_1[1];
            DAT_00e98298 = param_1[2];
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00443110(float *param_1, float *param_2, float *param_3, float *param_4)

{
    float fVar1;

    fVar1 = -_DAT_00e985b0;
    if ((((((fVar1 <= *param_1 - _DAT_00e98e30) || (fVar1 <= *param_2 - _DAT_00e98e30))
           || (fVar1 <= *param_3 - _DAT_00e98e30))
          || (fVar1 <= *param_4 - _DAT_00e98e30))
         && (((*param_1 - _DAT_00e98e30 <= _DAT_00e985b0 || (*param_2 - _DAT_00e98e30 <= _DAT_00e985b0))
              || ((*param_3 - _DAT_00e98e30 <= _DAT_00e985b0 || (*param_4 - _DAT_00e98e30 <= _DAT_00e985b0))))))
        && ((((fVar1 <= param_1[1] - _DAT_00e98e34 || (fVar1 <= param_2[1] - _DAT_00e98e34))
              || ((fVar1 <= param_3[1] - _DAT_00e98e34 || (fVar1 <= param_4[1] - _DAT_00e98e34))))
             && (((((param_1[1] - _DAT_00e98e34 <= _DAT_00e985b0 || (param_2[1] - _DAT_00e98e34 <= _DAT_00e985b0))
                    || (param_3[1] - _DAT_00e98e34 <= _DAT_00e985b0))
                   || (param_4[1] - _DAT_00e98e34 <= _DAT_00e985b0))
                  && (((fVar1 <= param_1[2] - _DAT_00e98e38 || (fVar1 <= param_2[2] - _DAT_00e98e38))
                       || ((fVar1 <= param_3[2] - _DAT_00e98e38 || (fVar1 <= param_4[2] - _DAT_00e98e38))))))))))
    {
        if (((_DAT_00e985b0 < param_1[2] - _DAT_00e98e38) && (_DAT_00e985b0 < param_2[2] - _DAT_00e98e38))
            && ((_DAT_00e985b0 < param_3[2] - _DAT_00e98e38 && (_DAT_00e985b0 < param_4[2] - _DAT_00e98e38))))
        {
            return 0;
        }
        return 1;
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00443380(float *param_1, float *param_2, float *param_3)

{
    float fVar1;

    fVar1 = -_DAT_00e985b0;
    if ((((fVar1 <= *param_1 - _DAT_00e98e30) || (fVar1 <= *param_2 - _DAT_00e98e30))
         || (fVar1 <= *param_3 - _DAT_00e98e30))
        && ((((((*param_1 - _DAT_00e98e30 <= _DAT_00e985b0 || (*param_2 - _DAT_00e98e30 <= _DAT_00e985b0))
                || (*param_3 - _DAT_00e98e30 <= _DAT_00e985b0))
               && (((fVar1 <= param_1[1] - _DAT_00e98e34 || (fVar1 <= param_2[1] - _DAT_00e98e34))
                    || (fVar1 <= param_3[1] - _DAT_00e98e34))))
              && (((param_1[1] - _DAT_00e98e34 <= _DAT_00e985b0 || (param_2[1] - _DAT_00e98e34 <= _DAT_00e985b0))
                   || (param_3[1] - _DAT_00e98e34 <= _DAT_00e985b0))))
             && (((fVar1 <= param_1[2] - _DAT_00e98e38 || (fVar1 <= param_2[2] - _DAT_00e98e38))
                  || (fVar1 <= param_3[2] - _DAT_00e98e38))))))
    {
        if (((_DAT_00e985b0 < param_1[2] - _DAT_00e98e38) && (_DAT_00e985b0 < param_2[2] - _DAT_00e98e38))
            && (_DAT_00e985b0 < param_3[2] - _DAT_00e98e38))
        {
            return 0;
        }
        return 1;
    }
    return 0;
}

float10 FUN_004439f0(int param_1)

{
    undefined_32 uVar1;
    int *piVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int local_c;
    int local_8;
    int local_4;

    iVar4 = param_1;
    DAT_00e98284 = param_1;
    uVar1 = FUN_004317c0(param_1);
    local_4 = FUN_004317b0(iVar4);
    iVar3 = 0;
    FUN_004317e0(iVar4, 0, &param_1, &local_8);
    if (param_1 != 0)
    {
        if (local_8 == 0)
        {
            local_c = 0;
            switch (uVar1)
            {
            case 3:
                if (0 < local_4)
                {
                    iVar4 = 0;
                    do
                    {
                        (*DAT_00e98e20)(param_1 + iVar4, 0);
                        iVar4 = iVar4 + 0x12;
                        local_4 = local_4 + -1;
                    } while (local_4 != 0);
                }
                break;
            case 4:
                if (0 < local_4)
                {
                    iVar4 = 0;
                    do
                    {
                        (*DAT_00e98e20)(param_1 + iVar4, 2);
                        iVar4 = iVar4 + 0x18;
                        local_4 = local_4 + -1;
                    } while (local_4 != 0);
                    return (float10)0.0;
                }
                break;
            case 5:
            case 7:
                piVar2 = (int *)FUN_004317d0(iVar4);
                if (0 < local_4)
                {
                    do
                    {
                        iVar4 = 0;
                        iVar3 = 0;
                        if (*piVar2 != 2 && -1 < *piVar2 + -2)
                        {
                            iVar5 = local_c * 6;
                            do
                            {
                                (*DAT_00e98e20)(param_1 + iVar5, iVar4);
                                iVar4 = 1 - iVar4;
                                local_c = local_c + 1;
                                iVar5 = iVar5 + 6;
                                iVar3 = iVar3 + 1;
                            } while (iVar3 < *piVar2 + -2);
                        }
                        local_c = local_c + 2;
                        piVar2 = piVar2 + 1;
                        local_4 = local_4 + -1;
                    } while (local_4 != 0);
                    return (float10)0.0;
                }
            }
        }
        else
        {
            switch (uVar1)
            {
            case 3:
                if (0 < local_4)
                {
                    iVar4 = 0;
                    do
                    {
                        (*DAT_00e985ac)(param_1, 0, local_8 + iVar4);
                        iVar4 = iVar4 + 6;
                        local_4 = local_4 + -1;
                    } while (local_4 != 0);
                    return (float10)0.0;
                }
                break;
            case 4:
                if (0 < local_4)
                {
                    iVar4 = 0;
                    do
                    {
                        (*DAT_00e985ac)(param_1, 2, local_8 + iVar4);
                        iVar4 = iVar4 + 8;
                        local_4 = local_4 + -1;
                    } while (local_4 != 0);
                    return (float10)0.0;
                }
                break;
            case 5:
            case 7:
                piVar2 = (int *)FUN_004317d0(iVar4);
                local_c = local_4;
                if (0 < local_4)
                {
                    do
                    {
                        iVar4 = 0;
                        iVar5 = 0;
                        if (*piVar2 != 2 && -1 < *piVar2 + -2)
                        {
                            do
                            {
                                (*DAT_00e985ac)(param_1, iVar4, local_8 + iVar3 * 2);
                                iVar4 = 1 - iVar4;
                                iVar3 = iVar3 + 1;
                                iVar5 = iVar5 + 1;
                            } while (iVar5 < *piVar2 + -2);
                        }
                        iVar3 = iVar3 + 2;
                        piVar2 = piVar2 + 1;
                        local_c = local_c + -1;
                    } while (local_c != 0);
                    return (float10)0.0;
                }
            }
        }
    }
    return (float10)0.0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00443c50(byte param_1, float *param_2, float *param_3, float *param_4, float *param_5)

{
    float fVar1;
    undefined_8 local_80[48];
    float local_50;
    float local_4c;
    float local_48;
    undefined_8 local_40[48];
    float local_10;
    float local_c;
    float local_8;

    if ((param_1 & 1) == 0)
    {
        *param_2 = *param_3;
        param_2[1] = param_3[1];
        param_2[2] = param_3[2];
        if (_DAT_00e98e1c == 3)
        {
            *param_4 = *param_5;
            param_4[1] = param_5[1];
            param_4[2] = param_5[2];
            DAT_00e9827c = DAT_00e9826c;
            DAT_00e98e00 = DAT_00e98280;
        }
    }
    else
    {
        FUN_00445500(local_80);
        if ((param_1 & 2) == 0)
        {
            *param_2 = *param_3 - local_50;
            param_2[1] = param_3[1] - local_4c;
            param_2[2] = param_3[2] - local_48;
            if (_DAT_00e98e1c == 3)
            {
                *param_4 = *param_5;
                param_4[1] = param_5[1];
                fVar1 = param_5[2];
                param_4[2] = fVar1;
                DAT_00e9827c = DAT_00e9826c - (*param_4 * local_50 + local_48 * fVar1 + local_4c * param_4[1]);
                DAT_00e98e00 = DAT_00e98280 - (*param_4 * local_50 + local_4c * param_4[1] + local_48 * param_4[2]);
                return;
            }
        }
        else
        {
            mat_unk1(local_40, local_80);
            mat_transform_translate(param_2, param_3, local_40);
            if (_DAT_00e98e1c == 3)
            {
                mat_transform(param_4, param_5, local_40);
                DAT_00e9827c = *param_4 * local_10 + local_8 * param_4[2] + local_c * param_4[1] + DAT_00e9826c;
                DAT_00e98e00 = *param_4 * local_10 + local_8 * param_4[2] + local_c * param_4[1] + DAT_00e98280;
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00443e70(byte param_1)

{
    undefined_8 local_40[48];
    float local_10;
    float local_c;
    float local_8;

    if ((param_1 & 1) != 0)
    {
        FUN_00445500(local_40);
        if ((param_1 & 2) == 0)
        {
            _DAT_00e98e60 = local_10 + _DAT_00e98e60;
            DAT_00e98e64 = local_c + DAT_00e98e64;
            DAT_00e98e68 = local_8 + DAT_00e98e68;
        }
        else
        {
            mat_transform_translate(&DAT_00e98e60, &DAT_00e98e60, local_40);
            if (_DAT_00e98e1c != 2)
            {
                mat_transform(&DAT_00e98290, &DAT_00e98290, local_40);
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00443f10(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    int iVar8;
    int iVar9;

    if (param_1 != 0)
    {
        if (DAT_00e98e70 != 0)
        {
            DAT_00e98e70 = 0;
            FUN_00443c50(param_3, &DAT_00e98e30, param_2, &DAT_00e985a0, &DAT_00e98e10);
        }
        fVar2 = _DAT_00e98e30 + _DAT_00e985b0;
        fVar3 = _DAT_00e98e34 + _DAT_00e985b0;
        fVar4 = _DAT_00e98e38 + _DAT_00e985b0;
        fVar5 = _DAT_00e98e30 - _DAT_00e985b0;
        fVar6 = _DAT_00e98e34 - _DAT_00e985b0;
        fVar7 = _DAT_00e98e38 - _DAT_00e985b0;
        if (((float *)(param_1 + 0x1c) == NULL)
            || ((((fVar5 <= *(float *)(param_1 + 0x28) && (*(float *)(param_1 + 0x1c) <= fVar2))
                  && (fVar6 <= *(float *)(param_1 + 0x2c)))
                 && (((*(float *)(param_1 + 0x20) <= fVar3 && (fVar7 <= *(float *)(param_1 + 0x30)))
                      && (*(float *)(param_1 + 0x24) <= fVar4))))))
        {
            iVar8 = FUN_00431780(param_1);
            iVar9 = 0;
            if (0 < iVar8)
            {
                do
                {
                    iVar1 = *(int *)(*(int *)(param_1 + 0x18) + iVar9 * 4);
                    if (((fVar5 <= *(float *)(iVar1 + 0x14)) && (*(float *)(iVar1 + 8) <= fVar2))
                        && ((fVar6 <= *(float *)(iVar1 + 0x18)
                             && (((*(float *)(iVar1 + 0xc) <= fVar3 && (fVar7 <= *(float *)(iVar1 + 0x1c)))
                                  && (*(float *)(iVar1 + 0x10) <= fVar4))))))
                    {
                        FUN_004439f0(iVar1);
                    }
                    iVar9 = iVar9 + 1;
                } while (iVar9 < iVar8);
            }
            if (DAT_00e98250 != 0)
            {
                FUN_00443e70(param_3);
                DAT_00e98250 = 0;
            }
        }
    }
    return;
}

void FUN_004440e0(int param_1, undefined_32 param_2, uint param_3)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    undefined_8 local_40[64];

    uVar2 = get_self(param_1);
    if (uVar2 != 0x3064)
    {
        if ((uVar2 & 0x4000) != 0)
        {
            if ((uVar2 & 0x8000) != 0)
            {
                if ((*(byte *)(param_1 + 0xc) & 8) == 0)
                {
                    param_3 = param_3 | 3;
                }
                else
                {
                    param_3 = param_3 | 1;
                }
                if (uVar2 == 0xd064)
                {
                    FUN_004316a0(param_1, local_40);
                }
                else
                {
                    FUN_004316a0(param_1, local_40);
                }
                FUN_00445200(local_40);
                DAT_00e98e70 = 1;
            }
            iVar3 = FUN_00431780(param_1);
            iVar5 = 0;
            if (0 < iVar3)
            {
                do
                {
                    iVar1 = *(int *)(*(int *)(param_1 + 0x18) + iVar5 * 4);
                    if (((iVar1 != 0) && (uVar4 = FUN_00431b00(iVar1, 0), (uVar4 & DAT_0050c5dc) == DAT_0050c5dc))
                        && (uVar4 = FUN_00431b00(iVar1, 0), (uVar4 & DAT_004c177c) != 0))
                    {
                        FUN_004440e0(iVar1, param_2, param_3);
                    }
                    iVar5 = iVar5 + 1;
                } while (iVar5 < iVar3);
            }
            if ((uVar2 & 0x8000) != 0)
            {
                FUN_00445630();
                DAT_00e98e70 = 1;
            }
        }
        return;
    }
    FUN_00443f10(param_1, param_2, param_3);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00444200(float *param_1, float param_2, float *param_3, float param_4, float param_5)

{
    float fVar1;

    _DAT_00e98e6c = param_2 * param_2;
    _DAT_00e985b0 = param_2;
    _DAT_00e98e30 = param_1[0];
    _DAT_00e98e34 = param_1[1];
    _DAT_00e98e38 = param_1[2];
    _DAT_00e985a0 = param_3[0];
    _DAT_00e985a4 = param_3[1];
    _DAT_00e985a8 = param_3[2];
    DAT_00e98258 = _DAT_00e98e6c * 1.1;
    _DAT_00e98e10 = param_3[0];
    _DAT_00e98e14 = param_3[1];
    _DAT_00e98e18 = param_3[2];
    _DAT_00e98e1c = 3;
    fVar1 = param_1[0] * param_3[0] + param_3[2] * param_1[2] + param_3[1] * param_1[1];
    DAT_00e98254 = 0;
    DAT_00e98e70 = 0;
    DAT_00e98250 = 0;
    DAT_00e98e20 = &LAB_004437c0;
    DAT_00e9826c = fVar1 + param_4;
    DAT_00e98280 = fVar1 + param_5;
    DAT_00e985ac = &LAB_00443560;
    DAT_00e9827c = DAT_00e9826c;
    DAT_00e98e00 = DAT_00e98280;
    __cfltcvt_init_2();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00444300(float *param_1, float param_2, float *param_3, float param_4, float param_5, float *param_6,
                          float *param_7, float *param_8)

{
    float10 fVar1;
    float local_78;
    float local_74;
    float local_70;
    float local_6c;
    float local_68;
    float local_64;
    float local_60;
    float local_5c;
    float local_58;
    undefined_8 local_54[12];
    float local_48;
    float local_44;
    float local_40;
    float local_3c;
    float local_38;
    float local_34;
    float local_30;
    float local_2c;
    float local_28;
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    if (_DAT_00e98e6c <= DAT_00e98258)
    {
        return 0;
    }
    param_6[0] = _DAT_00e98290;
    param_6[1] = DAT_00e98294;
    param_6[2] = DAT_00e98298;
    local_78 = param_1[0] - _DAT_00e98e60;
    local_74 = param_1[1] - DAT_00e98e64;
    local_70 = param_1[2] - DAT_00e98e68;
    rdVector_Normalize3(&local_78);
    rdVector_Cross3(local_24, &local_78, param_3);
    rdVector_Cross3(local_54, local_24, param_3);
    fVar1 = (float10)rdVector_Len3(local_54);
    if ((float10)0.01 <= fVar1)
    {
        rdVector_Scale3(local_54, (float)((float10)1.0 / fVar1), local_54);
        fVar1 = (float10)SQRT3(_DAT_00e98e6c - param_4 * param_4, local_54);
        rdVector_Scale3(local_18, (float)fVar1);
        vec3f_multiply_add(&local_48, local_18, param_4, param_3);
        fVar1 = (float10)SQRT3(_DAT_00e98e6c - param_5 * param_5, local_54);
        rdVector_Scale3(local_c, (float)fVar1);
        vec3f_multiply_add(&local_6c, local_c, param_5, param_3);
        rdVector_Cross3(&local_30, &local_48, &local_78);
        rdVector_Cross3(&local_3c, &local_6c, &local_78);
        if (0.0 <= local_34 * local_28 + local_38 * local_2c + local_3c * local_30)
        {
            if (0.0 < param_6[0] * param_3[0] + param_3[1] * param_6[1] + param_3[2] * param_6[2])
            {
                local_44 = local_68;
                local_40 = local_64;
                local_48 = local_6c;
            }
            local_60 = param_1[0] + local_48;
            local_5c = local_44 + param_1[1];
            local_58 = local_40 + param_1[2];
            param_7[0] = local_6c;
            param_7[1] = local_68;
            param_7[2] = local_64;
            rdVector_Normalize3(param_7);
            vec3f_multiply_add(param_1, param_1,
                               (*param_6 * _DAT_00e98e60 + DAT_00e98e68 * param_6[2] + DAT_00e98e64 * param_6[1])
                                   - (*param_6 * local_60 + local_5c * param_6[1] + local_58 * param_6[2]),
                               param_6);
        }
        else
        {
            fVar1 = (float10)SQRT3(DAT_00e98258, &local_78);
            rdVector_Scale3(&local_78, (float)((float10)param_2 - fVar1));
            param_1[0] = param_1[0] + local_78;
            param_1[1] = local_74 + param_1[1];
            param_1[2] = local_70 + param_1[2];
            param_7[0] = -param_6[0];
            param_7[1] = -param_6[1];
            param_7[2] = -param_6[2];
        }
    }
    else
    {
        if (0.0 <= param_3[2] * local_70 + param_3[1] * local_74 + *param_3 * local_78)
        {
            fVar1 = (float10)SQRT3(DAT_00e98258, param_6);
            fVar1 = (float10)-param_5 - fVar1;
        }
        else
        {
            fVar1 = (float10)SQRT3(DAT_00e98258, param_6);
            fVar1 = -((float10)param_4 - fVar1);
        }
        rdVector_Scale3(&local_78, (float)fVar1);
        param_1[0] = param_1[0] + local_78;
        param_1[1] = local_74 + param_1[1];
        param_1[2] = local_70 + param_1[2];
        param_7[0] = -param_6[0];
        param_7[1] = -param_6[1];
        param_7[2] = -param_6[2];
    }
    param_8[0] = _DAT_00e98e60;
    param_8[1] = DAT_00e98e64;
    param_8[2] = DAT_00e98e68;
    if (DAT_00e98254 != 0)
    {
        DAT_0050c5d0 = DAT_00e98254;
    }
    return 1;
}

undefined_32 FUN_00444740(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                          undefined_32 param_5, undefined_32 param_6, undefined_32 param_7, undefined_32 param_8,
                          undefined_32 param_9)

{
    undefined_32 uVar1;

    if (param_1 == 0)
    {
        return 0;
    }
    FUN_00444200(param_2, param_3, param_4, param_5, param_6);
    FUN_004440e0(param_1, param_2, 0);
    uVar1 = FUN_00444300(param_2, param_3, param_4, param_5, param_6, param_7, param_8, param_9);
    return uVar1;
}

void FUN_004447b0(byte param_1, int param_2, int param_3, int param_4)

{
    float *pfVar1;
    undefined_32 *puVar2;
    float *pfVar3;
    undefined_32 *puVar4;
    int iVar5;
    undefined_8 local_80[48];
    float local_50;
    float local_4c;
    float local_48;
    undefined_8 local_40[64];

    if ((param_1 & 1) == 0)
    {
        if (0 < param_2)
        {
            puVar2 = (undefined_32 *)(param_3 + 4);
            puVar4 = (undefined_32 *)(param_4 + 0xc);
            do
            {
                puVar2[-1] = puVar4[-3];
                puVar2[0] = *(undefined_32 *)((int)puVar2 + (param_4 - param_3));
                puVar2[1] = puVar4[-1];
                puVar2[2] = puVar4[0];
                puVar2[3] = puVar4[1];
                puVar2[4] = puVar4[2];
                puVar2 = puVar2 + 7;
                param_2 = param_2 + -1;
                puVar4 = puVar4 + 7;
            } while (param_2 != 0);
        }
    }
    else
    {
        FUN_00445500(local_80);
        if ((param_1 & 2) == 0)
        {
            if (0 < param_2)
            {
                pfVar1 = (float *)(param_3 + 4);
                pfVar3 = (float *)(param_4 + 0xc);
                do
                {
                    param_2 = param_2 + -1;
                    pfVar1[-1] = pfVar3[-3] - local_50;
                    pfVar1[0] = *(float *)((int)pfVar1 + (param_4 - param_3)) - local_4c;
                    pfVar1[1] = pfVar3[-1] - local_48;
                    pfVar1[2] = pfVar3[0];
                    pfVar1[3] = pfVar3[1];
                    pfVar1[4] = pfVar3[2];
                    pfVar1 = pfVar1 + 7;
                    pfVar3 = pfVar3 + 7;
                } while (param_2 != 0);
                return;
            }
        }
        else
        {
            mat_unk1(local_40, local_80);
            if (0 < param_2)
            {
                iVar5 = param_3 + 0xc;
                param_3 = param_4 - param_3;
                do
                {
                    mat_transform_translate(iVar5 + -0xc, param_4, local_40);
                    mat_transform(iVar5, param_3 + iVar5, local_40);
                    param_4 = param_4 + 0x1c;
                    iVar5 = iVar5 + 0x1c;
                    param_2 = param_2 + -1;
                } while (param_2 != 0);
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00444910(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;
    float local_c;
    float local_8;
    float local_4;

    iVar5 = 0;
    if (param_1 == 0)
    {
        DAT_00e98258 = -1.0f;
        return;
    }
    if (DAT_00e98e70 != 0)
    {
        DAT_00e98e70 = 0;
        FUN_004447b0(param_3, 1, &DAT_00e98e40, param_2);
    }
    vec3f_multiply_add(&local_c, &DAT_00e98e40, DAT_00e98e58, &DAT_00e98e4c);
    if (0.0 <= _DAT_00e98e4c)
    {
        _DAT_00e98270 = DAT_00e98e40;
        _DAT_00e98260 = local_c;
    }
    else
    {
        _DAT_00e98260 = DAT_00e98e40;
        _DAT_00e98270 = local_c;
    }
    if (0.0 <= _DAT_00e98e50)
    {
        _DAT_00e98274 = DAT_00e98e44;
        _DAT_00e98264 = local_8;
    }
    else
    {
        _DAT_00e98264 = DAT_00e98e44;
        _DAT_00e98274 = local_8;
    }
    if (0.0 <= _DAT_00e98e54)
    {
        _DAT_00e98278 = DAT_00e98e48;
        _DAT_00e98268 = local_4;
    }
    else
    {
        _DAT_00e98268 = DAT_00e98e48;
        _DAT_00e98278 = local_4;
    }
    if (((float *)(param_1 + 0x1c) == NULL)
        || (((((*(float *)(param_1 + 0x1c) <= _DAT_00e98260 && (_DAT_00e98270 <= *(float *)(param_1 + 0x28)))
               && (*(float *)(param_1 + 0x20) <= _DAT_00e98264))
              && ((_DAT_00e98274 <= *(float *)(param_1 + 0x2c) && (*(float *)(param_1 + 0x24) <= _DAT_00e98268))))
             && (_DAT_00e98278 <= *(float *)(param_1 + 0x30)))))
    {
        iVar2 = FUN_00431780(param_1);
        if (0 < iVar2)
        {
            do
            {
                iVar1 = *(int *)(*(int *)(param_1 + 0x18) + iVar5 * 4);
                if (((*(float *)(iVar1 + 8) <= _DAT_00e98260) && (_DAT_00e98270 <= *(float *)(iVar1 + 0x14)))
                    && ((*(float *)(iVar1 + 0xc) <= _DAT_00e98264
                         && (((_DAT_00e98274 <= *(float *)(iVar1 + 0x18) && (*(float *)(iVar1 + 0x10) <= _DAT_00e98268))
                              && (_DAT_00e98278 <= *(float *)(iVar1 + 0x1c)))))))
                {
                    if (DAT_0050c5c8 == 0)
                    {
                        uVar3 = get_self(iVar1, 1);
                        iVar4 = FUN_00431880(uVar3);
                        if ((iVar4 == 1) || (DAT_0050c5cc = 1, iVar4 == 3))
                        {
                            DAT_0050c5cc = 0;
                        }
                        if ((iVar4 == 2) || (DAT_004c1774 = 1, iVar4 == 3))
                        {
                            DAT_004c1774 = 0;
                        }
                    }
                    else
                    {
                        DAT_0050c5cc = 1;
                        DAT_004c1774 = 1;
                    }
                    FUN_004439f0(iVar1);
                }
                iVar5 = iVar5 + 1;
            } while (iVar5 < iVar2);
        }
        if (DAT_00e98250 != 0)
        {
            FUN_00443e70(param_3);
            DAT_00e98250 = 0;
        }
    }
    return;
}

void FUN_00444bf0(int param_1, undefined_32 param_2, uint param_3)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    undefined_8 local_40[64];

    uVar2 = get_self(param_1);
    if (uVar2 != 0x3064)
    {
        if ((uVar2 & 0x4000) != 0)
        {
            if ((uVar2 & 0x8000) != 0)
            {
                if ((*(byte *)(param_1 + 0xc) & 8) == 0)
                {
                    param_3 = param_3 | 3;
                }
                else
                {
                    param_3 = param_3 | 1;
                }
                if (uVar2 == 0xd064)
                {
                    FUN_004316a0(param_1, local_40);
                }
                else
                {
                    FUN_004316a0(param_1, local_40);
                }
                FUN_00445200(local_40);
                DAT_00e98e70 = 1;
            }
            iVar3 = FUN_00431780(param_1);
            iVar5 = 0;
            if (0 < iVar3)
            {
                do
                {
                    iVar1 = *(int *)(*(int *)(param_1 + 0x18) + iVar5 * 4);
                    if (((iVar1 != 0) && (uVar4 = FUN_00431b00(iVar1, 0), (uVar4 & DAT_0050c5dc) == DAT_0050c5dc))
                        && (uVar4 = FUN_00431b00(iVar1, 0), (uVar4 & DAT_004c177c) != 0))
                    {
                        FUN_00444bf0(iVar1, param_2, param_3);
                    }
                    iVar5 = iVar5 + 1;
                } while (iVar5 < iVar3);
            }
            if ((uVar2 & 0x8000) != 0)
            {
                FUN_00445630();
                DAT_00e98e70 = 1;
            }
        }
        return;
    }
    FUN_00444910(param_1, param_2, param_3);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// float param_3[3], float param_4[3]
float10 FUN_00444d10(int param_1, undefined_32 *param_2, undefined_32 *param_3, undefined_32 *param_4)

{
    if (param_1 == 0)
    {
        DAT_00e98258 = -1.0;
    }
    else
    {
        DAT_00e98258 = (float)param_2[6] - -200.0;
        DAT_00e98254 = 0;
        DAT_00e98e58 = param_2[6];
        _DAT_00e98e4c = param_2[3];
        _DAT_00e98e50 = param_2[4];
        _DAT_00e98e54 = param_2[5];
        DAT_00e98e40 = *param_2;
        DAT_00e98e44 = param_2[1];
        DAT_00e98e48 = param_2[2];
        _DAT_00e98e1c = 1;
        DAT_00e98e20 = &LAB_00442c30;
        DAT_00e985ac = &LAB_00442720;
        DAT_00e98e70 = 0;
        DAT_00e98250 = 0;
        __cfltcvt_init_2();
        FUN_00444bf0(param_1, param_2, 0);
        if (DAT_00e98258 <= (float)param_2[6])
        {
            *param_3 = _DAT_00e98e60;
            param_3[1] = DAT_00e98e64;
            param_3[2] = DAT_00e98e68;
            *param_4 = _DAT_00e98290;
            param_4[1] = DAT_00e98294;
            param_4[2] = DAT_00e98298;
        }
        else
        {
            DAT_00e98258 = -1.0;
        }
    }
    if (DAT_00e98254 != 0)
    {
        DAT_0050c5d0 = DAT_00e98254;
    }
    return (float10)DAT_00e98258;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00444e40(int param_1, undefined_32 *param_2)

{
    if (param_1 == 0)
    {
        return 0;
    }
    DAT_00e98258 = (float)param_2[6] - -200.0;
    DAT_00e98254 = 0;
    DAT_00e98e58 = param_2[6];
    _DAT_00e98e4c = param_2[3];
    _DAT_00e98e50 = param_2[4];
    _DAT_00e98e54 = param_2[5];
    DAT_00e98e40 = *param_2;
    DAT_00e98e44 = param_2[1];
    DAT_00e98e48 = param_2[2];
    _DAT_00e98e1c = 1;
    DAT_00e98e20 = &LAB_00442c30;
    DAT_00e985ac = &LAB_00442720;
    DAT_00e98e70 = 0;
    DAT_00e98250 = 0;
    __cfltcvt_init_2();
    FUN_00444bf0(param_1, param_2, 0);
    if ((float)param_2[6] < DAT_00e98258)
    {
        return 0;
    }
    return DAT_00e98254;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

float10 FUN_00444f10(int param_1, undefined_32 *param_2, undefined_32 *param_3, undefined_32 *param_4)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    if (param_1 == 0)
    {
        DAT_00e98258 = -1.0;
    }
    else
    {
        DAT_00e98258 = (float)param_2[6] - -200.0;
        DAT_00e98e58 = param_2[6];
        _DAT_00e98e4c = (float)param_2[3];
        _DAT_00e98e50 = (float)param_2[4];
        _DAT_00e98e54 = (float)param_2[5];
        DAT_00e98e40 = *param_2;
        DAT_00e98e44 = param_2[1];
        DAT_00e98e48 = param_2[2];
        _DAT_00e98e1c = 1;
        DAT_00e98e20 = &LAB_00442c30;
        DAT_00e985ac = &LAB_00442720;
        vec3f_multiply_add(&local_c, &DAT_00e98e40, DAT_00e98e58, &DAT_00e98e4c);
        if (0.0 <= _DAT_00e98e4c)
        {
            _DAT_00e98270 = DAT_00e98e40;
            _DAT_00e98260 = local_c;
        }
        else
        {
            _DAT_00e98260 = DAT_00e98e40;
            _DAT_00e98270 = local_c;
        }
        if (0.0 <= _DAT_00e98e50)
        {
            _DAT_00e98274 = DAT_00e98e44;
            _DAT_00e98264 = local_8;
        }
        else
        {
            _DAT_00e98264 = DAT_00e98e44;
            _DAT_00e98274 = local_8;
        }
        if (0.0 <= _DAT_00e98e54)
        {
            _DAT_00e98278 = DAT_00e98e48;
            _DAT_00e98268 = local_4;
        }
        else
        {
            _DAT_00e98268 = DAT_00e98e48;
            _DAT_00e98278 = local_4;
        }
        if (DAT_0050c5c8 == 0)
        {
            uVar1 = get_self(param_1, 1);
            iVar2 = FUN_00431880(uVar1);
            if ((iVar2 == 1) || (DAT_0050c5cc = 1, iVar2 == 3))
            {
                DAT_0050c5cc = 0;
            }
            if ((iVar2 == 2) || (DAT_004c1774 = 1, iVar2 == 3))
            {
                DAT_004c1774 = 0;
            }
        }
        else
        {
            DAT_0050c5cc = 1;
            DAT_004c1774 = 1;
        }
        FUN_004439f0(param_1);
        if (DAT_00e98258 <= (float)param_2[6])
        {
            *param_3 = _DAT_00e98e60;
            param_3[1] = DAT_00e98e64;
            param_3[2] = DAT_00e98e68;
            *param_4 = _DAT_00e98290;
            param_4[1] = DAT_00e98294;
            param_4[2] = DAT_00e98298;
        }
        else
        {
            DAT_00e98258 = -1.0;
        }
    }
    if (DAT_00e98254 != 0)
    {
        DAT_0050c5d0 = DAT_00e98254;
    }
    return (float10)DAT_00e98258;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 00445150
void __cfltcvt_init_2(void)

{
    DAT_0050c5e8 = 0;
    _DAT_00e985c0 = 1.0;
    _DAT_00e985c4 = 0;
    _DAT_00e985c8 = 0;
    _DAT_00e985cc = 0;
    _DAT_00e985d0 = 0;
    _DAT_00e985d4 = 1.0;
    _DAT_00e985d8 = 0;
    _DAT_00e985dc = 0;
    _DAT_00e985e0 = 0;
    _DAT_00e985e4 = 0;
    _DAT_00e985e8 = 1.0;
    _DAT_00e985ec = 0;
    _DAT_00e985f0 = 0;
    _DAT_00e985f4 = 0;
    _DAT_00e985f8 = 0;
    _DAT_00e985fc = 1.0;
    return;
}

void FUN_00445200(float *param_1)

{
    int iVar1;
    int iVar2;

    if (DAT_0050c5e8 < 0x20)
    {
        iVar1 = DAT_0050c5e8 + 1;
        iVar2 = iVar1 * 0x40;
        DAT_0050c5e8 = iVar1;
        *(float *)(&DAT_00e985c0 + iVar2) = *(float *)(&DAT_00e98590 + iVar2) * param_1[1]
            + param_1[3] * *(float *)(&DAT_00e985b0 + iVar2) + *(float *)(&DAT_00e985a0 + iVar2) * param_1[2]
            + *param_1 * *(float *)(&DAT_00e98580 + iVar2);
        *(float *)(&DAT_00e985c4 + iVar2) = *(float *)(&DAT_00e98594 + iVar2) * param_1[1]
            + *(float *)(&DAT_00e985a4 + iVar2) * param_1[2] + *(float *)(&DAT_00e985b4 + iVar2) * param_1[3]
            + *param_1 * *(float *)(&DAT_00e98584 + iVar2);
        *(float *)(&DAT_00e985c8 + iVar2) = *(float *)(&DAT_00e985b8 + iVar2) * param_1[3]
            + *(float *)(&DAT_00e985a8 + iVar2) * param_1[2] + *(float *)(&DAT_00e98598 + iVar2) * param_1[1]
            + *param_1 * *(float *)(&DAT_00e98588 + iVar2);
        *(float *)(&DAT_00e985cc + iVar2) = *(float *)(&DAT_00e985bc + iVar2) * param_1[3]
            + *(float *)(&DAT_00e9859c + iVar2) * param_1[1] + (float)(&DAT_00e985ac)[iVar1 * 0x10] * param_1[2]
            + *param_1 * *(float *)(&DAT_00e9858c + iVar2);
        *(float *)(&DAT_00e985d0 + iVar2) = param_1[5] * *(float *)(&DAT_00e98590 + iVar2)
            + param_1[6] * *(float *)(&DAT_00e985a0 + iVar2) + param_1[7] * *(float *)(&DAT_00e985b0 + iVar2)
            + *(float *)(&DAT_00e98580 + iVar2) * param_1[4];
        *(float *)(&DAT_00e985d4 + iVar2) = param_1[4] * *(float *)(&DAT_00e98584 + iVar2)
            + param_1[5] * *(float *)(&DAT_00e98594 + iVar2) + param_1[7] * *(float *)(&DAT_00e985b4 + iVar2)
            + param_1[6] * *(float *)(&DAT_00e985a4 + iVar2);
        *(float *)(&DAT_00e985d8 + iVar2) = param_1[6] * *(float *)(&DAT_00e985a8 + iVar2)
            + param_1[5] * *(float *)(&DAT_00e98598 + iVar2) + param_1[7] * *(float *)(&DAT_00e985b8 + iVar2)
            + param_1[4] * *(float *)(&DAT_00e98588 + iVar2);
        *(float *)(&DAT_00e985dc + iVar2) = param_1[4] * *(float *)(&DAT_00e9858c + iVar2)
            + param_1[5] * *(float *)(&DAT_00e9859c + iVar2) + param_1[7] * *(float *)(&DAT_00e985bc + iVar2)
            + param_1[6] * (float)(&DAT_00e985ac)[iVar1 * 0x10];
        *(float *)(&DAT_00e985e0 + iVar2) = param_1[0xb] * *(float *)(&DAT_00e985b0 + iVar2)
            + param_1[10] * *(float *)(&DAT_00e985a0 + iVar2) + param_1[9] * *(float *)(&DAT_00e98590 + iVar2)
            + *(float *)(&DAT_00e98580 + iVar2) * param_1[8];
        *(float *)(&DAT_00e985e4 + iVar2) = param_1[10] * *(float *)(&DAT_00e985a4 + iVar2)
            + param_1[0xb] * *(float *)(&DAT_00e985b4 + iVar2) + param_1[9] * *(float *)(&DAT_00e98594 + iVar2)
            + param_1[8] * *(float *)(&DAT_00e98584 + iVar2);
        *(float *)(&DAT_00e985e8 + iVar2) = param_1[0xb] * *(float *)(&DAT_00e985b8 + iVar2)
            + param_1[9] * *(float *)(&DAT_00e98598 + iVar2) + param_1[10] * *(float *)(&DAT_00e985a8 + iVar2)
            + param_1[8] * *(float *)(&DAT_00e98588 + iVar2);
        *(float *)(&DAT_00e985ec + iVar2) = param_1[10] * (float)(&DAT_00e985ac)[iVar1 * 0x10]
            + param_1[0xb] * *(float *)(&DAT_00e985bc + iVar2) + param_1[9] * *(float *)(&DAT_00e9859c + iVar2)
            + param_1[8] * *(float *)(&DAT_00e9858c + iVar2);
        *(float *)(&DAT_00e985f0 + iVar2) = param_1[0xe] * *(float *)(&DAT_00e985a0 + iVar2)
            + param_1[0xd] * *(float *)(&DAT_00e98590 + iVar2) + param_1[0xf] * *(float *)(&DAT_00e985b0 + iVar2)
            + *(float *)(&DAT_00e98580 + iVar2) * param_1[0xc];
        *(float *)(&DAT_00e985f4 + iVar2) = param_1[0xc] * *(float *)(&DAT_00e98584 + iVar2)
            + param_1[0xe] * *(float *)(&DAT_00e985a4 + iVar2) + param_1[0xd] * *(float *)(&DAT_00e98594 + iVar2)
            + param_1[0xf] * *(float *)(&DAT_00e985b4 + iVar2);
        *(float *)(&DAT_00e985f8 + iVar2) = param_1[0xf] * *(float *)(&DAT_00e985b8 + iVar2)
            + param_1[0xc] * *(float *)(&DAT_00e98588 + iVar2) + param_1[0xd] * *(float *)(&DAT_00e98598 + iVar2)
            + param_1[0xe] * *(float *)(&DAT_00e985a8 + iVar2);
        *(float *)(&DAT_00e985fc + iVar2) = param_1[0xd] * *(float *)(&DAT_00e9859c + iVar2)
            + param_1[0xc] * *(float *)(&DAT_00e9858c + iVar2) + param_1[0xe] * (float)(&DAT_00e985ac)[iVar1 * 0x10]
            + param_1[0xf] * *(float *)(&DAT_00e985bc + iVar2);
    }
    return;
}

void FUN_00445500(undefined_32 *param_1)

{
    *param_1 = *(undefined_32 *)(&DAT_00e985c0 + DAT_0050c5e8 * 0x40);
    param_1[1] = *(undefined_32 *)(&DAT_00e985c4 + DAT_0050c5e8 * 0x40);
    param_1[2] = *(undefined_32 *)(&DAT_00e985c8 + DAT_0050c5e8 * 0x40);
    param_1[3] = *(undefined_32 *)(&DAT_00e985cc + DAT_0050c5e8 * 0x40);
    param_1[4] = *(undefined_32 *)(&DAT_00e985d0 + DAT_0050c5e8 * 0x40);
    param_1[5] = *(undefined_32 *)(&DAT_00e985d4 + DAT_0050c5e8 * 0x40);
    param_1[6] = *(undefined_32 *)(&DAT_00e985d8 + DAT_0050c5e8 * 0x40);
    param_1[7] = *(undefined_32 *)(&DAT_00e985dc + DAT_0050c5e8 * 0x40);
    param_1[8] = *(undefined_32 *)(&DAT_00e985e0 + DAT_0050c5e8 * 0x40);
    param_1[9] = *(undefined_32 *)(&DAT_00e985e4 + DAT_0050c5e8 * 0x40);
    param_1[10] = *(undefined_32 *)(&DAT_00e985e8 + DAT_0050c5e8 * 0x40);
    param_1[0xb] = *(undefined_32 *)(&DAT_00e985ec + DAT_0050c5e8 * 0x40);
    param_1[0xc] = *(undefined_32 *)(&DAT_00e985f0 + DAT_0050c5e8 * 0x40);
    param_1[0xd] = *(undefined_32 *)(&DAT_00e985f4 + DAT_0050c5e8 * 0x40);
    param_1[0xe] = *(undefined_32 *)(&DAT_00e985f8 + DAT_0050c5e8 * 0x40);
    param_1[0xf] = *(undefined_32 *)(&DAT_00e985fc + DAT_0050c5e8 * 0x40);
    return;
}

void FUN_00445630(void)

{
    if (0 < DAT_0050c5e8)
    {
        DAT_0050c5e8 = DAT_0050c5e8 + -1;
    }
    return;
}

void FUN_00445640(int param_1, undefined_32 param_2)

{
    if (param_1 == 3)
    {
        DAT_004c177c = param_2;
    }
    if (param_1 == 5)
    {
        DAT_0050c5dc = param_2;
    }
    return;
}

undefined_32 FUN_00445660(int param_1)

{
    if (param_1 == 3)
    {
        return DAT_004c177c;
    }
    if (param_1 == 5)
    {
        return DAT_0050c5dc;
    }
    return -1;
}

void FUN_00445680(void)

{
    if (DAT_0050c5f4 == 0)
    {
        FUN_004457d0();
        return;
    }
    return;
}

undefined_32 FUN_00445690(void)

{
    return DAT_0050c5f0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

float10 FUN_004456a0(void)

{
    return (float10)_DAT_00e9824c;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004456b0(void)

{
    undefined_32 local_10;
    undefined_32 local_c;

    if (DAT_0050c5f4 == 0)
    {
        if (DAT_004d5e00 != 0)
        {
            _DAT_004c4a58 = 1.0f;
            return;
        }
        FUN_00449e50();
        FUN_00426c80(0x4e, 6, 0.25f, 1.0f, 0);
        DAT_0050c5f0 = 2;
        local_10 = 0x50617773;
        local_c = 1;
        FUN_00450c50(MAGIC('A', 'l', 'l', '!'), &local_10);
        FUN_0042ad60();
        FUN_0040a120(1);
    }
    return;
}

void FUN_00445730(void)

{
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;

    if (DAT_0050c5f4 == 0)
    {
        DAT_0050c5f0 = 0;
        local_10 = 0x50617773;
        local_c = -1;
        local_8 = FUN_0042adf0();
        FUN_00450c50(MAGIC('A', 'l', 'l', '!'), &local_10);
        FUN_0040a0b0(0x11);
    }
    return;
}

void FUN_00445780(void)

{
    if (DAT_0050c5f4 == 0)
    {
        FUN_00426c80(0x4d, 6, 0.25f, 1.0f, 0);
        DAT_0050c5f0 = 3;
    }
    return;
}

void FUN_004457b0(void)

{
    DAT_0050c5f4 = 0;
    DAT_0050c5f8 = 1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// Looks like PauseFunction
void FUN_004457d0(void)

{
    int iVar1;

    if (DAT_0050c5f0 == 0)
    {
        iVar1 = FUN_00450b30(MAGIC('J', 'd', 'g', 'e'), 0);
        if (iVar1 != 0)
        {
            iVar1 = FUN_00450b30(MAGIC('J', 'd', 'g', 'e'), 0);
            if ((*(ushort *)(iVar1 + 6) & 0x1000) == 0)
            {
                iVar1 = FUN_00462d40();
                if (iVar1 != 0)
                {
                    FUN_004456b0();
                    return;
                }
            }
            else if (((((byte)DAT_0050c048 & 1) != 0)
                      && (((DAT_00e98eb0 & 0x200) != 0 || ((_DAT_00e98eb4 & 0x200) != 0))))
                     && ((DAT_0050c5f0 == 1 || ((DAT_00e98e90 & 0x400) != 0))))
            {
                FUN_004456b0();
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00445860(void)

{
    int iVar1;
    undefined_8 local_100[256];

    if (((byte)DAT_0050c048 & 1) != 0)
    {
        _sprintf(local_100, s_Version___s_004c178c, s_GNOME_000_004c17c8);
        create_text_entry_1(0x1e, 0xd2, local_100);
    }
    if (DAT_0050c5f0 == 3)
    {
        if (0.0 < _DAT_00e9824c)
        {
            _DAT_00e9824c = _DAT_00e9824c - (float)_DAT_00e22a40 * 4.0;
            if (_DAT_00e9824c < 0.0)
            {
                _DAT_00e9824c = 0.0;
            }
        }
        else
        {
            FUN_00445730();
        }
    }
    else if (DAT_0050c5f0 == 2)
    {
        _DAT_00e9824c = (float)_DAT_00e22a40 * 4.0 + _DAT_00e9824c;
        if (1.0 < _DAT_00e9824c)
        {
            _DAT_00e9824c = 1.0;
            DAT_0050c5f0 = 1;
        }
    }
    iVar1 = FUN_00450b30(MAGIC('J', 'd', 'g', 'e'), 0);
    if ((*(ushort *)(iVar1 + 6) & 0x1000) == 0)
    {
        FUN_00462cf0();
    }
    FUN_0042ae00();
    return;
}

void FUN_00445960(void)

{
    FUN_00431ba0();
    DAT_00e996dc = DAT_00e996dc | 0x40;
    return;
}

void FUN_00445980(short param_1, short param_2)

{
    int iVar1;

    if ((param_2 == 1) || (param_2 == 0))
    {
        FUN_00426920();
        FUN_00426910();
        FUN_004270c0();
        FUN_00426910();
        FUN_00440df0();
        FUN_00426910();
        FUN_00480540();
        FUN_004270c0();
        FUN_004276c0();
        FUN_00427880();
        FUN_00445680();
        iVar1 = FUN_00445690();
        if (iVar1 == 0)
        {
            FUN_00426660();
            FUN_004508b0();
            FUN_004270c0();
            FUN_00450930();
            FUN_004509b0();
            FUN_004270c0();
            FUN_00450a30();
        }
        else
        {
            FUN_00445860();
        }
        FUN_00429540();
        FUN_004270c0();
    }
    if ((param_2 == 2) || (param_2 == 0))
    {
        thunk_FUN_0042be60();
        FUN_00489bc0();
        FUN_00483cb0();
        if (param_1 == 0)
        {
            FUN_00426910();
            FUN_00482e20();
        }
        FUN_00426910();
        FUN_00426910();
        FUN_004270c0();
        FUN_004270d0();
    }
    return;
}

void FUN_00445a50(void)

{
    FUN_00426910(1);
    FUN_00426910();
    FUN_00426910();
    FUN_00426910();
    FUN_00426910(1);
    FUN_004834b0();
    FUN_00426910();
    thunk_FUN_00449d60();
    FUN_00426910(1);
    FUN_004491f0(0, 1);
    return;
}

void FUN_00445aa0(int param_1)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;
    int iVar4;

    DAT_0050c614 = param_1;
    uVar1 = *(undefined_32 *)(&DAT_00e981fc + param_1 * 4);
    (&DAT_00e98200)[param_1] = uVar1;
    FUN_004475d0(uVar1);
    FUN_00426910(1);
    iVar2 = DAT_0050c614;
    if (DAT_0050c614 < 9)
    {
        puVar3 = &DAT_00e98224;
        iVar4 = 9 - DAT_0050c614;
        do
        {
            *puVar3 = 0;
            puVar3 = puVar3 + -1;
            iVar4 = iVar4 + -1;
        } while (iVar4 != 0);
    }
    iVar4 = 9;
    DAT_0050c610 = 0;
    if (iVar2 < 10)
    {
        do
        {
            FUN_00408eb0(iVar4);
            iVar4 = iVar4 + -1;
        } while (DAT_0050c614 <= iVar4);
    }
    return;
}

// 00445b20
void set_buffer_index(undefined_32 param_1)

{
    (&DAT_00e98200)[DAT_0050c614] = param_1;
    FUN_00426910(1);
    return;
}

// 00445b40
undefined_32 get_buffer_index(void)

{
    return (&DAT_00e98200)[DAT_0050c614];
}

// 00445b50
bool is_less_than_buffer_index(uint param_1)
{
    uint uVar1;

    uVar1 = get_buffer_index();
    return param_1 < uVar1;
}

int FUN_00445b60(uint param_1)

{
    int iVar1;
    uint *puVar2;

    iVar1 = DAT_0050c614 + -1;
    if (0 < iVar1)
    {
        puVar2 = &DAT_00e98200 + iVar1;
        do
        {
            if (*puVar2 <= param_1)
                break;
            iVar1 = iVar1 + -1;
            puVar2 = puVar2 + -1;
        } while (0 < iVar1);
    }
    return iVar1 + 1;
}

void FUN_00445b90(void)

{
    int *piVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_8 local_40[64];

    iVar2 = 1;
    if (DAT_00e98204 != 0)
    {
        puVar3 = &DAT_00e98204;
        do
        {
            if (DAT_0050c608 != 0)
            {
                _sprintf(local_40, s__DP___d_004c17ec, iVar2);
            }
            piVar1 = puVar3 + 1;
            puVar3 = puVar3 + 1;
            iVar2 = iVar2 + 1;
        } while (*piVar1 != 0);
    }
    if (DAT_00e981e4 <= *(uint *)(&DAT_00e981fc + iVar2 * 4))
    {
        do
        {
            // WARNING: Do nothing block with infinite loop
        } while (true);
    }
    return;
}

// 00445bf0
int FUN_00445bf0(void)

{
    int iVar1;

    iVar1 = get_buffer_index();
    return DAT_00e981e4 - iVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00445c00(void)

{
    _DAT_00e996c0 = 0;
    _DAT_00e996c4 = 0;
    _DAT_00e996c8 = 0;
    _DAT_00e996cc = 0;
    _DAT_00e996d0 = 0;
    _DAT_00e996d4 = 0;
    _DAT_00e996d8 = 0;
    _DAT_00e996e0 = 2;
    sprite_set_color(0xffffff99, 0, 0, 0, -1);
    FUN_0044e0e0(0x3e4, 1000, 0xff, 0xff, 0xff, 0xff);
    return;
}

//----- (00445C90) --------------------------------------------------------
// Calculate texture POT (power of two) width or height from non-POT size
// Results smaller than 16 will be raised to 16
int ceil_power_of_two(uint param_1)

{
    uint uVar1;
    uint uVar2;
    int iVar3;

    uVar1 = 0x40000000; // 2^31
    iVar3 = 0x1f; // 31
    do
    {
        if (iVar3 == 0)
            break;
        uVar2 = uVar1 & param_1;
        uVar1 = (int)uVar1 >> 1;
        iVar3 = iVar3 + -1;
    } while (uVar2 == 0);
    iVar3 = uVar1 * 2;
    if (iVar3 < (int)param_1)
    {
        iVar3 = uVar1 << 2;
    }
    if (iVar3 < 0x10)
    {
        iVar3 = 0x10;
    }
    return iVar3;
}

void FUN_00445cd0(int param_1, int param_2, int param_3, int param_4, undefined_32 param_5, int *param_6,
                  undefined_32 param_7)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    undefined_32 *local_e4;
    undefined_32 local_e0[56];

    local_e4 = local_e0;
    iVar1 = FUN_0048e680(s___data_default_mat_004b48cc);
    FUN_00408fb0(param_5, iVar1);
    _sprintf(iVar1, s_Rovermatic_004b48c0);
    *(float *)(iVar1 + 10) = (float)param_1 / (float)param_3;
    *(float *)(iVar1 + 0xe) = (float)param_2 / (float)param_4;
    *(undefined_32 *)(iVar1 + 0x4c) = 5;
    *(undefined_32 *)(iVar1 + 0x50) = 5;
    *(undefined_32 *)(iVar1 + 0x54) = 5;
    *(undefined_32 *)(iVar1 + 100) = 3;
    *(undefined_32 *)(iVar1 + 0x68) = 3;
    *(undefined_32 *)(iVar1 + 0x6c) = 3;
    *(undefined_32 *)(iVar1 + 0x40) = 0;
    *(undefined_32 *)(iVar1 + 0x44) = 2;
    *(undefined_32 *)(iVar1 + 0x48) = 0x10;
    *(undefined_32 *)(iVar1 + 0x70) = 1;
    *(undefined_32 *)(iVar1 + 0x58) = 0xb;
    *(undefined_32 *)(iVar1 + 0x5c) = 6;
    *(undefined_32 *)(iVar1 + 0x60) = 1;
    *(undefined_32 *)(iVar1 + 0x74) = 0;
    *(undefined_32 *)(iVar1 + 0x78) = 7;
    *(undefined_32 *)(iVar1 + 0x7c) = 1;
    *(int *)(iVar1 + 0x80) = param_3;
    *(int *)(iVar1 + 0x84) = param_4;
    *(undefined_32 *)(iVar1 + 0x88) = 1;
    *(undefined_32 *)(iVar1 + 0x8c) = 0;
    *local_e4 = 0;
    local_e4[1] = 0;
    local_e4[2] = 0;
    local_e4[3] = param_3;
    local_e4[4] = param_4;
    local_e4[5] = param_4 * param_3 * 2;
    local_e4[6] = param_3 * 2;
    local_e4[7] = param_3;
    puVar3 = (undefined_32 *)(iVar1 + 0x44);
    puVar4 = local_e4 + 8;
    QMEMCPY(iVar2, puVar3, puVar4, 0xe)
    local_e4[0x16] = param_7;
    local_e4[0x17] = 0;
    FUN_0048aa40(*(undefined_32 *)(iVar1 + 0x90));
    FUN_0048a5e0(*(undefined_32 *)(iVar1 + 0x90), &local_e4, 1, *(undefined_32 *)(iVar1 + 0x7c));
    *param_6 = iVar1;
    return;
}

void FUN_00445e50(int param_1, int param_2, int param_3, byte *param_4, int param_5, undefined_32 *param_6)

{
    byte bVar1;
    ushort uVar2;
    int iVar3;
    uint uVar4;
    undefined_32 *puVar5;
    undefined_32 *puVar6;
    uint uVar7;
    byte *pbVar8;
    int iVar9;

    pbVar8 = param_4;
    puVar6 = (undefined_32 *)*param_6;
    if (0 < param_2)
    {
        param_4 = (byte *)param_2;
        do
        {
            iVar3 = 0;
            puVar5 = puVar6;
            iVar9 = param_1;
            if (0 < param_1)
            {
                do
                {
                    bVar1 = *pbVar8;
                    pbVar8 = pbVar8 + 1;
                    puVar6 = (undefined_32 *)((int)puVar5 + 2);
                    uVar2 = *(ushort *)(param_5 + (uint)bVar1 * 2);
                    uVar2 = CONCAT11((char)uVar2, (char)((uint)uVar2 >> 8));
                    iVar9 = iVar9 + -1;
                    *(ushort *)puVar5 = uVar2 >> 1 | uVar2 << 0xf;
                    iVar3 = param_1;
                    puVar5 = puVar6;
                } while (iVar9 != 0);
            }
            if (iVar3 < param_3)
            {
                uVar7 = param_3 - iVar3;
                puVar5 = puVar6;
                MEMSET(uVar4, puVar5, 0, uVar7 >> 1)
                puVar6 = (undefined_32 *)((int)puVar6 + uVar7 * 2);
                for (uVar4 = (uint)((uVar7 & 1) != 0); uVar4 != 0; uVar4 = uVar4 - 1)
                {
                    *(undefined_16 *)puVar5 = 0;
                    puVar5 = (undefined_32 *)((int)puVar5 + 2);
                }
            }
            param_4 = (byte *)((int)param_4 + -1);
        } while (param_4 != NULL);
    }
    *param_6 = puVar6;
    return;
}

void FUN_00445ee0(int param_1, int param_2, int param_3, int param_4, uint param_5, uint param_6, uint **param_7,
                  int *param_8, char param_9, byte param_10)

{
    byte bVar1;
    undefined_16 uVar2;
    ushort uVar3;
    uint *puVar4;
    uint *puVar5;
    uint uVar6;
    undefined_16 *puVar7;
    int iVar8;
    undefined_32 *puVar9;
    undefined_32 *puVar10;
    uint uVar11;
    int iVar12;
    int iVar13;
    uint *puVar14;
    uint *puVar15;
    uint *local_100;
    int local_fc;
    undefined_32 *local_f8;
    char local_f2;
    char local_f1;
    int local_f0;
    undefined_32 *local_ec;
    int local_e8;
    uint *local_e4;
    undefined_32 local_e0[56];

    iVar12 = *param_8;
    local_f1 = '\0';
    local_f2 = '\0';
    puVar14 = *param_7;
    *param_7 = NULL;
    *param_8 = 0;
    if (puVar14 == NULL)
    {
        return;
    }
    puVar5 = (uint *)FUN_0048e680(s___data_default_mat_004b48cc);
    local_e4 = puVar5;
    FUN_00408fb0(puVar14, puVar5);
    local_f8 = local_e0;
    *param_7 = puVar5;
    local_f0 = param_3;
    local_e8 = param_4;
    if ((param_10 & 0x10) != 0)
    {
        local_f0 = param_3 * 2;
        local_f1 = '\x01';
        if ((int)param_5 < local_f0)
        {
            param_5 = ceil_power_of_two(local_f0);
        }
    }
    if ((param_10 & 1) != 0)
    {
        local_e8 = param_4 * 2;
        local_f2 = '\x01';
        if ((int)param_6 < local_e8)
        {
            param_6 = ceil_power_of_two(local_e8);
        }
    }
    iVar13 = param_6 * param_5 * 2;
    local_ec = (undefined_32 *)FUN_00408e60(puVar14, iVar13);
    _sprintf(puVar5, s_Rovermatic_004b48c0);
    puVar4 = local_e4;
    *(float *)((int)puVar5 + 10) = (float)local_f0 / (float)param_5;
    *(float *)((int)puVar5 + 0xe) = (float)local_e8 / (float)param_6;
    puVar5[0x10] = 0;
    if (((((param_1 == 0) && (param_2 == 3)) || ((param_1 == 5 && ((param_2 == 1 || (param_2 == 3))))))
         || (param_1 == 4))
        || ((param_1 == 3 && (param_2 == 0))))
    {
        puVar5[0x12] = 0x10;
        puVar5[0x13] = 4;
        puVar5[0x14] = 4;
        puVar5[0x11] = 2;
        puVar5[0x15] = 4;
        puVar5[0x1c] = 4;
        puVar5[0x16] = 0xc;
        puVar5[0x17] = 8;
        puVar5[0x18] = 4;
        puVar5[0x1d] = 0;
        puVar5[0x19] = 4;
        puVar5[0x1a] = 4;
        puVar5[0x1b] = 4;
        puVar5[0x1e] = 4;
        puVar5[0x1f] = 2;
    }
    else
    {
        puVar5[0x13] = 5;
        puVar5[0x14] = 5;
        puVar5[0x15] = 5;
        puVar5[0x11] = 2;
        puVar5[0x12] = 0x10;
        puVar5[0x1c] = 1;
        puVar5[0x16] = 0xb;
        puVar5[0x17] = 6;
        puVar5[0x18] = 1;
        puVar5[0x1d] = 0;
        puVar5[0x19] = 3;
        puVar5[0x1a] = 3;
        puVar5[0x1b] = 3;
        puVar5[0x1e] = 7;
        puVar5[0x1f] = 1;
    }
    local_e4[0x20] = param_5;
    local_e4[0x21] = param_6;
    local_e4[0x22] = 1;
    local_e4[0x23] = 0;
    *local_f8 = 0;
    local_f8[1] = 0;
    local_f8[2] = 0;
    local_f8[3] = param_5;
    local_f8[4] = param_6;
    local_f8[5] = iVar13;
    local_f8[6] = param_5 * 2;
    local_f8[7] = param_5;
    puVar5 = puVar5 + 0x11;
    puVar15 = local_f8 + 8;
    QMEMCPY(iVar13, puVar5, puVar15, 0xe)
    local_f8[0x16] = local_ec;
    local_f8[0x17] = 0;
    puVar9 = local_ec;
    if ((param_1 == 4) && (param_2 == 0))
    {
        local_fc = 0;
        iVar12 = param_4;
        if (0 < param_4)
        {
            do
            {
                iVar13 = 0;
                puVar10 = puVar9;
                if (0 < param_3)
                {
                    do
                    {
                        iVar13 = iVar13 + 2;
                        uVar6 = (uint)(*(byte *)puVar14 >> 4);
                        puVar9 = puVar10 + 1;
                        *(ushort *)puVar10 =
                            (ushort)(((uVar6 << 4 | uVar6) << 4 | uVar6) << 4) | (ushort)(*(byte *)puVar14 >> 4);
                        uVar6 = *(byte *)puVar14 & 0xf;
                        puVar14 = (uint *)((int)puVar14 + 1);
                        *(ushort *)((int)puVar10 + 2) =
                            (ushort)(((uVar6 << 4 | uVar6) << 4 | uVar6) << 4) | (ushort)uVar6;
                        puVar10 = puVar9;
                    } while (iVar13 < param_3);
                }
                if (iVar13 < (int)param_5)
                {
                    uVar11 = param_5 - iVar13;
                    puVar10 = puVar9;
                    MEMSET(uVar6, puVar10, 0, uVar11 >> 1)
                    puVar9 = (undefined_32 *)((int)puVar9 + uVar11 * 2);
                    for (uVar6 = (uint)((uVar11 & 1) != 0); uVar6 != 0; uVar6 = uVar6 - 1)
                    {
                        *(undefined_16 *)puVar10 = 0;
                        puVar10 = (undefined_32 *)((int)puVar10 + 2);
                    }
                }
                iVar12 = iVar12 + -1;
                local_fc = param_4;
            } while (iVar12 != 0);
        }
    }
    else if ((param_1 == 3) && (param_2 == 0))
    {
        local_fc = 0;
        iVar12 = param_4;
        if (0 < param_4)
        {
            do
            {
                iVar13 = 0;
                puVar10 = puVar9;
                if (0 < param_3)
                {
                    do
                    {
                        puVar9 = puVar10 + 1;
                        *(ushort *)puVar10 = (ushort)((*(byte *)puVar14 & 0xfffffff0) << 8) | 0xfff;
                        bVar1 = *(byte *)puVar14;
                        puVar14 = (uint *)((int)puVar14 + 1);
                        *(ushort *)((int)puVar10 + 2) = (ushort)((bVar1 & 0xf) << 0xc) | 0xfff;
                        iVar13 = iVar13 + 2;
                        puVar10 = puVar9;
                    } while (iVar13 < param_3);
                }
                if (iVar13 < (int)param_5)
                {
                    uVar11 = param_5 - iVar13;
                    puVar10 = puVar9;
                    MEMSET(uVar6, puVar10, 0, uVar11 >> 1)
                    puVar9 = (undefined_32 *)((int)puVar9 + uVar11 * 2);
                    for (uVar6 = (uint)((uVar11 & 1) != 0); uVar6 != 0; uVar6 = uVar6 - 1)
                    {
                        *(undefined_16 *)puVar10 = 0;
                        puVar10 = (undefined_32 *)((int)puVar10 + 2);
                    }
                }
                iVar12 = iVar12 + -1;
                local_fc = param_4;
            } while (iVar12 != 0);
        }
    }
    else if ((param_1 == 4) && (param_2 == 1))
    {
        if (param_9 == '\x01')
        {
            local_fc = 0;
            if (0 < param_4)
            {
                local_100 = (uint *)param_4;
                do
                {
                    puVar10 = puVar9;
                    iVar12 = 0;
                    iVar13 = param_3;
                    if (0 < param_3)
                    {
                        do
                        {
                            puVar9 = (undefined_32 *)((int)puVar10 + 2);
                            bVar1 = *(byte *)puVar14;
                            uVar6 = (uint)(bVar1 >> 4);
                            puVar14 = (uint *)((int)puVar14 + 1);
                            iVar13 = iVar13 + -1;
                            *(ushort *)puVar10 =
                                (ushort)(((uVar6 << 4 | uVar6) << 4 | uVar6) << 4) | (ushort)(bVar1 >> 4);
                            puVar10 = puVar9;
                            iVar12 = param_3;
                        } while (iVar13 != 0);
                    }
                    if (iVar12 < (int)param_5)
                    {
                        uVar11 = param_5 - iVar12;
                        puVar10 = puVar9;
                        MEMSET(uVar6, puVar10, 0, uVar11 >> 1)
                        puVar9 = (undefined_32 *)((int)puVar9 + uVar11 * 2);
                        for (uVar6 = (uint)((uVar11 & 1) != 0); uVar6 != 0; uVar6 = uVar6 - 1)
                        {
                            *(undefined_16 *)puVar10 = 0;
                            puVar10 = (undefined_32 *)((int)puVar10 + 2);
                        }
                    }
                    local_100 = (uint *)((int)local_100 + -1);
                    local_fc = param_4;
                } while (local_100 != NULL);
            }
        }
        else
        {
            local_fc = 0;
            iVar12 = param_4;
            if (0 < param_4)
            {
                do
                {
                    iVar13 = param_3;
                    puVar10 = puVar9;
                    iVar8 = 0;
                    if (0 < param_3)
                    {
                        do
                        {
                            puVar9 = (undefined_32 *)((int)puVar10 + 2);
                            bVar1 = *(byte *)puVar14 >> 4;
                            puVar14 = (uint *)((int)puVar14 + 1);
                            iVar13 = iVar13 + -1;
                            *(ushort *)puVar10 = (ushort)(((bVar1 | 0xfff0) << 4 | (uint)bVar1) << 4) | (ushort)bVar1;
                            puVar10 = puVar9;
                            iVar8 = param_3;
                        } while (iVar13 != 0);
                    }
                    if (iVar8 < (int)param_5)
                    {
                        uVar11 = param_5 - iVar8;
                        puVar10 = puVar9;
                        MEMSET(uVar6, puVar10, 0, uVar11 >> 1)
                        puVar9 = (undefined_32 *)((int)puVar9 + uVar11 * 2);
                        for (uVar6 = (uint)((uVar11 & 1) != 0); uVar6 != 0; uVar6 = uVar6 - 1)
                        {
                            *(undefined_16 *)puVar10 = 0;
                            puVar10 = (undefined_32 *)((int)puVar10 + 2);
                        }
                    }
                    iVar12 = iVar12 + -1;
                    local_fc = param_4;
                } while (iVar12 != 0);
            }
        }
    }
    else
    {
        if (param_1 == 2)
        {
            if (param_2 == 0)
            {
                local_fc = 0;
                if (0 < param_4)
                {
                    local_100 = (uint *)param_4;
                    do
                    {
                        iVar13 = 0;
                        puVar10 = puVar9;
                        if (0 < param_3)
                        {
                            do
                            {
                                puVar9 = puVar10 + 1;
                                uVar3 = *(ushort *)(iVar12 + (uint)(*(byte *)puVar14 >> 4) * 2);
                                uVar3 = CONCAT11((char)uVar3, (char)((uint)uVar3 >> 8));
                                *(ushort *)puVar10 = uVar3 >> 1 | uVar3 << 0xf;
                                bVar1 = *(byte *)puVar14;
                                puVar14 = (uint *)((int)puVar14 + 1);
                                uVar3 = *(ushort *)(iVar12 + (bVar1 & 0xf) * 2);
                                uVar3 = CONCAT11((char)uVar3, (char)((uint)uVar3 >> 8));
                                *(ushort *)((int)puVar10 + 2) = uVar3 >> 1 | uVar3 << 0xf;
                                iVar13 = iVar13 + 2;
                                puVar10 = puVar9;
                            } while (iVar13 < param_3);
                        }
                        if (iVar13 < (int)param_5)
                        {
                            uVar11 = param_5 - iVar13;
                            puVar10 = puVar9;
                            MEMSET(uVar6, puVar10, 0, uVar11 >> 1)
                            puVar9 = (undefined_32 *)((int)puVar9 + uVar11 * 2);
                            for (uVar6 = (uint)((uVar11 & 1) != 0); uVar6 != 0; uVar6 = uVar6 - 1)
                            {
                                *(undefined_16 *)puVar10 = 0;
                                puVar10 = (undefined_32 *)((int)puVar10 + 2);
                            }
                        }
                        local_100 = (uint *)((int)local_100 + -1);
                        local_fc = param_4;
                    } while (local_100 != NULL);
                }
                goto LAB_00446257;
            }
            if (param_2 == 1)
            {
                local_fc = 0;
                if (0 < param_4)
                {
                    local_100 = (uint *)param_4;
                    do
                    {
                        puVar10 = puVar9;
                        iVar13 = param_3;
                        iVar8 = 0;
                        if (0 < param_3)
                        {
                            do
                            {
                                bVar1 = *(byte *)puVar14;
                                puVar14 = (uint *)((int)puVar14 + 1);
                                puVar9 = (undefined_32 *)((int)puVar10 + 2);
                                uVar3 = *(ushort *)(iVar12 + (uint)bVar1 * 2);
                                uVar3 = CONCAT11((char)uVar3, (char)((uint)uVar3 >> 8));
                                iVar13 = iVar13 + -1;
                                *(ushort *)puVar10 = uVar3 >> 1 | uVar3 << 0xf;
                                puVar10 = puVar9;
                                iVar8 = param_3;
                            } while (iVar13 != 0);
                        }
                        if (iVar8 < (int)param_5)
                        {
                            uVar11 = param_5 - iVar8;
                            puVar10 = puVar9;
                            MEMSET(uVar6, puVar10, 0, uVar11 >> 1)
                            puVar9 = (undefined_32 *)((int)puVar9 + uVar11 * 2);
                            for (uVar6 = (uint)((uVar11 & 1) != 0); uVar6 != 0; uVar6 = uVar6 - 1)
                            {
                                *(undefined_16 *)puVar10 = 0;
                                puVar10 = (undefined_32 *)((int)puVar10 + 2);
                            }
                        }
                        local_100 = (uint *)((int)local_100 + -1);
                        local_fc = param_4;
                    } while (local_100 != NULL);
                }
                goto LAB_00446257;
            }
        }
        local_100 = puVar14;
        if (param_1 == 5)
        {
            if (param_2 == 1)
            {
                local_fc = 0;
                iVar12 = param_4;
                if (0 < param_4)
                {
                    do
                    {
                        iVar13 = param_3;
                        puVar10 = puVar9;
                        iVar8 = 0;
                        if (0 < param_3)
                        {
                            do
                            {
                                puVar9 = (undefined_32 *)((int)puVar10 + 2);
                                bVar1 = *(byte *)puVar14;
                                puVar14 = (uint *)((int)puVar14 + 1);
                                *(ushort *)puVar10 = (ushort)(bVar1 >> 4) << 0xc | 0xfff;
                                iVar13 = iVar13 + -1;
                                puVar10 = puVar9;
                                iVar8 = param_3;
                            } while (iVar13 != 0);
                        }
                        if (iVar8 < (int)param_5)
                        {
                            iVar8 = param_5 - iVar8;
                            do
                            {
                                *(undefined_16 *)puVar9 = *(undefined_16 *)((int)puVar9 + -2);
                                puVar9 = (undefined_32 *)((int)puVar9 + 2);
                                iVar8 = iVar8 + -1;
                            } while (iVar8 != 0);
                        }
                        iVar12 = iVar12 + -1;
                        local_fc = param_4;
                    } while (iVar12 != 0);
                }
                goto LAB_00446257;
            }
            if (param_2 == 2)
            {
                local_fc = 0;
                iVar12 = param_4;
                if (0 < param_4)
                {
                    do
                    {
                        puVar10 = puVar9;
                        iVar13 = param_3;
                        iVar8 = 0;
                        if (0 < param_3)
                        {
                            do
                            {
                                puVar9 = (undefined_32 *)((int)puVar10 + 2);
                                uVar3 = *(ushort *)local_100;
                                local_100 = (uint *)((int)local_100 + 2);
                                iVar13 = iVar13 + -1;
                                *(ushort *)puVar10 = uVar3 & 0xff | (ushort)(byte)((uint)uVar3 >> 8) << 8 | 0x8000;
                                puVar10 = puVar9;
                                iVar8 = param_3;
                            } while (iVar13 != 0);
                        }
                        if (iVar8 < (int)param_5)
                        {
                            iVar8 = param_5 - iVar8;
                            do
                            {
                                *(undefined_16 *)puVar9 = *(undefined_16 *)((int)puVar9 + -2);
                                puVar9 = (undefined_32 *)((int)puVar9 + 2);
                                iVar8 = iVar8 + -1;
                            } while (iVar8 != 0);
                        }
                        iVar12 = iVar12 + -1;
                        local_fc = param_4;
                    } while (iVar12 != 0);
                }
                goto LAB_00446257;
            }
        }
        if ((param_1 == 0) && (param_2 == 2))
        {
            local_fc = param_1;
            iVar12 = param_4;
            if (0 < param_4)
            {
                do
                {
                    puVar10 = puVar9;
                    iVar13 = param_3;
                    iVar8 = 0;
                    if (0 < param_3)
                    {
                        do
                        {
                            puVar9 = (undefined_32 *)((int)puVar10 + 2);
                            uVar3 = *(ushort *)local_100;
                            local_100 = (uint *)((int)local_100 + 2);
                            uVar3 = CONCAT11((char)uVar3, (char)((uint)uVar3 >> 8));
                            iVar13 = iVar13 + -1;
                            *(ushort *)puVar10 = uVar3 >> 1 | uVar3 << 0xf;
                            puVar10 = puVar9;
                            iVar8 = param_3;
                        } while (iVar13 != 0);
                    }
                    if (iVar8 < (int)param_5)
                    {
                        uVar11 = param_5 - iVar8;
                        puVar10 = puVar9;
                        MEMSET(uVar6, puVar10, 0, uVar11 >> 1)
                        puVar9 = (undefined_32 *)((int)puVar9 + uVar11 * 2);
                        for (uVar6 = (uint)((uVar11 & 1) != 0); uVar6 != 0; uVar6 = uVar6 - 1)
                        {
                            *(undefined_16 *)puVar10 = 0;
                            puVar10 = (undefined_32 *)((int)puVar10 + 2);
                        }
                    }
                    iVar12 = iVar12 + -1;
                    local_fc = param_4;
                } while (iVar12 != 0);
            }
        }
        else
        {
            if (param_1 == 5)
            {
                if (param_2 == 3)
                {
                    local_fc = 0;
                    if (0 < param_4)
                    {
                        local_100 = (uint *)param_4;
                        do
                        {
                            iVar12 = param_3;
                            puVar10 = puVar9;
                            iVar13 = 0;
                            if (0 < param_3)
                            {
                                do
                                {
                                    uVar6 = *puVar14;
                                    puVar14 = puVar14 + 1;
                                    puVar9 = (undefined_32 *)((int)puVar10 + 2);
                                    iVar12 = iVar12 + -1;
                                    *(ushort *)puVar10 = (ushort)((((uVar6 >> 0x1c) << 4 | uVar6 >> 0x14 & 0xf) << 4
                                                                   | uVar6 >> 0xc & 0xf)
                                                                  << 4)
                                        | (ushort)(uVar6 >> 4) & 0xf;
                                    puVar10 = puVar9;
                                    iVar13 = param_3;
                                } while (iVar12 != 0);
                            }
                            if (iVar13 < (int)param_5)
                            {
                                iVar13 = param_5 - iVar13;
                                do
                                {
                                    *(undefined_16 *)puVar9 = *(undefined_16 *)((int)puVar9 + -2);
                                    puVar9 = (undefined_32 *)((int)puVar9 + 2);
                                    iVar13 = iVar13 + -1;
                                } while (iVar13 != 0);
                            }
                            local_100 = (uint *)((int)local_100 + -1);
                            local_fc = param_4;
                        } while (local_100 != NULL);
                    }
                    goto LAB_00446257;
                }
                if (param_2 == 7)
                {
                    local_fc = 0;
                    if (0 < param_4)
                    {
                        local_100 = (uint *)param_4;
                        do
                        {
                            iVar12 = param_3;
                            puVar10 = puVar9;
                            iVar13 = 0;
                            if (0 < param_3)
                            {
                                do
                                {
                                    uVar6 = *puVar14;
                                    puVar9 = (undefined_32 *)((int)puVar10 + 2);
                                    puVar14 = (uint *)((int)puVar14 + 3);
                                    iVar12 = iVar12 + -1;
                                    *(ushort *)puVar10 =
                                        (ushort)(((uVar6 >> 0x13 | 0xffe0) << 5 | uVar6 >> 0xb & 0x1f) << 5)
                                        | (ushort)(uVar6 >> 3) & 0x1f;
                                    puVar10 = puVar9;
                                    iVar13 = param_3;
                                } while (iVar12 != 0);
                            }
                            if (iVar13 < (int)param_5)
                            {
                                iVar13 = param_5 - iVar13;
                                do
                                {
                                    *(undefined_16 *)puVar9 = *(undefined_16 *)((int)puVar9 + -2);
                                    puVar9 = (undefined_32 *)((int)puVar9 + 2);
                                    iVar13 = iVar13 + -1;
                                } while (iVar13 != 0);
                            }
                            local_100 = (uint *)((int)local_100 + -1);
                            local_fc = param_4;
                        } while (local_100 != NULL);
                    }
                    goto LAB_00446257;
                }
            }
            if (((param_1 == 0) && (param_2 == 3)) && (local_fc = param_1, 0 < param_4))
            {
                local_100 = (uint *)param_4;
                do
                {
                    puVar10 = puVar9;
                    iVar12 = param_3;
                    iVar13 = 0;
                    if (0 < param_3)
                    {
                        do
                        {
                            uVar6 = *puVar14;
                            puVar14 = puVar14 + 1;
                            puVar9 = (undefined_32 *)((int)puVar10 + 2);
                            uVar11 = (uVar6 & 0xff00 | uVar6 << 0x10) << 8;
                            iVar12 = iVar12 + -1;
                            *(ushort *)puVar10 = (ushort)((((uVar6 >> 0x10 & 0xfffff000) >> 8 | uVar11 >> 0x1c) << 4
                                                           | uVar11 >> 0x14 & 0xf)
                                                          << 4)
                                | ((ushort)(uVar6 >> 0x10) & 0xff) >> 4;
                            puVar10 = puVar9;
                            iVar13 = param_3;
                        } while (iVar12 != 0);
                    }
                    if (iVar13 < (int)param_5)
                    {
                        uVar11 = param_5 - iVar13;
                        puVar10 = puVar9;
                        MEMSET(uVar6, puVar10, 0, uVar11 >> 1)
                        puVar9 = (undefined_32 *)((int)puVar9 + uVar11 * 2);
                        for (uVar6 = (uint)((uVar11 & 1) != 0); uVar6 != 0; uVar6 = uVar6 - 1)
                        {
                            *(undefined_16 *)puVar10 = 0;
                            puVar10 = (undefined_32 *)((int)puVar10 + 2);
                        }
                    }
                    local_100 = (uint *)((int)local_100 + -1);
                    local_fc = param_4;
                } while (local_100 != NULL);
            }
        }
    }
LAB_00446257:
    if (local_fc < (int)param_6)
    {
        local_100 = (uint *)(param_6 - local_fc);
        do
        {
            uVar6 = param_5;
            puVar10 = puVar9;
            if (0 < (int)param_5)
            {
                do
                {
                    puVar9 = (undefined_32 *)((int)puVar10 + 2);
                    uVar6 = uVar6 - 1;
                    *(undefined_16 *)puVar10 = *(undefined_16 *)((int)puVar10 + param_3 * -2);
                    puVar10 = puVar9;
                } while (uVar6 != 0);
            }
            local_100 = (uint *)((int)local_100 + -1);
        } while (local_100 != NULL);
    }
    if ((local_f1 != '\0') && (puVar7 = (undefined_16 *)((int)local_ec + local_f0 * 2 + -2), 0 < param_4))
    {
        local_100 = (uint *)param_4;
        puVar9 = local_ec;
        do
        {
            iVar12 = param_3;
            if (0 < param_3)
            {
                do
                {
                    uVar2 = *(undefined_16 *)puVar9;
                    puVar9 = (undefined_32 *)((int)puVar9 + 2);
                    *puVar7 = uVar2;
                    puVar7 = puVar7 + -1;
                    iVar12 = iVar12 + -1;
                } while (iVar12 != 0);
            }
            puVar7 = puVar7 + param_5 + param_3;
            puVar9 = (undefined_32 *)((int)puVar9 + (param_5 - param_3) * 2);
            local_100 = (uint *)((int)local_100 + -1);
        } while (local_100 != NULL);
    }
    if ((local_f2 != '\0')
        && (puVar7 = (undefined_16 *)((int)local_ec + (local_e8 + -1) * param_5 * 2), puVar9 = local_ec, 0 < param_4))
    {
        do
        {
            iVar12 = local_f0;
            if (0 < local_f0)
            {
                do
                {
                    uVar2 = *(undefined_16 *)puVar9;
                    puVar9 = (undefined_32 *)((int)puVar9 + 2);
                    *puVar7 = uVar2;
                    puVar7 = puVar7 + 1;
                    iVar12 = iVar12 + -1;
                } while (iVar12 != 0);
            }
            puVar7 = puVar7 + -(local_f0 + param_5);
            param_4 = param_4 + -1;
            puVar9 = (undefined_32 *)((int)puVar9 + (param_5 - local_f0) * 2);
        } while (param_4 != 0);
    }
    FUN_0048aa40(local_e4[0x24]);
    FUN_0048a5e0(puVar4[0x24], &local_f8, 1, puVar4[0x1f]);
    return;
}

void FUN_00446a20(short *param_1)

{
    short sVar1;
    undefined_16 *puVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    undefined_32 local_1c;
    undefined_32 local_18;
    int local_14;
    undefined_32 local_10;
    int local_c;
    int local_8;
    undefined_32 local_4;

    iVar5 = (int)*param_1;
    sVar1 = param_1[1];
    local_18 = *(undefined_32 *)(param_1 + 4);
    local_14 = iVar5;
    local_8 = (int)sVar1;
    uVar4 = ceil_power_of_two(iVar5);
    local_c = ceil_power_of_two((int)sVar1);
    puVar2 = *(undefined_16 **)(param_1 + 8);
    local_1c = FUN_00408e60(*(undefined_32 *)(puVar2 + 2), local_c * uVar4 * 2);
    iVar7 = (int)param_1[6];
    uVar6 = uVar4;
    local_10 = local_1c;
    iVar3 = local_8;
    while (iVar7 = iVar7 + -1, local_8 = iVar3, -1 < iVar7)
    {
        puVar2 = (undefined_16 *)(*(int *)(param_1 + 8) + iVar7 * 8);
        switch (*(undefined_8 *)((int)param_1 + 5))
        {
        case 0:
            uVar6 = 0xf;
            break;
        case 1:
            uVar6 = 7;
            break;
        case 2:
            uVar6 = 3;
            break;
        case 3:
            uVar6 = 1;
        }
        FUN_00445e50((int)*(short *)(*(int *)(param_1 + 8) + iVar7 * 8) + uVar6 & ~uVar6, (int)(short)puVar2[1], uVar4,
                     *(undefined_32 *)(puVar2 + 2), local_18, &local_1c);
        *puVar2 = 0;
        puVar2[1] = 0;
        *(undefined_32 *)(puVar2 + 2) = 0;
        iVar5 = local_14;
        iVar3 = local_8;
    }
    FUN_00445cd0(iVar5, iVar3, uVar4, local_c, *(undefined_32 *)(puVar2 + 2), &local_4, local_10);
    **(undefined_16 **)(param_1 + 8) = (short)iVar5;
    *(short *)(*(int *)(param_1 + 8) + 2) = (short)iVar3;
    *(undefined_32 *)(*(int *)(param_1 + 8) + 4) = local_4;
    param_1[6] = 1;
    return;
}

void FUN_00446b60(int param_1, short *param_2)

{
    short sVar1;
    int iVar2;
    short *psVar3;
    undefined_32 uVar4;
    undefined_32 uVar5;
    uint uVar6;

    iVar2 = param_1;
    sVar1 = param_2[1];
    psVar3 = param_2;
    switch (*(undefined_8 *)(param_1 + 5))
    {
    case 0:
        psVar3 = (short *)0xf;
        break;
    case 1:
        psVar3 = (short *)&DAT_00000007;
        break;
    case 2:
        psVar3 = (short *)0x3;
        break;
    case 3:
    case 7:
        psVar3 = (short *)0x1;
    }
    uVar6 = (uint)((int)psVar3 + (int)*param_2) & ~(uint)psVar3;
    param_1 = *(undefined_32 *)(param_1 + 8);
    uVar4 = ceil_power_of_two(uVar6);
    uVar5 = ceil_power_of_two((int)sVar1);
    FUN_00445ee0(*(undefined_8 *)(iVar2 + 4), *(undefined_8 *)(iVar2 + 5), uVar6, (int)sVar1, uVar4, uVar5, param_2 + 2,
                 &param_1, 0, 0);
    return;
}

//----- (00446C20) --------------------------------------------------------
// Loads the pixel data for a texture chunk for a model
// a1 = Pointer to pointer to mandatory texture data [part of some model
// structure?] a2 = Pointer to pointer to optional texture data [part of some
// model structure?]
void FUN_00446c20(int *param_1, undefined_32 param_2)

{
    ushort uVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;

    uVar1 = *(ushort *)((int)param_1 + -0x26);
    if (param_1[-7] != 0)
    {
        iVar5 = (int)CONCAT11((char)*(ushort *)(param_1 + -10), (char)((uint) * (ushort *)(param_1 + -10) >> 8));
        uVar2 = ceil_power_of_two(iVar5);
        iVar4 = (int)CONCAT11((char)uVar1, (char)((uint)uVar1 >> 8));
        uVar3 = ceil_power_of_two(iVar4);
        FUN_00445ee0(*(undefined_8 *)(param_1 + -0xb), *(undefined_8 *)((int)param_1 + -0x2b), iVar5, iVar4, uVar2,
                     uVar3, param_1, param_2, 1, *(undefined_8 *)(param_1[-7] + 3));
    }
    *(int **)(*param_1 + 10) = param_1 + -0xe;
    return;
}

ushort *FUN_00446ca0(int param_1)

{
    ushort **ppuVar1;
    ushort uVar2;
    uint uVar3;
    ushort *puVar4;
    ushort *puVar5;
    uint *puVar6;
    int iVar7;
    ushort *puVar8;
    int iVar9;
    int iVar10;
    ushort *puVar11;
    uint local_14;
    ushort **local_10;
    ushort *local_c;
    uint local_8[2];

    level_data_open(1);
    puVar4 = (ushort *)get_buffer_index();
    level_data_read(1, 0, &local_14, 4);
    local_14 = swap32(local_14);
    if ((-1 < param_1) && (param_1 < (int)local_14))
    {
        level_data_read(1, param_1 * 4 + 4, local_8, 8);
        iVar7 = 2;
        puVar6 = local_8;
        do
        {
            uVar3 = *puVar6;
            iVar7 = iVar7 + -1;
            *puVar6 = swap32(uVar3);
            puVar6 = puVar6 + 1;
        } while (iVar7 != 0);
        level_data_read(1, local_8[0], puVar4, 0x14);
        *puVar4 = CONCAT11((char)*puVar4, (char)((uint)*puVar4 >> 8));
        puVar4[1] = CONCAT11((char)puVar4[1], (char)((uint)puVar4[1] >> 8));
        local_10 = (ushort **)(puVar4 + 4);
        puVar8 = puVar4 + 6;
        puVar4[3] = CONCAT11((char)puVar4[3], (char)((uint)puVar4[3] >> 8));
        puVar11 = *local_10;
        puVar5 = (ushort *)(((uint)puVar11 & 0xff00 | (int)puVar11 << 0x10) << 8
                            | ((uint)puVar11 >> 0x10 | (uint)puVar11 & 0xff0000) >> 8);
        ppuVar1 = (ushort **)(puVar4 + 8);
        *local_10 = puVar5;
        *puVar8 = CONCAT11((char)*puVar8, (char)((uint)*puVar8 >> 8));
        puVar11 = *ppuVar1;
        puVar4[7] = CONCAT11((char)puVar4[7], (char)((uint)puVar4[7] >> 8));
        *ppuVar1 = (ushort *)(((uint)puVar11 & 0xff00 | (int)puVar11 << 0x10) << 8
                              | ((uint)puVar11 & 0xff0000 | (uint)puVar11 >> 0x10) >> 8);
        local_c = puVar8;
        if ((*(char *)(puVar4 + 2) != '\x02') || (puVar11 = puVar4, puVar5 != NULL))
        {
            puVar11 = puVar4 + 10;
            iVar9 = (short)*puVar8 * 8;
            level_data_read(1, local_8[0] + 0x14, puVar11, iVar9);
            iVar7 = 0;
            *ppuVar1 = puVar11;
            if (0 < (short)*puVar8)
            {
                do
                {
                    uVar2 = (*ppuVar1)[iVar7 * 4];
                    (*ppuVar1)[iVar7 * 4] = CONCAT11((char)uVar2, (char)((uint)uVar2 >> 8));
                    uVar2 = (*ppuVar1)[iVar7 * 4 + 1];
                    (*ppuVar1)[iVar7 * 4 + 1] = CONCAT11((char)uVar2, (char)((uint)uVar2 >> 8));
                    iVar10 = iVar7 * 4;
                    uVar3 = *(uint *)(*ppuVar1 + iVar7 * 4 + 2);
                    iVar7 = iVar7 + 1;
                    *(uint *)(*ppuVar1 + iVar10 + 2) = swap32(uVar3);
                    puVar8 = local_c;
                } while (iVar7 < (short)*local_c);
            }
            puVar5 = *local_10;
            if (puVar5 != NULL)
            {
                puVar11 = (ushort *)((int)puVar4 + iVar9 + 0x23 & 0xfffffff0);
                iVar9 = *(int *)(*ppuVar1 + 2) - (int)puVar5;
                level_data_read(1, local_8[0] + (int)puVar5, puVar11, iVar9);
                *local_10 = puVar11;
            }
            iVar7 = (int)(short)*puVar8;
            iVar10 = 0;
            puVar11 = (ushort *)((int)puVar11 + iVar9 + 0xf & 0xfffffff0);
            if (0 < iVar7)
            {
                do
                {
                    if (iVar10 == iVar7 + -1)
                    {
                        iVar9 = local_8[1] - local_8[0];
                    }
                    else
                    {
                        iVar9 = *(int *)(*ppuVar1 + iVar10 * 4 + 6);
                    }
                    iVar9 = iVar9 - *(int *)(*ppuVar1 + iVar10 * 4 + 2);
                    level_data_read(1, local_8[0] + *(int *)(*ppuVar1 + iVar10 * 4 + 2), puVar11, iVar9);
                    *(ushort **)(*ppuVar1 + iVar10 * 4 + 2) = puVar11;
                    if (param_1 != 99)
                    {
                        FUN_00446b60(puVar4, *ppuVar1 + iVar10 * 4);
                    }
                    iVar7 = (int)(short)*local_c;
                    puVar11 = (ushort *)((int)puVar11 + iVar9 + 0xf & 0xfffffff0);
                    iVar10 = iVar10 + 1;
                } while (iVar10 < iVar7);
            }
            if (param_1 == 99)
            {
                FUN_00446a20(puVar4);
            }
        }
        level_data_close(1);
        set_buffer_index(puVar11);
        return puVar4;
    }
    return NULL;
}

void FUN_00446fb0(undefined_32 param_1)

{
    FUN_00446ca0(param_1);
    return;
}

void FUN_00446fc0(int param_1, ushort **param_2)

{
    ushort uVar1;
    uint uVar2;
    ushort **ppuVar3;
    ushort *puVar4;
    int iVar5;
    uint *puVar6;
    int iVar7;
    ushort *puVar8;
    uint local_10;
    int local_c;
    uint local_8[2];

    ppuVar3 = param_2;
    level_data_open(2);
    level_data_read(2, 0, &local_10, 4);
    local_10 = swap32(local_10);
    if ((-1 < param_1) && (param_1 < (int)local_10))
    {
        level_data_read(2, param_1 * 4 + 4, local_8, 8);
        iVar7 = 2;
        puVar6 = local_8;
        do
        {
            uVar2 = *puVar6;
            iVar7 = iVar7 + -1;
            *puVar6 = swap32(uVar2);
            uVar2 = local_8[0];
            puVar6 = puVar6 + 1;
        } while (iVar7 != 0);
        iVar7 = get_buffer_index();
        local_8[1] = local_8[1] - local_8[0];
        local_c = local_8[1];
        level_data_read(2, uVar2, iVar7, local_8[1]);
        puVar4 = (ushort *)get_buffer_index();
        *param_2 = puVar4;
        iVar5 = get_buffer_index();
        puVar4 = *param_2;
        param_2 = (ushort **)0x0;
        *(int *)(puVar4 + 6) = iVar5 + 0x10;
        uVar1 = **ppuVar3;
        **ppuVar3 = CONCAT11((char)uVar1, (char)((uint)uVar1 >> 8));
        uVar2 = *(uint *)(*ppuVar3 + 2);
        *(uint *)(*ppuVar3 + 2) = swap32(uVar2);
        uVar2 = *(uint *)(*ppuVar3 + 4);
        *(uint *)(*ppuVar3 + 4) = swap32(uVar2);
        puVar4 = *(ushort **)(*ppuVar3 + 6);
        if (0 < *(int *)(*ppuVar3 + 2))
        {
            do
            {
                iVar5 = 2;
                *puVar4 = CONCAT11((char)*puVar4, (char)((uint)*puVar4 >> 8));
                puVar4[1] = CONCAT11((char)puVar4[1], (char)((uint)puVar4[1] >> 8));
                puVar8 = puVar4 + 2;
                do
                {
                    iVar5 = iVar5 + -1;
                    *puVar8 = CONCAT11((char)*puVar8, (char)((uint)*puVar8 >> 8));
                    puVar8 = puVar8 + 1;
                } while (iVar5 != 0);
                iVar5 = 4;
                puVar8 = puVar4 + 4;
                do
                {
                    iVar5 = iVar5 + -1;
                    *puVar8 = CONCAT11((char)*puVar8, (char)((uint)*puVar8 >> 8));
                    puVar8 = puVar8 + 1;
                } while (iVar5 != 0);
                iVar5 = 3;
                puVar6 = (uint *)(puVar4 + 8);
                do
                {
                    uVar2 = *puVar6;
                    iVar5 = iVar5 + -1;
                    *puVar6 = swap32(uVar2);
                    puVar6 = puVar6 + 1;
                } while (iVar5 != 0);
                iVar5 = 3;
                puVar6 = (uint *)(puVar4 + 0xe);
                do
                {
                    uVar2 = *puVar6;
                    iVar5 = iVar5 + -1;
                    *puVar6 = swap32(uVar2);
                    puVar6 = puVar6 + 1;
                } while (iVar5 != 0);
                iVar5 = 3;
                puVar6 = (uint *)(puVar4 + 0x14);
                do
                {
                    uVar2 = *puVar6;
                    iVar5 = iVar5 + -1;
                    *puVar6 = swap32(uVar2);
                    puVar6 = puVar6 + 1;
                } while (iVar5 != 0);
                iVar5 = 3;
                puVar6 = (uint *)(puVar4 + 0x1a);
                do
                {
                    uVar2 = *puVar6;
                    iVar5 = iVar5 + -1;
                    *puVar6 = swap32(uVar2);
                    puVar6 = puVar6 + 1;
                } while (iVar5 != 0);
                iVar5 = 8;
                puVar4[0x20] = CONCAT11((char)puVar4[0x20], (char)((uint)puVar4[0x20] >> 8));
                puVar8 = puVar4 + 0x21;
                do
                {
                    iVar5 = iVar5 + -1;
                    *puVar8 = CONCAT11((char)*puVar8, (char)((uint)*puVar8 >> 8));
                    puVar8 = puVar8 + 1;
                } while (iVar5 != 0);
                puVar4 = puVar4 + 0x2a;
                param_2 = (ushort **)((int)param_2 + 1);
                local_8[1] = local_c;
            } while ((int)param_2 < *(int *)(*ppuVar3 + 2));
        }
        set_buffer_index(iVar7 + local_8[1]);
        level_data_close(2);
        return;
    }
    *param_2 = NULL;
    return;
}

undefined_32 FUN_004472e0(undefined_32 param_1)

{
    FUN_00446fc0(param_1, &param_1);
    return param_1;
}

void FUN_00447300(undefined_32 param_1, undefined_32 param_2)

{
    int iVar1;
    int iVar2;
    undefined_32 local_4;

    iVar1 = get_buffer_index();
    iVar2 = FUN_00450ce0(param_1, param_2, iVar1);
    FUN_00450850(param_1);
    set_buffer_index(iVar1 + iVar2);
    local_4 = MAGIC('L', 'o', 'a', 'd');
    FUN_00450c50(param_1, &local_4);
    return;
}

// 00447350
void _exit(undefined_32 param_1)

{
    FUN_00450ce0(param_1, 0, 0);
    return;
}

//----- (00447370) --------------------------------------------------------
// Loads texture from textureblock
// a1 = 3 Pointers into offset table (a, b, c)
// a2 = receives data read from a
// a3 = receives data read from b (optional, might be garbage!)
void FUN_00447370(int *param_1, uint *param_2, uint *param_3)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;

    iVar2 = *param_1;
    iVar4 = param_1[2] - iVar2;
    iVar1 = FUN_00445bf0();
    if (iVar1 < iVar4 + 0x80)
    {
        *param_3 = 0;
        *param_2 = 0;
        DAT_0050c610 = 1;
        return;
    }
    if (param_1[1] != 0)
    {
        iVar4 = param_1[1] - iVar2;
    }
    iVar2 = get_buffer_index();
    uVar3 = iVar2 + 0x3fU & 0xffffffc0;
    level_data_read(3, *param_1, uVar3, iVar4);
    *param_2 = uVar3;
    iVar2 = param_1[1];
    if (iVar2 != 0)
    {
        uVar3 = uVar3 + 0x3f + iVar4;
        iVar4 = param_1[2] - iVar2;
        uVar3 = uVar3 & 0xffffffc0;
        level_data_read(3, iVar2, uVar3, iVar4);
        *param_3 = uVar3;
    }
    set_buffer_index(uVar3 + iVar4);
    return;
}

void FUN_00447420(void)

{
    int iVar1;
    undefined_32 *puVar2;

    level_data_open(3);
    level_data_read(3, 0, &DAT_00e9823c, 4);
    DAT_00e9823c = swap32(DAT_00e9823c);
    if (0x6a4 < (int)DAT_00e9823c)
    {
        do
        {
            // WARNING: Do nothing block with infinite loop
        } while (true);
    }
    puVar2 = &DAT_00e93860;
    MEMSET(iVar1, puVar2, 0, 0x6a4)
    level_data_close(3);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

//----- (00447490) --------------------------------------------------------
// Called from the model loader to (presumably) load a texture
// a1 = ???
// a2 = texture index
// a3 = Output: Pointer to mandatory texture data
// a4 = Output: Pointer to optional texture data
void FUN_00447490(int param_1, undefined_32 *param_2, undefined_32 *param_3)

{
    uint uVar1;
    uint *puVar2;
    int iVar3;
    uint local_c[3];

    if ((param_1 < 0) || (DAT_00e9823c <= param_1))
    {
        *param_2 = 0;
        *param_3 = 0;
    }
    else
    {
        if ((undefined_32 *)(&DAT_00e93860)[param_1] != NULL)
        {
            *param_2 = *(undefined_32 *)(&DAT_00e93860)[param_1];
            *param_3 = *(undefined_32 *)((&DAT_00e93860)[param_1] + 4);
            return;
        }
        level_data_read(3, param_1 * 8 + 4, local_c, 0xc);
        iVar3 = 3;
        puVar2 = local_c;
        do
        {
            uVar1 = *puVar2;
            iVar3 = iVar3 + -1;
            *puVar2 = swap32(uVar1);
            puVar2 = puVar2 + 1;
        } while (iVar3 != 0);
        FUN_00447370(local_c, param_2, param_3, 1);
        FUN_00446c20(param_2, param_3);
        (&DAT_00e93860)[param_1] = param_2;
        if (param_1 == 0x4e9)
        {
            _DAT_0050c620 = *param_2;
        }
        if (param_1 == 0x4ea)
        {
            _DAT_0050c624 = *param_2;
        }
        if (param_1 == 0x3a8)
        {
            _DAT_0050c618 = *param_2;
        }
        if (param_1 == 0x160)
        {
            _DAT_0050c61c = *param_2;
        }
        if (param_1 == 0x76)
        {
            FUN_00431df0(*param_2);
            return;
        }
    }
    return;
}

void FUN_004475d0(uint param_1)

{
    uint *puVar1;

    puVar1 = &DAT_00e93860;
    do
    {
        if (param_1 <= *puVar1 && *puVar1 != param_1)
        {
            *puVar1 = 0;
        }
        puVar1 = puVar1 + 1;
    } while ((int)puVar1 < 0xe952f0);
    return;
}

undefined_32 FUN_004475f0(int param_1)

{
    int iVar1;
    int *piVar2;

    iVar1 = 0;
    if (DAT_0050c628 < 1)
    {
        return 0;
    }
    piVar2 = &DAT_00e95300;
    do
    {
        if (*piVar2 == param_1)
        {
            return 1;
        }
        iVar1 = iVar1 + 1;
        piVar2 = piVar2 + 1;
    } while (iVar1 < DAT_0050c628);
    return 0;
}

undefined_32 FUN_00447630(int param_1)

{
    int iVar1;
    int *piVar2;

    iVar1 = 0;
    if (DAT_0050c62c < 1)
    {
        return 0;
    }
    piVar2 = &DAT_00e90980;
    do
    {
        if (*piVar2 == param_1)
        {
            return 1;
        }
        iVar1 = iVar1 + 1;
        piVar2 = piVar2 + 1;
    } while (iVar1 < DAT_0050c62c);
    return 0;
}

undefined_32 FUN_00447670(int param_1)

{
    int iVar1;
    int *piVar2;

    iVar1 = 0;
    if (DAT_0050c630 < 1)
    {
        return 0;
    }
    piVar2 = &DAT_00e68280;
    do
    {
        if (*piVar2 == param_1)
        {
            return 1;
        }
        iVar1 = iVar1 + 1;
        piVar2 = piVar2 + 1;
    } while (iVar1 < DAT_0050c630);
    return 0;
}

// 004476b0
void models_parse_malt(uint *param_1)

{
    ushort *puVar1;
    short sVar2;
    uint uVar3;
    uint **ppuVar4;
    ushort uVar5;
    uint uVar6;
    uint *puVar7;
    int iVar8;
    uint *puVar9;
    uint **ppuVar10;
    uint *puVar11;
    uint uVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int local_4;

    if ((((param_1 != NULL) && (uVar12 = *param_1, uVar12 != 0x5065)) && (uVar12 != 0x5066))
        && (((uVar12 != 0xd064 && (uVar12 != 0xd065))
             && ((uVar12 != 0x5064 && ((uVar12 != 0x3064 && (uVar12 != 0xd066))))))))
    {
        uVar3 = param_1[1];
        uVar6 = swap32(uVar12);
        *param_1 = uVar6;
        uVar12 = param_1[2];
        param_1[1] = swap32(uVar3);
        param_1[2] = swap32(uVar12);
        *(ushort *)(param_1 + 3) = swap16(*(ushort *)(param_1 + 3));
        uVar12 = param_1[4];
        *(ushort *)((int)param_1 + 0xe) = swap16(*(ushort *)((int)param_1 + 0xe));
        param_1[4] = swap32(uVar12);
        if ((int)uVar6 < 0x5066)
        {
            if (uVar6 == 0x5065)
            {
                uVar12 = param_1[7];
                param_1[7] = swap32(uVar12);
            }
            else if (uVar6 == 0x3064)
            {
                uVar12 = param_1[5];
                iVar13 = 6;
                param_1[5] = swap32(uVar12);
                puVar11 = param_1 + 7;
                do
                {
                    uVar12 = *puVar11;
                    iVar13 = iVar13 + -1;
                    *puVar11 = swap32(uVar12);
                    puVar11 = puVar11 + 1;
                } while (iVar13 != 0);
                local_4 = 0;
                if (0 < (int)param_1[5])
                {
                    do
                    {
                        ppuVar4 = *(uint ***)(param_1[6] + local_4 * 4);
                        if (ppuVar4 != (uint **)0x0)
                        {
                            puVar11 = *ppuVar4;
                            if ((puVar11 != NULL) && (iVar13 = FUN_004475f0(puVar11), iVar13 == 0))
                            {
                                (&DAT_00e95300)[DAT_0050c628] = puVar11;
                                DAT_0050c628 = DAT_0050c628 + 1;
                                uVar12 = *puVar11;
                                puVar9 = (uint *)puVar11[2];
                                *puVar11 = swap32(uVar12);
                                *(ushort *)(puVar11 + 1) = CONCAT11((char)*(ushort *)(puVar11 + 1),
                                                                    (char)((uint) * (ushort *)(puVar11 + 1) >> 8));
                                *(ushort *)((int)puVar11 + 6) =
                                    CONCAT11((char)*(ushort *)((int)puVar11 + 6),
                                             (char)((uint) * (ushort *)((int)puVar11 + 6) >> 8));
                                if ((puVar9 != NULL) && (iVar13 = FUN_00447630(puVar9), iVar13 == 0))
                                {
                                    (&DAT_00e90980)[DAT_0050c62c] = puVar9;
                                    DAT_0050c62c = DAT_0050c62c + 1;
                                    uVar12 = *puVar9;
                                    *puVar9 = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                        | (uVar12 & 0xff0000 | uVar12 >> 0x10) >> 8;
                                    *(ushort *)(puVar9 + 1) = CONCAT11((char)*(ushort *)(puVar9 + 1),
                                                                       (char)((uint) * (ushort *)(puVar9 + 1) >> 8));
                                    *(ushort *)((int)puVar9 + 6) =
                                        CONCAT11((char)*(ushort *)((int)puVar9 + 6),
                                                 (char)((uint) * (ushort *)((int)puVar9 + 6) >> 8));
                                    iVar13 = 2;
                                    puVar7 = puVar9 + 2;
                                    do
                                    {
                                        iVar13 = iVar13 + -1;
                                        *(ushort *)puVar7 =
                                            CONCAT11((char)*(ushort *)puVar7, (char)((uint) * (ushort *)puVar7 >> 8));
                                        puVar7 = (uint *)((int)puVar7 + 2);
                                    } while (iVar13 != 0);
                                    *(ushort *)(puVar9 + 4) = CONCAT11((char)*(ushort *)(puVar9 + 4),
                                                                       (char)((uint) * (ushort *)(puVar9 + 4) >> 8));
                                    *(ushort *)((int)puVar9 + 0x12) =
                                        CONCAT11((char)*(ushort *)((int)puVar9 + 0x12),
                                                 (char)((uint) * (ushort *)((int)puVar9 + 0x12) >> 8));
                                    *(ushort *)(puVar9 + 5) = CONCAT11((char)*(ushort *)(puVar9 + 5),
                                                                       (char)((uint) * (ushort *)(puVar9 + 5) >> 8));
                                    *(ushort *)((int)puVar9 + 0x16) =
                                        CONCAT11((char)*(ushort *)((int)puVar9 + 0x16),
                                                 (char)((uint) * (ushort *)((int)puVar9 + 0x16) >> 8));
                                    *(ushort *)(puVar9 + 6) = CONCAT11((char)*(ushort *)(puVar9 + 6),
                                                                       (char)((uint) * (ushort *)(puVar9 + 6) >> 8));
                                    *(ushort *)((int)puVar9 + 0x1a) =
                                        CONCAT11((char)*(ushort *)((int)puVar9 + 0x1a),
                                                 (char)((uint) * (ushort *)((int)puVar9 + 0x1a) >> 8));
                                }
                                puVar11 = (uint *)puVar11[3];
                                if ((puVar11 != NULL) && (iVar13 = FUN_00447670(puVar11), iVar13 == 0))
                                {
                                    (&DAT_00e68280)[DAT_0050c630] = puVar11;
                                    DAT_0050c630 = DAT_0050c630 + 1;
                                    uVar12 = *puVar11;
                                    *puVar11 = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                        | (uVar12 & 0xff0000 | uVar12 >> 0x10) >> 8;
                                    *(ushort *)(puVar11 + 1) = CONCAT11((char)*(ushort *)(puVar11 + 1),
                                                                        (char)((uint) * (ushort *)(puVar11 + 1) >> 8));
                                    iVar13 = 2;
                                    puVar9 = (uint *)((int)puVar11 + 6);
                                    do
                                    {
                                        uVar12 = *puVar9;
                                        iVar13 = iVar13 + -1;
                                        *puVar9 = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                            | (uVar12 & 0xff0000 | uVar12 >> 0x10) >> 8;
                                        puVar9 = puVar9 + 1;
                                    } while (iVar13 != 0);
                                    iVar13 = 2;
                                    puVar9 = (uint *)((int)puVar11 + 0xe);
                                    do
                                    {
                                        uVar12 = *puVar9;
                                        iVar13 = iVar13 + -1;
                                        *puVar9 = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                            | (uVar12 & 0xff0000 | uVar12 >> 0x10) >> 8;
                                        puVar9 = puVar9 + 1;
                                    } while (iVar13 != 0);
                                    uVar12 = puVar11[6];
                                    uVar3 = puVar11[7];
                                    puVar11[6] = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                        | (uVar12 >> 0x10 | uVar12 & 0xff0000) >> 8;
                                    puVar11[7] =
                                        (uVar3 & 0xff00 | uVar3 << 0x10) << 8 | (uVar3 >> 0x10 | uVar3 & 0xff0000) >> 8;
                                }
                            }
                            puVar11 = ppuVar4[1];
                            if (puVar11 != NULL)
                            {
                                puVar9 = (uint *)puVar11[0xf];
                                *(ushort *)puVar11 =
                                    CONCAT11((char)*(ushort *)puVar11, (char)((uint) * (ushort *)puVar11 >> 8));
                                *(ushort *)((int)puVar11 + 6) =
                                    CONCAT11((char)*(ushort *)((int)puVar11 + 6),
                                             (char)((uint) * (ushort *)((int)puVar11 + 6) >> 8));
                                *(ushort *)(puVar11 + 2) = CONCAT11((char)*(ushort *)(puVar11 + 2),
                                                                    (char)((uint) * (ushort *)(puVar11 + 2) >> 8));
                                uVar12 = puVar11[5];
                                *(ushort *)((int)puVar11 + 10) =
                                    CONCAT11((char)*(ushort *)((int)puVar11 + 10),
                                             (char)((uint) * (ushort *)((int)puVar11 + 10) >> 8));
                                uVar3 = puVar11[6];
                                puVar11[5] = swap32(uVar12);
                                uVar12 = puVar11[7];
                                puVar11[6] = swap32(uVar3);
                                uVar3 = puVar11[8];
                                puVar11[7] = swap32(uVar12);
                                uVar12 = puVar11[9];
                                puVar11[8] = swap32(uVar3);
                                uVar3 = puVar11[10];
                                puVar11[9] = swap32(uVar12);
                                uVar12 = puVar11[0xb];
                                puVar11[10] = swap32(uVar3);
                                puVar11[0xb] = swap32(uVar12);
                                *(ushort *)(puVar11 + 0xc) = CONCAT11((char)*(ushort *)(puVar11 + 0xc),
                                                                      (char)((uint) * (ushort *)(puVar11 + 0xc) >> 8));
                                uVar12 = puVar11[0xd];
                                *(ushort *)((int)puVar11 + 0x32) =
                                    CONCAT11((char)*(ushort *)((int)puVar11 + 0x32),
                                             (char)((uint) * (ushort *)((int)puVar11 + 0x32) >> 8));
                                uVar3 = puVar11[0xe];
                                puVar11[0xd] = swap32(uVar12);
                                puVar11[0xe] = swap32(uVar3);
                                for (; puVar9 != NULL; puVar9 = (uint *)puVar9[10])
                                {
                                    iVar13 = 3;
                                    puVar11 = puVar9;
                                    do
                                    {
                                        uVar12 = *puVar11;
                                        iVar13 = iVar13 + -1;
                                        *puVar11 = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                            | (uVar12 >> 0x10 | uVar12 & 0xff0000) >> 8;
                                        puVar11 = puVar11 + 1;
                                    } while (iVar13 != 0);
                                    iVar13 = 3;
                                    puVar11 = puVar9 + 3;
                                    do
                                    {
                                        uVar12 = *puVar11;
                                        iVar13 = iVar13 + -1;
                                        *puVar11 = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                            | (uVar12 & 0xff0000 | uVar12 >> 0x10) >> 8;
                                        puVar11 = puVar11 + 1;
                                    } while (iVar13 != 0);
                                    uVar12 = puVar9[6];
                                    puVar9[6] = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                        | (uVar12 & 0xff0000 | uVar12 >> 0x10) >> 8;
                                    uVar12 = puVar9[7];
                                    puVar9[7] = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                        | (uVar12 & 0xff0000 | uVar12 >> 0x10) >> 8;
                                    *(ushort *)(puVar9 + 9) = CONCAT11((char)*(ushort *)(puVar9 + 9),
                                                                       (char)((uint) * (ushort *)(puVar9 + 9) >> 8));
                                    *(ushort *)((int)puVar9 + 0x26) =
                                        CONCAT11((char)*(ushort *)((int)puVar9 + 0x26),
                                                 (char)((uint) * (ushort *)((int)puVar9 + 0x26) >> 8));
                                }
                            }
                            iVar13 = 6;
                            ppuVar10 = ppuVar4 + 2;
                            do
                            {
                                puVar11 = *ppuVar10;
                                iVar13 = iVar13 + -1;
                                *ppuVar10 = (uint *)(((uint)puVar11 & 0xff00 | (int)puVar11 << 0x10) << 8
                                                     | ((uint)puVar11 & 0xff0000 | (uint)puVar11 >> 0x10) >> 8);
                                ppuVar10 = ppuVar10 + 1;
                            } while (iVar13 != 0);
                            uVar5 = *(ushort *)(ppuVar4 + 8) << 8 | (ushort)((uint) * (ushort *)(ppuVar4 + 8) >> 8);
                            *(ushort *)(ppuVar4 + 8) = uVar5;
                            *(ushort *)((int)ppuVar4 + 0x22) =
                                CONCAT11((char)*(ushort *)((int)ppuVar4 + 0x22),
                                         (char)((uint) * (ushort *)((int)ppuVar4 + 0x22) >> 8));
                            if ((ppuVar4[9] != NULL) && (iVar13 = 0, 0 < (short)uVar5))
                            {
                                do
                                {
                                    puVar11 = ppuVar4[9] + iVar13;
                                    uVar12 = ppuVar4[9][iVar13];
                                    iVar13 = iVar13 + 1;
                                    *puVar11 = (uVar12 & 0xff00 | uVar12 << 0x10) << 8
                                        | (uVar12 >> 0x10 | uVar12 & 0xff0000) >> 8;
                                } while (iVar13 < *(short *)(ppuVar4 + 8));
                            }
                            iVar13 = 0;
                            if ((ppuVar4[0xb] != NULL) && (ppuVar4[10] != NULL))
                            {
                                sVar2 = *(short *)((int)ppuVar4 + 0x22);
                                iVar8 = 0;
                                if (sVar2 == 3)
                                {
                                    iVar8 = *(short *)(ppuVar4 + 8) * 3;
                                }
                                else if (sVar2 == 4)
                                {
                                    iVar8 = (int)*(short *)(ppuVar4 + 8) << 2;
                                }
                                else
                                {
                                    if (sVar2 != 5)
                                    {
                                        do
                                        {
                                            // WARNING: Do nothing block with
                                            // infinite loop
                                        } while (true);
                                    }
                                    iVar14 = (int)*(short *)(ppuVar4 + 8);
                                    local_4 = 0;
                                    if (0 < iVar14)
                                    {
                                        puVar11 = ppuVar4[9];
                                        iVar15 = iVar14;
                                        do
                                        {
                                            uVar12 = *puVar11;
                                            puVar11 = puVar11 + 1;
                                            iVar15 = iVar15 + -1;
                                            iVar8 = iVar8 + 2 + uVar12;
                                            local_4 = iVar14;
                                        } while (iVar15 != 0);
                                    }
                                }
                                if (0 < iVar8)
                                {
                                    do
                                    {
                                        puVar1 = (ushort *)((int)ppuVar4[10] + iVar13 * 2);
                                        iVar13 = iVar13 + 1;
                                        uVar5 = *puVar1;
                                        *puVar1 = CONCAT11((char)uVar5, (char)((uint)uVar5 >> 8));
                                    } while (iVar13 < iVar8);
                                }
                            }
                            uVar5 = *(ushort *)(ppuVar4 + 0xe) << 8 | (ushort)((uint) * (ushort *)(ppuVar4 + 0xe) >> 8);
                            *(ushort *)(ppuVar4 + 0xe) = uVar5;
                            if (((DAT_00e6b168 == 0) && (ppuVar4[0xb] != NULL)) && (iVar13 = 0, 0 < (short)uVar5 * 3))
                            {
                                do
                                {
                                    uVar5 = *(ushort *)((int)ppuVar4[0xb] + iVar13 * 2);
                                    iVar8 = iVar13 * 2;
                                    iVar13 = iVar13 + 1;
                                    *(ushort *)((int)ppuVar4[0xb] + iVar8) =
                                        CONCAT11((char)uVar5, (char)((uint)uVar5 >> 8));
                                } while (iVar13 < *(short *)(ppuVar4 + 0xe) * 3);
                            }
                            *(ushort *)((int)ppuVar4 + 0x3a) =
                                CONCAT11((char)*(ushort *)((int)ppuVar4 + 0x3a),
                                         (char)((uint) * (ushort *)((int)ppuVar4 + 0x3a) >> 8));
                            *(ushort *)(ppuVar4 + 0xf) = CONCAT11((char)*(ushort *)(ppuVar4 + 0xf),
                                                                  (char)((uint) * (ushort *)(ppuVar4 + 0xf) >> 8));
                            *(ushort *)((int)ppuVar4 + 0x3e) =
                                CONCAT11((char)*(ushort *)((int)ppuVar4 + 0x3e),
                                         (char)((uint) * (ushort *)((int)ppuVar4 + 0x3e) >> 8));
                        }
                        local_4 = local_4 + 1;
                    } while (local_4 < (int)param_1[5]);
                }
            }
        }
        else if ((int)uVar6 < 0xd065)
        {
            if (uVar6 == 0xd064)
            {
                iVar13 = 0xc;
                puVar11 = param_1 + 7;
                do
                {
                    uVar12 = *puVar11;
                    iVar13 = iVar13 + -1;
                    *puVar11 = swap32(uVar12);
                    puVar11 = puVar11 + 1;
                } while (iVar13 != 0);
            }
            else if (uVar6 == 0x5066)
            {
                iVar13 = 8;
                puVar11 = param_1 + 7;
                do
                {
                    uVar12 = *puVar11;
                    iVar13 = iVar13 + -1;
                    *puVar11 = swap32(uVar12);
                    puVar11 = puVar11 + 1;
                } while (iVar13 != 0);
                iVar13 = 3;
                puVar11 = param_1 + 0xf;
                do
                {
                    uVar12 = *puVar11;
                    iVar13 = iVar13 + -1;
                    *puVar11 = swap32(uVar12);
                    puVar11 = puVar11 + 1;
                } while (iVar13 != 0);
            }
        }
        else if (uVar6 == 0xd065)
        {
            iVar13 = 0xc;
            puVar11 = param_1 + 7;
            do
            {
                uVar12 = *puVar11;
                iVar13 = iVar13 + -1;
                *puVar11 = swap32(uVar12);
                puVar11 = puVar11 + 1;
            } while (iVar13 != 0);
            iVar13 = 3;
            puVar11 = param_1 + 0x13;
            do
            {
                uVar12 = *puVar11;
                iVar13 = iVar13 + -1;
                *puVar11 = swap32(uVar12);
                puVar11 = puVar11 + 1;
            } while (iVar13 != 0);
        }
        else if (uVar6 == 0xd066)
        {
            *(ushort *)(param_1 + 7) =
                CONCAT11((char)*(ushort *)(param_1 + 7), (char)((uint) * (ushort *)(param_1 + 7) >> 8));
            *(ushort *)((int)param_1 + 0x1e) =
                CONCAT11((char)*(ushort *)((int)param_1 + 0x1e), (char)((uint) * (ushort *)((int)param_1 + 0x1e) >> 8));
            iVar13 = 3;
            puVar11 = param_1 + 8;
            do
            {
                uVar12 = *puVar11;
                iVar13 = iVar13 + -1;
                *puVar11 = swap32(uVar12);
                puVar11 = puVar11 + 1;
            } while (iVar13 != 0);
        }
        if ((*param_1 & 0x4000) != 0)
        {
            uVar12 = param_1[5];
            iVar13 = 0;
            uVar12 = swap32(uVar12);
            param_1[5] = uVar12;
            if (0 < (int)uVar12)
            {
                do
                {
                    models_parse_malt(*(undefined_32 *)(param_1[6] + iVar13 * 4));
                    iVar13 = iVar13 + 1;
                } while (iVar13 < (int)param_1[5]);
            }
        }
    }
    return;
}

// 00448180
void models_parse_anim(int param_1)

{
    int iVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    uint uVar6;
    int iVar7;

    uVar2 = *(uint *)(param_1 + 0xdc);
    iVar7 = 0;
    *(uint *)(param_1 + 0xdc) = swap32(uVar2);
    uVar2 = *(uint *)(param_1 + 0xe0);
    *(uint *)(param_1 + 0xe0) = swap32(uVar2);
    uVar2 = *(uint *)(param_1 + 0xe4);
    uVar3 = *(uint *)(param_1 + 0xe8);
    *(uint *)(param_1 + 0xe4) = swap32(uVar2);
    uVar2 = *(uint *)(param_1 + 0xec);
    *(uint *)(param_1 + 0xe8) = swap32(uVar3);
    uVar3 = *(uint *)(param_1 + 0xf0);
    *(uint *)(param_1 + 0xec) = swap32(uVar2);
    uVar2 = *(uint *)(param_1 + 0xf4);
    *(uint *)(param_1 + 0xf0) = swap32(uVar3);
    uVar3 = *(uint *)(param_1 + 0xf8);
    *(uint *)(param_1 + 0xf4) = swap32(uVar2);
    uVar2 = *(uint *)(param_1 + 0xfc);
    *(uint *)(param_1 + 0xf8) = swap32(uVar3);
    *(uint *)(param_1 + 0xfc) = swap32(uVar2);
    uVar2 = *(uint *)(param_1 + 0x100);
    uVar3 = *(uint *)(param_1 + 0x104);
    *(uint *)(param_1 + 0x100) = swap32(uVar2);
    uVar4 = *(uint *)(param_1 + 0x108);
    uVar6 = swap32(uVar3);
    *(uint *)(param_1 + 0x104) = uVar6;
    uVar3 = *(uint *)(param_1 + 0x10c);
    *(uint *)(param_1 + 0x108) = swap32(uVar4);
    uVar4 = *(uint *)(param_1 + 0x110);
    *(uint *)(param_1 + 0x10c) = swap32(uVar3);
    uVar3 = *(uint *)(param_1 + 0x114);
    *(uint *)(param_1 + 0x110) = swap32(uVar4);
    uVar4 = *(uint *)(param_1 + 0x118);
    *(uint *)(param_1 + 0x114) = swap32(uVar3);
    uVar3 = *(uint *)(param_1 + 0x128);
    *(uint *)(param_1 + 0x118) = swap32(uVar4);
    *(uint *)(param_1 + 0x128) = swap32(uVar3);
    switch ((uVar2 >> 0x10 & 0xf00) >> 8)
    {
    case 1:
    case 11u:
    case 12u:
        iVar7 = 1;
        break;
    case 4:
        iVar7 = 2;
        break;
    case 6:
    case 8:
        iVar7 = 4;
        break;
    case 7:
    case 9:
    case 10:
        iVar7 = 3;
    }
    if ((*(int *)(param_1 + 0x11c) != 0) && (iVar5 = 0, 0 < (int)uVar6))
    {
        do
        {
            iVar1 = iVar5 * 4;
            uVar2 = *(uint *)(*(int *)(param_1 + 0x11c) + iVar5 * 4);
            iVar5 = iVar5 + 1;
            *(uint *)(*(int *)(param_1 + 0x11c) + iVar1) = swap32(uVar2);
        } while (iVar5 < *(int *)(param_1 + 0x104));
    }
    if (((*(int *)(param_1 + 0x120) != 0) && (iVar7 != 0)) && (iVar5 = 0, 0 < iVar7 * *(int *)(param_1 + 0x104)))
    {
        do
        {
            iVar1 = iVar5 * 4;
            uVar2 = *(uint *)(*(int *)(param_1 + 0x120) + iVar5 * 4);
            iVar5 = iVar5 + 1;
            *(uint *)(*(int *)(param_1 + 0x120) + iVar1) = swap32(uVar2);
        } while (iVar5 < iVar7 * *(int *)(param_1 + 0x104));
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004485d0(uint *param_1)

{
    uint *puVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    uint *puVar5;
    uint *puVar6;

    uVar3 = *param_1;
    puVar5 = param_1 + 1;
    uVar4 = swap32(uVar3);
    *param_1 = uVar4;
    DAT_00e6b168 = 0;
    _DAT_00e981e8 = 0;
    uVar3 = *puVar5;
    while (uVar3 != -1)
    {
        if (uVar3 != 0)
        {
            models_parse_malt(uVar3);
        }
        puVar6 = puVar5 + 1;
        puVar5 = puVar5 + 1;
        uVar3 = *puVar6;
    }

    // Advance pointer to behind the data
    uVar3 = puVar5[1];
    puVar6 = puVar5 + 1;
    if (swap32(uVar3) == MAGIC('D', 'a', 't', 'a'))
    {
        *puVar6 = MAGIC('D', 'a', 't', 'a');
        uVar3 = puVar5[2];
        puVar6 = puVar5 + 3;
        uVar3 = swap32(uVar3);
        puVar5[2] = uVar3;
        puVar5 = puVar6;

        // Swap all data bytes
        if (0 < (int)uVar3)
        {
            do
            {
                uVar2 = *puVar5;
                puVar6 = puVar5 + 1;
                uVar3 = uVar3 - 1;
                *puVar5 = swap32(uVar2);
                puVar5 = puVar6;
            } while (uVar3 != 0);
        }
    }
    uVar3 = *puVar6;
    if (swap32(uVar3) == MAGIC('A', 'n', 'i', 'm'))
    {
        *puVar6 = MAGIC('A', 'n', 'i', 'm');
        puVar5 = puVar6 + 1;
        uVar3 = puVar6[1];
        puVar6 = puVar5;
        while (uVar3 != 0)
        {
            models_parse_anim(uVar3);
            puVar1 = puVar5 + 1;
            puVar5 = puVar5 + 1;
            puVar6 = puVar6 + 1;
            uVar3 = *puVar1;
        }
        puVar6 = puVar6 + 1;
    }
    uVar3 = *puVar6;
    if (swap32(uVar3) == MAGIC('A', 'l', 't', 'N'))
    {
        *puVar6 = MAGIC('A', 'l', 't', 'N');
        puVar6 = puVar6 + 1;
        if (uVar4 == MAGIC('M', 'A', 'l', 't'))
        {
            uVar3 = *puVar6;
            while (uVar3 != 0)
            {
                models_parse_malt(uVar3);
                puVar5 = puVar6 + 1;
                puVar6 = puVar6 + 1;
                uVar3 = *puVar5;
            }
        }
    }
    return;
}

// 00448780
uint *models_load(int param_1)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    uint *puVar7;
    uint *puVar8;
    uint local_14;
    int local_10;
    uint local_c[3];

    // Load textureblock
    level_data_open(3);

    // Load modelblock
    level_data_open(0);

    DAT_0050c600 = 1;
    DAT_0050c628 = 0; // counter of some sort for malt parsing
    DAT_0050c62c = 0; // again
    DAT_0050c630 = 0; // and again
    DAT_00e981e0 = 0; // size of buffer ?
    DAT_00e98240 = 0;
    DAT_00e98248 = 0;

    // Read model count
    level_data_read(0, 0, &local_14, 4);
    local_14 = swap32(local_14);

    // Check if model index is in valid range
    if ((-1 < param_1) && (param_1 < (int)local_14))
    {
        // Read model entry from offset table
        level_data_read(0, param_1 * 8 + 4, local_c, 0xc);
        iVar3 = 3;
        puVar8 = local_c;
        do
        {
            uVar5 = *puVar8;
            iVar3 = iVar3 + -1;
            *puVar8 = swap32(uVar5);
            puVar8 = puVar8 + 1;
        } while (iVar3 != 0);
        iVar3 = local_c[1] - local_c[0];
        uVar5 = local_c[2] - local_c[1];
        if (iVar3 < 0x25801)
        {
            level_data_read(0, local_c[0], &DAT_00e6b180, iVar3);
            iVar3 = (int)(iVar3 + (iVar3 >> 0x1f & 3U)) >> 2;
            if (0 < iVar3)
            {
                puVar8 = &DAT_00e6b180;
                do
                {
                    uVar6 = *puVar8;
                    iVar3 = iVar3 + -1;
                    *puVar8 = swap32(uVar6);
                    puVar8 = puVar8 + 1;
                } while (iVar3 != 0);
            }

            // Read chunk header to 8 byte aligned buffer
            local_10 = get_buffer_index();
            puVar8 = (uint *)(local_10 + 7U & 0xfffffff8);
            level_data_read(0, local_c[1], puVar8, 0xc);
            uVar6 = *puVar8;
            if (swap32(uVar6) == MAGIC('C', 'o', 'm', 'p'))
            {
                // If this chunk is compressed, decompress it

                // Get and validate length of compressed chunk
                uVar6 = puVar8[2];
                iVar3 = uVar5 - 0xc;
                uVar5 = swap32(uVar6);
                iVar1 = FUN_00445bf0();
                if (iVar1 < (int)(uVar5 + 8))
                {
                    DAT_0050c610 = 1;
                    level_data_close(3);
                    level_data_close(0);
                    return NULL;
                }
                uVar6 = DAT_00e981e4 - iVar3 & 0xfffffff8;
                if (uVar5 + (int)puVar8 <= uVar6)
                {
                    // Load compressed data
                    level_data_read(0, local_c[1] + 0xc, uVar6, iVar3);

                    // Uncompress
                    model_decompressor(uVar6, puVar8);

                    // Keep track of buffer position?
                    set_buffer_index(uVar5 + (int)puVar8);
                LAB_00448a31:
                    iVar3 = 0;
                    DAT_00e9822c = local_10;
                    DAT_00e6b164 = get_buffer_index();
                    local_10 = get_buffer_index();
                    if (DAT_0050c604 != 0)
                    {
                        get_buffer_index();
                        get_buffer_index();
                        get_buffer_index();
                        get_buffer_index();
                    }
                    puVar7 = puVar8;
                    if (0 < (int)uVar5 >> 2)
                    {
                        do
                        {
                            if (((&DAT_00e6b180)[iVar3 >> 5] & 1 << (0x1f - ((byte)iVar3 & 0x1f) & 0x1f)) != 0)
                            {
                                uVar6 = *puVar7;
                                uVar4 = (uVar6 & 0xff0000 | uVar6 >> 0x10) >> 8;
                                uVar2 = (uVar6 & 0xff00 | uVar6 << 0x10) << 8 | uVar4;
                                *puVar7 = uVar2;
                                if ((uVar6 << 0x10 & 0xff0000) == 0xa0000)
                                {
                                    FUN_00447490((uVar6 & 0xff00) << 8 | uVar4, puVar7, puVar7 + 1);
                                }
                                else if (uVar2 != 0)
                                {
                                    *puVar7 = uVar2 + (int)puVar8;
                                }
                            }
                            puVar7 = puVar7 + 1;
                            iVar3 = iVar3 + 1;
                        } while (iVar3 < (int)uVar5 >> 2);
                    }

                    // Parse the model
                    FUN_004485d0(puVar8);

                    // For certain types, the header seems to be skipped?!
                    uVar5 = *puVar8;
                    if ((uVar5 == MAGIC('M', 'o', 'd', 'l')) || (uVar5 == MAGIC('T', 'r', 'a', 'k'))
                        || (uVar5 == MAGIC('P', 'o', 'd', 'd')) || (uVar5 == MAGIC('P', 'a', 'r', 't'))
                        || (uVar5 == MAGIC('S', 'c', 'e', 'n')) || (uVar5 == MAGIC('M', 'A', 'l', 't'))
                        || (uVar5 == MAGIC('P', 'u', 'p', 'p')))
                    {
                        puVar8 = puVar8 + 1;
                    }
                    else
                    {
                        FUN_00426910(uVar5);
                    }
                    if (DAT_0050c604 != 0)
                    {
                        get_buffer_index();
                        get_buffer_index();
                        get_buffer_index();
                        get_buffer_index();
                    }
                    iVar3 = get_buffer_index();
                    DAT_00e98240 = iVar3 - local_10;
                    DAT_00e981e0 = DAT_00e6b164 - DAT_00e9822c;
                    level_data_close(3);
                    level_data_close(0);
                    return puVar8;
                }
                level_data_close(3);
            }
            else
            {
                iVar3 = FUN_00445bf0();
                if ((int)(uVar5 + 8) <= iVar3)
                {
                    level_data_read(0, local_c[1], puVar8, uVar5);
                    set_buffer_index(uVar5 + (int)puVar8);
                    goto LAB_00448a31;
                }
                level_data_close(3);
            }
            level_data_close(0);
            DAT_0050c610 = 1;
            return NULL;
        }
    }
    level_data_close(3);
    level_data_close(0);
    return NULL;
}

uint *FUN_00448bd0(int *param_1)

{
    uint *puVar1;
    uint uVar2;
    int iVar3;
    int *piVar4;
    uint *puVar5;
    uint *puVar6;
    uint uVar7;

    iVar3 = *param_1;
    while (iVar3 != -1)
    {
        piVar4 = param_1 + 1;
        param_1 = param_1 + 1;
        iVar3 = *piVar4;
    }
    piVar4 = param_1 + 1;
    uVar7 = -1;
    if (param_1[1] == MAGIC('D', 'a', 't', 'a'))
    {
        piVar4 = param_1 + 3;
        if (0 < param_1[2])
        {
            piVar4 = piVar4 + param_1[2];
        }
    }
    if (*piVar4 == MAGIC('A', 'n', 'i', 'm'))
    {
        puVar5 = (uint *)(piVar4 + 1);
        uVar2 = *puVar5;
        puVar6 = puVar5;
        while (uVar2 != 0)
        {
            FUN_00425900(uVar2);
            if (*puVar6 < uVar7)
            {
                uVar7 = *puVar6;
            }
            puVar1 = puVar6 + 1;
            puVar6 = puVar6 + 1;
            uVar2 = *puVar1;
        }
    }
    else
    {
        puVar5 = NULL;
    }
    if (uVar7 != -1)
    {
        DAT_00e98248 = DAT_00e6b164 - uVar7;
        DAT_00e981e0 = DAT_00e981e0 - (DAT_00e6b164 - uVar7);
        return puVar5;
    }
    DAT_00e98248 = 0;
    return puVar5;
}

void FUN_00448c70(int *param_1, int *param_2)

{
    int iVar1;
    int *piVar2;
    int *piVar3;

    iVar1 = *param_1;
    while (iVar1 != -1)
    {
        if (*param_2 != 0)
        {
            *param_1 = *param_2;
        }
        piVar3 = param_1 + 1;
        param_1 = param_1 + 1;
        param_2 = param_2 + 1;
        iVar1 = *piVar3;
    }
    piVar3 = param_1 + 1;
    if (param_1[1] == MAGIC('D', 'a', 't', 'a'))
    {
        piVar3 = param_1 + 3;
        if (0 < param_1[2])
        {
            piVar3 = piVar3 + param_1[2];
        }
    }
    if (*piVar3 == MAGIC('A', 'n', 'i', 'm'))
    {
        do
        {
            piVar2 = piVar3;
            piVar3 = piVar2 + 1;
        } while (piVar2[1] != 0);
        piVar3 = piVar2 + 2;
    }
    if ((*piVar3 == MAGIC('A', 'l', 't', 'N')) && (param_2[1] == MAGIC('A', 'l', 't', 'N')))
    {
        param_2 = param_2 + 2;
        piVar2 = (int *)piVar3[1];
        while (piVar2 != NULL)
        {
            *piVar2 = *param_2;
            models_parse_malt(*param_2);
            param_2 = param_2 + 1;
            piVar2 = (int *)piVar3[2];
            piVar3 = piVar3 + 1;
        }
    }
    return;
}

void FUN_00448d10(undefined_32 *param_1, undefined_32 *param_2, undefined_32 *param_3)

{
    *param_1 = DAT_00e981e0;
    *param_3 = DAT_00e98240;
    *param_2 = DAT_00e98248;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00448d40(void)

{
    int iVar1;

    iVar1 = get_buffer_index();
    _DAT_00e34a60 = iVar1 + 0x3fU & 0xffffffc0;
    set_buffer_index(iVar1 + 0x4b040);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00448d60(void)

{
    int iVar1;

    iVar1 = get_buffer_index();
    _DAT_00e98238 = iVar1 + 0x3fU & 0xffffffc0;
    _DAT_00e98230 = _DAT_00e98238 + 0x10000;
    set_buffer_index(iVar1 + 0x10040);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00448d90(void)

{
    int *piVar1;
    undefined_32 uVar2;

    if (DAT_004c17e8 < 0)
    {
        piVar1 = (int *)models_load(DAT_004c17e0);
        if (-1 < DAT_004c17e4)
        {
            uVar2 = models_load(DAT_004c17e4);
            FUN_00448c70(piVar1, uVar2);
        }
        if (*piVar1 != 0)
        {
            FUN_00431a50(*piVar1, 2, 3, 0x10, 2);
        }
        FUN_004831d0(0, 8, 8, 0x138, 0xe8);
        FUN_004831d0(1, 8, 8, 0x138, 0xe8);
        FUN_00483230(1, 0);
        FUN_00483fc0(*piVar1);
        FUN_00448bd0(piVar1);
        return;
    }
    FUN_00431b20(&DAT_00e28980, 0x5064);
    _DAT_00e28994 = 2;
    _DAT_00e28998 = &DAT_00e287e0;
    piVar1 = (int *)models_load(DAT_004c17e0);
    if (-1 < DAT_004c17e4)
    {
        uVar2 = models_load(DAT_004c17e4);
        FUN_00448c70(piVar1, uVar2);
    }
    if (*piVar1 != 0)
    {
        FUN_00431a50(*piVar1, 2, 3, 0x10, 2);
    }
    FUN_00448bd0(piVar1);
    DAT_00e287e0 = *piVar1;
    piVar1 = (int *)models_load(DAT_004c17e8);
    if (*piVar1 != 0)
    {
        FUN_00431a50(*piVar1, 2, 3, 0x10, 2);
    }
    FUN_00448bd0(piVar1);
    _DAT_00e287e4 = *piVar1;
    FUN_004831d0(0, 8, 8, 0x138, 0xe8);
    FUN_004831d0(1, 8, 8, 0x138, 0xe8);
    FUN_00483230(1, 0);
    FUN_00483fc0(&DAT_00e28980);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00448f40(void)

{
    FUN_004270f0(50.0f, 300.0f);
    FUN_00448d40();
    FUN_00448d60();
    FUN_00445c00();
    if (DAT_004c17e0 == -1)
    {
        FUN_00447300(MAGIC('c', 'M', 'a', 'n'), 6);
        FUN_00447300(MAGIC('J', 'd', 'g', 'e'), 1);
        FUN_00447300(MAGIC('H', 'a', 'n', 'g'), 1);
    }
    else
    {
        FUN_00448d90();
    }
    DAT_00e996dc = DAT_00e996dc & 0xfffff7ff;
    FUN_00483a60(0, 0, 0);
    FUN_0044e0e0(0x3e4, 1000, 0xff, 0xff, 0xff, 0xff);
    _DAT_0050cb78 = 1;
    DAT_00e996dc = DAT_00e996dc | 1;
    return;
}

void FUN_00449000(void)

{
    sprite_set_color(0xffffff99, 0, 0, 0, -1);
    FUN_0044e0e0(0x3e4, 1000, 0xff, 0xff, 0xff, 0xff);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00449040(void)

{
    int iVar1;
    undefined_32 *puVar2;

    DAT_00e98200 = _malloc(0x800000);
    DAT_00e981e4 = DAT_00e98200 + 0x800000;
    puVar2 = &DAT_00e98204;
    _DAT_00e98234 = DAT_00e98200;
    MEMSET(iVar1, puVar2, 0, 10)
    FUN_00448f40();
    FUN_00449000();
    FUN_00445b90();
    return;
}

void FUN_004490a0(void)

{
    int iVar1;
    int iVar2;
    short sVar3;
    int iVar4;

    iVar4 = 7;
    FUN_00428830();
    FUN_00428a60(0, 1, &DAT_00e99420, 0);
    FUN_00428a60(1, 1, &DAT_00e99460, 0);
    FUN_00428a60(2, 1, &DAT_00e994a0, 0);
    FUN_00428a60(3, 1, &DAT_00e994e0, 0);
    FUN_00428a60(4, 1, &DAT_00e99520, 0);
    FUN_00428a60(5, 1, &DAT_00e99560, 0);
    FUN_00428a60(6, 1, &DAT_00e995a0, 0);
    FUN_00428a60(7, 1, &DAT_00e995e0, 0);
    FUN_00428a60(8, 1, &DAT_00e99620, 0);
    FUN_00428a60(9, 1, &DAT_00e99660, 0);
    do
    {
        sVar3 = (short)iVar4;
        iVar2 = sVar3 + -7;
        iVar1 = FUN_00450b00(MAGIC('c', 'M', 'a', 'n'));
        if (iVar1 <= iVar2)
            break;
        iVar2 = FUN_00450aa0(MAGIC('c', 'M', 'a', 'n'), iVar2);
        FUN_00428a60(iVar4, 3, iVar2 + 0x20, 0);
        FUN_00428b10(iVar4, iVar2 + 0x108, 0);
        FUN_00428aa0(iVar4, 0, 0, 0, 0, 0, 0);
        iVar4 = iVar4 + 1;
        *(int *)(iVar2 + 0x78) = (int)sVar3;
    } while ((short)iVar4 < 0x20);
    FUN_00428bd0(8);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004491f0(undefined_32 param_1, undefined_32 param_2)

{
    FUN_0042d720();
    FUN_00447420();
    thunk_FUN_00449e30();
    if ((DAT_00e996dc & 0x200) == 0)
    {
        _DAT_00e996ec = (int)(short)param_1;
    }
    FUN_00449040(param_1, param_2);
    FUN_004490a0();
    sprite_enable_display(0xffffff37, 0);
    FUN_00426910(&DAT_004c17fc);
    FUN_00480480(0, 0xbff00000);
    FUN_004804c0();
    return;
}

void FUN_00449260(void)

{
    *(undefined_32 *)(PTR_DAT_004c1cb4 + 4) = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00449270(void)

{
    byte *pbVar1;
    byte *pbVar2;
    float fVar3;
    int iVar4;
    int iVar5;

    iVar5 = 0;
    *(float *)(PTR_DAT_004c1cb4 + 0x14) = *(float *)(PTR_DAT_004c1cb4 + 0x14) - (float)_DAT_00e22a40;
    fVar3 = *(float *)(PTR_DAT_004c1cb4 + 0x14);
    while (fVar3 < 0.0)
    {
        iVar5 = iVar5 + 1;
        *(float *)(PTR_DAT_004c1cb4 + 0x14) = *(float *)(PTR_DAT_004c1cb4 + 0x10) + *(float *)(PTR_DAT_004c1cb4 + 0x14);
        fVar3 = *(float *)(PTR_DAT_004c1cb4 + 0x14);
    }
    if (((*(int *)(PTR_DAT_004c1cb4 + 4) != 0) && (0 < iVar5)) && (iVar4 = 0, 0 < *(short *)(PTR_DAT_004c1cb4 + 0x18)))
    {
        do
        {
            *(byte *)(*(int *)(PTR_DAT_004c1cb4 + 0x20) + iVar4) =
                (byte)((int)(iVar5 + (uint) * (byte *)(*(int *)(PTR_DAT_004c1cb4 + 0x20) + iVar4))
                       % (int)*(short *)(PTR_DAT_004c1cb4 + 0xc));
            pbVar1 = (byte *)(*(int *)(PTR_DAT_004c1cb4 + 0x20) + iVar4);
            pbVar2 = (byte *)(*(int *)(PTR_DAT_004c1cb4 + 0x1c) + iVar4);
            iVar4 = iVar4 + 1;
            *(undefined_16 *)(*(int *)(PTR_DAT_004c1cb4 + 4) + (uint)*pbVar2 * 2) =
                *(undefined_16 *)(*(int *)(PTR_DAT_004c1cb4 + 8) + (uint)*pbVar1 * 2);
        } while (iVar4 < *(short *)(PTR_DAT_004c1cb4 + 0x18));
    }
    return;
}

void FUN_00449330(float *param_1, float *param_2)

{
    int iVar1;
    float10 fVar2;

    param_1[0] = param_2[0];
    param_1[1] = param_2[1] * 0.001;
    fVar2 = (float10)SQRT3(param_2[3]);
    param_1[2] = (float)((float10)1.0 - fVar2 * (float10)0.4761905);
    param_1[3] = (param_2[4] - 450.0) * 0.005;
    fVar2 = (float10)SQRT3(param_2[5] * 0.5);
    iVar1 = 7;
    param_1[4] = (float)((float10)8.0 / fVar2 - (float10)1.68);
    param_1[5] = param_2[9] * 0.05;
    param_1[6] = param_2[0xb];
    do
    {
        CLAMP(*param_1, 0.05, 1.0)
        param_1 = param_1 + 1;
        iVar1 = iVar1 + -1;
    } while (iVar1 != 0); // 7 iterations
    return;
}

void FUN_004493f0(float *param_1, undefined_32 param_2, int param_3, float param_4)

{
    float fVar1;

    switch (param_2)
    {
    case 0:
        if (param_3 == 1)
        {
            fVar1 = param_4 * 0.05 + *param_1;
            *param_1 = fVar1;
            *param_1 = CLAMP(*param_1, 0.01, 1.0);
        }
        if (param_3 == 2)
        {
            fVar1 = param_4 * 0.1 + *param_1;
            *param_1 = fVar1;
            *param_1 = CLAMP(*param_1, 0.01, 1.0);
        }
        if (param_3 == 3)
        {
            fVar1 = param_4 * 0.15 + *param_1;
            *param_1 = fVar1;
            *param_1 = CLAMP(*param_1, 0.01, 1.0);
        }
        if (param_3 == 4)
        {
            fVar1 = param_4 * 0.2 + *param_1;
            *param_1 = fVar1;
            *param_1 = CLAMP(*param_1, 0.01, 1.0);
        }
        if (param_3 == 5)
        {
            fVar1 = param_4 * 0.25 + *param_1;
            *param_1 = fVar1;
            *param_1 = CLAMP(*param_1, 0.01, 1.0);
        }
        break;
    case 1:
        if (param_3 == 1)
        {
            fVar1 = param_4 * 116.0 + param_1[1];
            param_1[1] = fVar1;
            param_1[1] = CLAMP(param_1[1], 50.0, 1000.0);
        }
        if (param_3 == 2)
        {
            fVar1 = param_4 * 232.0 + param_1[1];
            param_1[1] = fVar1;
            param_1[1] = CLAMP(param_1[1], 50.0, 1000.0);
        }
        if (param_3 == 3)
        {
            fVar1 = param_4 * 348.0 + param_1[1];
            param_1[1] = fVar1;
            param_1[1] = CLAMP(param_1[1], 50.0, 1000.0);
        }
        if (param_3 == 4)
        {
            fVar1 = param_4 * 464.0 + param_1[1];
            param_1[1] = fVar1;
            param_1[1] = CLAMP(param_1[1], 50.0, 1000.0);
        }
        if (param_3 == 5)
        {
            fVar1 = param_4 * 578.0 + param_1[1];
            param_1[1] = fVar1;
            param_1[1] = CLAMP(param_1[1], 50.0, 1000.0);
        }
        break;
    case 2:
        if (param_3 == 1)
        {
            fVar1 = ((1.0 - param_4) * 0.14 - -0.86) * param_1[3];
            param_1[3] = fVar1;
            param_1[3] = CLAMP(param_1[3], 0.1, 5.0);
        }
        if (param_3 == 2)
        {
            fVar1 = ((1.0 - param_4) * 0.28 - -0.72) * param_1[3];
            param_1[3] = fVar1;
            param_1[3] = CLAMP(param_1[3], 0.1, 5.0);
        }
        if (param_3 == 3)
        {
            fVar1 = ((1.0 - param_4) * 0.42 - -0.58) * param_1[3];
            param_1[3] = fVar1;
            param_1[3] = CLAMP(param_1[3], 0.1, 5.0);
        }
        if (param_3 == 4)
        {
            fVar1 = ((1.0 - param_4) * 0.56 - -0.44) * param_1[3];
            param_1[3] = fVar1;
            param_1[3] = CLAMP(param_1[3], 0.1, 5.0);
        }
        if (param_3 == 5)
        {
            fVar1 = ((1.0 - param_4) * 0.7 - -0.3) * param_1[3];
            param_1[3] = fVar1;
            param_1[3] = CLAMP(param_1[3], 0.1, 5.0);
        }
        break;
    case 3:
        if (param_3 == 1)
        {
            fVar1 = param_4 * 40.0 + param_1[4];
            param_1[4] = fVar1;
            param_1[4] = CLAMP(param_1[4], 450.0, 650.0);
        }
        if (param_3 == 2)
        {
            fVar1 = param_4 * 80.0 + param_1[4];
            param_1[4] = fVar1;
            param_1[4] = CLAMP(param_1[4], 450.0, 650.0);
        }
        if (param_3 == 3)
        {
            fVar1 = param_4 * 120.0 + param_1[4];
            param_1[4] = fVar1;
            param_1[4] = CLAMP(param_1[4], 450.0, 650.0);
        }
        if (param_3 == 4)
        {
            fVar1 = param_4 * 160.0 + param_1[4];
            param_1[4] = fVar1;
            param_1[4] = CLAMP(param_1[4], 450.0, 650.0);
        }
        if (param_3 == 5)
        {
            fVar1 = param_4 * 200.0 + param_1[4];
            param_1[4] = fVar1;
            param_1[4] = CLAMP(param_1[4], 450.0, 650.0);
        }
        break;
    case 4:
        if (param_3 == 1)
        {
            fVar1 = ((1.0 - param_4) * 0.07999998 - -0.92) * param_1[5];
            param_1[5] = fVar1;
            param_1[5] = CLAMP(param_1[5], 1.0, 1000.0);
        }
        if (param_3 == 2)
        {
            fVar1 = ((1.0 - param_4) * 0.17 - -0.83) * param_1[5];
            param_1[5] = fVar1;
            param_1[5] = CLAMP(param_1[5], 1.0, 1000.0);
        }
        if (param_3 == 3)
        {
            fVar1 = ((1.0 - param_4) * 0.26 - -0.74) * param_1[5];
            param_1[5] = fVar1;
            param_1[5] = CLAMP(param_1[5], 1.0, 1000.0);
        }
        if (param_3 == 4)
        {
            fVar1 = ((1.0 - param_4) * 0.35 - -0.65) * param_1[5];
            param_1[5] = fVar1;
            param_1[5] = CLAMP(param_1[5], 1.0, 1000.0);
        }
        if (param_3 == 5)
        {
            fVar1 = ((1.0 - param_4) * 0.44 - -0.56) * param_1[5];
            param_1[5] = fVar1;
            param_1[5] = CLAMP(param_1[5], 1.0, 1000.0);
        }
        break;
    case 5:
        if (param_3 == 1)
        {
            fVar1 = param_4 * 1.6 + param_1[9];
            param_1[9] = fVar1;
            param_1[9] = CLAMP(param_1[9], 1.0, 20.0);
        }
        if (param_3 == 2)
        {
            fVar1 = param_4 * 3.2 + param_1[9];
            param_1[9] = fVar1;
            param_1[9] = CLAMP(param_1[9], 1.0, 20.0);
        }
        if (param_3 == 3)
        {
            fVar1 = param_4 * 4.8 + param_1[9];
            param_1[9] = fVar1;
            param_1[9] = CLAMP(param_1[9], 1.0, 20.0);
        }
        if (param_3 == 4)
        {
            fVar1 = param_4 * 6.4 + param_1[9];
            param_1[9] = fVar1;
            param_1[9] = CLAMP(param_1[9], 1.0, 20.0);
        }
        if (param_3 == 5)
        {
            fVar1 = param_4 * 8.0 + param_1[9];
            param_1[9] = fVar1;
            param_1[9] = CLAMP(param_1[9], 1.0, 20.0);
        }
        break;
    case 6:
        if (param_3 == 1)
        {
            fVar1 = param_4 * 0.1 + param_1[0xb];
            param_1[0xb] = fVar1;
            param_1[0xb] = CLAMP(param_1[0xb], 0.0, 1.0);
        }
        if (param_3 == 2)
        {
            fVar1 = param_4 * 0.2 + param_1[0xb];
            param_1[0xb] = fVar1;
            param_1[0xb] = CLAMP(param_1[0xb], 0.0, 1.0);
        }
        if (param_3 == 3)
        {
            fVar1 = param_4 * 0.3 + param_1[0xb];
            param_1[0xb] = fVar1;
            param_1[0xb] = CLAMP(param_1[0xb], 0.0, 1.0);
        }
        if (param_3 == 4)
        {
            fVar1 = param_4 * 0.4 + param_1[0xb];
            param_1[0xb] = fVar1;
            param_1[0xb] = CLAMP(param_1[0xb], 0.0, 1.0);
        }
        if (param_3 == 5)
        {
            fVar1 = param_4 * 0.45 + param_1[0xb];
            param_1[0xb] = fVar1;
            param_1[0xb] = CLAMP(param_1[0xb], 0.0, 1.0);
        }
    }
    return;
}

void FUN_00449d00(undefined_32 *param_1, undefined_32 *param_2, int param_3, int param_4)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = param_1;
    QMEMCPY(iVar1, param_2, puVar2, 0xf)
    iVar1 = 0;
    do
    {
        FUN_004493f0(param_1, iVar1, (int)*(char *)(iVar1 + param_3),
                     (float)(uint)(byte)((char *)(iVar1 + param_3))[param_4 - param_3] * 0.003921569);
        iVar1 = iVar1 + 1;
    } while (iVar1 < 7);
    return;
}

void FUN_00449d60(void)

{
    FUN_00449ea0();
    DAT_0050c68c = 1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00449d70(void)

{
    if ((DAT_0050c68c != 0) && (DAT_004eb450 != 0))
    {
        _DAT_004c2588 = __ftol();
    }
    return;
}

void FUN_00449da0(int param_1)

{
    undefined_32 *puVar1;
    int iVar2;

    if ((DAT_0050c68c != 0) && (DAT_004eb450 != 0))
    {
        iVar2 = 0;
        puVar1 = &DAT_00e68078;
        while ((puVar1[-5] != param_1 || (*puVar1 = 0, (int)puVar1[-6] < 0)))
        {
            puVar1 = puVar1 + 0x11;
            iVar2 = iVar2 + 1;
            if (0xe68297 < (int)puVar1)
            {
                return;
            }
        }
        FUN_00485070((&DAT_00e68080)[iVar2 * 0x11]);
    }
    return;
}

void FUN_00449e00(undefined_32 *param_1)

{
    param_1[0] = -1;
    param_1[1] = -1;
    param_1[2] = 0;
    param_1[3] = -1;
    param_1[4] = 0;
    param_1[5] = 1.0f;
    *(undefined_16 *)(param_1 + 7) = 0x40;
    param_1[8] = 0;
    param_1[10] = 0;
    return;
}

void FUN_00449e30(void)

{
    undefined_32 *puVar1;

    puVar1 = &DAT_00e68078;
    do
    {
        *puVar1 = 0;
        puVar1 = puVar1 + 0x11;
    } while ((int)puVar1 < 0xe68298);
    return;
}

void FUN_00449e50(void)

{
    int *piVar1;

    if ((DAT_0050c68c != 0) && (DAT_004eb450 != 0))
    {
        piVar1 = &DAT_00e68068;
        do
        {
            piVar1[4] = 0;
            if ((*piVar1 == 0) && (-1 < piVar1[-2]))
            {
                FUN_00485070(piVar1[6]);
            }
            piVar1 = piVar1 + 0x11;
        } while ((int)piVar1 < 0xe68288);
    }
    return;
}

void FUN_00449ea0(void)

{
    int iVar1;

    iVar1 = 0;
    do
    {
        FUN_00449e00(&DAT_00e67e40 + iVar1);
        FUN_00449e00((int)&DAT_00e68060 + iVar1);
        *(undefined_32 *)((int)&DAT_00e67c40 + iVar1) = 0;
        *(undefined_32 *)((int)&DAT_00e67c48 + iVar1) = 0;
        *(undefined_32 *)((int)&DAT_00e67c44 + iVar1) = 1;
        iVar1 = iVar1 + 0x44;
    } while (iVar1 < 0x220);
    return;
}

// WARNING: Could not reconcile some variable overlaps
// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00449ef0(void)

{
    float fVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    short sVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    int iVar8;
    int *piVar9;
    undefined_32 *puVar10;
    int *piVar11;
    undefined_32 *puVar12;
    bool bVar13;
    float *pfVar14;
    float *pfVar15;
    int local_38;
    uint local_34;
    uint local_30;
    undefined_32 local_2c;
    double local_28;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;

    if (DAT_004eb450 != 0)
    {
        if (DAT_0050d550 != 0)
        {
            _DAT_0050c678 = DAT_0050c668;
            _DAT_0050c67c = DAT_0050c66c;
            _DAT_0050c680 = DAT_0050c670;
            FUN_004292b0(&DAT_0050c638);
        }
        bVar13 = DAT_0050c684 != DAT_0050c688;
        if (bVar13)
        {
            DAT_0050c684 = DAT_0050c688;
        }
        local_30 = (uint)bVar13;
        if (DAT_004eb454 < 1)
        {
            DAT_004eb454 = 0;
        }
        else
        {
            DAT_004eb454 = DAT_004eb454 + -1;
        }
        local_38 = 0;
        do
        {
            iVar8 = local_38 * 0x44;
            piVar9 = (int *)(&DAT_00e67e40 + iVar8);
            if ((((-1 < *(int *)(&DAT_00e67e40 + iVar8)) && (*(int *)(&DAT_00e67e68 + iVar8) == 0))
                 && (DAT_004eb454 != 0))
                && (iVar5 = FUN_00422a90((&DAT_00e67e44)[local_38 * 0x11]),
                    *(int *)(iVar5 + 0x48) != (&DAT_00e67e60)[local_38 * 0x11]))
            {
                FUN_00449e00(piVar9);
            }
            if ((&DAT_00e67c40)[local_38 * 0x11] != 0)
            {
                local_34 = __ftol();
                *(uint *)(&DAT_00e67c38 + iVar8) = local_34;
                if (0.0 < (double)local_34)
                {
                    FUN_00484d90((&DAT_00e67c40)[local_38 * 0x11], (float)local_34 * 3.051851e-05);
                }
                else
                {
                    FUN_00485070((&DAT_00e67c40)[local_38 * 0x11]);
                    if ((&DAT_00e67c44)[local_38 * 0x11] != 0)
                    {
                        release_ia3d((&DAT_00e67c40)[local_38 * 0x11]);
                    }
                    (&DAT_00e67c40)[local_38 * 0x11] = 0;
                    (&DAT_00e67c44)[local_38 * 0x11] = 1;
                }
            }
            if ((((&DAT_00e68068)[local_38 * 0x11] != 0) && ((&DAT_00e6806c)[local_38 * 0x11] != DAT_00e22a30))
                && ((&DAT_00e6806c)[local_38 * 0x11] != DAT_00e22a30 + -1))
            {
                uVar6 = __ftol();
                local_28 = (double)((ulonglong)local_28 & 0xffffffff00000000 | (ulonglong)uVar6);
                (&DAT_00e68078)[local_38 * 0x11] = uVar6;
                if ((double)uVar6 <= 0.0)
                {
                    (&DAT_00e68078)[local_38 * 0x11] = 0;
                    FUN_00449e00(&DAT_00e68060 + local_38 * 0x11);
                }
            }
            if (*piVar9 != -1)
            {
                uVar2 = (&DAT_00e67e60)[local_38 * 0x11];
                iVar5 = FUN_004850c0(uVar2, 0);
                if (iVar5 == 0)
                {
                    if ((&DAT_00e68060)[local_38 * 0x11] == *piVar9)
                    {
                        FUN_00449e00(&DAT_00e68060 + local_38 * 0x11);
                    }
                    iVar5 = FUN_00422a90((&DAT_00e67e44)[local_38 * 0x11]);
                    if (((*(byte *)(iVar5 + 0x24) & 8) == 0) && (*(int *)(&DAT_00e67e68 + iVar8) != 0))
                    {
                        release_ia3d(uVar2);
                    }
                    FUN_00449e00(piVar9);
                }
                else if ((*(int *)(&DAT_00e67e78 + iVar8) != 0)
                         && (uVar6 = get_a3dsource_rendermode(uVar2), (uVar6 & 0x20) == 0))
                {
                    set_listener_position(uVar2, *(undefined_32 *)(&DAT_00e67e78 + iVar8));
                    if (DAT_004b6d18 == 0)
                    {
                        pfVar15 = (float *)&DAT_0050c690;
                    }
                    else
                    {
                        local_c = 1.0 / (float)_DAT_00e22a40;
                        pfVar14 = *(float **)(&DAT_00e67e78 + iVar8);
                        pfVar15 = &local_14;
                        local_28 = (double)local_c;
                        local_14 = (*pfVar14 - *(float *)(&DAT_00e67e6c + iVar8)) * local_c;
                        local_10 = (pfVar14[1] - *(float *)(&DAT_00e67e70 + iVar8)) * local_c;
                        local_c = (pfVar14[2] - *(float *)(&DAT_00e67e74 + iVar8)) * local_c;
                    }
                    FUN_00484e40(uVar2, pfVar15);
                    *(undefined_32 *)(&DAT_00e67e6c + iVar8) = **(undefined_32 **)(&DAT_00e67e78 + iVar8);
                    *(undefined_32 *)(&DAT_00e67e70 + iVar8) = *(undefined_32 *)(*(int *)(&DAT_00e67e78 + iVar8) + 4);
                    uVar2 = *(undefined_32 *)(*(int *)(&DAT_00e67e78 + iVar8) + 8);
                    *(undefined_32 *)(&DAT_00e67e74 + iVar8) = uVar2;
                    uVar3 = *(undefined_32 *)(&DAT_00e67e70 + iVar8);
                    (&DAT_00e6808c)[local_38 * 0x11] = *(undefined_32 *)(&DAT_00e67e6c + iVar8);
                    (&DAT_00e68090)[local_38 * 0x11] = uVar3;
                    (&DAT_00e68094)[local_38 * 0x11] = uVar2;
                }
            }
            iVar5 = *piVar9;
            if ((&DAT_00e68060)[local_38 * 0x11] == iVar5)
            {
                if (-1 < iVar5)
                {
                    uVar2 = (&DAT_00e67e60)[local_38 * 0x11];
                    if ((local_30 != 0) && (DAT_004eb460 != 0))
                    {
                        uVar6 = FUN_00422a90((&DAT_00e67e44)[local_38 * 0x11]);
                        local_28 = (double)((ulonglong)local_28 & 0xffffffff00000000 | (ulonglong)uVar6);
                        if ((*(byte *)(uVar6 + 0x24) & 8) == 0)
                        {
                            local_34 = (uint)(DAT_0050c688 != '\0');
                            iVar5 = FUN_00422e30(uVar6, 0, &local_34);
                            if (local_34 == (DAT_0050c688 != '\0'))
                            {
                                piVar11 = (int *)(&DAT_00e67c20 + iVar8);
                                QMEMCPY(iVar7, piVar9, piVar11, 0x11)
                                (&DAT_00e67c44)[local_38 * 0x11] =
                                    (uint)((&DAT_00e67c40)[local_38 * 0x11] != *(int *)(uVar6 + 0x48));
                                (&DAT_00e68080)[local_38 * 0x11] = iVar5;
                                *(uint *)(&DAT_00e68088 + iVar8) = (uint)(iVar5 != *(int *)(uVar6 + 0x48));
                                goto LAB_0044a671;
                            }
                            if (iVar5 != *(int *)(uVar6 + 0x48))
                            {
                                release_ia3d(iVar5);
                            }
                        }
                    }
                    uVar6 = (&DAT_00e68078)[local_38 * 0x11];
                    local_28 = (double)((ulonglong)local_28 & 0xffffffff00000000
                                        | (ulonglong) * (uint *)(&DAT_00e67e58 + iVar8));
                    if (*(uint *)(&DAT_00e67e58 + iVar8) != uVar6)
                    {
                        if (*(int *)(&DAT_00e67e48 + iVar8) == 0)
                        {
                        LAB_0044a394:
                            *(uint *)(&DAT_00e67e58 + iVar8) = uVar6;
                        }
                        else if ((*(int *)(&DAT_00e67e4c + iVar8) != DAT_00e22a30)
                                 && (*(int *)(&DAT_00e67e4c + iVar8) != DAT_00e22a30 + -1))
                        {
                            iVar5 = __ftol();
                            *(int *)(&DAT_00e67e58 + iVar8) = iVar5;
                            if ((int)uVar6 < iVar5)
                                goto LAB_0044a394;
                        }
                        FUN_00484d90(uVar2, (float)*(int *)(&DAT_00e67e58 + iVar8) * 3.051851e-05);
                    }
                    if (*(float *)(&DAT_00e67e54 + iVar8) != (float)(&DAT_00e68074)[local_38 * 0x11])
                    {
                        iVar5 = FUN_00422a90((&DAT_00e67e44)[local_38 * 0x11]);
                        if (0.05 <= (float)(&DAT_00e68074)[local_38 * 0x11])
                        {
                            fVar1 = (float)(&DAT_00e68074)[local_38 * 0x11];
                        }
                        else
                        {
                            fVar1 = 0.05;
                        }
                        FUN_00484dd0(uVar2, *(undefined_32 *)(iVar5 + 0x2c), fVar1 + fVar1);
                        *(undefined_32 *)(&DAT_00e67e54 + iVar8) = (&DAT_00e68074)[local_38 * 0x11];
                    }
                    sVar4 = (&DAT_00e6807c)[local_38 * 0x22];
                    if (*(short *)(&DAT_00e67e5c + iVar8) != sVar4)
                    {
                        if (sVar4 != -999)
                        {
                            local_28 = (double)((ulonglong)local_28 & 0xffffffff00000000 | (ulonglong)(uint)(int)sVar4);
                            FUN_00484c30(uVar2, ((float)(int)sVar4 - 64.0) * 0.015625);
                            uVar6 = get_a3dsource_rendermode(uVar2);
                            if ((uVar6 & 0x20) == 0)
                            {
                                FUN_00485020(uVar2, 0x20);
                            }
                        }
                        sVar4 = (&DAT_00e6807c)[local_38 * 0x22];
                        *(short *)(&DAT_00e67e5c + iVar8) = sVar4;
                    }
                    if ((sVar4 == -999)
                        && (((uVar6 = get_a3dsource_rendermode(uVar2),
                              (uVar6 & 0x20) != 0
                                  || (*(float *)(&DAT_00e67e6c + iVar8) != (float)(&DAT_00e6808c)[local_38 * 0x11]))
                             || ((*(float *)(&DAT_00e67e70 + iVar8) != (float)(&DAT_00e68090)[local_38 * 0x11]
                                  || (*(float *)(&DAT_00e67e74 + iVar8) != (float)(&DAT_00e68094)[local_38 * 0x11]))))))
                    {
                        FUN_00485020(uVar2, 0);
                        pfVar15 = (float *)(&DAT_00e6808c + local_38 * 0x11);
                        set_listener_position(uVar2, pfVar15);
                        if ((&DAT_00e68068)[local_38 * 0x11] != 0)
                        {
                            if (DAT_004b6d18 == 0)
                            {
                                pfVar14 = (float *)&DAT_0050c690;
                            }
                            else
                            {
                                local_18 = 1.0 / (float)_DAT_00e22a40;
                                pfVar14 = &local_20;
                                local_28 = (double)local_18;
                                local_20 = (*pfVar15 - *(float *)(&DAT_00e67e6c + iVar8)) * local_18;
                                local_1c = ((float)(&DAT_00e68090)[local_38 * 0x11] - *(float *)(&DAT_00e67e70 + iVar8))
                                    * local_18;
                                local_18 = ((float)(&DAT_00e68094)[local_38 * 0x11] - *(float *)(&DAT_00e67e74 + iVar8))
                                    * local_18;
                            }
                            FUN_00484e40(uVar2, pfVar14);
                        }
                        uVar2 = (&DAT_00e68090)[local_38 * 0x11];
                        uVar3 = (&DAT_00e68094)[local_38 * 0x11];
                        *(float *)(&DAT_00e67e6c + iVar8) = *pfVar15;
                        *(undefined_32 *)(&DAT_00e67e70 + iVar8) = uVar2;
                        *(undefined_32 *)(&DAT_00e67e74 + iVar8) = uVar3;
                    }
                }
            }
            else if (iVar5 == -1)
            {
                iVar5 = (&DAT_00e68064)[local_38 * 0x11];
                if ((iVar5 != -1) && ((&DAT_00e68060)[local_38 * 0x11] = iVar5, iVar5 != -1))
                {
                    if ((DAT_0050c688 == '\0') || (local_2c = 1, DAT_004eb460 == 0))
                    {
                        local_2c = 0;
                    }
                    uVar6 = FUN_00422a90((&DAT_00e68064)[local_38 * 0x11]);
                    local_28 = (double)((ulonglong)local_28 & 0xffffffff00000000 | (ulonglong)uVar6);
                    iVar5 = FUN_00422e30(uVar6, (&DAT_00e68068)[local_38 * 0x11], &local_2c);
                    (&DAT_00e68080)[local_38 * 0x11] = iVar5;
                    *(uint *)(&DAT_00e68088 + iVar8) = (uint)(iVar5 != *(int *)(uVar6 + 0x48));
                LAB_0044a671:
                    fVar1 = (float)(&DAT_00e68074)[local_38 * 0x11];
                    piVar9 = (int *)(&DAT_00e68080)[local_38 * 0x11];
                    puVar10 = &DAT_00e68060 + local_38 * 0x11;
                    puVar12 = (undefined_32 *)(&DAT_00e67e40 + iVar8);
                    QMEMCPY(iVar5, puVar10, puVar12, 0x11)
                    if (0.05 <= fVar1)
                    {
                        fVar1 = (float)(&DAT_00e68074)[local_38 * 0x11];
                    }
                    else
                    {
                        fVar1 = 0.05;
                    }
                    FUN_00484dd0(piVar9, *(undefined_32 *)(local_28._0_4_ + 0x2c), fVar1 + fVar1);
                    if ((&DAT_00e68068)[local_38 * 0x11] != 0)
                    {
                        iVar7 = __ftol();
                        iVar5 = (&DAT_00e68078)[local_38 * 0x11];
                        *(int *)(&DAT_00e67e58 + iVar8) = iVar7;
                        if (iVar5 < iVar7)
                        {
                            *(int *)(&DAT_00e67e58 + iVar8) = iVar5;
                        }
                    }
                    FUN_00484d90(piVar9, (float)*(int *)(&DAT_00e67e58 + iVar8) * 3.051851e-05);
                    sVar4 = (&DAT_00e6807c)[local_38 * 0x22];
                    if (sVar4 != -999)
                    {
                        local_28 = (double)((ulonglong)local_28 & 0xffffffff00000000 | (ulonglong)(uint)(int)sVar4);
                        FUN_00484c30(piVar9, ((float)(int)sVar4 - 64.0) * 0.015625);
                    }
                    if ((&DAT_00e6807c)[local_38 * 0x22] == -999)
                    {
                        FUN_00485020(piVar9, 0);
                        (**(code **)(*piVar9 + 0xf4))(piVar9, 0);
                        FUN_00484df0(piVar9, (float)(&DAT_00e680a0)[local_38 * 0x11] * 3.28,
                                     (float)(&DAT_00e6809c)[local_38 * 0x11] * 3.28);
                        set_listener_position(piVar9, &DAT_00e6808c + local_38 * 0x11);
                        if ((&DAT_00e68068)[local_38 * 0x11] != 0)
                        {
                            FUN_00484e40(piVar9, &DAT_0050c690);
                        }
                        if ((int)(&DAT_00e68064)[local_38 * 0x11] < DAT_00e9f360)
                        {
                            if ((DAT_00e2899c == 0)
                                || (((iVar8 = *(int *)(DAT_00e2899c + 0x84),
                                      (float)(&DAT_00e6808c)[local_38 * 0x11] == *(float *)(iVar8 + 0x50)
                                          && ((float)(&DAT_00e68090)[local_38 * 0x11] == *(float *)(iVar8 + 0x54)))
                                     && ((float)(&DAT_00e68094)[local_38 * 0x11] == *(float *)(iVar8 + 0x58)))))
                            {
                                (**(code **)(*piVar9 + 0xb0))(piVar9, 0);
                            }
                            else
                            {
                                (**(code **)(*piVar9 + 0xb0))(piVar9, 1.0f);
                            }
                        }
                        else
                        {
                            (**(code **)(*piVar9 + 0xb0))(piVar9, 0);
                        }
                    }
                    else
                    {
                        FUN_00485020(piVar9, 0x20);
                    }
                    FUN_00484be0(piVar9, (&DAT_00e68068)[local_38 * 0x11]);
                }
            }
            else if (*(int *)(&DAT_00e67e50 + iVar8) != 0)
            {
                uVar2 = (&DAT_00e67e60)[local_38 * 0x11];
                iVar5 = FUN_00422a90((&DAT_00e67e44)[local_38 * 0x11]);
                if (((*(byte *)(iVar5 + 0x24) & 8) == 0) || (iVar5 = FUN_00423190(iVar5), iVar5 != 0))
                {
                    FUN_00485070(uVar2);
                }
                *(undefined_32 *)(&DAT_00e67e50 + iVar8) = 0;
            }
            local_38 = local_38 + 1;
        } while (local_38 < 8);
        if (DAT_0050d550 != 0)
        {
            if (DAT_004b6d18 == 0)
            {
                pfVar15 = (float *)&DAT_0050c690;
            }
            else
            {
                local_18 = 1.0 / (float)_DAT_00e22a40;
                pfVar15 = &local_20;
                local_28 = (double)local_18;
                local_20 = (DAT_0050c668 - _DAT_0050c678) * local_18;
                local_1c = (DAT_0050c66c - _DAT_0050c67c) * local_18;
                local_18 = (DAT_0050c670 - _DAT_0050c680) * local_18;
            }
            FUN_00484f10(pfVar15);
            FUN_00484f40(&DAT_0050c668, &DAT_0050c648, &DAT_0050c658);
        }
        FUN_00484fa0();
    }
    return;
}

int FUN_0044a930(undefined_32 param_1)

{
    int iVar1;

    iVar1 = FUN_00422a90(param_1);
    if (iVar1 == 0)
    {
        return 0;
    }
    return *(int *)(iVar1 + 0x38) * 0x10624dd3;
}

void FUN_0044a970(int param_1, float param_2, undefined_32 param_3, undefined_32 param_4)

{
    int iVar1;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    if (param_1 == 0)
    {
        if (DAT_0050c69c == 0)
        {
            return;
        }
        if (DAT_0050c6a0 != 0)
        {
            FUN_00485070(DAT_0050c6a0);
            release_ia3d(DAT_0050c6a0);
            DAT_0050c6a0 = 0;
        }
        if (DAT_0050c6a4 == 0)
        {
            DAT_0050c69c = 0;
            return;
        }
        FUN_00485070(DAT_0050c6a4);
        goto LAB_0044ab93;
    }
    if (DAT_0050c69c != 0)
        goto LAB_0044aa83;
    DAT_0050c69c = 1;
    if (DAT_0050c6a0 == 0)
    {
        DAT_0050c6a0 = FUN_00423050(param_3);
        if (DAT_0050c6a0 != 0)
        {
            FUN_00485020(DAT_0050c6a0, 0x20);
            goto LAB_0044a9ca;
        }
    LAB_0044aa0a:
        if (DAT_0050c6a0 != 0)
        {
            FUN_00485070(DAT_0050c6a0);
            release_ia3d(DAT_0050c6a0);
            DAT_0050c6a0 = 0;
        }
        if (DAT_0050c6a4 == 0)
        {
            DAT_0050c69c = 0;
            return;
        }
        FUN_00485070(DAT_0050c6a4);
    LAB_0044ab93:
        release_ia3d(DAT_0050c6a4);
        DAT_0050c6a4 = 0;
        DAT_0050c69c = 0;
        return;
    }
LAB_0044a9ca:
    if (DAT_0050c6a4 == 0)
    {
        local_c = 0;
        local_8 = 0;
        local_4 = 1.0f;
        DAT_0050c6a4 = FUN_00423050(param_4);
        if (DAT_0050c6a4 == 0)
            goto LAB_0044aa0a;
        set_listener_position(DAT_0050c6a4, &local_c);
        FUN_00484fb0(DAT_0050c6a4, 0);
        FUN_00484d90(DAT_0050c6a4, 1.0f);
    }
    FUN_00484fa0();
LAB_0044aa83:
    if (param_2 < 0.0)
    {
        param_2 = 0.0;
    }
    else if (1.0 < param_2)
    {
        param_2 = 1.0;
    }
    FUN_00484d40(param_2);
    FUN_00484d90(DAT_0050c6a0, 1.0f);
    iVar1 = FUN_004850c0(DAT_0050c6a0, 0);
    if (iVar1 == 0)
    {
        FUN_00484be0(DAT_0050c6a0, 0);
    }
    FUN_00484fa0();
    iVar1 = FUN_004850c0(DAT_0050c6a0, 0);
    while (iVar1 != 0)
    {
        iVar1 = FUN_004850c0(DAT_0050c6a0, 0);
    }
    FUN_00485070(DAT_0050c6a4);
    FUN_00484be0(DAT_0050c6a4, 0);
    FUN_00484fa0();
    return;
}

// vector function
// float param_1[3], float param_2[3]
undefined_32 FUN_0044abc0(float *param_1, float *param_2, undefined_32 param_3, undefined_32 param_4)

{
    float fVar1;
    undefined_32 uVar2;
    float10 fVar3;
    undefined_8 local_28[12];
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    uVar2 = 0;
    local_10 = *param_1 - *param_2;
    local_c = param_1[1] - param_2[1];
    local_8 = param_1[2] - param_2[2];
    fVar3 = (float10)rdVector_Len3(&local_10);
    local_4 = (float)fVar3;
    if ((float10)0.001 < fVar3)
    {
        fVar1 = 1.0 / local_4;
        local_1c = *param_2;
        local_18 = param_2[1];
        local_14 = param_2[2];
        local_10 = local_10 * fVar1;
        local_c = local_c * fVar1;
        local_8 = local_8 * fVar1;
        fVar3 = (float10)FUN_00444d10(param_3, &local_1c, local_28, param_4);
        if ((float10)0.0 <= fVar3)
        {
            uVar2 = 1;
            *param_1 = *param_2;
            param_1[1] = param_2[1];
            param_1[2] = param_2[2];
        }
    }
    return uVar2;
}

undefined_32 FUN_0044acb0(float *param_1, float *param_2, undefined_32 param_3, float *param_4)

{
    float fVar1;
    undefined_32 uVar2;
    float10 fVar3;
    float local_38;
    float local_34;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    local_10 = *param_1 - *param_2;
    local_c = param_1[1] - param_2[1];
    local_8 = param_1[2] - param_2[2];
    uVar2 = 0;
    fVar3 = (float10)rdVector_Len3(&local_10);
    local_4 = (float)fVar3;
    if ((float10)0.001 < fVar3)
    {
        fVar1 = 1.0 / local_4;
        local_1c = *param_2;
        local_18 = param_2[1];
        local_14 = param_2[2];
        local_10 = local_10 * fVar1;
        local_c = local_c * fVar1;
        local_8 = local_8 * fVar1;
        fVar3 = (float10)FUN_00444d10(param_3, &local_1c, &local_38, &local_2c);
        if ((float10)0.0 <= fVar3)
        {
            uVar2 = 1;
            fVar1 = ((local_24 * local_30 + local_28 * local_34 + local_2c * local_38)
                     - (*param_1 * local_2c + local_24 * param_1[2] + local_28 * param_1[1]))
                - -2.0;
            *param_1 = local_2c * fVar1 + *param_1;
            param_1[1] = local_28 * fVar1 + param_1[1];
            param_1[2] = local_24 * fVar1 + param_1[2];
            *param_4 = local_2c;
            param_4[1] = local_28;
            param_4[2] = local_24;
        }
    }
    return uVar2;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address
// 0044ae40
// TurnFunction
// param_1 [in, out], param_2 [in, out]
void FUN_0044ae40(float *param_1, float *param_2, float param_3, float param_4, float param_5, float param_6)

{
    float fVar1;

    fVar1 = *param_1;
    if (*param_1 <= param_3)
    {
        if (fVar1 < 0.0)
        {
            param_4 = param_4 * 5.0;
        }
        fVar1 = param_4 * (float)_DAT_00e22a40 + *param_1;
        *param_1 = fVar1;
        if (param_3 < fVar1)
        {
            *param_1 = param_3;
        }
    }
    else
    {
        if (fVar1 >= 0.0 && fVar1 != 0.0)
        {
            param_4 = param_4 * 5.0;
        }
        fVar1 = *param_1 - param_4 * (float)_DAT_00e22a40;
        *param_1 = fVar1;
        if (fVar1 < param_3)
        {
            *param_1 = param_3;
        }
    }
    if ((0.0 < param_5) && (*param_1 < 0.0))
    {
        *param_1 = 0.0;
    }
    if ((param_5 < 0.0) && (0.0 < *param_1))
    {
        *param_1 = 0.0;
    }
    fVar1 = (*param_1 + param_6 + param_5) * (float)_DAT_00e22a40 + *param_2;
    *param_2 = fVar1;
    if (180.0 < fVar1)
    {
        *param_2 = fVar1 - 360.0;
    }
    if (*param_2 < -180.0)
    {
        *param_2 = *param_2 - -360.0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044af50(float *param_1, float param_2, undefined_32 param_3, float param_4, float param_5)

{
    param_5 = -(param_2 / param_4) * param_5;
    if (80.0 < param_5)
    {
        param_5 = 80.0;
    }
    if (param_5 < -80.0)
    {
        param_5 = -80.0;
    }
    *param_1 = *param_1 - (param_5 - *param_1) * (float)_DAT_00e22a40 * -5.0;
    return;
}

void FUN_0044afb0(int *param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_8 local_80[16];
    undefined_8 local_70[32];
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_8 local_40[52];
    undefined_32 local_c;

    if (param_1 == NULL)
    {
        vec3f_set(param_2, 0, 0, 0);
        return;
    }
    iVar1 = param_1[1];
    if (*param_1 == 0)
    {
        vec3f_set(param_2, 0, 0, 0);
        return;
    }
    FUN_004316a0(*param_1, local_80);
    *param_2 = local_50;
    param_2[1] = local_4c;
    param_2[2] = local_48;
    if (iVar1 != 0)
    {
        FUN_004316a0(iVar1, local_40);
        vec3f_multiply_add(param_2, param_2, local_c, local_70);
    }
    return;
}

void FUN_0044b180(int *param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;
    int iVar2;
    undefined_8 local_c0[16];
    undefined_8 local_b0[32];
    undefined_8 local_90[16];
    undefined_8 local_80[16];
    undefined_8 local_70[32];
    undefined_8 local_50[16];
    undefined_8 local_40[52];
    float local_c;

    if (param_1 != NULL)
    {
        iVar1 = *param_1;
        iVar2 = param_1[1];
        if (iVar1 != 0)
        {
            mat_set_rotation(local_c0, param_3, 0, 0);
            mat_multiply_rows(local_c0, param_2, param_2, param_2, local_c0);
            FUN_004316a0(iVar1, local_80);
            vec3f_copy(local_90, local_50);
            if (iVar2 != 0)
            {
                FUN_004316a0(iVar2, local_40);
                vec3f_multiply_add(local_90, local_90, local_c, local_70);
                vec3f_multiply_add(local_90, local_90, -local_c, local_b0);
            }
            FUN_00431640(iVar1, local_c0);
        }
    }
    return;
}

void FUN_0044b270(int *param_1, undefined_32 param_2)

{
    int iVar1;
    int iVar2;
    undefined_8 local_c0[16];
    undefined_8 local_b0[32];
    undefined_8 local_90[16];
    undefined_8 local_80[64];
    undefined_8 local_40[52];
    float local_c;

    if (param_1 != NULL)
    {
        iVar1 = *param_1;
        iVar2 = param_1[1];
        if (iVar1 != 0)
        {
            FUN_004316a0(iVar1, local_80);
            FUN_0044bb10(local_c0, local_80);
            vec3f_copy(local_90, param_2);
            if (iVar2 == 0)
            {
                FUN_00431640(iVar1, local_c0);
                return;
            }
            FUN_004316a0(iVar2, local_40);
            vec3f_multiply_add(local_90, local_90, -local_c, local_b0);
            FUN_00431640(iVar1, local_c0);
        }
    }
    return;
}

void FUN_0044b330(int *param_1, undefined_32 param_2)

{
    int *piVar1;
    int iVar2;

    if (param_1 != NULL)
    {
        iVar2 = *param_1;
        while (iVar2 != 0)
        {
            FUN_00426880(iVar2, param_2);
            piVar1 = param_1 + 1;
            param_1 = param_1 + 1;
            iVar2 = *piVar1;
        }
    }
    return;
}

void FUN_0044b360(int *param_1, float param_2, undefined_32 param_3, undefined_32 param_4, int param_5, float param_6,
                  float param_7)

{
    int *piVar1;
    int iVar2;
    undefined_32 uVar3;

    if (param_1 != NULL)
    {
        iVar2 = *param_1;
        while (iVar2 != 0)
        {
            FUN_004267a0(*param_1, param_3, param_4);
            if (param_5 == 0)
            {
                FUN_00426810(*param_1, 0x4000000);
                iVar2 = *param_1;
                uVar3 = 0x2000000;
            LAB_0044b3fd:
                FUN_00426820(iVar2, uVar3);
            }
            else
            {
                FUN_00426810(*param_1, 0x2000010);
                FUN_00426820(*param_1, 0x4000000);
                uVar3 = 0x40;
                iVar2 = *param_1;
                if (param_7 <= 0.0)
                    goto LAB_0044b3fd;
                FUN_00426810();
                FUN_00426900(*param_1, param_7);
            }
            if (0.0 <= param_2)
            {
                if (param_6 <= 0.0)
                {
                    FUN_00426840(*param_1, param_2);
                }
                else
                {
                    FUN_00426890(*param_1, param_2, param_6);
                }
            }
            piVar1 = param_1 + 1;
            param_1 = param_1 + 1;
            iVar2 = *piVar1;
        }
    }
    return;
}

float10 FUN_0044b470(int *param_1)

{
    if (param_1 == NULL)
    {
        return (float10)0.0;
    }
    if (*param_1 == 0)
    {
        return (float10)0.0;
    }
    return (float10) * (float *)(*param_1 + 0x114);
}

float10 FUN_0044b4a0(int param_1, int *param_2)

{
    float10 fVar1;
    undefined_8 local_40[16];
    float local_30;
    undefined_32 local_2c;

    if (param_2 == NULL)
    {
        return (float10)0.0;
    }
    if (*param_2 == 0)
    {
        return (float10)0.0;
    }
    if (param_1 == 0)
    {
        return (float10)0.0;
    }
    if (*(int *)(param_1 + 4) == 0)
    {
        return (float10)0.0;
    }
    if (*(int *)(param_1 + 8) == 0)
    {
        return (float10)0.0;
    }
    FUN_004316a0(*(int *)(param_1 + 8), local_40);
    fVar1 = (float10)arctan2(-local_30, local_2c);
    return fVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 0044b530
// CyYungaFunction. Isn't it some offset and it is bullseye that should be replaced ? Function is just under this one
void __cftcvt_init_5(void)

{
    _DAT_004c28a4 = 299;
    _DAT_004c28a8 = 0x12a;
    _DAT_004c28ac = 0x12e;
    PTR_s__SCREENTEXT_336___Mars_004c28b4 = &DAT_004c3b14;
    PTR_s__SCREENTEXT_337___Guo_004c28b8 = s_Reeso_004c3b0c;
    _DAT_004c28d0 = 0x130;
    _DAT_004c73f4 = 0x408dc28f;
    _DAT_004c7424 = 0x400e147b;
    _DAT_004c7428 = 0x4031eb85;
    _DAT_004c742c = 0;
    _DAT_004c740c = 0x3fa147ae;
    _DAT_004c7410 = 0.24f;
    _DAT_004c7414 = 0xbeeb851f;
    _DAT_004c7418 = 0x3e851eb8;
    _DAT_004c741c = 0xc068f5c3;
    _DAT_004c7420 = 0xbe9eb852;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 0044b5e0
void __cftcvt_init_6(void)

{
    _DAT_004c2b7c = 0x12d;
    _DAT_004c2b80 = 300;
    _DAT_004c2b84 = 0x12f;
    PTR_s__SCREENTEXT_363____Bullseye__004c2b8c = &DAT_004c3b24;
    PTR_s__SCREENTEXT_364___Navior_004c2b90 = s_Yunga_004c3b1c;
    _DAT_004c2ba8 = 0x131;
    _DAT_004c7a0c = 0x3f851eb8;
    _DAT_004c7a10 = 0x40051eb8;
    _DAT_004c7a14 = 0xbf8a3d71;
    _DAT_004c7a00 = 0xbda3d70a;
    _DAT_004c7a04 = 0xbfd47ae1;
    _DAT_004c7a08 = 0x4009999a;
    return;
}

undefined_8 *FUN_0044b660(void)

{
    DAT_0050c6b8 = DAT_0050c6b8 + 1;
    if (0xbff < DAT_0050c6b8)
    {
        DAT_0050c6b8 = 0;
    }
    return &DAT_00e37c00 + DAT_0050c6b8 * 0x40;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044b690(undefined_32 *param_1, undefined_32 *param_2)

{
    _DAT_0050c6e8 = *param_2;
    _DAT_0050c6ec = param_2[1];
    _DAT_0050c6f0 = param_2[2];
    _DAT_00e37580 = *param_1;
    _DAT_00e37584 = param_1[1];
    _DAT_00e37588 = param_1[2];
    _DAT_00e3758c = param_1[3];
    _DAT_00e37590 = param_1[4];
    _DAT_00e37594 = param_1[5];
    _DAT_00e37598 = param_1[6];
    _DAT_00e3759c = param_1[7];
    _DAT_00e375a0 = param_1[8];
    DAT_00e375a4 = param_1[9];
    DAT_00e375a8 = param_1[10];
    DAT_00e375ac = param_1[0xb];
    DAT_00e375b0 = param_1[0xc];
    _DAT_00e375b4 = param_1[0xd];
    _DAT_00e375b8 = param_1[0xe];
    _DAT_00e375bc = param_1[0xf];
    return;
}

void FUN_0044b750(undefined_32 *param_1)

{
    int iVar1;

    DAT_004c3c0c = 1;
    if (DAT_0050c6f4 < 0x20)
    {
        DAT_0050c6f4 = DAT_0050c6f4 + 1;
        iVar1 = DAT_0050c6f4 * 0x30;
        *(undefined_32 *)(&DAT_00e375c0 + iVar1) = *param_1;
        *(undefined_32 *)(&DAT_00e375c4 + iVar1) = param_1[1];
        *(undefined_32 *)(&DAT_00e375c8 + iVar1) = param_1[2];
        *(undefined_32 *)(&DAT_00e375cc + iVar1) = param_1[3];
        *(undefined_32 *)(&DAT_00e375d0 + iVar1) = param_1[4];
        *(undefined_32 *)(&DAT_00e375d4 + iVar1) = param_1[5];
        *(undefined_32 *)(&DAT_00e375d8 + iVar1) = param_1[6];
        *(undefined_32 *)(&DAT_00e375dc + iVar1) = param_1[7];
        *(undefined_32 *)(&DAT_00e375e0 + iVar1) = param_1[8];
        *(undefined_32 *)(&DAT_00e375e4 + iVar1) = param_1[9];
        *(undefined_32 *)(&DAT_00e375e8 + iVar1) = param_1[10];
        *(undefined_32 *)(&DAT_00e375ec + iVar1) = param_1[0xb];
    }
    return;
}

void FUN_0044b7e0(float *param_1)

{
    int iVar1;
    int iVar2;

    DAT_004c3c0c = 1;
    if (DAT_0050c6f4 < 0x20)
    {
        iVar1 = DAT_0050c6f4 + 1;
        iVar2 = iVar1 * 0x30;
        DAT_0050c6f4 = iVar1;
        *(float *)(&DAT_00e375c0 + iVar2) = (float)(&DAT_00e375a8)[iVar1 * 0xc] * param_1[2]
            + *(float *)(&DAT_00e3759c + iVar2) * param_1[1] + *(float *)(&DAT_00e37590 + iVar2) * *param_1;
        *(float *)(&DAT_00e375c4 + iVar2) = *(float *)(&DAT_00e375a0 + iVar2) * param_1[1]
            + (float)(&DAT_00e375ac)[iVar1 * 0xc] * param_1[2] + *param_1 * *(float *)(&DAT_00e37594 + iVar2);
        *(float *)(&DAT_00e375c8 + iVar2) = param_1[1] * (float)(&DAT_00e375a4)[iVar1 * 0xc]
            + param_1[2] * (float)(&DAT_00e375b0)[iVar1 * 0xc] + *param_1 * *(float *)(&DAT_00e37598 + iVar2);
        *(float *)(&DAT_00e375cc + iVar2) = *(float *)(&DAT_00e3759c + iVar2) * param_1[4]
            + (float)(&DAT_00e375a8)[iVar1 * 0xc] * param_1[5] + *(float *)(&DAT_00e37590 + iVar2) * param_1[3];
        *(float *)(&DAT_00e375d0 + iVar2) = *(float *)(&DAT_00e375a0 + iVar2) * param_1[4]
            + (float)(&DAT_00e375ac)[iVar1 * 0xc] * param_1[5] + param_1[3] * *(float *)(&DAT_00e37594 + iVar2);
        *(float *)(&DAT_00e375d4 + iVar2) = param_1[4] * (float)(&DAT_00e375a4)[iVar1 * 0xc]
            + param_1[5] * (float)(&DAT_00e375b0)[iVar1 * 0xc] + param_1[3] * *(float *)(&DAT_00e37598 + iVar2);
        *(float *)(&DAT_00e375d8 + iVar2) = param_1[7] * *(float *)(&DAT_00e3759c + iVar2)
            + param_1[8] * (float)(&DAT_00e375a8)[iVar1 * 0xc] + *(float *)(&DAT_00e37590 + iVar2) * param_1[6];
        *(float *)(&DAT_00e375dc + iVar2) = param_1[7] * *(float *)(&DAT_00e375a0 + iVar2)
            + param_1[6] * *(float *)(&DAT_00e37594 + iVar2) + param_1[8] * (float)(&DAT_00e375ac)[iVar1 * 0xc];
        *(float *)(&DAT_00e375e0 + iVar2) = param_1[6] * *(float *)(&DAT_00e37598 + iVar2)
            + param_1[8] * (float)(&DAT_00e375b0)[iVar1 * 0xc] + param_1[7] * (float)(&DAT_00e375a4)[iVar1 * 0xc];
        *(float *)(&DAT_00e375e4 + iVar2) = param_1[0xb] * (float)(&DAT_00e375a8)[iVar1 * 0xc]
            + param_1[10] * *(float *)(&DAT_00e3759c + iVar2) + *(float *)(&DAT_00e37590 + iVar2) * param_1[9]
            + *(float *)(&DAT_00e375b4 + iVar2);
        *(float *)(&DAT_00e375e8 + iVar2) = param_1[10] * *(float *)(&DAT_00e375a0 + iVar2)
            + param_1[0xb] * (float)(&DAT_00e375ac)[iVar1 * 0xc] + param_1[9] * *(float *)(&DAT_00e37594 + iVar2)
            + *(float *)(&DAT_00e375b8 + iVar2);
        *(float *)(&DAT_00e375ec + iVar2) = param_1[10] * (float)(&DAT_00e375a4)[iVar1 * 0xc]
            + param_1[0xb] * (float)(&DAT_00e375b0)[iVar1 * 0xc] + param_1[9] * *(float *)(&DAT_00e37598 + iVar2)
            + *(float *)(&DAT_00e375bc + iVar2);
    }
    return;
}

void FUN_0044b9b0(undefined_32 *param_1)

{
    *param_1 = *(undefined_32 *)(&DAT_00e375c0 + DAT_0050c6f4 * 0x30);
    param_1[1] = *(undefined_32 *)(&DAT_00e375c4 + DAT_0050c6f4 * 0x30);
    param_1[2] = *(undefined_32 *)(&DAT_00e375c8 + DAT_0050c6f4 * 0x30);
    param_1[3] = *(undefined_32 *)(&DAT_00e375cc + DAT_0050c6f4 * 0x30);
    param_1[4] = *(undefined_32 *)(&DAT_00e375d0 + DAT_0050c6f4 * 0x30);
    param_1[5] = *(undefined_32 *)(&DAT_00e375d4 + DAT_0050c6f4 * 0x30);
    param_1[6] = *(undefined_32 *)(&DAT_00e375d8 + DAT_0050c6f4 * 0x30);
    param_1[7] = *(undefined_32 *)(&DAT_00e375dc + DAT_0050c6f4 * 0x30);
    param_1[8] = *(undefined_32 *)(&DAT_00e375e0 + DAT_0050c6f4 * 0x30);
    param_1[9] = *(undefined_32 *)(&DAT_00e375e4 + DAT_0050c6f4 * 0x30);
    param_1[10] = *(undefined_32 *)(&DAT_00e375e8 + DAT_0050c6f4 * 0x30);
    param_1[0xb] = *(undefined_32 *)(&DAT_00e375ec + DAT_0050c6f4 * 0x30);
    return;
}

void FUN_0044bab0(void)

{
    DAT_004c3c0c = 1;
    if (0 < DAT_0050c6f4)
    {
        DAT_0050c6f4 = DAT_0050c6f4 + -1;
    }
    return;
}

void FUN_0044bad0(undefined_32 *param_1, undefined_32 *param_2)

{
    undefined_32 uVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;
    int iVar4;
    int iVar5;

    iVar5 = 4;
    puVar3 = param_1;
    do
    {
        iVar4 = 3;
        puVar2 = puVar3;
        do
        {
            uVar1 = *param_2;
            param_2 = param_2 + 1;
            *puVar2 = uVar1;
            puVar2 = puVar2 + 1;
            iVar4 = iVar4 + -1;
        } while (iVar4 != 0);
        puVar3[3] = 0;
        puVar3 = puVar3 + 4;
        iVar5 = iVar5 + -1;
    } while (iVar5 != 0);
    param_1[0xf] = 1.0f;
    return;
}

void FUN_0044bb10(undefined_32 *param_1, int param_2)

{
    undefined_32 *puVar1;
    int iVar2;
    int iVar3;

    iVar3 = 4;
    puVar1 = param_1;
    do
    {
        iVar2 = 4;
        do
        {
            *puVar1 = *(undefined_32 *)((param_2 - (int)param_1) + (int)puVar1);
            puVar1 = puVar1 + 1;
            iVar2 = iVar2 + -1;
        } while (iVar2 != 0);
        iVar3 = iVar3 + -1;
    } while (iVar3 != 0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044bb40(void)

{
    DAT_0050c6f4 = 0;
    DAT_004c3c0c = 1;
    _DAT_0050c6f8 = 0;
    vec3f_set(&DAT_00e375c0, 1.0f, 0, 0);
    vec3f_set(&DAT_00e375cc + DAT_0050c6f4 * 0x30, 0, 1.0f, 0);
    vec3f_set(&DAT_00e375d8 + DAT_0050c6f4 * 0x30, 0, 0, 1.0f);
    vec3f_set(&DAT_00e375e4 + DAT_0050c6f4 * 0x30, 0, 0, 0);
    return;
}

void FUN_0044bbe0(void)

{
    int iVar1;

    iVar1 = DAT_0050c6f4 * 0x30;
    DAT_00e3752c = FUN_0044b660();
    FUN_0044bad0(DAT_00e3752c, &DAT_00e375c0 + iVar1);
    DAT_00e37520 = FUN_0044b660();
    FUN_0044bb10(DAT_00e37520, &DAT_00e37480);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044bc20(void)

{
    int iVar1;
    float *pfVar2;

    DAT_004c3c0c = 0;
    _DAT_0050c6f8 = 1;
    iVar1 = DAT_0050c6f4 * 0x30;
    pfVar2 = (float *)(&DAT_00e375c0 + iVar1);
    if (DAT_004c3c08 != 0)
    {
        *(float *)(&DAT_00e375e4 + iVar1) = *(float *)(&DAT_00e375e4 + iVar1) - _DAT_0050c6e8;
        *(float *)(&DAT_00e375e8 + iVar1) = *(float *)(&DAT_00e375e8 + iVar1) - _DAT_0050c6ec;
        *(float *)(&DAT_00e375ec + iVar1) = *(float *)(&DAT_00e375ec + iVar1) - _DAT_0050c6f0;
    }
    _DAT_00e37480 = *pfVar2 * _DAT_00e37580 + *(float *)(&DAT_00e375c8 + iVar1) * _DAT_00e375a0
        + *(float *)(&DAT_00e375c4 + iVar1) * _DAT_00e37590;
    _DAT_00e37484 = *pfVar2 * _DAT_00e37584 + *(float *)(&DAT_00e375c8 + iVar1) * DAT_00e375a4
        + *(float *)(&DAT_00e375c4 + iVar1) * _DAT_00e37594;
    _DAT_00e37488 = *pfVar2 * _DAT_00e37588 + *(float *)(&DAT_00e375c8 + iVar1) * DAT_00e375a8
        + *(float *)(&DAT_00e375c4 + iVar1) * _DAT_00e37598;
    _DAT_00e3748c = *pfVar2 * _DAT_00e3758c + *(float *)(&DAT_00e375c8 + iVar1) * DAT_00e375ac
        + *(float *)(&DAT_00e375c4 + iVar1) * _DAT_00e3759c;
    _DAT_00e37490 = *(float *)(&DAT_00e375d4 + iVar1) * _DAT_00e375a0
        + *(float *)(&DAT_00e375cc + iVar1) * _DAT_00e37580 + *(float *)(&DAT_00e375d0 + iVar1) * _DAT_00e37590;
    _DAT_00e37494 = *(float *)(&DAT_00e375d4 + iVar1) * DAT_00e375a4 + *(float *)(&DAT_00e375cc + iVar1) * _DAT_00e37584
        + *(float *)(&DAT_00e375d0 + iVar1) * _DAT_00e37594;
    _DAT_00e37498 = *(float *)(&DAT_00e375d4 + iVar1) * DAT_00e375a8 + *(float *)(&DAT_00e375cc + iVar1) * _DAT_00e37588
        + *(float *)(&DAT_00e375d0 + iVar1) * _DAT_00e37598;
    _DAT_00e3749c = *(float *)(&DAT_00e375d4 + iVar1) * DAT_00e375ac + *(float *)(&DAT_00e375cc + iVar1) * _DAT_00e3758c
        + *(float *)(&DAT_00e375d0 + iVar1) * _DAT_00e3759c;
    _DAT_00e374a0 = *(float *)(&DAT_00e375dc + iVar1) * _DAT_00e37590
        + *(float *)(&DAT_00e375e0 + iVar1) * _DAT_00e375a0 + *(float *)(&DAT_00e375d8 + iVar1) * _DAT_00e37580;
    _DAT_00e374a4 = *(float *)(&DAT_00e375dc + iVar1) * _DAT_00e37594 + *(float *)(&DAT_00e375e0 + iVar1) * DAT_00e375a4
        + *(float *)(&DAT_00e375d8 + iVar1) * _DAT_00e37584;
    _DAT_00e374a8 = *(float *)(&DAT_00e375dc + iVar1) * _DAT_00e37598 + *(float *)(&DAT_00e375e0 + iVar1) * DAT_00e375a8
        + *(float *)(&DAT_00e375d8 + iVar1) * _DAT_00e37588;
    _DAT_00e374ac = *(float *)(&DAT_00e375dc + iVar1) * _DAT_00e3759c + *(float *)(&DAT_00e375e0 + iVar1) * DAT_00e375ac
        + *(float *)(&DAT_00e375d8 + iVar1) * _DAT_00e3758c;
    _DAT_00e374b0 = *(float *)(&DAT_00e375ec + iVar1) * _DAT_00e375a0
        + *(float *)(&DAT_00e375e8 + iVar1) * _DAT_00e37590 + *(float *)(&DAT_00e375e4 + iVar1) * _DAT_00e37580
        + DAT_00e375b0;
    _DAT_00e374b4 = *(float *)(&DAT_00e375ec + iVar1) * DAT_00e375a4 + *(float *)(&DAT_00e375e8 + iVar1) * _DAT_00e37594
        + *(float *)(&DAT_00e375e4 + iVar1) * _DAT_00e37584 + _DAT_00e375b4;
    _DAT_00e374b8 = *(float *)(&DAT_00e375ec + iVar1) * DAT_00e375a8 + *(float *)(&DAT_00e375e8 + iVar1) * _DAT_00e37598
        + *(float *)(&DAT_00e375e4 + iVar1) * _DAT_00e37588 + _DAT_00e375b8;
    _DAT_00e374bc = *(float *)(&DAT_00e375ec + iVar1) * DAT_00e375ac + *(float *)(&DAT_00e375e8 + iVar1) * _DAT_00e3759c
        + *(float *)(&DAT_00e375e4 + iVar1) * _DAT_00e3758c + _DAT_00e375bc;
    if (DAT_004c3c08 != 0)
    {
        *(float *)(&DAT_00e375e4 + iVar1) = _DAT_0050c6e8 + *(float *)(&DAT_00e375e4 + iVar1);
        *(float *)(&DAT_00e375e8 + iVar1) = _DAT_0050c6ec + *(float *)(&DAT_00e375e8 + iVar1);
        *(float *)(&DAT_00e375ec + iVar1) = _DAT_0050c6f0 + *(float *)(&DAT_00e375ec + iVar1);
    }
    FUN_0044bbe0();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044bfb0(int param_1, undefined_32 param_2)

{
    float *pfVar1;
    int iVar2;
    int iVar3;
    undefined_32 uVar4;
    float local_40;
    float local_3c;
    float local_38;
    float local_34;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    iVar2 = DAT_0050c6f4;
    iVar3 = DAT_0050c6f4 * 0x30;
    pfVar1 = (float *)(&DAT_00e37590 + iVar3);
    if (DAT_004c3c08 != 0)
    {
        *(float *)(&DAT_00e375b4 + iVar3) = *(float *)(&DAT_00e375b4 + iVar3) - _DAT_0050c6e8;
        *(float *)(&DAT_00e375b8 + iVar3) = *(float *)(&DAT_00e375b8 + iVar3) - _DAT_0050c6ec;
        *(float *)(&DAT_00e375bc + iVar3) = *(float *)(&DAT_00e375bc + iVar3) - _DAT_0050c6f0;
    }
    local_40 = *pfVar1 * _DAT_00e37580 + *(float *)(&DAT_00e37594 + iVar3) * _DAT_00e37590
        + *(float *)(&DAT_00e37598 + iVar3) * _DAT_00e375a0;
    local_3c = *pfVar1 * _DAT_00e37584 + *(float *)(&DAT_00e37594 + iVar3) * _DAT_00e37594
        + *(float *)(&DAT_00e37598 + iVar3) * DAT_00e375a4;
    local_38 = *pfVar1 * _DAT_00e37588 + *(float *)(&DAT_00e37594 + iVar3) * _DAT_00e37598
        + *(float *)(&DAT_00e37598 + iVar3) * DAT_00e375a8;
    local_34 = *pfVar1 * _DAT_00e3758c + *(float *)(&DAT_00e37594 + iVar3) * _DAT_00e3759c
        + *(float *)(&DAT_00e37598 + iVar3) * DAT_00e375ac;
    local_30 = *(float *)(&DAT_00e3759c + iVar3) * _DAT_00e37580 + (&DAT_00e375a4)[iVar2 * 0xc] * _DAT_00e375a0
        + *(float *)(&DAT_00e375a0 + iVar3) * _DAT_00e37590;
    local_2c = *(float *)(&DAT_00e3759c + iVar3) * _DAT_00e37584 + (&DAT_00e375a4)[iVar2 * 0xc] * DAT_00e375a4
        + *(float *)(&DAT_00e375a0 + iVar3) * _DAT_00e37594;
    local_28 = *(float *)(&DAT_00e3759c + iVar3) * _DAT_00e37588 + (&DAT_00e375a4)[iVar2 * 0xc] * DAT_00e375a8
        + *(float *)(&DAT_00e375a0 + iVar3) * _DAT_00e37598;
    local_24 = *(float *)(&DAT_00e3759c + iVar3) * _DAT_00e3758c + (&DAT_00e375a4)[iVar2 * 0xc] * DAT_00e375ac
        + *(float *)(&DAT_00e375a0 + iVar3) * _DAT_00e3759c;
    local_20 = (&DAT_00e375a8)[iVar2 * 0xc] * _DAT_00e37580 + (&DAT_00e375b0)[iVar2 * 0xc] * _DAT_00e375a0
        + (&DAT_00e375ac)[iVar2 * 0xc] * _DAT_00e37590;
    local_1c = (&DAT_00e375a8)[iVar2 * 0xc] * _DAT_00e37584 + (&DAT_00e375b0)[iVar2 * 0xc] * DAT_00e375a4
        + (&DAT_00e375ac)[iVar2 * 0xc] * _DAT_00e37594;
    local_18 = (&DAT_00e375a8)[iVar2 * 0xc] * _DAT_00e37588 + (&DAT_00e375b0)[iVar2 * 0xc] * DAT_00e375a8
        + (&DAT_00e375ac)[iVar2 * 0xc] * _DAT_00e37598;
    local_14 = (&DAT_00e375a8)[iVar2 * 0xc] * _DAT_00e3758c + (&DAT_00e375b0)[iVar2 * 0xc] * DAT_00e375ac
        + (&DAT_00e375ac)[iVar2 * 0xc] * _DAT_00e3759c;
    local_10 = *(float *)(&DAT_00e375bc + iVar3) * _DAT_00e375a0 + *(float *)(&DAT_00e375b8 + iVar3) * _DAT_00e37590
        + *(float *)(&DAT_00e375b4 + iVar3) * _DAT_00e37580 + DAT_00e375b0;
    local_c = *(float *)(&DAT_00e375bc + iVar3) * DAT_00e375a4 + *(float *)(&DAT_00e375b8 + iVar3) * _DAT_00e37594
        + *(float *)(&DAT_00e375b4 + iVar3) * _DAT_00e37584 + _DAT_00e375b4;
    local_8 = *(float *)(&DAT_00e375bc + iVar3) * DAT_00e375a8 + *(float *)(&DAT_00e375b8 + iVar3) * _DAT_00e37598
        + *(float *)(&DAT_00e375b4 + iVar3) * _DAT_00e37588 + _DAT_00e375b8;
    local_4 = *(float *)(&DAT_00e375bc + iVar3) * DAT_00e375ac + *(float *)(&DAT_00e375b8 + iVar3) * _DAT_00e3759c
        + *(float *)(&DAT_00e375b4 + iVar3) * _DAT_00e3758c + _DAT_00e375bc;
    if (DAT_004c3c08 != 0)
    {
        *(float *)(&DAT_00e375b4 + iVar3) = _DAT_0050c6e8 + *(float *)(&DAT_00e375b4 + iVar3);
        *(float *)(&DAT_00e375b8 + iVar3) = _DAT_0050c6ec + *(float *)(&DAT_00e375b8 + iVar3);
        *(float *)(&DAT_00e375bc + iVar3) = _DAT_0050c6f0 + *(float *)(&DAT_00e375bc + iVar3);
    }
    uVar4 = FUN_0044b660();
    FUN_0044bad0(uVar4, pfVar1);
    uVar4 = FUN_0044b660();
    FUN_0044bb10(uVar4, &local_40);
    *(float *)(param_1 + 0xf4) = *pfVar1;
    *(undefined_32 *)(param_1 + 0xf8) = *(undefined_32 *)(&DAT_00e37594 + iVar3);
    *(undefined_32 *)(param_1 + 0xfc) = *(undefined_32 *)(&DAT_00e37598 + iVar3);
    *(undefined_32 *)(param_1 + 0x100) = *(undefined_32 *)(&DAT_00e3759c + iVar3);
    *(undefined_32 *)(param_1 + 0x104) = *(undefined_32 *)(&DAT_00e375a0 + iVar3);
    *(float *)(param_1 + 0x108) = (&DAT_00e375a4)[iVar2 * 0xc];
    *(float *)(param_1 + 0x10c) = (&DAT_00e375a8)[iVar2 * 0xc];
    *(float *)(param_1 + 0x110) = (&DAT_00e375ac)[iVar2 * 0xc];
    *(float *)(param_1 + 0x114) = (&DAT_00e375b0)[iVar2 * 0xc];
    *(undefined_32 *)(param_1 + 0x118) = *(undefined_32 *)(&DAT_00e375b4 + iVar3);
    *(undefined_32 *)(param_1 + 0x11c) = *(undefined_32 *)(&DAT_00e375b8 + iVar3);
    *(undefined_32 *)(param_1 + 0x120) = *(undefined_32 *)(&DAT_00e375bc + iVar3);
    *(undefined_32 *)(param_1 + 0xf0) = param_2;
    return;
}

void FUN_0044c3b0(int param_1, int param_2, undefined_32 param_3)

{
    undefined_32 *puVar1;

    puVar1 = *(undefined_32 **)(param_1 + 0x34);
    *(undefined_32 *)(param_2 + 0xf4) = *puVar1;
    *(undefined_32 *)(param_2 + 0xf8) = puVar1[1];
    *(undefined_32 *)(param_2 + 0xfc) = puVar1[2];
    *(undefined_32 *)(param_2 + 0x100) = puVar1[4];
    *(undefined_32 *)(param_2 + 0x104) = puVar1[5];
    *(undefined_32 *)(param_2 + 0x108) = puVar1[6];
    *(undefined_32 *)(param_2 + 0x10c) = puVar1[8];
    *(undefined_32 *)(param_2 + 0x110) = puVar1[9];
    *(undefined_32 *)(param_2 + 0x114) = puVar1[10];
    *(undefined_32 *)(param_2 + 0x118) = puVar1[0xc];
    *(undefined_32 *)(param_2 + 0x11c) = puVar1[0xd];
    *(undefined_32 *)(param_2 + 0x120) = puVar1[0xe];
    *(undefined_32 *)(param_2 + 0xf0) = param_3;
    return;
}

uint FUN_0044c440(byte param_1, short param_2)

{
    uint uVar1;

    uVar1 = 0;
    if (((param_1 & 8) != 0) && (DAT_004c3b98 != 0))
    {
        DAT_004c3b98 = 0;
        uVar1 = 8;
    }
    if ((param_1 & 1) != 0)
    {
        DAT_0050c6d0 = (uint)(DAT_0050c6d0 == 0);
        uVar1 = uVar1 | 1;
    }
    if (((param_1 & 4) != 0) && (DAT_0050c704 == 0))
    {
        DAT_0050c704 = 1;
        DAT_0050c70c = 1;
        DAT_0050c708 = param_2 + 1;
        DAT_004c3c10 = *(undefined_32 *)(&DAT_004c3ba0 + param_2 * 4);
        uVar1 = uVar1 | 4;
    }
    return uVar1;
}

void FUN_0044c4c0(byte param_1)

{
    if ((param_1 & 1) != 0)
    {
        DAT_0050c6d0 = (uint)(DAT_0050c6d0 == 0);
    }
    if ((param_1 & 8) != 0)
    {
        DAT_004c3b98 = 1;
    }
    if ((param_1 & 4) != 0)
    {
        DAT_0050c704 = 0;
        DAT_0050c70c = 0;
        FUN_00409510(0, 1);
    }
    return;
}

// WARNING: Could not reconcile some variable overlaps
// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

uint FUN_0044c510(float *param_1, int param_2)

{
    float fVar1;
    float fVar2;
    short sVar3;
    short sVar4;
    uint in_EAX;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    undefined_16 uVar9;
    short sVar10;
    short sVar11;
    short sVar12;
    uint uVar13;
    uint local_78;
    uint local_74;
    uint local_70;
    float local_60[4];
    float local_50;
    float local_4c;
    float local_48[4];
    float local_38;
    float local_34;
    float local_30[4];
    float local_20;
    float local_1c;
    float local_18[4];
    float local_8;
    float local_4;

    uVar8 = in_EAX & 0xffff0000;
    if (((*param_1 <= param_1[3]) && (param_1[1] <= param_1[4])) && (param_1[2] <= param_1[5]))
    {
        local_48[0] = _DAT_00e37480 * *param_1;
        local_48[3] = _DAT_00e37480 * param_1[3];
        local_48[1] = _DAT_00e37490 * param_1[1];
        local_38 = _DAT_00e37490 * param_1[4];
        local_48[2] = _DAT_00e374a0 * param_1[2];
        local_34 = _DAT_00e374a0 * param_1[5];
        local_30[0] = _DAT_00e37484 * *param_1;
        local_30[3] = _DAT_00e37484 * param_1[3];
        local_30[1] = _DAT_00e37494 * param_1[1];
        local_20 = _DAT_00e37494 * param_1[4];
        local_30[2] = _DAT_00e374a4 * param_1[2];
        local_1c = _DAT_00e374a4 * param_1[5];
        local_18[0] = _DAT_00e37488 * *param_1;
        local_18[3] = _DAT_00e37488 * param_1[3];
        local_18[1] = _DAT_00e37498 * param_1[1];
        local_8 = _DAT_00e37498 * param_1[4];
        local_18[2] = _DAT_00e374a8 * param_1[2];
        local_4 = _DAT_00e374a8 * param_1[5];
        local_60[0] = _DAT_00e3748c * *param_1;
        local_60[3] = _DAT_00e3748c * param_1[3];
        local_60[1] = _DAT_00e3749c * param_1[1];
        uVar13 = 0;
        local_50 = _DAT_00e3749c * param_1[4];
        local_60[2] = _DAT_00e374ac * param_1[2];
        local_4c = _DAT_00e374ac * param_1[5];
        if (param_2 == 0)
        {
            sVar10 = 0;
            sVar3 = 0;
            sVar4 = 0;
            sVar12 = 0;
        }
        else
        {
            sVar10 = -1;
            sVar4 = -1;
            sVar3 = -1;
            sVar12 = -1;
        }
        local_78 = 0xfffffffe;
        local_74 = 0xfffffffe;
        local_70 = 0xfffffffe;
        do
        {
            uVar5 = uVar13 & 1;
            uVar6 = (int)uVar13 >> 1 & 1;
            uVar7 = (int)uVar13 >> 2 & 1;
            fVar1 = local_60[uVar6 * 3 + 1] + local_60[uVar7 * 3] + local_60[uVar5 * 3 + 2] + _DAT_00e374bc;
            sVar11 = (short)local_74;
            if ((sVar10 != 0) || (uVar8 = uVar7, sVar11 != 0))
            {
                fVar2 = local_48[uVar6 * 3 + 1] + local_48[uVar7 * 3] + local_48[uVar5 * 3 + 2] + _DAT_00e374b0;
                if (fVar1 <= 0.0)
                {
                    if (fVar2 <= -fVar1)
                    {
                        if (fVar1 <= fVar2)
                            goto LAB_0044c7ca;
                        uVar8 = -1;
                    }
                    else
                    {
                        uVar8 = 1;
                    }
                }
                else if (fVar2 <= fVar1)
                {
                    if (-fVar1 <= fVar2)
                    {
                    LAB_0044c7ca:
                        uVar8 = 0;
                    }
                    else
                    {
                        uVar8 = -1;
                    }
                }
                else
                {
                    uVar8 = 1;
                }
                if ((short)uVar8 == 0)
                {
                    if (sVar10 == 0)
                    {
                    LAB_0044c7fc:
                        local_74 = 0;
                    }
                    else
                    {
                        local_74 = 0;
                        sVar4 = 1;
                    }
                }
                else
                {
                    sVar4 = 0;
                    if ((int)sVar11 == -(int)(short)uVar8)
                        goto LAB_0044c7fc;
                    if (sVar11 == -2)
                    {
                        local_74 = uVar8;
                    }
                }
            }
            sVar10 = sVar4;
            if ((sVar3 != 0) || ((short)local_78 != 0))
            {
                fVar2 = local_30[uVar6 * 3 + 1] + local_30[uVar7 * 3] + local_30[uVar5 * 3 + 2] + _DAT_00e374b4;
                if (fVar1 <= 0.0)
                {
                    if (fVar2 <= -fVar1)
                    {
                        if (fVar1 <= fVar2)
                            goto LAB_0044c8a1;
                        uVar8 = -1;
                    }
                    else
                    {
                        uVar8 = 1;
                    }
                }
                else if (fVar2 <= fVar1)
                {
                    if (-fVar1 <= fVar2)
                    {
                    LAB_0044c8a1:
                        uVar8 = 0;
                    }
                    else
                    {
                        uVar8 = -1;
                    }
                }
                else
                {
                    uVar8 = 1;
                }
                if ((short)uVar8 == 0)
                {
                    if (sVar3 != 0)
                    {
                        sVar3 = 1;
                    }
                    local_78 = 0;
                }
                else
                {
                    sVar3 = 0;
                    if ((int)(short)local_78 == -(int)(short)uVar8)
                    {
                        local_78 = 0;
                    }
                    else if ((short)local_78 == -2)
                    {
                        local_78 = uVar8;
                    }
                }
            }
            if ((sVar12 != 0) || ((short)local_70 != 0))
            {
                if (fVar1 <= 0.0)
                {
                    uVar8 = -1;
                }
                else if (local_18[uVar6 * 3 + 1] + local_18[uVar7 * 3] + local_18[uVar5 * 3 + 2] + _DAT_00e374b8
                         <= fVar1)
                {
                    uVar8 = 0;
                }
                else
                {
                    uVar8 = 1;
                }
                if ((short)uVar8 == 0)
                {
                    if (sVar12 == 0)
                    {
                    LAB_0044c95c:
                        uVar5 = 0;
                    }
                    else
                    {
                        sVar12 = 1;
                        uVar5 = 0;
                    }
                LAB_0044c968:
                    local_70._0_2_ = (short)uVar5;
                    local_70 = uVar5;
                }
                else
                {
                    sVar12 = 0;
                    if ((int)(short)local_70 == -(int)(short)uVar8)
                        goto LAB_0044c95c;
                    uVar5 = uVar8;
                    if ((short)local_70 == -2)
                        goto LAB_0044c968;
                }
            }
            uVar13 = uVar13 + 1;
            sVar4 = sVar10;
        } while ((int)uVar13 < 8);
        uVar9 = (undefined_16)(uVar8 >> 0x10);
        if (((sVar10 != 0) && (sVar3 != 0)) && (sVar12 != 0))
        {
            return CONCAT22(uVar9, 2);
        }
        if ((((short)local_74 == 0) && ((short)local_78 == 0)) && ((short)local_70 == 0))
        {
            return CONCAT22(uVar9, 1);
        }
    }
    return uVar8 & 0xffff0000;
}

undefined_32 FUN_0044c9d0(int param_1)

{
    char *_Str1;
    int iVar1;

    _Str1 = *(char **)(param_1 + 0x30);
    iVar1 = _strncmp(_Str1, (char *)&PTR_DAT_004c3c14, 3);
    if (iVar1 == 0)
    {
        return *(undefined_32 *)(_Str1 + 10);
    }
    return *(undefined_32 *)(param_1 + 0x30);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044ca00(undefined_32 *param_1)

{
    undefined_32 *puVar1;
    int iVar2;
    uint **ppuVar3;
    uint *_Str1;
    uint uVar4;
    short sVar5;
    undefined_32 *puVar6;
    undefined_32 uVar7;
    uint uVar8;
    undefined_32 *puVar9;
    int iVar10;
    uint *puVar11;
    int iVar12;
    uint *puVar13;
    float10 fVar14;
    uint uVar15;
    uint local_1c;
    short local_18;
    float local_c;
    float local_8;
    int local_4;

    local_c = 0.0;
    local_8 = 0.0;
    local_1c = 0;
    if ((DAT_004c3c04 != 0) && (DAT_004c3c0c != 0))
    {
        FUN_0044bc20();
    }
    param_1[0xd] = DAT_00e3752c;
    param_1[0xe] = DAT_00e37520;
    if (DAT_004c3b98 == 0)
    {
        local_18 = 2;
    }
    else
    {
        local_18 = FUN_0044c510(param_1 + 7, 1);
    }
    if (local_18 != 0)
    {
        puVar9 = param_1;
        if (DAT_004c3c04 != 0)
        {
            _DAT_0050c6f8 = 0;
            puVar9 = (undefined_32 *)(&DAT_00e375c0 + DAT_0050c6f4 * 0x30);
        }
        iVar10 = *(int *)(DAT_0050c6b0 + 0x74);
        iVar2 = *(int *)(DAT_0050c6b0 + 0x78);
        iVar12 = iVar10 + param_1[5];
        *(int *)(iVar2 + 0x90) = iVar12 + -1;
        puVar1 = (undefined_32 *)(iVar2 + iVar10 * 0x124);
        if (puVar1 + -0x49 == *(undefined_32 **)(DAT_0050c6b0 + 0x78))
        {
            puVar1[-0x24] = puVar1;
        }
        else
        {
            puVar1[-0x23] = puVar1;
        }
        puVar6 = puVar1;
        for (iVar10 = *(int *)(DAT_0050c6b0 + 0x74); iVar10 < iVar12; iVar10 = iVar10 + 1)
        {
            puVar6[0x20] = iVar10;
            puVar6[0x22] = -1;
            *puVar6 = DAT_004c3c18;
            puVar6[1] = PTR_DAT_004c3c1c;
            puVar6[0x23] = *(undefined_32 *)(DAT_0050c6b0 + 0x78);
            if (iVar10 < iVar12 + -1)
            {
                puVar6[0x26] = puVar6 + 0x49;
            }
            else
            {
                puVar6[0x26] = 0;
            }
            puVar6[0x25] = 0;
            puVar6[0x24] = 0;
            puVar6[0x3c] = 0;
            puVar6[0x21] = 1;
            puVar6[0x30] = *puVar9;
            puVar6[0x31] = puVar9[1];
            puVar6[0x32] = puVar9[2];
            puVar6[0x33] = puVar9[3];
            puVar6[0x34] = puVar9[4];
            puVar6[0x35] = puVar9[5];
            puVar6[0x36] = puVar9[6];
            puVar6[0x37] = puVar9[7];
            puVar6[0x38] = puVar9[8];
            puVar6[0x39] = puVar9[9];
            puVar6[0x3a] = puVar9[10];
            puVar6[0x3b] = puVar9[0xb];
            puVar6 = puVar6 + 0x49;
        }
        *(int *)(DAT_0050c6b0 + 0x74) = iVar12;
        local_4 = 0;
        if (0 < (int)param_1[5])
        {
            puVar11 = puVar1 + 0x22;
            do
            {
                ppuVar3 = *(uint ***)(param_1[6] + local_4 * 4);
                if ((local_18 == 2) || (sVar5 = FUN_0044c510(ppuVar3 + 2, 0), sVar5 != 0))
                {
                    _Str1 = ppuVar3[0xc];
                    FUN_00433680(DAT_00e996dc & 0x2000, *ppuVar3);
                    puVar13 = *ppuVar3;
                    if ((puVar13 != NULL) && ((*puVar13 & 8) == 0))
                    {
                        if ((*puVar13 & 0x40) == 0)
                        {
                            local_1c = local_1c | 1;
                        }
                        else
                        {
                            local_1c = local_1c | 0x800;
                        }
                    }
                    if ((((DAT_00e996dc & 0x10) == 0) && (puVar13 != NULL)) && (uVar8 = puVar13[2], uVar8 != 0))
                    {
                        local_c = (float)(int)*(short *)(uVar8 + 4) / (float)(int)*(short *)(puVar13 + 1);
                        uVar4 = *(uint *)(uVar8 + 0x1c);
                        local_8 = (float)(int)*(short *)((int)puVar13 + 6) / (float)(int)*(short *)(uVar8 + 6);
                        if (uVar4 == 0)
                        {
                            uVar15 = 0;
                            uVar8 = 0;
                            uVar7 = FUN_00409040(puVar13, 0, 0);
                        }
                        else
                        {
                            uVar7 = *(undefined_32 *)(uVar8 + 0x38);
                            uVar15 = (uVar4 & 0xffffff00 | (uint) * (byte *)(uVar4 + 3)) & 0xffff000f;
                            uVar8 = ((uint)puVar13 & 0xffffff00 | (uint) * (byte *)(uVar4 + 3)) & 0xffff00f0;
                        }
                        FUN_00432190(uVar7, uVar8, uVar15);
                    }
                    else
                    {
                        uVar7 = FUN_00409040(ppuVar3, 0, 0);
                        FUN_00432190(uVar7);
                    }
                    iVar10 = _strncmp((char *)_Str1, (char *)&PTR_DAT_004c3c14, 3);
                    if (iVar10 == 0)
                    {
                        uVar8 = _Str1[0x10];
                        puVar11[0x1a] = 0;
                        *puVar11 = uVar8;
                        puVar13 = _Str1;
                        if (DAT_0050c0cc != 0)
                        {
                            FUN_00432580(_Str1);
                        }
                    }
                    else
                    {
                        uVar8 = FUN_00409230(_Str1);
                        iVar10 = *(int *)(DAT_00e37bf0 + 4);
                        *(undefined_32 *)(iVar10 + 0x44 + uVar8 * 0x94) = 3;
                        *puVar11 = uVar8;
                        *(uint *)(iVar10 + 0x40 + uVar8 * 0x94) = uVar8;
                        puVar13 = (uint *)(iVar10 + uVar8 * 0x94);
                        *(char *)puVar13 = 'a';
                        *(char *)((int)puVar13 + 1) = 'e';
                        *(char *)((int)puVar13 + 2) = 's';
                        FUN_00432d30(_Str1, puVar13, ppuVar3, local_1c);
                        *(uint **)((int)puVar13 + 10) = ppuVar3[0xc];
                        ppuVar3[0xc] = puVar13;
                        fVar14 = (float10)vec3f_distance(ppuVar3 + 2, ppuVar3 + 5);
                        puVar13[0x20] = (uint)(float)(fVar14 * (float10)0.5);
                        FUN_00409290(puVar13);
                    }
                    *(short *)(puVar13 + 0x21) = *(short *)(puVar13 + 0x21) + 1;
                    *(short *)((int)puVar13 + 0x86) = *(short *)((int)puVar13 + 0x86) + 1;
                    puVar13[0x23] = (uint)(1.0 - local_c);
                    puVar13[0x24] = (uint)(1.0 - local_8);
                    if (DAT_0050c70c == 0)
                    {
                        *(char *)((int)puVar13 + 0x89) = '\0';
                    }
                    else
                    {
                        *(char *)((int)puVar13 + 0x89) = '\x01';
                    }
                    if (DAT_0050c530 != 0)
                    {
                        *(char *)((int)puVar13 + 0x89) = '\0';
                    }
                    DAT_0050c0cc = 0;
                    if (*(char *)(puVar13 + 0x22) != '\0')
                    {
                        FUN_00432b80(puVar13, ppuVar3);
                    }
                    if ((_Str1 != NULL) && (sVar5 = *(short *)((int)ppuVar3 + 0x3e), sVar5 != 0))
                    {
                        if (ppuVar3[10] == NULL)
                        {
                            FUN_0044bfb0(puVar11 + -0x22, (int)sVar5);
                        }
                        else
                        {
                            FUN_0044c3b0(ppuVar3[10], puVar11 + -0x22, (int)sVar5);
                        }
                    }
                }
                local_4 = local_4 + 1;
                puVar11 = puVar11 + 0x49;
            } while (local_4 < (int)param_1[5]);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044ceb0(undefined_32 *param_1)

{
    undefined_32 *puVar1;
    uint **ppuVar2;
    uint *_Str1;
    uint *puVar3;
    uint uVar4;
    undefined_32 *puVar5;
    int iVar6;
    uint uVar7;
    undefined_32 *puVar8;
    int iVar9;
    uint extraout_EDX;
    int iVar10;
    float10 fVar11;
    uint *local_8;
    int local_4;

    if ((DAT_004c3c04 != 0) && (DAT_004c3c0c != 0))
    {
        FUN_0044bc20();
    }
    param_1[0xd] = DAT_00e3752c;
    param_1[0xe] = DAT_00e37520;
    puVar8 = param_1;
    if (DAT_004c3c04 != 0)
    {
        _DAT_0050c6f8 = 0;
        puVar8 = (undefined_32 *)(&DAT_00e375c0 + DAT_0050c6f4 * 0x30);
    }
    if (param_1[5] != 0)
    {
        iVar9 = *(int *)(DAT_0050c6b0 + 0x74);
        iVar6 = *(int *)(DAT_0050c6b0 + 0x78);
        iVar10 = param_1[5] + iVar9;
        *(int *)(iVar6 + 0x90) = iVar10 + -1;
        puVar1 = (undefined_32 *)(iVar6 + iVar9 * 0x124);
        if (puVar1 + -0x49 == *(undefined_32 **)(DAT_0050c6b0 + 0x78))
        {
            puVar1[-0x24] = puVar1;
        }
        else
        {
            puVar1[-0x23] = puVar1;
        }
        puVar5 = puVar1;
        for (iVar9 = *(int *)(DAT_0050c6b0 + 0x74); iVar9 < iVar10; iVar9 = iVar9 + 1)
        {
            puVar5[0x20] = iVar9;
            puVar5[0x22] = -1;
            *puVar5 = DAT_004c3c18;
            puVar5[1] = PTR_DAT_004c3c1c;
            puVar5[0x23] = *(undefined_32 *)(DAT_0050c6b0 + 0x78);
            if (iVar9 < iVar10 + -1)
            {
                puVar5[0x26] = puVar5 + 0x49;
            }
            else
            {
                puVar5[0x26] = 0;
            }
            puVar5[0x25] = 0;
            puVar5[0x24] = 0;
            puVar5[0x21] = 1;
            puVar5[0x30] = *puVar8;
            puVar5[0x31] = puVar8[1];
            puVar5[0x32] = puVar8[2];
            puVar5[0x33] = puVar8[3];
            puVar5[0x34] = puVar8[4];
            puVar5[0x35] = puVar8[5];
            puVar5[0x36] = puVar8[6];
            puVar5[0x37] = puVar8[7];
            puVar5[0x38] = puVar8[8];
            puVar5[0x39] = puVar8[9];
            puVar5[0x3a] = puVar8[10];
            puVar5[0x3b] = puVar8[0xb];
            puVar5 = puVar5 + 0x49;
        }
        *(int *)(DAT_0050c6b0 + 0x74) = iVar10;
        local_4 = 0;
        if (0 < (int)param_1[5])
        {
            local_8 = puVar1 + 0x22;
            do
            {
                ppuVar2 = *(uint ***)(param_1[6] + local_4 * 4);
                _Str1 = ppuVar2[0xc];
                if (_Str1 != NULL)
                {
                    iVar9 = 0;
                    FUN_00433680(DAT_00e996dc & 0x2000, *ppuVar2);
                    puVar3 = *ppuVar2;
                    if ((puVar3 != NULL) && ((*puVar3 & 8) == 0))
                    {
                        iVar9 = (-(uint)((*puVar3 & 0x40) != 0) & 0x7ff) + 1;
                    }
                    if (((((DAT_00e996dc & 0x10) == 0) && (puVar3 != NULL)) && (uVar7 = puVar3[2], uVar7 != 0))
                        && (uVar4 = *(uint *)(uVar7 + 0x1c), uVar4 != 0))
                    {
                        FUN_00432190(*(undefined_32 *)(uVar7 + 0x38),
                                     (uVar4 & 0xffffff00 | (uint) * (byte *)(uVar4 + 3)) & 0xffff00f0,
                                     (extraout_EDX & 0xffffff00 | (uint) * (byte *)(uVar4 + 3)) & 0xffff000f);
                    }
                    else
                    {
                        FUN_00432190(0, 0, 0);
                    }
                    iVar6 = _strncmp((char *)_Str1, (char *)&PTR_DAT_004c3c14, 3);
                    if (iVar6 == 0)
                    {
                        *local_8 = _Str1[0x10];
                    }
                    else
                    {
                        uVar7 = FUN_00409230(_Str1);
                        iVar6 = *(int *)(DAT_00e37bf0 + 4);
                        *(undefined_32 *)(iVar6 + 0x44 + uVar7 * 0x94) = 3;
                        puVar3 = (uint *)(iVar6 + uVar7 * 0x94);
                        *local_8 = uVar7;
                        puVar3[0x10] = uVar7;
                        *(undefined_8 *)puVar3 = 0x61;
                        *(undefined_8 *)((int)puVar3 + 1) = 0x65;
                        *(undefined_8 *)((int)puVar3 + 2) = 0x73;
                        *(undefined_16 *)(puVar3 + 0x21) = 0;
                        *(undefined_16 *)((int)puVar3 + 0x86) = 0;
                        FUN_00432d30(_Str1, puVar3, ppuVar2, iVar9);
                        *(uint **)((int)puVar3 + 10) = ppuVar2[0xc];
                        ppuVar2[0xc] = puVar3;
                        fVar11 = (float10)vec3f_distance(ppuVar2 + 2, ppuVar2 + 5);
                        puVar3[0x20] = (uint)(float)(fVar11 * (float10)0.5);
                        FUN_00409290(puVar3);
                    }
                }
                local_4 = local_4 + 1;
                local_8 = local_8 + 0x49;
            } while (local_4 < (int)param_1[5]);
        }
    }
    return;
}

void FUN_0044d1e0(int param_1, int param_2, float *param_3)

{
    float fVar1;
    float *pfVar2;
    float *pfVar3;
    float *pfVar4;
    int iVar5;

    iVar5 = 3;
    pfVar2 = (float *)(param_1 + 0x24);
    pfVar3 = (float *)(param_2 + 0x18);
    pfVar4 = param_3;
    do
    {
        iVar5 = iVar5 + -1;
        fVar1 = -(pfVar3[-6] * *param_3) + *pfVar2;
        *pfVar2 = fVar1;
        fVar1 = -(pfVar3[-3] * param_3[1]) + fVar1;
        *pfVar2 = fVar1;
        fVar1 = -(param_3[2] * *pfVar3) + fVar1;
        *pfVar2 = fVar1;
        *pfVar2 = *pfVar4 + fVar1;
        pfVar2 = pfVar2 + 1;
        pfVar3 = pfVar3 + 1;
        pfVar4 = pfVar4 + 1;
    } while (iVar5 != 0);
    return;
}

void FUN_0044d240(undefined_32 param_1, undefined_32 param_2, int param_3)

{
    int iVar1;
    bool bVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    int iVar6;

    DAT_0050c6e0 = DAT_0050c6e0 + 1;
    if (DAT_0050c6e0 < 0x21)
    {
        bVar2 = false;
        if (DAT_004c3c04 != 0)
        {
            FUN_0044b7e0(param_2);
        }
    }
    else
    {
        bVar2 = true;
    }
    iVar3 = FUN_00431780(param_3);
    iVar6 = 0;
    if (0 < iVar3)
    {
        do
        {
            iVar1 = *(int *)(*(int *)(param_3 + 0x18) + iVar6 * 4);
            if (iVar1 != 0)
            {
                uVar5 = *(uint *)(DAT_00e67c04 + 0x158);
                uVar4 = FUN_00431b00(iVar1, 2);
                if ((uVar4 & uVar5) == uVar5)
                {
                    uVar5 = FUN_00431b00(iVar1, 2);
                    if ((*(uint *)(DAT_00e67c04 + 0x15c) & uVar5) != 0)
                    {
                        FUN_0044d7c0(iVar1);
                    }
                }
            }
            iVar6 = iVar6 + 1;
        } while (iVar6 < iVar3);
    }
    if ((!bVar2) && (DAT_004c3c04 != 0))
    {
        FUN_0044bab0();
    }
    DAT_0050c6e0 = DAT_0050c6e0 + -1;
    return;
}

void FUN_0044d310(int param_1)

{
    short sVar1;
    int iVar2;
    bool bVar3;
    int iVar4;
    uint uVar5;
    uint uVar6;
    int iVar7;
    float10 fVar8;
    float *pfVar9;
    float *pfVar10;
    float *pfVar11;
    float local_80;
    undefined_8 local_78[12];
    float local_6c;
    float local_68;
    float local_64;
    float local_60;
    float local_5c;
    float local_58;
    float local_54;
    float local_50;
    float local_4c;
    float local_48;
    float local_44;
    float local_40;
    float local_3c;
    float local_38;
    float local_34;
    undefined_8 local_30[12];
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    float local_c;
    float local_8;
    float local_4;

    iVar7 = 0;
    if (DAT_004c3c04 == 0)
    {
        local_60 = 1.0;
        local_5c = 0.0;
        local_58 = 0.0;
        local_54 = 0.0;
        local_50 = 1.0;
        local_4c = 0.0;
        local_48 = 0.0;
        local_44 = 0.0;
        local_40 = 1.0;
        local_3c = 0.0;
        local_38 = 0.0;
        local_34 = 0.0;
        goto LAB_0044d68a;
    }
    if (*(short *)(param_1 + 0x1e) == 0)
    {
        FUN_0044b9b0(&local_60);
    }
    else
    {
        FUN_0044b9b0(local_30);
        local_38 = local_8;
        local_3c = local_c;
        local_34 = local_4;
        local_6c = local_c - *(float *)(DAT_00e67c04 + 0xa0);
        local_68 = local_8 - *(float *)(DAT_00e67c04 + 0xa4);
        local_64 = local_4 - *(float *)(DAT_00e67c04 + 0xa8);
        rdVector_Normalize3(&local_6c);
        sVar1 = *(short *)(param_1 + 0x1e);
        if (sVar1 == 1)
        {
            rdVector_Scale3(local_78, *(undefined_32 *)(param_1 + 0x20), local_30);
            vec3f_multiply_add(local_78, local_78, *(undefined_32 *)(param_1 + 0x24), local_24);
            vec3f_multiply_add(&local_48, local_78, *(undefined_32 *)(param_1 + 0x28), local_18);
            fVar8 = (float10)rdVector_Normalize3(&local_48);
            local_80 = (float)fVar8;
            rdVector_Cross3(&local_60, &local_6c, &local_48);
            rdVector_Normalize3(&local_60);
            pfVar11 = &local_60;
            pfVar10 = &local_48;
            pfVar9 = &local_54;
        LAB_0044d573:
            rdVector_Cross3(pfVar9, pfVar10, pfVar11);
        }
        else
        {
            local_54 = local_6c;
            local_50 = local_68;
            local_4c = local_64;
            if (sVar1 == 2)
            {
                fVar8 = (float10)rdVector_Len3(local_18);
                local_80 = (float)fVar8;
                rdVector_Cross3(&local_60, &local_54, DAT_00e67c04 + 0x90);
                rdVector_Normalize3(&local_60);
                pfVar11 = &local_54;
                pfVar10 = &local_60;
                pfVar9 = &local_48;
                goto LAB_0044d573;
            }
            if (sVar1 == 3)
            {
                rdVector_Scale3(local_78, *(undefined_32 *)(param_1 + 0x20), local_30);
                vec3f_multiply_add(local_78, local_78, *(undefined_32 *)(param_1 + 0x24), local_24);
                vec3f_multiply_add(local_78, local_78, *(undefined_32 *)(param_1 + 0x28), local_18);
                fVar8 = (float10)rdVector_Normalize3(local_78);
                local_80 = (float)fVar8;
                rdVector_Cross3(&local_60, &local_54, local_78);
                rdVector_Normalize3(&local_60);
                pfVar11 = &local_54;
                pfVar10 = &local_60;
                pfVar9 = &local_48;
                goto LAB_0044d573;
            }
        }
        local_60 = local_80 * local_60;
        local_5c = local_80 * local_5c;
        local_58 = local_80 * local_58;
        local_54 = local_80 * local_54;
        local_50 = local_80 * local_50;
        local_4c = local_80 * local_4c;
        local_48 = local_80 * local_48;
        local_44 = local_80 * local_44;
        local_40 = local_80 * local_40;
    }
    if (*(short *)(param_1 + 0x1c) == 1)
    {
        local_3c = *(float *)(DAT_00e67c04 + 0xa0);
        local_38 = *(float *)(DAT_00e67c04 + 0xa4);
        local_34 = *(float *)(DAT_00e67c04 + 0xa8);
    }
LAB_0044d68a:
    DAT_0050c6e0 = DAT_0050c6e0 + 1;
    bVar3 = DAT_0050c6e0 < 0x21;
    if (bVar3)
    {
        FUN_0044b750(&local_60);
    }
    iVar4 = FUN_00431780(param_1);
    if (0 < iVar4)
    {
        do
        {
            iVar2 = *(int *)(*(int *)(param_1 + 0x18) + iVar7 * 4);
            if (((iVar2 != 0)
                 && (uVar6 = *(uint *)(DAT_00e67c04 + 0x158), uVar5 = FUN_00431b00(iVar2, 2), (uVar5 & uVar6) == uVar6))
                && (uVar6 = FUN_00431b00(iVar2, 2), (*(uint *)(DAT_00e67c04 + 0x15c) & uVar6) != 0))
            {
                FUN_0044d7c0(iVar2);
            }
            iVar7 = iVar7 + 1;
        } while (iVar7 < iVar4);
    }
    if (bVar3)
    {
        FUN_0044bab0();
    }
    DAT_0050c6e0 = DAT_0050c6e0 + -1;
    return;
}

int FUN_0044d740(int param_1)

{
    int iVar1;
    int iVar2;
    float *pfVar3;

    iVar1 = FUN_00431780(param_1);
    if (iVar1 < 1)
    {
        return -1;
    }
    if (DAT_004c3c04 == 0)
    {
        return 0;
    }
    if (10.0 < *(float *)(param_1 + 0x1c))
    {
        return -1;
    }
    iVar2 = 1;
    pfVar3 = (float *)(param_1 + 0x20);
    do
    {
        if ((*pfVar3 == -1.0) || (10.0 <= *pfVar3))
            break;
        iVar2 = iVar2 + 1;
        pfVar3 = pfVar3 + 1;
    } while (iVar2 < 8);
    if (iVar1 <= iVar2 + -1)
    {
        return -1;
    }
    return iVar2 + -1;
}

void FUN_0044d7c0(int param_1)

{
    bool bVar1;
    uint uVar2;
    uint uVar3;
    undefined_32 uVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    undefined_32 *puVar8;
    undefined_32 uVar9;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar7 = 0;
    if (param_1 == 0)
    {
        return;
    }
    uVar3 = *(uint *)(DAT_00e67c04 + 0x158);
    uVar2 = FUN_00431b00(param_1, 2);
    if ((uVar2 & uVar3) != uVar3)
    {
        return;
    }
    uVar3 = FUN_00431b00(param_1, 2);
    if ((*(uint *)(DAT_00e67c04 + 0x15c) & uVar3) == 0)
    {
        return;
    }
    bVar1 = 10 < DAT_0050c710;
    DAT_0050c710 = DAT_0050c710 + 1;
    if (bVar1)
    {
        DAT_0050c710 = 0;
        FUN_00426910();
    }
    uVar3 = get_self(param_1);
    uVar4 = FUN_0044c440(*(undefined_32 *)(param_1 + 0x10), uVar3 & 0xffff0000 | (uint) * (ushort *)(param_1 + 0xe));
    if ((int)uVar3 < 0x5065)
    {
        if (uVar3 == 0x5064)
        {
            iVar5 = FUN_00431780(param_1);
            if (0 < iVar5)
            {
                do
                {
                    iVar6 = *(int *)(*(int *)(param_1 + 0x18) + iVar7 * 4);
                    if (((iVar6 != 0)
                         && (uVar3 = *(uint *)(DAT_00e67c04 + 0x158), uVar2 = FUN_00431b00(iVar6, 2),
                             (uVar2 & uVar3) == uVar3))
                        && (uVar3 = FUN_00431b00(iVar6, 2), (*(uint *)(DAT_00e67c04 + 0x15c) & uVar3) != 0))
                    {
                        FUN_0044d7c0(iVar6);
                    }
                    iVar7 = iVar7 + 1;
                } while (iVar7 < iVar5);
            }
        }
        else if (uVar3 == 0x3064)
        {
            FUN_0044ca00(param_1);
        }
        goto LAB_0044dac0;
    }
    if ((int)uVar3 < 0xd065)
    {
        if (uVar3 != 0xd064)
        {
            if (uVar3 == 0x5065)
            {
                iVar6 = FUN_00431780(param_1);
                iVar5 = *(int *)(param_1 + 0x1c);
                if (iVar5 == -2)
                    goto LAB_0044dac0;
                if (iVar5 == -1)
                {
                    if (0 < iVar6)
                    {
                        do
                        {
                            iVar5 = *(int *)(*(int *)(param_1 + 0x18) + iVar7 * 4);
                            if (((iVar5 != 0)
                                 && (uVar3 = *(uint *)(DAT_00e67c04 + 0x158), uVar2 = FUN_00431b00(iVar5, 2),
                                     (uVar2 & uVar3) == uVar3))
                                && (uVar3 = FUN_00431b00(iVar5, 2), (*(uint *)(DAT_00e67c04 + 0x15c) & uVar3) != 0))
                            {
                                FUN_0044d7c0(iVar5);
                            }
                            iVar7 = iVar7 + 1;
                        } while (iVar7 < iVar6);
                    }
                    goto LAB_0044dac0;
                }
                if ((iVar5 < 0) || (iVar6 <= iVar5))
                    goto LAB_0044dac0;
            }
            else if ((uVar3 != 0x5066) || (iVar5 = FUN_0044d740(param_1), iVar5 == -1))
                goto LAB_0044dac0;
            iVar7 = *(int *)(*(int *)(param_1 + 0x18) + iVar5 * 4);
            if ((iVar7 != 0)
                && ((uVar3 = *(uint *)(DAT_00e67c04 + 0x158), uVar2 = FUN_00431b00(iVar7, 2),
                     (uVar2 & uVar3) == uVar3
                         && (uVar3 = FUN_00431b00(iVar7, 2), (*(uint *)(DAT_00e67c04 + 0x15c) & uVar3) != 0))))
            {
                FUN_0044d7c0(iVar7);
            }
            goto LAB_0044dac0;
        }
        puVar8 = (undefined_32 *)(param_1 + 0x1c);
        uVar9 = 0;
    }
    else
    {
        if (uVar3 != 0xd065)
        {
            if (uVar3 == 0xd066)
            {
                FUN_0044d310(param_1);
            }
            goto LAB_0044dac0;
        }
        iVar7 = FUN_00431780(param_1);
        if (iVar7 < 1)
            goto LAB_0044dac0;
        if ((*(byte *)(param_1 + 0xc) & 0x10) == 0)
        {
            puVar8 = (undefined_32 *)(param_1 + 0x1c);
        }
        else
        {
            local_30 = *(undefined_32 *)(param_1 + 0x1c);
            local_2c = *(undefined_32 *)(param_1 + 0x20);
            local_28 = *(undefined_32 *)(param_1 + 0x24);
            local_24 = *(undefined_32 *)(param_1 + 0x28);
            local_20 = *(undefined_32 *)(param_1 + 0x2c);
            local_1c = *(undefined_32 *)(param_1 + 0x30);
            local_18 = *(undefined_32 *)(param_1 + 0x34);
            local_14 = *(undefined_32 *)(param_1 + 0x38);
            local_10 = *(undefined_32 *)(param_1 + 0x3c);
            local_c = *(undefined_32 *)(param_1 + 0x40);
            local_8 = *(undefined_32 *)(param_1 + 0x44);
            local_4 = *(undefined_32 *)(param_1 + 0x48);
            FUN_0044d1e0(&local_30, param_1 + 0x1c, param_1 + 0x4c);
            puVar8 = &local_30;
        }
        uVar9 = 1;
    }
    FUN_0044d240(uVar9, puVar8, param_1);
LAB_0044dac0:
    FUN_0044c4c0(uVar4);
    return;
}

void FUN_0044dae0(int param_1)

{
    int iVar1;
    uint uVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;

    if (param_1 != 0)
    {
        uVar2 = get_self(param_1);
        uVar3 =
            FUN_0044c440(*(undefined_32 *)(param_1 + 0x10), uVar2 & 0xffff0000 | (uint) * (ushort *)(param_1 + 0xe));
        if ((uVar2 & 0x4000) == 0)
        {
            if ((uVar2 & 0x3064) != 0)
            {
                FUN_0044ceb0(param_1);
            }
        }
        else
        {
            iVar4 = FUN_00431780(param_1);
            iVar5 = 0;
            if (0 < iVar4)
            {
                do
                {
                    iVar1 = *(int *)(*(int *)(param_1 + 0x18) + iVar5 * 4);
                    if (iVar1 != 0)
                    {
                        FUN_0044dae0(iVar1);
                    }
                    iVar5 = iVar5 + 1;
                } while (iVar5 < iVar4);
                FUN_0044c4c0(uVar3);
                return;
            }
        }
        FUN_0044c4c0(uVar3);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044db70(undefined_32 *param_1, int param_2)

{
    undefined_32 uVar1;
    int *piVar2;
    int iVar3;
    undefined_32 *puVar4;
    undefined_32 *puVar5;

    DAT_00e374c0 = *param_1;
    DAT_00e67c04 = param_2;
    if ((DAT_0050c6b0 == 0) && (DAT_0050c6b4 == NULL))
    {
        DAT_0050c6b0 = allocate(0x90);
        FUN_0048ee10(DAT_0050c6b0);
        *(undefined_32 *)(DAT_0050c6b0 + 0x40) = 0;
        *(undefined_32 *)(DAT_0050c6b0 + 0x68) = 0;
        *(undefined_32 *)(DAT_0050c6b0 + 0x6c) = 0;
        *(undefined_32 *)(DAT_0050c6b0 + 100) = 1;
        DAT_00e37bf0 = DAT_0050c6b0 + 0x44 + *(int *)(DAT_0050c6b0 + 0x70) * 8;
        FUN_00409270();
        uVar1 = allocate(0xd8cc0);
        *(undefined_32 *)(DAT_00e37bf0 + 4) = uVar1;
        puVar4 = *(undefined_32 **)(DAT_00e37bf0 + 4);
        MEMSET(iVar3, puVar4, 0, 0x36330)
        DAT_0050c6b4 = (undefined_32 *)FUN_00490b70(0);
        *DAT_0050c6b4 = 1;
        DAT_0050c6b4[5] = 1;
        DAT_0050c6b4[1] = DAT_0050c6b0;
        DAT_0050c6b4[0xb] = -1;
        DAT_0050c6b4[0xc] = 4;
        DAT_0050c6b4[2] = 4;
        DAT_0050c6b4[9] = 0;
        DAT_0050c6b4[8] = 0;
        uVar1 = allocate(0x1abbc0);
        *(undefined_32 *)(DAT_0050c6b0 + 0x78) = uVar1;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x80) = 0;
        puVar4 = *(undefined_32 **)(DAT_0050c6b0 + 0x78);
        *puVar4 = DAT_004c3c20;
        *(undefined_8 *)(puVar4 + 1) = DAT_004c3c24;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x8c) = 0;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x98) = 0;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x94) = 0;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x90) = 0;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x84) = 1;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x88) = -1;
        puVar4 = &DAT_004af880;
        puVar5 = (undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0xc0);
        QMEMCPY(iVar3, puVar4, puVar5, 0xc)
    }
    *(undefined_32 *)(DAT_0050c6b0 + 0x74) = 1;
    FUN_00408f70(DAT_0050c6b0);
    DAT_0050c6e0 = 0;
    FUN_0044bb40();
    DAT_0050c6c0 = DAT_0050c6c0 + 1;
    puVar4 = &DAT_00e374e0;
    MEMSET(iVar3, puVar4, 0, 0x10)
    _DAT_0050c6bc = 0;
    DAT_0050c6d0 = DAT_00e996dc >> 0xe & 1;
    FUN_0044d7c0(*(undefined_32 *)(param_2 + 0x168));
    piVar2 = &DAT_00e374e4;
    do
    {
        iVar3 = *piVar2;
        piVar2 = piVar2 + 1;
        DAT_00e374e0 = DAT_00e374e0 + iVar3;
    } while ((int)piVar2 < 0xe37520);
    FUN_00490c80(DAT_0050c6b4, &DAT_004af880, (DAT_00e996dc & 0x4000) != 0, DAT_00ec86c4);
    *param_1 = DAT_00e374c0;
    return;
}

void FUN_0044de10(int param_1)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;

    DAT_00e67c04 = param_1;
    if ((DAT_0050c6b0 == 0) && (DAT_0050c6b4 == NULL))
    {
        DAT_0050c6b0 = allocate(0x90);
        FUN_0048ee10(DAT_0050c6b0);
        *(undefined_32 *)(DAT_0050c6b0 + 0x40) = 0;
        *(undefined_32 *)(DAT_0050c6b0 + 0x68) = 0;
        *(undefined_32 *)(DAT_0050c6b0 + 0x6c) = 0;
        *(undefined_32 *)(DAT_0050c6b0 + 100) = 1;
        DAT_00e37bf0 = DAT_0050c6b0 + 0x44 + *(int *)(DAT_0050c6b0 + 0x70) * 8;
        FUN_00409270();
        uVar1 = allocate(0xd8cc0);
        *(undefined_32 *)(DAT_00e37bf0 + 4) = uVar1;
        puVar3 = *(undefined_32 **)(DAT_00e37bf0 + 4);
        MEMSET(iVar2, puVar3, 0, 0x36330)
        DAT_0050c6b4 = (undefined_32 *)FUN_00490b70(0);
        *DAT_0050c6b4 = 1;
        DAT_0050c6b4[5] = 1;
        DAT_0050c6b4[1] = DAT_0050c6b0;
        DAT_0050c6b4[0xb] = -1;
        DAT_0050c6b4[0xc] = 4;
        DAT_0050c6b4[2] = 4;
        DAT_0050c6b4[9] = 0;
        DAT_0050c6b4[8] = 0;
        uVar1 = allocate(0x1abbc0);
        *(undefined_32 *)(DAT_0050c6b0 + 0x78) = uVar1;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x80) = 0;
        puVar3 = *(undefined_32 **)(DAT_0050c6b0 + 0x78);
        *puVar3 = DAT_004c3c20;
        *(undefined_8 *)(puVar3 + 1) = DAT_004c3c24;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x8c) = 0;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x98) = 0;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x94) = 0;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x90) = 0;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x84) = 1;
        *(undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0x88) = -1;
        puVar3 = &DAT_004af880;
        puVar4 = (undefined_32 *)(*(int *)(DAT_0050c6b0 + 0x78) + 0xc0);
        QMEMCPY(iVar2, puVar3, puVar4, 0xc)
    }
    *(undefined_32 *)(DAT_0050c6b0 + 0x74) = 1;
    FUN_00408f70(DAT_0050c6b0);
    DAT_0050c6e0 = 0;
    FUN_0044dae0(*(undefined_32 *)(param_1 + 0x168));
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044e000(undefined_32 *param_1)

{
    undefined_32 uVar1;
    undefined_16 extraout_var;
    undefined_16 extraout_var_00;
    int iVar2;
    undefined_16 extraout_var_01;
    undefined_16 extraout_var_02;
    undefined_16 extraout_var_03;
    undefined_32 *puVar3;
    undefined_32 *puVar4;

    puVar3 = &DAT_004c3bd0;
    puVar4 = &DAT_00e37540;
    QMEMCPY(iVar2, puVar3, puVar4, 0xd)
    _DAT_00e67c00 = -1;
    _DAT_00e67c08 = -1;
    _DAT_00e37528 = -1;
    _DAT_00e37524 = 0;
    _DAT_00e374c4 = 0;
    uVar1 = *param_1;
    if (((byte)DAT_00e996dc & 0x40) == 0)
    {
        FUN_004094e0(1);
        FUN_00409380(CONCAT22(extraout_var_01, DAT_004c3b90), CONCAT22(extraout_var, DAT_004c3b94));
        FUN_00409450(CONCAT22(extraout_var_03, DAT_004c3b88), CONCAT22(extraout_var_02, DAT_004c3b8a),
                     CONCAT22(extraout_var_00, DAT_004c3b8c), CONCAT22(extraout_var_03, DAT_004c3b8e));
        FUN_00409510(0, 1);
        *param_1 = uVar1;
        return;
    }
    FUN_004094e0(0);
    FUN_00409510(0, 1);
    *param_1 = uVar1;
    return;
}

void FUN_0044e0c0(int param_1)

{
    if (param_1 != 0)
    {
        DAT_00e996dc = DAT_00e996dc & 0xffffffbf;
        return;
    }
    DAT_00e996dc = DAT_00e996dc | 0x40;
    return;
}

void FUN_0044e0e0(int param_1, int param_2, int param_3, int param_4, int param_5, int param_6)

{
    if (-1 < param_1)
    {
        DAT_004c3b90 = (undefined_16)param_1;
    }
    if (-1 < param_2)
    {
        DAT_004c3b94 = (undefined_16)param_2;
    }
    if (-1 < param_3)
    {
        DAT_004c3b88 = (undefined_16)param_3;
    }
    if (-1 < param_4)
    {
        DAT_004c3b8a = (undefined_16)param_4;
    }
    if (-1 < param_5)
    {
        DAT_004c3b8c = (undefined_16)param_5;
    }
    if (-1 < param_6)
    {
        DAT_004c3b8e = (undefined_16)param_6;
    }
    return;
}

void __fastcall FUN_0044e140(undefined_32 param_1_00, uint param_2_00, ushort *param_1, ushort *param_2, short *param_3)

{
    param_2_00 = param_2_00 & 0xffff0000;
    FUN_00409600(0, (uint)param_1 & 0xffff0000 | (uint)*param_1, param_2_00 | param_1[1], param_1[2],
                 (uint)param_2 & 0xffff0000 | (uint)*param_2, param_2_00 | param_2[1], param_2[2],
                 (uint)param_3 & 0xffff0000 | (uint)(ushort) - *param_3, param_2_00 | (ushort)-param_3[1], -param_3[2]);
    return;
}

void __fastcall FUN_0044e190(undefined_32 param_1_00, uint param_2_00, int param_1, ushort *param_2, ushort *param_3,
                             short *param_4)

{
    if ((-1 < param_1) && (param_1 < 0xc))
    {
        param_2_00 = param_2_00 & 0xffff0000;
        FUN_00409600(param_1 + 1, (uint)param_2 & 0xffff0000 | (uint)*param_2, param_2_00 | param_2[1],
                     param_2_00 | param_2[2], (uint)param_3 & 0xffff0000 | (uint)*param_3, param_2_00 | param_3[1],
                     param_2_00 | param_3[2], (uint)param_4 & 0xffff0000 | (uint)(ushort) - *param_4,
                     param_2_00 | (ushort)-param_4[1], param_2_00 | (ushort)-param_4[2]);
    }
    return;
}

void FUN_0044e1f0(int param_1)

{
    if ((-1 < param_1) && (param_1 < 0xc))
    {
        FUN_00409700(param_1 + 1);
        *(undefined_32 *)(&DAT_004c3ba0 + param_1 * 4) = 1;
    }
    return;
}

void FUN_0044e290(undefined_32 param_1, undefined_32 param_2, uint param_3, uint param_4, uint param_5, uint param_6)

{
    DAT_00e37530 = (float)(param_3 & 0xff) * 0.003921569;
    DAT_00e37534 = (float)(param_4 & 0xff) * 0.003921569;
    DAT_00e37538 = (float)(param_5 & 0xff) * 0.003921569;
    DAT_00e3753c = (float)(param_6 & 0xff) * 0.003921569;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044e320(undefined_32 *param_1)

{
    undefined_32 *puVar1;
    undefined_32 *puVar2;
    int iVar3;
    undefined_32 *puVar4;
    int iVar5;
    int iVar6;
    int local_8;
    int local_4;

    puVar1 = param_1;
    puVar4 = param_1;
    MEMSET(iVar3, puVar4, 0, 0x3f5)
    iVar3 = 0;
    *(undefined_8 *)(param_1 + 1) = 1;
    *(undefined_8 *)((int)param_1 + 5) = 0xe1;
    *(undefined_8 *)((int)param_1 + 6) = 200;
    *(undefined_8 *)((int)param_1 + 7) = 0;
    param_1[2] = 3;
    _DAT_0050c75c = 0;
    FUN_00426910();
    param_1[4] = 0x22e01;
    *(undefined_8 *)(param_1 + 3) = 7;
    *(undefined_8 *)((int)param_1 + 0xd) = 3;
    *(undefined_8 *)((int)param_1 + 0xe) = 1;
    *(undefined_8 *)((int)param_1 + 0xf) = 0;
    param_1 = NULL;
    puVar4 = puVar1 + 0x87;
    puVar2 = puVar1 + 0x249;
    local_4 = 0x19;
    do
    {
        iVar6 = 0;
        local_8 = 2;
        do
        {
            puVar4[-0x32] = 0x4560ffd7;
            *puVar4 = 0x4560ffd7;
            iVar5 = 0x20;
            do
            {
                *(undefined_8 *)(puVar2 + -400) = 0x41;
                *(undefined_8 *)puVar2 = 0x41;
                puVar2 = (undefined_32 *)((int)puVar2 + 1);
                iVar5 = iVar5 + -1;
            } while (iVar5 != 0);
            iVar6 = iVar6 + 1;
            puVar4 = puVar4 + 1;
            *(undefined_8 *)((int)puVar1 + iVar6 + iVar3 * 2 + 0xf63) = (&DAT_004bfef2)[(int)param_1];
            *(undefined_8 *)((int)puVar1 + iVar6 + iVar3 * 2 + 0xf95) = (&DAT_004bfef2)[(int)param_1];
            local_8 = local_8 + -1;
        } while (local_8 != 0);
        iVar3 = iVar3 + 1;
        param_1 = (undefined_32 *)((int)param_1 + 0xc);
        local_4 = local_4 + -1;
    } while (local_4 != 0);
    iVar3 = 0;
    iVar6 = 4;
    do
    {
        FUN_0043ea00(1, iVar3);
        iVar3 = iVar3 + 1;
        iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
    DAT_00e364a0 = FUN_0044e440(&DAT_00e364a0);
    return;
}

void FUN_0044e440(int param_1)

{
    FUN_0044e460(param_1 + 4, 0xfd0);
    return;
}

uint FUN_0044e460(byte *param_1, int param_2)

{
    uint uVar1;

    if (DAT_00e360a4 == 0)
    {
        FUN_0044e4a0();
    }
    uVar1 = -1;
    if (0 < param_2)
    {
        do
        {
            uVar1 = uVar1 << 8 ^ (&DAT_00e360a0)[uVar1 >> 0x18 ^ (uint)*param_1];
            param_1 = param_1 + 1;
            param_2 = param_2 + -1;
        } while (param_2 != 0);
    }
    return ~uVar1;
}

void FUN_0044e4a0(void)

{
    uint uVar1;
    uint *puVar2;
    int iVar3;
    int iVar4;

    iVar3 = 0;
    puVar2 = &DAT_00e360a0;
    do
    {
        iVar4 = 8;
        uVar1 = iVar3 << 0x18;
        do
        {
            if ((uVar1 & 0x80000000) == 0)
            {
                uVar1 = uVar1 << 1;
            }
            else
            {
                uVar1 = uVar1 * 2 ^ 0x4c11db7;
            }
            iVar4 = iVar4 + -1;
        } while (iVar4 != 0);
        *puVar2 = uVar1;
        puVar2 = puVar2 + 1;
        iVar3 = iVar3 + 1;
    } while ((int)puVar2 < 0xe364a0);
    return;
}

void FUN_0044e4e0(void)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;

    puVar2 = &DAT_00e364a0;
    puVar3 = &DAT_00e34a80;
    QMEMCPY(iVar1, puVar2, puVar3, 0x3f5)
    return;
}

void FUN_0044e500(int param_1, int param_2)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;

    puVar2 = &DAT_00e364b4 + param_2 * 0x14;
    puVar3 = (undefined_32 *)(&DAT_00e35a60 + param_1 * 0x50);
    QMEMCPY(iVar1, puVar2, puVar3, 0x14)
    return;
}

void FUN_0044e530(int param_1, int param_2)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;

    puVar2 = (undefined_32 *)(&DAT_00e35a60 + param_2 * 0x50);
    puVar3 = &DAT_00e364b4 + param_1 * 0x14;
    QMEMCPY(iVar1, puVar2, puVar3, 0x14)
    return;
}

void FUN_0044e560(void)

{
    if (DAT_00e35a81 == '\x01')
    {
        FUN_0044e530((int)DAT_00e35a82, 0);
    }
    FUN_0044e530(0, 0);
    FUN_00421c90();
    FUN_004219d0(&DAT_00e364b4);
    return;
}

void FUN_0044e5a0(int param_1, int param_2, undefined_32 *param_3)

{
    param_2 = param_2 * 0x54;
    *param_3 = *(undefined_32 *)(*(int *)(param_1 + 0xc) + 0x10 + param_2);
    param_3[1] = *(undefined_32 *)(*(int *)(param_1 + 0xc) + 0x14 + param_2);
    param_3[2] = *(undefined_32 *)(*(int *)(param_1 + 0xc) + 0x18 + param_2);
    return;
}

int FUN_0044e5e0(int param_1, int param_2, int param_3)

{
    short *psVar1;

    if (param_3 < *(int *)(param_1 + 4))
    {
        psVar1 = (short *)(*(int *)(param_1 + 0xc) + 0x40 + param_3 * 0x54);
        do
        {
            if (*psVar1 == param_2)
            {
                return param_3;
            }
            param_3 = param_3 + 1;
            psVar1 = psVar1 + 0x2a;
        } while (param_3 < *(int *)(param_1 + 4));
    }
    return -1;
}

int FUN_0044e620(int *param_1, int param_2)

{
    int iVar1;

    iVar1 = param_1[0xb];
    if (iVar1 == 0)
    {
        return param_1[param_2 + 4];
    }
    if (param_2 != 0)
    {
        iVar1 = iVar1 >> ((byte)param_2 & 0x1f);
    }
    return (int)*(short *)(*(int *)(*param_1 + 0xc) + 0x42 + (iVar1 + param_1[param_2 + 4] * 0x2a) * 2);
}

void FUN_0044e660(short *param_1, byte param_2, float param_3, int *param_4, float *param_5)

{
    float *pfVar1;
    float *pfVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    float *pfVar6;
    float *pfVar7;
    float *pfVar8;
    float *pfVar9;
    undefined_8 *puVar10;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    undefined_32 local_4;

    local_8 = param_3;
    local_c = param_3 * param_3;
    local_4 = 1.0f;
    local_10 = local_c * param_3;
    if (*param_1 == 0)
    {
        FUN_00430ab0(&local_20, &local_10, &DAT_004c3c38);
        iVar4 = *(int *)(param_1 + 6);
        pfVar9 = (float *)(iVar4 + 0x10 + *param_4 * 0x54);
        pfVar8 = (float *)(iVar4 + 0x10 + param_4[1] * 0x54);
        pfVar7 = (float *)(iVar4 + 0x10 + param_4[2] * 0x54);
        pfVar6 = (float *)(iVar4 + 0x10 + param_4[3] * 0x54);
    }
    else
    {
        FUN_00430ab0(&local_20, &local_10, &DAT_004c3cf8);
        iVar4 = *(int *)(param_1 + 6) + *param_4 * 0x54;
        pfVar9 = (float *)(iVar4 + 0x10);
        pfVar8 = (float *)(iVar4 + 0x34);
        iVar4 = *(int *)(param_1 + 6) + param_4[1] * 0x54;
        pfVar7 = (float *)(iVar4 + 0x28);
        pfVar6 = (float *)(iVar4 + 0x10);
    }
    if ((param_2 & 1) != 0)
    {
        *param_5 = *pfVar9 * local_20 + *pfVar7 * local_18 + *pfVar8 * local_1c + *pfVar6 * local_14;
        param_5[1] = pfVar8[1] * local_1c + pfVar7[1] * local_18 + pfVar9[1] * local_20 + pfVar6[1] * local_14;
        param_5[2] = pfVar8[2] * local_1c + pfVar7[2] * local_18 + pfVar9[2] * local_20 + pfVar6[2] * local_14;
    }
    if ((param_2 & 8) != 0)
    {
        if (*param_1 == 1)
        {
            param_5[0xb] = 1.0;
            param_5[9] = 0.0;
            param_5[10] = 0.0;
        }
        else
        {
            iVar5 = *(int *)(param_1 + 6);
            pfVar1 = (float *)(iVar5 + 0x1c + *param_4 * 0x54);
            pfVar2 = (float *)(iVar5 + 0x1c + param_4[1] * 0x54);
            iVar4 = iVar5 + 0x1c + param_4[2] * 0x54;
            iVar3 = iVar5 + 0x1c + param_4[3] * 0x54;
            param_5[9] = *(float *)(iVar5 + 0x1c + param_4[3] * 0x54) * local_14 + *pfVar1 * local_20
                + *(float *)(iVar5 + 0x1c + param_4[2] * 0x54) * local_18 + *pfVar2 * local_1c;
            param_5[10] = pfVar2[1] * local_1c + *(float *)(iVar4 + 4) * local_18 + pfVar1[1] * local_20
                + *(float *)(iVar3 + 4) * local_14;
            param_5[0xb] = *(float *)(iVar3 + 8) * local_14 + pfVar2[2] * local_1c + *(float *)(iVar4 + 8) * local_18
                + pfVar1[2] * local_20;
        }
    }
    if ((param_2 & 2) != 0)
    {
        if (*param_1 == 0)
        {
            puVar10 = &DAT_004c3c78;
        }
        else
        {
            puVar10 = &DAT_004c3d38;
        }
        FUN_00430ab0(&local_20, &local_10, puVar10);
        param_5[3] = *pfVar9 * local_20 + *pfVar7 * local_18 + *pfVar8 * local_1c + *pfVar6 * local_14;
        param_5[4] = pfVar8[1] * local_1c + pfVar7[1] * local_18 + pfVar9[1] * local_20 + pfVar6[1] * local_14;
        param_5[5] = pfVar8[2] * local_1c + pfVar7[2] * local_18 + pfVar9[2] * local_20 + pfVar6[2] * local_14;
    }
    if ((param_2 & 4) != 0)
    {
        if (*param_1 == 0)
        {
            puVar10 = &DAT_004c3cb8;
        }
        else
        {
            puVar10 = &DAT_004c3d78;
        }
        FUN_00430ab0(&local_20, &local_10, puVar10);
        param_5[6] = *pfVar9 * local_20 + *pfVar7 * local_18 + *pfVar8 * local_1c + *pfVar6 * local_14;
        param_5[7] = pfVar8[1] * local_1c + pfVar7[1] * local_18 + pfVar9[1] * local_20 + pfVar6[1] * local_14;
        param_5[8] = pfVar8[2] * local_1c + pfVar7[2] * local_18 + pfVar9[2] * local_20 + pfVar6[2] * local_14;
    }
    return;
}

void FUN_0044eaa0(short *param_1, int param_2, int param_3)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    uint uVar4;
    short sVar5;
    int iVar6;
    uint uVar7;

    if ((short)param_2 == 1)
    {
        *(undefined_32 *)(param_3 + 0x24) = 0;
        if (*(int *)(param_3 + 0x20) == 0)
        {
            if (*param_1 == 0)
            {
                iVar6 = *(int *)(param_3 + 0x1c);
            }
            else
            {
                iVar6 = *(int *)(param_3 + 0x14);
            }
            sVar5 = *(short *)(*(int *)(param_1 + 6) + iVar6 * 0x54);
            if (sVar5 == 0)
            {
                param_2 = -1;
                *(undefined_32 *)(param_3 + 0x20) = 1;
                *(undefined_32 *)(param_3 + 8) = 1.0f;
            }
            else
            {
                if (*(int *)(param_3 + 0x28) < (int)sVar5)
                {
                    sVar5 = *(short *)(param_3 + 0x28);
                }
                else
                {
                    sVar5 = (short)(*(int *)(param_3 + 0x28) % (int)sVar5);
                }
                uVar4 = (uint)sVar5;
                param_2 = (int)*(short *)(*(int *)(param_1 + 6) + iVar6 * 0x54 + 4 + uVar4 * 2);
                uVar7 = *(int *)(param_3 + 0x2c) >> 1;
                if (*param_1 == 0)
                {
                    *(uint *)(param_3 + 0x2c) = uVar7 | uVar4 << 2;
                }
                else
                {
                    *(uint *)(param_3 + 0x2c) = uVar7 | uVar4;
                }
            }
        }
        if (*(int *)(param_3 + 0x20) == 0)
        {
            *(undefined_32 *)(param_3 + 0x10) = *(undefined_32 *)(param_3 + 0x14);
            if (*param_1 != 0)
            {
                *(int *)(param_3 + 0x14) = param_2;
                return;
            }
            *(undefined_32 *)(param_3 + 0x14) = *(undefined_32 *)(param_3 + 0x18);
            *(undefined_32 *)(param_3 + 0x18) = *(undefined_32 *)(param_3 + 0x1c);
            *(int *)(param_3 + 0x1c) = param_2;
            return;
        }
    }
    else
    {
        *(undefined_32 *)(param_3 + 0x20) = 0;
        if (*(int *)(param_3 + 0x24) == 0)
        {
            iVar1 = *(int *)(param_3 + 0x10);
            iVar6 = *(int *)(param_1 + 6) + iVar1 * 0x54;
            sVar5 = *(short *)(*(int *)(param_1 + 6) + 2 + iVar1 * 0x54);
            if (sVar5 == 0)
            {
                param_2 = -1;
                *(undefined_32 *)(param_3 + 0x24) = 1;
                *(undefined_32 *)(param_3 + 8) = 0;
            }
            else
            {
                iVar2 = *(int *)(param_3 + 0x28);
                if (iVar2 < sVar5)
                {
                    sVar5 = *(short *)(iVar6 + 8 + iVar2 * 2);
                }
                else
                {
                    sVar5 = *(short *)(iVar6 + 8 + (iVar2 % (int)sVar5) * 2);
                }
                param_2 = (int)sVar5;
                if (*param_1 == 0)
                {
                    *(uint *)(param_3 + 0x2c) = (*(uint *)(param_3 + 0x2c) & 3) << 1;
                }
                else
                {
                    *(undefined_32 *)(param_3 + 0x2c) = 0;
                }
                if (iVar1 != *(short *)(*(int *)(param_1 + 6) + 4 + param_2 * 0x54))
                {
                    *(uint *)(param_3 + 0x2c) = *(uint *)(param_3 + 0x2c) | 1;
                }
            }
        }
        if (*(int *)(param_3 + 0x24) == 0)
        {
            if (*param_1 == 0)
            {
                *(undefined_32 *)(param_3 + 0x1c) = *(undefined_32 *)(param_3 + 0x18);
                *(undefined_32 *)(param_3 + 0x18) = *(undefined_32 *)(param_3 + 0x14);
            }
            uVar3 = *(undefined_32 *)(param_3 + 0x10);
            *(int *)(param_3 + 0x10) = param_2;
            *(undefined_32 *)(param_3 + 0x14) = uVar3;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044ec40(undefined_32 *param_1, int param_2)

{
    float fVar1;
    float10 fVar2;

    if (((0.0 < (float)param_1[1]) && (param_1[8] == 0)) || (((float)param_1[1] < 0.0 && (param_1[9] == 0))))
    {
        fVar1 = (float)param_1[1] * (float)_DAT_00e22a40;
        param_1[2] = fVar1 + (float)param_1[2];
        if (0.0 <= fVar1)
        {
            if (0.0 < fVar1)
            {
                param_1[9] = 0;
            }
        }
        else
        {
            param_1[8] = 0;
        }
    }
    fVar1 = (float)param_1[2];
    while ((1.0 <= fVar1 && (param_1[8] == 0)))
    {
        param_1[2] = (float)param_1[2] - 1.0;
        FUN_0044eaa0(*param_1, 1, param_1);
        fVar1 = (float)param_1[2];
    }
    fVar1 = (float)param_1[2];
    while ((fVar1 < 0.0 && (param_1[9] == 0)))
    {
        param_1[2] = (float)param_1[2] - -1.0;
        FUN_0044eaa0(*param_1, 2, param_1);
        fVar1 = (float)param_1[2];
    }
    if ((float)param_1[2] < 0.0)
    {
        param_1[2] = 0;
    }
    if (1.0 < (float)param_1[2])
    {
        param_1[2] = 1.0f;
    }
    FUN_0044e660(*param_1, 0xb, param_1[2], param_1 + 4, param_2);
    fVar2 = (float10)rdVector_Len3(param_2 + 0xc);
    param_1[3] = (float)fVar2;
    return;
}

void FUN_0044ed80(undefined_32 *param_1, int param_2)

{
    float10 fVar1;
    undefined_32 uVar2;
    undefined_8 local_54[12];
    undefined_8 local_48[12];
    undefined_8 local_3c[12];
    undefined_8 local_30[12];
    undefined_8 local_24[24];
    undefined_8 local_c[12];

    FUN_0044ec40(param_1, local_30);
    fVar1 = (float10)rdVector_Len3(local_24);
    if (fVar1 < (float10)0.0001)
    {
        if (0.5 <= (float)param_1[2])
        {
            uVar2 = 0x3f7fbe77;
        }
        else
        {
            uVar2 = 0.001f;
        }
        FUN_0044e660(*param_1, 2, uVar2, param_1 + 4, local_30);
    }
    rdVector_Cross3(local_54, local_24, local_c);
    rdVector_Cross3(local_48, local_54, local_24);
    rdVector_Normalize3(local_54);
    rdVector_Normalize3(local_48);
    rdVector_Normalize3(local_24);
    *(undefined_32 *)(param_2 + 0xc) = 0;
    *(undefined_32 *)(param_2 + 0x1c) = 0;
    *(undefined_32 *)(param_2 + 0x2c) = 0;
    *(undefined_32 *)(param_2 + 0x3c) = 1.0f;
    FUN_0042fb10(param_2, 0, local_54);
    FUN_0042fb10(param_2, 1, local_24);
    FUN_0042fb10(param_2, 2, local_48);
    FUN_0042fb40(param_2, 3, local_3c);
    FUN_0042fb10(param_2, 3, local_30);
    return;
}

void FUN_0044eeb0(float *param_1, undefined_32 param_2, float param_3)

{
    int iVar1;
    float *pfVar2;
    float local_30[12];

    pfVar2 = local_30;
    QMEMCPY(iVar1, param_1, pfVar2, 0xc)
    local_30[2] = local_30[2] + param_3;
    local_30[1] = 0.0;
    FUN_0044ed80(local_30, param_2);
    return;
}

void FUN_0044eef0(short **param_1, short *param_2)

{
    short *psVar1;
    short *psVar2;

    psVar1 = *param_1;
    param_1[4] = param_2;
    param_1[5] = param_2;
    param_1[6] = param_2;
    param_1[7] = param_2;
    if (*(short *)(*(int *)(psVar1 + 6) + (int)param_2 * 0x54) != 0)
    {
        psVar2 = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + (int)param_2 * 0x54 + 4);
        param_1[5] = psVar2;
        if ((*psVar1 == 0) && (*(short *)(*(int *)(psVar1 + 6) + (int)psVar2 * 0x54) != 0))
        {
            psVar2 = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + (int)psVar2 * 0x54 + 4);
            param_1[6] = psVar2;
            if (*(short *)(*(int *)(psVar1 + 6) + (int)psVar2 * 0x54) != 0)
            {
                param_1[7] = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + (int)psVar2 * 0x54 + 4);
            }
        }
    }
    return;
}

void FUN_0044ef70(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    DAT_0050c73c = param_1;
    DAT_0050c734 = param_3;
    DAT_0050c740 = param_2;
    DAT_0050c738 = param_4;
    return;
}

void FUN_0044efa0(undefined_32 param_1, int param_2, int param_3, int param_4, int param_5)

{
    uint uVar1;
    float param_10;
    float param_11;

    uVar1 = __ftol(((float)param_4 - (float)(param_5 + param_4) * 0.5) * param_10,
                   ((float)param_2 - (float)(param_3 + param_2) * 0.5) * param_11);
    uVar1 = __ftol(uVar1 & 0xffff0000 | (uint)(ushort)((short)uVar1 >> 2));
    uVar1 = __ftol(uVar1 & 0xffff0000 | (uint)(ushort)((short)uVar1 >> 2));
    uVar1 = __ftol(uVar1 & 0xffff0000 | (uint)(ushort)((short)uVar1 >> 2));
    uVar1 = __ftol(uVar1 & 0xffff0000 | (uint)(ushort)((short)uVar1 >> 2));
    uVar1 = __ftol(uVar1 & 0xffff0000 | (uint)(ushort)((short)uVar1 >> 2));
    uVar1 = __ftol(uVar1 & 0xffff0000 | (uint)(ushort)((short)uVar1 >> 2));
    uVar1 = __ftol(uVar1 & 0xffff0000 | (uint)(ushort)((short)uVar1 >> 2));
    FUN_004327e0(uVar1 & 0xffff0000 | (uint)(ushort)((short)uVar1 >> 2));
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044f160(undefined_32 *param_1, int param_2, short *param_3, float param_4, float param_5, float param_6,
                  float param_7, int param_8, int param_9, undefined_32 param_10, undefined_32 param_11_00,
                  int param_11, int param_12, uint param_13, short param_14, undefined_32 param_15,
                  undefined_32 param_16, uint param_17)

{
    float fVar1;
    float fVar2;
    uint uVar3;
    int iVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    int iVar10;
    bool bVar11;
    bool bVar12;
    float10 fVar13;
    float10 extraout_ST0;
    undefined_32 local_20;
    float local_1c;
    float local_18;
    float local_14;
    uint local_10;
    int local_c;
    uint local_8;
    uint local_4;

    iVar8 = DAT_0050c734;
    local_c = (int)*(short *)(param_2 + 0xe);
    uVar6 = param_13;
    switch (*(undefined_8 *)(param_2 + 5))
    {
    case 0:
        uVar6 = 0xf;
        break;
    case 1:
        uVar6 = 7;
        break;
    case 2:
        uVar6 = 3;
        break;
    case 3:
        uVar6 = 1;
    }
    local_10 = (int)*param_3 + uVar6 & ~uVar6;
    local_8 = param_17 & 0x40;
    if (local_8 != 0)
    {
        DAT_0050c740 = DAT_0050c740 * 2;
        DAT_0050c738 = DAT_0050c738 * 2;
    }
    iVar10 = DAT_0050c740;
    local_18 = (float)DAT_0050c740;
    local_20 = *param_1;
    if ((((param_4 < local_18) && (local_14 = (float)DAT_0050c738, param_5 < local_14))
         && (local_1c = (float)DAT_0050c73c, local_1c <= param_6))
        && (fVar13 = (float10)DAT_0050c734, fVar13 <= (float10)param_7))
    {
        local_4 = param_17 & 0x400000;
        if (local_4 != 0)
        {
            if (param_8 < DAT_0050c73c)
            {
                param_8 = DAT_0050c73c * 4;
            }
            if (DAT_0050c740 < param_8)
            {
                param_8 = DAT_0050c740 * 4;
            }
            if (param_9 < DAT_0050c734)
            {
                param_9 = DAT_0050c734 * 4;
            }
            if (DAT_0050c738 < param_9)
            {
                param_9 = DAT_0050c738 * 4;
            }
            iVar5 = param_8 << 2;
            param_8 = param_9 << 2;
            param_9 = iVar5;
        }
        if (local_1c <= param_4)
        {
            iVar5 = __ftol();
            fVar13 = extraout_ST0;
        }
        else
        {
            iVar5 = DAT_0050c73c * 4;
        }
        if (fVar13 <= (float10)param_5)
        {
            iVar8 = __ftol();
        }
        else
        {
            iVar8 = iVar8 << 2;
        }
        if (param_6 < local_18)
        {
            iVar10 = __ftol();
        }
        else
        {
            iVar10 = iVar10 * 4;
        }
        if (param_7 < local_14)
        {
            iVar9 = __ftol();
        }
        else
        {
            iVar9 = DAT_0050c738 * 4;
        }
        if ((param_17 & 0x1000000) == 0)
        {
            uVar6 = ~param_17 >> 0x19 & 2;
        }
        else
        {
            uVar6 = 0;
        }
        if ((param_17 & 0x2000000) == 0)
        {
            uVar3 = ~param_17 >> 0x1a & 2;
        }
        else
        {
            uVar3 = 0;
        }
        if (*(int *)(param_3 + 2) != _DAT_0050c744)
        {
            FUN_00432190(*(int *)(param_3 + 2), uVar6 == 2, uVar3 == 2);
            _DAT_0050c744 = *(int *)(param_3 + 2);
        }
        if ((param_17 & 0xc00000) == 0)
        {
            iVar7 = iVar5 - iVar10;
            iVar4 = iVar8 - iVar9;
            if (iVar7 < 0)
            {
                iVar7 = -iVar7;
            }
            if (iVar4 < 0)
            {
                iVar4 = -iVar4;
            }
            fVar1 = (float)(iVar7 >> 2) * (float)param_11 * 0.0009765625 - 0.5;
            fVar2 = (float)(iVar4 >> 2) * (float)param_12 * 0.0009765625 - 0.5;
            if (local_8 == 0)
            {
                iVar10 = iVar10 >> 2;
                iVar9 = iVar9 >> 2;
                iVar5 = iVar5 >> 2;
                iVar8 = iVar8 >> 2;
            }
            else
            {
                iVar10 = iVar10 >> 3;
                iVar9 = iVar9 >> 3;
                iVar5 = iVar5 >> 3;
                iVar8 = iVar8 >> 3;
            }
            bVar11 = (param_17 & 0x10000000) != 0;
            bVar12 = (param_17 & 0x10) != 0;
            iVar7 = iVar5;
            if ((short)param_13 != 0)
            {
                iVar7 = iVar10;
                iVar10 = iVar5;
            }
            iVar5 = iVar8;
            if (param_14 == 0)
            {
                iVar5 = iVar9;
                iVar9 = iVar8;
            }
            if ((param_2 == DAT_0050c9fc) || (param_2 == DAT_0050ca00))
            {
                FUN_004321b0(iVar10, iVar9, iVar7, iVar5, fVar1, fVar2, bVar11, bVar12, param_2);
            }
            else
            {
                FUN_004325b0(iVar10, iVar9, iVar7, iVar5, fVar1, fVar2, bVar11, bVar12);
            }
        }
        else
        {
            iVar7 = 0;
            if ((short)param_13 == 0)
            {
                param_13 = local_10 << 6;
                param_17 = 0;
            }
            else
            {
                param_13 = 0;
                param_17 = local_10 << 6;
            }
            if (param_14 == 0)
            {
                iVar4 = 0;
                iVar7 = local_c << 6;
            }
            else
            {
                iVar4 = local_c << 6;
            }
            if (local_4 == 0)
            {
                FUN_0044efa0(&local_20, iVar5, iVar10, iVar8, iVar9, param_17, param_13, iVar4, iVar7, param_15,
                             param_16);
            }
            else
            {
                FUN_00426910(&local_20, iVar5, iVar10, iVar8, iVar9, param_9, param_8, param_17, param_13, iVar4,
                             iVar7);
            }
        }
    }
    *param_1 = local_20;
    if (local_8 != 0)
    {
        DAT_0050c740 = DAT_0050c740 / 2;
        DAT_0050c738 = DAT_0050c738 / 2;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044f5f0(void)

{
    FUN_00426910();
    _DAT_0050c744 = 0;
    return;
}

void FUN_0044f600(void)

{
    FUN_0044f5f0();
    FUN_0044ef70(0, DAT_00ec86c4 + -1, 0, DAT_00ec85e8 + -1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044f630(uint param_1)

{
    _DAT_004c3db8 = param_1 & 0xffff;
    return;
}

void FUN_0044f640(float *param_1, float *param_2)

{
    *param_1 = (float)DAT_00ec86c4 * 0.003125;
    *param_2 = (float)DAT_00ec85e8 * 0.004166667;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044f670(short *param_1, short param_2, int param_3, float param_4, float param_5, int param_6, short param_7,
                  short param_8, uint param_9, undefined_32 param_10, int param_11, float param_12, int param_13)

{
    float fVar1;
    undefined_32 uVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    short local_48;
    short *local_40;
    float local_3c;
    float local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    float local_24;
    float local_20;
    int local_1c;
    undefined_32 local_18;
    uint local_14;
    uint local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_8 local_4[4];

    if ((((param_9 & 8) == 0) && (1e-05 < param_4)) && (1e-05 < param_5))
    {
        if ((param_4 == 1.0) && (param_5 == 1.0))
        {
            param_9 = param_9 | 0x20;
        }
        else
        {
            param_9 = param_9 & 0xffffffdf;
        }
        if (param_1 != NULL)
        {
            local_40 = *(short **)(param_1 + 8);
            if ((param_9 & 0x800000) == 0)
            {
                local_30 = 0;
                local_34 = 1.0f;
            }
            else
            {
                sin_cos(param_6, &local_30, &local_34);
            }
            if ((param_9 & 0x20000) == 0)
            {
                local_38 = 0.0;
                local_3c = 0.0;
            }
            else
            {
                local_1c = (int)param_1[1];
                local_38 = (float)(int)*param_1 * 0.5 * param_4;
                local_3c = (float)local_1c * 0.5 * param_5;
            }
            _DAT_0050c748 = param_9;
            FUN_0044e290(0, 0, param_10, param_11, param_12, param_13);
            uVar2 = __ftol();
            local_8 = uVar2;
            local_18 = __ftol();
            local_10 = param_9 & 0x5000000;
            local_28 = 0x400;
            if (local_10 == 0)
            {
                local_28 = uVar2;
            }
            local_14 = param_9 & 0xa000000;
            local_2c = 0x400;
            if (local_14 == 0)
            {
                local_2c = local_18;
            }
            if (local_40 != NULL)
            {
                iVar6 = -1;
                iVar5 = -1;
                param_11 = -1;
                param_13 = 9000;
                param_6 = 9000;
                local_1c = 0;
                iVar7 = param_3;
                if (0 < param_1[6])
                {
                    while (0 < *local_40)
                    {
                        local_48 = (short)(param_9 & 0x2000);
                        iVar4 = (int)*local_40;
                        if (local_48 == 0)
                        {
                            param_13 = iVar6 + iVar4;
                        }
                        else
                        {
                            iVar6 = param_13 - iVar4;
                            param_11 = iVar6;
                        }
                        if ((iVar6 < 0) || (fVar1 = param_12, *param_1 < param_13))
                        {
                            if (iVar5 == -1)
                            {
                                if ((param_9 & 0x4000) == 0)
                                {
                                    param_12 = 0.0;
                                    if (local_40[1] == 0)
                                    {
                                        param_6 = (int)param_1[7];
                                    }
                                    else
                                    {
                                        param_6 = (int)local_40[1];
                                    }
                                }
                                else
                                {
                                    param_6 = (int)param_1[1];
                                    if (local_40[1] == 0)
                                    {
                                        param_12 = (float)(param_6 - param_1[7]);
                                    }
                                    else
                                    {
                                        param_12 = (float)(param_6 - local_40[1]);
                                    }
                                }
                            }
                            else if ((param_9 & 0x4000) == 0)
                            {
                                param_12 = (float)param_6;
                                if (local_40[1] == 0)
                                {
                                    param_6 = param_6 + param_1[7];
                                }
                                else
                                {
                                    param_6 = param_6 + local_40[1];
                                }
                            }
                            else
                            {
                                param_6 = iVar5;
                                if (local_40[1] == 0)
                                {
                                    param_12 = (float)(iVar5 - param_1[7]);
                                }
                                else
                                {
                                    param_12 = (float)(iVar5 - local_40[1]);
                                }
                            }
                            if ((int)param_12 < 0)
                            {
                                return;
                            }
                            if (param_1[1] < param_6)
                            {
                                return;
                            }
                            if (local_48 == 0)
                            {
                                param_11 = 0;
                                param_13 = iVar4;
                            }
                            else
                            {
                                param_11 = *param_1 - iVar4;
                                param_13 = (int)*param_1;
                            }
                            fVar1 = (float)(int)param_12 * param_5 + ((float)(int)(short)param_3 - local_3c);
                            local_24 = (float)param_6 * param_5 + ((float)(int)(short)param_3 - local_3c);
                            __ftol();
                            iVar5 = (int)param_12;
                            iVar6 = param_11;
                            if ((param_9 & 0x4000) == 0)
                            {
                                iVar7 = ((param_6 - (int)param_12) + -1) * 0x20;
                            }
                            else
                            {
                                iVar7 = __ftol();
                                iVar7 = iVar7 + 0x10 >> 5;
                                if ((param_9 & 0x100) != 0)
                                {
                                    iVar7 = iVar7 + 0x10;
                                }
                                if (local_14 != 0)
                                {
                                    iVar4 = __ftol();
                                    iVar7 = iVar7 + iVar4;
                                }
                            }
                        }
                        param_12 = fVar1;
                        local_20 = (float)param_13 * param_4 + ((float)(int)param_2 - local_38);
                        local_c = __ftol();
                        if (local_48 == 0)
                        {
                            iVar4 = __ftol();
                            iVar4 = iVar4 + 0x10 >> 5;
                            if ((param_9 & 0x100) != 0)
                            {
                                iVar4 = iVar4 + 0x10;
                            }
                        }
                        else
                        {
                            iVar4 = ((param_13 - iVar6) + -1) * 0x20;
                            if (local_10 != 0)
                            {
                                iVar3 = __ftol();
                                iVar4 = iVar4 + iVar3;
                            }
                        }
                        if (*(int *)(local_40 + 2) != 0)
                        {
                            FUN_0044f160(local_4, param_1, local_40,
                                         (float)param_11 * param_4 + ((float)(int)param_2 - local_38), param_12,
                                         local_20, local_24, (int)param_7, (int)param_8, iVar4, iVar7, local_28,
                                         local_2c, param_9 & 0x2000, (param_9 & 0x4000) == 0, local_30, local_34,
                                         param_9);
                        }
                        if (local_48 == 0)
                        {
                            iVar6 = iVar6 + *local_40;
                            param_11 = iVar6;
                        }
                        else
                        {
                            param_13 = param_13 - *local_40;
                        }
                        local_40 = local_40 + 4;
                        local_1c = local_1c + 1;
                        if (param_1[6] <= local_1c)
                        {
                            return;
                        }
                    }
                }
            }
        }
    }
    return;
}

void FUN_0044fc00(uint *param_1)

{
    uint uVar1;
    short sVar2;

    if (param_1 != NULL)
    {
        uVar1 = param_1[2];
        *param_1 = *param_1 | 0x8000;
        if (uVar1 != 0)
        {
            sVar2 = __ftol();
            *(short *)(param_1 + 1) = sVar2;
            if (*(short *)(uVar1 + 4) < sVar2)
            {
                *(short *)(param_1 + 1) = sVar2 - *(short *)(uVar1 + 4);
            }
            if (*(short *)(param_1 + 1) < 0)
            {
                *(short *)(param_1 + 1) = *(short *)(uVar1 + 4) + *(short *)(param_1 + 1);
            }
            sVar2 = __ftol();
            *(short *)((int)param_1 + 6) = sVar2;
            if (*(short *)(uVar1 + 6) < sVar2)
            {
                *(short *)((int)param_1 + 6) = sVar2 - *(short *)(uVar1 + 6);
            }
            if (*(short *)((int)param_1 + 6) < 0)
            {
                *(short *)((int)param_1 + 6) = *(short *)(uVar1 + 6) + *(short *)((int)param_1 + 6);
            }
        }
    }
    return;
}

void FUN_0044fcc0(void)

{
    DAT_0050c764 = 0;
    DAT_0050c750 = 0;
    DAT_0050c758 = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044fce0(char *param_1, float param_2)

{
    if ((param_1 != NULL) && (0.0 < param_2))
    {
        if ((*param_1 == '~') && (param_1[1] == '_'))
        {
            DAT_0050c870 = 1;
            param_1 = param_1 + 2;
        }
        else
        {
            DAT_0050c870 = 0;
        }
        _sprintf(&DAT_0050c770, &DAT_004b2304 /* "%s" */, param_1);
        _DAT_004c3e40 = param_2;
        _DAT_004c3e44 = 1.0f;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0044fd50(void)

{
    float fVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    undefined_32 uVar4;
    undefined_32 uVar5;
    int local_8;
    undefined_32 local_4;

    if (0.0 < _DAT_004c3e40)
    {
        if (DAT_0050c770 != '\0')
        {
            if (_DAT_004c3e44 <= 0.0)
            {
                uVar5 = 0xff;
                uVar3 = 0;
                uVar2 = rand(0, 0xff);
                uVar4 = __ftol(uVar3, uVar5, uVar2);
                uVar2 = 0;
            }
            else
            {
                uVar2 = __ftol();
                uVar5 = 0xff;
                uVar4 = 0xff;
                uVar3 = uVar2;
            }
            FUN_0042d950(uVar2, uVar4, uVar3, uVar5);
            uVar3 = __ftol();
            FUN_0042d910(0x1a, uVar3);
            FUN_0042ec50(&DAT_0050c770);
            if (DAT_0050c870 != 0)
            {
                uVar3 = __ftol(0, 0xff);
                FUN_0042d950(0, uVar3);
                FUN_0042d930(&local_4, &local_8);
                FUN_0042d910(local_4, local_8 + 5);
                FUN_0042ec50(&DAT_004b3bd8);
            }
            fVar1 = (float)_DAT_00e22a40 + (float)_DAT_00e22a40;
            _DAT_0050c874 = _DAT_0050c874 - fVar1;
            _DAT_004c3e44 = _DAT_004c3e44 - fVar1;
            if (_DAT_0050c874 < 0.0)
            {
                _DAT_0050c874 = 1.0;
            }
        }
        _DAT_004c3e40 = _DAT_004c3e40 - (float)_DAT_00e22a40;
    }
    return;
}

void FUN_0044fef0(undefined_8 param_1, undefined_16 param_2, undefined_16 param_3)

{
    if (DAT_0050c764 < 0xbe)
    {
        (&DAT_00e2c080)[DAT_0050c764 * 2] = param_2;
        (&DAT_00e2c082)[DAT_0050c764 * 2] = param_3;
        (&DAT_00e345a0)[DAT_0050c764] = param_1;
        DAT_0050c764 = DAT_0050c764 + 1;
    }
    return;
}

void FUN_0044ff30(void)

{
    char cVar1;
    int iVar2;
    undefined_32 uVar3;
    char cVar4;
    short *psVar5;
    undefined_32 uVar6;
    undefined_32 uVar7;
    undefined_32 uVar8;
    char local_9;

    iVar2 = FUN_00445690();
    if (iVar2 == 0)
    {
        rand();
        rand();
    }
    if (DAT_0050c764 != 0)
    {
        FUN_0042d900(0);
        FUN_0042edc0(0x2e);
        local_9 = '.';
        uVar3 = __ftol();
        FUN_0042d950(0, 0xff, 0, uVar3);
        cVar4 = '\0';
        iVar2 = 0;
        if (0 < DAT_0050c764)
        {
            psVar5 = &DAT_00e2c080;
            do
            {
                cVar1 = (&DAT_00e345a0)[iVar2];
                if (cVar4 != cVar1)
                {
                    cVar4 = cVar1;
                    if (cVar1 == '\x01')
                    {
                        uVar3 = __ftol();
                        uVar8 = 0xff;
                        uVar7 = 0xff;
                        uVar6 = 0;
                    }
                    else if (cVar1 == '\x02')
                    {
                        uVar3 = __ftol();
                        uVar8 = 0;
                        uVar7 = 0xff;
                        uVar6 = 0xff;
                    }
                    else
                    {
                        if ((cVar1 < '\x03') && ('\x04' < cVar1))
                            goto LAB_004500be;
                        if (local_9 != 'X')
                        {
                            FUN_0042edc0(0x58);
                            local_9 = 'X';
                        }
                        if (cVar1 == '\x03')
                        {
                            uVar3 = __ftol();
                            uVar8 = 0xff;
                            uVar7 = 0;
                            uVar6 = 0;
                        }
                        else
                        {
                            uVar3 = __ftol();
                            uVar8 = 100;
                            uVar7 = 0xff;
                            uVar6 = 100;
                        }
                    }
                    FUN_0042d950(uVar6, uVar7, uVar8, uVar3);
                }
            LAB_004500be:
                FUN_0042eeb0((int)*psVar5, (int)psVar5[1], 0x70);
                iVar2 = iVar2 + 1;
                psVar5 = psVar5 + 2;
            } while (iVar2 < DAT_0050c764);
        }
        FUN_00426910();
        DAT_0050c764 = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void __fastcall FUN_00450100(uint param_1, undefined_32 *param_2)

{
    undefined_16 extraout_var;
    uint extraout_ECX;
    undefined_16 extraout_var_00;
    undefined_16 *puVar1;
    int *piVar2;
    int iVar3;
    undefined_8 *puVar4;
    undefined_32 *local_4;

    iVar3 = 0;
    if (0 < (int)DAT_0050c750)
    {
        puVar4 = &DAT_00e2c380;
        local_4 = &DAT_00e2b680;
        piVar2 = &DAT_00e2be80;
        puVar1 = &DAT_00e34860;
        do
        {
            FUN_0042d950(DAT_0050c750 & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_00e2b480)[iVar3 * 4],
                         (uint)param_2 & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_00e2b481)[iVar3 * 4],
                         param_1 & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_00e2b482)[iVar3 * 4],
                         DAT_0050c750 & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_00e2b483)[iVar3 * 4]);
            FUN_0042d910(CONCAT22(extraout_var_00, *puVar1), CONCAT22(extraout_var, (&DAT_00e34862)[iVar3 * 2]));
            if (*piVar2 != 0)
            {
                _DAT_0050c0b0 = 1;
                DAT_00e99750 = *local_4;
                DAT_00e99754 = local_4[1];
                DAT_00e99758 = local_4[2];
                DAT_00e9975c = local_4[3];
            }
            FUN_0042ec50(puVar4);
            iVar3 = iVar3 + 1;
            puVar1 = puVar1 + 2;
            piVar2 = piVar2 + 1;
            param_2 = local_4 + 4;
            puVar4 = puVar4 + 0x80;
            _DAT_0050c0b0 = 0;
            param_1 = extraout_ECX;
            local_4 = param_2;
        } while (iVar3 < (int)DAT_0050c750);
    }
    DAT_0050c750 = 0;
    return;
}

void __fastcall FUN_004501f0(uint param_1, uint param_2)

{
    undefined_16 extraout_var;
    uint extraout_ECX;
    undefined_16 extraout_var_00;
    uint extraout_EDX;
    undefined_8 *puVar1;
    int iVar2;
    undefined_16 *puVar3;

    iVar2 = 0;
    if (0 < (int)DAT_0050c758)
    {
        puVar1 = &DAT_00e303a0;
        puVar3 = &DAT_00e34660;
        do
        {
            FUN_0042d950(DAT_0050c758 & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_00e343a0)[iVar2 * 4],
                         param_2 & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_00e343a1)[iVar2 * 4],
                         param_1 & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_00e343a2)[iVar2 * 4],
                         DAT_0050c758 & 0xffff0000 | (uint)(ushort)(short)(char)(&DAT_00e343a3)[iVar2 * 4]);
            FUN_0042d910(CONCAT22(extraout_var_00, *puVar3), CONCAT22(extraout_var, (&DAT_00e34662)[iVar2 * 2]));
            FUN_0042ec50(puVar1);
            iVar2 = iVar2 + 1;
            puVar3 = puVar3 + 2;
            puVar1 = puVar1 + 0x80;
            param_1 = extraout_ECX;
            param_2 = extraout_EDX;
        } while (iVar2 < (int)DAT_0050c758);
    }
    DAT_0050c758 = 0;
    return;
}

void FUN_00450280(void)

{
    if ((DAT_0050c764 < 1) && (DAT_0050c750 < 1))
    {
        return;
    }
    FUN_0044f5f0();
    FUN_00450100();
    FUN_0044ff30();
    FUN_00426910();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004502b0(void)

{
    if ((_DAT_004c3e40 <= 0.0) && (DAT_0050c758 < 1))
    {
        return;
    }
    FUN_0044f5f0();
    FUN_0044fd50();
    FUN_004501f0();
    FUN_00426910();
    return;
}

void FUN_004502f0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00e2be80;
    MEMSET(iVar1, puVar2, 0, 0x80)
    return;
}

void FUN_00450310(int *param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;

    iVar1 = DAT_0050c750;
    if (((DAT_0050c750 < 0x80) && (DAT_0050c750 != 0)) && (param_1 != NULL))
    {
        iVar2 = *param_1 * DAT_00ec86c4;
        iVar5 = param_1[2] * DAT_00ec86c4;
        iVar4 = param_1[1] * DAT_00ec85e8;
        iVar3 = param_1[3] * DAT_00ec85e8;
        *(undefined_32 *)(&DAT_00e2be7c + DAT_0050c750 * 4) = 1;
        iVar1 = iVar1 * 0x10;
        *(int *)(&DAT_00e2b670 + iVar1) = iVar2 / 0x280;
        *(int *)(&DAT_00e2b674 + iVar1) = iVar4 / 0x1e0;
        *(int *)(&DAT_00e2b678 + iVar1) = iVar5 / 0x280;
        *(int *)(&DAT_00e2b67c + iVar1) = iVar3 / 0x1e0;
    }
    return;
}

// 004503e0
void create_text_entry(undefined_16 param_1, undefined_16 param_2, undefined_8 param_3, undefined_8 param_4,
                       undefined_8 param_5, undefined_8 param_6, undefined_32 param_7, int param_8, int param_9)

{
    if (param_9 == 0)
    {
        if (DAT_0050c750 < 0x80)
        {
            if (param_8 < 0)
            {
                _sprintf(&DAT_00e2c380 + DAT_0050c750 * 0x80, &DAT_004b2304 /* "%s" */, param_7);
            }
            else
            {
                _sprintf(&DAT_00e2c380 + DAT_0050c750 * 0x80, s__f_d_s_004c3e48, param_8, param_7);
            }
            (&DAT_00e34860)[DAT_0050c750 * 2] = param_1;
            (&DAT_00e34862)[DAT_0050c750 * 2] = param_2;
            (&DAT_00e2b480)[DAT_0050c750 * 4] = param_3;
            (&DAT_00e2b481)[DAT_0050c750 * 4] = param_4;
            (&DAT_00e2b482)[DAT_0050c750 * 4] = param_5;
            (&DAT_00e2b483)[DAT_0050c750 * 4] = param_6;
            DAT_0050c750 = DAT_0050c750 + 1;
            return;
        }
    }
    else if (DAT_0050c758 < 0x20)
    {
        if (param_8 < 0)
        {
            _sprintf(&DAT_00e303a0 + DAT_0050c758 * 0x80, &DAT_004b2304 /* "%s" */, param_7);
        }
        else
        {
            _sprintf(&DAT_00e303a0 + DAT_0050c758 * 0x80, s__f_d_s_004c3e48, param_8, param_7);
        }
        (&DAT_00e34660)[DAT_0050c758 * 2] = param_1;
        (&DAT_00e34662)[DAT_0050c758 * 2] = param_2;
        (&DAT_00e343a0)[DAT_0050c758 * 4] = param_3;
        (&DAT_00e343a1)[DAT_0050c758 * 4] = param_4;
        (&DAT_00e343a2)[DAT_0050c758 * 4] = param_5;
        (&DAT_00e343a3)[DAT_0050c758 * 4] = param_6;
        DAT_0050c758 = DAT_0050c758 + 1;
    }
    return;
}

// 00450530
void create_text_entry_0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                         undefined_32 param_5, undefined_32 param_6, undefined_32 param_7)

{
    create_text_entry(param_1, param_2, param_3, param_4, param_5, param_6, param_7, -1, 0);
    return;
}

// 00450560
void create_text_entry_1(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    create_text_entry(param_1, param_2, -1, -1, -1, -1, param_3, -1, 0);
    return;
}

// 00450590
void create_text_entry_2(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    create_text_entry(param_2, param_3, -1, -1, -1, -1, param_4, param_1, 0);
    return;
}

// 004505c0
void create_text_entry_3(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                         undefined_32 param_5, undefined_32 param_6, undefined_32 param_7)

{
    create_text_entry(param_1, param_2, param_3, param_4, param_5, param_6, param_7, -1, 1);
    return;
}

// 004505f0
void create_text_entry_4(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                         undefined_32 param_5, undefined_32 param_6, undefined_32 param_7, int param_8)

{
    undefined_32 uVar1;

    if (param_8 != 0)
    {
        uVar1 = lookup_translation(&DAT_004c3e54);
        create_text_entry_5(param_1, param_2, param_3, param_4, param_5, param_6, param_7, uVar1);
        return;
    }
    uVar1 = lookup_translation(&DAT_004c3e50);
    create_text_entry_5(param_1, param_2, param_3, param_4, param_5, param_6, param_7, uVar1);
    return;
}

// 00450670
void create_text_entry_6(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                         undefined_32 param_5, undefined_32 param_6, undefined_32 param_7, undefined_32 param_8)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_8 local_100[256];

    iVar1 = __ftol();
    iVar2 = __ftol();
    iVar3 = __ftol();
    if (iVar3 == 100)
    {
        iVar3 = 0;
        iVar2 = iVar2 + 1;
        if (iVar2 == 0x3c)
        {
            iVar1 = iVar1 + 1;
        }
    }
    if (iVar1 == 0)
    {
        _sprintf(local_100, s__s__2d___2d_004c3e5c /*"%s%.2d.%.2d"*/, param_8, iVar2, iVar3);
    }
    else
    {
        _sprintf(local_100, s__s_d___2d___2d_004c3e68 /*"%s%d:%.2d.%.2d"*/, param_8, iVar1);
    }
    create_text_entry_0(param_1, param_2, param_4, param_5, param_6, param_7, local_100);
    return;
}

// 00450760
void create_text_entry_5(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                         undefined_32 param_5, undefined_32 param_6, undefined_32 param_7, undefined_32 param_8)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_8 local_100[256];

    iVar1 = __ftol();
    iVar2 = __ftol();
    iVar3 = __ftol();
    if (iVar3 == 1000)
    {
        iVar3 = 0;
        iVar2 = iVar2 + 1;
        if (iVar2 == 0x3c)
        {
            iVar1 = iVar1 + 1;
        }
    }
    if (iVar1 == 0)
    {
        _sprintf(local_100, s__s__2d___3d_004c3e78 /*"%s%.2d.%.3d"*/, param_8, iVar2, iVar3);
    }
    else
    {
        _sprintf(local_100, s__s_d___2d___3d_004c3e84 /*"%s%d:%.2d.%.3d"*/, param_8, iVar1);
    }
    create_text_entry_0(param_1, param_2, param_4, param_5, param_6, param_7, local_100);
    return;
}

void FUN_00450850(int param_1)

{
    int **ppiVar1;
    int *piVar2;
    int iVar3;
    int *piVar4;
    short sVar5;
    undefined_8 *puVar6;

    piVar2 = *(int **)PTR_PTR_DAT_004bfec0;
    puVar6 = PTR_PTR_DAT_004bfec0;
    while (piVar2 != NULL)
    {
        if (*piVar2 == param_1)
        {
            piVar4 = (int *)piVar2[4];
            sVar5 = 0;
            if (0 < piVar2[2])
            {
                do
                {
                    iVar3 = *piVar2;
                    *(short *)(piVar4 + 1) = sVar5;
                    *piVar4 = iVar3;
                    *(undefined_16 *)((int)piVar4 + 6) = *(undefined_16 *)(piVar2 + 1);
                    piVar4 = (int *)((int)piVar4 + piVar2[3]);
                    sVar5 = sVar5 + 1;
                } while ((int)sVar5 < piVar2[2]);
            }
        }
        ppiVar1 = (int **)(puVar6 + 4);
        puVar6 = puVar6 + 4;
        piVar2 = *ppiVar1;
    }
    return;
}

void FUN_004508b0(void)

{
    int *piVar1;
    int iVar2;
    code *pcVar3;
    undefined_8 *puVar4;
    short sVar5;
    int iVar6;

    iVar2 = *(int *)PTR_PTR_DAT_004bfec0;
    puVar4 = PTR_PTR_DAT_004bfec0;
    while (iVar2 != 0)
    {
        pcVar3 = *(code **)(iVar2 + 0x14);
        if ((pcVar3 != (code *)0x0) && ((*(uint *)(iVar2 + 4) & (int)DAT_0050c87c) == 0))
        {
            iVar6 = *(int *)(iVar2 + 0x10);
            sVar5 = 0;
            if (0 < *(int *)(iVar2 + 8))
            {
                do
                {
                    if ((*(ushort *)(iVar6 + 6) & 0x1100) == 0)
                    {
                        (*pcVar3)(iVar6);
                    }
                    iVar6 = iVar6 + *(int *)(iVar2 + 0xc);
                    FUN_004270c0();
                    sVar5 = sVar5 + 1;
                } while ((int)sVar5 < *(int *)(iVar2 + 8));
            }
        }
        piVar1 = (int *)(puVar4 + 4);
        puVar4 = puVar4 + 4;
        iVar2 = *piVar1;
    }
    return;
}

void FUN_00450930(void)

{
    int *piVar1;
    int iVar2;
    code *pcVar3;
    undefined_8 *puVar4;
    short sVar5;
    int iVar6;

    iVar2 = *(int *)PTR_PTR_DAT_004bfec0;
    puVar4 = PTR_PTR_DAT_004bfec0;
    while (iVar2 != 0)
    {
        pcVar3 = *(code **)(iVar2 + 0x18);
        if ((pcVar3 != (code *)0x0) && ((*(uint *)(iVar2 + 4) & (int)DAT_0050c87c) == 0))
        {
            iVar6 = *(int *)(iVar2 + 0x10);
            sVar5 = 0;
            if (0 < *(int *)(iVar2 + 8))
            {
                do
                {
                    if ((*(ushort *)(iVar6 + 6) & 0x1100) == 0)
                    {
                        (*pcVar3)(iVar6);
                    }
                    iVar6 = iVar6 + *(int *)(iVar2 + 0xc);
                    FUN_004270c0();
                    sVar5 = sVar5 + 1;
                } while ((int)sVar5 < *(int *)(iVar2 + 8));
            }
        }
        piVar1 = (int *)(puVar4 + 4);
        puVar4 = puVar4 + 4;
        iVar2 = *piVar1;
    }
    return;
}

void FUN_004509b0(void)

{
    int *piVar1;
    int iVar2;
    code *pcVar3;
    undefined_8 *puVar4;
    short sVar5;
    int iVar6;

    iVar2 = *(int *)PTR_PTR_DAT_004bfec0;
    puVar4 = PTR_PTR_DAT_004bfec0;
    while (iVar2 != 0)
    {
        pcVar3 = *(code **)(iVar2 + 0x1c);
        if ((pcVar3 != (code *)0x0) && ((*(uint *)(iVar2 + 4) & (int)DAT_0050c87c) == 0))
        {
            iVar6 = *(int *)(iVar2 + 0x10);
            sVar5 = 0;
            if (0 < *(int *)(iVar2 + 8))
            {
                do
                {
                    if ((*(ushort *)(iVar6 + 6) & 0x1100) == 0)
                    {
                        (*pcVar3)(iVar6);
                    }
                    iVar6 = iVar6 + *(int *)(iVar2 + 0xc);
                    FUN_004270c0();
                    sVar5 = sVar5 + 1;
                } while ((int)sVar5 < *(int *)(iVar2 + 8));
            }
        }
        piVar1 = (int *)(puVar4 + 4);
        puVar4 = puVar4 + 4;
        iVar2 = *piVar1;
    }
    return;
}

void FUN_00450a30(void)

{
    int *piVar1;
    int iVar2;
    code *pcVar3;
    undefined_8 *puVar4;
    short sVar5;
    int iVar6;

    iVar2 = *(int *)PTR_PTR_DAT_004bfec0;
    puVar4 = PTR_PTR_DAT_004bfec0;
    while (iVar2 != 0)
    {
        pcVar3 = *(code **)(iVar2 + 0x20);
        if (pcVar3 != (code *)0x0)
        {
            iVar6 = *(int *)(iVar2 + 0x10);
            sVar5 = 0;
            if (0 < *(int *)(iVar2 + 8))
            {
                do
                {
                    if ((*(ushort *)(iVar6 + 6) & 0x1100) == 0)
                    {
                        (*pcVar3)(iVar6);
                    }
                    iVar6 = iVar6 + *(int *)(iVar2 + 0xc);
                    sVar5 = sVar5 + 1;
                } while ((int)sVar5 < *(int *)(iVar2 + 8));
            }
            FUN_004270c0();
        }
        piVar1 = (int *)(puVar4 + 4);
        puVar4 = puVar4 + 4;
        iVar2 = *piVar1;
    }
    return;
}

int FUN_00450aa0(int param_1, int param_2)

{
    int *piVar1;
    int iVar2;
    short sVar3;
    undefined_8 *puVar4;

    piVar1 = *(int **)PTR_PTR_DAT_004bfec0;
    puVar4 = PTR_PTR_DAT_004bfec0;
    do
    {
        if (piVar1 == NULL)
        {
            return 0;
        }
        if (*piVar1 == param_1)
        {
            iVar2 = piVar1[4];
            sVar3 = 0;
            if (0 < piVar1[2])
            {
                do
                {
                    if (((*(ushort *)(iVar2 + 6) & 0x100) == 0) && (*(short *)(iVar2 + 4) == param_2))
                    {
                        return iVar2;
                    }
                    iVar2 = iVar2 + piVar1[3];
                    sVar3 = sVar3 + 1;
                } while ((int)sVar3 < piVar1[2]);
            }
        }
        piVar1 = *(int **)(puVar4 + 4);
        puVar4 = puVar4 + 4;
    } while (true);
}

int *FUN_00450b00(int param_1)

{
    int *piVar1;
    undefined_8 *puVar2;

    piVar1 = *(int **)PTR_PTR_DAT_004bfec0;
    puVar2 = PTR_PTR_DAT_004bfec0;
    if (piVar1 == NULL)
    {
        return NULL;
    }
    do
    {
        if (*piVar1 == param_1)
        {
            return (int *)piVar1[2];
        }
        piVar1 = *(int **)(puVar2 + 4);
        puVar2 = puVar2 + 4;
    } while (piVar1 != NULL);
    return piVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// param_1 is a MAGIC()
int *FUN_00450b30(int param_1, int param_2)

{
    int *piVar1;
    undefined_8 *puVar2;

    _DAT_0050c880 = NULL;
    piVar1 = *(int **)PTR_PTR_DAT_004bfec0;
    puVar2 = PTR_PTR_DAT_004bfec0;
    if (piVar1 != NULL)
    {
        while (*piVar1 != param_1)
        {
            piVar1 = *(int **)(puVar2 + 4);
            puVar2 = puVar2 + 4;
            if (piVar1 == NULL)
            {
                return piVar1;
            }
        }
        if (param_2 < piVar1[2])
        {
            _DAT_0050c880 = piVar1;
            _DAT_0050c878 = param_2;
            return (int *)(piVar1[3] * param_2 + piVar1[4]);
        }
    }
    return NULL;
}

void FUN_00450c00(int *param_1, undefined_32 param_2)

{
    int *piVar1;
    undefined_8 *puVar2;

    if (param_1 != NULL)
    {
        piVar1 = *(int **)PTR_PTR_DAT_004bfec0;
        if (piVar1 != NULL)
        {
            puVar2 = PTR_PTR_DAT_004bfec0;
            while (*piVar1 != *param_1)
            {
                piVar1 = *(int **)(puVar2 + 4);
                puVar2 = puVar2 + 4;
                if (piVar1 == NULL)
                {
                    return;
                }
            }
            if (((code *)piVar1[9] != (code *)0x0) && ((*(ushort *)((int)param_1 + 6) & 0x100) == 0))
            {
                (*(code *)piVar1[9])(param_1, param_2, param_2);
            }
        }
    }
    return;
}

void FUN_00450c50(int param_1, undefined_32 param_2)

{
    int *piVar1;
    code *pcVar2;
    int iVar3;
    undefined_8 *puVar4;
    int iVar5;
    int iVar6;

    piVar1 = *(int **)PTR_PTR_DAT_004bfec0;
    puVar4 = PTR_PTR_DAT_004bfec0;
    do
    {
        if (piVar1 == NULL)
        {
            return;
        }
        if ((*piVar1 == param_1) || (param_1 == MAGIC('A', 'l', 'l', '!')))
        {
            pcVar2 = (code *)piVar1[9];
            if (pcVar2 != (code *)0x0)
            {
                iVar6 = piVar1[4];
                iVar5 = 0;
                if (0 < piVar1[2])
                {
                    do
                    {
                        if (((*(ushort *)(iVar6 + 6) & 0x100) == 0)
                            && (iVar3 = (*pcVar2)(iVar6, param_2, param_2), iVar3 == 2))
                        {
                            return;
                        }
                        iVar6 = iVar6 + piVar1[3];
                        iVar5 = iVar5 + 1;
                    } while (iVar5 < piVar1[2]);
                }
            }
            if (param_1 != MAGIC('A', 'l', 'l', '!'))
            {
                return;
            }
        }
        piVar1 = *(int **)(puVar4 + 4);
        puVar4 = puVar4 + 4;
    } while (true);
}

int *FUN_00450ce0(int param_1, int param_2, int param_3)

{
    int *piVar1;
    undefined_8 *puVar2;

    piVar1 = *(int **)PTR_PTR_DAT_004bfec0;
    puVar2 = PTR_PTR_DAT_004bfec0;
    if (piVar1 == NULL)
    {
        return NULL;
    }
    do
    {
        if (*piVar1 == param_1)
        {
            piVar1[4] = param_3;
            piVar1[2] = param_2;
            return (int *)(piVar1[3] * param_2);
        }
        piVar1 = *(int **)(puVar2 + 4);
        puVar2 = puVar2 + 4;
    } while (piVar1 != NULL);
    return piVar1;
}

int *FUN_00450d20(int param_1)

{
    int *piVar1;
    undefined_8 *puVar2;
    int iVar3;
    int *piVar4;
    undefined_32 local_20[8];

    piVar1 = *(int **)PTR_PTR_DAT_004bfec0;
    puVar2 = PTR_PTR_DAT_004bfec0;
    if (piVar1 != NULL)
    {
        while (*piVar1 != param_1)
        {
            piVar1 = *(int **)(puVar2 + 4);
            puVar2 = puVar2 + 4;
            if (piVar1 == NULL)
            {
                return piVar1;
            }
        }
        if (piVar1[9] != 0)
        {
            piVar4 = (int *)piVar1[4];
            iVar3 = 0;
            if (0 < piVar1[2])
            {
                do
                {
                    if ((*(ushort *)((int)piVar4 + 6) & 0x100) != 0)
                    {
                        *(byte *)((int)piVar4 + 7) = *(byte *)((int)piVar4 + 7) & 0xfe;
                        local_20[0] = MAGIC('A', 'l', 'o', 'c');
                        FUN_00450c00(piVar4, local_20);
                        return piVar4;
                    }
                    piVar4 = (int *)((int)piVar4 + piVar1[3]);
                    iVar3 = iVar3 + 1;
                } while (iVar3 < piVar1[2]);
                return NULL;
            }
        }
    }
    return NULL;
}

void FUN_00450db0(int param_1)

{
    int **ppiVar1;
    int *piVar2;
    short sVar3;
    undefined_8 *puVar4;
    int iVar5;
    undefined_32 local_8[2];

    local_8[0] = MAGIC('F', 'r', 'e', 'e');
    piVar2 = *(int **)PTR_PTR_DAT_004bfec0;
    puVar4 = PTR_PTR_DAT_004bfec0;
    while (piVar2 != NULL)
    {
        if (*piVar2 == param_1)
        {
            iVar5 = piVar2[4];
            sVar3 = 0;
            if (0 < piVar2[2])
            {
                do
                {
                    if ((*(ushort *)(iVar5 + 6) & 0x100) == 0)
                    {
                        FUN_00450c00(iVar5, local_8);
                        *(byte *)(iVar5 + 7) = *(byte *)(iVar5 + 7) | 1;
                    }
                    iVar5 = iVar5 + piVar2[3];
                    sVar3 = sVar3 + 1;
                } while ((int)sVar3 < piVar2[2]);
            }
        }
        ppiVar1 = (int **)(puVar4 + 4);
        puVar4 = puVar4 + 4;
        piVar2 = *ppiVar1;
    }
    return;
}

void FUN_00450e30(int param_1)

{
    undefined_32 local_20[8];

    if ((param_1 != 0) && ((*(ushort *)(param_1 + 6) & 0x100) == 0))
    {
        local_20[0] = MAGIC('F', 'r', 'e', 'e');
        FUN_00450c00(param_1, local_20);
        *(byte *)(param_1 + 7) = *(byte *)(param_1 + 7) | 1;
    }
    return;
}

int FUN_00450e70(int param_1, float *param_2, float param_3, int param_4, int param_5, float *param_6, int param_7,
                 int param_8)

{
    int *piVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    undefined_32 *puVar6;
    float *pfVar7;
    int iVar8;
    int iVar9;
    undefined_8 *puVar10;
    int iVar11;
    int iVar12;
    int iVar13;
    int local_1c;
    int local_18;

    iVar11 = 0;
    piVar1 = *(int **)PTR_PTR_DAT_004bfec0;
    local_1c = 0;
    puVar10 = PTR_PTR_DAT_004bfec0;
    do
    {
        if (piVar1 == NULL)
        {
            return iVar11;
        }
        if (((*piVar1 == param_1) || (param_1 == MAGIC('A', 'l', 'l', '!'))) && ((*(byte *)(piVar1 + 1) & 1) != 0))
        {
            iVar12 = piVar1[4];
            local_18 = 0;
            if (0 < piVar1[2])
            {
                do
                {
                    if (((*(ushort *)(iVar12 + 6) & 0x100) == 0) && (iVar12 != param_4))
                    {
                        fVar4 = *(float *)(iVar12 + 0x50) - *param_2;
                        fVar2 = *(float *)(iVar12 + 0x54) - param_2[1];
                        fVar5 = *(float *)(iVar12 + 0x58) - param_2[2];
                        fVar3 = fVar5 * fVar5 + fVar2 * fVar2 + fVar4 * fVar4;
                        if (fVar3 < param_3)
                        {
                            iVar13 = 0;
                            pfVar7 = param_6;
                            if (0 < iVar11)
                            {
                                do
                                {
                                    if (fVar3 <= *pfVar7)
                                        break;
                                    iVar13 = iVar13 + 1;
                                    pfVar7 = pfVar7 + 1;
                                } while (iVar13 < iVar11);
                            }
                            if (iVar13 < param_5)
                            {
                                if (iVar11 < param_5)
                                {
                                    local_1c = iVar11 + 1;
                                    iVar8 = iVar11;
                                    iVar11 = local_1c;
                                }
                                else
                                {
                                    iVar8 = param_5 + -1;
                                }
                                if (iVar13 < iVar8)
                                {
                                    pfVar7 = param_6 + iVar8;
                                    iVar9 = iVar8 - iVar13;
                                    puVar6 = (undefined_32 *)(param_7 + iVar8 * 0xc);
                                    do
                                    {
                                        *(undefined_32 *)((param_8 - (int)param_6) + (int)pfVar7) =
                                            *(undefined_32 *)((param_8 - (int)param_6) + -4 + (int)pfVar7);
                                        *pfVar7 = pfVar7[-1];
                                        *puVar6 = puVar6[-3];
                                        puVar6[1] = puVar6[-2];
                                        puVar6[2] = puVar6[-1];
                                        pfVar7 = pfVar7 + -1;
                                        iVar9 = iVar9 + -1;
                                        puVar6 = puVar6 + -3;
                                        iVar11 = local_1c;
                                    } while (iVar9 != 0);
                                }
                                param_6[iVar13] = fVar3;
                                *(int *)(param_8 + iVar13 * 4) = iVar12;
                                *(float *)(param_7 + iVar13 * 0xc) = fVar4;
                                iVar13 = param_7 + iVar13 * 0xc;
                                *(float *)(iVar13 + 4) = fVar2;
                                *(float *)(iVar13 + 8) = fVar5;
                            }
                        }
                    }
                    iVar12 = iVar12 + piVar1[3];
                    local_18 = local_18 + 1;
                } while (local_18 < piVar1[2]);
            }
        }
        piVar1 = *(int **)(puVar10 + 4);
        puVar10 = puVar10 + 4;
    } while (true);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00451800(int param_1, undefined_32 param_2, int param_3)

{
    uint *puVar1;
    float fVar2;
    uint uVar3;
    int iVar4;
    undefined_32 *puVar5;
    undefined_32 *puVar6;

    if ((param_3 != 0) && (*(ushort *)(param_3 + 10) != 0))
    {
        if ((*(ushort *)(param_3 + 10) & 0x10) == 0)
        {
            *(float *)(param_1 + 0x334) = (float)(uint) * (byte *)(param_3 + 0xc);
            *(float *)(param_1 + 0x338) = (float)(uint) * (byte *)(param_3 + 0xd);
            *(float *)(param_1 + 0x33c) = (float)(uint) * (byte *)(param_3 + 0xe);
            *(float *)(param_1 + 0x34c) = (float)(uint) * (byte *)(param_3 + 0xf);
            *(float *)(param_1 + 0x350) = (float)(uint) * (byte *)(param_3 + 0x10);
            *(float *)(param_1 + 0x354) = (float)(uint) * (byte *)(param_3 + 0x11);
            *(undefined_32 *)(param_1 + 0x340) = *(undefined_32 *)(param_3 + 0x14);
            *(undefined_32 *)(param_1 + 0x344) = *(undefined_32 *)(param_3 + 0x18);
            *(undefined_32 *)(param_1 + 0x348) = *(undefined_32 *)(param_3 + 0x1c);
            *(undefined_32 *)(param_1 + 0x358) = *(undefined_32 *)(param_3 + 0x20);
            *(undefined_32 *)(param_1 + 0x35c) = *(undefined_32 *)(param_3 + 0x24);
            *(undefined_32 *)(param_1 + 0x360) = *(undefined_32 *)(param_3 + 0x28);
            rdVector_Normalize3((undefined_32 *)(param_1 + 0x358));
            puVar1 = (uint *)(param_1 + 0x330);
            if ((*(byte *)(param_3 + 10) & 4) == 0)
            {
                *puVar1 = *puVar1 & 0xfffffff7;
                rdVector_Normalize3(param_1 + 0x340);
            }
            else
            {
                *puVar1 = *puVar1 | 8;
            }
            if ((*(byte *)(param_3 + 10) & 8) == 0)
            {
                *puVar1 = *puVar1 & 0xfffffffb;
            }
            else
            {
                *puVar1 = *puVar1 | 4;
            }
            goto LAB_00451a40;
        }
        *(float *)(param_1 + 0x368) = (float)(uint) * (byte *)(param_3 + 0xc);
        *(float *)(param_1 + 0x36c) = (float)(uint) * (byte *)(param_3 + 0xd);
        *(float *)(param_1 + 0x370) = (float)(uint) * (byte *)(param_3 + 0xe);
        *(float *)(param_1 + 0x380) = (float)(uint) * (byte *)(param_3 + 0xf);
        *(float *)(param_1 + 900) = (float)(uint) * (byte *)(param_3 + 0x10);
        *(float *)(param_1 + 0x388) = (float)(uint) * (byte *)(param_3 + 0x11);
        *(undefined_32 *)(param_1 + 0x374) = *(undefined_32 *)(param_3 + 0x14);
        *(undefined_32 *)(param_1 + 0x378) = *(undefined_32 *)(param_3 + 0x18);
        *(undefined_32 *)(param_1 + 0x37c) = *(undefined_32 *)(param_3 + 0x1c);
        *(undefined_32 *)(param_1 + 0x38c) = *(undefined_32 *)(param_3 + 0x20);
        *(undefined_32 *)(param_1 + 0x390) = *(undefined_32 *)(param_3 + 0x24);
        *(undefined_32 *)(param_1 + 0x394) = *(undefined_32 *)(param_3 + 0x28);
        rdVector_Normalize3((undefined_32 *)(param_1 + 0x38c));
        puVar1 = (uint *)(param_1 + 0x364);
        if ((*(byte *)(param_3 + 10) & 4) == 0)
        {
            *puVar1 = *puVar1 & 0xfffffff7;
            rdVector_Normalize3((undefined_32 *)(param_1 + 0x374));
        }
        else
        {
            *puVar1 = *puVar1 | 8;
        }
        if ((*(byte *)(param_3 + 10) & 8) == 0)
        {
            *puVar1 = *puVar1 & 0xfffffffb;
        }
        else
        {
            *puVar1 = *puVar1 | 4;
        }
    }
    puVar5 = (undefined_32 *)(param_1 + 0x364);
    puVar6 = (undefined_32 *)(param_1 + 0x330);
    QMEMCPY(iVar4, puVar5, puVar6, 0xd)
LAB_00451a40:
    uVar3 = *(uint *)(param_1 + 0x2e4) & 0xfffffff3 | *(uint *)(param_1 + 0x330);
    *(uint *)(param_1 + 0x2e4) = uVar3;
    fVar2 = (float)_DAT_00e22a40;
    *(uint *)(param_1 + 0x2e4) = uVar3 | 3;
    *(float *)(param_1 + 0x398) = (fVar2 + fVar2) - -1.0;
    return;
}

void FUN_00451d60(int param_1, undefined_32 param_2)

{
    // some MEMCPY
    *(undefined_32 *)(param_1 + 0x7c) = param_2;
    *(undefined_32 *)(param_1 + 0x224) = *(undefined_32 *)(param_1 + 0x20);
    *(undefined_32 *)(param_1 + 0x228) = *(undefined_32 *)(param_1 + 0x24);
    *(undefined_32 *)(param_1 + 0x22c) = *(undefined_32 *)(param_1 + 0x28);
    *(undefined_32 *)(param_1 + 0x230) = *(undefined_32 *)(param_1 + 0x2c);
    *(undefined_32 *)(param_1 + 0x234) = *(undefined_32 *)(param_1 + 0x30);
    *(undefined_32 *)(param_1 + 0x238) = *(undefined_32 *)(param_1 + 0x34);
    *(undefined_32 *)(param_1 + 0x23c) = *(undefined_32 *)(param_1 + 0x38);
    *(undefined_32 *)(param_1 + 0x240) = *(undefined_32 *)(param_1 + 0x3c);
    *(undefined_32 *)(param_1 + 0x244) = *(undefined_32 *)(param_1 + 0x40);
    *(undefined_32 *)(param_1 + 0x248) = *(undefined_32 *)(param_1 + 0x44);
    *(undefined_32 *)(param_1 + 0x24c) = *(undefined_32 *)(param_1 + 0x48);
    *(undefined_32 *)(param_1 + 0x250) = *(undefined_32 *)(param_1 + 0x4c);
    *(undefined_32 *)(param_1 + 0x254) = *(undefined_32 *)(param_1 + 0x50);
    *(undefined_32 *)(param_1 + 600) = *(undefined_32 *)(param_1 + 0x54);
    *(undefined_32 *)(param_1 + 0x25c) = *(undefined_32 *)(param_1 + 0x58);
    *(undefined_32 *)(param_1 + 0x260) = *(undefined_32 *)(param_1 + 0x5c);
    *(undefined_32 *)(param_1 + 0x264) = *(undefined_32 *)(param_1 + 0x108);
    *(undefined_32 *)(param_1 + 0x268) = *(undefined_32 *)(param_1 + 0x10c);
    *(undefined_32 *)(param_1 + 0x26c) = *(undefined_32 *)(param_1 + 0x110);
    *(undefined_32 *)(param_1 + 0x270) = *(undefined_32 *)(param_1 + 0x114);
    *(undefined_32 *)(param_1 + 0x274) = *(undefined_32 *)(param_1 + 0x118);
    *(undefined_32 *)(param_1 + 0x278) = *(undefined_32 *)(param_1 + 0x11c);
    *(undefined_32 *)(param_1 + 0x27c) = *(undefined_32 *)(param_1 + 0x120);
    *(undefined_32 *)(param_1 + 0x280) = *(undefined_32 *)(param_1 + 0x124);
    *(undefined_32 *)(param_1 + 0x284) = *(undefined_32 *)(param_1 + 0x128);
    *(undefined_32 *)(param_1 + 0x288) = *(undefined_32 *)(param_1 + 300);
    *(undefined_32 *)(param_1 + 0x28c) = *(undefined_32 *)(param_1 + 0x130);
    *(undefined_32 *)(param_1 + 0x290) = *(undefined_32 *)(param_1 + 0x134);
    *(undefined_32 *)(param_1 + 0x294) = *(undefined_32 *)(param_1 + 0x138);
    *(undefined_32 *)(param_1 + 0x298) = *(undefined_32 *)(param_1 + 0x13c);
    *(undefined_32 *)(param_1 + 0x29c) = *(undefined_32 *)(param_1 + 0x140);
    *(undefined_32 *)(param_1 + 0x2a0) = *(undefined_32 *)(param_1 + 0x144);
    return;
}

void FUN_00451ec0(int param_1)

{
    int iVar1;

    iVar1 = *(int *)(param_1 + 0x80);
    if ((iVar1 != 2) && (iVar1 != 1))
    {
        *(int *)(param_1 + 0x7c) = iVar1;
        return;
    }
    FUN_00451d60(param_1, iVar1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00451ef0(int param_1)

{
    int iVar1;
    float fVar2;
    int iVar3;
    int iVar4;
    float10 fVar5;
    undefined_8 local_3c8[4];
    float local_3c4;
    float local_3c0;
    undefined_8 local_3bc[12];
    int local_3b0;
    undefined_8 local_3ac[12];
    float local_3a0[3];
    float local_394;
    undefined_8 local_390[4];
    float local_38c[4];
    float local_37c;
    float local_378;
    undefined_8 local_374[4];
    float local_370;
    float local_36c;
    undefined_8 local_368[156];
    undefined_8 local_2cc[56];
    float local_294;
    undefined_8 local_28c[12];
    undefined_8 local_280[16];
    undefined_8 local_270[32];
    undefined_8 local_250[16];
    undefined_8 local_240[8];
    float local_238;
    undefined_8 local_234[8];
    float local_22c;
    undefined_8 local_228[12];
    undefined_8 local_21c[156];
    float local_180;
    float local_17c;
    float local_140;
    float local_13c;
    float local_100;
    undefined_32 local_fc;
    undefined_32 local_f8;
    float local_f4;
    undefined_32 local_f0;
    undefined_32 local_ec;
    float local_40;

    local_3b0 = 0;
    iVar4 = *(int *)(param_1 + 0xf4);
    *(undefined_32 *)(param_1 + 0x2b0) = -1.0f;
    if (iVar4 != 0)
    {
        FUN_0044bb10(local_2cc, iVar4 + 0x20);
        local_294 = *(float *)(iVar4 + 0x250) + local_294;
        *(float *)(param_1 + 0x70) = *(float *)(param_1 + 0x70) + (float)_DAT_00e22a40;
        iVar1 = **(int **)(*(int *)(iVar4 + 0x1e70) + 0x18);
        iVar3 = iVar1 * 0x6c;
        vec3f_copy(local_3ac, &DAT_004c7088 + iVar3);
        vec3f_add(local_3ac, local_3ac, &DAT_004c70a0 + iVar3);
        vec3f_copy(local_3a0, &DAT_004c7094 + iVar3);
        vec3f_add(local_3a0, local_3a0, &DAT_004c70c4 + iVar3);
        local_3a0[0] = local_3a0[0] * 0.3;
        vec3f_copy(local_3c8, &DAT_004c70d0 + iVar3);
        local_3c0 = *(float *)(iVar4 + 0x19b4) * 0.75 + local_3c0;
        local_3c4 = local_3c4 * -1.0;
        rdVector_Scale3(local_3c8, 0x3f400000, local_3c8);
        vec3f_copy(local_38c, local_3ac);
        local_38c[0] = local_38c[0] - -2.0;
        local_38c[1] = local_38c[1] - 2.0;
        local_38c[2] = local_38c[2] - 1.0;
        if (iVar1 == 0xe)
        {
            local_38c[0] = local_38c[0] - -2.0;
            local_38c[1] = local_38c[1] - 2.0;
            local_38c[2] = local_38c[2] - -4.0;
        }
        mat_transform_translate(local_38c, local_38c, local_2cc);
        vec3f_copy(local_240, local_3ac);
        local_238 = local_238 - 2.0;
        mat_transform_translate(local_240, local_240, local_2cc);
        vec3f_copy(local_38c + 3, local_3ac);
        local_38c[3] = local_38c[3] - 0.5;
        local_37c = local_37c - -2.5;
        local_378 = local_378 - 1.0;
        if (iVar1 == 0xe)
        {
            local_37c = local_37c - -2.0;
            local_378 = local_378 - -4.0;
        }
        mat_transform_translate(local_38c + 3, local_38c + 3, local_2cc);
        vec3f_copy(local_234, local_3ac);
        local_22c = local_22c - 2.0;
        mat_transform_translate(local_234, local_234, local_2cc);
        vec3f_copy(local_374, local_3a0);
        local_370 = local_370 - -5.0;
        local_36c = local_36c - -0.5;
        mat_transform_translate(local_374, local_374, local_2cc);
        vec3f_copy(local_228, local_3ac);
        mat_transform_translate(local_228, local_228, local_2cc);
        vec3f_copy(local_368, local_3c8);
        mat_transform_translate(local_368, local_368, local_2cc);
        vec3f_set(local_21c, 0, 0, local_3c0);
        mat_transform_translate(local_21c, local_21c, local_2cc);
        if (3.0 <= *(float *)(param_1 + 0x70))
        {
            if (6.0 <= *(float *)(param_1 + 0x70))
            {
                if (8.0 <= *(float *)(param_1 + 0x70))
                {
                    fVar2 = 1.0;
                    iVar4 = 2;
                    local_3b0 = 1;
                }
                else
                {
                    iVar4 = 2;
                    fVar2 = (*(float *)(param_1 + 0x70) - 6.0) * 0.5;
                }
            }
            else
            {
                iVar4 = 1;
                fVar2 = (*(float *)(param_1 + 0x70) - 3.0) * 0.3333333;
            }
        }
        else
        {
            fVar2 = *(float *)(param_1 + 0x70) * 0.3333333;
            iVar4 = 0;
        }
        CLAMP(fVar2, 0.0, 1.0)
        sin_cos(fVar2 * 180.0 - 90.0, &local_394, local_390);
        fVar2 = local_394 * 0.5 - -0.5;
        vec3f_set(local_3bc, 0, 0, 0);
        vec3f_multiply_add(local_3bc, local_3bc, 1.0 - fVar2, local_240 + iVar4 * 0xc);
        vec3f_multiply_add(local_3bc, local_3bc, fVar2, local_234 + iVar4 * 0xc);
        vec3f_sub(&local_100, local_38c + iVar4 * 3, local_3bc);
        vec3f_sub(&local_f4, local_38c + iVar4 * 3 + 3, local_3bc);
        fVar5 = (float10)rdVector_Normalize3(&local_100);
        local_140 = (float)fVar5;
        fVar5 = (float10)rdVector_Normalize3(&local_f4);
        local_13c = (float)fVar5;
        fVar5 = (float10)arctan2(-local_100, local_fc);
        local_180 = (float)fVar5;
        fVar5 = (float10)arctan2(-local_f4, local_f0);
        local_17c = (float)fVar5;
        fVar5 = (float10)arctan(local_f8);
        local_40 = (float)fVar5;
        fVar5 = (float10)arctan(local_ec);
        mat_set_rotation(local_280, (local_17c - local_180) * fVar2 + local_180,
                         (float)((fVar5 - (float10)local_40) * (float10)fVar2 + (float10)local_40), 0);
        vec3f_multiply_add(local_28c, local_3bc, (local_13c - local_140) * fVar2 + local_140, local_270);
        mat_set_identity(local_280);
        vec3f_copy(local_250, local_28c);
        FUN_0044bb10(param_1 + 0x20, local_280);
        mat_set_identity(local_280);
        vec3f_copy(local_250, local_3bc);
        FUN_0044bb10(param_1 + 0x108, local_280);
    }
    if (local_3b0 != 0)
    {
        FUN_00451d60(param_1, 1);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00452600(float param_1)

{
    int iVar1;
    float fVar2;
    int iVar3;
    int iVar4;
    undefined_32 *puVar5;
    undefined_32 *puVar6;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_8 local_c[12];

    iVar3 = (int)param_1;
    iVar1 = *(int *)((int)param_1 + 0xf4);
    if (iVar1 != 0)
    {
        fVar2 = *(float *)((int)param_1 + 0x70) - (float)_DAT_00e22a40;
        *(float *)((int)param_1 + 0x70) = fVar2;
        iVar4 = *(int *)((int)param_1 + 0x6c);
        if (iVar4 == 0)
        {
            if (0.0 <= fVar2)
            {
                param_1 = 1.0 - fVar2;
            }
            else
            {
                *(undefined_32 *)((int)param_1 + 0x70) = 1.5f;
                *(undefined_32 *)((int)param_1 + 0x6c) = 2;
                puVar5 = (undefined_32 *)(iVar1 + 0xac);
                puVar6 = (undefined_32 *)((int)param_1 + 0x1b4);
                QMEMCPY(iVar4, puVar5, puVar6, 0xc)
                *(float *)((int)param_1 + 0x1bc) = *(float *)((int)param_1 + 0x1bc) - 0.85;
                *(undefined_32 *)((int)param_1 + 0x1b8) = 0;
                FUN_0044ed80((undefined_32 *)((int)param_1 + 0x1b4), (int)param_1 + 0x1e4);
                *(undefined_32 *)((int)param_1 + 0x1b8) = 0x3f088889;
                param_1 = 1.0;
            }
            iVar1 = iVar3 + 0x15c;
            vec3f_sub(local_c, iVar3 + 0x168, iVar1);
            rdVector_Normalize3(local_c);
            vec3f_multiply_add(&local_24, iVar1, param_1 * 30.0, local_c);
            *(undefined_32 *)(iVar3 + 0x18c) = local_24;
            *(undefined_32 *)(iVar3 + 400) = local_20;
            *(undefined_32 *)(iVar3 + 0x194) = local_1c;
            vec3f_copy(&local_18, iVar1);
        }
        else if (iVar4 == 2)
        {
            if (fVar2 < 0.0)
            {
                *(undefined_32 *)((int)param_1 + 0x70) = 0;
                *(undefined_32 *)((int)param_1 + 0x6c) = 3;
            }
            FUN_0044ed80((int)param_1 + 0x1b4, (int)param_1 + 0x1e4);
            vec3f_copy(&local_18, iVar1 + 0x50);
            local_24 = *(undefined_32 *)((int)param_1 + 0x214);
            local_20 = *(undefined_32 *)((int)param_1 + 0x218);
            local_1c = *(undefined_32 *)((int)param_1 + 0x21c);
        }
        else if (iVar4 == 3)
        {
            *(undefined_32 *)(iVar1 + 0x30c) = 3.0f;
            *(uint *)(iVar1 + 0x60) = *(uint *)(iVar1 + 0x60) & 0xffffbfff | 0x2000;
            FUN_00451ec0(param_1);
            local_24 = *(undefined_32 *)((int)param_1 + 0x50);
            local_20 = *(undefined_32 *)((int)param_1 + 0x54);
            local_18 = *(undefined_32 *)((int)param_1 + 0x138);
            local_14 = *(undefined_32 *)((int)param_1 + 0x13c);
            local_10 = *(undefined_32 *)((int)param_1 + 0x140);
            local_1c = *(undefined_32 *)((int)param_1 + 0x58);
        }
        *(undefined_32 *)(iVar3 + 0x58) = local_1c;
        *(undefined_32 *)(iVar3 + 0x50) = local_24;
        *(undefined_32 *)(iVar3 + 0x20) = 1.0f;
        *(undefined_32 *)(iVar3 + 0x34) = 1.0f;
        *(undefined_32 *)(iVar3 + 0x48) = 1.0f;
        *(undefined_32 *)(iVar3 + 0x5c) = 1.0f;
        *(undefined_32 *)(iVar3 + 0x108) = 1.0f;
        *(undefined_32 *)(iVar3 + 0x11c) = 1.0f;
        *(undefined_32 *)(iVar3 + 0x130) = 1.0f;
        *(undefined_32 *)(iVar3 + 0x144) = 1.0f;
        *(undefined_32 *)(iVar3 + 0x54) = local_20;
        *(undefined_32 *)(iVar3 + 0x24) = 0;
        *(undefined_32 *)(iVar3 + 0x28) = 0;
        *(undefined_32 *)(iVar3 + 0x2c) = 0;
        *(undefined_32 *)(iVar3 + 0x30) = 0;
        *(undefined_32 *)(iVar3 + 0x38) = 0;
        *(undefined_32 *)(iVar3 + 0x3c) = 0;
        *(undefined_32 *)(iVar3 + 0x40) = 0;
        *(undefined_32 *)(iVar3 + 0x44) = 0;
        *(undefined_32 *)(iVar3 + 0x4c) = 0;
        *(undefined_32 *)(iVar3 + 0x10c) = 0;
        *(undefined_32 *)(iVar3 + 0x110) = 0;
        *(undefined_32 *)(iVar3 + 0x114) = 0;
        *(undefined_32 *)(iVar3 + 0x118) = 0;
        *(undefined_32 *)(iVar3 + 0x120) = 0;
        *(undefined_32 *)(iVar3 + 0x124) = 0;
        *(undefined_32 *)(iVar3 + 0x128) = 0;
        *(undefined_32 *)(iVar3 + 300) = 0;
        *(undefined_32 *)(iVar3 + 0x134) = 0;
        *(undefined_32 *)(iVar3 + 0x138) = local_18;
        *(undefined_32 *)(iVar3 + 0x13c) = local_14;
        *(undefined_32 *)(iVar3 + 0x140) = local_10;
        return;
    }
    FUN_00451ec0(param_1);
    return;
}

void FUN_004528b0(float param_1)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    undefined_8 local_58[20];
    undefined_32 local_44;
    undefined_8 local_40[16];
    undefined_8 local_30[16];
    undefined_8 local_20[16];
    undefined_8 local_10[8];
    float local_8;

    iVar5 = (int)param_1;
    iVar3 = *(int *)((int)param_1 + 0xf4);
    if (iVar3 != 0)
    {
        uVar4 = *(uint *)(iVar3 + 0x60);
        *(undefined_32 *)((int)param_1 + 0x2b0) = 100.0f;
        if (*(int *)((int)param_1 + 0x7c) == 5)
        {
            *(undefined_32 *)((int)param_1 + 0x2b0) = 0x42f00000;
        }
        FUN_0044bb10(local_40, iVar3 + 0x20);
        local_8 = *(float *)(iVar3 + 0x250) + local_8;
        piVar1 = (int *)((int)param_1 + 0x7c);
        param_1 = (*(float *)(iVar3 + 0xa8) - 3.0) * 0.5;
        if ((*piVar1 != 5) && (param_1 = param_1 * 1.9, **(int **)(*(int *)(iVar3 + 0x1e70) + 0x18) == 0xe))
        {
            param_1 = param_1 * 0.3;
        }
        if (**(int **)(*(int *)(iVar3 + 0x1e70) + 0x18) == 0xe)
        {
            vec3f_multiply_add(local_10, local_10, param_1, local_20);
        }
        else if ((uVar4 & 0x6000000) == 0)
        {
            local_8 = *(float *)(iVar3 + 0x48) * param_1 + local_8;
        }
        if (**(int **)(*(int *)(iVar3 + 0x1e70) + 0x18) == 10)
        {
            vec3f_multiply_add(local_10, local_10, 3.0f, local_30);
        }
        if ((*(uint *)(iVar3 + 100) & 0x18000) != 0)
        {
            FUN_00430b80(iVar3 + 0x490, local_58);
            FUN_00431390(local_40, local_44, 0, 1.0f, 0, local_40);
        }
        iVar2 = iVar5 + 0x20;
        FUN_0044bb10(iVar2, local_40);
        FUN_0044bb10(iVar5 + 0x108, local_40);
        if ((*(uint *)(iVar3 + 0x60) & 0x100000) != 0)
        {
            vec3f_multiply_add(iVar5 + 0x138, local_10, -1.0f, local_30);
            rdVector_Scale3(iVar5 + 0x30, -1.0f, iVar5 + 0x30);
            rdVector_Scale3(iVar2, -1.0f, iVar2);
            return;
        }
        vec3f_multiply_add(iVar5 + 0x138, local_10, 1.0f, local_30);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00452aa0(int param_1)

{
    undefined_32 *puVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;
    int iVar4;
    float fVar5;
    undefined_32 *puVar6;
    uint uVar7;
    int iVar8;
    bool bVar9;
    float fVar10;
    float *pfVar11;
    float local_dc;
    float local_d8;
    float local_d0;
    float local_cc;
    float local_c8;
    float local_c4;
    undefined_32 *local_c0;
    undefined_32 local_bc;
    undefined_32 local_b8;
    float local_b4;
    float local_b0;
    float local_ac;
    float local_a8;
    undefined_8 local_a4[48];
    float local_74;
    float local_70;
    float local_6c;
    undefined_8 local_64[16];
    float local_54[2];
    float local_4c;
    float local_44;
    float local_40;
    float local_3c;
    undefined_32 local_34;
    undefined_32 local_30;
    float local_2c;
    undefined_8 local_24[8];
    float local_1c;
    undefined_8 local_18[20];
    float local_4;

    iVar4 = *(int *)(param_1 + 0xf4);
    if (iVar4 == 0)
    {
        return;
    }
    uVar7 = *(uint *)(iVar4 + 0x60) & 0x20;
    local_c0 = (undefined_32 *)(uint)(uVar7 == 0);
    if ((uVar7 != 0) && (*(float *)(iVar4 + 0x1a0) < 50.0))
    {
        vec3f_multiply_add(param_1 + 0x254, param_1 + 0x254, (float)_DAT_00e22a40 * -20.0, iVar4 + 0x30);
    }
    bVar9 = (*(uint *)(iVar4 + 0x60) & 0x6000000) == 0;
    local_d0 = (float)(uint)!bVar9;
    *(undefined_32 *)(param_1 + 0x2b0) = 100.0f;
    iVar8 = **(int **)(*(int *)(iVar4 + 0x1e70) + 0x18);
    if (bVar9)
    {
        iVar8 = iVar8 * 0x6c;
        local_dc = *(float *)(&DAT_004c70d4 + iVar8);
        local_d8 = *(float *)(iVar4 + 0x19b4) * 0.75 + *(float *)(&DAT_004c70d8 + iVar8);
    }
    else
    {
        *(undefined_32 *)(param_1 + 0x148) = *(undefined_32 *)(&DAT_004c70d4 + iVar8 * 0x6c);
        local_d8 = *(float *)(&DAT_004c70d8 + **(int **)(*(int *)(iVar4 + 0x1e70) + 0x18) * 0x6c);
        *(float *)(param_1 + 0x14c) = local_d8;
        local_d8 = local_d8 + *(float *)(iVar4 + 0x19b4) * 0.75;
        *(float *)(param_1 + 0x14c) = local_d8;
        local_dc = *(float *)(param_1 + 0x148);
    }
    fVar10 = local_d8;
    if (*(int *)(param_1 + 0x7c) == 2)
    {
        local_dc = local_dc + local_dc;
        local_d8 = local_d8 + local_d8;
        if (30.0 < local_dc)
        {
            local_dc = 30.0;
        }
        if (15.0 < local_d8)
        {
            local_d8 = 15.0;
        }
        fVar10 = 8.0;
    }
    fVar5 = (*(float *)(iVar4 + 0x1a0) - 200.0) * 0.002631579;
    if (fVar5 < 0.0)
    {
        fVar5 = 0.0;
    }
    if (1.0 < fVar5)
    {
        fVar5 = 1.0;
    }
    fVar5 = fVar5 * 0.3 - -0.75;
    local_dc = local_dc * fVar5;
    local_d8 = local_d8 * fVar5;
    fVar10 = fVar10 * fVar5;
    iVar8 = FUN_0045d350();
    if (iVar8 == 2)
    {
        local_dc = local_dc * 1.3;
    }
    local_b0 = *(float *)(param_1 + 0x294) - *(float *)(param_1 + 0x254);
    local_ac = *(float *)(param_1 + 0x298) - *(float *)(param_1 + 600);
    local_a8 = *(float *)(param_1 + 0x29c) - *(float *)(param_1 + 0x25c);
    rdVector_Normalize3(&local_b0);
    iVar8 = *(int *)(param_1 + 0xf4);
    local_dc = ((1.0
                 - (*(float *)(iVar8 + 0x34) * local_ac + *(float *)(iVar8 + 0x30) * local_b0
                    + *(float *)(iVar8 + 0x38) * local_a8))
                    * 0.5
                - -1.0)
        * local_dc;
    if (bVar9)
    {
        local_dc = (local_dc + *(float *)(param_1 + 0x148)) * 0.5;
        local_d8 = (local_d8 + *(float *)(param_1 + 0x14c)) * 0.5;
        *(float *)(param_1 + 0x148) = local_dc;
        *(float *)(param_1 + 0x14c) = local_d8;
    }
    FUN_0044bb10(local_64, *(int *)(param_1 + 0xf4) + 0x20);
    local_2c = local_2c + *(float *)(iVar4 + 0x250);
    FUN_0044bb10(local_a4, local_64);
    vec3f_sub(&local_cc, param_1 + 0x254, &local_74);
    if (local_d0 != 0.0)
    {
        vec3f_multiply_add(&local_cc, &local_cc, -(local_c4 * local_3c + local_c8 * local_40 + local_cc * local_44),
                           &local_44);
        rdVector_Len3(&local_cc);
        rdVector_Normalize3(&local_cc);
        vec3f_multiply_add(&local_74, &local_74, local_dc, &local_cc);
        vec3f_multiply_add(&local_74, &local_74, local_d8, &local_44);
        vec3f_copy(local_24, &local_74);
        local_bc = local_34;
        local_b8 = local_30;
        pfVar11 = &local_44;
        local_b4 = local_2c;
        goto LAB_00452fd3;
    }
    local_c4 = local_d0;
    rdVector_Len3(&local_cc);
    rdVector_Normalize3(&local_cc);
    if (local_c0 == NULL)
    {
        vec3f_multiply_add(&local_74, &local_74, local_dc, &local_cc);
        local_6c = local_d8 + local_6c;
    }
    else if (DAT_0050c8a4 == 0)
    {
        local_dc = local_dc * -0.9;
    LAB_00452e39:
        local_6c = local_d8 + local_6c;
        local_74 = local_74 - local_dc;
    }
    else
    {
        if (DAT_0050c8a4 == 1)
        {
            local_dc = local_dc * -0.8;
        }
        else
        {
            if (DAT_0050c8a4 == 2)
            {
                local_dc = local_dc * 0.6;
                goto LAB_00452e39;
            }
            local_dc = local_dc * 0.7;
        }
        local_6c = local_d8 + local_6c;
        local_70 = local_70 - local_dc;
    }
    vec3f_copy(local_24, &local_74);
    local_b4 = fVar10 + local_2c;
    local_bc = local_34;
    local_b8 = local_30;
    pfVar11 = local_54;
    fVar10 = *(float *)(iVar4 + 0x1e8) * 20.0;
LAB_00452fd3:
    vec3f_multiply_add(&local_bc, &local_bc, fVar10, pfVar11);
    if ((local_d0 == 0.0) && (local_4c < 0.0))
    {
        fVar10 = local_4c * local_4c * 30.0;
        if (20.0 < fVar10)
        {
            fVar10 = 20.0;
        }
        local_1c = local_1c + fVar10;
    }
    FUN_00430b80(*(int *)(param_1 + 0xf4) + 0x20, local_18);
    local_d8 = local_4 * 0.005555556;
    if (local_d0 == 0.0)
    {
        local_d8 = local_d8 * local_d8 * local_d8 * 180.0;
        fVar10 = local_d8;
        if (local_d8 < 0.0)
        {
            fVar10 = -local_d8;
        }
        local_4 = local_4 * 0.25;
        fVar5 = local_4;
        if (local_4 < 0.0)
        {
            fVar5 = -local_4;
        }
        if (fVar10 <= fVar5)
        {
            local_d8 = local_4;
        }
    }
    else
    {
        local_d8 = local_d8 * 180.0;
    }
    mat_set_rotation(local_a4, 0, 0, local_d8);
    vec3f_copy(&local_74, local_24);
    FUN_0044bb10((undefined_32 *)(param_1 + 0x224), local_a4);
    FUN_0044bb10(local_a4, *(int *)(param_1 + 0xf4) + 0x20);
    vec3f_copy(&local_74, &local_bc);
    FUN_0044bb10((undefined_32 *)(param_1 + 0x264), local_a4);
    local_c0 = (undefined_32 *)(param_1 + 0x20);
    puVar1 = (undefined_32 *)(param_1 + 0x50);
    *local_c0 = *(undefined_32 *)(param_1 + 0x224);
    *(undefined_32 *)(param_1 + 0x24) = *(undefined_32 *)(param_1 + 0x228);
    *(undefined_32 *)(param_1 + 0x28) = *(undefined_32 *)(param_1 + 0x22c);
    *(undefined_32 *)(param_1 + 0x2c) = *(undefined_32 *)(param_1 + 0x230);
    puVar2 = (undefined_32 *)(param_1 + 0x30);
    *puVar2 = *(undefined_32 *)(param_1 + 0x234);
    *(undefined_32 *)(param_1 + 0x34) = *(undefined_32 *)(param_1 + 0x238);
    *(undefined_32 *)(param_1 + 0x38) = *(undefined_32 *)(param_1 + 0x23c);
    *(undefined_32 *)(param_1 + 0x3c) = *(undefined_32 *)(param_1 + 0x240);
    *(undefined_32 *)(param_1 + 0x40) = *(undefined_32 *)(param_1 + 0x244);
    *(undefined_32 *)(param_1 + 0x44) = *(undefined_32 *)(param_1 + 0x248);
    *(undefined_32 *)(param_1 + 0x48) = *(undefined_32 *)(param_1 + 0x24c);
    *(undefined_32 *)(param_1 + 0x4c) = *(undefined_32 *)(param_1 + 0x250);
    *puVar1 = *(undefined_32 *)(param_1 + 0x254);
    *(undefined_32 *)(param_1 + 0x54) = *(undefined_32 *)(param_1 + 600);
    *(undefined_32 *)(param_1 + 0x5c) = *(undefined_32 *)(param_1 + 0x260);
    *(undefined_32 *)(param_1 + 0x58) = *(undefined_32 *)(param_1 + 0x25c);
    *(undefined_32 *)(param_1 + 0x108) = *(undefined_32 *)(param_1 + 0x264);
    *(undefined_32 *)(param_1 + 0x10c) = *(undefined_32 *)(param_1 + 0x268);
    *(undefined_32 *)(param_1 + 0x110) = *(undefined_32 *)(param_1 + 0x26c);
    *(undefined_32 *)(param_1 + 0x114) = *(undefined_32 *)(param_1 + 0x270);
    *(undefined_32 *)(param_1 + 0x118) = *(undefined_32 *)(param_1 + 0x274);
    *(undefined_32 *)(param_1 + 0x11c) = *(undefined_32 *)(param_1 + 0x278);
    *(undefined_32 *)(param_1 + 0x120) = *(undefined_32 *)(param_1 + 0x27c);
    *(undefined_32 *)(param_1 + 0x124) = *(undefined_32 *)(param_1 + 0x280);
    *(undefined_32 *)(param_1 + 0x128) = *(undefined_32 *)(param_1 + 0x284);
    *(undefined_32 *)(param_1 + 300) = *(undefined_32 *)(param_1 + 0x288);
    puVar3 = (undefined_32 *)(param_1 + 0x138);
    *(undefined_32 *)(param_1 + 0x130) = *(undefined_32 *)(param_1 + 0x28c);
    *(undefined_32 *)(param_1 + 0x134) = *(undefined_32 *)(param_1 + 0x290);
    *puVar3 = *(undefined_32 *)(param_1 + 0x294);
    *(undefined_32 *)(param_1 + 0x13c) = *(undefined_32 *)(param_1 + 0x298);
    *(undefined_32 *)(param_1 + 0x140) = *(undefined_32 *)(param_1 + 0x29c);
    *(undefined_32 *)(param_1 + 0x144) = *(undefined_32 *)(param_1 + 0x2a0);
    if ((*(uint *)(iVar4 + 0x60) & 0x100000) != 0)
    {
        FUN_0044bb10(local_64, iVar4 + 0x20);
        puVar6 = local_c0;
        local_2c = local_2c + *(float *)(iVar4 + 0x250);
        FUN_0044bb10(local_c0, local_64);
        FUN_0044bb10((undefined_32 *)(param_1 + 0x108), local_64);
        rdVector_Scale3(puVar2, -1.0f, puVar2);
        rdVector_Scale3(puVar6, -1.0f, puVar6);
        vec3f_multiply_add(puVar3, puVar3, -1.0f, local_54);
        vec3f_multiply_add(puVar1, puVar1, *(float *)(iVar4 + 0xa8) + *(float *)(iVar4 + 0xa8), local_54);
        vec3f_multiply_add(puVar3, puVar3, *(float *)(iVar4 + 0xa8) * 0.2, &local_44);
        vec3f_multiply_add(puVar1, puVar1, *(float *)(iVar4 + 0xa8) * 0.2, &local_44);
    }
    return;
}

void FUN_004533a0(int param_1)

{
    undefined_32 *puVar1;
    int iVar2;
    float fVar3;
    undefined_32 uVar4;
    int iVar5;
    undefined_32 *puVar6;
    undefined_32 *puVar7;
    undefined_8 local_c0[48];
    float local_90;
    float local_8c;
    float local_88;
    undefined_8 local_80[48];
    float local_50;
    float local_48;
    undefined_8 local_40[48];
    float local_10;
    float local_c;
    float local_8;

    iVar2 = *(int *)(param_1 + 0xf4);
    if (iVar2 == 0)
    {
        uVar4 = FUN_00450aa0(MAGIC('T', 'e', 's', 't'), 0);
        *(undefined_32 *)(param_1 + 0xf4) = uVar4;
        return;
    }
    FUN_0044bb10(local_c0, iVar2 + 0x20);
    local_88 = *(float *)(iVar2 + 0x250) + local_88;
    puVar1 = (undefined_32 *)(param_1 + 0x84);
    puVar6 = (undefined_32 *)(iVar2 + 0xac);
    puVar7 = puVar1;
    QMEMCPY(iVar5, puVar6, puVar7, 0xc)
    *(undefined_32 *)(param_1 + 0x88) = 0;
    FUN_0044ed80(puVar1, param_1 + 0xb4);
    FUN_0044eeb0(puVar1, local_40, 0xbc23d70a);
    local_10 = local_10 - *(float *)(param_1 + 0xe4);
    local_c = local_c - *(float *)(param_1 + 0xe8);
    local_8 = local_8 - *(float *)(param_1 + 0xec);
    fVar3 = local_8 * local_8 + local_c * local_c + local_10 * local_10;
    if (0.001 < fVar3)
    {
        fVar3 = ((local_8 * local_88 + local_c * local_8c + local_10 * local_90)
                 - (local_c * *(float *)(param_1 + 0xe8) + local_10 * *(float *)(param_1 + 0xe4)
                    + local_8 * *(float *)(param_1 + 0xec)))
            / fVar3;
        if (1.0 < fVar3)
        {
            fVar3 = 1.0;
        }
    }
    else
    {
        fVar3 = 0.0;
    }
    *(float *)(param_1 + 0x8c) = *(float *)(param_1 + 0x8c) - fVar3 * 0.01;
    FUN_0044ed80(puVar1, param_1 + 0xb4);
    FUN_0044bb10(local_80, param_1 + 0xb4);
    local_48 = local_88 - -5.0;
    local_50 = local_50 - -7.0;
    FUN_0044bb10(param_1 + 0x20, local_80);
    FUN_0044bb10(local_80, *(int *)(param_1 + 0xf4) + 0x20);
    FUN_0044bb10(param_1 + 0x108, local_80);
    *(undefined_32 *)(param_1 + 0x2b0) = 0x42700000;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004535c0(int param_1)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 local_88;
    undefined_8 local_80[16];
    undefined_8 local_70[8];
    undefined_32 local_68;
    undefined_8 local_60[16];
    undefined_8 local_50[16];
    undefined_8 local_40[16];
    undefined_8 local_30[16];
    undefined_8 local_20[16];
    undefined_8 local_10[16];

    iVar1 = FUN_0045d350();
    if (iVar1 == 1)
    {
        _DAT_0050c8a8 = _DAT_0050c8a8 - (float)_DAT_00e22a40 * -3.0;
        local_88 = 2.0f;
    }
    else
    {
        local_88 = 1.5f;
        iVar1 = FUN_0045d350();
        _DAT_0050c8a8 = (3.0 / (float)iVar1) * (float)_DAT_00e22a40 + _DAT_0050c8a8;
    }
    if (1.0 < _DAT_0050c8a8)
    {
        _DAT_0050c8a8 = -1.0;
    }
    iVar1 = *(int *)(param_1 + 0xf4);
    if (((iVar1 != 0) && ((*(uint *)(iVar1 + 0x60) & 0x8000000) != 0)) && (*(int *)(iVar1 + 0x254) != 0))
    {
        mat_set_identity(local_40);
        vec3f_sub(local_30, param_1 + 0x138, param_1 + 0x50);
        vec3f_copy(local_20, param_1 + 0x40);
        rdVector_Cross3(local_40, local_30, local_20);
        rdVector_Cross3(local_20, local_40, local_30);
        rdVector_Normalize3(local_40);
        rdVector_Normalize3(local_30);
        rdVector_Normalize3(local_20);
        vec3f_copy(local_10, param_1 + 0x50);
        if (*(int *)(iVar1 + 0x254) != 0)
        {
            FUN_00431a50(*(int *)(iVar1 + 0x254), 2, 3, 0x10, 2);
        }
        uVar2 = __ftol();
        FUN_0042b640(*(undefined_32 *)(iVar1 + 0x254), 0, 0, 0x59, 0x8c, 0x36, uVar2);
        mat_set_identity(local_80);
        vec3f_sub(local_70, iVar1 + 600, iVar1 + 0x50);
        local_68 = 0;
        rdVector_Normalize3(local_70);
        rdVector_Cross3(local_80, local_70, local_60);
        rdVector_Cross3(local_60, local_80, local_70);
        rdVector_Normalize3(local_80);
        rdVector_Normalize3(local_60);
        mat_multiply_rows(local_80, 0xbc75c28f, 0x3c75c28f, 0xbbf5c28f, local_80);
        vec3f_copy(local_50, local_10);
        vec3f_multiply_add(local_50, local_50, 5.0f, local_30);
        vec3f_multiply_add(local_50, local_50, local_88, local_20);
        vec3f_multiply_add(local_50, local_50, 0, local_40);
        vec3f_multiply_add(local_50, local_50, _DAT_0050c8a8 * 100.0, local_70);
        FUN_00431640(*(undefined_32 *)(iVar1 + 0x254), local_80);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004538d0(float param_1)

{
    float fVar1;
    uint uVar2;
    int iVar3;
    float fVar4;
    undefined_32 uVar5;
    int iVar6;
    int iVar7;
    uint uVar8;
    undefined_32 uVar9;
    float fVar10;
    float local_10;

    iVar6 = (int)param_1;
    if (DAT_0050c894 == 0)
    {
        if ((*(byte *)((int)param_1 + 0x2a8) & 1) == 0)
        {
            param_1 = -1.0;
        }
        else
        {
            if (0.0 < *(float *)((int)param_1 + 0x2d8))
            {
                if (*(float *)((int)param_1 + 0x2d4) <= *(float *)((int)param_1 + 0x2d8))
                {
                    fVar1 = *(float *)((int)param_1 + 0x2d4) - (float)_DAT_00e22a40 * -2000.0;
                    *(float *)((int)param_1 + 0x2d4) = fVar1;
                    if (*(float *)((int)param_1 + 0x2d8) < fVar1)
                    {
                        *(undefined_32 *)((int)param_1 + 0x2d4) = *(undefined_32 *)((int)param_1 + 0x2d8);
                        goto LAB_0045399a;
                    }
                }
                else
                {
                    fVar1 = *(float *)((int)param_1 + 0x2d4) - (float)_DAT_00e22a40 * 2000.0;
                    *(float *)((int)param_1 + 0x2d4) = fVar1;
                    if (fVar1 < *(float *)((int)param_1 + 0x2d8))
                    {
                        *(undefined_32 *)((int)param_1 + 0x2d4) = *(undefined_32 *)((int)param_1 + 0x2d8);
                    LAB_0045399a:
                        *(undefined_32 *)((int)param_1 + 0x2d8) = -1.0f;
                    }
                }
            }
            param_1 = *(float *)((int)param_1 + 0x2d4);
        }
        local_10 = *(float *)(iVar6 + 0x2b4);
    }
    else
    {
        local_10 = DAT_004c3ee0;
        param_1 = DAT_004c3edc;
    }
    if (DAT_0050c898 == 0)
    {
        DAT_004c3ed8 = *(float *)(iVar6 + 0x2b0);
    }
    fVar10 = DAT_004c3ed8;
    fVar1 = *(float *)(iVar6 + 0x2b8);
    DAT_004c3edc = param_1;
    DAT_004c3ee0 = local_10;
    if (DAT_0050c890 == 0)
    {
        uVar8 = *(uint *)(iVar6 + 0x2a8) & 2;
        if ((uVar8 != 0) && (0.0 <= *(float *)(iVar6 + 0x2e0)))
        {
            if (*(float *)(iVar6 + 0x2dc) <= *(float *)(iVar6 + 0x2e0))
            {
                fVar4 = *(float *)(iVar6 + 0x2dc) - (float)_DAT_00e22a40 * -5.0;
                *(float *)(iVar6 + 0x2dc) = fVar4;
                if (*(float *)(iVar6 + 0x2e0) < fVar4)
                {
                    *(undefined_32 *)(iVar6 + 0x2dc) = *(undefined_32 *)(iVar6 + 0x2e0);
                    goto LAB_00453abc;
                }
            }
            else
            {
                fVar4 = *(float *)(iVar6 + 0x2dc) - (float)_DAT_00e22a40 * 5.0;
                *(float *)(iVar6 + 0x2dc) = fVar4;
                if (fVar4 < *(float *)(iVar6 + 0x2e0))
                {
                    *(undefined_32 *)(iVar6 + 0x2dc) = *(undefined_32 *)(iVar6 + 0x2e0);
                LAB_00453abc:
                    *(undefined_32 *)(iVar6 + 0x2e0) = -1.0f;
                }
            }
        }
        DAT_004c3ee4 = __ftol();
        DAT_0050c89c = uVar8;
    }
    uVar8 = DAT_0050c89c;
    uVar5 = DAT_004c3ee4;
    if ((((0.0 <= fVar10) || (0.0 <= fVar1)) || (0.0 <= local_10)) || (0.0 <= param_1))
    {
        if ((DAT_0050ca14 == 0) || ((DAT_00dfb318 & 1) == 0))
        {
            uVar9 = *(undefined_32 *)(iVar6 + 0x74);
        }
        else
        {
            uVar9 = *(undefined_32 *)(iVar6 + 0x74);
            fVar10 = 120.0;
        }
        FUN_00483590(uVar9, fVar10, -1.0f, local_10, param_1, fVar1);
    }
    uVar2 = *(uint *)(iVar6 + 0x2a8);
    if ((uVar2 & 0x10) != 0)
    {
        *(undefined_32 *)(iVar6 + 700) = *(undefined_32 *)(iVar6 + 0x2c8);
        *(undefined_32 *)(iVar6 + 0x2c0) = *(undefined_32 *)(iVar6 + 0x2cc);
        *(undefined_32 *)(iVar6 + 0x2c4) = *(undefined_32 *)(iVar6 + 0x2d0);
        goto LAB_00453cc7;
    }
    iVar3 = *(int *)(iVar6 + 0x2c8);
    if (iVar3 < *(int *)(iVar6 + 700))
    {
        iVar7 = __ftol();
        *(int *)(iVar6 + 700) = iVar7;
        if (iVar7 < iVar3)
        {
        LAB_00453bfd:
            *(int *)(iVar6 + 700) = iVar3;
        }
    }
    else if (*(int *)(iVar6 + 700) < iVar3)
    {
        iVar7 = __ftol();
        *(int *)(iVar6 + 700) = iVar7;
        if (iVar3 < iVar7)
            goto LAB_00453bfd;
    }
    iVar3 = *(int *)(iVar6 + 0x2cc);
    if (iVar3 < *(int *)(iVar6 + 0x2c0))
    {
        iVar7 = __ftol();
        *(int *)(iVar6 + 0x2c0) = iVar7;
        if (iVar7 < iVar3)
        {
        LAB_00453c5f:
            *(int *)(iVar6 + 0x2c0) = iVar3;
        }
    }
    else if (*(int *)(iVar6 + 0x2c0) < iVar3)
    {
        iVar7 = __ftol();
        *(int *)(iVar6 + 0x2c0) = iVar7;
        if (iVar3 < iVar7)
            goto LAB_00453c5f;
    }
    iVar3 = *(int *)(iVar6 + 0x2d0);
    if (iVar3 < *(int *)(iVar6 + 0x2c4))
    {
        iVar7 = __ftol();
        *(int *)(iVar6 + 0x2c4) = iVar7;
        if (iVar3 <= iVar7)
            goto LAB_00453cc7;
    }
    else
    {
        if (iVar3 <= *(int *)(iVar6 + 0x2c4))
            goto LAB_00453cc7;
        iVar7 = __ftol();
        *(int *)(iVar6 + 0x2c4) = iVar7;
        if (iVar7 <= iVar3)
            goto LAB_00453cc7;
    }
    *(int *)(iVar6 + 0x2c4) = iVar3;
LAB_00453cc7:
    if (uVar8 == 0)
    {
        FUN_0044e0c0(0);
    }
    else
    {
        *(uint *)(iVar6 + 0x2a8) = uVar2 & 0xffffffef;
        FUN_0044e0c0(1);
        FUN_0044e0e0(uVar5, 1000, *(undefined_32 *)(iVar6 + 700), *(undefined_32 *)(iVar6 + 0x2c0),
                     *(undefined_32 *)(iVar6 + 0x2c4), 0xff);
        FUN_00483a60(*(undefined_32 *)(iVar6 + 700), *(undefined_32 *)(iVar6 + 0x2c0),
                     *(undefined_32 *)(iVar6 + 0x2c4));
    }
    FUN_00466e40(iVar6 + 0x50, *(undefined_32 *)(iVar6 + 0x2a8));
    if (DAT_0050ccf0 != 0)
    {
        if ((*(byte *)(iVar6 + 0x2a8) & 4) == 0)
        {
            (&DAT_00e226fe)[*(int *)(iVar6 + 0x74) * 6] = 1;
        }
        else
        {
            (&DAT_00e226fe)[*(int *)(iVar6 + 0x74) * 6] = 0;
        }
        if (uVar8 != 0)
        {
            (&DAT_00e226f4)[*(int *)(iVar6 + 0x74) * 6] = 1;
            (&DAT_00e226f6)[*(int *)(iVar6 + 0x74) * 6] = (short)uVar5;
            (&DAT_00e226f8)[*(int *)(iVar6 + 0x74) * 6] = *(undefined_16 *)(iVar6 + 700);
            (&DAT_00e226fa)[*(int *)(iVar6 + 0x74) * 6] = *(undefined_16 *)(iVar6 + 0x2c0);
            (&DAT_00e226fc)[*(int *)(iVar6 + 0x74) * 6] = *(undefined_16 *)(iVar6 + 0x2c4);
            return;
        }
        (&DAT_00e226f4)[*(int *)(iVar6 + 0x74) * 6] = 0;
    }
    return;
}

// seem to manage an array of model data
void FUN_00454bc0(undefined_32 param_1, int param_2, int param_3, int param_4)

{
    undefined_32 *puVar1;
    undefined_32 uVar2;

    (&DAT_00e29900)[param_3] = 0;
    (&DAT_00e29160)[param_3] = 0;
    (&DAT_00e2afa0)[param_3] = 0;
    puVar1 = (undefined_32 *)models_load(param_1);
    if (-1 < param_2)
    {
        uVar2 = models_load(param_2);
        FUN_00448c70(puVar1, uVar2);
    }
    if (puVar1 != NULL)
    {
        if (0x96 < param_3)
        {
            do
            {
                // WARNING: Do nothing block with infinite loop
            } while (true);
        }
        (&DAT_00e29900)[param_3] = puVar1;
        (&DAT_00e29160)[param_3] = *puVar1;
        if (param_4 != 0)
        {
            uVar2 = FUN_00448bd0(puVar1);
            (&DAT_00e2afa0)[param_3] = uVar2;
        }
    }
    FUN_00483fc0(&DAT_00e2a660);
    FUN_004337d0();
    return;
}

void FUN_00454c60(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00e29160;
    MEMSET(iVar1, puVar2, 0, 0x97)
    puVar2 = &DAT_00e29900;
    MEMSET(iVar1, puVar2, 0, 0x97)
    FUN_004258e0();
    return;
}

void FUN_00454c90(void)

{
    undefined_32 uVar1;
    int iVar2;

    FUN_004258e0();
    iVar2 = 0;
    do
    {
        if (*(int *)((int)&DAT_00e29900 + iVar2) != 0)
        {
            uVar1 = FUN_00448bd0(*(int *)((int)&DAT_00e29900 + iVar2));
            *(undefined_32 *)((int)&DAT_00e2afa0 + iVar2) = uVar1;
        }
        iVar2 = iVar2 + 4;
    } while (iVar2 < 0x25c);
    return;
}

void FUN_00454cc0(void)

{
    int *piVar1;
    int *piVar2;
    int **ppiVar3;

    ppiVar3 = (int **)&DAT_00e29914;
    do
    {
        piVar1 = *ppiVar3;
        if (piVar1 != NULL)
        {
            piVar2 = &DAT_00e29160;
            do
            {
                if (*piVar2 == *piVar1)
                {
                    *piVar2 = 0;
                }
                piVar2 = piVar2 + 1;
            } while ((int)piVar2 < 0xe293bc);
            *ppiVar3 = NULL;
        }
        ppiVar3 = ppiVar3 + 1;
    } while ((int)ppiVar3 < 0xe29b5c);
    FUN_004258e0();
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00454d10(void)

{
    FUN_00431b20(&DAT_00e2a660, 0x5064);
    _DAT_00e2a674 = 0x97;
    _DAT_00e2a678 = &DAT_00e29160;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// certainly menu related
void FUN_00454d40(int param_1, int param_2)

{
    int iVar1;
    undefined_32 uVar2;
    char *pcVar3;
    undefined_8 local_100[256];

    DAT_0050c530 = 1;
    if (param_1 == 0)
    {
        do
        {
            // WARNING: Do nothing block with infinite loop
        } while (true);
    }
    if (*(uint *)(param_1 + 0x14) == 0)
    {
        do
        {
            // WARNING: Do nothing block with infinite loop
        } while (true);
    }
    if ((*(uint *)(param_1 + 0x14) & 1) != 0)
    {
        DAT_0050c468 = 0;
        *(undefined_32 *)(param_1 + 0xc) = *(undefined_32 *)(param_1 + 8);
        *(int *)(param_1 + 8) = param_2;
        *(undefined_32 *)(param_1 + 0x3c) = *(undefined_32 *)(param_1 + 0x38);
        DAT_004bfedc = -1;
        DAT_004c4000 = 1;
        *(undefined_32 *)(param_1 + 0x54) = 0;
        *(undefined_32 *)(param_1 + 0x58) = 0;
        *(undefined_8 *)(param_1 + 0x5c) = 1;
        if (((DAT_0050c944 != 0) || (*(int *)(param_1 + 0x38) == 3))
            || ((*(int *)(param_1 + 0xc) != 3 && (*(int *)(param_1 + 8) != 3))))
        {
            if (*(int *)(param_1 + 8) != 0)
            {
                FUN_004586e0(param_1);
                FUN_00459150(param_1);
            }
            _DAT_00e295d8 = 0;
            DAT_00e295dc = 0;
            DAT_00e295e0 = 0;
            *(uint *)(param_1 + 0x14) = *(uint *)(param_1 + 0x14) | 4;
        }
    }
    if (DAT_0050c968 != 0)
    {
        FUN_00414e60(DAT_0050c968, 0);
    }
    DAT_0050c968 = 0;
    if (DAT_004d5e00 != 0)
        goto LAB_00454e83;
    switch (param_2)
    {
    case 3:
        uVar2 = 0x84;
        break;
    case 4:
        uVar2 = 0x87;
        break;
    default:
        goto switchD_00454e2b_caseD_5;
    case 7:
        uVar2 = 0x85;
        break;
    case 8:
        uVar2 = 0x88;
        break;
    case 9:
        DAT_004d6b6c = 1;
        uVar2 = 0x81;
        break;
    case 0xc:
        uVar2 = 0x82;
        break;
    case 0xd:
        uVar2 = 0x83;
    }
    DAT_0050c968 = FUN_00414d90(0, uVar2);
switchD_00454e2b_caseD_5:
    if (DAT_0050c968 != 0)
    {
        FUN_00414e60(DAT_0050c968, 1);
    }
LAB_00454e83:
    DAT_004d6b48 = 0;
    DAT_004d6b40 = 0;
    DAT_00ec8748 = 0;
    DAT_00ec8744 = 0;
    FUN_004336f0(param_1);
    iVar1 = FUN_0041d6b0();
    if ((iVar1 != 0) && (iVar1 = FUN_0041d6c0(), iVar1 != 0))
    {
        if (param_2 == 3)
        {
            DAT_00ea05a0 = 3;
            pcVar3 = s_Setting_hanger_state_to_HANGAR_S_004c4680;
        }
        else if (param_2 == 0xc)
        {
            DAT_00ea05a0 = 0xc;
            pcVar3 = s_Setting_hanger_state_to_HANGAR_S_004c46b0;
        }
        else if (param_2 == 0xd)
        {
            DAT_00ea05a0 = 0xd;
            pcVar3 = s_Setting_hanger_state_to_HANGAR_S_004c46e4;
        }
        else
        {
            DAT_00ea05a0 = 0x13;
            pcVar3 = s_Setting_hanger_state_to_HANGAR_S_004c4718;
        }
        FUN_00426910(pcVar3);
        FUN_0041e5a0();
    }
    switch (*(undefined_32 *)(param_1 + 8))
    {
    case 0:
        pcVar3 = s_LEGAL_004c4678;
        break;
    case 1:
        pcVar3 = s_SPLASH_004c4670;
        break;
    case 2:
        pcVar3 = s_ENTER_NAME_004c4664;
        break;
    case 3:
        pcVar3 = s_MAIN_MENU_004c4650;
        break;
    case 4:
        pcVar3 = s_JUNKYARD_004c4644;
        break;
    case 5:
        pcVar3 = s_POST_RACE_INFO_004c4634;
        break;
    default:
        pcVar3 = s__Unknown_state__004c45dc;
        break;
    case 7:
        pcVar3 = s_WATTO_004c465c;
        break;
    case 8:
        pcVar3 = s_LOOK_AT_VEHICLE_004c4620;
        break;
    case 9:
        pcVar3 = s_SELECT_VEHICLE_004c4610;
        break;
    case 0xc:
        pcVar3 = s_SELECT_PLANET_004c4600;
        break;
    case 0xd:
        pcVar3 = s_SELECT_TRACK_004c45f0;
    }
    _sprintf(local_100, pcVar3);
    switch (*(undefined_32 *)(param_1 + 8))
    {
    case 1:
    case 2:
    case 5:
    case 9:
    case 0xc:
    case 0xd:
        FUN_00427690(0, 0x80000000);
        break;
    default:
        FUN_004276a0(0, 0x80000000);
    }
    if (*(int *)(param_1 + 8) == 4)
    {
        if (*(int *)(param_1 + 0x3c) != 1)
        {
            FUN_00427690(0, 0x20);
            FUN_004276a0(0, 1);
        }
    }
    else if ((*(int *)(param_1 + 8) == 7) && ((*(int *)(param_1 + 0x3c) != 0 || (*(int *)(param_1 + 0xc) == 3))))
    {
        FUN_00427690(0, 0x20);
        FUN_00427690(0, 1);
    }
    DAT_00e2a67c = *(undefined_32 *)(param_1 + 8);
    if (DAT_004bfecc != -1)
    {
        *(int *)(param_1 + 0x10) = DAT_004bfecc;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004550d0(int param_1, undefined_32 param_2, float param_3)

{
    byte bVar1;
    ushort uVar2;
    short *psVar3;
    undefined_32 uVar4;
    uint uVar5;
    uint uVar6;
    uint unaff_EBX;
    uint uVar7;
    int iVar8;
    uint unaff_EDI;
    int iVar9;
    undefined_32 uVar10;
    undefined_32 uVar11;
    uint local_8;

    uVar7 = -1;
    uVar6 = 0;
    psVar3 = &DAT_00e2a6b0;
    do
    {
        if (*psVar3 != 0)
        {
            uVar7 = uVar6;
        }
        psVar3 = psVar3 + 1;
        uVar6 = uVar6 + 1;
    } while ((int)psVar3 < 0xe2a6be);
    sprite_enable_display(0x57, 1);
    uVar4 = __ftol();
    uVar4 = __ftol(uVar4);
    sprite_set_pos(0x57, uVar4);
    bVar1 = __ftol();
    uVar6 = unaff_EBX & 0xffffff00 | (uint)bVar1;
    sprite_set_color(0x57, 0xffffffa3, 0xffffffbe, 0x11, uVar6);
    uVar2 = __ftol();
    uVar5 = unaff_EDI & 0xffff0000 | (uint)uVar2;
    uVar4 = lookup_translation(s__SCREENTEXT_475__f4_sVehicle_Sta_004c4820);
    uVar4 = __ftol(0x32, -1, -1, uVar6, uVar4);
    create_text_entry_0(uVar5, uVar4);
    iVar8 = 0x58;
    do
    {
        sprite_enable_display(iVar8, 1);
        uVar4 = __ftol();
        sprite_set_pos(iVar8, uVar5, uVar4);
        sprite_set_color(iVar8, 0x32, -1, -1, uVar6);
        iVar8 = iVar8 + 1;
    } while (iVar8 < 0x5f);
    uVar4 = lookup_translation(s__SCREENTEXT_403__f4_sTraction_004c4800);
    uVar4 = __ftol(0x32, -1, -1, uVar6, uVar4);
    create_text_entry_0(uVar5, uVar4);
    uVar4 = lookup_translation(s__SCREENTEXT_404__f4_sTurning_004c47e0);
    uVar4 = __ftol(0x32, -1, -1, uVar6, uVar4);
    create_text_entry_0(uVar5, uVar4);
    uVar4 = lookup_translation(s__SCREENTEXT_405__f4_sAccel__004c47c4);
    uVar4 = __ftol(0x32, -1, -1, uVar6, uVar4);
    create_text_entry_0(uVar5, uVar4);
    uVar4 = lookup_translation(s__SCREENTEXT_406__f4_sTop_Speed_004c47a4);
    uVar4 = __ftol(0x32, -1, -1, uVar6, uVar4);
    create_text_entry_0(uVar5, uVar4);
    uVar4 = lookup_translation(s__SCREENTEXT_407__f4_sAir_Brake_004c4784);
    uVar4 = __ftol(0x32, -1, -1, uVar6, uVar4);
    create_text_entry_0(uVar5, uVar4);
    uVar4 = lookup_translation(s__SCREENTEXT_408__f4_sCooling_004c4764);
    uVar4 = __ftol(0x32, -1, -1, uVar6, uVar4);
    create_text_entry_0(uVar5, uVar4);
    uVar4 = lookup_translation(s__SCREENTEXT_409__f4_sRepair_004c4748);
    uVar4 = __ftol(0x32, -1, -1, uVar6, uVar4);
    create_text_entry_0(uVar5, uVar4);
    sprite_enable_display(0x5f, 1);
    uVar4 = __ftol();
    uVar4 = __ftol(uVar4);
    sprite_set_pos(0x5f, uVar4);
    sprite_set_color(0x5f, 0x32, -1, -1, uVar6);
    sprite_enable_display(0x60, 1);
    uVar4 = __ftol();
    uVar4 = __ftol(uVar4);
    sprite_set_pos(0x60, uVar4);
    sprite_set_color(0x60, 0x32, -1, -1, uVar6);
    if (-1 < (int)uVar7)
    {
        sprite_enable_display(0x61, 1);
        uVar4 = __ftol();
        uVar4 = __ftol(uVar4);
        sprite_set_pos(0x61, uVar4);
        sprite_set_color(0x61, 0x32, -1, -1, uVar6);
    }
    iVar8 = 0;
    uVar2 = __ftol();
    local_8 = (uint)(param_3 - -7.0) & 0xffff0000 | (uint)uVar2;
    do
    {
        iVar9 = DAT_0050c928 + 0x82;
        DAT_0050c928 = DAT_0050c928 + 1;
        sprite_enable_display(iVar9, 1);
        uVar2 = __ftol();
        uVar7 = uVar7 & 0xffff0000 | (uint)uVar2;
        sprite_set_pos(iVar9, local_8, uVar7);
        uVar5 = uVar6;
        if ((float)(&DAT_00e2aec0)[iVar8] == (float)(&DAT_00e2af40)[iVar8])
        {
            sprite_scale(iVar9, (float)(&DAT_00e2aec0)[iVar8] * 12.0, 0x3f200000);
            uVar11 = -1;
            uVar10 = -1;
            uVar4 = 0x32;
        LAB_00455698:
            sprite_set_color(iVar9, uVar4, uVar10, uVar11, uVar5);
        }
        else
        {
            if ((float)(&DAT_00e2aec0)[iVar8] < (float)(&DAT_00e2af40)[iVar8])
            {
                sprite_scale(iVar9, (float)(&DAT_00e2aec0)[iVar8] * 12.0, 0x3f200000);
                sprite_set_color(iVar9, 0x32, -1, -1, uVar6);
                iVar9 = DAT_0050c928 + 0x82;
                DAT_0050c928 = DAT_0050c928 + 1;
                sprite_enable_display(iVar9, 1);
                uVar4 = __ftol(uVar7);
                sprite_set_pos(iVar9, uVar4);
                sprite_scale(iVar9, ((float)(&DAT_00e2af40)[iVar8] - (float)(&DAT_00e2aec0)[iVar8]) * 12.0, 0x3f200000);
                rand();
                uVar5 = __ftol();
            LAB_00455692:
                uVar11 = 0x11;
                uVar10 = 0xffffffbe;
                uVar4 = 0xffffffa3;
                goto LAB_00455698;
            }
            sprite_scale(iVar9, (float)(&DAT_00e2af40)[iVar8] * 12.0, 0x3f200000);
            sprite_set_color(iVar9, 0x32, -1, -1, uVar6);
            iVar9 = DAT_0050c928 + 0x82;
            DAT_0050c928 = DAT_0050c928 + 1;
            sprite_enable_display(iVar9, 1);
            uVar4 = __ftol(uVar7);
            sprite_set_pos(iVar9, uVar4);
            sprite_scale(iVar9, ((float)(&DAT_00e2aec0)[iVar8] - (float)(&DAT_00e2af40)[iVar8]) * 12.0, 0x3f200000);
            rand();
            uVar4 = __ftol();
            sprite_set_color(iVar9, -1, 100, 100, uVar4);
            if (*(int *)(param_1 + 8) == 8)
                goto LAB_00455692;
        }
        iVar8 = iVar8 + 1;
        if (6 < iVar8)
        {
            return;
        }
    } while (true);
}

void FUN_004556c0(void)

{
    int iVar1;
    int iVar2;
    int **ppiVar3;

    iVar2 = 0;
    if (0 < DAT_00e295cc)
    {
        ppiVar3 = (int **)&DAT_00e29b38;
        do
        {
            iVar1 = **ppiVar3;
            if (iVar1 != 0)
            {
                if (iVar2 == DAT_0050c950)
                {
                    *(undefined_16 *)(iVar1 + 0xe) = 0;
                    *(uint *)(iVar1 + 0x10) = *(uint *)(iVar1 + 0x10) | 4;
                }
                else
                {
                    *(undefined_16 *)(iVar1 + 0xe) = 1;
                    *(uint *)(iVar1 + 0x10) = *(uint *)(iVar1 + 0x10) | 4;
                }
            }
            iVar2 = iVar2 + 1;
            ppiVar3 = ppiVar3 + 1;
        } while (iVar2 < DAT_00e295cc);
    }
    return;
}

void FUN_00455720(void)

{
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    vec3f_set(local_18, 255.0f, 255.0f, 255.0f);
    vec3f_set(local_24, 255.0f, 255.0f, 255.0f);
    vec3f_set(local_c, 0, 0x42f00000, 0);
    FUN_00483840(0, local_18, local_24, local_c);
    vec3f_set(local_18, 0, 0, 0);
    vec3f_set(local_24, 0x43000000, 0x43000000, 0x43000000);
    FUN_00483840(1, local_18, local_24, local_c);
    return;
}

void FUN_004557e0(float param_1, int param_2, int param_3, float param_4, undefined_32 param_5, float param_6,
                  float param_7)

{
    int iVar1;
    byte bVar2;
    undefined_32 uVar3;
    uint unaff_EBX;
    uint uVar4;

    if (*(int *)((int)param_1 + 8) == 8)
    {
        param_6 = 0.375;
        param_1 = 3.75;
    }
    else
    {
        param_1 = param_7 * 0.125;
        param_6 = (param_6 - 2.0) * 0.125;
        param_2 = param_2 + 3;
        param_3 = param_3 + 1;
    }
    iVar1 = DAT_0050c92c + 0x90;
    DAT_0050c92c = DAT_0050c92c + 1;
    sprite_enable_display(iVar1, 1);
    sprite_set_pos(iVar1, param_2, param_3);
    sprite_scale(iVar1, param_6, param_1 * (1.0 - param_4));
    bVar2 = __ftol();
    uVar4 = unaff_EBX & 0xffffff00 | (uint)bVar2;
    sprite_set_color(iVar1, 0, 0, 0, uVar4);
    iVar1 = DAT_0050c92c + 0x90;
    DAT_0050c92c = DAT_0050c92c + 1;
    sprite_enable_display(iVar1, 1);
    uVar3 = __ftol();
    sprite_set_pos(iVar1, param_2, uVar3);
    sprite_scale(iVar1, param_6, param_1 * param_4);
    uVar3 = __ftol(0, uVar4);
    uVar3 = __ftol(uVar3);
    sprite_set_color(iVar1, uVar3);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00455dc0(void)

{
    int iVar1;
    int iVar2;
    int **ppiVar3;
    undefined_32 *puVar4;
    undefined_8 local_c0[12];
    undefined_32 local_b4;
    undefined_8 local_b0[48];
    undefined_8 local_80[16];
    undefined_8 local_70[16];
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_8 local_30[12];
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    iVar2 = 0;
    if (0 < DAT_00e295cc)
    {
        puVar4 = &DAT_00e2a6c4;
        ppiVar3 = (int **)&DAT_00e29a88;
        do
        {
            iVar1 = **ppiVar3;
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
                local_b4 = 0.05f;
                vec3f_copy(local_30, puVar4);
                vec3f_set(local_24, puVar4[9], puVar4[10], 0);
                mat_set_rotation_translation(local_b0, local_30);
                if ((iVar2 == DAT_00e295d0) && ((DAT_0050c470 != 0 || (DAT_0050c954 != 0))))
                {
                    FUN_0044bb10(local_70, &DAT_00e298c0);
                    FUN_0044bb10(local_b0, &DAT_00e298c0);
                    vec3f_copy(local_80, puVar4);
                    if (DAT_0050c470 == 0)
                    {
                        if (DAT_0050c954 != 0)
                            goto LAB_00455f61;
                    }
                    else if (DAT_0050c954 == 0)
                    {
                        FUN_00431410(local_b0, local_b0, _DAT_0050c8f0 * 4.0, local_50, local_4c, local_48);
                        FUN_00431410(local_b0, local_b0, 45.0f, local_60, local_5c, local_58);
                        FUN_00431410(local_b0, local_b0, _DAT_0050c8f0 * -1.0, local_50, local_4c, local_48);
                    }
                    else
                    {
                    LAB_00455f61:
                        mat_set_rotation(local_b0, puVar4[9], 0, 0);
                    }
                    local_b4 = 0x3c23d70b;
                    vec3f_copy(local_80, puVar4);
                }
                mat_multiply_rows(local_b0, local_b4, local_b4, local_b4, local_b0);
                FUN_00431640(iVar1, local_b0);
                FUN_00431a50(iVar1, 2, 3, 0x10, 2);
            }
            iVar2 = iVar2 + 1;
            ppiVar3 = ppiVar3 + 1;
            puVar4 = puVar4 + 0xe;
        } while (iVar2 < DAT_00e295cc);
    }
    if ((((DAT_0050c470 != 0) && (DAT_0050c934 != 0)) && (DAT_0050c468 == 0))
        && (iVar2 = *(int *)(&DAT_00e29b38)[(char)(&DAT_004c1cbb)[(char)(&DAT_00e2a6c0)[DAT_00e295d0 * 0x38] * 0x10]],
            iVar2 != 0))
    {
        FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
        FUN_0043e210();
        FUN_0044bb10(local_70, &DAT_00e298c0);
        vec3f_copy(local_c0, &DAT_00e298f0);
        vec3f_multiply_add(local_c0, local_c0, 6.0f, &DAT_00e298c0);
        vec3f_multiply_add(local_c0, local_c0, 30.0f, &DAT_00e298d0);
        vec3f_multiply_add(local_c0, local_c0, 0x40600000, &DAT_00e298e0);
        vec3f_copy(local_18, local_c0);
        vec3f_set(local_c, 0, 0, 0);
        mat_set_rotation_translation(local_b0, local_18);
        FUN_00431410(local_b0, local_b0, _DAT_0050c8f0 * 4.0, local_50, local_4c, local_48);
        FUN_00431410(local_b0, local_b0, 45.0f, local_60, local_5c, local_58);
        FUN_00431410(local_b0, local_b0, _DAT_0050c8f0 * -1.0, local_50, local_4c, local_48);
        mat_multiply_rows(local_b0, 0x3b83126f, 0x3b83126f, 0x3b83126f, local_b0);
        vec3f_copy(local_80, local_c0);
        FUN_00431640(iVar2, local_b0);
        FUN_00431a50(iVar2, 2, 3, 0x10, 2);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00456200(void)

{
    float fVar1;
    float fVar2;
    int iVar3;
    int iVar4;
    int **ppiVar5;
    int iVar6;
    float10 fVar7;
    float10 fVar8;
    undefined_32 local_70;
    undefined_32 local_6c;
    float local_68;
    undefined_8 local_64[8];
    float local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_8 local_40[48];
    float local_10[2];
    float local_8;

    fVar7 = (float10)arctan2(_DAT_00e298f0 - _DAT_00e2af90, _DAT_00e2af94 - _DAT_00e298f4);
    local_70 = 80.0f;
    local_6c = 75.0f;
    iVar6 = 0;
    local_68 = 50.0;
    if (DAT_00e35aa0 != '\0')
    {
        ppiVar5 = (int **)&DAT_00e29a74;
        do
        {
            iVar3 = rand();
            fVar1 = (float)iVar3 * 4.656613e-10 * 2.5 - -2.0;
            FUN_0044afb0(ppiVar5[-0x29], local_64);
            if (-157.0 < local_5c)
            {
                if (*ppiVar5 == NULL)
                {
                    return;
                }
                iVar3 = **ppiVar5;
                if (iVar3 != 0)
                {
                    FUN_00431a50(iVar3, 2, 0xfffffffc, 0x10, 3);
                    FUN_0042b640(iVar3, 0, 0, 200, 200, 0xff, 0xff);
                    iVar4 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), iVar6 + 0x34);
                    fVar8 = (float10)FUN_0044b470(*(undefined_32 *)(iVar4 + 0x34));
                    if (((float10)(int)DAT_004c25f8 * (float10)0.0666 <= fVar8)
                        && (fVar8 = (float10)FUN_0044b470(*(undefined_32 *)(iVar4 + 0x34)),
                            fVar8 <= (float10)(int)DAT_004c25fa * (float10)0.0666))
                    {
                        local_70 = 80.0f;
                        local_6c = 75.0f;
                        iVar4 = rand();
                        local_68 = ((float)iVar4 * 4.656613e-10 * 120.0 - 30.0) - -50.0;
                        mat_set_rotation(local_40, (float)fVar7, 0, 0xc2b40000);
                        vec3f_copy(local_10, local_64);
                        if (0.0 <= local_10[0])
                        {
                            fVar2 = 30.0;
                        }
                        else
                        {
                            fVar2 = -30.0;
                        }
                        local_10[0] = local_10[0] - fVar2;
                        local_8 = local_8 - -13.0;
                        mat_multiply_rows(local_40, fVar1, fVar1, fVar1, local_40);
                        FUN_00431640(iVar3, local_40);
                        FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                    }
                }
                iVar3 = *ppiVar5[-4];
                if (iVar3 != 0)
                {
                    FUN_00431a50(iVar3, 2, 0xfffffffc, 0x10, 3);
                    mat_set_rotation(local_40, 0, 0, 0);
                    vec3f_copy(local_10, local_64);
                    mat_multiply_rows(local_40, 0.3f, 0.3f, 0.3f, local_40);
                    local_8 = local_8 - 30.0;
                    FUN_00431640(iVar3, local_40);
                    FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                    iVar3 = *ppiVar5[-0x52];
                    if (iVar3 != 0)
                    {
                        FUN_00431a50(iVar3, 2, 0xfffffffc, 0x10, 3);
                        mat_set_rotation(local_40, 0, 0, 0);
                        vec3f_copy(local_10, local_64);
                        mat_multiply_rows(local_40, 0.3f, 0.3f, 0.3f, local_40);
                        local_8 = -157.0;
                        FUN_00431640(iVar3, local_40);
                        FUN_00431a50(iVar3, 2, 3, 0x10, 2);
                    }
                }
            }
            iVar6 = iVar6 + 1;
            ppiVar5 = ppiVar5 + 1;
        } while (iVar6 < (int)(_DAT_00e35aa0 & 0xff));
    }
    local_4c = 255.0f;
    local_48 = 255.0f;
    local_44 = 200.0f;
    local_58 = 0;
    local_54 = 0;
    local_50 = 0xc71c4000;
    FUN_00483840(-1, &local_70, &local_4c, &local_58);
    return;
}

void FUN_004565e0(int param_1)

{
    int iVar1;
    int iVar2;
    bool bVar3;
    int iVar4;
    int *piVar5;
    int *piVar6;
    float *pfVar7;
    int iVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    int local_38;
    float local_34;
    int local_30;
    undefined_8 local_2c[4];
    int local_28[4];
    undefined_32 local_18;
    float local_14[4];
    undefined_32 local_4;

    local_28[0] = -1;
    local_28[1] = -1;
    local_28[2] = -1;
    local_28[3] = -1;
    local_14[1] = 0.0;
    local_18 = -1;
    local_14[2] = 0.0;
    local_14[3] = 0.0;
    local_4 = 0;
    iVar8 = 0;
    local_14[0] = 0.0;
    iVar10 = (&DAT_00e98f40)[param_1 * 0x17];
    iVar4 = (&DAT_00e98f44)[param_1 * 0x17] - iVar10;
    iVar1 = iVar4 + 3;
    local_38 = iVar4 + 2;
    local_30 = local_38;
    if (iVar10 <= (int)(&DAT_00e98f44)[param_1 * 0x17])
    {
        pfVar7 = (float *)(&DAT_00e293d4 + iVar10 * 0x18);
        do
        {
            sin_cos(pfVar7[-2], local_2c, &local_34);
            if (local_34 * pfVar7[-4] <= 0.0)
            {
                local_14[local_38] = *pfVar7;
                local_28[local_38] = (iVar10 - (&DAT_00e98f40)[param_1 * 0x17]) + 0x46;
                local_38 = local_38 + -1;
            }
            else
            {
                local_14[iVar8] = *pfVar7;
                local_28[iVar8] = (iVar10 - (&DAT_00e98f40)[param_1 * 0x17]) + 0x46;
                iVar8 = iVar8 + 1;
            }
            iVar10 = iVar10 + 1;
            pfVar7 = pfVar7 + 6;
        } while (iVar10 <= (int)(&DAT_00e98f44)[param_1 * 0x17]);
    }
    local_28[iVar8] = param_1 + 0x3d;
    local_28[iVar8 + 1] = 0x45;
    if (0 < iVar8 + -1)
    {
        iVar10 = 1;
        iVar9 = 0;
        iVar11 = iVar10;
        do
        {
            for (; iVar10 < iVar8; iVar10 = iVar10 + 1)
            {
                if (*(float *)((int)local_14 + iVar9) < local_14[iVar10])
                {
                    iVar2 = *(int *)((int)local_28 + iVar9);
                    *(int *)((int)local_28 + iVar9) = local_28[iVar10];
                    local_28[iVar10] = iVar2;
                }
            }
            iVar10 = iVar11 + 1;
            iVar9 = iVar9 + 4;
            bVar3 = iVar11 < iVar8 + -1;
            iVar11 = iVar10;
        } while (bVar3);
    }
    if (local_38 < local_30)
    {
        iVar10 = local_38 * 4;
        do
        {
            local_38 = local_38 + 1;
            for (iVar8 = local_38; iVar8 < iVar1; iVar8 = iVar8 + 1)
            {
                if (local_14[iVar8] < *(float *)((int)local_14 + iVar10))
                {
                    iVar11 = *(int *)((int)local_28 + iVar10);
                    *(int *)((int)local_28 + iVar10) = local_28[iVar8];
                    local_28[iVar8] = iVar11;
                }
            }
            iVar10 = iVar10 + 4;
        } while (local_38 < local_30);
        iVar10 = 0;
        piVar6 = &DAT_00e29160;
    }
    else
    {
        iVar10 = 0;
        piVar6 = &DAT_00e29160;
    }
    do
    {
        iVar8 = 0;
        if (0 < iVar1)
        {
            piVar5 = local_28 + iVar10;
            do
            {
                if (*(int *)(&DAT_00e29900)[local_28[iVar8]] == *piVar6)
                {
                    iVar8 = *piVar5;
                    iVar10 = iVar10 + 1;
                    piVar5 = piVar5 + 1;
                    *piVar6 = *(int *)(&DAT_00e29900)[iVar8];
                    iVar8 = iVar4 + 4;
                }
                iVar8 = iVar8 + 1;
            } while (iVar8 < iVar1);
        }
        piVar6 = piVar6 + 1;
    } while ((int)piVar6 < 0xe293bc);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00456800(undefined_32 param_1, int param_2, float param_3)

{
    int iVar1;
    float fVar2;
    int iVar3;
    float *pfVar4;
    int **ppiVar5;
    float local_54;
    float local_50;
    undefined_8 local_4c[12];
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    ppiVar5 = (int **)&DAT_00e299f4;
    pfVar4 = (float *)&DAT_00e98f4c;
    do
    {
        fVar2 = pfVar4[1] * _DAT_00e22a50 + *pfVar4;
        *pfVar4 = fVar2;
        if (360.0 < fVar2)
        {
            *pfVar4 = fVar2 - 360.0;
        }
        if (*pfVar4 < 0.0)
        {
            *pfVar4 = *pfVar4 - -360.0;
        }
        fVar2 = pfVar4[3] * _DAT_00e22a50 + pfVar4[2];
        pfVar4[2] = fVar2;
        if (360.0 < fVar2)
        {
            pfVar4[2] = fVar2 - 360.0;
        }
        if (pfVar4[2] < 0.0)
        {
            pfVar4[2] = pfVar4[2] - -360.0;
        }
        if ((*ppiVar5 != NULL) && (iVar3 = **ppiVar5, iVar3 != 0))
        {
            FUN_00431a50(iVar3, 2, 0xfffffffc, 0x10, 3);
        }
        pfVar4 = pfVar4 + 0x17;
        ppiVar5 = ppiVar5 + 1;
    } while ((int)pfVar4 < 0xe9922c);
    pfVar4 = (float *)&DAT_00e293cc;
    do
    {
        fVar2 = _DAT_00e22a50 * pfVar4[1] + *pfVar4;
        *pfVar4 = fVar2;
        if (360.0 < fVar2)
        {
            *pfVar4 = fVar2 - 360.0;
        }
        if (*pfVar4 < 0.0)
        {
            *pfVar4 = *pfVar4 - -360.0;
        }
        fVar2 = _DAT_00e22a50 * pfVar4[1] + *pfVar4;
        *pfVar4 = fVar2;
        if (360.0 < fVar2)
        {
            *pfVar4 = fVar2 - 360.0;
        }
        if (*pfVar4 < 0.0)
        {
            *pfVar4 = *pfVar4 - -360.0;
        }
        pfVar4 = pfVar4 + 6;
    } while ((int)pfVar4 < 0xe29594);
    FUN_004565e0(param_2);
    FUN_0043e210();
    iVar3 = *(int *)(&DAT_00e299f4)[param_2];
    if (iVar3 != 0)
    {
        FUN_00431a50(iVar3, 2, 0xfffffffc, 0x10, 3);
        FUN_0044bb10(local_40, &DAT_00e2af60);
        vec3f_copy(local_4c, &DAT_004c449c);
        FUN_00431410(local_40, local_40, (&DAT_00e98f4c)[param_2 * 0x17], DAT_00e298e0, DAT_00e298e4, DAT_00e298e8);
        FUN_00431410(local_40, local_40, (&DAT_00e98f48)[param_2 * 0x17], DAT_00e298d0, DAT_00e298d4, DAT_00e298d8);
        if (param_2 == 6)
        {
            fVar2 = param_3 * 0.1 * 1.5;
        }
        else
        {
            fVar2 = _DAT_004c45d0 * param_3 * 0.1;
        }
        mat_multiply_rows(local_40, fVar2, fVar2, fVar2, local_40);
        vec3f_copy(local_10, local_4c);
        FUN_00431640(iVar3, local_40);
        FUN_00431a50(iVar3, 2, 3, 0x10, 2);
    }
    iVar3 = (&DAT_00e98f40)[param_2 * 0x17];
    if (iVar3 <= (int)(&DAT_00e98f44)[param_2 * 0x17])
    {
        pfVar4 = (float *)(&DAT_00e293c4 + iVar3 * 0x18);
        do
        {
            iVar1 = *(int *)(&DAT_00e29a18)[iVar3 - (&DAT_00e98f40)[param_2 * 0x17]];
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
                FUN_0044bb10(local_40, &DAT_00e2af60);
                vec3f_copy(local_4c, &DAT_004c449c);
                sin_cos(pfVar4[2], &local_50, &local_54);
                vec3f_multiply_add(local_4c, local_4c, pfVar4[-1] * local_50 * param_3, &DAT_00e298c0);
                vec3f_multiply_add(local_4c, local_4c, local_54 * param_3 * *pfVar4, &DAT_00e298d0);
                vec3f_multiply_add(local_4c, local_4c, pfVar4[1] * local_54 * param_3, &DAT_00e298e0);
                FUN_00431410(local_40, local_40, pfVar4[2], DAT_00e298e0, DAT_00e298e4, DAT_00e298e8);
                FUN_00431410(local_40, local_40, (&DAT_00e98f48)[param_2 * 0x17], DAT_00e298d0, DAT_00e298d4,
                             DAT_00e298d8);
                fVar2 = pfVar4[4] * param_3;
                mat_multiply_rows(local_40, fVar2, fVar2, fVar2, local_40);
                vec3f_copy(local_10, local_4c);
                FUN_00431640(iVar1, local_40);
                FUN_00431a50(iVar1, 2, 3, 0x10, 2);
            }
            iVar3 = iVar3 + 1;
            pfVar4 = pfVar4 + 6;
        } while (iVar3 <= (int)(&DAT_00e98f44)[param_2 * 0x17]);
    }
    return;
}

void FUN_00456c70(undefined_32 param_1, int param_2, float param_3)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    undefined_32 uVar4;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_8 local_4c[12];
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    param_3 = param_3 * 0.0018;
    local_58 = 0;
    local_54 = 0;
    local_50 = 0;
    iVar1 = *(int *)(&DAT_00e29a88)[param_2];
    if (iVar1 == 0)
    {
        return;
    }
    FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
    mat_set_identity(local_40);
    vec3f_multiply2_add(local_4c, 0x3f2aacda, &DAT_00e298f0, 0x3eaaa64c, &DAT_00e2af90);
    FUN_00431410(local_40, local_40, 0x42b40000, DAT_00e298c0, DAT_00e298c4, DAT_00e298c8);
    FUN_00431410(local_40, local_40, 0x43200000, DAT_00e298d0, DAT_00e298d4, DAT_00e298d8);
    switch (param_2)
    {
    case 0:
    case 1:
    case 6:
    case 7:
    case 9:
    case 10:
    case 0xc:
        param_3 = param_3 * 1.5;
        break;
    case 2:
    case 5:
    case 0x11:
    case 0x12:
        param_3 = param_3 * 1.2;
        break;
    case 4:
        param_3 = param_3 * 0.8;
        break;
    case 8:
    case 0x13:
        param_3 = param_3 * 1.3;
        break;
    case 0xb:
        param_3 = param_3 * 1.7;
        break;
    case 0xd:
        param_3 = param_3 * 2.2;
        break;
    case 0xe:
        param_3 = param_3 * 1.8;
        break;
    case 0xf:
    case 0x16:
        param_3 = param_3 * 2.3;
        break;
    case 0x10:
        param_3 = param_3 * 5.0;
        break;
    case 0x17:
    case 0x18:
        param_3 = param_3 * 2.5;
    }
    rand();
    uVar2 = __ftol();
    FUN_0042b640(iVar1, 0, 0, 0, 0xff, 0, uVar2);
    mat_multiply_rows(local_40, param_3, param_3, param_3, local_40);
    vec3f_copy(local_10, local_4c);
    FUN_00431640(iVar1, local_40);
    if ((DAT_004c45d4 != param_2) || (DAT_0050c930 != 0))
    {
        DAT_004c45d4 = param_2;
        iVar3 = FUN_00482000(iVar1, &DAT_0050c8c8, 0);
        if (iVar3 == 0)
        {
            vec3f_set(&DAT_0050c8c8, 0, 0, 0);
            vec3f_set(&DAT_0050c8d4, 0xc1200000, 0xc1200000, 0xc1200000);
        }
    }
    switch (param_2)
    {
    case 0:
    case 3:
    case 0xc:
        uVar4 = 0;
        uVar2 = 0;
        break;
    case 1:
    case 0xd:
        uVar4 = 0;
        uVar2 = 0;
        break;
    case 2:
        uVar4 = 0;
        uVar2 = 0;
        break;
    case 4:
        uVar4 = 2.0f;
        uVar2 = 0;
        break;
    case 5:
        uVar4 = 0;
        uVar2 = 0;
        break;
    case 6:
        uVar4 = 0xc0000000;
        uVar2 = 0xc0800000;
        break;
    case 7:
        uVar4 = 0;
        uVar2 = 0xc0800000;
        break;
    case 8:
        uVar4 = -1.0f;
        uVar2 = 0;
        break;
    case 9:
        uVar4 = 0;
        uVar2 = 0xc0800000;
        break;
    case 10:
        uVar4 = 2.0f;
        uVar2 = 0xc0000000;
        break;
    case 0xb:
        uVar4 = 4.0f;
        uVar2 = 0xc0000000;
        break;
    case 0xe:
        uVar4 = 1.0f;
        uVar2 = -1.0f;
        break;
    case 0xf:
        uVar4 = 0xc1400000;
        uVar2 = 0;
        break;
    case 0x10:
        uVar4 = 1.0f;
        uVar2 = 0xc0800000;
        break;
    case 0x11:
        uVar4 = 2.0f;
        uVar2 = 0;
        break;
    case 0x12:
        uVar4 = 2.0f;
        uVar2 = 0;
        break;
    case 0x13:
        uVar4 = 0xc0000000;
        uVar2 = 0xc0800000;
        break;
    case 0x14:
        uVar4 = 0xc0a00000;
        uVar2 = 0;
        break;
    case 0x15:
        uVar4 = 0xc0c00000;
        uVar2 = 0;
        break;
    case 0x16:
        uVar4 = 0xc0c00000;
        uVar2 = 0xc0800000;
        break;
    case 0x17:
        uVar4 = 2.0f;
        uVar2 = 0x41800000;
        break;
    case 0x18:
        uVar4 = 0x41400000;
        uVar2 = 0xc0c00000;
        break;
    default:
        goto switchD_00456ea8_caseD_19;
    }
    vec3f_set(&local_58, uVar2, 0, uVar4);
switchD_00456ea8_caseD_19:
    vec3f_add(local_10, local_10, &local_58);
    FUN_00431640(iVar1, local_40);
    FUN_00431a50(iVar1, 2, 3, 0x10, 2);
    return;
}

void FUN_00457140(int param_1, float param_2, float param_3, float param_4)

{
    int iVar1;
    undefined_8 local_a8[12];
    float local_9c;
    undefined_8 local_98[48];
    undefined_8 local_68[16];
    undefined_8 local_58[16];
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_32 local_40;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    local_9c = param_4 * 0.01 * 4.0;
    iVar1 = **(int **)(&DAT_00e29a4c + param_1 * 4);
    if (iVar1 != 0)
    {
        FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
        FUN_0043e210();
        FUN_0044bb10(local_58, &DAT_00e298c0);
        vec3f_copy(local_a8, &DAT_00e298f0);
        vec3f_multiply_add(local_a8, local_a8, param_2 - -18.0, &DAT_00e298c0);
        vec3f_multiply_add(local_a8, local_a8, 0x42fc0000, &DAT_00e298d0);
        vec3f_multiply_add(local_a8, local_a8, param_3 - 20.0, &DAT_00e298e0);
        vec3f_copy(local_18, local_a8);
        vec3f_set(local_c, 0, 0, 0);
        mat_set_rotation_translation(local_98, local_18);
        FUN_00431410(local_98, local_98, 0, local_38, local_34, local_30);
        FUN_00431410(local_98, local_98, 0, local_48, local_44, local_40);
        FUN_00431410(local_98, local_98, 0, local_38, local_34, local_30);
        mat_multiply_rows(local_98, local_9c, local_9c, local_9c, local_98);
        vec3f_copy(local_68, local_a8);
        FUN_00431640(iVar1, local_98);
        FUN_00431a50(iVar1, 2, 3, 0x10, 2);
    }
    return;
}

void FUN_00457350(void)

{
    int iVar1;
    float fVar2;
    undefined_8 local_4c[12];
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    iVar1 = *DAT_00e29918;
    if (iVar1 != 0)
    {
        FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
        FUN_0043e210();
        mat_set_rotation(local_40, 0x412147b0, 0, 0x43340000);
        vec3f_copy(local_4c, &DAT_00e2af90);
        vec3f_copy(local_10, local_4c);
        fVar2 = DAT_00e295a0 * 0.05;
        mat_multiply_rows(local_40, fVar2, fVar2, fVar2, local_40);
        FUN_00431640(iVar1, local_40);
        FUN_00431a50(iVar1, 2, 3, 0x10, 2);
    }
    return;
}

void FUN_00457410(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 local_20[8];

    DAT_004b2940 = 1;
    FUN_00405cf0(1);
    FUN_0040a0b0(0x11);
    FUN_00408800();
    FUN_00450db0(MAGIC('E', 'l', 'm', 'o'));
    FUN_00408640(10);
    _exit(MAGIC('E', 'l', 'm', 'o'));
    FUN_00408640(0x14);
    FUN_0044fcc0();
    FUN_00408640(0x1e);
    sprite_enable_display(0xffffff99, 0);
    *(undefined_32 *)(param_1 + 0x38) = -1;
    FUN_00428370();
    FUN_00408640(0x28);
    FUN_00454c60();
    FUN_00408640(0x32);
    FUN_00483fc0(0);
    FUN_0045b290(param_1, param_2, param_3);
    FUN_00408640(0x62);
    local_20[0] = 0x53746f70;
    FUN_00450c50(MAGIC('H', 'a', 'n', 'g'), local_20);
    local_20[0] = 0x57616b65;
    if (*(int *)(param_1 + 0x68) < 0)
    {
        if (((((1 << ((&DAT_004bfef1)[*(char *)(param_1 + 0x5d) * 0xc] & 0x1f) & DAT_00e364f0) == 0)
              && (DAT_004d5e00 == 0))
             && (DAT_0050ca3c == 0))
            && (*(int *)(param_1 + 100) == 0))
        {
            FUN_004252a0((&PTR_s_PlanetTAT_znm_004b7a08)[(char)(&DAT_004bfef1)[*(char *)(param_1 + 0x5d) * 0xc]]);
            DAT_00e35a9c = DAT_00e35a9c | 1 << ((&DAT_004bfef1)[*(char *)(param_1 + 0x5d) * 0xc] & 0x1f);
        }
        FUN_00450c50(MAGIC('J', 'd', 'g', 'e'), local_20);
        return;
    }
    FUN_00450c50(MAGIC('S', 'c', 'e', 'n'), local_20);
    return;
}

void FUN_004575a0(void)

{
    int iVar1;
    int **ppiVar2;

    ppiVar2 = (int **)&DAT_00e29900;
    do
    {
        if ((*ppiVar2 != NULL) && (iVar1 = **ppiVar2, iVar1 != 0))
        {
            FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
        }
        ppiVar2 = ppiVar2 + 1;
    } while ((int)ppiVar2 < 0xe29b5c);
    return;
}

void FUN_004575d0(int param_1)

{
    if (*(int *)(param_1 + 0x28) != 0)
    {
        FUN_00431a50(*(int *)(param_1 + 0x28), 2, 3, 0x10, 2);
    }
    if (*(int *)(param_1 + 0x30) != 0)
    {
        FUN_00431a50(*(int *)(param_1 + 0x30), 2, 3, 0x10, 2);
    }
    if (DAT_0050c930 == 5)
    {
        DAT_0050c930 = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00457620(int param_1)

{
    int iVar1;
    int iVar2;

    iVar1 = 0;
    if ((*(byte *)(param_1 + 0x14) & 1) != 0)
    {
        FUN_004270c0();
        if ((*(uint *)(param_1 + 0x14) & 2) != 0)
        {
            *(uint *)(param_1 + 0x14) = *(uint *)(param_1 + 0x14) & 0xfffffffd;
        }
        *(undefined_8 *)(param_1 + 0x60) = 0;
        FUN_00469010();
        DAT_004b2940 = 0;
        FUN_00409ee0(0x11, -1, -1, -1, 0);
        iVar2 = 0;
        do
        {
            FUN_0045a460(iVar2);
            iVar2 = iVar2 + 1;
        } while (iVar2 < 4);
        if (DAT_004d5e00 != 0)
        {
            _DAT_0050c458 = 1;
        }
        if (DAT_004d8bdc != 0)
        {
            DAT_0050c908 = DAT_004d8bdc;
            DAT_004d8bdc = 0;
        }
        if (DAT_004d8be0 != 0)
        {
            DAT_0050c918 = DAT_004d8be0;
            DAT_004d8be0 = 0;
        }
        DAT_0050c928 = 0;
        DAT_0050c92c = 0;
        FUN_004270c0();
        FUN_004575a0(param_1);
        iVar2 = 0;
        do
        {
            sprite_enable_display(iVar2, 0);
            iVar2 = iVar2 + 1;
        } while (iVar2 < 0xb8);
        if ((_DAT_004d79d4 != 0) || (((byte)DAT_0050c048 & 0x40) != 0))
        {
            FUN_0043d9a0(param_1);
        }
        _DAT_0050c8f0 = _DAT_00e22a50 * 40.0 + _DAT_0050c8f0;
        if (360.0 < _DAT_0050c8f0)
        {
            _DAT_0050c8f0 = _DAT_0050c8f0 - 360.0;
        }
        FUN_004270c0();
        for (_DAT_0050c8f4 = _DAT_0050c8f4 + _DAT_00e22a50; 1.0 < _DAT_0050c8f4; _DAT_0050c8f4 = _DAT_0050c8f4 - 1.0)
        {}
        switch (*(undefined_32 *)(param_1 + 8))
        {
        case 0:
            FUN_00434ec0(param_1);
            break;
        case 1:
            FUN_00435240(param_1);
            break;
        case 2:
            FUN_004575d0(param_1);
            FUN_004367c0(param_1);
            break;
        case 3:
            switch (*(undefined_32 *)(param_1 + 0x38))
            {
            case 0:
                if (*(int *)(param_1 + 0x24) != 0)
                {
                    FUN_00431a50(*(int *)(param_1 + 0x24), 2, 3, 0x10, 2);
                }
                FUN_0043dba0(param_1);
                FUN_00455dc0(param_1);
                FUN_00436860(param_1);
                break;
            case 1:
                if (*(int *)(param_1 + 0x2c) != 0)
                {
                    FUN_00431a50(*(int *)(param_1 + 0x2c), 2, 3, 0x10, 2);
                }
                FUN_00455dc0(param_1);
                FUN_00436860(param_1);
                break;
            case 2:
                if (*(int *)(param_1 + 0x20) != 0)
                {
                    FUN_00431a50(*(int *)(param_1 + 0x20), 2, 3, 0x10, 2);
                }
                FUN_00437f70(param_1);
                FUN_00436860(param_1);
                break;
            case 3:
                FUN_004575d0(param_1);
            default:
                FUN_00436860(param_1);
            }
            break;
        case 4:
            if (*(int *)(param_1 + 0x2c) != 0)
            {
                FUN_00431a50(*(int *)(param_1 + 0x2c), 2, 3, 0x10, 2);
            }
            FUN_0043abc0(param_1);
            break;
        case 5:
            FUN_004575d0(param_1);
            FUN_00439ce0(param_1);
            break;
        case 7:
            if (*(int *)(param_1 + 0x24) != 0)
            {
                FUN_00431a50(*(int *)(param_1 + 0x24), 2, 3, 0x10, 2);
            }
            FUN_004376c0(param_1);
            break;
        case 8:
            if (*(int *)(param_1 + 0x20) != 0)
            {
                FUN_00431a50(*(int *)(param_1 + 0x20), 2, 3, 0x10, 2);
            }
            FUN_00437f70(param_1);
            break;
        case 9:
            FUN_004575d0(param_1);
            vehiclePlanetSelectScreenFunction(param_1);
            break;
        case 0xc:
            FUN_004575d0(param_1);
            FUN_0043b240(param_1);
            break;
        case 0xd:
            FUN_004575d0(param_1);
            FUN_0043b880(param_1);
            break;
        case 0xe:
            FUN_00434ea0(param_1);
            return;
        case 0xf:
            if (*(int *)(param_1 + 0x20) != 0)
            {
                FUN_00431a50(*(int *)(param_1 + 0x20), 2, 3, 0x10, 2);
            }
            FUN_0043ca30(param_1);
            break;
        case 0x10:
            FUN_0043ceb0(param_1);
            break;
        case 0x11:
            if (*(int *)(param_1 + 0x20) != 0)
            {
                FUN_00431a50(*(int *)(param_1 + 0x20), 2, 3, 0x10, 2);
            }
            FUN_0043d4e0(param_1);
            break;
        case 0x12:
            FUN_004575d0(param_1);
            FUN_0043c6f0(param_1);
        }
        FUN_004270c0();
        if ((*(int *)(param_1 + 0x38) == 2) && (*(int *)(DAT_00e29908 + 8) != 0))
        {
            FUN_00431a50(*(int *)(DAT_00e29908 + 8), 2, 0xfffffffc, 0x10, 3);
        }
        FUN_004270c0();
        if ((DAT_0050c944 == 1) && (iVar2 = FUN_0043e490(), iVar2 != 0))
        {
            FUN_00427690(0, 0x10);
        }
        FUN_004270c0();
        if (DAT_0050c944 == -1)
        {
            FUN_004276a0(0, 0x10);
            iVar1 = FUN_0043e330(param_1);
        }
        FUN_004270c0();
        if (DAT_0050c468 == 0)
        {
            switch (DAT_0050c930)
            {
            case 1:
            case 2:
                FUN_0045c3c0(param_1);
                break;
            case 3:
                FUN_0045c0b0(param_1);
                break;
            case 5:
                FUN_0045c810(param_1);
            }
        }
        FUN_004270c0();
        FUN_00469bf0();
        if (((*(int *)(param_1 + 0x38) == 3) && (FUN_00469380(*(undefined_32 *)(param_1 + 8)), 0.0 < DAT_00e295a0))
            && (*(int *)(param_1 + 8) != 1))
        {
            FUN_00440550(0x4f);
        }
    }
    if (iVar1 != 0)
    {
        FUN_00457410(param_1, 1, 0);
    }
    FUN_004270c0();
    return;
}

void FUN_00457bd0(void)

{
    undefined_32 uVar1;
    undefined_32 *puVar2;
    int iVar3;

    iVar3 = 0;
    puVar2 = &DAT_004c2728;
    do
    {
        uVar1 = FUN_00446fb0(*puVar2);
        FUN_004282f0(iVar3, uVar1);
        FUN_004282f0(iVar3 + 0x17, uVar1);
        FUN_004282f0(iVar3 + 0x2e, uVar1);
        iVar3 = iVar3 + 1;
        puVar2 = puVar2 + 0xd;
    } while ((short)iVar3 < 0x17);
    return;
}

void FUN_00457c20(void)

{
    // load models
    FUN_00454bc0(0x4f, -1, 0x3d, 0);
    FUN_00454bc0(0x75, -1, 0x3e, 0);
    FUN_00454bc0(0x76, -1, 0x3f, 0);
    FUN_00454bc0(0xfd, -1, 0x40, 0);
    FUN_00454bc0(0x77, -1, 0x41, 0);
    FUN_00454bc0(0x74, -1, 0x42, 0);
    FUN_00454bc0(0x52, -1, 0x43, 0);
    FUN_00454bc0(0x79, -1, 0x44, 0);
    FUN_00454bc0(0x4d, -1, 0x45, 0);
    FUN_00454bc0(0x51, -1, 0x46, 0);
    FUN_00454bc0(0x51, -1, 0x47, 0);
    FUN_00454bc0(0x51, -1, 0x48, 0);
    return;
}

void FUN_00457cf0(void)

{
    // load models
    FUN_00454bc0(0x117, -1, 0x62, 0);
    FUN_00454bc0(0x118, -1, 99, 0);
    FUN_00454bc0(0xb1, -1, 100, 0);
    FUN_00454bc0(0xb2, -1, 0x65, 0);
    FUN_00454bc0(0xb3, -1, 0x66, 0);
    FUN_00454bc0(0x7a, -1, 0x67, 0);
    FUN_00454bc0(0xb4, -1, 0x68, 0);
    FUN_00454bc0(0xb5, -1, 0x69, 0);
    FUN_00454bc0(0xb9, -1, 0x6a, 0);
    FUN_00454bc0(0xba, -1, 0x6b, 0);
    FUN_00454bc0(0xbb, -1, 0x6c, 0);
    FUN_00454bc0(0xbc, -1, 0x6d, 0);
    FUN_00454bc0(0xec, -1, 0x6e, 0);
    FUN_00454bc0(0xf9, -1, 0x6f, 0);
    FUN_00454bc0(0xfa, -1, 0x70, 0);
    FUN_00454bc0(0xbf, -1, 0x71, 0);
    FUN_00454bc0(0xbd, -1, 0x72, 0);
    FUN_00454bc0(0xbe, -1, 0x73, 0);
    FUN_00454bc0(0xc0, -1, 0x74, 0);
    FUN_00454bc0(0xc1, -1, 0x75, 0);
    FUN_00454bc0(0xc2, -1, 0x76, 0);
    FUN_00454bc0(0xc3, -1, 0x77, 0);
    FUN_00454bc0(0xb6, -1, 0x78, 0);
    FUN_00454bc0(0xb7, -1, 0x79, 0);
    FUN_00454bc0(0xb8, -1, 0x7a, 0);
    return;
}

void FUN_00457ed0(void)

{
    undefined_32 uVar1;
    int iVar2;

    uVar1 = FUN_00446fb0(0x1a);
    iVar2 = 0x82;
    do
    {
        FUN_004282f0(iVar2, uVar1);
        iVar2 = iVar2 + 1;
    } while ((short)iVar2 < 0x90);
    uVar1 = FUN_00446fb0(0x1a);
    iVar2 = 0x90;
    do
    {
        FUN_004282f0(iVar2, uVar1);
        FUN_004287e0(iVar2, 0x2000);
        iVar2 = iVar2 + 1;
    } while ((short)iVar2 < 0xa2);
    uVar1 = FUN_00446fb0(0x91);
    FUN_004282f0(0x57, uVar1);
    uVar1 = FUN_00446fb0(0x93);
    iVar2 = 0x58;
    do
    {
        FUN_004282f0(iVar2, uVar1);
        iVar2 = iVar2 + 1;
    } while ((short)iVar2 < 0x5f);
    uVar1 = FUN_00446fb0(0x94);
    FUN_004282f0(0x5f, uVar1);
    uVar1 = FUN_00446fb0(0x8a);
    FUN_004282f0(0x60, uVar1);
    uVar1 = FUN_00446fb0(0x92);
    FUN_004282f0(0x61, uVar1);
    iVar2 = 0x57;
    do
    {
        FUN_004287e0(iVar2, 0x8000);
        iVar2 = iVar2 + 1;
    } while ((short)iVar2 < 0x62);
    return;
}

void FUN_00457fd0(void)

{
    undefined_32 uVar1;
    int iVar2;

    uVar1 = FUN_00446fb0(0x1a);
    iVar2 = 0x90;
    do
    {
        FUN_004282f0(iVar2, uVar1);
        FUN_004287e0(iVar2, 0x2000);
        iVar2 = iVar2 + 1;
    } while (iVar2 < 0xa2);
    uVar1 = FUN_00446fb0(0x8f);
    iVar2 = 0x62;
    do
    {
        FUN_004282f0(iVar2, uVar1);
        iVar2 = iVar2 + 1;
    } while (iVar2 < 0x69);
    uVar1 = FUN_00446fb0(0x90);
    iVar2 = 0x6a;
    do
    {
        FUN_004282f0(iVar2, uVar1);
        iVar2 = iVar2 + 1;
    } while (iVar2 < 0x71);
    uVar1 = FUN_00446fb0(0x8b);
    FUN_004282f0(0x69, uVar1);
    uVar1 = FUN_00446fb0(0x8d);
    FUN_004282f0(0x71, uVar1);
    uVar1 = FUN_00446fb0(0x8e);
    FUN_004282f0(0x72, uVar1);
    uVar1 = FUN_00446fb0(0x8c);
    FUN_004282f0(0x73, uVar1);
    iVar2 = 0x62;
    do
    {
        FUN_004287e0(iVar2, 0x2000);
        FUN_004287e0(iVar2, 0x8000);
        iVar2 = iVar2 + 1;
    } while (iVar2 < 0x74);
    return;
}

void FUN_004580e0(void)

{
    undefined_32 uVar1;
    int iVar2;

    uVar1 = FUN_00446fb0(0x95);
    FUN_004282f0(0x74, uVar1);
    FUN_004282f0(0x75, uVar1);
    uVar1 = FUN_00446fb0(0x96);
    FUN_004282f0(0x76, uVar1);
    FUN_004282f0(0x77, uVar1);
    uVar1 = FUN_00446fb0(0x97);
    FUN_004282f0(0x78, uVar1);
    uVar1 = FUN_00446fb0(0x98);
    FUN_004282f0(0x79, uVar1);
    uVar1 = FUN_00446fb0(0x99);
    FUN_004282f0(0x7a, uVar1);
    uVar1 = FUN_00446fb0(0x9a);
    FUN_004282f0(0x7b, uVar1);
    uVar1 = FUN_00446fb0(0x9b);
    FUN_004282f0(0x7c, uVar1);
    uVar1 = FUN_00446fb0(0x9c);
    FUN_004282f0(0x7d, uVar1);
    uVar1 = FUN_00446fb0(0x9d);
    FUN_004282f0(0x7e, uVar1);
    uVar1 = FUN_00446fb0(0x9e);
    FUN_004282f0(0x7f, uVar1);
    uVar1 = FUN_00446fb0(0x9f);
    FUN_004282f0(0x80, uVar1);
    FUN_004282f0(0x81, uVar1);
    iVar2 = 0x74;
    do
    {
        FUN_004287e0(iVar2, 0x2000);
        FUN_004287e0(iVar2, 0x8000);
        iVar2 = iVar2 + 1;
    } while (iVar2 < 0x82);
    return;
}

// WARNING: Could not reconcile some variable overlaps

void FUN_004584a0(uint param_1, uint param_2)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;
    uint extraout_ECX;
    uint extraout_ECX_00;
    uint uVar5;
    undefined_32 uVar6;
    undefined_32 uVar7;
    undefined_32 uVar8;
    int local_8;
    ushort local_4;

    iVar2 = param_1;
    local_8 = 0x82;
    do
    {
        FUN_004282f0(local_8, *(undefined_32 *)(param_1 + 200));
        local_8 = local_8 + 1;
    } while ((short)local_8 < 0xa2);
    if (param_2 != 0)
    {
        param_1 = 0;
        do
        {
            param_2 = 0;
            do
            {
                local_8._0_1_ = (byte)(param_2 << 1);
                local_4 = *(short *)(&DAT_00e35a8a + param_1 * 2) >> ((byte)local_8 & 0x1f) & 3;
                iVar1 = param_1 * 7 + 99 + param_2;
                FUN_004282f0(iVar1, *(undefined_32 *)(iVar2 + 0xc0));
                FUN_004287e0(iVar1, 0x8000);
                uVar3 = param_1;
                uVar5 = extraout_ECX;
                switch (param_1)
                {
                case 0:
                    uVar8 = -1;
                    uVar7 = -1;
                    uVar6 = 0x32;
                    break;
                case 1:
                    uVar8 = 0x3e;
                    uVar7 = -1;
                    uVar6 = 0x44;
                    break;
                case 2:
                    uVar8 = 0x11;
                    uVar7 = 0xffffffbe;
                    uVar6 = 0xffffffa3;
                    break;
                case 3:
                    uVar8 = 0x20;
                    uVar7 = 0x59;
                    uVar6 = 0xffffff9d;
                    break;
                default:
                    goto switchD_00458591_caseD_4;
                }
                uVar3 = sprite_set_color(iVar1, uVar6, uVar7, uVar8, 0xfffffffe);
                uVar5 = extraout_ECX_00;
            switchD_00458591_caseD_4:
                iVar4 = FUN_00440aa0(iVar2, uVar5 & 0xffffff00 | param_1 & 0xff, uVar3 & 0xffffff00 | param_2 & 0xff);
                if (iVar4 == 0)
                {
                    sprite_set_color(iVar1, 0xffffff80, 0xffffff80, 0xffffff80, 0xfffffffe);
                }
                if (*(char *)(iVar2 + 0x6c) != '\0')
                {
                    switch (local_4)
                    {
                    default:
                        goto switchD_00458610_caseD_0;
                    case 1:
                        uVar6 = *(undefined_32 *)(iVar2 + 0xbc);
                        break;
                    case 2:
                        uVar6 = *(undefined_32 *)(iVar2 + 0xb8);
                        break;
                    case 3:
                        uVar6 = *(undefined_32 *)(iVar2 + 0xb4);
                    }
                    FUN_004282f0(iVar1, uVar6);
                }
            switchD_00458610_caseD_0:
                FUN_004282f0(iVar1 + 0x1c, *(undefined_32 *)(iVar2 + 0xc4));
                FUN_004287e0(iVar1 + 0x1c, 0x8000);
                sprite_set_color(iVar1 + 0x1c, 0xffffffa3, 0xffffffbe, 0x11, 0xfffffffe);
                param_2 = param_2 + 1;
            } while ((int)param_2 < 7);
            param_1 = param_1 + 1;
        } while ((int)param_1 < 4);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004586e0(int param_1)

{
    char cVar1;
    undefined_32 uVar2;
    int iVar3;
    int *piVar4;
    int iVar5;
    char *pcVar6;
    int iVar7;
    undefined_32 uVar8;
    undefined_32 uVar9;

    switch (*(undefined_32 *)(param_1 + 8))
    {
    default:
        *(undefined_32 *)(param_1 + 0x38) = -1;
        break;
    case 1:
    case 2:
    case 3:
    case 5:
    case 9:
    case 10:
    case 0xb:
    case 0xc:
    case 0xd:
    case 0x12:
        *(undefined_32 *)(param_1 + 0x38) = 3;
        break;
    case 4:
        *(undefined_32 *)(param_1 + 0x38) = 1;
        break;
    case 7:
        *(undefined_32 *)(param_1 + 0x38) = 0;
        break;
    case 8:
    case 0xf:
    case 0x11:
        *(undefined_32 *)(param_1 + 0x38) = 2;
        break;
    case 0xe:
        goto switchD_004586f5_caseD_e;
    case 0x10:
        *(undefined_32 *)(param_1 + 0x38) = 0x4c;
    }
    if ((*(int *)(param_1 + 0x3c) != 3) || (*(int *)(param_1 + 0x38) != 3))
    {
        if (*(int *)(param_1 + 0x3c) != *(int *)(param_1 + 0x38))
        {
            DAT_0050b5cc = 1;
        }
        FUN_0045ce90(2);
        iVar3 = 0;
        iVar5 = 0;
        do
        {
            if ((((iVar5 < 0xa2) || (0xb7 < iVar5)) && (iVar5 != 0xf9)) && (iVar5 != 0xfa))
            {
                FUN_004282f0(iVar5, 0);
            }
            iVar5 = iVar5 + 1;
        } while (iVar5 < 0xb8);
        FUN_004258e0();
        FUN_00454cc0();
        if (*(int *)(param_1 + 0x38) == 3)
        {
            DAT_0050c96c = 1;
            uVar2 = FUN_004114d0(s_data_images_greyedsplash_tga_004c4924, 0x50);
            DAT_0050c96c = 0;
            FUN_004282f0(0x50, uVar2);
            uVar2 = FUN_004114d0(s_data_images_settings_btn_strch_s_004c48fc, 0x4d);
            FUN_004282f0(0x4d, uVar2);
            uVar2 = FUN_004114d0(s_data_images_podhangar_backdrop_t_004c48d8, 0x4e);
            FUN_004282f0(0x4e, uVar2);
            uVar2 = FUN_004114d0(s_data_images_podhangar_backdrop2__004c48b4, 0x4f);
            FUN_004282f0(0x4f, uVar2);
            uVar2 = FUN_004114d0(s_data_images_episode1_tga_004c4898, 0x51);
            FUN_004282f0(0x51, uVar2);
            uVar2 = FUN_004114d0(s_data_images_racer_tga_004c4880, 0x54);
            FUN_004282f0(0x54, uVar2);
            uVar2 = FUN_004114d0(s_data_images_star_tga_004c4868, 0x52);
            FUN_004282f0(0x52, uVar2);
            uVar2 = FUN_004114d0(s_data_images_wars_tga_004c4850, 0x53);
            FUN_004282f0(0x53, uVar2);
            FUN_00457ed0();
            FUN_00457c20();
            FUN_00457cf0();
            uVar2 = FUN_00446fb0(0x89);
            FUN_004282f0(0x45, uVar2);
            uVar2 = FUN_00446fb0(0x82);
            FUN_004282f0(0x46, uVar2);
            uVar2 = FUN_00446fb0(0x83);
            FUN_004282f0(0x47, uVar2);
            uVar2 = FUN_00446fb0(0x84);
            FUN_004282f0(0x48, uVar2);
            uVar2 = FUN_00446fb0(0x85);
            FUN_004282f0(0x49, uVar2);
            uVar2 = FUN_00446fb0(0x86);
            FUN_004282f0(0x4a, uVar2);
            uVar2 = FUN_00446fb0(0x87);
            FUN_004282f0(0x4b, uVar2);
            uVar2 = FUN_00446fb0(0x88);
            FUN_004282f0(0x4c, uVar2);
            FUN_00454bc0(0x78, -1, 0x53, 0);
            FUN_00457bd0();
            FUN_00454bc0(0x30, -1, 6, 0);
            do
            {
                rand();
                iVar3 = __ftol();
            } while ((1 << ((byte)(1 - iVar3) & 0x1f) & DAT_00e364b0) == 0);
            iVar3 = (1 - iVar3) * 0x34;
            FUN_0045ce10(*(undefined_32 *)(&DAT_004c2730 + iVar3), 0x38, 2, *(undefined_32 *)(&DAT_004c2720 + iVar3));
            if ((DAT_00e364b0 & 0x7ffff) == 0)
            {
                do
                {
                    rand();
                    iVar3 = __ftol();
                } while ((DAT_00e364b0 & 1 << ((byte)iVar3 & 0x1f)) != 0);
                uVar2 = *(undefined_32 *)(&DAT_004c2720 + iVar3 * 0x34);
                uVar8 = *(undefined_32 *)(&DAT_004c2730 + iVar3 * 0x34);
                uVar9 = 2;
            }
            else
            {
                uVar2 = -1.0f;
                uVar9 = 1;
                uVar8 = 0x6d;
            }
            FUN_0045ce10(uVar8, 0x39, uVar9, uVar2);
            FUN_0045ce10(0xf4, 0x16, 7, -1.0f);
            FUN_0045ce10(0xf7, 0x17, 10, -1.0f);
            uVar2 = FUN_00446fb0(0x1a);
            *(undefined_32 *)(param_1 + 200) = uVar2;
            iVar3 = 0;
            do
            {
                FUN_004282f0(iVar3 + 0x82, *(undefined_32 *)(param_1 + 200));
                iVar3 = iVar3 + 1;
            } while (iVar3 < 4);
            uVar2 = FUN_00446fb0(0x5c);
            *(undefined_32 *)(param_1 + 0xb4) = uVar2;
            uVar2 = FUN_00446fb0(0x5d);
            *(undefined_32 *)(param_1 + 0xb8) = uVar2;
            uVar2 = FUN_00446fb0(0x5e);
            *(undefined_32 *)(param_1 + 0xbc) = uVar2;
            uVar2 = FUN_00446fb0(0x5f);
            *(undefined_32 *)(param_1 + 0xc0) = uVar2;
            uVar2 = FUN_00446fb0(0x61);
            *(undefined_32 *)(param_1 + 0xc4) = uVar2;
            uVar2 = FUN_00446fb0(0x60);
            FUN_004282f0(0x62, uVar2);
            FUN_004287e0(0x62, 0x8000);
            sprite_set_color(0x62, 0x32, -1, -1, 0xfffffffe);
            FUN_0045ce90(3);
            pcVar6 = (char *)(param_1 + 0x73);
            do
            {
                FUN_0045ce10(*(undefined_32 *)(&DAT_004c2730 + *pcVar6 * 0x34), pcVar6 + (-0x57 - param_1), 2,
                             *(undefined_32 *)(&DAT_004c2720 + *pcVar6 * 0x34));
                pcVar6 = pcVar6 + 1;
            } while ((int)(pcVar6 + (-0x73 - param_1)) < 1);
            FUN_00445b90();
            return;
        }
        switch (*(undefined_32 *)(param_1 + 8))
        {
        case 4:
        case 7:
            FUN_00457ed0();
            FUN_004580e0();
            FUN_00454bc0(0x78, -1, 0x53, 0);
            FUN_0043e840(param_1);
            FUN_0045ce10(0x6e, 0x15, 3, -1.0f);
            if ('\0' < *(char *)(param_1 + 0x70))
            {
                pcVar6 = (char *)(param_1 + 0x73);
                do
                {
                    FUN_0045ce10(*(undefined_32 *)(&DAT_004c2730 + *pcVar6 * 0x34), pcVar6 + (-0x57 - param_1), 2,
                                 *(undefined_32 *)(&DAT_004c2720 + *pcVar6 * 0x34));
                    pcVar6 = pcVar6 + 1;
                } while ((int)(pcVar6 + (-0x73 - param_1)) < (int)*(char *)(param_1 + 0x70));
            }
            iVar3 = 0;
            if (-(_DAT_00e35aa0 & 0xff) != -4 && -1 < (int)(-(_DAT_00e35aa0 & 0xff) + 4))
            {
                do
                {
                    FUN_0045ce10(0x6d, iVar3 + 0x34, 1, -1.0f);
                    iVar3 = iVar3 + 1;
                } while (iVar3 < (int)(4 - (_DAT_00e35aa0 & 0xff)));
            }
            iVar3 = 0;
            do
            {
                FUN_00454bc0(0x141, -1, iVar3 + 0xb, 0);
                iVar3 = iVar3 + 1;
            } while (iVar3 < 4);
            FUN_0045ce10(0xf7, 0x17, 10, -1.0f);
            FUN_0045ce10(0xf6, 0x1b, 9, -1.0f);
            FUN_0045ce10(0x13f, 0x19, 0xb, -1.0f);
            FUN_0045ce10(0xf8, 0x18, 0xc, -1.0f);
            FUN_0045ce10(0xf5, 0x1a, 8, -1.0f);
            iVar3 = FUN_004409d0(&DAT_00e35a60, &DAT_004c484c);
            if (iVar3 != 0)
            {
                FUN_0045ce10(0x6f, 0x13, 4, -1.0f);
                FUN_00445b90();
                return;
            }
            iVar3 = FUN_004409d0(&DAT_00e35a60, &DAT_004c4848);
            if (iVar3 != 0)
            {
                FUN_0045ce10(0x70, 0x14, 5, -1.0f);
                FUN_00445b90();
                return;
            }
            break;
        case 8:
            FUN_00457ed0();
            FUN_00457fd0();
            iVar3 = 0;
            if ('\0' < *(char *)(param_1 + 0x70))
            {
                piVar4 = &DAT_00e2993c;
                do
                {
                    iVar7 = (int)*(char *)(iVar3 + 0x73 + param_1);
                    iVar5 = iVar7 * 0x34;
                    FUN_00454bc0(*(undefined_32 *)(&DAT_004c2704 + iVar5), *(undefined_32 *)(&DAT_004c2708 + iVar5),
                                 iVar3 + 0xf, 0);
                    if (*piVar4 != 0)
                    {
                        *(int *)(*piVar4 + 0xf0) = iVar7;
                    }
                    iVar3 = iVar3 + 1;
                    piVar4 = piVar4 + 1;
                } while (iVar3 < *(char *)(param_1 + 0x70));
            }
            FUN_00454bc0(0x3c, -1, 0x55, 0);
            FUN_00454bc0(0x44, -1, 0x56, 0);
            FUN_00454bc0(0x45, -1, 0x57, 0);
            FUN_00454bc0(0x44, -1, 0x58, 0);
            iVar3 = 7;
            do
            {
                FUN_00454bc0(0x46, -1, iVar3 + 0x52, 0);
                FUN_00454bc0(0x140, -1, iVar3, 0);
                FUN_00454bc0(0x141, -1, iVar3 + 4, 0);
                iVar5 = iVar3 + -6;
                iVar3 = iVar3 + 1;
            } while (iVar5 < 4);
            FUN_00454bc0(0x92, -1, 0x61, 1);
            iVar3 = 0;
            do
            {
                FUN_00454bc0(0x31, -1, iVar3 + 0x5d, 1);
                iVar3 = iVar3 + 1;
            } while (iVar3 < 4);
            if ('\0' < *(char *)(param_1 + 0x70))
            {
                pcVar6 = (char *)(param_1 + 0x73);
                do
                {
                    FUN_0045ce10(*(undefined_32 *)(&DAT_004c2730 + *pcVar6 * 0x34), pcVar6 + (-0x57 - param_1), 2,
                                 *(undefined_32 *)(&DAT_004c2720 + *pcVar6 * 0x34));
                    pcVar6 = pcVar6 + 1;
                } while ((int)(pcVar6 + (-0x73 - param_1)) < (int)*(char *)(param_1 + 0x70));
            }
            iVar3 = 0;
            if (DAT_00e35aa0 != '\0')
            {
                do
                {
                    FUN_0045ce10(0x6d, iVar3 + 0x34, 1, -1.0f);
                    iVar3 = iVar3 + 1;
                } while (iVar3 < (int)(_DAT_00e35aa0 & 0xff));
            }
            FUN_0043e840(param_1);
            FUN_00454bc0(0x6d, -1, 0x95, 0);
            FUN_0045ce10(0x6f, 0x13, 4, -1.0f);
            FUN_0045ce10(0x70, 0x14, 5, -1.0f);
            FUN_00445b90();
            return;
        case 0xf:
            uVar2 = FUN_00446fb0(0x1a);
            do
            {
                FUN_004282f0(iVar3 + 0x82, uVar2);
                if (iVar3 == 0)
                {
                    cVar1 = *(char *)(param_1 + 0x73);
                }
                else
                {
                    cVar1 = (&DAT_004bfef2)[*(char *)(param_1 + 0x5d) * 0xc];
                }
                iVar5 = cVar1 * 0x34;
                FUN_0045ce10(*(undefined_32 *)(&DAT_004c2730 + iVar5), iVar3 + 0x1c, 2,
                             *(undefined_32 *)(&DAT_004c2720 + iVar5));
                FUN_00454bc0(*(undefined_32 *)(&DAT_004c2704 + iVar5), *(undefined_32 *)(&DAT_004c2708 + iVar5),
                             iVar3 + 0xf, 0);
                if ((&DAT_00e2993c)[iVar3] != 0)
                {
                    *(int *)((&DAT_00e2993c)[iVar3] + 0xf0) = (int)cVar1;
                }
                iVar3 = iVar3 + 1;
            } while (iVar3 < 2);
            FUN_00445b90();
            return;
        case 0x10:
            pcVar6 = (char *)(param_1 + 0xcc);
            iVar3 = 0x4d;
            do
            {
                FUN_0045ce10(*(undefined_32 *)(&DAT_004c2730 + *pcVar6 * 0x34), iVar3 + -0x31, 2,
                             *(undefined_32 *)(&DAT_004c2720 + *pcVar6 * 0x34));
                FUN_00454bc0(0x7c, -1, iVar3, 0);
                pcVar6 = pcVar6 + 1;
                iVar5 = iVar3 + -0x4c;
                iVar3 = iVar3 + 1;
            } while (iVar5 < 3);
            FUN_00454bc0(0x7b, -1, 0x50, 0);
            FUN_00454bc0(0x7d, -1, 0x51, 0);
            FUN_00454bc0(0x7e, -1, 0x52, 0);
            FUN_00454bc0(0x7f, -1, 0x4c, 0);
            FUN_00445b90();
            return;
        case 0x11:
            uVar2 = FUN_00446fb0(0x1a);
            iVar3 = 0;
            do
            {
                FUN_004282f0(iVar3 + 0x82, uVar2);
                iVar3 = iVar3 + 1;
            } while (iVar3 < 2);
            cVar1 = (&DAT_004bfef2)[*(char *)(param_1 + 0x5d) * 0xc];
            iVar3 = cVar1 * 0x34;
            FUN_00454bc0(*(undefined_32 *)(&DAT_004c2704 + iVar3), *(undefined_32 *)(&DAT_004c2708 + iVar3), 0xf, 0);
            if (DAT_00e2993c != 0)
            {
                *(int *)(DAT_00e2993c + 0xf0) = (int)cVar1;
            }
            FUN_0045ce10(0x6d, 0x34, 1, -1.0f);
        }
        FUN_00445b90();
    }
switchD_004586f5_caseD_e:
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00459150(int param_1)

{
    float fVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    undefined_16 extraout_var;
    ushort extraout_var_00;
    ushort extraout_var_01;
    short sVar5;
    undefined_32 uVar6;
    bool bVar7;
    float10 fVar8;
    undefined_32 uVar9;
    float local_80;
    undefined_32 local_7c;
    int local_78;
    int local_74;
    undefined_32 local_70;
    float local_6c;
    float local_68;
    uint local_64;
    float local_60;
    float local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_8 local_30[12];
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    local_7c = 0x462be000;
    local_70 = 10.0f;
    local_64 = DAT_004c3fb8;
    FUN_00428820(0x3800);
    DAT_0050c930 = 0;
    DAT_00e295a4 = 0;
    DAT_00e295a8 = 0;
    DAT_00e295ac = 0;
    DAT_00e295a0 = 0;
    DAT_00e295b0 = 0;
    DAT_00e295b4 = 0;
    DAT_00e295b8 = 0;
    DAT_00e295bc = 0;
    DAT_00e295c0 = 0;
    DAT_00e295c4 = 0;
    local_54 = 80.0f;
    local_50 = 75.0f;
    local_4c = 50.0f;
    local_3c = 255.0f;
    local_38 = 255.0f;
    local_34 = 200.0f;
    local_48 = 0;
    local_44 = 0;
    local_40 = 0xc71c4000;
    vec3f_set(local_30, 0, 1.0f, 0);
    vec3f_set(local_24, 0, 0, 0);
    vec3f_set(local_18, 0, 1.0f, 0);
    vec3f_set(local_c, 0, 0, 0);
    mat_set_rotation_translation(&DAT_00e2af00, local_30);
    mat_set_rotation_translation(&DAT_00e298c0, local_30);
    mat_set_rotation_translation(&DAT_00e2af60, local_18);
    FUN_0044e0c0(0);
    *(undefined_32 *)(param_1 + 0x34) = 0x24;
    *(undefined_32 *)(param_1 + 0x40) = -1;
    sVar5 = 0;
    if ('\0' < *(char *)(param_1 + 0x70))
    {
        do
        {
            iVar3 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), sVar5 + 0x1c);
            if (iVar3 != 0)
            {
                *(undefined_32 *)(iVar3 + 0x14) = 0;
            }
            sVar5 = sVar5 + 1;
        } while (sVar5 < *(char *)(param_1 + 0x70));
    }
    if ((*(int *)(param_1 + 0x38) == 3) && (*(int *)(param_1 + 0x3c) != 3))
    {
        vec3f_copy(&local_60, &DAT_004c457c);
        iVar3 = rand();
        fVar1 = (float)iVar3 * 4.656613e-10 * 360.0;
        FUN_00468800(0x38, 0x11, &local_60, &local_60, fVar1, fVar1);
        rand();
        iVar3 = __ftol();
        vec3f_copy(&local_60, &DAT_004c4510 + (10 - iVar3) * 3);
        iVar4 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), 0x39);
        if (*(int *)(iVar4 + 8) == 1)
        {
            uVar9 = 0;
        }
        else
        {
            uVar9 = 0x11;
        }
        FUN_00468800(0x39, uVar9, &local_60, &local_60, fVar1, fVar1);
        do
        {
            rand();
            iVar4 = __ftol();
            iVar4 = 10 - iVar4;
        } while (iVar4 == 10 - iVar3);
        *(char *)(param_1 + 0x50) = (char)iVar4 + -9;
        vec3f_copy(&local_60, &DAT_004c4510 + iVar4 * 3);
        iVar3 = rand();
        fVar1 = (float)iVar3 * 4.656613e-10 * 360.0;
        FUN_00468800(0x17, 0x2e, &local_60, &local_60, fVar1, fVar1);
        vec3f_copy(&local_60, &DAT_004c4570);
        FUN_00468800(0x16, 0x2a, &local_60, &local_60, 0x433e147b, 0x433e147b);
    }
    switch (*(undefined_32 *)(param_1 + 8))
    {
    case 4:
        local_70 = 0.8f;
        local_54 = 0x42f00000;
        local_50 = 0x43070000;
        local_4c = 0x430c0000;
        *(undefined_32 *)(param_1 + 0x34) = 4;
        sVar5 = 4;
        do
        {
            if ((&DAT_004c4028)[sVar5 * 0x10] == 4)
            {
                *(int *)(param_1 + 0x34) = (int)sVar5;
                break;
            }
            sVar5 = sVar5 + 1;
        } while (sVar5 < 0x13);
        sVar5 = 0;
        if ('\0' < *(char *)(param_1 + 0x70))
        {
            do
            {
                iVar4 = (int)sVar5;
                vec3f_set(&local_60, -214.0 - (float)iVar4 * -50.0, 0xc40e4000, 0xc3110000);
                FUN_0045cb80(param_1, iVar4);
                iVar3 = *(int *)(param_1 + 0x34) * 0x20;
                fVar8 = (float10)arctan2(*(float *)(&DAT_004c401c + iVar3) - *(float *)(&DAT_004c4010 + iVar3),
                                         *(float *)(&DAT_004c4014 + iVar3) - *(float *)(&DAT_004c4020 + iVar3));
                FUN_00468800(iVar4 + 0x1c, 0x14, &local_60, &DAT_00e298a0, (float)fVar8,
                             (float)(fVar8 - (float10)-180.0));
                sVar5 = sVar5 + 1;
            } while (sVar5 < *(char *)(param_1 + 0x70));
        }
        vec3f_copy(&local_60, &DAT_004c407c);
        local_58 = 0xc2fa0000;
        vec3f_copy(&DAT_00e298a0, &DAT_004c454c);
        fVar8 = (float10)arctan2(local_60 - _DAT_00e298a0, _DAT_00e298a4 - local_5c);
        FUN_00468800(0x15, 0x1e, &local_60, &DAT_00e298a0, (float)fVar8, (float)(fVar8 - (float10)-90.0));
        vec3f_set(&local_60, 0, 0, 0);
        sVar5 = 0;
        if (-(_DAT_00e35aa0 & 0xff) != -4 && -1 < (int)(-(_DAT_00e35aa0 & 0xff) + 4))
        {
            iVar3 = 0;
            do
            {
                FUN_00468800(iVar3 + 0x34, 0, &local_60, &local_60, 0, 0);
                sVar5 = sVar5 + 1;
                iVar3 = (int)sVar5;
            } while (iVar3 < (int)(4 - (_DAT_00e35aa0 & 0xff)));
        }
        vec3f_copy(&local_60, &DAT_004c45c4);
        iVar3 = FUN_004409d0(&DAT_00e35a60, &DAT_004c484c);
        if (iVar3 == 0)
        {
            iVar3 = FUN_004409d0(&DAT_00e35a60, &DAT_004c4848);
            if (iVar3 != 0)
            {
                local_5c = local_5c - 20.0;
                FUN_00468800(0x14, 0x29, &local_60, &local_60, 0x43400000, 0x43400000);
            }
        }
        else
        {
            FUN_00468800(0x13, 0x28, &local_60, &local_60, 0x43340000, 0x43340000);
        }
        break;
    case 7:
        local_70 = 5.0f;
        if (DAT_0050c47c == 2)
        {
            *(undefined_32 *)(param_1 + 0x10) = 1;
        }
        else if (DAT_0050c47c == 1)
        {
            *(undefined_32 *)(param_1 + 0x10) = 0;
        }
        *(undefined_32 *)(param_1 + 0x34) = 1;
        if (*(int *)(param_1 + 0x10) == 1)
        {
            *(undefined_32 *)(param_1 + 0x34) = 2;
        }
        vec3f_copy(&local_60, &DAT_004c4540);
        vec3f_copy(&DAT_00e298a0, &local_60);
        fVar8 = (float10)arctan2(local_60 - 12.0, -116.0 - local_5c);
        fVar1 = (float)fVar8;
        uVar9 = 0x1d;
        if (*(int *)(param_1 + 0xc) == 4)
        {
            vec3f_copy(&local_60, &DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20);
            local_58 = -40.0f;
            fVar8 = (float10)arctan2(local_60 - _DAT_00e298a0, _DAT_00e298a4 - local_5c);
            uVar9 = 0x1e;
        }
        local_80 = (float)fVar8;
        FUN_00468800(0x15, uVar9, &local_60, &DAT_00e298a0, local_80, fVar1);
        vec3f_copy(&DAT_00e298a0, &DAT_004c4540);
        rand();
        iVar3 = __ftol();
        if (iVar3 == 0)
        {
            vec3f_copy(&local_60, &DAT_004c45ac);
            fVar8 = (float10)arctan2(local_60 - _DAT_00e298a0, _DAT_00e298a4 - local_5c);
            iVar3 = rand();
            fVar8 = (float10)(float)fVar8 - (float10)iVar3 * (float10)4.656613e-10 * (float10)90.0;
        }
        else
        {
            vec3f_copy(&local_60, &DAT_004c45b8);
            fVar8 = (float10)arctan2(local_60 - _DAT_00e298a0, _DAT_00e298a4 - local_5c);
        }
        rand();
        iVar3 = __ftol();
        if ((uint)-iVar3 < 5)
        {
            // WARNING: Could not recover jumptable at 0x004596e3. Too many
            // branches WARNING: Treating indirect jump as call
            (*(code *)(&PTR_LAB_0045a028)[-iVar3])();
            return;
        }
        FUN_00468800(-iVar3 + 0x17, uVar9, &local_60, &local_60, (float)fVar8, (float)fVar8);
        sVar5 = 0;
        if ('\0' < *(char *)(param_1 + 0x70))
        {
            do
            {
                vec3f_set(&local_60, 200.0 - (float)(int)sVar5 * -50.0, 0xc3480000, 0xc2700000);
                if (*(int *)(param_1 + 0xc) == 4)
                {
                    vec3f_copy(&local_60, &DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20);
                }
                local_58 = 0xc2700000;
                vec3f_set(&local_60, -20.0f, 0xc2c80000, 0xc2700000);
                vec3f_set(&DAT_00e298a0, 0, 0, 0xc2700000);
                fVar8 = (float10)arctan2(local_60 - _DAT_00e298a0, _DAT_00e298a4 - local_5c);
                FUN_00468800(sVar5 + 0x1c, 0x13, &local_60, &DAT_00e298a0, (float)fVar8, (float)fVar8);
                sVar5 = sVar5 + 1;
            } while (sVar5 < *(char *)(param_1 + 0x70));
        }
        sVar5 = 0;
        if (-(_DAT_00e35aa0 & 0xff) != -4 && -1 < (int)(-(_DAT_00e35aa0 & 0xff) + 4))
        {
            iVar3 = 0;
            do
            {
                sin_cos((float)((0x1d - iVar3) * 10), &local_6c, &local_68);
                vec3f_set(&local_60, 12.0 - local_68 * -281.6, -116.0 - local_6c * -281.6, 0xc2700000);
                fVar8 = (float10)arctan2(local_60 - 12.0, -116.0 - local_5c);
                FUN_00468800(iVar3 + 0x34, 5, &local_60, &local_60, (float)fVar8, (float)fVar8);
                sVar5 = sVar5 + 1;
                iVar3 = (int)sVar5;
            } while (iVar3 < (int)(4 - (_DAT_00e35aa0 & 0xff)));
        }
        break;
    case 8:
        *(undefined_32 *)(param_1 + 0x34) = 0x14;
        local_7c = 0x47a41000;
        DAT_00e295cc = 7;
        break;
    case 9:
        if (*(int *)(param_1 + 0xc) == 0xc)
        {
            *(undefined_32 *)(param_1 + 0x34) = 0x25;
        }
        DAT_00e295a4 = 1;
        DAT_00e295a8 = 1;
        break;
    case 0xc:
        bVar7 = *(int *)(param_1 + 0xc) == 0xd;
        goto LAB_004594aa;
    case 0xd:
        bVar7 = *(int *)(param_1 + 0xc) == 0xc;
    LAB_004594aa:
        if (bVar7)
        {
            *(undefined_32 *)(param_1 + 0x34) = 0x25;
            DAT_00e295a0 = 1.0f;
        }
        DAT_00e295a4 = 1;
        break;
    case 0xf:
        local_7c = 0x47a41000;
        *(undefined_32 *)(param_1 + 0x34) = 0x14;
        iVar4 = 0x1c;
        local_78 = 0;
        local_74 = 0xb4;
        iVar3 = 2;
        do
        {
            vec3f_set(&DAT_00e298a0, 200.0f, 0xc3960000, 0xc31d0000);
            _DAT_00e298a4 = _DAT_00e298a4 - (float)local_78;
            FUN_00468800(iVar4, 0x14, &DAT_00e298a0, &DAT_00e298a0, (float)local_74, (float)local_74);
            local_78 = local_78 + 200;
            local_74 = local_74 + -0xb4;
            iVar4 = iVar4 + 1;
            iVar3 = iVar3 + -1;
        } while (iVar3 != 0);
        break;
    case 0x10:
        local_7c = 0x47a41000;
        sVar5 = 0;
        do
        {
            vec3f_set(&DAT_00e298a0, 0, (float)(int)sVar5 * -150.0, 0);
            if (sVar5 == 2)
            {
                _DAT_00e298a4 = _DAT_00e298a4 - -450.0;
            }
            FUN_00468800(sVar5 + 0x1c, 0x1c, &DAT_00e298a0, &DAT_00e298a0, 0xc2b40000, 0xc2b40000);
            sVar5 = sVar5 + 1;
        } while (sVar5 < 3);
        break;
    case 0x11:
        local_7c = 0x47a41000;
        *(undefined_32 *)(param_1 + 0x34) = 0x1a;
        vec3f_set(&local_60, 0, 0xc47a0000, 0xc31d0000);
        FUN_00468800(0x34, 0x10, &local_60, &local_60, 0, 0);
        break;
    case 0x12:
        if (*(char *)(param_1 + 0x6c) == '\0')
        {
            uVar6 = 0x38;
            uVar9 = 0x39;
        }
        else
        {
            uVar6 = 0x39;
            uVar9 = 0x38;
        }
        *(undefined_32 *)(param_1 + 0x34) = 0x27;
        *(undefined_32 *)(param_1 + 0x40) = uVar6;
        DAT_00e295a0 = 1.0f;
        DAT_00e295a4 = 1;
        vec3f_copy(&local_60, &DAT_004c4490);
        vec3f_multiply2_add(&local_60, 0x3f19999a, &DAT_004c4490, 0.4f, &DAT_004c449c);
        local_58 = 0xc2700000;
        vec3f_copy(&DAT_00e298a0, &DAT_004c449c);
        fVar8 = (float10)arctan2(local_60 - _DAT_00e298a0, _DAT_00e298a4 - local_5c);
        fVar1 = (float)fVar8;
        iVar3 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), uVar6);
        if (*(int *)(iVar3 + 8) == 1)
        {
            FUN_00468800(uVar6, 2, &local_60, &local_60, fVar1, fVar1);
        }
        else
        {
            FUN_00468800(uVar6, 0x11, &local_60, &local_60, fVar1, fVar1);
            *(undefined_32 *)(iVar3 + 0xac) = 100.0f;
        }
        vec3f_copy(&local_60, &DAT_004c457c);
        iVar3 = rand();
        fVar1 = (float)iVar3 * 4.656613e-10 * 360.0;
        iVar3 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), uVar9);
        if (*(int *)(iVar3 + 8) == 1)
        {
            FUN_00468800(uVar9, 0, &local_60, &local_60, fVar1, fVar1);
        }
        else
        {
            FUN_00468800(uVar9, 0x11, &local_60, &local_60, fVar1, fVar1);
        }
    }
    FUN_004831d0(0, 8, 8, 0x138, 0xe8);
    FUN_004831d0(DAT_004c3fb0, 8, 8, 0x138, 0xe8);
    uVar2 = local_64;
    FUN_00483230(DAT_004c3fb0, local_64);
    uVar9 = FUN_004318d0(DAT_004c3fb0);
    FUN_00428b40(uVar2, uVar9);
    FUN_00428a60(CONCAT22(extraout_var, DAT_004c3fb4), 1, &DAT_00e2af00, 0);
    FUN_00428a60(DAT_004c3fb8 & 0xffff | (uint)extraout_var_00 << 0x10, 2, &DAT_00e298c0, 0);
    FUN_00428b10(DAT_004c3fb8 & 0xffff | (uint)extraout_var_01 << 0x10, &DAT_00e2af60, 0);
    FUN_00483590(DAT_004c3fb0, 45.0f, -1.0f, local_70, local_7c, -1.0f);
    if (*(int *)(param_1 + 0x34) != -1)
    {
        vec3f_copy(&DAT_00e298f0, &DAT_004c4010 + *(int *)(param_1 + 0x34) * 0x20);
        vec3f_copy(&DAT_00e2af90, &DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20);
    }
    FUN_0044bb10(&DAT_00e2ae80, &DAT_00e298c0);
    FUN_0044bb10(&DAT_00e29b60, &DAT_00e298c0);
    FUN_0044bb10(&DAT_00e2b3e0, &DAT_00e2af60);
    FUN_0044bb10(&DAT_00e2b440, &DAT_00e2af60);
    FUN_00430b80(&DAT_00e2af00, &DAT_00e29ba0);
    FUN_00430b80(&DAT_00e2af00, &DAT_00e2b420);
    FUN_00430b80(&DAT_00e2af00, &DAT_00e2b200);
    if (*(int *)(param_1 + 0x38) != 3)
    {
        FUN_00483840(-1, &local_54, &local_3c, &local_48);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045a3e0(void)

{
    DAT_0050c918 = 0;
    DAT_0050c908 = -1;
    DAT_0050c91c = 0;
    _DAT_0050c90c = -1;
    _DAT_0050c920 = 0;
    _DAT_0050c910 = -1;
    _DAT_0050c924 = 0;
    _DAT_0050c914 = -1;
    return;
}

float10 FUN_0045a420(float param_1, float param_2)

{
    undefined_8 local_4[4];

    sin_cos((param_1 / param_2) * 180.0, local_4, &param_1);
    return ((float10)1.0 - (float10)param_1) * (float10)0.5 * (float10)param_2;
}

void FUN_0045a460(int param_1)

{
    uint uVar1;
    uint uVar2;
    bool bVar3;

    bVar3 = DAT_004c4008 != 0;
    (&DAT_0050c918)[param_1] = 0;
    if (bVar3)
    {
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 1, 1);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 2, 2);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 4, 4);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 8, 8);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x10, 0x10);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x20, 0x20);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x40, 0x40);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x80, 0x80);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x100, 0x100);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x200, 0x200);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x400, 0x400);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x800, 0x800);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x1000, 0x1000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x2000, 0x2000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x4000, 0x4000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x8000, 0x8000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x10000, 0x10000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x20000, 0x20000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x40000, 0x40000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x80000, 0x80000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x100000, 0x100000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x200000, 0x200000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x400000, 0x400000);
        FUN_0045a7f0(param_1, (&DAT_00e98e90)[param_1] & 0x800000, 0x800000);
        uVar1 = (&DAT_0050c908)[param_1];
        if ((uVar1 & 0x40000) == 0)
        {
            if ((uVar1 & 0x10000) == 0)
            {
                if ((uVar1 & 0x20000) != 0)
                {
                    *(undefined_32 *)(&DAT_0050c970 + param_1 * 4) = 1;
                }
            }
            else
            {
                *(undefined_32 *)(&DAT_0050c970 + param_1 * 4) = -1;
            }
        }
        else
        {
            *(undefined_32 *)(&DAT_0050c970 + param_1 * 4) = 0;
        }
        if ((uVar1 & 0x80000) == 0)
        {
            if ((uVar1 & 0x4000) == 0)
            {
                if ((uVar1 & 0x8000) != 0)
                {
                    *(undefined_32 *)(&DAT_0050c980 + param_1 * 4) = 1;
                }
            }
            else
            {
                *(undefined_32 *)(&DAT_0050c980 + param_1 * 4) = -1;
            }
        }
        else
        {
            *(undefined_32 *)(&DAT_0050c980 + param_1 * 4) = 0;
        }
        uVar2 = (&DAT_0050c918)[param_1];
        if (((uVar2 & 0x100000) != 0) && (*(int *)(&DAT_0050c970 + param_1 * 4) == -1))
        {
            (&DAT_0050c908)[param_1] = uVar1 | 0x10000;
        }
        if (((uVar2 & 0x200000) != 0) && (*(int *)(&DAT_0050c970 + param_1 * 4) == 1))
        {
            (&DAT_0050c908)[param_1] = (&DAT_0050c908)[param_1] | 0x20000;
        }
        if (((uVar2 & 0x400000) != 0) && (*(int *)(&DAT_0050c980 + param_1 * 4) == -1))
        {
            (&DAT_0050c908)[param_1] = (&DAT_0050c908)[param_1] | 0x4000;
        }
        if (((uVar2 & 0x800000) != 0) && (*(int *)(&DAT_0050c980 + param_1 * 4) == 1))
        {
            (&DAT_0050c908)[param_1] = (&DAT_0050c908)[param_1] | 0x8000;
        }
    }
    return;
}

void FUN_0045a7f0(int param_1, int param_2, uint param_3)

{
    if (param_2 != 0)
    {
        if (((&DAT_0050c908)[param_1] & param_3) == 0)
        {
            (&DAT_0050c918)[param_1] = (&DAT_0050c918)[param_1] | param_3;
        }
        (&DAT_0050c908)[param_1] = param_3 | (&DAT_0050c908)[param_1];
        return;
    }
    (&DAT_0050c908)[param_1] = (&DAT_0050c908)[param_1] & ~param_3;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045a840(int param_1)

{
    float fVar1;
    int iVar2;
    float *pfVar3;
    char *pcVar4;
    undefined_32 *puVar5;
    uint uVar6;
    int iVar7;
    undefined_8 *puVar8;
    int iVar9;
    uint uVar10;
    uint uVar11;
    float10 fVar12;
    float local_c;
    float local_8;
    int local_4;

    iVar7 = 0;
    iVar9 = 0;
    do
    {
        vec3f_set((int)&DAT_00e2a6c4 + iVar9, 0, 0, 0);
        if (iVar9 < 0x1c0)
        {
            vec3f_set((int)&DAT_00e2b224 + iVar9, 0, 0, 0);
        }
        uVar11 = DAT_00e295cc;
        iVar9 = iVar9 + 0x38;
    } while (iVar9 < 0x7a8);
    if (*(int *)(param_1 + 0x38) == 0)
    {
        local_4 = DAT_00e295cc + 1;
        iVar9 = __ftol();
        if (uVar11 == 0)
        {
            DAT_00e295d0 = -1;
            return;
        }
        DAT_00e295d0 = iVar9;
        if (DAT_0050c47c == 1)
        {
            iVar2 = 0;
            if (0 < (int)(uVar11 - 1))
            {
                pcVar4 = &DAT_00e2a6c0;
                do
                {
                    DAT_00e295d0 = iVar2;
                    if ((char)(&DAT_004c1cbb)[*pcVar4 * 0x10] == DAT_0050c950)
                        break;
                    iVar2 = iVar2 + 1;
                    pcVar4 = pcVar4 + 0x38;
                    DAT_00e295d0 = iVar9;
                } while (iVar2 < (int)(uVar11 - 1));
            }
        }
        if (0 < (int)uVar11)
        {
            iVar9 = (iVar9 + 9) * 10;
            pfVar3 = (float *)&DAT_00e2a6c8;
            do
            {
                local_4 = iVar9;
                sin_cos((float)iVar9, &local_8, &local_c);
                pfVar3[-1] = 12.0 - local_c * -256.0;
                *pfVar3 = -116.0 - local_8 * -256.0;
                pfVar3[1] = 106.0;
                vec3f_copy(pfVar3 + 2, pfVar3 + -1);
                fVar12 = (float10)arctan2(pfVar3[-1] - 12.0, -116.0 - *pfVar3);
                fVar1 = 1.5 - _DAT_0050c938;
                pfVar3[8] = (float)(fVar12 - (float10)90.0);
                sin_cos(fVar1 * 360.0, &local_8, &local_c);
                uVar11 = DAT_00e295cc;
                iVar7 = iVar7 + 1;
                iVar9 = iVar9 + -10;
                pfVar3[9] = local_c * _DAT_0050c93c * 45.0;
                pfVar3 = pfVar3 + 0xe;
                local_4 = iVar9;
            } while (iVar7 < (int)uVar11);
        }
    }
    if (*(int *)(param_1 + 0x38) == 1)
    {
        puVar5 = &DAT_004c40a0;
        pcVar4 = &DAT_00e29860;
        do
        {
            if (*pcVar4 != -1)
            {
                iVar7 = (int)*pcVar4;
                (&DAT_00e2a6c4)[iVar7 * 0xe] = puVar5[-1];
                (&DAT_00e2a6c8)[iVar7 * 0xe] = *puVar5;
                (&DAT_00e2a6cc)[iVar7 * 0xe] = 0xc3020000;
                (&DAT_00e2a6ec)[iVar7 * 0xe] = 0;
                (&DAT_00e2a6e8)[iVar7 * 0xe] = 0;
            }
            pcVar4 = pcVar4 + 3;
            puVar5 = puVar5 + 8;
        } while ((int)pcVar4 < 0xe29890);
    }
    if (*(int *)(param_1 + 0x38) == 2)
    {
        uVar10 = 0;
        if (0 < (int)(uVar11 + 1))
        {
            pfVar3 = (float *)&DAT_00e2b22c;
            do
            {
                uVar6 = (int)uVar10 >> 0x1f;
                pfVar3[-2] = 7.7 - (float)(((uVar10 ^ uVar6) - uVar6 & 1 ^ uVar6) - uVar6) * -4.3;
                pfVar3[-1] = 40.0;
                *pfVar3 = 9.0 - (float)((int)uVar10 / 2) * 3.8;
                pfVar3[8] = 0.0;
                pfVar3[7] = 0.0;
                if (uVar10 == uVar11)
                {
                    *pfVar3 = *pfVar3 - 4.1;
                    pfVar3[7] = 90.0;
                }
                uVar10 = uVar10 + 1;
                pfVar3 = pfVar3 + 0xe;
            } while ((int)uVar10 < (int)(uVar11 + 1));
        }
    }
    puVar8 = &DAT_00e2b23c;
    puVar5 = &DAT_00e2a6c4;
    iVar7 = 0;
    do
    {
        vec3f_copy((int)&DAT_00e2a6d0 + iVar7, puVar5);
        vec3f_copy((int)&DAT_00e2a6dc + iVar7, puVar5);
        if ((int)puVar5 < 0xe2a884)
        {
            vec3f_copy(&DAT_00e2b230 + iVar7, puVar5);
            vec3f_copy(puVar8, puVar5);
        }
        puVar5 = puVar5 + 0xe;
        iVar7 = iVar7 + 0x38;
        puVar8 = puVar8 + 0x38;
    } while ((int)puVar5 < 0xe2ae6c);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045ab50(int param_1)

{
    float fVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;
    int *piVar4;
    int iVar5;
    int iVar6;
    undefined_32 uVar7;
    int iVar8;
    int iVar9;
    int *piVar10;
    float *pfVar11;
    float10 fVar12;
    int local_44;
    int local_28[4];
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;

    local_28[1] = 1;
    local_28[2] = 1;
    local_28[0] = 2;
    local_28[3] = 2;
    local_18 = 3;
    local_14 = 3;
    local_c = 3;
    puVar2 = &DAT_00e29600;
    MEMSET(iVar8, puVar2, 0, 0x97)
    puVar2 = &DAT_00e2afa0;
    MEMSET(iVar8, puVar2, 0, 0x97)
    puVar2 = &DAT_00e29900;
    MEMSET(iVar8, puVar2, 0, 0x97)
    puVar2 = &DAT_00e29160;
    MEMSET(iVar8, puVar2, 0, 0x97)
    local_10 = 0;
    DAT_00e295a0 = 0;
    DAT_00e295a4 = 0;
    DAT_00e295a8 = 0;
    DAT_00e295ac = 0;
    DAT_00e295b0 = 0;
    DAT_00e295b4 = 0;
    DAT_00e295cc = 0;
    DAT_00e295d0 = 0;
    DAT_00e295d4 = 0;
    _DAT_00e295d8 = 0;
    DAT_00e295dc = 0;
    DAT_00e295e0 = 0;
    DAT_00e295c0 = 0;
    DAT_00e295c4 = 0;
    DAT_00e295c8 = 0;
    FUN_0043d970(param_1);
    FUN_0044e320(&DAT_00e364a0);
    FUN_0044e4e0();
    FUN_00454d10();
    *(undefined_32 *)(param_1 + 8) = 1;
    *(undefined_32 *)(param_1 + 0xc) = 1;
    *(undefined_32 *)(param_1 + 0x10) = -1;
    *(undefined_32 *)(param_1 + 0x14) = 0;
    *(undefined_32 *)(param_1 + 0x18) = 0;
    *(undefined_32 *)(param_1 + 0x1c) = 3;
    *(undefined_32 *)(param_1 + 0x20) = 0;
    *(undefined_32 *)(param_1 + 0x24) = 0;
    *(undefined_32 *)(param_1 + 0x2c) = 0;
    *(undefined_32 *)(param_1 + 0x28) = 0;
    *(undefined_32 *)(param_1 + 0x30) = 0;
    *(undefined_32 *)(param_1 + 0x34) = 0;
    *(undefined_32 *)(param_1 + 0x3c) = -1;
    *(undefined_32 *)(param_1 + 0x38) = -1;
    *(undefined_32 *)(param_1 + 0x40) = -1;
    vec3f_set(param_1 + 0x44, 0, 0, 0);
    *(undefined_8 *)(param_1 + 0x50) = 0;
    *(undefined_8 *)(param_1 + 0x51) = 0;
    *(undefined_32 *)(param_1 + 0x54) = 0;
    *(undefined_32 *)(param_1 + 0x58) = 0;
    *(undefined_8 *)(param_1 + 0x5c) = 1;
    *(undefined_16 *)(param_1 + 0x98) = 100;
    *(undefined_16 *)(param_1 + 0xa0) = 100;
    *(undefined_16 *)(param_1 + 0x92) = 800;
    *(undefined_16 *)(param_1 + 0x94) = 700;
    *(undefined_16 *)(param_1 + 0x96) = 600;
    *(undefined_16 *)(param_1 + 0x9a) = 0x4b0;
    *(undefined_16 *)(param_1 + 0x9c) = 600;
    *(undefined_16 *)(param_1 + 0x9e) = 300;
    *(undefined_16 *)(param_1 + 0xa2) = 0x898;
    *(undefined_16 *)(param_1 + 0xa4) = 0;
    *(undefined_16 *)(param_1 + 0xa6) = 0;
    *(undefined_16 *)(param_1 + 0xa8) = 0;
    *(undefined_8 *)(param_1 + 0x5d) = 0;
    *(undefined_8 *)(param_1 + 0x5e) = 0;
    *(undefined_8 *)(param_1 + 0x5f) = 0;
    *(undefined_8 *)(param_1 + 0x60) = 0;
    *(undefined_8 *)(param_1 + 0x8a) = 4;
    *(undefined_32 *)(param_1 + 0xb4) = 0;
    *(undefined_32 *)(param_1 + 0xb8) = 0;
    *(undefined_32 *)(param_1 + 0xbc) = 0;
    *(undefined_32 *)(param_1 + 0xc0) = 0;
    *(undefined_32 *)(param_1 + 0xc4) = 0;
    *(undefined_32 *)(param_1 + 200) = 0;
    iVar8 = 0;
    do
    {
        *(char *)(iVar8 + 0xcc + param_1) = (char)iVar8;
        iVar8 = iVar8 + 1;
    } while (iVar8 < 3);
    FUN_0045bd90(param_1);
    puVar2 = &DAT_00e29bc4;
    do
    {
        puVar2[-1] = -1;
        *puVar2 = -1;
        puVar2[1] = -1;
        puVar2[2] = 0;
        *(undefined_8 *)(puVar2 + 3) = 0xff;
        *(undefined_8 *)((int)puVar2 + 0xd) = 0xff;
        puVar2[4] = -1;
        puVar2[5] = 0;
        puVar2[0x20] = 0;
        puVar2[6] = 0;
        puVar2[7] = 0;
        puVar2[8] = 0;
        puVar2[9] = 0;
        puVar2[10] = 0;
        puVar2[0xb] = 0;
        puVar2[0xc] = 0;
        puVar2[0xd] = 0;
        puVar2[0xe] = 0;
        puVar2[0xf] = 0;
        puVar2[0x10] = 0;
        puVar2[0x11] = 0;
        puVar2[0x12] = 0;
        puVar2[0x13] = 0;
        puVar2[0x14] = 0;
        puVar2[0x15] = 0;
        *(undefined_16 *)(puVar2 + 0x16) = 0;
        puVar2[0x1c] = 0;
        puVar2[0x1d] = 0;
        puVar2[0x1e] = 0;
        puVar2[0x17] = 0;
        puVar3 = puVar2 + 0x22;
        puVar2[0x18] = 0;
        puVar2[0x19] = 0;
        puVar2[0x1a] = 0;
        puVar2[0x1b] = 0;
        puVar2 = puVar3;
    } while ((int)puVar3 < 0xe2a664);
    iVar8 = 0;
    piVar4 = &DAT_00e98f44;
    piVar10 = local_28;
    do
    {
        iVar6 = *piVar10;
        piVar4[-1] = iVar8;
        iVar5 = iVar8 + -1;
        iVar8 = iVar8 + iVar6;
        *piVar4 = iVar5 + iVar6;
        if (iVar6 == 0)
        {
            piVar4[-1] = -1;
            *piVar4 = -2;
        }
        piVar4 = piVar4 + 0x17;
        piVar10 = piVar10 + 1;
    } while ((int)piVar4 < 0xe99224);
    local_44 = 0;
    do
    {
        iVar8 = rand();
        fVar1 = (float)iVar8 * 4.656613e-10 * 360.0;
        (&DAT_00e98f48)[local_44 * 0x17] = fVar1;
        if ((local_44 != 6) && (((45.0 < fVar1 && (fVar1 < 135.0)) || ((225.0 < fVar1 && (fVar1 < 315.0))))))
        {
            (&DAT_00e98f48)[local_44 * 0x17] = fVar1 - -90.0;
        }
        iVar8 = rand();
        (&DAT_00e98f4c)[local_44 * 0x17] = (float)iVar8 * 4.656613e-10 * 360.0;
        iVar8 = rand();
        (&DAT_00e98f54)[local_44 * 0x17] = (float)iVar8 * 4.656613e-10 * 360.0;
        fVar12 = (float10)FUN_0045cf00();
        iVar8 = rand();
        fVar1 = ((float)iVar8 * 4.656613e-10 * 10.0 - -5.0) * (float)fVar12;
        (&DAT_00e98f50)[local_44 * 0x17] = fVar1;
        if (local_44 == 6)
        {
            _DAT_00e99178 = fVar1 * 5.0;
        }
        fVar12 = (float10)FUN_0045cf00();
        iVar8 = rand();
        (&DAT_00e98f58)[local_44 * 0x17] =
            ((float)iVar8 * 4.656613e-10 * 5.0 - -10.0) * (float)fVar12 + (float)(&DAT_00e98f50)[local_44 * 0x17];
        iVar8 = (&DAT_00e98f40)[local_44 * 0x17];
        iVar5 = (&DAT_00e98f44)[local_44 * 0x17];
        if (iVar8 <= iVar5)
        {
            pfVar11 = (float *)(&DAT_00e293d0 + iVar8 * 6);
            do
            {
                iVar9 = iVar8 - (&DAT_00e98f40)[local_44 * 0x17];
                iVar5 = (iVar5 - (&DAT_00e98f40)[local_44 * 0x17]) + 1;
                iVar6 = rand();
                pfVar11[-1] =
                    (360.0 / (float)iVar5) * (float)iVar6 * 4.656613e-10 - ((float)iVar9 * -360.0) / (float)iVar5;
                iVar5 = rand();
                fVar12 = (float10)FUN_0045cf00();
                fVar1 = (float)iVar9 * -40.0;
                *pfVar11 =
                    (float)(fVar12 * (float10)(((float)iVar5 * 4.656613e-10 * 15.0 - -45.0) - (float)iVar9 * 20.0));
                iVar5 = rand();
                fVar12 = (float10)FUN_0045cf00();
                pfVar11[-4] = (float)(fVar12 * (float10)(((float)iVar5 * 4.656613e-10 * 10.0 - -65.0) - fVar1));
                iVar5 = rand();
                fVar12 = (float10)FUN_0045cf00();
                pfVar11[-3] = (float)(fVar12 * (float10)(((float)iVar5 * 4.656613e-10 * 10.0 - -65.0) - fVar1));
                fVar12 = (float10)FUN_0045cf00();
                iVar5 = rand();
                pfVar11[-2] = ((float)iVar5 * 4.656613e-10 * 40.0 - -5.0) * (float)fVar12;
                iVar6 = rand();
                iVar5 = (&DAT_00e98f44)[local_44 * 0x17];
                iVar8 = iVar8 + 1;
                pfVar11[1] = (((float)iVar6 * 4.656613e-10 * 0.01 - -0.005) - (float)iVar9 * -0.01) * 15.0;
                pfVar11 = pfVar11 + 6;
            } while (iVar8 <= iVar5);
        }
        local_44 = local_44 + 1;
    } while (local_44 < 8);
    uVar7 = lookup_translation(s__SCREENTEXT_578__f4_c_sTatooine_004c4a38);
    _sprintf(&DAT_00e98f5c, uVar7);
    uVar7 = lookup_translation(s__SCREENTEXT_579__f4_c_sAndo_Prim_004c4a14);
    _sprintf(&DAT_00e98fb8, uVar7);
    uVar7 = lookup_translation(s__SCREENTEXT_580__f4_c_sAquilaris_004c49f0);
    _sprintf(&DAT_00e99014, uVar7);
    uVar7 = lookup_translation(s__SCREENTEXT_581__f4_c_sOrd_Ibann_004c49cc);
    _sprintf(&DAT_00e99070, uVar7);
    uVar7 = lookup_translation(s__SCREENTEXT_582__f4_c_sBaroonda_004c49ac);
    _sprintf(&DAT_00e990cc, uVar7);
    uVar7 = lookup_translation(s__SCREENTEXT_583__f4_c_sMon_Gazza_004c4988);
    _sprintf(&DAT_00e99128, uVar7);
    uVar7 = lookup_translation(s__SCREENTEXT_576__f4_c_sOovo_IV_004c4968);
    _sprintf(&DAT_00e99184, uVar7);
    uVar7 = lookup_translation(s__SCREENTEXT_584__f4_c_sMalastare_004c4944);
    _sprintf(&DAT_00e991e0, uVar7);
    DAT_0050c950 = 0;
    return;
}

void FUN_0045b210(int param_1)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    int iVar4;
    byte *pbVar5;
    undefined_32 local_20;
    int local_1c;
    undefined_32 local_18;

    iVar4 = 0;
    if ('\0' < *(char *)(param_1 + 0x72))
    {
        pbVar5 = &DAT_00e29bc8;
        iVar1 = 0;
        do
        {
            if ((*(int *)(pbVar5 + -4) == MAGIC('L', 'o', 'c', 'l')) || (iVar3 = iVar1, (*pbVar5 & 0x20) != 0))
            {
                local_18 = *(undefined_32 *)(pbVar5 + 0x7c);
                iVar3 = iVar1 + 1;
                local_20 = 0x4e41736e;
                local_1c = iVar3;
                uVar2 = FUN_00450aa0(MAGIC('c', 'M', 'a', 'n'), iVar1, &local_20);
                FUN_00450c00(uVar2);
            }
            iVar4 = iVar4 + 1;
            pbVar5 = pbVar5 + 0x88;
            iVar1 = iVar3;
        } while (iVar4 < *(char *)(param_1 + 0x72));
    }
    return;
}

void FUN_0045b290(int param_1, undefined_32 param_2, int param_3)

{
    int iVar1;
    char cVar2;
    char cVar3;
    undefined_8 uVar4;
    int iVar5;
    undefined_32 local_40;
    undefined_32 local_3c;
    int local_38;
    int local_34;
    int local_30;
    int local_2c;
    undefined_32 local_28;
    int local_24;
    undefined_32 local_20;
    int local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    int local_10;
    int local_c;
    int local_8;

    FUN_0045bb60();
    FUN_0045b5d0(param_1);
    FUN_00408640(0x3c);
    if (*(int *)(param_1 + 100) == 2)
    {
        *(undefined_8 *)(param_1 + 0x70) = 1;
        *(undefined_8 *)(param_1 + 0x72) = 3;
        do
        {
            do
            {
                rand();
                cVar3 = __ftol();
                *(char *)(param_1 + 0x5d) = cVar3;
            } while (cVar3 == '\x13');
        } while ((*(int *)(&DAT_004bfee8 + cVar3 * 0xc) == -1) || ((&DAT_004bfef0)[cVar3 * 0xc] != '\0'));
    }
    if (DAT_0050ca3c != 0)
    {
        if ((*(byte *)(param_1 + 0x14) & 8) != 0)
        {
            *(undefined_8_1 *)(param_1 + 0x5d) = (&DAT_00e29890)[DAT_0050c960];
        }
        *(undefined_32 *)(param_1 + 100) = 1;
        DAT_00e364a8 = DAT_00e364a8 | 0x40;
    }
    iVar5 = FUN_0041d6b0();
    if (iVar5 != 0)
    {
        FUN_0041bd90(1, 10, 0x78);
        *(undefined_8 *)(param_1 + 0x6c) = 0;
        uVar4 = FUN_00420f90();
        *(undefined_8 *)(param_1 + 0x70) = uVar4;
        cVar3 = FUN_00420f90();
        *(char *)(param_1 + 0x72) = cVar3 + (char)DAT_00ea02b4;
        *(undefined_8 *)(param_1 + 0x5d) = DAT_00ea02b0;
        *(undefined_8 *)(param_1 + 0x8f) = (undefined_8)DAT_00ea02b8;
    }
    if (DAT_0050ca3c != 0)
    {
        uVar4 = (&DAT_00e29890)[DAT_0050c960];
        *(undefined_32 *)(param_1 + 100) = 1;
        *(undefined_8 *)(param_1 + 0x5d) = uVar4;
        DAT_00e364a8 = DAT_00e364a8 | 0x40;
    }
    FUN_00408640(0x46);
    iVar5 = FUN_0041d6b0();
    if (iVar5 == 0)
    {
        local_3c = FUN_0045b7d0(param_1, param_2);
    }
    else
    {
        local_3c = FUN_0045b610(param_1, param_2);
    }
    local_38 = (int)*(char *)(param_1 + 0x72);
    if (*(int *)(param_1 + 100) == 2)
    {
        local_38 = 3;
    }
    else if (DAT_0050ca3c != 0)
    {
        local_38 = 2;
    }
    local_28 = -1;
    local_20 = 0;
    iVar5 = *(char *)(param_1 + 0x5d) * 0xc;
    local_2c = *(int *)(&DAT_004bfeec + iVar5);
    local_30 = *(int *)(&DAT_004bfee8 + iVar5);
    if (*(int *)(param_1 + 100) == 2)
    {
        local_20 = 0x1e;
    }
    else if (DAT_0050ca3c != 0)
    {
        local_20 = 1000000;
    }
    local_1c = (int)*(char *)(param_1 + 0x8f);
    if (*(char *)(param_1 + 0x6c) != '\0')
    {
        local_1c = 3;
    }
    local_c = (int)*(char *)(param_1 + 0x6e);
    iVar1 = local_c + *(char *)(param_1 + 0x5d) * 2;
    local_18 = *(undefined_32 *)(&DAT_00e366bc + iVar1 * 4);
    local_14 = *(undefined_32 *)(&DAT_00e365f4 + iVar1 * 4);
    local_10 = *(char *)(param_1 + 0x90) + -2;
    if (*(char *)(param_1 + 0x6c) != '\0')
    {
        local_10 = 0;
    }
    local_8 = (int)(char)(&DAT_00e37404)[iVar1];
    if ((local_30 == -1) || (cVar3 = (&DAT_004bfef1)[iVar5], cVar2 = (&DAT_004bfef0)[iVar5], local_2c == -1))
    {
        local_30 = DAT_004bffa8;
        local_2c = DAT_004bffac;
        cVar3 = DAT_004bffb1;
        cVar2 = DAT_004bffb0;
    }
    local_24 = (int)cVar2;
    local_34 = (int)cVar3;
    if (param_3 == 0)
    {
        iVar5 = FUN_0041d6b0();
        if ((iVar5 != 0) && (*(int *)(param_1 + 100) != 2))
        {
            iVar5 = FUN_0041d6c0();
            if (iVar5 != 0)
            {
                FUN_0041dd50(param_1, &local_40);
            }
        }
    }
    FUN_00408640(0x50);
    FUN_0041bd50(1);
    local_40 = 0x4265676e;
    FUN_00408640(0x5a);
    if (*(int *)(param_1 + 0x68) < 0)
    {
        thunk_FUN_00449e30((char)(&DAT_004bfef1)[*(char *)(param_1 + 0x5d) * 0xc] + 8);
        FUN_00450c50(MAGIC('J', 'd', 'g', 'e'), &local_40);
        FUN_0045b210(param_1);
        return;
    }
    FUN_00445aa0(1);
    FUN_00447300(MAGIC('S', 'c', 'e', 'n'), 1);
    local_3c = *(undefined_32 *)(param_1 + 0x68);
    FUN_00450c50(MAGIC('S', 'c', 'e', 'n'), &local_40);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045b5d0(int param_1)

{
    char cVar1;
    int iVar2;
    int *piVar3;

    cVar1 = *(char *)(param_1 + 0x70);
    DAT_004c3fe8 = -1;
    iVar2 = 0;
    DAT_004c3fec = -1;
    _DAT_004c3ff0 = -1;
    _DAT_004c3ff4 = -1;
    if (0 < cVar1)
    {
        piVar3 = &DAT_004c3fe8;
        do
        {
            *piVar3 = iVar2;
            iVar2 = iVar2 + 1;
            piVar3 = piVar3 + 1;
        } while (iVar2 < cVar1);
    }
    return;
}

undefined_32 *FUN_0045b610(int param_1, int *param_2)

{
    undefined_8 uVar1;
    undefined_32 *puVar2;
    int iVar3;
    uint *puVar4;
    int iVar5;
    int iVar6;
    int *piVar7;
    int *piVar8;
    int *piVar9;
    uint uVar10;
    undefined_8_1 *local_54;
    int local_50[20];

    if (param_2 != NULL)
    {
        puVar2 = &DAT_00e29bc4;
        do
        {
            *puVar2 = 0;
            puVar2 = puVar2 + 0x22;
        } while ((int)puVar2 < 0xe2a664);
        iVar5 = (int)*(char *)(param_1 + 0x70);
        if (0 < iVar5)
        {
            do
            {
                iVar5 = iVar5 + -1;
            } while (iVar5 != 0);
        }
        if ('\0' < *(char *)(param_1 + 0x72))
        {
            param_2 = local_50;
            local_54 = &DAT_00e35a60;
            iVar5 = 0;
            piVar7 = &DAT_00e29bc4;
            do
            {
                uVar1 = FUN_0041c4d0(iVar5);
                *(undefined_8 *)(iVar5 + 0x73 + param_1) = uVar1;
                piVar7[-1] = iVar5;
                *param_2 = iVar5;
                iVar3 = FUN_0041d6c0();
                if (iVar3 == 0)
                {
                    if (iVar5 == DAT_004eb3b4)
                    {
                        *piVar7 = MAGIC('L', 'o', 'c', 'l');
                        piVar7[2] = (int)local_54;
                    }
                    else
                    {
                        *piVar7 = MAGIC('R', 'E', 'M', 'O');
                        piVar7[2] = 0;
                    }
                }
                else if (iVar5 == DAT_004eb3b4)
                {
                    *piVar7 = MAGIC('L', 'o', 'c', 'l');
                    piVar7[2] = (int)local_54;
                    FUN_0041de50(iVar5, *piVar7);
                }
                else
                {
                    iVar3 = FUN_00420f70(iVar5);
                    piVar7[2] = 0;
                    iVar3 = (-(uint)(iVar3 != 0) & 0x11040406) + MAGIC('A', 'A', 'I', 'I');
                    *piVar7 = iVar3;
                    FUN_0041de50(iVar5, iVar3);
                }
                *(undefined_8 *)(piVar7 + 3) = 0;
                *(undefined_8 *)((int)piVar7 + 0xd) = 0;
                piVar7[4] = iVar5;
                iVar6 = iVar5 + 1;
                piVar7[5] = (int)(&DAT_004c2700 + *(char *)(iVar5 + 0x73 + param_1) * 0x34);
                local_54 = local_54 + 0x50;
                piVar8 = (int *)(&DAT_004c2bb0 + *(char *)(iVar5 + 0x73 + param_1) * 0x3c);
                piVar9 = piVar7 + 6;
                QMEMCPY(iVar3, piVar8, piVar9, 0xf)
                param_2 = param_2 + 1;
                iVar5 = iVar6;
                piVar7 = piVar7 + 0x22;
            } while (iVar6 < *(char *)(param_1 + 0x72));
        }
        iVar5 = FUN_0045bab0(param_1);
        iVar3 = 0;
        if ('\0' < *(char *)(param_1 + 0x72))
        {
            puVar4 = (uint *)&DAT_00e29bc8;
            do
            {
                if (iVar5 == iVar3)
                {
                    uVar10 = *puVar4 | 0x20;
                }
                else
                {
                    uVar10 = *puVar4 & 0xffffffdf;
                }
                *puVar4 = uVar10;
                iVar3 = iVar3 + 1;
                puVar4 = puVar4 + 0x22;
            } while (iVar3 < *(char *)(param_1 + 0x72));
        }
        FUN_00411370();
        return &DAT_00e29bc0;
    }
    return &DAT_00e29bc0;
}

undefined_32 *FUN_0045b7d0(int param_1, int *param_2)

{
    byte bVar1;
    char cVar2;
    uint uVar3;
    bool bVar4;
    undefined_8 uVar5;
    uint *puVar6;
    int iVar7;
    int iVar8;
    uint uVar9;
    int *piVar10;
    int *piVar11;
    int *piVar12;
    undefined_8 *puVar13;
    undefined_8_1 *local_64;
    undefined_32 local_60;
    undefined_16 local_5c;
    undefined_8 local_5a;
    undefined_32 local_58;
    undefined_16 local_54;
    undefined_8 local_52;
    int local_50[20];

    uVar9 = 0xfffffff;
    if (param_2 != NULL)
    {
        iVar7 = (int)*(char *)(param_1 + 0x70);
        if (0 < iVar7)
        {
            puVar6 = &DAT_00e35a94;
            do
            {
                uVar3 = *puVar6;
                puVar6 = puVar6 + 0x14;
                uVar9 = uVar9 | uVar3;
                iVar7 = iVar7 + -1;
            } while (iVar7 != 0);
        }
        if (*(int *)(param_1 + 100) == 2)
        {
            rand();
            uVar5 = __ftol();
            *(undefined_8 *)(param_1 + 0x73) = uVar5;
        }
        *(undefined_8 *)(param_1 + 0x70) = 1;
        iVar7 = 1;
        if ('\x01' < *(char *)(param_1 + 0x72))
        {
            do
            {
                bVar4 = false;
                rand();
                uVar5 = __ftol();
                *(undefined_8 *)(iVar7 + 0x73 + param_1) = uVar5;
                if ((iVar7 == 1) && (*(char *)(param_1 + 0x73) != (&DAT_004bfef2)[*(char *)(param_1 + 0x5d) * 0xc]))
                {
                    *(undefined_8 *)(param_1 + 0x74) = (&DAT_004bfef2)[*(char *)(param_1 + 0x5d) * 0xc];
                }
                else
                {
                    iVar8 = 0;
                    if (0 < iVar7)
                    {
                        bVar1 = *(byte *)(iVar7 + 0x73 + param_1);
                        do
                        {
                            if (bVar1 == *(byte *)(iVar8 + 0x73 + param_1))
                            {
                                bVar4 = true;
                            }
                            if ((1 << (bVar1 & 0x1f) & uVar9) == 0)
                            {
                                bVar4 = true;
                            }
                            iVar8 = iVar8 + 1;
                        } while (iVar8 < iVar7);
                    }
                }
            } while ((bVar4) || (iVar7 = iVar7 + 1, iVar7 < *(char *)(param_1 + 0x72)));
        }
        iVar7 = 0;
        if ('\0' < *(char *)(param_1 + 0x72))
        {
            param_2 = local_50;
            local_64 = &DAT_00e35a60;
            piVar10 = &DAT_00e29bc4;
            do
            {
                piVar10[-1] = iVar7;
                cVar2 = *(char *)(param_1 + 0x70);
                *param_2 = iVar7;
                *piVar10 = ((cVar2 <= iVar7) - 1 & 0xb2e1a23) + MAGIC('A', 'A', 'I', 'I');
                if (*(int *)(param_1 + 100) != 0)
                {
                    *piVar10 = MAGIC('A', 'A', 'I', 'I');
                }
                *(undefined_8 *)(piVar10 + 3) = 0;
                *(undefined_8 *)((int)piVar10 + 0xd) = 0;
                if (*piVar10 == MAGIC('L', 'o', 'c', 'l'))
                {
                    piVar10[2] = (int)local_64;
                }
                else
                {
                    piVar10[2] = 0;
                }
                piVar10[4] = iVar7;
                piVar10[5] = (int)(&DAT_004c2700 + *(char *)(iVar7 + 0x73 + param_1) * 0x34);
                if (*piVar10 == MAGIC('A', 'A', 'I', 'I'))
                {
                    piVar11 = &DAT_004c3114;
                    piVar12 = piVar10 + 6;
                    QMEMCPY(iVar8, piVar11, piVar12, 0xf)
                    piVar10[0x10] = *(int *)(&DAT_004c2bd8 + *(char *)(iVar7 + 0x73 + param_1) * 0x3c);
                    piVar10[0x12] = *(int *)(&DAT_004c2be0 + *(char *)(iVar7 + 0x73 + param_1) * 0x3c);
                    piVar10[0x14] = *(int *)(&DAT_004c2be8 + *(char *)(iVar7 + 0x73 + param_1) * 0x3c);
                }
                else
                {
                    if (piVar10[2] == 0)
                    {
                        local_60 = -1;
                        local_58 = 0;
                        local_5c = 0xffff;
                        local_54 = 0;
                        local_5a = 0xff;
                        local_52 = 0;
                    }
                    else
                    {
                        iVar8 = 0;
                        puVar13 = (undefined_8 *)(piVar10[2] + 0x48);
                        do
                        {
                            *(undefined_8 *)((int)&local_58 + iVar8) = puVar13[-7];
                            *(undefined_8 *)((int)&local_60 + iVar8) = *puVar13;
                            iVar8 = iVar8 + 1;
                            puVar13 = puVar13 + 1;
                        } while (iVar8 < 7);
                    }
                    cVar2 = *(char *)(iVar7 + 0x73 + param_1);
                    FUN_00449d00(piVar10 + 6, &DAT_004c2bb0 + cVar2 * 0x3c, &local_58, &local_60);
                    FUN_00449330(&DAT_00e2aee0, &DAT_004c2bb0 + cVar2 * 0x3c);
                    FUN_00449330(&DAT_00e2aec0, piVar10 + 6);
                }
                iVar7 = iVar7 + 1;
                param_2 = param_2 + 1;
                piVar10 = piVar10 + 0x22;
                local_64 = local_64 + 0x50;
            } while (iVar7 < *(char *)(param_1 + 0x72));
        }
        iVar7 = FUN_0045bab0(param_1);
        iVar8 = 0;
        if ('\0' < *(char *)(param_1 + 0x72))
        {
            puVar6 = (uint *)&DAT_00e29bc8;
            do
            {
                if (iVar7 == iVar8)
                {
                    uVar9 = *puVar6 | 0x20;
                }
                else
                {
                    uVar9 = *puVar6 & 0xffffffdf;
                }
                *puVar6 = uVar9;
                iVar8 = iVar8 + 1;
                puVar6 = puVar6 + 0x22;
            } while (iVar8 < *(char *)(param_1 + 0x72));
        }
        FUN_00411370();
        return &DAT_00e29bc0;
    }
    return &DAT_00e29bc0;
}

int FUN_0045bab0(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    int iVar5;

    iVar1 = -1;
    if (*(int *)(param_1 + 100) == 0)
    {
        iVar5 = (int)*(char *)(param_1 + 0x72);
        iVar2 = 0;
        if (0 < iVar5)
        {
            piVar4 = &DAT_00e29bc4;
            do
            {
                if ((*(char *)(iVar2 + 0x73 + param_1) == (&DAT_004bfef2)[*(char *)(param_1 + 0x5d) * 0xc])
                    && (*piVar4 == MAGIC('A', 'A', 'I', 'I')))
                {
                    iVar1 = iVar2;
                }
                iVar2 = iVar2 + 1;
                piVar4 = piVar4 + 0x22;
            } while (iVar2 < iVar5);
        }
        if (iVar1 == -1)
        {
            piVar4 = &DAT_00e29bc4;
            iVar2 = iVar1;
            iVar3 = 0;
            do
            {
                iVar1 = iVar3;
                if (iVar5 <= iVar1)
                {
                    return iVar2;
                }
                iVar3 = iVar1;
                if (*piVar4 != MAGIC('A', 'A', 'I', 'I'))
                {
                    iVar3 = iVar1 + 1;
                    piVar4 = piVar4 + 0x22;
                    iVar1 = iVar2;
                }
                iVar2 = iVar1;
            } while (iVar1 == -1);
        }
    }
    else
    {
        iVar2 = 0;
        if (0 < *(char *)(param_1 + 0x72))
        {
            do
            {
                if (*(char *)(iVar2 + 0x73 + param_1) == (&DAT_004bfef2)[*(char *)(param_1 + 0x5d) * 0xc])
                {
                    iVar1 = iVar2;
                }
                iVar2 = iVar2 + 1;
            } while (iVar2 < *(char *)(param_1 + 0x72));
        }
        if (iVar1 == -1)
        {
            return 0;
        }
    }
    return iVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045bb60(void)

{
    _DAT_004c3fd8 = -1;
    _DAT_004c3fdc = -1;
    _DAT_004c3fe0 = -1;
    _DAT_004c3fe4 = -1;
    return;
}

void FUN_0045bd90(int param_1)

{
    int iVar1;

    iVar1 = 0;
    *(undefined_8 *)(param_1 + 0x6c) = 1;
    *(undefined_8 *)(param_1 + 0x70) = 1;
    *(undefined_32 *)(param_1 + 100) = 0;
    *(undefined_32 *)(param_1 + 0x68) = -1;
    *(undefined_8 *)(param_1 + 0x6d) = 0;
    *(undefined_8 *)(param_1 + 0x6e) = 0;
    *(undefined_8 *)(param_1 + 0x6f) = 0;
    *(undefined_8 *)(param_1 + 0x72) = 0xc;
    *(undefined_8 *)(param_1 + 0x8f) = 3;
    *(undefined_8 *)(param_1 + 0x90) = 2;
    *(undefined_8 *)(param_1 + 0x91) = 2;
    do
    {
        *(char *)(iVar1 + 0x73 + param_1) = (char)iVar1;
        iVar1 = iVar1 + 1;
    } while (iVar1 < 0x17);
    return;
}

void FUN_0045bde0(int param_1, short param_2, int param_3)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    iVar3 = (int)param_2;
    iVar2 = *(int *)(param_1 + 0x34);
    bVar1 = false;
    iVar4 = iVar2 + iVar3;
    if (param_3 == 0)
    {
        if (iVar4 < 0)
        {
            return;
        }
        if (0x27 < iVar4)
        {
            return;
        }
        if ((&DAT_004c4028)[iVar4 * 0x10] != (&DAT_004c4028)[iVar2 * 0x10])
        {
            return;
        }
    }
    iVar4 = iVar4 - iVar3;
    do
    {
        iVar4 = iVar4 + iVar3;
        if (iVar4 < 0)
        {
            iVar4 = 0x27;
        }
        else if (0x27 < iVar4)
        {
            iVar4 = 0;
        }
    } while ((&DAT_004c4028)[iVar4 * 0x10] != (&DAT_004c4028)[iVar2 * 0x10]);
    iVar3 = iVar4 * 0x20;
    if (*(int *)(iVar3 + 0x4c402c) != 0)
    {
        iVar2 = vec3f_equal(&DAT_004c4010 + iVar3, &DAT_004c4010 + iVar2 * 0x20);
        if ((iVar2 == 0)
            || (iVar2 = vec3f_equal(&DAT_004c401c + iVar3, &DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20),
                iVar2 == 0))
        {
            bVar1 = true;
            FUN_0045c010(&DAT_004c4010 + iVar3, &DAT_004c401c + iVar3, 1, 0, 0);
        }
    }
    *(int *)(param_1 + 0x34) = iVar4;
    if (bVar1)
    {
        FUN_0045bf20(param_1);
    }
    return;
}

void FUN_0045bee0(int param_1, int param_2, int param_3, undefined_32 param_4)

{
    *(int *)(param_1 + 0x34) = param_2;
    FUN_0045c010(&DAT_004c4010 + param_2 * 0x20, &DAT_004c401c + param_2 * 0x20, 1, 0, param_4);
    if (param_3 != -1)
    {
        DAT_004bfedc = param_3;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045bf20(undefined_32 *param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    float10 fVar4;
    float local_24;
    float local_20;
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    iVar1 = (int)param_1;
    vec3f_copy(local_c, &DAT_004c4010 + *(int *)((int)param_1 + 0x34) * 0x20);
    vec3f_copy(&local_24, &DAT_004c401c + *(int *)((int)param_1 + 0x34) * 0x20);
    iVar3 = 0;
    if ('\0' < *(char *)((int)param_1 + 0x70))
    {
        param_1 = &DAT_00e29970;
        do
        {
            FUN_0045cb80(iVar1, iVar3);
            iVar2 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), iVar3 + 0x1c);
            if (iVar2 != 0)
            {
                FUN_0044afb0(*param_1, local_18);
                fVar4 = (float10)arctan2(_DAT_00e298a0 - local_24, local_20 - _DAT_00e298a4);
                FUN_00468800(iVar3 + 0x1c, 0x14, local_18, &DAT_00e298a0, *(undefined_32 *)(iVar2 + 0x68),
                             (float)fVar4);
            }
            iVar3 = iVar3 + 1;
            param_1 = param_1 + 1;
        } while (iVar3 < *(char *)(iVar1 + 0x70));
    }
    return;
}

void FUN_0045c010(undefined_32 param_1, undefined_32 param_2, short param_3, int param_4, int param_5)

{
    undefined_8 local_c[12];

    if (param_5 == 0)
    {
        FUN_0044bb10(&DAT_00e2b3e0, &DAT_00e2af60);
        FUN_0044bb10(&DAT_00e2ae80, &DAT_00e298c0);
    }
    vec3f_copy(&DAT_00e29b90, param_1);
    vec3f_copy(&DAT_00e2b470, param_2);
    DAT_0050c930 = param_3;
    if ((param_3 == 3) && (param_4 != 0))
    {
        vec3f_sub(local_c, &DAT_00e298f0, &DAT_00e2af90);
        vec3f_add(&DAT_00e29b90, &DAT_00e2b470, local_c);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045c0b0(int param_1)

{
    float fVar1;
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    vec3f_copy(local_18, &DAT_00e298f0);
    vec3f_copy(local_c, &DAT_00e2af90);
    if (DAT_004c4004 != 0)
    {
        _DAT_0050c8b4 = _DAT_00e2b470 - _DAT_00e2b410;
        _DAT_0050c8c4 = _DAT_00e2b474 - _DAT_00e2b414;
        _DAT_0050c8e4 = _DAT_00e2b478 - _DAT_00e2b418;
        _DAT_0050c8b8 = _DAT_00e29b90 - _DAT_00e2aeb0;
        _DAT_0050c8b0 = _DAT_00e29b94 - _DAT_00e2aeb4;
        _DAT_0050c8bc = _DAT_00e29b98 - _DAT_00e2aeb8;
        _DAT_0050c8e0 = 0.0;
        DAT_0050c8c0 = 0.5;
        if ((((_DAT_0050c8b4 < 500.0) && (-500.0 < _DAT_0050c8b4)) && (_DAT_0050c8c4 < 500.0))
            && ((-500.0 < _DAT_0050c8c4 && (*(int *)(param_1 + 0x38) == 1))))
        {
            DAT_0050c8c0 = 0.3;
        }
        DAT_004c4004 = 0;
    }
    if (DAT_0050c8c0 <= _DAT_0050c8e0)
    {
        DAT_0050c930 = 5;
        if (*(int *)(param_1 + 8) == 8)
        {
            DAT_0050c930 = 0;
        }
        DAT_004c4004 = 1;
        if (DAT_0050c940 != 0)
        {
            DAT_0050c940 = 0;
            DAT_0050c934 = (uint)(DAT_0050c934 == 0);
            if (((*(int *)(param_1 + 0x38) == 1) && (*(int *)(param_1 + 0x34) != 3)) && (DAT_0050c934 != 0))
            {
                DAT_0050c468 = 1;
            }
        }
        FUN_0044bb10(&DAT_00e2b3e0, &DAT_00e2af60);
        FUN_0044bb10(&DAT_00e2ae80, &DAT_00e298c0);
        if ((DAT_004bfedc != -1) && (DAT_0050c468 == 0))
        {
            DAT_0050c934 = 0;
            return;
        }
    }
    else
    {
        _DAT_0050c8e0 = _DAT_0050c8e0 + _DAT_00e22a50;
        if (DAT_0050c8c0 < _DAT_0050c8e0)
        {
            _DAT_0050c8e0 = DAT_0050c8c0;
        }
        fVar1 = _DAT_0050c8e0 / DAT_0050c8c0;
        _DAT_00e2af90 = (_DAT_00e2b470 - _DAT_00e2b410) * fVar1 + _DAT_00e2b410;
        _DAT_00e2af94 = (_DAT_00e2b474 - _DAT_00e2b414) * fVar1 + _DAT_00e2b414;
        _DAT_00e2af98 = (_DAT_00e2b478 - _DAT_00e2b418) * fVar1 + _DAT_00e2b418;
        if (DAT_0050c930 != 3)
        {
            _DAT_00e298f0 = (_DAT_00e29b90 - _DAT_00e2aeb0) * fVar1 + _DAT_00e2aeb0;
            _DAT_00e298f4 = (_DAT_00e29b94 - _DAT_00e2aeb4) * fVar1 + _DAT_00e2aeb4;
            _DAT_00e298f8 = (_DAT_00e29b98 - _DAT_00e2aeb8) * fVar1 + _DAT_00e2aeb8;
            return;
        }
    }
    return;
}

void FUN_0045c3c0(int param_1)

{
    int iVar1;
    int iVar2;
    float10 fVar3;
    undefined_8 local_c[12];

    iVar1 = vec3f_equal(&DAT_0050c998, &DAT_00e2b470);
    if (iVar1 == 0)
    {
        vec3f_copy(&DAT_0050c998, &DAT_00e2b470);
        vec3f_sub(local_c, &DAT_00e2af90, &DAT_00e298f0);
        fVar3 = (float10)rdVector_Len3(local_c);
        if ((float10)500.0 < fVar3)
        {
            rdVector_Normalize3(local_c);
            vec3f_multiply_add(&DAT_00e2af90, &DAT_00e298f0, 500.0f, local_c);
        }
    }
    iVar1 = FUN_0045c560(param_1, &DAT_0050c994, &DAT_00e2b470, &DAT_00e2af90, &DAT_00e2b410, 1.5f);
    iVar2 = FUN_0045c560(param_1, &DAT_0050c990, &DAT_00e29b90, &DAT_00e298f0, &DAT_00e2aeb0, 1.0f);
    if ((iVar2 != 0) && (iVar1 != 0))
    {
        DAT_0050c930 = 5;
        DAT_004c400c = 1;
        if (*(int *)(param_1 + 8) == 8)
        {
            DAT_0050c930 = 0;
        }
        if (DAT_0050c940 != 0)
        {
            DAT_0050c934 = (uint)(DAT_0050c934 == 0);
            DAT_0050c940 = 0;
            if (((*(int *)(param_1 + 0x38) == 1) && (*(int *)(param_1 + 0x34) != 3)) && (DAT_0050c934 != 0))
            {
                DAT_0050c468 = 1;
            }
        }
        FUN_0044bb10(&DAT_00e2b3e0, &DAT_00e2af60);
        FUN_0044bb10(&DAT_00e2ae80, &DAT_00e298c0);
        if (((DAT_004bfedc != -1) && (DAT_0050c468 == 0)) && (DAT_0050c934 = 0, DAT_0050c944 == 0))
        {
            FUN_00454d40(param_1, DAT_004bfedc);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0045c560(int param_1, float *param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                          float param_6)

{
    float fVar1;
    int iVar2;
    float fVar3;
    float fVar4;
    float *pfVar5;
    float10 fVar6;
    float10 fVar7;
    float local_44;
    float local_40;
    undefined_8 local_3c[12];
    undefined_8 local_30[12];
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    pfVar5 = param_2;
    fVar1 = _DAT_00e22a50 * 60000.0;
    iVar2 = *(int *)(param_1 + 8);
    local_44 = *param_2;
    local_40 = 1600.0;
    if ((((iVar2 == 0x11) || (iVar2 == 0x12)) || ((iVar2 == 8 && (5.0 <= _DAT_0050c95c))))
        || ((iVar2 == 3 && (DAT_0050c944 == 0))))
    {
        param_2 = (float *)(fVar1 * 0.2);
        local_40 = 320.0;
    }
    else
    {
        param_2 = (float *)fVar1;
        if (iVar2 == 0x10)
        {
            param_2 = (float *)(fVar1 * 0.05);
            local_40 = 80.0;
        }
    }
    vec3f_copy(local_c, param_4);
    _DAT_0050c9a4 = 0;
    fVar3 = (float)param_2 * param_6;
    vec3f_sub(local_30, param_3, param_5);
    fVar6 = (float10)rdVector_Len3(local_30);
    vec3f_sub(local_24, param_5, param_4);
    rdVector_Len3(local_24);
    vec3f_sub(local_3c, param_3, param_4);
    fVar7 = (float10)rdVector_Len3(local_3c);
    fVar1 = (float)fVar7;
    fVar4 = fVar3 * 6.0;
    if ((float)(fVar6 * (float10)0.5) < fVar3 * 6.0)
    {
        fVar4 = (float)(fVar6 * (float10)0.5);
    }
    if ((fVar1 < fVar4) || (fVar3 <= local_44))
    {
        if (((fVar1 < fVar4) || (local_44 < fVar3)) && ((fVar1 < fVar4 && (1.0 < fVar1))))
        {
            if ((DAT_004bfedc != -1) && (*(int *)(param_1 + 8) != 0x12))
            {
                return 1;
            }
            fVar6 = (float10)SQRT3(fVar1 / (local_40 * param_6));
            local_44 = (float)(fVar6 * (float10)(local_40 * param_6));
        }
    }
    else
    {
        local_44 = local_44 - param_6 * _DAT_00e22a50 * -2000.0;
        if (fVar3 < local_44)
        {
            local_44 = fVar3;
        }
    }
    if (1.0 < fVar1)
    {
        rdVector_Normalize3(local_3c);
        vec3f_multiply_add(param_4, param_4, local_44 * _DAT_00e22a50, local_3c);
        vec3f_sub(local_18, param_3, param_4);
        fVar6 = (float10)vec3f_squared_norm(local_3c, local_18);
        if ((float10)0.0 <= fVar6)
        {
            *pfVar5 = local_44;
            return 0;
        }
    }
    vec3f_copy(param_4, param_3);
    *pfVar5 = 0.0;
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045c810(int param_1)

{
    int iVar1;
    float local_20;
    undefined_8 local_1c[4];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    if (DAT_0050c470 != 0)
    {
        DAT_0050c930 = 0;
        vec3f_set(&DAT_0050c9b0, 0, 0, 0);
        return;
    }
    if (*(int *)(param_1 + 8) == 8)
    {
        DAT_0050c930 = 0;
        return;
    }
    vec3f_copy(local_c, &DAT_00e298f0);
    DAT_0050c9a8 = DAT_0050c9a8 - _DAT_00e22a50 * -40.0;
    if (360.0 < DAT_0050c9a8)
    {
        DAT_0050c9a8 = DAT_0050c9a8 - 360.0;
    }
    if ((DAT_004c400c == '\0') && (DAT_0050c9cc == '\x05'))
    {
        iVar1 = vec3f_equal(&DAT_0050c9b0, &DAT_00e29b90);
        if (iVar1 != 0)
        {
            iVar1 = vec3f_equal(&DAT_0050c9c0, &DAT_00e2b470);
            if (iVar1 != 0)
                goto LAB_0045c961;
        }
    }
    DAT_004c400c = '\0';
    FUN_0043e210();
    FUN_0044bb10(&DAT_00e29b60, &DAT_00e298c0);
    FUN_0044bb10(&DAT_00e2b440, &DAT_00e2af60);
    vec3f_copy(&DAT_0050c9b0, &DAT_00e29b90);
    vec3f_copy(&DAT_0050c9c0, &DAT_00e2b470);
    DAT_0050c9cc = '\x05';
    rand();
    iVar1 = __ftol();
    DAT_0050c9a8 = (float)iVar1 * 180.0;
LAB_0045c961:
    sin_cos(DAT_0050c9a8, &local_20, local_1c);
    vec3f_copy(local_18, &DAT_0050c9b0);
    vec3f_multiply_add(local_18, local_18, local_20 * 8.0, &DAT_00e29b60);
    vec3f_copy(&DAT_00e298f0, local_18);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045c9d0(int param_1, int param_2)

{
    int iVar1;
    float10 fVar2;
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    if (param_2 == 0)
    {
        vec3f_copy(&DAT_00e2b470, &DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20);
        vec3f_copy(&DAT_00e29b90, &DAT_004c4010 + *(int *)(param_1 + 0x34) * 0x20);
    }
    else
    {
        if (DAT_004bfedc != -1)
        {
            vec3f_sub(local_18, &DAT_00e2b470, &DAT_00e29b90);
            vec3f_multiply_add(&DAT_00e2b470, &DAT_00e2b470, 10.0f, local_18);
        }
        vec3f_multiply2_add(&DAT_00e29b90, 0x3eaaa64c, &DAT_00e29b90, 0x3f2aacda, &DAT_00e2b470);
        if (*(int *)(param_1 + 0x34) == 1)
        {
            vec3f_copy(&DAT_00e29b90, &DAT_004c4558);
            fVar2 = (float10)FUN_0045cf00();
            iVar1 = rand();
            _DAT_00e29b90 = ((float)iVar1 * 4.656613e-10 * 10.0 - -180.0) * (float)fVar2 + _DAT_00e29b90;
            iVar1 = rand();
            _DAT_00e29b94 = ((float)iVar1 * 4.656613e-10 * 125.0 - 375.0) + _DAT_00e29b94;
            iVar1 = rand();
            _DAT_00e29b98 = (float)iVar1 * 4.656613e-10 * 30.0 - -40.0;
            vec3f_copy(&DAT_00e2b470, &DAT_004c4558);
            vec3f_sub(local_c, &DAT_00e2b470, &DAT_00e29b90);
            vec3f_add(&DAT_00e2b470, &DAT_00e2b470, local_c);
        }
    }
    DAT_0050c930 = 1;
    DAT_0050c940 = 1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045cb80(int param_1, int param_2)

{
    undefined_32 *puVar1;
    undefined_8 *puVar2;
    undefined_32 *puVar3;
    undefined_32 local_48[3];
    undefined_8 local_3c[12];
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    local_30 = 0;
    local_2c = 0;
    local_28 = 1.0f;
    vec3f_copy(local_c, &DAT_004c4010 + *(int *)(param_1 + 0x34) * 0x20);
    vec3f_copy(local_18, &DAT_004c401c + *(int *)(param_1 + 0x34) * 0x20);
    if (*(int *)(param_1 + 0x34) == 0x24)
    {
        puVar2 = &DAT_004c4490;
    }
    else if (*(int *)(param_1 + 8) == 8)
    {
        puVar2 = &DAT_004c43dc;
    }
    else if ((((DAT_0050c934 == 0) || (param_2 != 0)) || (*(int *)(param_1 + 8) != 7))
             || ((DAT_0050c930 != 0 && (DAT_0050c930 != 5))))
    {
        vec3f_sub(local_48, local_18, local_c);
        if (param_2 == 0)
        {
            puVar3 = local_48;
            puVar1 = &local_30;
        }
        else
        {
            puVar3 = &local_30;
            puVar1 = local_48;
        }
        rdVector_Cross3(local_24, puVar1, puVar3);
        rdVector_Normalize3(local_24);
        rdVector_Normalize3(local_48);
        rdVector_Scale3(local_48, 3.0f, local_48);
        vec3f_add(local_3c, local_48, local_24);
        rdVector_Scale3(local_3c, 0x42700000, local_3c);
        vec3f_add(local_3c, local_c, local_3c);
        puVar2 = local_3c;
    }
    else
    {
        puVar2 = local_18;
    }
    vec3f_copy(&DAT_00e298a0, puVar2);
    switch (*(undefined_32 *)(param_1 + 0x38))
    {
    case 0:
    case 3:
        _DAT_00e298a8 = 0xc2700000;
        return;
    case 1:
        _DAT_00e298a8 = 0xc3110000;
        break;
    case 2:
        _DAT_00e298a8 = 0xc31d0000;
        return;
    }
    return;
}

void FUN_0045cd50(void)

{
    char cVar1;
    int iVar2;
    int iVar3;
    char *pcVar4;
    undefined_16 *puVar5;

    pcVar4 = &DAT_00e29861;
    puVar5 = &DAT_004c40a8;
    do
    {
        pcVar4[-1] = -1;
        *puVar5 = 0xffff;
        rand();
        cVar1 = __ftol();
        *pcVar4 = '\x01' - cVar1;
        rand();
        cVar1 = __ftol();
        puVar5 = puVar5 + 0x10;
        pcVar4[1] = 'f' - cVar1;
        pcVar4 = pcVar4 + 3;
    } while ((int)puVar5 < 0x4c42a8);
    iVar3 = 0;
    do
    {
        if (0xf < iVar3)
        {
            return;
        }
        do
        {
            rand();
            iVar2 = __ftol();
        } while ((&DAT_00e29860)[iVar2 * 3] != -1);
        (&DAT_00e29860)[iVar2 * 3] = (char)iVar3;
        iVar3 = iVar3 + 1;
        (&DAT_004c40a8)[iVar2 * 0x10] = 4;
    } while (iVar3 < 7);
    return;
}

void FUN_0045ce10(undefined_32 param_1, int param_2, int param_3, undefined_32 param_4)

{
    int iVar1;

    iVar1 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), param_2);
    if (iVar1 != 0)
    {
        (&DAT_00e29600)[param_2] = iVar1;
        FUN_00454bc0(param_1, -1, param_2, 1);
        FUN_004686b0(iVar1, (&DAT_00e29900)[param_2], (&DAT_00e2afa0)[param_2], param_3);
        *(int *)(iVar1 + 0xc) = param_2;
        *(undefined_32 *)(iVar1 + 0xbc) = param_4;
        if (param_3 == 1)
        {
            *(undefined_32 *)(iVar1 + 0xbc) = 0x42b40000;
        }
    }
    return;
}

void FUN_0045ce90(undefined_32 param_1)

{
    ushort uVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    FUN_00445aa0(param_1);
    iVar4 = 0;
    do
    {
        iVar2 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), iVar4);
        if (iVar2 != 0)
        {
            iVar3 = is_less_than_buffer_index(*(undefined_32 *)(iVar2 + 0x30));
            if (iVar3 != 0)
            {
                iVar3 = is_less_than_buffer_index(*(undefined_32 *)(iVar2 + 0x34));
                if (iVar3 != 0)
                    goto LAB_0045ceed;
            }
            uVar1 = *(ushort *)(iVar2 + 6);
            if ((uVar1 & 0x100) == 0)
            {
                *(ushort *)(iVar2 + 6) = uVar1 & 0xff | (ushort)(byte)((uint)uVar1 >> 8) << 8 | 0x100;
            }
        }
    LAB_0045ceed:
        iVar4 = iVar4 + 1;
        if (0x3b < iVar4)
        {
            return;
        }
    } while (true);
}

float10 __fastcall FUN_0045cf00(undefined_32 param_1)

{
    undefined_32 uVar1;
    int iVar2;

    uVar1 = rand(param_1);
    iVar2 = __ftol(uVar1);
    return (float10)(iVar2 * 2 + -1);
}

void FUN_0045cf30(int param_1, int param_2)

{
    undefined_32 uVar1;

    uVar1 = (&DAT_00e29900)[param_1];
    (&DAT_00e29900)[param_1] = (&DAT_00e29900)[param_2];
    (&DAT_00e29900)[param_2] = uVar1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045cf60(int param_1, int param_2, undefined_8 param_3, undefined_8 param_4)

{
    undefined_32 *puVar1;
    int iVar2;
    int iVar3;
    undefined_32 *puVar4;
    undefined_32 *puVar5;
    undefined_8 local_10[8];
    undefined_8 local_8[8];

    DAT_00e29bcc = &DAT_00e35a60;
    DAT_00e29bd8 = &DAT_004c2700 + param_1 * 0x34;
    puVar1 = (undefined_32 *)(&DAT_004c2bb0 + param_1 * 0x3c);
    iVar2 = 0;
    puVar4 = puVar1;
    puVar5 = &DAT_00e29bdc;
    QMEMCPY(iVar3, puVar4, puVar5, 0xf)
    do
    {
        local_10[iVar2] = (&DAT_00e35aa1)[iVar2];
        local_8[iVar2] = (&DAT_00e35aa8)[iVar2];
        if (DAT_004d5e00 != 0)
        {
            local_10[iVar2] = 0;
            local_8[iVar2] = 0xff;
        }
        iVar2 = iVar2 + 1;
    } while (iVar2 < 7);
    FUN_00449d00(&DAT_00e29bdc, puVar1, local_10, local_8);
    FUN_00449330(&DAT_00e2aee0, puVar1);
    FUN_00449330(&DAT_00e2aec0, &DAT_00e29bdc);
    _DAT_00e2a6b0 = 0;
    puVar4 = &DAT_00e2aec0;
    puVar5 = &DAT_00e2af40;
    QMEMCPY(iVar2, puVar4, puVar5, 7)
    _DAT_00e2a6b4 = 0;
    _DAT_00e2a6b8 = 0;
    _DAT_00e2a6bc = 0;
    if (param_2 != -1)
    {
        local_10[param_2] = param_3;
        local_8[param_2] = param_4;
        FUN_00449d00(&DAT_00e29bdc, puVar1, local_10, local_8);
        FUN_00449330(&DAT_00e2af40, &DAT_00e29bdc);
        iVar2 = 0;
        do
        {
            local_10[iVar2] = DAT_00e29bcc[iVar2 + 0x41];
            local_8[iVar2] = DAT_00e29bcc[iVar2 + 0x48];
            iVar2 = iVar2 + 1;
        } while (iVar2 < 7);
        (&DAT_00e2a6b0)[param_2] = 1;
    }
    return;
}

void FUN_0045d0b0(int param_1, undefined_32 param_2)

{
    if (DAT_0050ca34 == 0)
    {
        DAT_0050ca34 = 1;
        FUN_004258e0();
        *(undefined_32 *)(param_1 + 0xc) = 0.5f;
        *(undefined_32 *)(param_1 + 0x128) = param_2;
        *(uint *)(param_1 + 8) = *(uint *)(param_1 + 8) & 0xfffffff6 | 6;
        FUN_00450db0(MAGIC('T', 'e', 's', 't'));
        FUN_00450db0(MAGIC('T', 'o', 's', 's'));
        FUN_00450db0(MAGIC('S', 'm', 'o', 'k'));
        FUN_00450db0(MAGIC('T', 'r', 'i', 'g'));
        FUN_00450db0(MAGIC('C', 'h', 's', 'r'));
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045d130(undefined_32 param_1)

{
    char *pcVar1;
    char cVar2;
    int iVar3;
    uint uVar4;
    char *pcVar5;
    char *pcVar6;
    undefined_32 uVar7;
    undefined_32 uVar8;
    int iVar9;
    int iVar10;
    char *pcVar11;
    float10 extraout_ST0;
    char *local_108;
    undefined_8 **local_104;
    char local_100[256];

    iVar3 = __ftol();
    uVar4 = 0x49;
    _DAT_0050ca48 = (float)(extraout_ST0 + (float10)_DAT_00e22a40);
    if (DAT_0050ca40 == 2)
    {
        uVar4 = 0x6f;
    }
    if (DAT_0050ca40 == 3)
    {
        uVar4 = 0x3b;
    }
    if (DAT_0050ca40 == 4)
    {
        uVar4 = 0xb1;
    }
    if (DAT_0050ca40 == 5)
    {
        uVar4 = 0x4b;
    }
    iVar9 = DAT_0050ca40;
    if (1 < uVar4)
    {
        iVar10 = 0;
        pcVar5 = (char *)(uVar4 - 1);
        local_104 = &PTR_s_Lead_Tester_004c4db4;
        pcVar11 = pcVar5;
        local_108 = pcVar5;
        do
        {
            if (iVar9 == 1)
            {
                pcVar5 = *(char **)((int)&PTR_DAT_004c4ac8 + iVar10);
                pcVar11 = *(char **)((int)&PTR_s_Project_Leaders_Design_004c4acc + iVar10);
            }
            if (iVar9 == 2)
            {
                pcVar5 = *(char **)((int)&PTR_DAT_004c4bf0 + iVar10);
                pcVar11 = *(char **)((int)&PTR_s_Voice_Department_Manager_004c4bf4 + iVar10);
            }
            if (iVar9 == 3)
            {
                pcVar5 = local_104[-1];
                pcVar11 = *local_104;
            }
            if (iVar9 == 4)
            {
                pcVar5 = *(char **)((int)&PTR_DAT_004c4ea0 + iVar10);
                pcVar11 = *(char **)((int)&PTR_s_Production_Manager_004c4ea4 + iVar10);
            }
            if (iVar9 == 5)
            {
                pcVar5 = *(char **)((int)&PTR_DAT_004c5168 + iVar10);
                pcVar11 = *(char **)((int)&PTR_s_Lucas_Licensing_004c516c + iVar10);
            }
            cVar2 = *pcVar5;
            if (cVar2 == '\0')
            {
                iVar3 = iVar3 + 0x28;
            }
            else if (cVar2 == '\\')
            {
                iVar3 = iVar3 + 0x18;
            }
            else
            {
                iVar3 = iVar3 + 0xc;
            }
            if ((-10 < iVar3) && (iVar3 < 0xfa))
            {
                if (cVar2 == '\0')
                {
                    _sprintf(local_100, s__f4_o_c_s_004c6d70, pcVar11);
                    pcVar6 = local_100;
                    cVar2 = local_100[0];
                    while (cVar2 != '\0')
                    {
                        if (*pcVar6 == '\\')
                        {
                            *pcVar6 = ' ';
                        }
                        pcVar1 = pcVar6 + 1;
                        pcVar6 = pcVar6 + 1;
                        cVar2 = *pcVar1;
                    }
                    uVar7 = 0xbe;
                    uVar8 = 0xbe;
                }
                else
                {
                    _sprintf(local_100, s__k_c_s_004c6d68, pcVar11);
                    pcVar6 = local_100;
                    cVar2 = local_100[0];
                    while (cVar2 != '\0')
                    {
                        if (*pcVar6 == '\\')
                        {
                            *pcVar6 = ' ';
                        }
                        pcVar1 = pcVar6 + 1;
                        pcVar6 = pcVar6 + 1;
                        cVar2 = *pcVar1;
                    }
                    uVar7 = 0xff;
                    uVar8 = 0xff;
                }
                create_text_entry_0(0xa0, iVar3, uVar8, uVar7, -1, -1, local_100);
                iVar9 = DAT_0050ca40;
            }
            iVar10 = iVar10 + 4;
            local_104 = local_104 + 1;
            local_108 = local_108 + -1;
        } while (local_108 != NULL);
    }
    if (iVar3 < 1)
    {
        if ((iVar9 != 5) && (DAT_0050ca44 == 0))
        {
            FUN_0045d0b0(param_1, MAGIC('F', 'i', 'n', 'i'));
            return;
        }
        FUN_0045d0b0(param_1, MAGIC('A', 'b', 'r', 't'));
    }
    return;
}

char FUN_0045d350(void)

{
    if (DAT_00e2899c == 0)
    {
        return '\0';
    }
    if (DAT_00e27820 == 0)
    {
        return '\x01';
    }
    if (DAT_00e2781c == 0)
    {
        return '\x02';
    }
    return (DAT_00e27890 != 0) + '\x03';
}

float10 FUN_0045d390(void)

{
    int iVar1;
    float10 fVar2;

    iVar1 = FUN_00450b30(MAGIC('T', 'e', 's', 't'), 0);
    if (iVar1 == 0)
    {
        return (float10)-1.0;
    }
    if (DAT_00e2899c == 0)
    {
        return (float10)-1.0;
    }
    fVar2 = (float10)FUN_0047f810(*(int *)(DAT_00e2899c + 0x84) + 0xac);
    return fVar2;
}

int FUN_0045d3d0(int param_1)

{
    if (DAT_00e2899c == param_1)
    {
        return 0;
    }
    if (DAT_00e27820 == param_1)
    {
        return 1;
    }
    if (DAT_00e2781c == param_1)
    {
        return 2;
    }
    return (-(uint)(DAT_00e27890 != param_1) & 0xfffffffc) + 3;
}

float10 FUN_0045d410(int param_1)

{
    float10 fVar1;
    float10 fVar2;

    fVar1 = (float10) * (float *)(*(int *)(param_1 + 0x84) + 0xe8);
    fVar2 = fVar1 - (float10) * (float *)(*(int *)(param_1 + 0x84) + 0xe0);
    if (fVar2 < (float10)0.0)
    {
        fVar2 = -fVar2;
    }
    if ((float10)0.5 < fVar2)
    {
        fVar2 = (float10)1.0 - fVar2;
    }
    fVar2 = ((float10) * (int *)(param_1 + 0x78) + fVar1) - fVar2;
    if (fVar2 < (float10)0.0)
    {
        fVar2 = (float10)0.0;
    }
    return fVar2;
}

void FUN_0045dad0(int param_1, int param_2)

{
    int iVar1;

    if (param_2 != 0)
    {
        *(int *)(param_1 + 0x1e0) = param_2;
        *(undefined_32 *)(param_1 + 0x1e4) = 0;
    }
    iVar1 = *(int *)(param_1 + 0x1e0);
    if (iVar1 == 0)
    {
        return;
    }
    if (iVar1 == 5)
    {
        return;
    }
    if (iVar1 == 4)
    {
        *(undefined_32 *)(param_1 + 0x1e0) = 5;
        *(undefined_32 *)(param_1 + 0x1e4) = 1.0f;
    }
    FUN_004831d0(0, 8, 8, 0x138, 0xe8);
    FUN_00483230(2, -1);
    if ((*(byte *)(param_1 + 8) & 0x60) == 0)
    {
        iVar1 = FUN_0045d350();
        sprite_enable_display(0xffffff37, 0);
        switch (*(undefined_32 *)(param_1 + 0x1e0))
        {
        case 1:
            FUN_00483230(1, 5);
            FUN_004831d0(1, 8, 8, 0x138, 0xe8);
            FUN_00483590(1, 100.0f, -1.0f, -1.0f, -1.0f, -1.0f);
            *(undefined_32 *)(param_1 + 0x1e0) = 0;
            return;
        case 2:
            FUN_00483230(1, 5);
            FUN_004831d0(1, 8, 0x30, 0x138, 0xc0);
            FUN_004831d0(0, 8, 0x30, 0x138, 0xc0);
            FUN_00483590(1, 45.0f, -1.0f, DAT_004c4a60, DAT_004c4a5c, -1.0f);
            return;
        case 3:
        case 4:
        case 5:
            goto switchD_0045db73_caseD_3;
        default:
            return;
        }
    }
    FUN_00483230(1, 7);
LAB_0045dd22:
    FUN_004831d0(1, 8, 8, 0x138, 0xe8);
    FUN_00483590(1, 100.0f, -1.0f, -1.0f, -1.0f, -1.0f);
    return;
switchD_0045db73_caseD_3:
    FUN_00483230(1, 7);
    if ((iVar1 != 1) && (iVar1 != 0))
    {
        if (iVar1 != 2)
        {
            return;
        }
        FUN_00483230(2, 8);
        FUN_004831d0(1, 8, 8, 0x138, 0x77);
        FUN_004831d0(2, 8, 0x79, 0x138, 0xe8);
        if (DAT_0050ca14 != 0)
        {
            FUN_00483590(1, 0x42f00000, -1.0f, -1.0f, -1.0f, -1.0f);
            FUN_00483590(2, 0x42f00000, -1.0f, -1.0f, -1.0f, -1.0f);
            return;
        }
        FUN_00483590(1, 100.0f, -1.0f, -1.0f, -1.0f, -1.0f);
        FUN_00483590(2, 100.0f, -1.0f, -1.0f, -1.0f, -1.0f);
        return;
    }
    goto LAB_0045dd22;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045dd80(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int local_40[16];

    FUN_00408800();
    _DAT_004b9578 = 0x44bb8000;
    FUN_00427d70();
    iVar3 = 0;
    do
    {
        FUN_004276a0(iVar3, 0xff0000);
        iVar3 = iVar3 + 1;
    } while (iVar3 < 0x14);
    FUN_00408640(10);
    _DAT_004b91c8 = 1;
    sprite_set_color(0xffffff99, 0, 0, 0, -1);
    iVar3 = 0;
    if (0 < *(int *)(param_1 + 0x1bc))
    {
        iVar2 = 0;
        do
        {
            iVar1 = *(int *)(DAT_00e28960 + 0x84 + iVar2);
            if (iVar1 != 0)
            {
                *(undefined_32 *)(DAT_00e28960 + 0x80 + iVar2) = *(undefined_32 *)(iVar1 + 0x2c4);
            }
            *(undefined_32 *)(DAT_00e28960 + 0x84 + iVar2) = 0;
            iVar3 = iVar3 + 1;
            iVar2 = iVar2 + 0x88;
        } while (iVar3 < *(int *)(param_1 + 0x1bc));
    }
    FUN_00408640(0x14);
    _exit(MAGIC('T', 'e', 's', 't'));
    _exit(MAGIC('T', 'o', 's', 's'));
    _exit(MAGIC('S', 'm', 'o', 'k'));
    _exit(MAGIC('T', 'r', 'i', 'g'));
    _exit(MAGIC('C', 'h', 's', 'r'));
    FUN_00408640(0x1e);
    thunk_FUN_00449e30(1);
    FUN_0045dad0(param_1, 1);
    FUN_00408640(0x28);
    FUN_004269f0(0);
    DAT_0050ccf8 = 0;
    DAT_0050cd00 = 0;
    DAT_0050ccfc = 0;
    DAT_0050cd04 = 0;
    DAT_0050ccf0 = 0;
    FUN_00408640(0x32);
    __setargv();
    FUN_0042c460();
    FUN_0042d470();
    FUN_00408640(0x3c);
    FUN_0042c3e0();
    FUN_0042c400();
    FUN_00408640(0x46);
    FUN_00428370();
    FUN_00449260();
    DAT_00e996dc = DAT_00e996dc & 0xffffbfff;
    FUN_00483fc0(0);
    FUN_00408640(0x50);
    FUN_00428a60(1, 0, 0, 0);
    FUN_00428a60(5, 0, 0, 0);
    if (((DAT_0050c9f8 & 2) != 0) && (param_2 == MAGIC('F', 'i', 'n', 'i')))
    {
        FUN_00466bd0(param_1, DAT_00e28960);
        __setargv_0();
        *(uint *)(param_1 + 8) = *(uint *)(param_1 + 8) & 0xfffffff3 | 3;
        return;
    }
    FUN_00408640(0x5a);
    *(byte *)(param_1 + 7) = *(byte *)(param_1 + 7) | 0x10;
    local_40[0] = MAGIC('R', 'S', 'e', 't');
    FUN_00450c50(MAGIC('c', 'M', 'a', 'n'), local_40);
    FUN_00408640(0x62);
    if (DAT_0050ca2c != 0)
    {
        param_2 = MAGIC('A', 'b', 'r', 't');
    }
    local_40[0] = param_2;
    FUN_00450c50(MAGIC('A', 'l', 'l', '!'), local_40);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045dfe0(int param_1)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    undefined_32 local_40;
    undefined_32 local_3c;

    DAT_004b2940 = 1;
    FUN_00427ea0(*(undefined_32 *)(param_1 + 0x1ac), *(undefined_32 *)(param_1 + 0x1c0), 0);
    FUN_004277f0(1, *(undefined_32 *)(param_1 + 0x1ac));
    _DAT_0050ca10 = 1;
    _DAT_004b9578 = 0x44bb8000;
    local_40 = 0x53776565;
    local_3c = 0;
    FUN_00450c50(MAGIC('c', 'M', 'a', 'n'), &local_40);
    uVar2 = *(uint *)(param_1 + 8);
    *(uint *)(param_1 + 8) = uVar2 & 0xfffffff0;
    *(undefined_32 *)(param_1 + 0xc) = 0x404ccccd;
    if ((uVar2 & 0x20) == 0)
    {
        uVar2 = uVar2 & 0xfffffff0 | 0xf00;
    }
    else
    {
        uVar2 = uVar2 & 0xfffff0f0;
    }
    *(uint *)(param_1 + 8) = uVar2;
    if ((*(byte *)(param_1 + 8) & 0x20) == 0)
    {
        FUN_004457b0();
    }
    else
    {
        *(undefined_32 *)(param_1 + 0xc) = -1.0f;
    }
    FUN_0045dad0(param_1, 4);
    if ((*(byte *)(param_1 + 8) & 0x20) == 0)
    {
        sprite_set_color(0xffffff99, 0, 0, 0, 0);
    }
    iVar3 = FUN_0041d6b0();
    if ((iVar3 != 0) && ((*(byte *)(param_1 + 8) & 0x60) == 0))
    {
        FUN_0041d3b0(1);
    }
    iVar3 = 0;
    if (0 < *(int *)(param_1 + 0x1bc))
    {
        iVar4 = 0;
        do
        {
            iVar1 = *(int *)(DAT_00e28960 + 0x84 + iVar4);
            if (iVar1 != 0)
            {
                *(uint *)(iVar1 + 100) = *(uint *)(iVar1 + 100) & 0xffffefff;
                *(uint *)(iVar1 + 0x60) = *(uint *)(iVar1 + 0x60) & 0xfffffff1 | 1;
            }
            iVar3 = iVar3 + 1;
            iVar4 = iVar4 + 0x88;
        } while (iVar3 < *(int *)(param_1 + 0x1bc));
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

uint FUN_0045e120(uint param_1)

{
    int iVar1;

    if ((DAT_0050ca3c != 0) && (DAT_0050ca44 == 0))
    {
        return 0;
    }
    if (DAT_0050ca18 < 2)
    {
        param_1 = param_1 & DAT_00e98eb0;
    }
    else
    {
        iVar1 = FUN_00445690();
        if (iVar1 != 0)
        {
            return (&DAT_00e98eb0)[DAT_0050ca4c] & param_1;
        }
        if ((param_1 & DAT_00e98eb0) != 0)
        {
            DAT_0050ca4c = 0;
            return 1;
        }
        if ((_DAT_00e98eb4 & param_1) != 0)
        {
            DAT_0050ca4c = 1;
            return 1;
        }
    }
    return param_1;
}

void FUN_0045e1a0(int param_1)

{
    int iVar1;

    iVar1 = FUN_0045e120(0x40);
    if (iVar1 != 0)
    {
        if (DAT_0050ca18 < 2)
        {
            iVar1 = *(int *)(param_1 + 0x124) + 1;
            *(int *)(param_1 + 0x124) = iVar1;
            if (4 < iVar1)
            {
                *(undefined_32 *)(param_1 + 0x124) = 0;
            }
        }
        else
        {
            iVar1 = *(int *)(param_1 + 0x124) + 1;
            *(int *)(param_1 + 0x124) = iVar1;
            if (7 < iVar1)
            {
                *(undefined_32 *)(param_1 + 0x124) = 4;
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045f230(uint param_1)

{
    int iVar1;
    short sVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    ushort uVar7;
    uint *puVar8;
    undefined_32 uVar9;
    uint uVar10;
    uint uVar11;
    int iVar12;
    int iVar13;
    uint uVar14;
    float10 fVar15;
    undefined_32 uVar16;
    undefined_32 uVar17;
    undefined_32 uVar18;
    undefined_8 *puVar19;
    int local_640;
    int local_638;
    float local_634;
    float local_630;
    float local_62c;
    undefined_32 local_628;
    undefined_8 local_624[16];
    float local_614;
    float local_610;
    float local_608;
    float local_604;
    undefined_32 local_600;
    int local_5fc;
    float local_5f4;
    undefined_8 local_5f0[1520];

    iVar13 = 0;
    local_5fc = 0;
    if (DAT_0050ca18 != 0)
    {
        if (DAT_0050ca18 < 2)
        {
            if (4 < *(int *)(param_1 + 0x124))
            {
                *(undefined_32 *)(param_1 + 0x124) = 2;
            }
        }
        else if (*(int *)(param_1 + 0x124) < 4)
        {
            *(undefined_32 *)(param_1 + 0x124) = 5;
        }
        iVar12 = *(int *)(param_1 + 0x124);
        if (iVar12 == 0)
        {
            iVar12 = *(int *)(param_1 + 0x1bc);
            local_634 = 0.0;
            if (1 < iVar12)
            {
                if (0 < iVar12)
                {
                    puVar8 = (uint *)(DAT_00e28960 + 8);
                    do
                    {
                        if ((((*puVar8 & 1) != 0) && ((*puVar8 & 2) == 0)) && (puVar8[-1] == MAGIC('L', 'o', 'c', 'l')))
                        {
                            local_634 = *(float *)(puVar8[0x1f] + 0xe0);
                        }
                        puVar8 = puVar8 + 0x22;
                        iVar12 = iVar12 + -1;
                    } while (iVar12 != 0);
                }
                fVar15 = (float10)FUN_0047e870();
                if (((float10)0.0 < fVar15) && (0 < *(int *)(param_1 + 0x1bc)))
                {
                    iVar12 = 0x2b;
                    do
                    {
                        iVar1 = DAT_00e28960 + iVar13;
                        if (((0.0 < (float)fVar15) && ((*(uint *)(iVar1 + 8) & 1) != 0))
                            && ((*(uint *)(iVar1 + 8) & 2) == 0))
                        {
                            fVar3 = local_634 - *(float *)(*(int *)(iVar1 + 0x84) + 0xe0);
                            if (0.5 < fVar3)
                            {
                                fVar3 = fVar3 - 1.0;
                            }
                            if (fVar3 < -0.5)
                            {
                                fVar3 = fVar3 - -1.0;
                            }
                            fVar3 = fVar3 * (float)fVar15 * 0.02222222 - -119.0;
                            if (((**(int **)(iVar1 + 0x18) != -1) && (fVar3 <= 164.0)) && (74.0 <= fVar3))
                            {
                                if (iVar1 == DAT_00e2899c)
                                {
                                    sprite_enable_display(iVar12, 1);
                                    uVar9 = __ftol();
                                    sprite_set_pos(iVar12, 0x112, uVar9);
                                    sprite_scale(iVar12, 0x3f400000, 0x3f400000);
                                    uVar9 = 0xffffffdc;
                                }
                                else
                                {
                                    sprite_enable_display(iVar12, 1);
                                    uVar9 = __ftol();
                                    sprite_set_pos(iVar12, 0x114, uVar9);
                                    sprite_scale(iVar12, 0.5f, 0.5f);
                                    uVar9 = 0xffffff80;
                                }
                                sprite_set_color(iVar12, -1, -1, -1, uVar9);
                                sVar2 = *(short *)(iVar1 + 0x5c);
                                if (0 < sVar2)
                                {
                                    if (iVar1 == DAT_00e2899c)
                                    {
                                        _sprintf(local_624, s__f4_s_d_004c6dd4, (int)sVar2);
                                        uVar9 = 0;
                                    }
                                    else
                                    {
                                        _sprintf(local_624, s__f4_s_d_004c6dd4, (int)sVar2);
                                        uVar9 = -1;
                                    }
                                    uVar9 = __ftol(-1, -1, uVar9, -1, local_624);
                                    create_text_entry_0(0x11c, uVar9);
                                }
                            }
                        }
                        iVar13 = iVar13 + 0x88;
                        iVar1 = iVar12 + -0x2a;
                        iVar12 = iVar12 + 1;
                    } while (iVar1 < *(int *)(param_1 + 0x1bc));
                }
            }
        }
        else if (iVar12 == 1)
        {
            if (0 < *(int *)(param_1 + 0x1bc))
            {
                local_638 = 0;
                uVar14 = param_1;
                iVar13 = 0x2b;
                do
                {
                    iVar12 = DAT_00e28960 + local_638;
                    uVar11 = *(uint *)(DAT_00e28960 + 8 + local_638);
                    if ((((uVar11 & 1) != 0) && ((uVar11 & 2) == 0)) && (**(int **)(iVar12 + 0x18) != -1))
                    {
                        sprite_set_color(iVar13, -1, -1, -1, -1);
                        sprite_enable_display(iVar13, 1);
                        uVar7 = __ftol();
                        uVar14 = uVar14 & 0xffff0000 | (uint)uVar7;
                        uVar7 = __ftol();
                        uVar11 = (uint)uVar7;
                        sprite_set_pos(iVar13, uVar11, uVar14);
                        sprite_scale(iVar13, 1.0f, 1.0f);
                        if ((1 < *(int *)(param_1 + 0x1bc)) && (sVar2 = *(short *)(iVar12 + 0x5c), 0 < sVar2))
                        {
                            if (iVar12 == DAT_00e2899c)
                            {
                                _sprintf(local_624, s__f3_o_d_004c6dcc, (int)sVar2);
                                puVar19 = local_624;
                                uVar18 = -1;
                                uVar17 = 0;
                                uVar16 = -1;
                                uVar9 = -1;
                                uVar10 = __ftol(-1, -1, 0, -1, puVar19);
                                uVar11 = __ftol(uVar10);
                            }
                            else
                            {
                                _sprintf(local_624, s__f4_o_d_004c6dc4, (int)sVar2);
                                puVar19 = local_624;
                                uVar18 = -1;
                                uVar17 = -1;
                                uVar16 = -1;
                                uVar9 = -1;
                                uVar10 = uVar14;
                            }
                            create_text_entry_0(uVar11, uVar10, uVar9, uVar16, uVar17, uVar18, puVar19);
                        }
                    }
                    local_638 = local_638 + 0x88;
                    iVar12 = iVar13 + -0x2a;
                    iVar13 = iVar13 + 1;
                } while (iVar12 < *(int *)(param_1 + 0x1bc));
            }
        }
        else if ((iVar12 == 2) || (iVar12 == 3))
        {
            local_600 = DAT_00dfb254;
            local_608 = DAT_00dfb24c;
            local_604 = DAT_00dfb250;
            local_5fc = 1;
            local_630 = DAT_00dfb22c;
            local_62c = DAT_00dfb230;
            local_628 = 0;
            rdVector_Normalize3(&local_630);
            local_610 = -local_630;
            local_614 = local_62c;
            if (*(int *)(param_1 + 0x124) == 2)
            {
                fVar3 = 1500.0;
                local_634 = 1500.0;
                if ((*(int *)(param_1 + 0x1ac) == 1) && (*(int *)(param_1 + 0x1c0) == 3))
                {
                    local_640 = 3.0f;
                }
                else
                {
                    local_640 = 5.0f;
                }
            }
            else
            {
                fVar3 = 500.0;
                local_640 = 0x41000000;
                local_634 = 500.0;
            }
            if ((DAT_00e996dc & 0x4000) != 0)
            {
                fVar3 = -fVar3;
            }
            iVar13 = FUN_00480170(*(undefined_32 *)(param_1 + 0x2c), &local_608, local_634, 0xaa, local_5f0, local_640);
            if (0 < iVar13)
            {
                if (0xaa < iVar13)
                {
                    iVar13 = 0xaa;
                }
                if (0 < iVar13)
                {
                    do
                    {
                        uVar9 = __ftol();
                        uVar9 = __ftol(uVar9);
                        FUN_0044fef0(0, uVar9);
                        iVar13 = iVar13 + -1;
                    } while (iVar13 != 0);
                }
            }
            local_640 = 0;
            do
            {
                fVar4 = ((float)local_640 - 1.5) * local_634 * 0.05;
                local_5f4 = (fVar4 * *(float *)(param_1 + 0xa8) + *(float *)(param_1 + 0xd8)) - local_604;
                fVar6 =
                    (((fVar4 * *(float *)(param_1 + 0xa4) + *(float *)(param_1 + 0xd4)) - local_608) * 25.0) / fVar3;
                fVar4 = (local_5f4 * 25.0) / local_634;
                fVar5 = fVar4 * local_610 + fVar6 * local_614;
                fVar4 = fVar6 * local_630 + fVar4 * local_62c;
                if ((((fVar5 < 25.0) && (-fVar5 < 25.0)) && (fVar4 < 25.0)) && (-fVar4 < 25.0))
                {
                    uVar9 = __ftol();
                    uVar9 = __ftol(uVar9);
                    FUN_0044fef0(1, uVar9);
                }
                local_640 = local_640 + 1;
            } while (local_640 < 4);
            iVar13 = 0;
            if (0 < *(int *)(param_1 + 0x1bc))
            {
                iVar12 = 0;
                do
                {
                    iVar1 = DAT_00e28960 + iVar12;
                    if (((iVar1 != DAT_00e2899c) && ((*(uint *)(iVar1 + 8) & 1) != 0))
                        && ((*(uint *)(iVar1 + 8) & 2) == 0))
                    {
                        fVar6 = ((*(float *)(*(int *)(iVar1 + 0x84) + 0x50) - local_608) * 25.0) / fVar3;
                        fVar4 = ((*(float *)(*(int *)(iVar1 + 0x84) + 0x54) - local_604) * 25.0) / local_634;
                        fVar5 = fVar4 * local_610 + fVar6 * local_614;
                        fVar4 = fVar6 * local_630 + fVar4 * local_62c;
                        if (((fVar5 < 25.0) && (-fVar5 < 25.0)) && ((fVar4 < 25.0 && (-fVar4 < 25.0))))
                        {
                            if (*(int *)(param_1 + 0x124) == 2)
                            {
                                uVar9 = __ftol();
                                uVar9 = __ftol(uVar9);
                                uVar16 = 2;
                            }
                            else
                            {
                                uVar9 = __ftol();
                                uVar9 = __ftol(uVar9);
                                uVar16 = 3;
                            }
                            FUN_0044fef0(uVar16, uVar9);
                        }
                    }
                    iVar13 = iVar13 + 1;
                    iVar12 = iVar12 + 0x88;
                } while (iVar13 < *(int *)(param_1 + 0x1bc));
            }
            if ((DAT_00e2899c != 0) && ((*(byte *)(DAT_00e2899c + 8) & 1) != 0))
            {
                fVar3 = ((*(float *)(*(int *)(DAT_00e2899c + 0x84) + 0x50) - local_608) * 25.0) / fVar3;
                local_634 = ((*(float *)(*(int *)(DAT_00e2899c + 0x84) + 0x54) - local_604) * 25.0) / local_634;
                fVar4 = local_634 * local_610 + fVar3 * local_614;
                fVar3 = fVar3 * local_630 + local_634 * local_62c;
                if ((fVar4 < 25.0) && (((-fVar4 < 25.0 && (fVar3 < 25.0)) && (-fVar3 < 25.0))))
                {
                    uVar9 = __ftol();
                    uVar9 = __ftol(uVar9);
                    FUN_0044fef0(4, uVar9);
                }
            }
        }
        else if ((((iVar12 != 4) && (iVar12 != 6)) && ((iVar12 == 5 || (iVar12 == 7))))
                 && (0 < *(int *)(param_1 + 0x1bc)))
        {
            iVar12 = 0;
            iVar13 = 0x2b;
            do
            {
                uVar14 = *(uint *)(DAT_00e28960 + 8 + iVar12);
                iVar1 = DAT_00e28960 + iVar12;
                if (((uVar14 & 1) != 0) && ((uVar14 & 2) == 0))
                {
                    FUN_0045d410(iVar1);
                    if ((**(int **)(iVar1 + 0x18) != -1)
                        && ((*(uint *)(*(int *)(iVar1 + 0x84) + 100) & 0x4040000) == 0))
                    {
                        sprite_enable_display(iVar13, 1);
                        uVar9 = __ftol();
                        uVar9 = __ftol(uVar9);
                        sprite_set_pos(iVar13, uVar9);
                        sprite_scale(iVar13, 1.0f, 1.0f);
                    }
                    sVar2 = *(short *)(iVar1 + 0x5c);
                    if (0 < sVar2)
                    {
                        if (iVar1 == DAT_00e2899c)
                        {
                            _sprintf(local_624, s__f3_o_d_004c6dcc, (int)sVar2);
                            uVar9 = __ftol(-1, -1, 0, -1, local_624);
                        }
                        else if (iVar1 == DAT_00e27820)
                        {
                            _sprintf(local_624, s__f3_o_d_004c6dcc, (int)sVar2);
                            uVar9 = __ftol(0, -1, -1, -1, local_624);
                        }
                        else
                        {
                            _sprintf(local_624, s__f3_o_d_004c6dcc, (int)sVar2);
                            uVar9 = __ftol(0xffffffbe, 0xffffffbe, 0xffffffbe, -1, local_624);
                        }
                        uVar9 = __ftol(uVar9);
                        create_text_entry_0(uVar9);
                    }
                }
                iVar12 = iVar12 + 0x88;
                iVar1 = iVar13 + -0x2a;
                iVar13 = iVar13 + 1;
            } while (iVar1 < *(int *)(param_1 + 0x1bc));
        }
        fVar3 = (float)_DAT_00e22a40;
        if (local_5fc == 0)
        {
            DAT_004c5298 = DAT_004c5298 - (fVar3 + fVar3);
            if (DAT_004c5298 < 0.0)
            {
                DAT_004c5298 = 0.0;
            }
        }
        else
        {
            DAT_004c5298 = DAT_004c5298 - fVar3 * -2.0;
            if (1.0 < DAT_004c5298)
            {
                DAT_004c5298 = 1.0;
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0045fe70(int param_1, int param_2, int param_3, int param_4, int param_5)

{
    float fVar1;
    undefined_32 uVar2;
    int iVar3;
    char cVar4;
    undefined_32 local_11c;
    byte local_114;
    byte bStack_113;
    byte bStack_112;
    undefined_8 uStack_111;
    undefined_8 uStack_110;
    undefined_8 uStack_10f;
    undefined_8 local_10c;
    undefined_8 uStack_10b;
    undefined_8 uStack_10a;
    undefined_8 uStack_109;
    undefined_8 uStack_108;
    undefined_8 uStack_107;
    undefined_8 uStack_106;
    undefined_32 local_104;
    undefined_8 local_100[256];

    cVar4 = (-(param_5 != 0) & 4U) + 0x11;
    iVar3 = param_3;
    if (1 < DAT_0050ca18)
    {
        iVar3 = param_3 + 0x1f;
    }
    sprite_enable_display(cVar4, 1);
    sprite_set_pos(cVar4, iVar3, param_4);
    sprite_set_color(cVar4, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
    iVar3 = FUN_00445690();
    if (iVar3 == 0)
    {
        if ((*(uint *)(param_2 + 0x60) & 0x200000) == 0)
        {
            fVar1 = *(float *)(param_1 + 0x1d8 + param_5 * 4) - (float)_DAT_00e22a40 * 4.0;
            *(float *)(param_1 + 0x1d8 + param_5 * 4) = fVar1;
            if (fVar1 < 0.0)
            {
                *(undefined_32 *)(param_1 + 0x1d8 + param_5 * 4) = 0;
            }
        }
        else
        {
            fVar1 = *(float *)(param_1 + 0x1d8 + param_5 * 4) - (float)_DAT_00e22a40 * -4.0;
            *(float *)(param_1 + 0x1d8 + param_5 * 4) = fVar1;
            if (1.0 < fVar1)
            {
                *(undefined_32 *)(param_1 + 0x1d8 + param_5 * 4) = 1.0f;
            }
        }
    }
    if (DAT_0050c5f0 == 0)
    {
        rand();
    }
    sprite_enable_display(0xe, 0);
    if ((*(uint *)(param_2 + 0x60) & 0x800000) == 0)
    {
        if (param_5 == 0)
        {
            uVar2 = 0x10;
        }
        else
        {
            uVar2 = 0x14;
        }
        sprite_enable_display(uVar2, 0);
        local_11c = __ftol();
        FUN_0046bc50(param_2, &local_114, &local_10c, &local_104);
    }
    else
    {
        local_11c = __ftol();
        local_114 = 0xff;
        bStack_113 = 0;
        bStack_112 = 0;
        local_10c = 0;
        uStack_10b = 0xff;
        uStack_10a = 0;
        uStack_109 = 0xe6;
        local_104 = 1.0f;
    }
    if ((1 < DAT_0050ca18) && (local_11c = __ftol(), 0xff < (short)local_11c))
    {
        local_11c = 0xff;
    }
    if (0.0 < _DAT_004c4a58)
    {
        uVar2 = lookup_translation(s__MONDOTEXT_H_0522_Net_play__Pres_004b5ac4);
        _sprintf(local_100, s__f4_s_c_s_004c6dfc, uVar2);
        uVar2 = __ftol(local_100);
        rand(-1, -1, uVar2);
        uVar2 = __ftol();
        create_text_entry_0(0xa0, 0xdc, uVar2);
        _DAT_004c4a58 = _DAT_004c4a58 - (float)_DAT_00e22a40 * 0.3333;
    }
    cVar4 = (-(param_5 != 0) & 4U) + 0x12;
    sprite_enable_display(cVar4, 1);
    sprite_set_pos(cVar4, param_3 + 0x18, param_4 + -7);
    sprite_set_color(cVar4, CONCAT13(uStack_111, CONCAT12(bStack_112, CONCAT11(bStack_113, local_114))),
                     CONCAT13(uStack_110, CONCAT12(uStack_111, CONCAT11(bStack_112, bStack_113))),
                     CONCAT13(uStack_10f, CONCAT12(uStack_110, CONCAT11(uStack_111, bStack_112))), local_11c);
    if (((((DAT_0050ca18 < 2) && (*(int *)(param_1 + 0x1ac) == 0)) && (*(int *)(param_1 + 0x1c0) == 0))
         && ((0x78 < local_114 && (0x78 < bStack_113))))
        && ((bStack_112 < 0x78
             && ((iVar3 = FUN_00445690(), iVar3 == 0 && (DAT_0050ca58 = DAT_0050ca58 + 1, (DAT_0050ca58 & 1) != 0))))))
    {
        uVar2 = lookup_translation(s__SCREENTEXT_380___Boost_004c6de4);
        _sprintf(local_100, s__f4_c_s_004c6ddc, uVar2);
        rand(local_11c, local_100);
        uVar2 = __ftol();
        create_text_entry_0(0xf4, 0xa2, -1, -1, uVar2);
    }
    cVar4 = (-(param_5 != 0) & 4U) + 0xf;
    sprite_enable_display(cVar4, 1);
    sprite_set_pos(cVar4, param_3 + 0x22, param_4 + 6);
    sprite_set_color(cVar4, CONCAT13(uStack_109, CONCAT12(uStack_10a, CONCAT11(uStack_10b, local_10c))),
                     CONCAT13(uStack_108, CONCAT12(uStack_109, CONCAT11(uStack_10a, uStack_10b))),
                     CONCAT13(uStack_107, CONCAT12(uStack_108, CONCAT11(uStack_109, uStack_10a))),
                     CONCAT13(uStack_106, CONCAT12(uStack_107, CONCAT11(uStack_108, uStack_109))));
    DAT_0050ca04 = local_104;
    cVar4 = (-(param_5 != 0) & 4U) + 0x10;
    if ((*(uint *)(param_2 + 0x60) & 0x800000) == 0)
    {
        sprite_enable_display(cVar4, 0);
        return;
    }
    fVar1 = *(float *)(param_2 + 0x218);
    sprite_enable_display(cVar4, 1);
    sprite_set_pos(cVar4, param_3 + 0x22, param_4 + 6);
    sprite_set_color(cVar4, -1, -1, -1, -1);
    DAT_0050ca08 = 1.0 - fVar1 * 0.01;
    return;
}

void FUN_00460320(void)

{
    undefined_32 uVar1;
    float10 fVar2;

    fVar2 = (float10)FUN_004456a0();
    if (fVar2 <= (float10)0.0)
    {
        sprite_enable_display(0x1a, 0);
        return;
    }
    sprite_enable_display(0x1a, 1);
    uVar1 = __ftol(90.0 - (1.0 - (float)fVar2) * 80.0);
    sprite_set_pos(0x1a, 0xa0, uVar1);
    sprite_scale(0x1a, 0x42020000, 0x407a0000);
    uVar1 = __ftol();
    sprite_set_color(0x1a, 0, 0x37, 0x47, uVar1);
    uVar1 = __ftol();
    uVar1 = __ftol(0xdc, uVar1);
    FUN_00484020(0x5f, uVar1);
    return;
}

void __thiscall FUN_004603f0(undefined_32 param_1_00, uint param_1)

{
    int iVar1;
    undefined_32 uVar2;
    float10 fVar3;

    iVar1 = FUN_0045d350(param_1_00);
    if (iVar1 < 2)
    {
        if ((param_1 & 1) == 0)
        {
            sprite_enable_display(5, 1);
            sprite_set_pos(5, 0, 0x15);
            sprite_scale(5, 0x43a00000, 2.0f);
            sprite_set_color(5, 0x59, 0xffffff8c, 0x36, 0x40);
            sprite_enable_display(6, 0);
            sprite_enable_display(0xd, 1);
            sprite_set_pos(0xd, 0, 0x17);
            sprite_scale(0xd, 80.0f, 1.0f);
            sprite_set_color(0xd, 0, 0x6e, 0xffffff8f, 0xfffffffe);
            sprite_enable_display(0, 1);
            sprite_set_pos(0, 0x12, 0x22);
            sprite_set_color(0, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
            sprite_enable_display(0xb, 1);
            sprite_set_pos(0xb, 0x42, 0x23);
            sprite_scale(0xb, 0x41ac0000, 1.0f);
            sprite_set_color(0xb, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
            sprite_enable_display(4, 1);
            sprite_set_pos(4, 0x6d, 0x23);
            sprite_set_color(4, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
            sprite_enable_display(0xc, 1);
            sprite_set_pos(0xc, 0xd3, 0x23);
            sprite_scale(0xc, 0x41ac0000, 1.0f);
            sprite_set_color(0xc, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
            sprite_enable_display(1, 1);
            sprite_set_pos(1, 0xfe, 0x22);
            sprite_set_color(1, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
        }
        else
        {
            sprite_enable_display(6, 1);
            sprite_set_pos(6, 0x17, 0xdc);
            sprite_scale(6, 0x43870000, 2.0f);
            sprite_set_color(6, 0x59, 0xffffff8c, 0x36, 0x40);
            sprite_enable_display(5, 1);
            sprite_set_pos(5, 0x17, 0x14);
            sprite_scale(5, 0x43870000, 2.0f);
            sprite_set_color(5, 0x59, 0xffffff8c, 0x36, 0x40);
            sprite_enable_display(0xd, 0);
            sprite_enable_display(0, 0);
            sprite_enable_display(0xb, 0);
            sprite_enable_display(4, 0);
            sprite_enable_display(0xc, 0);
            sprite_enable_display(1, 0);
        }
        sprite_enable_display(3, 1);
        sprite_set_pos(3, 0xe5, 0xb4);
        sprite_set_color(3, 0, 0x6e, 0xffffff8f, 0xfffffffe);
        sprite_enable_display(2, 1);
        sprite_set_pos(2, 0xf3, 0xb4);
        sprite_scale(2, 6.0f, 1.0f);
        sprite_set_color(2, 0, 0x6e, 0xffffff8f, 0xfffffffe);
        sprite_enable_display(10, 1);
        sprite_set_pos(10, 0x10b, 0xb4);
        sprite_set_color(10, 0, 0x6e, 0xffffff8f, 0xfffffffe);
        if ((param_1 & 4) == 0)
        {
            if ((param_1 & 2) == 0)
            {
                fVar3 = (float10)0.0;
            }
            else
            {
                fVar3 = (float10)FUN_004456a0();
                fVar3 = ((float10)1.0 - fVar3) + ((float10)1.0 - fVar3);
                if ((float10)1.0 < fVar3)
                {
                    fVar3 = (float10)1.0;
                }
                fVar3 = ((float10)1.0 - (float10)DAT_004c5298) * fVar3;
            }
            sprite_enable_display(7, 1);
            uVar2 = __ftol();
            sprite_set_pos(7, 0x113, uVar2);
            sprite_scale(7, 1.0f, (float)(fVar3 * (float10)90.0) * 0.5);
            sprite_set_color(7, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
            sprite_enable_display(9, 1);
            uVar2 = __ftol();
            sprite_set_pos(9, 0x113, uVar2);
            sprite_set_color(9, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
            sprite_enable_display(8, 0);
        }
        else
        {
            sprite_enable_display(7, 1);
            sprite_set_pos(7, 0x16, 0x15);
            sprite_scale(7, 1.0f, 0x42c70000);
            sprite_set_color(7, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
            sprite_enable_display(8, 1);
            sprite_set_pos(8, 0x11b, 0x15);
            sprite_scale(8, 1.0f, 0x42c70000);
            sprite_set_color(8, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
            sprite_enable_display(9, 1);
            sprite_set_pos(9, 0x113, 0xa0);
            sprite_set_color(9, 0x59, 0xffffff8c, 0x36, 0xfffffffe);
        }
        sprite_enable_display(0x19, 0.0 < DAT_004c5298);
        sprite_set_pos(0x19, 0xe8, 0x3c);
        sprite_scale(0x19, 0x417a0000, 0x407a0000);
        uVar2 = __ftol();
        sprite_set_color(0x19, 0, 0x37, 0x47, uVar2);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00460950(uint param_1, uint param_2)

{
    float fVar1;
    int iVar2;
    float fVar3;
    bool bVar4;
    bool bVar5;
    ushort uVar6;
    uint uVar7;
    uint uVar8;
    int iVar9;
    undefined_32 uVar10;
    undefined_32 uVar11;
    undefined_32 uVar12;
    uint uVar13;
    uint uVar14;
    int iVar15;
    uint uVar16;
    uint uVar17;
    uint uVar18;
    undefined_64 uVar19;
    undefined_32 local_110;
    undefined_8 local_100[256];

    local_110 = 0xa4;
    uVar7 = FUN_0045d350();
    iVar2 = *(int *)(param_1 + 0x84);
    uVar8 = (uint)(param_1 == DAT_00e27820);
    iVar9 = FUN_00445690();
    if ((iVar9 == 0)
        && (fVar1 = *(float *)(iVar2 + 0x2b8) - (float)_DAT_00e22a40, *(float *)(iVar2 + 0x2b8) = fVar1, fVar1 < 0.0))
    {
        *(undefined_32 *)(iVar2 + 0x2b8) = 0;
    }
    FUN_004603f0();
    fVar1 = *(float *)(*(int *)(param_1 + 0x84) + 0x1a0);
    if (fVar1 <= 0.0)
    {
        fVar1 = 0.0;
    }
    uVar10 = lookup_translation(s__f2_c_s__0f_004c6ee0, (double)fVar1);
    _sprintf(local_100, uVar10);
    uVar10 = __ftol(0, 0xffffffc3, 0xfffffffe, 0xfffffffe, local_100);
    uVar10 = __ftol(uVar10);
    create_text_entry_0(uVar10);
    iVar9 = *(int *)(param_1 + 0x78);
    uVar17 = 0;
    bVar4 = false;
    bVar5 = false;
    uVar13 = uVar7;
    uVar18 = uVar8;
    if (0 < iVar9)
    {
        fVar1 = *(float *)(param_1 + 0x5c + iVar9 * 4);
        fVar3 = 1.0 - *(float *)(param_1 + 0x60 + iVar9 * 4) * 0.25;
        if ((fVar3 <= 0.0) || (1.0 <= fVar3))
        {
            iVar9 = FUN_00427670((int)*(char *)(param_1 + 0x10), 0x100000);
            if ((iVar9 != 0) && (iVar9 = FUN_00427360(6, 0), iVar9 == 0))
            {
                FUN_004276a0((int)*(char *)(param_1 + 0x10), 0x100000);
            }
        }
        else
        {
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            uVar10 = __ftol();
            uVar11 = __ftol();
            iVar9 = __ftol();
            uVar17 = iVar9 * 8;
            if (0xff < (int)uVar17)
            {
                uVar17 = 0xff;
            }
            uVar6 = __ftol();
            uVar18 = (uint)uVar6;
            uVar12 = lookup_translation();
            uVar12 = __ftol(fVar1, uVar10, uVar11, 0x40, uVar17, uVar12);
            create_text_entry_6(uVar18, uVar12);
            uVar12 = lookup_translation();
            uVar10 = __ftol(uVar10, uVar11, 0x40, uVar17, uVar12);
            create_text_entry_0(uVar18, uVar10);
            if ((fVar1 <= *(float *)(param_2 + 0x1d0)) && (uVar13 = __ftol(), (uVar13 & 1) != 0))
            {
                uVar10 = lookup_translation();
                uVar10 = __ftol(0xffffffc8, -1, 0, uVar17, uVar10);
                create_text_entry_0(uVar18, uVar10);
                iVar9 = FUN_00427670((int)*(char *)(param_1 + 0x10), 0x100000);
                uVar17 = param_1;
                if (iVar9 == 0)
                {
                    FUN_00427410(6, 0, 0x27, 0);
                    FUN_00427690((int)*(char *)(param_1 + 0x10), 0x100000);
                }
            }
            bVar4 = true;
            uVar13 = param_2;
            if (*(int *)(param_1 + 0x78) + 1 == *(int *)(param_2 + 0x1c8))
            {
                if (DAT_0050ca18 < 2)
                {
                    if (0.0 < (fVar3 - 0.5) + (fVar3 - 0.5))
                    {
                        iVar9 = __ftol();
                        uVar18 = iVar9 * 4;
                        if (0xff < (int)uVar18)
                        {
                            uVar18 = 0xff;
                        }
                        if (DAT_0050c5f0 == 0)
                        {
                            rand();
                        }
                        uVar10 = __ftol();
                        if (DAT_0050c5f0 == 0)
                        {
                            rand();
                        }
                        uVar13 = __ftol();
                        if (DAT_0050c5f0 == 0)
                        {
                            rand();
                        }
                        uVar17 = __ftol();
                        uVar11 = lookup_translation();
                        create_text_entry_0(0xa0, 0x46, uVar10, uVar13, uVar17, uVar18, uVar11);
                    }
                }
                else
                {
                    uVar14 = __ftol();
                    uVar16 = (int)uVar14 >> 0x1f;
                    if (((uVar14 ^ uVar16) - uVar16 & 1 ^ uVar16) != uVar16)
                    {
                        bVar5 = true;
                    }
                }
            }
        }
    }
    if ((!bVar4) && ((int)uVar7 < 2))
    {
        _DAT_0050ca5c = 0;
        uVar6 = __ftol();
        uVar7 = uVar17 & 0xffff0000 | (uint)uVar6;
        uVar10 = lookup_translation();
        uVar10 = __ftol(*(undefined_32 *)(param_1 + 0x74), -1, -1, -1, 0xffffffbe, uVar10);
        create_text_entry_6(uVar7, uVar10);
        uVar10 = lookup_translation();
        uVar10 = __ftol(-1, -1, -1, 0xffffffbe, uVar10);
        create_text_entry_0(uVar7, uVar10);
    }
    if ((*(int *)(param_2 + 0x124) == 6) || (*(int *)(param_2 + 0x124) == 7))
    {
        uVar10 = __ftol(*(undefined_32 *)(param_1 + 0x74), -1, -1, -1, 0xffffffbe, s__f3_r_s_004c6e50);
        create_text_entry_6(0x121, uVar10);
    }
    iVar9 = *(int *)(param_2 + 0x1c8);
    iVar15 = *(int *)(param_1 + 0x78) + 1;
    if (iVar9 < iVar15)
    {
        iVar15 = iVar9;
    }
    uVar10 = lookup_translation(s__f3_c_s_d__d_004c6e40, iVar15, iVar9);
    _sprintf(local_100, uVar10);
    if ((DAT_0050ca18 < 2) || (!bVar5))
    {
        uVar6 = __ftol();
        uVar17 = param_2 & 0xffff0000 | (uint)uVar6;
        uVar6 = __ftol();
        uVar18 = uVar18 & 0xffff0000 | (uint)uVar6;
        create_text_entry_0(uVar18, uVar17, -1, -1, -1, 0xffffffbe, local_100);
        uVar6 = __ftol();
        uVar7 = uVar13 & 0xffff0000 | (uint)uVar6;
        uVar10 = lookup_translation();
        uVar19 = CONCAT44(uVar10, 0xffffffbe);
        uVar11 = -1;
        uVar10 = -1;
    }
    else
    {
        uVar6 = __ftol();
        uVar17 = param_2 & 0xffff0000 | (uint)uVar6;
        uVar6 = __ftol();
        uVar18 = uVar18 & 0xffff0000 | (uint)uVar6;
        create_text_entry_0(uVar18, uVar17, -1, 0x3f, 0x3f, -1, local_100);
        uVar6 = __ftol();
        uVar7 = uVar13 & 0xffff0000 | (uint)uVar6;
        uVar10 = lookup_translation();
        uVar19 = CONCAT44(uVar10, -1);
        uVar11 = 0x3f;
        uVar10 = 0x3f;
    }
    create_text_entry_0(uVar18, uVar7, -1, uVar10, uVar11, uVar19);
    iVar9 = *(int *)(param_2 + 0x124);
    if (((iVar9 != 1) && (iVar9 != 6)) && (iVar9 != 7))
    {
        if (0 < *(short *)(param_1 + 0x5c))
        {
            uVar10 = lookup_translation(s__f3_c_s_d__d_004c6e40, (int)*(short *)(param_1 + 0x5c),
                                        *(undefined_32 *)(param_2 + 0x1bc));
            _sprintf(local_100, uVar10);
            create_text_entry_0(0x116, uVar17, -1, -1, -1, 0xffffffbe, local_100);
        }
        uVar10 = lookup_translation();
        create_text_entry_0(0x116, uVar7, -1, -1, -1, 0xffffffbe, uVar10);
    }
    if ((1 < DAT_0050ca18) && (uVar8 == 0))
    {
        local_110 = 0x36;
    }
    FUN_0045fe70(param_2, iVar2, 0xe1, local_110, uVar8);
    if ((DAT_0050c040 != 0) && (DAT_0050c610 != 0))
    {
        create_text_entry_0(0xa0, 0x14, -1, 0, 0, -1, s__c_oZOT_004c6e08);
    }
    return;
}

void FUN_004610f0(void)

{
    sprite_enable_display(0x17, 1);
    sprite_set_pos(0x17, 0, 0x76);
    sprite_scale(0x17, 0x43a00000, 4.0f);
    sprite_set_color(0x17, 0, 0, 0, -1);
    FUN_00484020(0x14, 0x75, 300, 0x7b);
    return;
}

void FUN_00461150(int param_1)

{
    int iVar1;

    iVar1 = FUN_0045d350();
    if (iVar1 == 2)
    {
        if (param_1 != DAT_00e27820)
        {
            iVar1 = 0;
            do
            {
                sprite_enable_display(iVar1 + 0x23, 0);
                iVar1 = iVar1 + 1;
            } while (iVar1 < 6);
            sprite_enable_display(0x29, 0);
            sprite_enable_display(0x2a, 0);
            return;
        }
        iVar1 = 0;
        do
        {
            sprite_enable_display(iVar1 + 0x1b, 0);
            iVar1 = iVar1 + 1;
        } while (iVar1 < 6);
    }
    else
    {
        iVar1 = 0;
        do
        {
            sprite_enable_display(iVar1 + 0x1b, 0);
            iVar1 = iVar1 + 1;
        } while (iVar1 < 6);
    }
    sprite_enable_display(0x21, 0);
    sprite_enable_display(0x22, 0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

//----- (004611F0) --------------------------------------------------------
// HUD-Engine-Status.c
void FUN_004611f0(int param_1, int param_2)

{
    float fVar1;
    bool bVar2;
    float fVar3;
    bool bVar4;
    bool bVar5;
    bool bVar6;
    bool bVar7;
    ushort uVar8;
    int iVar9;
    uint *puVar10;
    undefined_32 uVar11;
    int iVar12;
    int iVar13;
    undefined_32 uVar14;
    undefined_32 uVar15;
    uint extraout_ECX;
    char cVar16;
    int iVar17;
    int iVar18;
    byte *pbVar19;
    int *piVar20;
    uint uVar21;
    ulonglong uVar22;
    int local_c0;
    float local_b8;
    int local_b0;
    float local_ac;
    undefined_32 local_a4;
    uint *local_9c;
    undefined_32 local_8c;
    undefined_32 local_80;
    undefined_32 local_7c;
    undefined_32 local_78;
    undefined_32 local_70;
    int aiStack_60[6];
    int local_48[6];
    int aiStack_30[6];
    int local_18[6];

    iVar17 = *(int *)(param_1 + 0x84);
    bVar7 = false;
    bVar6 = false;
    bVar5 = false;
    local_a4 = 1048576000;
    local_b8 = 0.0;
    uVar21 = *(uint *)(iVar17 + 0x60);
    if ((uVar21 & 0x1000) == 0)
    {
        if ((uVar21 & 0x4000) == 0)
        {
            bVar2 = *(float *)(iVar17 + 0x218) < 50.0
                || (0.0 < *(float *)(iVar17 + 0x2b8)
                    || ((*(uint *)(iVar17 + 100) & 0x4000) != 0 || (uVar21 & 0x2000) != 0));
            pbVar19 = (byte *)(iVar17 + 0x2a0);
            iVar9 = 6;
            do
            {
                if (0.6 < *(float *)(pbVar19 + -0x18))
                {
                    bVar2 = true;
                }
                if ((*pbVar19 & 0x1c) != 0)
                {
                    bVar2 = true;
                }
                pbVar19 = pbVar19 + 4;
                iVar9 = iVar9 + -1;
            } while (iVar9 != 0);
            if ((uVar21 & 0x400) != 0)
            {
                bVar2 = true;
            }
            if (bVar2)
            {
                *(undefined_32 *)(&DAT_0050ca68 + param_2 * 4) = 4.0f;
                *(undefined_32 *)(&DAT_004c52a8 + param_2 * 4) = 5.0f;
            }
        }
        else
        {
            *(undefined_32 *)(&DAT_0050ca68 + param_2 * 4) = -1.0f;
        }
    }
    else
    {
        *(undefined_32 *)(&DAT_0050ca60 + param_2 * 4) = 1.0f;
        *(undefined_32 *)(&DAT_0050ca68 + param_2 * 4) = 0;
    }
    iVar9 = FUN_00445690();
    if (iVar9 == 0)
    {
        fVar1 = *(float *)(&DAT_004c52a0 + param_2 * 4) - (float)_DAT_00e22a40 * 1.5;
        *(float *)(&DAT_004c52a0 + param_2 * 4) = fVar1;
        if (fVar1 <= 0.0)
        {
            *(float *)(&DAT_004c52a0 + param_2 * 4) = fVar1 - -1.0;
        }
        fVar1 = *(float *)(iVar17 + 0x2b8) - (float)_DAT_00e22a40;
        *(float *)(iVar17 + 0x2b8) = fVar1;
        if (fVar1 < 0.0)
        {
            *(undefined_32 *)(iVar17 + 0x2b8) = 0;
        }
        fVar1 =
            *(float *)(&DAT_0050ca68 + param_2 * 4) * (float)_DAT_00e22a40 + *(float *)(&DAT_0050ca60 + param_2 * 4);
        *(float *)(&DAT_0050ca60 + param_2 * 4) = fVar1;
        if (1.0 < fVar1)
        {
            *(undefined_32 *)(&DAT_0050ca60 + param_2 * 4) = 1.0f;
            *(undefined_32 *)(&DAT_0050ca68 + param_2 * 4) = 0;
        }
        if ((0.0 < *(float *)(&DAT_0050ca60 + param_2 * 4))
            && (fVar1 = *(float *)(&DAT_004c52a8 + param_2 * 4), fVar3 = (float)_DAT_00e22a40,
                *(float *)(&DAT_004c52a8 + param_2 * 4) = fVar1 - fVar3, fVar1 - fVar3 <= 0.0))
        {
            *(undefined_32 *)(&DAT_0050ca68 + param_2 * 4) = 0xc0800000;
        }
    }
    if (*(float *)(&DAT_0050ca60 + param_2 * 4) <= 0.0)
    {
        *(undefined_32 *)(&DAT_0050ca60 + param_2 * 4) = 0;
        *(undefined_32 *)(&DAT_0050ca68 + param_2 * 4) = 0;
        if (param_2 == 0)
        {
            iVar17 = 0;
            do
            {
                sprite_enable_display(iVar17 + 0x1b, 0);
                iVar17 = iVar17 + 1;
            } while (iVar17 < 6);
            sprite_enable_display(0x21, 0);
            sprite_enable_display(0x22, 0);
            return;
        }
        iVar17 = 0;
        do
        {
            sprite_enable_display(iVar17 + 0x23, 0);
            iVar17 = iVar17 + 1;
        } while (iVar17 < 6);
        sprite_enable_display(0x29, 0);
        sprite_enable_display(0x2a, 0);
        return;
    }
    iVar9 = FUN_00445690();
    if (iVar9 == 0)
    {
        iVar9 = 6;
        puVar10 = (uint *)(iVar17 + 0x2a0);
        do
        {
            iVar9 = iVar9 + -1;
            *puVar10 = *puVar10 ^ 2;
            puVar10 = puVar10 + 1;
        } while (iVar9 != 0);
    }
    local_8c = 0;
    local_7c = 0xff;
    if (DAT_0050c5f0 == 0)
    {
        rand();
    }
    __ftol();
    local_70 = 0;
    local_80 = 0xff;
    local_78 = 0xff;
    if (DAT_0050c5f0 == 0)
    {
        rand();
    }
    __ftol();
    if ((*(uint *)(iVar17 + 0x60) & 0x2000) != 0)
    {
        pbVar19 = (byte *)(iVar17 + 0x2a0);
        iVar17 = 0;
        do
        {
            if ((*pbVar19 & 2) == 0)
            {
                *(undefined_32 *)((int)local_18 + iVar17) = 200;
                *(undefined_32 *)((int)aiStack_30 + iVar17) = 200;
                *(undefined_32 *)((int)aiStack_60 + iVar17) = 200;
            }
            else
            {
                *(undefined_32 *)((int)local_18 + iVar17) = 100;
                *(undefined_32 *)((int)aiStack_30 + iVar17) = 100;
                if (DAT_0050c5f0 == 0)
                {
                    rand();
                    uVar11 = __ftol();
                    *(undefined_32 *)((int)aiStack_60 + iVar17) = uVar11;
                }
                else
                {
                    uVar11 = __ftol();
                    *(undefined_32 *)((int)aiStack_60 + iVar17) = uVar11;
                }
            }
            *(undefined_32 *)((int)local_48 + iVar17) = 0xff;
            iVar17 = iVar17 + 4;
            pbVar19 = pbVar19 + 4;
        } while (iVar17 < 0x18);
        goto LAB_0046207a;
    }
    if (((*(uint *)(iVar17 + 0x60) & 0x5000) != 0) || ((*(uint *)(iVar17 + 100) & 0x4000) != 0))
    {
        piVar20 = local_48;
        MEMSET(iVar17, piVar20, 0xff, 6)
        piVar20 = local_18;
        MEMSET(iVar17, piVar20, 0xff, 6)
        iVar17 = 0;
        do
        {
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            iVar9 = __ftol();
            *(int *)((int)aiStack_30 + iVar17) = iVar9;
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            iVar12 = __ftol();
            *(int *)((int)aiStack_60 + iVar17) = iVar12;
            if (iVar9 < iVar12)
            {
                *(int *)((int)aiStack_60 + iVar17) = iVar9;
            }
            iVar17 = iVar17 + 4;
        } while (iVar17 < 0x18);
        goto LAB_0046207a;
    }
    bVar4 = false;
    local_9c = (uint *)(iVar17 + 0x2a0);
    bVar2 = false;
    iVar9 = 0;
    puVar10 = local_9c;
    do
    {
        uVar21 = *puVar10;
        if ((uVar21 & 4) != 0)
        {
            if (iVar9 < 3)
            {
                bVar2 = true;
            }
            else
            {
                bVar4 = true;
            }
        }
        if ((uVar21 & 0x10) != 0)
        {
            bVar7 = true;
        }
        if (1.0 <= (float)puVar10[-6])
        {
            bVar6 = true;
        }
        if ((uVar21 & 8) != 0)
        {
            bVar5 = true;
        }
        iVar9 = iVar9 + 1;
        puVar10 = puVar10 + 1;
    } while (iVar9 < 6);
    if (bVar2)
    {
        local_7c = 0;
        local_8c = 0xff;
        if (DAT_0050c5f0 == 0)
        {
            rand();
        }
        __ftol();
    }
    if (bVar4)
    {
        local_78 = 0;
        local_70 = 0xff;
        if (DAT_0050c5f0 == 0)
        {
            rand();
        }
        __ftol();
    }
    local_80 = 0xff;
    local_b0 = 0;
    do
    {
        local_c0 = 3;
        do
        {
            local_ac = (float)local_9c[-6];
            if (local_ac < 0.0)
            {
                local_ac = 0.0;
            }
            if (1.0 < local_ac)
            {
                local_ac = 1.0;
            }
            iVar12 = __ftol();
            iVar9 = __ftol();
            iVar18 = 0;
            if ((0.8 < local_ac) && (iVar13 = rand(), 0.5 < (float)iVar13 * 4.656613e-10))
            {
                iVar12 = 0x80;
                iVar9 = 0;
            }
            iVar13 = 100;
            if (1.0 <= local_ac)
            {
                iVar12 = __ftol();
                iVar18 = __ftol();
                iVar13 = iVar12;
                iVar9 = iVar18;
            }
            uVar21 = *local_9c;
            if ((uVar21 & 8) == 0)
            {
                if ((*(float *)(iVar17 + 0x2b8) <= 0.0) || ((uVar21 & 1) == 0))
                {
                    *local_9c = uVar21 & 0xfffffffe;
                }
                else if ((uVar21 & 2) != 0)
                {
                    iVar12 = 0xff;
                    iVar18 = 0x96;
                    iVar9 = 0xff;
                    iVar13 = 0xff;
                }
            }
            uVar21 = *local_9c;
            if (((uVar21 & 4) != 0) && ((uVar21 & 2) != 0))
            {
                iVar12 = 0x80;
                iVar18 = 0xff;
                iVar9 = 0x80;
                iVar13 = 200;
            }
            if ((uVar21 & 8) != 0)
            {
                if (((bVar2) || (bVar4)) && ((uVar21 & 2) != 0))
                {
                    iVar12 = 0x80;
                    iVar18 = 0xff;
                    iVar9 = 0x80;
                    iVar13 = 200;
                }
                else
                {
                    iVar12 = __ftol();
                    iVar9 = __ftol();
                    iVar18 = __ftol();
                    iVar13 = __ftol();
                }
            }
            iVar12 = clamp(iVar12, 0, 0xff);
            iVar9 = clamp(iVar12, 0, 0xff);
            iVar18 = clamp(iVar18, 0, 0xff);
            iVar13 = clamp(iVar13, 0, 0xff);
            local_9c = local_9c + 1;
            *(int *)((int)local_18 + local_b0) = iVar12;
            *(int *)((int)aiStack_30 + local_b0) = iVar9;
            *(int *)((int)aiStack_60 + local_b0) = iVar18;
            *(int *)((int)local_48 + local_b0) = iVar13;
            local_b0 = local_b0 + 4;
            local_c0 = local_c0 + -1;
        } while (local_c0 != 0);
    } while (local_b0 < 0x18);
    if (bVar5)
    {
        uVar11 = __ftol();
        uVar14 = lookup_translation(s__SCREENTEXT_433__c_sENGINE_n_cFI_004c6f84);
        uVar11 = __ftol(-1, 0xffffff80, 0, uVar11, uVar14);
        create_text_entry_0(0x36, uVar11);
    }
    if (20.0 <= *(float *)(iVar17 + 0x218))
    {
        if (*(float *)(iVar17 + 0x218) < 50.0)
        {
            local_8c = __ftol();
            local_80 = __ftol();
            local_7c = __ftol();
            uVar11 = __ftol();
            if ((*(uint *)(iVar17 + 0x60) & 0x800000) != 0)
            {
                uVar14 = lookup_translation(s__SCREENTEXT_435__c_sTEMP_n_cWARN_004c6f40);
                uVar11 = __ftol(local_8c, local_80, local_7c, uVar11, uVar14);
                create_text_entry_0(0x36, uVar11);
            }
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            __ftol();
            local_78 = local_7c;
            local_70 = local_8c;
            if ((*(uint *)(iVar17 + 0x60) & 0x800000) != 0)
            {
                local_a4 = 0.2f;
                local_b8 = 0.5;
            }
        }
    }
    else
    {
        uVar11 = __ftol();
        if ((!bVar5) && ((*(uint *)(iVar17 + 0x60) & 0x800000) != 0))
        {
            uVar14 = lookup_translation(s__SCREENTEXT_434__c_sOVERHEAT_004c6f64);
            uVar11 = __ftol(-1, 0xffffff80, 0, uVar11, uVar14);
            create_text_entry_0(0x36, uVar11);
        }
        local_8c = 0xff;
        local_70 = 0xff;
        local_7c = 0;
        local_80 = 0x80;
        local_78 = 0;
        if ((*(uint *)(iVar17 + 0x60) & 0x800000) != 0)
        {
            local_a4 = 0.3f;
            local_b8 = 0.75;
        }
    }
    if (bVar6)
    {
        uVar11 = __ftol();
        uVar14 = __ftol();
        uVar15 = lookup_translation(s__SCREENTEXT_432__c_sWarning_004c6f24);
        uVar11 = __ftol(uVar11, uVar14, uVar14, uVar11, uVar15);
        create_text_entry_0(0x36, uVar11);
    }
    iVar9 = DAT_0050c5f0;
    if ((*(uint *)(iVar17 + 0x60) & 0x400) == 0)
    {
        *(undefined_32 *)(&DAT_0050ca70 + param_2 * 4) = 0;
    }
    else
    {
        if (((bVar2) || (bVar4)) || (bVar7))
        {
            *(undefined_32 *)(&DAT_0050ca70 + param_2 * 4) = 0;
            if (iVar9 == 0)
            {
                rand();
            }
            uVar11 = lookup_translation(s__SCREENTEXT_436__c_sRepair_004c6eec);
            uVar11 = __ftol(uVar11);
            uVar15 = -1;
            uVar14 = 0xffffff80;
        }
        else
        {
            if (*(float *)(&DAT_0050ca70 + param_2 * 4) <= 0.0)
            {
                FUN_00426c80(0x46, 7, 0.25f, 1.0f, 0);
            }
            fVar1 = *(float *)(&DAT_0050ca70 + param_2 * 4);
            fVar3 = (float)_DAT_00e22a40;
            *(float *)(&DAT_0050ca70 + param_2 * 4) = fVar1 + fVar3;
            if (0.8 <= fVar1 + fVar3)
                goto LAB_00461e6d;
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            uVar11 = lookup_translation(s__SCREENTEXT_437__c_sRepair_004c6f08);
            uVar11 = __ftol(uVar11);
            uVar15 = 0x40;
            uVar14 = 0x40;
        }
        uVar11 = __ftol(uVar14, 0xffffff80, uVar15, uVar11);
        create_text_entry_0(0x36, uVar11);
    }
LAB_00461e6d:
    iVar9 = FUN_00445690();
    if (iVar9 == 0)
    {
        if (bVar5)
        {
            if ((double)_DAT_0050ca78 < _DAT_00e22a38 - 2.0)
            {
                _DAT_0050ca7c = (float)_DAT_00e22a38;
                FUN_00426c80(0x87, 7, 0.25f, 1.0f, 0);
            }
            if ((double)_DAT_0050ca7c < _DAT_00e22a38 - 1.799999952316284)
            {
                FUN_00426c80(0x86, 6, 0.25f, 1.0f, 1);
            }
            _DAT_0050ca78 = (float)_DAT_00e22a38;
        }
        if (0.0 < local_b8)
        {
            FUN_00426c80(0x83, 7, local_a4, local_b8, 1);
        }
        if (((*(uint *)(iVar17 + 0x60) & 0x400) != 0) && (((bVar2 || (bVar4)) || (bVar7))))
        {
            if ((double)_DAT_0050ca80 < _DAT_00e22a38 - 2.0)
            {
                _DAT_0050ca84 = (float)_DAT_00e22a38;
                FUN_00426c80(0x85, 7, 0.25f, 1.0f, 0);
            }
            if ((double)_DAT_0050ca84 < _DAT_00e22a38 - 1.799999952316284)
            {
                FUN_00426c80(0x75, 6, 0.25f, 1.0f, 1);
            }
            _DAT_0050ca80 = (float)_DAT_00e22a38;
        }
    }
LAB_0046207a:
    local_b8 = 0.0;
    do
    {
        uVar21 = 0;
        do
        {
            iVar9 = uVar21 + (int)local_b8 * 3;
            iVar17 = iVar9 + 0x1b;
            if (param_2 != 0)
            {
                iVar17 = iVar9 + 0x23;
            }
            sprite_enable_display(iVar17, 1);
            if ((DAT_00e996dc & 0x4000) == 0)
            {
                uVar11 = __ftol();
            }
            else
            {
                uVar11 = __ftol();
            }
            uVar11 = __ftol(uVar11);
            sprite_set_pos(iVar17, uVar11);
            sprite_scale(iVar17, 0x3f400000, 0x3f400000);
            uVar22 = __ftol();
            sprite_set_color(iVar17, extraout_ECX & 0xffffff00 | (uint) * (byte *)(local_18 + iVar9),
                             (uint)(uVar22 & 0xffffff00ffffff00) | (uint) * (byte *)(aiStack_30 + iVar9),
                             (uint)((uVar22 & 0xffffff00ffffff00) >> 0x20) | (uint) * (byte *)(aiStack_60 + iVar9),
                             (int)uVar22);
            uVar21 = uVar21 + 1;
        } while ((int)uVar21 < 3);
        local_b8 = (float)((int)local_b8 + 1);
    } while ((int)local_b8 < 2);
    cVar16 = (-(param_2 != 0) & 8U) + 0x21;
    sprite_enable_display(cVar16, 1);
    uVar8 = __ftol();
    uVar21 = uVar21 & 0xffff0000 | (uint)uVar8;
    uVar11 = __ftol(uVar21);
    sprite_set_pos(cVar16, uVar11);
    sprite_scale(cVar16, 0x3f400000, 0x3f400000);
    uVar11 = __ftol();
    sprite_set_color(cVar16, local_8c, local_80, local_7c, uVar11);
    cVar16 = (-(param_2 != 0) & 8U) + 0x22;
    sprite_enable_display(cVar16, 1);
    uVar11 = __ftol(uVar21);
    sprite_set_pos(cVar16, uVar11);
    sprite_scale(cVar16, 0x3f400000, 0x3f400000);
    uVar11 = __ftol();
    sprite_set_color(cVar16, local_70, local_80, local_78, uVar11);
    return;
}

// WARNING: Could not reconcile some variable overlaps

void FUN_00462320(uint param_1, int param_2)

{
    short sVar1;
    int iVar2;
    uint uVar3;
    byte bVar4;
    int iVar5;
    undefined_32 uVar6;
    uint uVar7;
    float *pfVar8;
    int iVar9;
    int iVar10;
    char *pcVar11;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    int local_24;
    undefined_8 local_20[32];

    uVar3 = param_1;
    iVar5 = FUN_0045d350();
    if (iVar5 == 2)
    {
        if (param_2 == DAT_00e2899c)
        {
            iVar5 = 0x69;
            local_24 = 0x1e;
            iVar10 = 0xf;
            do
            {
                sprite_enable_display(iVar10, 0);
                iVar10 = iVar10 + 1;
            } while (iVar10 < 0x13);
        }
        else
        {
            iVar5 = 0xd7;
            local_24 = 0x8c;
            iVar10 = 0x13;
            do
            {
                sprite_enable_display(iVar10, 0);
                iVar10 = iVar10 + 1;
            } while (iVar10 < 0x17);
        }
    }
    else
    {
        iVar5 = 0;
        do
        {
            sprite_enable_display(iVar5, 0);
            iVar5 = iVar5 + 1;
        } while (iVar5 < 0x13);
        iVar5 = 0xd7;
        local_24 = 0x37;
    }
    iVar5 = iVar5 + *(int *)(param_1 + 0x1c8) * -0xe;
    if (60.0 <= *(float *)(param_2 + 0x74))
    {
        if (600.0 <= *(float *)(param_2 + 0x74))
        {
            if (6000.0 <= *(float *)(param_2 + 0x74))
            {
                local_2c = 0x7d;
                if (60000.0 <= *(float *)(param_2 + 0x74))
                {
                    local_2c = 0x87;
                }
            }
            else
            {
                local_2c = 0x73;
            }
        }
        else
        {
            local_2c = 0x69;
        }
    }
    else
    {
        local_2c = 0x5b;
    }
    iVar10 = 0;
    if (0 < *(int *)(param_1 + 0x1c8))
    {
        pfVar8 = (float *)(param_2 + 0x60);
        do
        {
            uVar6 = lookup_translation(s__SCREENTEXT_211__sLap_004c7038);
            _sprintf(local_20, s__f4_s_004b9484, uVar6);
            create_text_entry_0(0x19, iVar5 + 1, -1, -1, 0, -1, local_20);
            iVar10 = iVar10 + 1;
            _sprintf(local_20, &DAT_004b9584, iVar10);
            create_text_entry_0(0x2d, iVar5, -1, -1, 0, -1, local_20);
            if (*(float *)(uVar3 + 0x1d0) < *pfVar8)
            {
                param_1 = CONCAT31(param_1._1_3_, 0xff);
                local_30 = CONCAT31(local_30._1_3_, 0x80);
            }
            else if (DAT_0050c5f0 == 0)
            {
                local_28 = rand();
                bVar4 = __ftol();
                param_1 = param_1 & 0xffffff00 | (uint)bVar4;
                local_30 = local_30 & 0xffffff00 | (uint)(byte)(bVar4 - 0x14);
            }
            else
            {
                bVar4 = __ftol();
                param_1 = param_1 & 0xffffff00 | (uint)bVar4;
                local_30 = local_30 & 0xffffff00 | (uint)(byte)(bVar4 - 0x14);
            }
            create_text_entry_6(local_2c, iVar5 + -3, *pfVar8, param_1, local_30, 0, -1, s__f1_r_s_004c7030);
            iVar5 = iVar5 + 0xe;
            pfVar8 = pfVar8 + 1;
        } while (iVar10 < *(int *)(uVar3 + 0x1c8));
    }
    if (*(float *)(uVar3 + 0x1d4) < *(float *)(param_2 + 0x74))
    {
        param_1 = CONCAT31(param_1._1_3_, 0x32);
        local_30 = CONCAT31(local_30._1_3_, 0xff);
        local_28 = CONCAT31(local_28._1_3_, 5);
    }
    else
    {
        *(undefined_32 *)(uVar3 + 0x1d4) = *(undefined_32 *)(param_2 + 0x74);
        if (DAT_0050c5f0 == 0)
        {
            local_28 = rand();
        }
        bVar4 = __ftol();
        param_1 = param_1 & 0xffffff00 | (uint)bVar4;
        if (DAT_0050c5f0 == 0)
        {
            uVar7 = rand();
            bVar4 = __ftol();
            local_30 = local_30 & 0xffffff00 | (uint)bVar4;
            local_28 = uVar7 & 0xffffff00;
        }
        else
        {
            bVar4 = __ftol();
            local_30 = local_30 & 0xffffff00 | (uint)bVar4;
            local_28 = local_28 & 0xffffff00;
        }
    }
    uVar6 = lookup_translation(s__SCREENTEXT_534__sTotal__004c7014);
    _sprintf(local_20, s__f4_s_004b9484, uVar6);
    create_text_entry_0(0x19, iVar5 + 1, 0xfffffff0, -1, 0, -1, local_20);
    create_text_entry_6(local_2c, iVar5 + -3, *(undefined_32 *)(param_2 + 0x74), param_1, local_30, local_28, -1,
                        s__f1_r_s_004c7030);
    if (DAT_0050ca18 < 2)
    {
        if (1 < *(int *)(uVar3 + 0x1bc))
        {
            if (8.0 < *(float *)(uVar3 + 0xc))
            {
                sprite_enable_display(0xa4, 0);
                sprite_enable_display(0xa5, 0);
                sprite_enable_display(0xa6, 0);
                return;
            }
            iVar5 = 0xa0;
            if (*(float *)(uVar3 + 0xc) < 0.5)
            {
                iVar5 = __ftol();
            }
            if (7.5 < *(float *)(uVar3 + 0xc))
            {
                iVar5 = __ftol();
            }
            iVar10 = local_24;
            if (*(short *)(param_2 + 0x5c) < 4)
            {
                iVar5 = iVar5 + -0x14;
                iVar10 = local_24 + 0x14;
                iVar2 = -iVar5;
                iVar9 = iVar2 + 0x140;
                FUN_00484020(iVar2 + 0x12f, local_24 + -0xd, iVar2 + 0x151, local_24 + 0x35);
                if (*(short *)(param_2 + 0x5c) == 1)
                {
                    sprite_enable_display(0xa4, 1);
                    sprite_set_pos(0xa4, iVar9, local_24);
                }
                if (*(short *)(param_2 + 0x5c) == 2)
                {
                    sprite_enable_display(0xa5, 1);
                    sprite_set_pos(0xa5, iVar9, local_24);
                }
                if (*(short *)(param_2 + 0x5c) == 3)
                {
                    sprite_enable_display(0xa6, 1);
                    sprite_set_pos(0xa6, iVar9, local_24);
                }
            }
            sVar1 = *(short *)(param_2 + 0x5c);
            if (sVar1 == 1)
            {
                pcVar11 = s__SCREENTEXT_427__sst_004c6ffc;
            }
            else if (sVar1 == 2)
            {
                pcVar11 = s__SCREENTEXT_428__snd_004c6fe4;
            }
            else if (sVar1 == 3)
            {
                pcVar11 = s__SCREENTEXT_429__srd_004c6fcc;
            }
            else
            {
                pcVar11 = s__SCREENTEXT_430__sth_004c6fb4;
            }
            uVar6 = lookup_translation(pcVar11);
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            bVar4 = __ftol();
            param_1 = param_1 & 0xffffff00 | (uint)bVar4;
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            bVar4 = __ftol();
            local_30 = local_30 & 0xffffff00 | (uint)bVar4;
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            bVar4 = __ftol();
            local_28 = local_28 & 0xffffff00 | (uint)bVar4;
            _sprintf(local_20, s__f2_r_s_d_004c6fa8, (int)*(short *)(param_2 + 0x5c));
            create_text_entry_0(iVar5, iVar10, param_1, local_30, local_28, 0xfffffffe, local_20);
            create_text_entry_0(iVar5 + 1, iVar10, param_1, local_30, local_28, 0xfffffffe, uVar6);
        }
        return;
    }
    sVar1 = *(short *)(param_2 + 0x5c);
    if (sVar1 == 1)
    {
        pcVar11 = s__SCREENTEXT_427__sst_004c6ffc;
    }
    else if (sVar1 == 2)
    {
        pcVar11 = s__SCREENTEXT_428__snd_004c6fe4;
    }
    else if (sVar1 == 3)
    {
        pcVar11 = s__SCREENTEXT_429__srd_004c6fcc;
    }
    else
    {
        pcVar11 = s__SCREENTEXT_430__sth_004c6fb4;
    }
    uVar6 = lookup_translation(pcVar11);
    if (DAT_0050c5f0 == 0)
    {
        rand();
    }
    bVar4 = __ftol();
    param_1 = param_1 & 0xffffff00 | (uint)bVar4;
    if (DAT_0050c5f0 == 0)
    {
        rand();
    }
    bVar4 = __ftol();
    local_30 = local_30 & 0xffffff00 | (uint)bVar4;
    if (DAT_0050c5f0 == 0)
    {
        rand();
    }
    bVar4 = __ftol();
    local_28 = local_28 & 0xffffff00 | (uint)bVar4;
    _sprintf(local_20, s__f2_r_s_d_004c6fa8, (int)*(short *)(param_2 + 0x5c));
    create_text_entry_0(0xa0, local_24, param_1, local_30, local_28, 0xfffffffe, local_20);
    create_text_entry_0(0xa1, local_24, param_1, local_30, local_28, 0xfffffffe, uVar6);
    return;
}

undefined_32 FUN_00462a70(int param_1, int param_2)

{
    byte *pbVar1;

    if ((((((*(int *)(param_1 + 0x1ac) == 1) && (*(int *)(param_1 + 0x1c0) == 3))
           && (-6081.0 < *(float *)(param_2 + 0x50)))
          && ((*(float *)(param_2 + 0x50) < -5086.0 && (-2801.0 < *(float *)(param_2 + 0x54)))))
         && ((*(float *)(param_2 + 0x54) < -1182.0
              && ((*(int *)(param_2 + 0x140) != 0
                   && (pbVar1 = (byte *)FUN_004318b0(*(int *)(param_2 + 0x140)), pbVar1 != NULL))))))
        && ((*pbVar1 & 8) != 0))
    {
        return 0;
    }
    if (((*(uint *)(param_2 + 100) & 0x2000000) == 0)
        && ((4 < *(short *)(param_2 + 0x10c) || (*(float *)(param_2 + 0x1a0) < 60.0))))
    {
        return 1;
    }
    return 0;
}

void FUN_00462b20(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_32 uVar4;
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    if (param_2 != 0)
    {
        iVar1 = *(int *)(param_2 + 0x84);
        iVar3 = (param_2 != DAT_00e2899c) + 0xd;
        if ((*(uint *)(iVar1 + 100) & 0x2000000) != 0)
        {
            FUN_00462320(param_1, param_2, iVar1);
            *(uint *)(iVar1 + 0x60) = *(uint *)(iVar1 + 0x60) & 0xf7ffffff;
            if ((&DAT_00e287e0)[iVar3] != 0)
            {
                FUN_00431a50((&DAT_00e287e0)[iVar3], 2, 0xfffffffc, 0x10, 3);
            }
            FUN_00461150(param_2);
            return;
        }
        if (((byte) * (undefined_32 *)(param_1 + 8) & 0xf) == 1)
        {
            iVar2 = FUN_00462a70(param_1, iVar1);
            if (iVar2 == 0)
            {
                *(uint *)(iVar1 + 0x60) = *(uint *)(iVar1 + 0x60) & 0xf7ffffff;
                if ((&DAT_00e287e0)[iVar3] != 0)
                {
                    FUN_00431a50((&DAT_00e287e0)[iVar3], 2, 0xfffffffc, 0x10, 3);
                }
            }
            else
            {
                if ((&DAT_00e287e0)[iVar3] != 0)
                {
                    FUN_00431a50((&DAT_00e287e0)[iVar3], 2, 3, 0x10, 2);
                }
                *(uint *)(iVar1 + 0x60) = *(uint *)(iVar1 + 0x60) | 0x8000000;
                FUN_0044eeb0(iVar1 + 0xac, local_40, 0.5f);
                vec3f_copy(iVar1 + 600, local_10);
                *(undefined_32 *)(iVar1 + 0x254) = (&DAT_00e287e0)[iVar3];
            }
        }
        FUN_00460950(param_2, param_1);
        iVar3 = FUN_0045d350();
        if ((iVar3 == 2) && (param_2 != DAT_00e27820))
        {
            uVar4 = 1;
        }
        else
        {
            uVar4 = 0;
        }
        FUN_004611f0(param_2, uVar4);
        if ((*(uint *)(iVar1 + 0x60) & 0x800) != 0)
        {
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            uVar4 = lookup_translation(s__c_sKa_pow__004c7050);
            uVar4 = __ftol(0, -1, uVar4);
            create_text_entry_0(0xa0, 0x50, -1, uVar4);
        }
    }
    return;
}

void FUN_00462cf0(void)

{
    undefined_32 uVar1;

    uVar1 = FUN_00450b30(MAGIC('J', 'd', 'g', 'e'), 0);
    FUN_00426c80(0x8f, 6, 0.25f, 0.2f, 1);
    FUN_0045e1a0(uVar1);
    FUN_00463580(uVar1);
    return;
}

undefined_32 FUN_00462d40(void)

{
    undefined_32 uVar1;
    int iVar2;

    uVar1 = FUN_0045e120(0x200);
    iVar2 = FUN_00450b30(MAGIC('J', 'd', 'g', 'e'), 0);
    if ((*(uint *)(iVar2 + 8) & 0x20) != 0)
    {
        return 0;
    }
    switch (*(uint *)(iVar2 + 8) & 0xf)
    {
    default:
        return uVar1;
    case 2:
    case 4:
    case 5:
    case 6:
        return 0;
    }
}

void FUN_00462da0(int param_1)

{
    float fVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    undefined_32 uVar4;
    undefined_32 uVar5;
    uint uVar6;

    sprite_enable_display(0xa1, 0);
    sprite_enable_display(0xa2, 0);
    sprite_enable_display(0xa3, 0);
    if ((*(byte *)(param_1 + 8) & 0xf) != 0)
        goto LAB_0046341c;
    if ((*(float *)(param_1 + 0xc) <= 2.0) || (3.0 <= *(float *)(param_1 + 0xc)))
    {
        if ((*(float *)(param_1 + 0xc) <= 1.0) || (2.0 <= *(float *)(param_1 + 0xc)))
        {
            if ((0.0 < *(float *)(param_1 + 0xc)) && (*(float *)(param_1 + 0xc) < 1.0))
            {
                fVar1 = *(float *)(param_1 + 0xc);
                if (DAT_0050c5f0 == 0)
                {
                    rand();
                }
                uVar2 = __ftol();
                if (DAT_0050c5f0 == 0)
                {
                    rand();
                }
                uVar3 = __ftol();
                if (DAT_0050c5f0 == 0)
                {
                    rand();
                }
                uVar4 = __ftol();
                uVar5 = __ftol();
                sprite_enable_display(0xa1, 1);
                sprite_set_pos(0xa1, 0xa0, 100);
                fVar1 = fVar1 + fVar1;
                sprite_scale(0xa1, fVar1, fVar1);
                sprite_set_color(0xa1, uVar2, uVar3, uVar4, uVar5);
                FUN_0042b640(*(undefined_32 *)(param_1 + 0x28), -1, -1, 0xff, 0xff, 0, 0xff);
                if ((*(uint *)(param_1 + 8) & 0x400) != 0)
                {
                    FUN_00426c80(0x59, 7, 0.25f, 1.0f, 0);
                    uVar6 = *(uint *)(param_1 + 8) & 0xfffffbff;
                    goto LAB_00463250;
                }
            }
        }
        else
        {
            fVar1 = *(float *)(param_1 + 0xc) - 1.0;
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            uVar2 = __ftol();
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            uVar3 = __ftol();
            if (DAT_0050c5f0 == 0)
            {
                rand();
            }
            uVar4 = __ftol();
            uVar5 = __ftol();
            sprite_enable_display(0xa2, 1);
            sprite_set_pos(0xa2, 0xa0, 100);
            fVar1 = fVar1 + fVar1;
            sprite_scale(0xa2, fVar1, fVar1);
            sprite_set_color(0xa2, uVar2, uVar3, uVar4, uVar5);
            FUN_0042b640(*(undefined_32 *)(param_1 + 0x28), -1, -1, 0xff, 0x80, 0, 0xff);
            if ((*(uint *)(param_1 + 8) & 0x200) != 0)
            {
                FUN_00426c80(0x59, 7, 0.25f, 1.0f, 0);
                uVar6 = *(uint *)(param_1 + 8) & 0xfffffdff;
                goto LAB_00463250;
            }
        }
    }
    else
    {
        fVar1 = *(float *)(param_1 + 0xc) - 2.0;
        if (DAT_0050c5f0 == 0)
        {
            rand();
        }
        uVar2 = __ftol();
        if (DAT_0050c5f0 == 0)
        {
            rand();
        }
        uVar3 = __ftol();
        if (DAT_0050c5f0 == 0)
        {
            rand();
        }
        uVar4 = __ftol();
        uVar5 = __ftol();
        sprite_enable_display(0xa3, 1);
        sprite_set_pos(0xa3, 0xa0, 100);
        fVar1 = fVar1 + fVar1;
        sprite_scale(0xa3, fVar1, fVar1);
        sprite_set_color(0xa3, uVar2, uVar3, uVar4, uVar5);
        FUN_0042b640(*(undefined_32 *)(param_1 + 0x28), -1, -1, 0xff, 0, 0, 0xff);
        if ((*(uint *)(param_1 + 8) & 0x100) != 0)
        {
            FUN_00426c80(0x59, 7, 0.25f, 1.0f, 0);
            uVar6 = *(uint *)(param_1 + 8) & 0xfffffeff;
        LAB_00463250:
            *(uint *)(param_1 + 8) = uVar6;
        }
    }
    if (*(float *)(param_1 + 0xc) <= 2.5)
    {
        if (*(float *)(param_1 + 0xc) <= 2.0)
        {
            if (*(float *)(param_1 + 0xc) <= 1.0)
            {
                FUN_0042b640(*(undefined_32 *)(param_1 + 0x14), -1, -1, 0xff, 0xff, 0, -1);
                uVar2 = *(undefined_32 *)(param_1 + 0x20);
                uVar4 = 0xff;
                uVar3 = 0xff;
            }
            else
            {
                FUN_0042b640(*(undefined_32 *)(param_1 + 0x10), -1, -1, 0xff, 0, 0, -1);
                uVar2 = *(undefined_32 *)(param_1 + 0x24);
                uVar4 = 0;
                uVar3 = 0xff;
            }
        }
        else
        {
            FUN_0042b640(*(undefined_32 *)(param_1 + 0x10), -1, -1, 0, 0, 0, -1);
            FUN_0042b640(*(undefined_32 *)(param_1 + 0x14), -1, -1, 0, 0, 0, -1);
            FUN_0042b640(*(undefined_32 *)(param_1 + 0x18), -1, -1, 0, 0, 0, -1);
            FUN_0042b640(*(undefined_32 *)(param_1 + 0x1c), -1, -1, 0, 0, 0, -1);
            FUN_0042b640(*(undefined_32 *)(param_1 + 0x20), -1, -1, 0, 0, 0, -1);
            uVar2 = *(undefined_32 *)(param_1 + 0x24);
            uVar4 = 0;
            uVar3 = 0;
        }
    }
    else
    {
        FUN_0042b640(*(undefined_32 *)(param_1 + 0x10), -1, -1, 0xff, 0, 0, -1);
        FUN_0042b640(*(undefined_32 *)(param_1 + 0x14), -1, -1, 0xff, 0, 0, -1);
        FUN_0042b640(*(undefined_32 *)(param_1 + 0x18), -1, -1, 0xff, 0, 0, -1);
        FUN_0042b640(*(undefined_32 *)(param_1 + 0x1c), -1, -1, 0xff, 0, 0, -1);
        FUN_0042b640(*(undefined_32 *)(param_1 + 0x20), -1, -1, 0xff, 0, 0, -1);
        uVar2 = *(undefined_32 *)(param_1 + 0x24);
        uVar4 = 0;
        uVar3 = 0xff;
    }
    FUN_0042b640(uVar2, -1, -1, uVar3, uVar4, 0, -1);
LAB_0046341c:
    if (((byte) * (undefined_32 *)(param_1 + 8) & 0xf) == 1)
    {
        rand();
        uVar2 = __ftol();
        FUN_0042b640(*(undefined_32 *)(param_1 + 0x28), -1, -1, 0, 0xff, 0, uVar2);
    }
    if (((byte) * (undefined_32 *)(param_1 + 8) & 0xf) == 3)
    {
        FUN_0042b640(*(undefined_32 *)(param_1 + 0x28), -1, -1, 0, 0xff, 0, 0);
    }
    return;
}

void FUN_004634a0(int param_1)

{
    short sVar1;
    short sVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int local_4;

    if ((((byte) * (uint *)(param_1 + 8) & 0xf) == 1) && ((*(uint *)(param_1 + 8) & 0x20) == 0))
    {
        iVar5 = 0;
        local_4 = 0;
        if (0 < *(int *)(param_1 + 0x1bc))
        {
            do
            {
                iVar3 = *(int *)(DAT_00e28960 + 0x84 + iVar5);
                iVar4 = DAT_00e28960 + iVar5;
                FUN_0042c420((int)*(short *)(iVar3 + 4), iVar3 + 0x50, 0xffffd8f1);
                if ((((*(uint *)(iVar3 + 0x60) & 0x5000) == 0) && ((*(uint *)(iVar3 + 100) & 0x2000000) == 0))
                    && (sVar1 = *(short *)(iVar4 + 0x5c), 0 < sVar1))
                {
                    if ((iVar4 == DAT_00e2899c) || (iVar4 == DAT_00e27820))
                    {
                        if (DAT_0050ca18 < 2)
                            goto LAB_0046354e;
                        sVar2 = *(short *)(iVar3 + 4);
                        iVar4 = -(int)sVar1;
                    }
                    else
                    {
                        iVar4 = (int)sVar1;
                        sVar2 = *(short *)(iVar3 + 4);
                    }
                    FUN_0042c420((int)sVar2, iVar3 + 0x50, iVar4);
                }
            LAB_0046354e:
                local_4 = local_4 + 1;
                iVar5 = iVar5 + 0x88;
            } while (local_4 < *(int *)(param_1 + 0x1bc));
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00463580(int param_1)

{
    int iVar1;
    short sVar2;
    bool bVar3;
    uint uVar4;
    undefined_32 uVar5;
    int iVar6;
    int iVar7;
    int *piVar8;
    float10 fVar9;
    undefined_32 local_dc;
    undefined_32 local_d8;
    int local_d4[21];
    undefined_8 local_80[128];

    iVar7 = 0;
    local_dc = 0;
    local_d8 = 0;
    local_d4[0] = 0;
    if (DAT_0050ca3c == 0)
    {
        uVar4 = *(uint *)(param_1 + 8) & 0xf;
        if (uVar4 != 6)
        {
            if ((uVar4 == 1) || (uVar4 == 2))
            {
                iVar6 = *(int *)(param_1 + 0x1c8);
                bVar3 = false;
                if (1 < iVar6)
                {
                    if ((DAT_00e2899c != 0) && (iVar6 <= *(int *)(DAT_00e2899c + 0x78) + 1))
                    {
                        bVar3 = true;
                    }
                    if ((DAT_00e27820 != 0) && (iVar6 <= *(int *)(DAT_00e27820 + 0x78) + 1))
                    {
                        bVar3 = true;
                    }
                }
                if (DAT_004eb45c != 0)
                {
                    fVar9 = (float10)FUN_004456a0();
                    if (((float10)0.0 < fVar9) || (((byte) * (undefined_32 *)(param_1 + 8) & 0xf) == 6))
                    {
                        FUN_004277f0(0, *(undefined_32 *)(param_1 + 0x1ac));
                        _DAT_0050ca88 = 1;
                    }
                    else
                    {
                        if (_DAT_0050ca88 != 0)
                        {
                            _DAT_0050ca88 = 0;
                            FUN_00427ea0(*(undefined_32 *)(param_1 + 0x1ac), *(undefined_32 *)(param_1 + 0x1c0), 0);
                        }
                        if (bVar3)
                        {
                        LAB_00463745:
                            FUN_004277f0(1, *(undefined_32 *)(param_1 + 0x1ac));
                        }
                        else
                        {
                            iVar6 = FUN_0045d350();
                            if (iVar6 < 1)
                            {
                                FUN_004277f0(1, *(undefined_32 *)(param_1 + 0x1ac));
                            }
                            else if (_DAT_0050ca10 != 0)
                            {
                                FUN_00427ea0(*(undefined_32 *)(param_1 + 0x1ac), *(undefined_32 *)(param_1 + 0x1c0), 1);
                                goto LAB_00463745;
                            }
                        }
                    }
                }
            }
            _DAT_0050ca0c = 0;
        }
    }
    else
    {
        FUN_0045d130(param_1, 0);
        if (DAT_0050ca40 == 2)
        {
            FUN_00426c80(0x90, 7, 0.25f, 1.0f, 1);
        }
        else if (DAT_0050ca40 == 3)
        {
            FUN_00426c80(0x8e, 7, 0.25f, 1.0f, 1);
        }
        else if (DAT_0050ca40 == 4)
        {
            FUN_00426c80(0x91, 7, 0.25f, 1.0f, 1);
        }
        else if (DAT_0050ca40 == 5)
        {
            FUN_00426c80(0x8f, 7, 0.25f, 1.0f, 1);
        }
        else
        {
            FUN_00426c80(0x8f, 7, 0.25f, 1.0f, 1);
        }
    }
    FUN_00460320();
    uVar4 = *(uint *)(param_1 + 8) & 0xf;
    if (uVar4 == 4)
    {
        if (*(float *)(param_1 + 0xc) <= 0.0)
        {
        LAB_004637ea:
            sprite_set_color(0xffffff99, 0, 0, 0, 0);
            goto LAB_004637f8;
        }
    }
    else if (uVar4 == 5)
    {
        if (*(float *)(param_1 + 0xc) <= 8.8)
            goto LAB_004637ea;
    }
    else
    {
        if ((uVar4 != 1) || ((*(uint *)(param_1 + 8) & 0x20) == 0))
        {
            if (uVar4 == 6)
            {
                if (0.5 < *(float *)(param_1 + 0xc))
                {
                    sprite_set_color(0xffffff99, 0, 0, 0, 0);
                    return;
                }
                if (*(float *)(param_1 + 0xc) <= 0.25)
                {
                    sprite_set_color(0xffffff99, 0, 0, 0, -1);
                    return;
                }
                uVar5 = __ftol();
                sprite_set_color(0xffffff99, 0, 0, 0, uVar5);
                return;
            }
            goto LAB_004637f8;
        }
        if (0.3 <= *(float *)(param_1 + 0xc))
        {
            sprite_enable_display(0xffffff99, 0);
            goto LAB_004637f8;
        }
    }
    uVar5 = __ftol();
    sprite_set_color(0xffffff99, 0, 0, 0, uVar5);
LAB_004637f8:
    DAT_0050ca20 = DAT_0050ca20 == '\0';
    if (((((byte) * (undefined_32 *)(param_1 + 8) & 0xf) != 1) && (DAT_0050ca2c != 0)) && ((bool)DAT_0050ca20))
    {
        uVar5 = lookup_translation(s__sLow_Memory___d_Racers_004c705c, DAT_0050ca2c);
        _sprintf(local_80, uVar5);
        create_text_entry_1(100, 100, local_80);
    }
    FUN_0045dad0(param_1, 0);
    piVar8 = local_d4;
    for (iVar6 = 0x14; piVar8 = piVar8 + 1, iVar6 != 0; iVar6 = iVar6 + -1)
    {
        *piVar8 = 0;
    }
    iVar6 = 0;
    if (0 < *(int *)(param_1 + 0x1bc))
    {
        do
        {
            iVar1 = DAT_00e28960 + iVar7;
            FUN_0042c420(iVar6, &local_dc, 0xffffd8f1);
            sVar2 = *(short *)(iVar1 + 0x5c);
            if (0 < sVar2)
            {
                local_d4[sVar2] = iVar1;
            }
            iVar6 = iVar6 + 1;
            iVar7 = iVar7 + 0x88;
        } while (iVar6 < *(int *)(param_1 + 0x1bc));
    }
    iVar7 = 0;
    if (0 < *(int *)(param_1 + 0x1bc))
    {
        do
        {
            sprite_enable_display(iVar7 + 0x2b, 0);
            iVar7 = iVar7 + 1;
        } while (iVar7 < *(int *)(param_1 + 0x1bc));
    }
    sprite_enable_display(0x19, 0);
    uVar4 = *(uint *)(param_1 + 8) & 0xf;
    if ((uVar4 != 4) && (1 < DAT_0050ca18))
    {
        FUN_004610f0();
    }
    if (((uVar4 != 3) && (uVar4 != 4)) && (uVar4 != 5))
    {
        if (DAT_00e2899c != 0)
        {
            FUN_00462b20(param_1, DAT_00e2899c);
        }
        if (DAT_00e27820 != 0)
        {
            FUN_00462b20(param_1, DAT_00e27820);
        }
        if (((byte) * (undefined_32 *)(param_1 + 8) & 0xf) != 2)
        {
            FUN_0045f230(param_1);
            FUN_004634a0(param_1);
        }
        FUN_00462da0(param_1);
    }
    return;
}

void FUN_00463ec0(undefined_32 param_1, int param_2, float param_3)

{
    FUN_0042c380(param_1, 0, param_2, 1.0f, param_3 * 0.8, -1, -1, 0xffffffc8);
    FUN_0042c380(param_1, 1, param_2 + 1, 0x3f400000, param_3, -1, -1, 0xffffffc8);
    FUN_0042c380(param_1, 2, param_2 + 2, 0x3f2147ae, param_3 * 0.75, 0xffffffb4, -1, 0xffffffb4);
    FUN_0042c380(param_1, 3, param_2 + 3, 0x3edc28f6, param_3 + param_3, -1, -1, 0xffffffc8);
    FUN_0042c380(param_1, 4, param_2 + 4, 0.25f, param_3 * 1.4, -1, 0xffffffc8, 0xffffffc8);
    FUN_0042c380(param_1, 4, param_2 + 5, 0xbe3851ec, param_3 * 0.75, -1, 0xffffffc8, 0xffffffc8);
    FUN_0042c380(param_1, 5, param_2 + 6, 0xbedc28f6, param_3, 0xffffffb4, -1, 0xffffffb4);
    FUN_0042c380(param_1, 6, param_2 + 7, 0xbfaccccd, param_3 * 0.5, -1, 0xffffffb4, 0xffffffb4);
    return;
}

void FUN_00463ff0(undefined_32 param_1, undefined_32 param_2)

{
    DAT_0050ca8c = param_1;
    DAT_0050ca90 = param_2;
    return;
}

void FUN_00464010(int param_1, int param_2)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    int iVar4;
    int iVar5;
    bool bVar6;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar1 = param_2;
    iVar5 = param_1;
    if (1 < DAT_0050ca18)
    {
        FUN_0042d510();
        return;
    }
    if ((param_1 == 7) || (param_1 == 5))
        goto LAB_004643d8;
    uVar2 = FUN_00446fb0(0x1c);
    FUN_004282f0(0x41, uVar2);
    if (param_1 == 0)
    {
        FUN_004282f0(0x49, uVar2);
    }
    uVar2 = FUN_00446fb0(0x6d);
    FUN_004282f0(0x42, uVar2);
    FUN_004282f0(0x43, uVar2);
    FUN_004282f0(0x44, uVar2);
    FUN_004282f0(0x45, uVar2);
    FUN_004282f0(0x46, uVar2);
    FUN_004282f0(0x47, uVar2);
    FUN_004282f0(0x48, uVar2);
    if (param_1 == 0)
    {
        FUN_004282f0(0x4a, uVar2);
        FUN_004282f0(0x4b, uVar2);
        FUN_004282f0(0x4c, uVar2);
        FUN_004282f0(0x4d, uVar2);
        FUN_004282f0(0x4e, uVar2);
        FUN_004282f0(0x4f, uVar2);
        FUN_004282f0(0x50, uVar2);
    }
    uVar2 = FUN_00446fb0(0x56);
    FUN_004282f0(0x3f, uVar2);
    if (param_1 == 0)
    {
        FUN_004282f0(0x40, uVar2);
    }
    FUN_004287e0(0x3f, 0x1e00);
    FUN_00428800(0x3f, 1);
    iVar4 = 0x41;
    do
    {
        FUN_004287e0(iVar4, 0x1e00);
        FUN_00428800(iVar4, 1);
        iVar4 = iVar4 + 1;
    } while (iVar4 < 0x49);
    if (param_1 == 0)
    {
        FUN_004287e0(0x40, 0x1e00);
        FUN_00428800(0x40, 1);
        iVar4 = 0x49;
        do
        {
            FUN_004287e0(iVar4, 0x1e00);
            FUN_00428800(iVar4, 1);
            iVar4 = iVar4 + 1;
        } while (iVar4 < 0x51);
    }
    local_10 = 0xff;
    if (param_1 == 0)
    {
        local_c = 0xc3b40000;
        local_8 = 0x44000000;
        local_4 = 200.0f;
        FUN_0042c2e0(1, 0x40, &local_c, 0x3f666667, -1, 0xffffffdc, 0xffffffbe, -1);
        FUN_00463ec0(1, 0x49, 0x3f666667);
        local_c = 0xc35c0000;
        local_8 = 0x44000000;
        local_4 = 0x43820000;
        local_14 = 0x3f99999a;
        local_18 = 0xff;
        param_2 = 0xfd;
        param_1 = 0xe1;
    }
    else if (param_1 == 1)
    {
        local_c = 0x438b10a4;
        local_8 = 0xc2f2051f;
        local_4 = 0x43550ccd;
        local_14 = 0.3f;
        local_18 = 0xcd;
        param_2 = 0xf0;
    LAB_0046439c:
        param_1 = 0xff;
    }
    else if (param_1 == 2)
    {
        local_c = 0;
        local_8 = 0x44000000;
        local_4 = 0x43660000;
        local_14 = 0x3f99999a;
        local_18 = 0xff;
        param_2 = 0xf4;
        param_1 = 0xbe;
    }
    else if (param_1 == 3)
    {
        local_c = 0x438b10a4;
        local_8 = 0xc2f2051f;
        local_4 = 0x43550ccd;
        local_14 = 0x3fb851ec;
        local_18 = 0xff;
        param_2 = 0xda;
        param_1 = 0xcc;
    }
    else
    {
        if (param_1 != 4)
        {
            if (param_1 == 6)
            {
                local_c = 0xc311147b;
                local_8 = 0x428a4ccd;
                local_4 = 0x42fdf0a4;
                local_14 = 0x3e75c290;
                local_18 = 0xf0;
                param_2 = 0xf0;
            }
            else
            {
                local_c = 0;
                local_8 = 0x44000000;
                local_4 = 0x43660000;
                local_14 = 0x3f99999a;
                local_18 = 0xff;
                param_2 = 0xff;
            }
            goto LAB_0046439c;
        }
        bVar6 = param_2 != 3;
        local_c = 0xc310e666;
        local_8 = 0x42a80000;
        local_4 = 0x420c0000;
        local_14 = 0x3fb851ec;
        local_18 = 0xff;
        param_2 = 0xe6;
        param_1 = 0xb4;
        if (bVar6)
        {
            local_10 = 100;
            local_14 = 0x3ef5c290;
            local_18 = 0x80;
            param_2 = 0x73;
            param_1 = 0x5a;
        }
    }
    FUN_0042c2e0(0, 0x3f, &local_c, local_14, local_18, param_2, param_1, local_10);
    FUN_00463ec0(0, 0x41, local_14);
LAB_004643d8:
    if ((DAT_0050ca18 < 2) && (((iVar5 == 1 || (iVar5 == 4)) && (iVar1 != 3))))
    {
        FUN_0042d450();
        FUN_0042d430(1.0f);
        FUN_0042d410(0);
        uVar2 = FUN_00446fb0(0x6d);
        iVar4 = 0x51;
        do
        {
            FUN_004282f0(iVar4, uVar2);
            FUN_004287e0(iVar4, 0x1e00);
            FUN_00428800(iVar4, 1);
            FUN_0042d460(iVar4 + -0x51, iVar4);
            iVar4 = iVar4 + 1;
        } while (iVar4 < 0x8d);
        if (iVar5 == 1)
        {
            iVar4 = 0x8d;
            do
            {
                FUN_004282f0(iVar4, uVar2);
                FUN_004287e0(iVar4, 0x1e00);
                FUN_00428800(iVar4, 1);
                FUN_0042d460(iVar4 + -0x51, iVar4);
                iVar4 = iVar4 + 1;
            } while (iVar4 < 0xa1);
            FUN_0042d3e0(0xffffffe6, 0xffffffe6, -1, 0xffffffc8);
            if (iVar1 == 0)
            {
                FUN_0042d410(0);
            }
            else if (iVar1 == 1)
            {
                FUN_0042d3c0(0x41c80000, 45.0f);
                FUN_0042d410(0x14);
            }
            else if (iVar1 == 2)
            {
                FUN_0042d3c0(20.0f, 0x42700000);
                FUN_0042d410(0x28);
                FUN_0042c2d0(0, 0xffffff80);
            }
        }
        else
        {
            FUN_0042d3e0(-1, -1, -1, 0x28);
            FUN_0042d430(0x40e00000);
            if (iVar1 == 0)
            {
                FUN_0042d410(0x14);
                FUN_0042d3c0(10.0f, 300.0f);
            }
            else
            {
                FUN_0042d3c0(50.0f, 1000.0f);
                FUN_0042d410(0x3c);
            }
        }
    }
    else
    {
        FUN_0042d440();
    }
    if ((iVar5 != 1) || (iVar1 == 3))
    {
        uVar2 = FUN_00446fb0(0x7f);
        uVar3 = FUN_00446fb0(0x80);
        iVar5 = 0x97;
        do
        {
            iVar1 = iVar5 + -10;
            FUN_004282f0(iVar1, uVar3);
            FUN_004287e0(iVar1, 0x1f00);
            FUN_00428800(iVar1, 1);
            FUN_004282f0(iVar5, uVar2);
            FUN_004287e0(iVar5, 0x1f00);
            FUN_00428800(iVar5, 1);
            FUN_0042c4e0(iVar5 + -0x97, iVar1, iVar5);
            iVar1 = iVar5 + -0x96;
            iVar5 = iVar5 + 1;
        } while (iVar1 < 10);
    }
    return;
}

void FUN_00464630(undefined_32 param_1, undefined_32 param_2, int param_3)

{
    undefined_32 uVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    undefined_32 uVar4;
    int iVar5;
    int iVar6;

    FUN_00428370();
    uVar1 = FUN_00446fb0(0x4b);
    uVar2 = FUN_00446fb0(0x65);
    if (DAT_0050ca18 < 2)
    {
        uVar3 = FUN_00446fb0(100);
        FUN_004282f0(0, uVar3);
        uVar3 = FUN_00446fb0(100);
        FUN_004282f0(1, uVar3);
        uVar3 = FUN_00446fb0(0x66);
        FUN_004282f0(3, uVar3);
        FUN_004282f0(10, uVar3);
        FUN_004287e0(10, 4);
        uVar3 = FUN_00446fb0(0x67);
        FUN_004282f0(2, uVar3);
        uVar3 = FUN_00446fb0(0x69);
        FUN_004282f0(4, uVar3);
        FUN_004282f0(5, 0);
        FUN_004282f0(6, 0);
        uVar3 = FUN_00446fb0(0x6a);
        FUN_004282f0(0xb, uVar3);
        FUN_004282f0(0xc, uVar3);
        uVar3 = FUN_00446fb0(0x6b);
        FUN_004282f0(7, uVar3);
        FUN_004282f0(8, uVar3);
        uVar3 = FUN_00446fb0(0x6c);
        FUN_004282f0(9, uVar3);
        FUN_004282f0(0xd, uVar1);
        uVar3 = FUN_00446fb0(0x4a);
        FUN_004282f0(0xe, uVar3);
        iVar5 = 0;
        do
        {
            FUN_004287e0(iVar5, 0x8000);
            iVar5 = iVar5 + 1;
        } while (iVar5 < 0xe);
        uVar3 = FUN_00446fb0(0x68);
    }
    else
    {
        uVar3 = FUN_00446fb0(0xa6);
        FUN_004282f0(0x15, uVar3);
        FUN_004282f0(0x16, uVar2);
        uVar4 = FUN_00446fb0(99);
        FUN_004282f0(0x13, uVar4);
        uVar4 = FUN_00446fb0(99);
        FUN_004282f0(0x14, uVar4);
        FUN_00446fb0(0x69);
        FUN_004282f0(0x17, 0);
        iVar5 = 0x15;
        do
        {
            FUN_004287e0(iVar5, 0x8000);
            iVar5 = iVar5 + 1;
        } while (iVar5 < 0x18);
    }
    FUN_004282f0(0x11, uVar3);
    FUN_004282f0(0x12, uVar2);
    uVar3 = FUN_00446fb0(99);
    FUN_004282f0(0xf, uVar3);
    DAT_0050c9fc = uVar3;
    uVar3 = FUN_00446fb0(99);
    FUN_004282f0(0x10, uVar3);
    iVar5 = 0x11;
    DAT_0050ca00 = uVar3;
    do
    {
        FUN_004287e0(iVar5, 0x8000);
        iVar5 = iVar5 + 1;
    } while (iVar5 < 0x13);
    FUN_004282f0(0x18, uVar2);
    FUN_004282f0(0x19, uVar1);
    FUN_004287e0(0x19, 0);
    FUN_004282f0(0x1a, uVar1);
    FUN_004287e0(0x1a, 0x1800);
    iVar5 = 0x18;
    do
    {
        FUN_004287e0(iVar5, 0x8000);
        iVar5 = iVar5 + 1;
    } while (iVar5 < 0x1b);
    uVar1 = FUN_00446fb0(0x13);
    FUN_004282f0(0xa1, uVar1);
    FUN_004287e0(0xa1, 0x9200);
    uVar1 = FUN_00446fb0(0x14);
    FUN_004282f0(0xa2, uVar1);
    FUN_004287e0(0xa2, 0x9200);
    uVar1 = FUN_00446fb0(0x15);
    FUN_004282f0(0xa3, uVar1);
    FUN_004287e0(0xa3, 0x9200);
    uVar1 = FUN_00446fb0(0x5c);
    FUN_004282f0(0xa4, uVar1);
    FUN_004287e0(0xa1, 0x1200);
    uVar1 = FUN_00446fb0(0x5d);
    FUN_004282f0(0xa5, uVar1);
    FUN_004287e0(0xa2, 0x1200);
    uVar1 = FUN_00446fb0(0x5e);
    FUN_004282f0(0xa6, uVar1);
    FUN_004287e0(0xa3, 0x1200);
    uVar1 = FUN_00446fb0(0x2e);
    FUN_004282f0(0x1b, uVar1);
    FUN_004282f0(0x1e, uVar1);
    FUN_004287e0(0x1e, 4);
    if (1 < DAT_0050ca18)
    {
        FUN_004282f0(0x23, uVar1);
        FUN_004282f0(0x26, uVar1);
        FUN_004287e0(0x26, 4);
    }
    uVar1 = FUN_00446fb0(0x2f);
    FUN_004282f0(0x1c, uVar1);
    FUN_004282f0(0x1f, uVar1);
    FUN_004287e0(0x1f, 4);
    if (1 < DAT_0050ca18)
    {
        FUN_004282f0(0x24, uVar1);
        FUN_004282f0(0x27, uVar1);
        FUN_004287e0(0x27, 4);
    }
    uVar1 = FUN_00446fb0(0x30);
    FUN_004282f0(0x1d, uVar1);
    FUN_004282f0(0x20, uVar1);
    FUN_004287e0(0x20, 4);
    if (1 < DAT_0050ca18)
    {
        FUN_004282f0(0x25, uVar1);
        FUN_004282f0(0x28, uVar1);
        FUN_004287e0(0x28, 4);
    }
    uVar1 = FUN_00446fb0(0x31);
    FUN_004282f0(0x21, uVar1);
    FUN_004282f0(0x22, uVar1);
    if (1 < DAT_0050ca18)
    {
        FUN_004282f0(0x29, uVar1);
        FUN_004282f0(0x2a, uVar1);
    }
    iVar5 = 0;
    if (0 < *(int *)(param_3 + 0x1bc))
    {
        iVar6 = 0;
        do
        {
            uVar1 = FUN_00446fb0(*(undefined_32 *)(*(int *)(DAT_00e28960 + 0x18 + iVar6) + 0x2c));
            FUN_004282f0(iVar5 + 0x2b, uVar1);
            iVar5 = iVar5 + 1;
            iVar6 = iVar6 + 0x88;
        } while (iVar5 < *(int *)(param_3 + 0x1bc));
    }
    FUN_00464010(param_1, param_2);
    FUN_00463ff0(param_1, param_2);
    return;
}

void FUN_00464b90(int param_1, int *param_2, int param_3)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    undefined_32 uVar5;
    int iVar6;
    int iVar7;

    iVar3 = param_1;
    iVar4 = *(int *)(param_1 + 0x1ac);
    *(undefined_32 *)(param_1 + 0x1b8) = -1;
    if (iVar4 == 0)
    {
        if (*(int *)(param_1 + 0x1c0) == 0)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x19;
        }
        if (*(int *)(param_1 + 0x1c0) == 1)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x2d;
        }
    }
    if (iVar4 == 1)
    {
        iVar6 = *(int *)(param_1 + 0x1c0);
        if (iVar6 == 0)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x11;
        }
        if (iVar6 == 1)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x1e;
        }
        if (iVar6 == 2)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x1f;
        }
        if (iVar6 == 3)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x2e;
        }
    }
    if (iVar4 == 2)
    {
        iVar6 = *(int *)(param_1 + 0x1c0);
        if (iVar6 == 0)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x22;
        }
        if (iVar6 == 1)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x52;
        }
        if (iVar6 == 2)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x30;
        }
    }
    if (iVar4 == 3)
    {
        iVar6 = *(int *)(param_1 + 0x1c0);
        if (iVar6 == 0)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x24;
        }
        if (iVar6 == 1)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x26;
        }
        if (iVar6 == 2)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x28;
        }
    }
    if (iVar4 == 4)
    {
        iVar6 = *(int *)(param_1 + 0x1c0);
        if (iVar6 == 0)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x53;
        }
        if (iVar6 == 1)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x58;
        }
        if (iVar6 == 2)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x59;
        }
        if (iVar6 == 3)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x2f;
        }
    }
    if (iVar4 == 5)
    {
        iVar6 = *(int *)(param_1 + 0x1c0);
        if (iVar6 == 0)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x38;
        }
        if (iVar6 == 1)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x39;
        }
        if (iVar6 == 2)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x54;
        }
    }
    if (iVar4 == 6)
    {
        iVar6 = *(int *)(param_1 + 0x1c0);
        if (iVar6 == 0)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x29;
        }
        if (iVar6 == 1)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x2a;
        }
        if (iVar6 == 2)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x2b;
        }
    }
    if (iVar4 == 7)
    {
        iVar4 = *(int *)(param_1 + 0x1c0);
        if (iVar4 == 0)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x23;
        }
        if (iVar4 == 1)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x3b;
        }
        if (iVar4 == 2)
        {
            *(undefined_32 *)(param_1 + 0x1b8) = 0x3e;
        }
    }
    *(undefined_32 *)(param_1 + 0x130) = 0;
    if (*(int *)(param_1 + 0x1b8) < 0)
    {
        return;
    }
    iVar4 = get_buffer_index();
    uVar5 = FUN_004472e0(*(undefined_32 *)(param_1 + 0x1b8));
    *(undefined_32 *)(param_1 + 0x1a4) = uVar5;
    iVar6 = get_buffer_index();
    DAT_00e288b4 = DAT_00e288b4 + (iVar6 - iVar4);
    iVar4 = *(int *)(param_1 + 0x1c0);
    if (iVar4 == 0)
    {
        param_1 = *(int *)(param_3 + 0xc);
    }
    if (iVar4 == 1)
    {
        param_1 = *(int *)(param_3 + 0x10);
    }
    if (iVar4 == 2)
    {
        param_1 = *(int *)(param_3 + 0x14);
    }
    if (iVar4 == 3)
    {
        param_1 = *(int *)(param_3 + 0xc);
    }
    iVar4 = *(int *)(iVar3 + 0x1a4);
    if (iVar4 == 0)
    {
        return;
    }
    if (param_1 == 0)
    {
        return;
    }
    piVar1 = (int *)(iVar3 + 0x134);
    *(undefined_32 *)(iVar3 + 0x130) = 0;
    *piVar1 = iVar4;
    *(undefined_32 *)(iVar3 + 0x138) = 0;
    *(undefined_32 *)(iVar3 + 0x13c) = 0;
    *(undefined_32 *)(iVar3 + 0x140) = 0;
    *(undefined_32 *)(iVar3 + 0x154) = 0;
    *(undefined_32 *)(iVar3 + 0x158) = 0;
    *(undefined_32 *)(iVar3 + 0x15c) = 0;
    *(undefined_32 *)(iVar3 + 0x160) = 0;
    if (iVar4 != 0)
    {
        FUN_0044eef0(piVar1, 0);
    }
    FUN_0044eeb0(piVar1, iVar3 + 0x164, 0);
    param_3 = 0;
    if (param_2 != NULL)
    {
        iVar4 = *param_2;
        while (iVar4 != 0)
        {
            iVar4 = *param_2;
            if (*(int *)(iVar4 + 0x124) == param_1)
            {
                FUN_00426820(iVar4, 0x30);
                param_3 = iVar4;
            }
            piVar1 = param_2 + 1;
            param_2 = param_2 + 1;
            iVar4 = *piVar1;
        }
    }
    if (param_3 == 0)
    {
        *(undefined_32 *)(iVar3 + 0x138) = 1.0f;
    }
    else
    {
        *(float *)(iVar3 + 0x138) = ((float)*(int *)(*(int *)(iVar3 + 0x1a4) + 4) - 1.0) / *(float *)(param_3 + 0x108);
    }
    FUN_00428a60(5, 2, iVar3 + 0x164, 0);
    FUN_00428b10(5, param_1, 2);
    *(int *)(iVar3 + 0x1a8) = param_3;
    DAT_004c4a60 = 5.0f;
    DAT_004c4a5c = 5000.0f;
    iVar4 = 0;
    iVar6 = param_1;
    iVar7 = param_1;
    if (*(int *)(iVar3 + 0x1ac) == 0)
    {
        DAT_004c4a5c = 0x458ca000;
        iVar4 = 0x3e4;
        param_1 = 0xe5;
        iVar6 = 0xdc;
        iVar7 = 0xea;
    }
    if (*(int *)(iVar3 + 0x1ac) == 1)
    {
        DAT_004c4a5c = 0x462be000;
        iVar4 = 0x3e4;
        if (*(int *)(iVar3 + 0x1c0) == 3)
        {
            iVar6 = 0xad;
            iVar7 = 0xb9;
            param_1 = 0xc6;
        }
        else
        {
            iVar6 = 0xd2;
            iVar7 = 0xd7;
            param_1 = 0xe1;
        }
    }
    if (*(int *)(iVar3 + 0x1ac) == 2)
    {
        iVar2 = *(int *)(iVar3 + 0x1c0);
        if (iVar2 == 0)
        {
            DAT_004c4a5c = 0x455ac000;
        }
        else if (iVar2 == 1)
        {
            iVar6 = 0x78;
            DAT_004c4a5c = 0x455ac000;
            iVar4 = 0x3e4;
            iVar7 = 100;
            param_1 = 0x78;
        }
        else if (iVar2 == 2)
        {
            DAT_004c4a5c = 0x462be000;
        }
    }
    if (*(int *)(iVar3 + 0x1ac) == 3)
    {
        iVar7 = 0x81;
        iVar4 = 0x3e2;
        iVar6 = 0x9a;
        param_1 = 0x81;
        DAT_004c4a5c = 0x462be000;
    }
    if (*(int *)(iVar3 + 0x1ac) == 4)
    {
        iVar2 = *(int *)(iVar3 + 0x1c0);
        if (iVar2 == 3)
        {
            DAT_004c4a5c = 5000.0f;
        }
        else if (iVar2 == 0)
        {
            DAT_004c4a5c = 5000.0f;
            iVar4 = 0x3e4;
            iVar6 = 0xca;
            iVar7 = 0xb7;
            param_1 = 0xc3;
        }
        else
        {
            if (iVar2 == 1)
            {
                DAT_004c4a5c = 0x44960000;
                iVar4 = 0x3e0;
                iVar6 = 0x9b;
                iVar7 = 0x9a;
                param_1 = 0xa7;
            }
            else
            {
                if (iVar2 != 2)
                    goto LAB_004650a5;
                DAT_004c4a5c = 0x44bb8000;
                iVar4 = 0x3de;
                iVar6 = 0x5a;
                iVar7 = 0x36;
                param_1 = 0x28;
            }
            if (DAT_00e287e0 != 0)
            {
                FUN_00431a50(DAT_00e287e0, 2, 0xfffffffc, 0x10, 3);
            }
        }
    }
LAB_004650a5:
    if (*(int *)(iVar3 + 0x1ac) == 5)
    {
        iVar2 = *(int *)(iVar3 + 0x1c0);
        iVar6 = 0xbe;
        iVar7 = 0x37;
        param_1 = 10;
        if (iVar2 == 0)
        {
            DAT_004c4a5c = 0x45fa0000;
            iVar4 = 0x3de;
        }
        else
        {
            if (iVar2 == 1)
            {
                DAT_004c4a5c = 0x451c4000;
            }
            else
            {
                if (iVar2 != 2)
                    goto LAB_00465100;
                DAT_004c4a5c = 0x457a0000;
            }
            iVar4 = 0x3e4;
        }
    }
LAB_00465100:
    if (*(int *)(iVar3 + 0x1ac) == 6)
    {
        DAT_004c4a5c = 0x462be000;
    }
    if (*(int *)(iVar3 + 0x1ac) != 7)
        goto LAB_00465146;
    iVar3 = *(int *)(iVar3 + 0x1c0);
    if (iVar3 != 0)
    {
        if (iVar3 == 1)
        {
            DAT_004c4a5c = 0x451c4000;
            goto LAB_00465146;
        }
        if (iVar3 != 2)
            goto LAB_00465146;
    }
    DAT_004c4a5c = 0x45bb8000;
LAB_00465146:
    if (iVar4 == 0)
    {
        FUN_0044e0c0(0);
        DAT_00e996e0 = DAT_00e996e0 | 2;
        return;
    }
    FUN_0044e0c0(1);
    FUN_0044e0e0(iVar4, 1000, iVar6, iVar7, param_1, 0xff);
    FUN_00483a60(iVar6, iVar7, param_1);
    DAT_00e996e0 = DAT_00e996e0 | 2;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004651a0(void)

{
    undefined_32 *puVar1;
    int *piVar2;

    puVar1 = (undefined_32 *)models_load(0x92);
    FUN_00448bd0(puVar1);
    _DAT_00e277e0 = *puVar1;
    piVar2 = (int *)models_load(0x31);
    FUN_00448bd0(piVar2);
    _DAT_00e28964 = **(undefined_32 **)(*piVar2 + 0x18);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004651f0(int param_1)

{
    FUN_00447300(MAGIC('T', 'r', 'i', 'g'), 0x1e);
    FUN_00450db0(MAGIC('T', 'r', 'i', 'g'));
    _DAT_00e287f0 = FUN_0047ddc0(*(undefined_32 *)(param_1 + 0x1ac), *(undefined_32 *)(param_1 + 0x1c0),
                                 *(undefined_32 *)(param_1 + 0x30));
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00465230(void)

{
    undefined_32 *puVar1;
    undefined_8 *puVar2;
    int iVar3;

    FUN_00447300(MAGIC('T', 'o', 's', 's'), 0x10);
    FUN_00450db0(MAGIC('T', 'o', 's', 's'));
    puVar2 = &DAT_00e27260;
    iVar3 = 0;
    do
    {
        puVar1 = (undefined_32 *)models_load(0x13a);
        if (puVar1 == NULL)
        {
            *(undefined_32 *)((int)&DAT_00e28a20 + iVar3) = 0;
        }
        else
        {
            FUN_00431b20(puVar2, 0xd065);
            *(undefined_32 *)(puVar2 + 0x14) = 1;
            *(undefined_32 **)(puVar2 + 0x18) = (undefined_32 *)((int)&DAT_00e28820 + iVar3);
            *(undefined_32 *)((int)&DAT_00e28820 + iVar3) = *puVar1;
            *(undefined_8 **)((int)&DAT_00e28a20 + iVar3) = puVar2;
            if (puVar2 != NULL)
            {
                FUN_00431a50(puVar2, 2, 0xfffffffc, 0x10, 3);
            }
        }
        puVar2 = puVar2 + 0x58;
        iVar3 = iVar3 + 4;
    } while ((int)puVar2 < 0xe277e0);
    FUN_00431b20(&DAT_00e28740, 0x5064);
    _DAT_00e28754 = 0x10;
    _DAT_00e28758 = &DAT_00e28a20;
    _DAT_00e287f8 = &DAT_00e28740;
    FUN_0047bcd0(&DAT_00e28a20);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00465310(void)

{
    undefined_32 *puVar1;
    undefined_8 *puVar2;
    int iVar3;

    FUN_00447300(MAGIC('S', 'm', 'o', 'k'), 8);
    FUN_00450db0(MAGIC('S', 'm', 'o', 'k'));
    puVar2 = &DAT_00e278a0;
    iVar3 = 0;
    do
    {
        puVar1 = (undefined_32 *)models_load(0x93);
        if (puVar1 == NULL)
        {
            *(undefined_32 *)((int)&DAT_00e271a0 + iVar3) = 0;
        }
        else
        {
            FUN_00431b20(puVar2, 0xd065);
            *(undefined_32 *)(puVar2 + 0x14) = 1;
            *(undefined_32 **)(puVar2 + 0x18) = (undefined_32 *)((int)&DAT_00e288c0 + iVar3);
            *(undefined_32 *)((int)&DAT_00e288c0 + iVar3) = *puVar1;
            *(undefined_8 **)((int)&DAT_00e271a0 + iVar3) = puVar2;
            if (puVar2 != NULL)
            {
                FUN_00431a50(puVar2, 2, 0xfffffffc, 0x10, 3);
            }
        }
        puVar2 = puVar2 + 0x58;
        iVar3 = iVar3 + 4;
    } while ((int)puVar2 < 0xe28660);
    FUN_00431b20(&DAT_00e27180, 0x5064);
    _DAT_00e27194 = 0x28;
    _DAT_00e27198 = &DAT_00e271a0;
    _DAT_00e287fc = &DAT_00e27180;
    FUN_0046a5e0(&DAT_00e271a0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004653f0(void)

{
    undefined_32 uVar1;
    int *piVar2;

    _DAT_00e2880c = 0;
    uVar1 = models_load(0x93);
    FUN_00448bd0(uVar1);
    piVar2 = (int *)models_load(0x13e);
    if (piVar2 != NULL)
    {
        DAT_00e28764 = FUN_00448bd0(piVar2);
        DAT_00e28a00 = *piVar2;
        FUN_0046d610(DAT_00e28764);
        _DAT_00e2880c = DAT_00e28a00;
        if (DAT_00e28a00 != 0)
        {
            FUN_00431a50(DAT_00e28a00, 2, 0xfffffffc, 0x10, 3);
        }
        mat_set_identity(&DAT_00e289c0);
    }
    return;
}

void FUN_00465480(int *param_1)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    int local_c;
    int local_8;
    int local_4;

    iVar2 = *param_1;
    while (iVar2 != -1)
    {
        piVar1 = param_1 + 1;
        param_1 = param_1 + 1;
        iVar2 = *piVar1;
    }
    if (param_1[1] == MAGIC('D', 'a', 't', 'a'))
    {
        iVar2 = param_1[2];
        param_1 = param_1 + 3;
        iVar3 = 0;
        if (0 < iVar2)
        {
            do
            {
                if (*param_1 == 0x4c537472)
                {
                    local_c = param_1[1];
                    local_8 = param_1[2];
                    local_4 = param_1[3];
                    FUN_0042c490(iVar3, &local_c);
                    param_1 = param_1 + 4;
                }
                else
                {
                    param_1 = param_1 + 1;
                }
                iVar3 = iVar3 + 1;
            } while (iVar3 < iVar2);
        }
    }
    return;
}

undefined_32 FUN_00465500(void)

{
    return DAT_00e287ec;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00465510(int param_1)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 uVar3;
    int *piVar4;
    int *piVar5;
    int iVar6;
    uint uVar7;

    puVar2 = &DAT_00e287e0;
    MEMSET(iVar6, puVar2, 0, 0xf)
    FUN_00431b20(&DAT_00e28980, 0x5064);
    _DAT_00e28994 = 0xf;
    _DAT_00e28998 = &DAT_00e287e0;
    DAT_00e289a4 = get_buffer_index();
    FUN_004270c0();
    puVar2 = (undefined_32 *)models_load(*(undefined_32 *)(param_1 + 0x1b0));
    uVar3 = FUN_00448bd0(puVar2);
    DAT_00e287e0 = puVar2[2];
    DAT_00e287ec = *puVar2;
    if (DAT_0050ccf0 != 0)
    {
        DAT_0050cd08 = DAT_00e287e0;
    }
    FUN_00448d10(&DAT_00e289a0, &DAT_00e286d0, &DAT_00e288b0);
    iVar6 = get_buffer_index();
    DAT_00e289a4 = iVar6 - DAT_00e289a4;
    FUN_00465230(param_1);
    FUN_00465310(param_1);
    FUN_004653f0(param_1);
    FUN_00464b90(param_1, uVar3, puVar2);
    FUN_00465480(puVar2);
    if ((*(int *)(param_1 + 0x1ac) == 4) && (*(int *)(param_1 + 0x1c0) == 0))
    {
        piVar4 = (int *)models_load(0x129);
        FUN_00448bd0(piVar4);
        _DAT_00e287e8 = *piVar4;
        if (*piVar4 != 0)
        {
            FUN_00431a50(*piVar4, 2, 3, 0x10, 2);
        }
    }
    else
    {
        _DAT_00e287e8 = 0;
    }
    FUN_004651a0();
    piVar5 = (int *)models_load(0x72);
    iVar6 = 0;
    piVar4 = (int *)(param_1 + 0x10);
    _DAT_00e28804 = *piVar5;
    do
    {
        iVar1 = *(int *)(*(int *)(*piVar5 + 0x18) + iVar6);
        *piVar4 = iVar1;
        if (iVar1 != 0)
        {
            FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
        }
        iVar6 = iVar6 + 4;
        piVar4 = piVar4 + 1;
    } while (iVar6 < 0x18);
    piVar4 = (int *)models_load(0x136);
    FUN_00448bd0(piVar4);
    _DAT_00e28800 = *piVar4;
    if (_DAT_00e28800 != 0)
    {
        FUN_00431a50(_DAT_00e28800, 2, 0xfffffffc, 0x10, 3);
    }
    *(int *)(param_1 + 0x28) = *piVar4;
    piVar4 = (int *)models_load(0x47);
    DAT_00e28814 = *piVar4;
    if (DAT_00e28814 != 0)
    {
        FUN_00431a50(DAT_00e28814, 2, 0xfffffffc, 0x10, 3);
    }
    piVar4 = (int *)models_load(0x47);
    _DAT_00e28818 = *piVar4;
    if (_DAT_00e28818 != 0)
    {
        FUN_00431a50(_DAT_00e28818, 2, 0xfffffffc, 0x10, 3);
    }
    *(undefined_32 *)(param_1 + 0x30) = DAT_00e287ec;
    FUN_00431b20(&DAT_00e27800, 0x5064);
    DAT_00e27814 = 0;
    DAT_00e27818 = &DAT_00e286e0;
    _DAT_00e28808 = &DAT_00e27800;
    FUN_00431b20(&DAT_00e28660, 0x5064);
    DAT_00e28674 = 0;
    DAT_00e28678 = &DAT_00e28780;
    _DAT_00e287e4 = &DAT_00e28660;
    FUN_004651f0(param_1);
    FUN_00483fc0(&DAT_00e28980);
    iVar6 = *(int *)(param_1 + 0x1c0);
    uVar3 = 0x16;
    uVar7 = 0x10;
    if (iVar6 == 1)
    {
        uVar3 = 0x26;
        uVar7 = 0x20;
    }
    if (iVar6 == 2)
    {
        uVar3 = 0x46;
        uVar7 = 0x40;
    }
    if (iVar6 == 3)
    {
        uVar3 = 0x16;
        uVar7 = 0x10;
    }
    FUN_00483ff0(4, 0xffffff00);
    FUN_00483ff0(3, 0xffffff00);
    FUN_00483ff0(6, uVar3);
    FUN_00445640(5, uVar7 | 2);
    FUN_00426910(DAT_00e287ec, -1, uVar3, 0);
    return;
}

void FUN_00465820(int param_1, undefined_32 param_2)

{
    if (param_1 != 0)
    {
        *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + 1;
        *(undefined_32 *)(param_1 + 0x18) = param_2;
    }
    return;
}

void FUN_00465840(int param_1, int param_2, int param_3)

{
    float *pfVar1;
    float *pfVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int *piVar7;
    int local_30;
    int local_28;
    int local_24[4];
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar3 = param_2;
    local_24[0] = 3;
    local_24[2] = 3;
    local_14 = 3;
    local_c = 3;
    local_4 = 3;
    iVar5 = *(int *)(param_1 + 0x1bc);
    local_28 = 4;
    local_24[1] = 4;
    local_24[3] = 4;
    local_10 = 4;
    local_8 = 4;
    FUN_0044eeb0(param_1 + 0x34, param_2, 0);
    pfVar1 = (float *)(param_2 + 0x30);
    iVar4 = 4;
    iVar5 = 4 - iVar5;
    *pfVar1 = *pfVar1 - *(float *)(param_2 + 0x10) * 100.0;
    pfVar2 = (float *)(param_2 + 0x14);
    iVar6 = 0;
    param_2 = 0;
    local_30 = param_3;
    param_1 = 4;
    *(float *)(iVar3 + 0x34) = *(float *)(iVar3 + 0x34) - *pfVar2 * 100.0;
    *(float *)(iVar3 + 0x38) = *(float *)(iVar3 + 0x38) - *(float *)(iVar3 + 0x18) * 100.0;
    if (3 < param_3)
    {
        piVar7 = &local_28;
        do
        {
            piVar7 = piVar7 + 1;
            param_3 = param_3 - iVar4;
            iVar6 = iVar6 + 1;
            iVar4 = *piVar7;
            iVar5 = iVar5 + iVar4;
            param_1 = iVar4;
            param_2 = iVar6;
            local_30 = param_3;
        } while (iVar4 <= param_3);
    }
    if (0 < iVar5)
    {
        param_1 = param_1 - iVar5;
    }
    vec3f_multiply_add(pfVar1, pfVar1, (float)param_2 * -30.0, iVar3 + 0x10);
    vec3f_multiply_add(pfVar1, pfVar1, ((float)param_1 - 1.0) * 0.5 * -20.0 + (float)local_30 * 20.0, iVar3);
    return;
}

void FUN_00465980(int param_1, int param_2, undefined_32 param_3, int *param_4, undefined_32 param_5, int param_6,
                  undefined_32 param_7, undefined_32 param_8)

{
    uint *puVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    undefined_32 uVar5;
    undefined_8 *local_84;
    undefined_8 local_80[40];
    undefined_32 local_58;
    undefined_8 local_40[64];

    *(undefined_32 *)(param_2 + 0x58) = 0;
    *(undefined_32 *)(param_2 + 0x78) = 0;
    *(undefined_16 *)(param_2 + 0x5c) = 0xffff;
    *(undefined_32 *)(param_2 + 0x74) = 0;
    *(undefined_32 *)(param_2 + 0x60) = -1.0f;
    *(undefined_32 *)(param_2 + 100) = -1.0f;
    *(undefined_32 *)(param_2 + 0x68) = -1.0f;
    *(undefined_32 *)(param_2 + 0x6c) = -1.0f;
    *(undefined_32 *)(param_2 + 0x70) = -1.0f;
    *(undefined_32 *)(param_2 + 0x60) = 0;
    *(undefined_32 *)(param_2 + 0x7c) = 0;
    *(uint *)(param_2 + 8) = *(uint *)(param_2 + 8) & 0xfffffffc;
    iVar4 = FUN_00450d20(MAGIC('T', 'e', 's', 't'));
    *(int *)(param_2 + 0x84) = iVar4;
    *(int *)(iVar4 + 0x1e70) = param_2;
    if (param_4 == NULL)
    {
        if (param_6 != 0)
        {
            *(int *)(DAT_00e27818 + DAT_00e27814 * 4) = param_6;
            DAT_00e27814 = DAT_00e27814 + 1;
            FUN_00431a50(param_6, 2, 3, 0x10, 2);
            local_84 = NULL;
        }
    }
    else
    {
        *(int *)(DAT_00e27818 + DAT_00e27814 * 4) = *param_4;
        iVar3 = DAT_00e28674;
        DAT_00e27814 = DAT_00e27814 + 1;
        iVar2 = DAT_00e28674 * 0x58;
        local_84 = &DAT_00e28a80 + iVar2;
        FUN_00431b20(local_84, 0xd065);
        *(undefined_8 **)(DAT_00e28678 + iVar3 * 4) = local_84;
        *(undefined_32 *)(&DAT_00e28a94 + iVar2) = 1;
        *(undefined_8 **)(&DAT_00e28a98 + iVar2) = &DAT_00e28680 + iVar3 * 4;
        *(undefined_32 *)(&DAT_00e28a98 + iVar2) = *(undefined_32 *)(*param_4 + 0x18);
        mat_set_identity(local_80);
        local_58 = -1.0f;
        FUN_00431640(local_84, local_80);
        *(uint *)(&DAT_00e28a90 + iVar2) = *(uint *)(&DAT_00e28a90 + iVar2) | 1;
        DAT_00e28674 = DAT_00e28674 + 1;
        FUN_00465820(param_4[7], &DAT_00e277e0);
        FUN_00465820(param_4[9], &DAT_00e277e0);
        if (param_4[0x48] != 0)
        {
            FUN_00431a50(param_4[0x48], 2, 0xfffffffc, 0x10, 3);
        }
        if (param_4[0x49] != 0)
        {
            FUN_00431a50(param_4[0x49], 2, 0xfffffffc, 0x10, 3);
        }
        FUN_00465820(param_4[0x41], &DAT_00e28964);
        FUN_00465820(param_4[0x42], &DAT_00e28964);
    }
    FUN_00465840(param_1, local_40, *(undefined_32 *)(*(int *)(iVar4 + 0x1e70) + 0x14));
    uVar5 = FUN_0045d350(param_8);
    FUN_00475ad0(iVar4, *(undefined_32 *)(param_1 + 0x2c), param_4, *(undefined_32 *)(param_1 + 0x30),
                 (int)*(short *)(iVar4 + 4), local_40, param_3, *(undefined_32 *)(param_1 + 0x1bc), uVar5);
    *(undefined_8 **)(iVar4 + 0x1994) = local_84;
    *(int *)(iVar4 + 0x348) = param_6;
    *(undefined_32 *)(iVar4 + 0x34c) = param_7;
    if ((param_4 != NULL) && ((*(byte *)(iVar4 + 0x60) & 0x20) != 0))
    {
        *(uint *)(*param_4 + 0x10) = *(uint *)(*param_4 + 0x10) | 0xc;
        *(undefined_16 *)(*param_4 + 0xe) = *(undefined_16 *)(iVar4 + 0x300);
        if (DAT_0050ca18 < 2)
        {
            if (param_4[1] != 0)
            {
                puVar1 = (uint *)(param_4[1] + 0x10);
                *puVar1 = *puVar1 | 0x10;
            }
            if (param_4[2] != 0)
            {
                puVar1 = (uint *)(param_4[2] + 0x10);
                *puVar1 = *puVar1 | 0x10;
            }
            if (param_4[3] != 0)
            {
                puVar1 = (uint *)(param_4[3] + 0x10);
                *puVar1 = *puVar1 | 0x10;
            }
            if (param_4[4] != 0)
            {
                puVar1 = (uint *)(param_4[4] + 0x10);
                *puVar1 = *puVar1 | 0x10;
            }
            if (param_4[5] != 0)
            {
                puVar1 = (uint *)(param_4[5] + 0x10);
                *puVar1 = *puVar1 | 0x10;
            }
            if (param_4[0x47] != 0)
            {
                puVar1 = (uint *)(param_4[0x47] + 0x10);
                *puVar1 = *puVar1 | 0x10;
            }
            if (param_4[0x2a] != 0)
            {
                puVar1 = (uint *)(param_4[0x2a] + 0x10);
                *puVar1 = *puVar1 | 0x100;
            }
            if (param_4[0x2b] != 0)
            {
                puVar1 = (uint *)(param_4[0x2b] + 0x10);
                *puVar1 = *puVar1 | 0x100;
            }
            if (param_4[0x1c] != 0)
            {
                puVar1 = (uint *)(param_4[0x1c] + 0x10);
                *puVar1 = *puVar1 | 0x100;
            }
            if (param_4[0x1d] != 0)
            {
                puVar1 = (uint *)(param_4[0x1d] + 0x10);
                *puVar1 = *puVar1 | 0x100;
            }
        }
    }
    FUN_00483a40(*(undefined_32 *)(iVar4 + 0x300));
    if ((*(uint *)(iVar4 + 0x60) & 0x100) != 0)
    {
        FUN_00428a60(1, 1, iVar4 + 0x20, 0);
    }
    return;
}

void FUN_00465cb0(int param_1)

{
    int *piVar1;

    piVar1 = (int *)(param_1 + 0x34);
    *piVar1 = *(int *)(param_1 + 0x2c);
    *(undefined_32 *)(param_1 + 0x38) = 0;
    *(undefined_32 *)(param_1 + 0x3c) = 0;
    *(undefined_32 *)(param_1 + 0x40) = 0;
    *(undefined_32 *)(param_1 + 0x54) = 0;
    *(undefined_32 *)(param_1 + 0x58) = 0;
    *(undefined_32 *)(param_1 + 0x5c) = 0;
    *(undefined_32 *)(param_1 + 0x60) = 0;
    if (*(int *)(param_1 + 0x2c) != 0)
    {
        FUN_0044eef0(piVar1, 0);
    }
    FUN_0044eeb0(piVar1, param_1 + 100, 0);
    *(undefined_32 *)(param_1 + 0x38) = 1.8f;
    return;
}

void FUN_00465d00(int param_1)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;

    iVar1 = get_buffer_index();
    uVar2 = FUN_004472e0(*(undefined_32 *)(param_1 + 0x1b4));
    *(undefined_32 *)(param_1 + 0x2c) = uVar2;
    iVar3 = get_buffer_index();
    DAT_00e288b4 = DAT_00e288b4 + (iVar3 - iVar1);
    FUN_0047f6f0(*(undefined_32 *)(param_1 + 0x2c), *(undefined_32 *)(param_1 + 0x30));
    FUN_00465cb0(param_1);
    return;
}

void FUN_00465d50(int param_1)

{
    float *pfVar1;
    int iVar2;
    undefined_32 *puVar3;
    float local_ac;
    float local_a8;
    undefined_32 local_9c;
    undefined_32 local_98;
    float local_94;
    float local_90;
    float local_8c;
    float local_88;
    undefined_32 local_84;
    undefined_32 local_80;
    undefined_32 local_7c;
    undefined_32 local_78;
    undefined_32 local_74;
    undefined_32 local_70;
    undefined_32 local_6c;
    undefined_32 local_68;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    float local_54;
    undefined_32 local_50;
    float local_4c;
    float local_48;
    float local_40;
    float local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    float local_8;
    undefined_32 local_4;

    pfVar1 = (float *)(param_1 + 100);
    *(undefined_32 *)(param_1 + 0xa4) = *(undefined_32 *)(param_1 + 100);
    *(undefined_32 *)(param_1 + 0xa8) = *(undefined_32 *)(param_1 + 0x68);
    *(undefined_32 *)(param_1 + 0xac) = *(undefined_32 *)(param_1 + 0x6c);
    *(undefined_32 *)(param_1 + 0xb0) = *(undefined_32 *)(param_1 + 0x70);
    *(undefined_32 *)(param_1 + 0xb4) = *(undefined_32 *)(param_1 + 0x74);
    *(undefined_32 *)(param_1 + 0xb8) = *(undefined_32 *)(param_1 + 0x78);
    *(undefined_32 *)(param_1 + 0xbc) = *(undefined_32 *)(param_1 + 0x7c);
    *(undefined_32 *)(param_1 + 0xc0) = *(undefined_32 *)(param_1 + 0x80);
    *(undefined_32 *)(param_1 + 0xc4) = *(undefined_32 *)(param_1 + 0x84);
    *(undefined_32 *)(param_1 + 0xcc) = *(undefined_32 *)(param_1 + 0x8c);
    *(undefined_32 *)(param_1 + 200) = *(undefined_32 *)(param_1 + 0x88);
    *(undefined_32 *)(param_1 + 0xd8) = *(undefined_32 *)(param_1 + 0x98);
    *(undefined_32 *)(param_1 + 0xd0) = *(undefined_32 *)(param_1 + 0x90);
    *(undefined_32 *)(param_1 + 0xd4) = *(undefined_32 *)(param_1 + 0x94);
    *(undefined_32 *)(param_1 + 0xdc) = *(undefined_32 *)(param_1 + 0x9c);
    *(undefined_32 *)(param_1 + 0xe0) = *(undefined_32 *)(param_1 + 0xa0);
    iVar2 = FUN_004800c0(&local_40);
    if (iVar2 == 0)
    {
        FUN_00430b80(pfVar1, &local_ac);
        local_4c = *pfVar1;
        puVar3 = (undefined_32 *)(param_1 + 0x10);
        local_90 = local_4c * -10.0;
        local_ac = local_ac - local_4c * 25.0;
        local_94 = *(float *)(param_1 + 0x68) * -10.0;
        local_a8 = local_a8 - *(float *)(param_1 + 0x68) * 25.0;
        local_98 = 0;
        iVar2 = 6;
        local_9c = 0;
        do
        {
            FUN_00431710(*puVar3, &local_ac);
            local_ac = local_ac - local_90;
            puVar3 = puVar3 + 1;
            iVar2 = iVar2 + -1;
            local_a8 = local_a8 - local_94;
        } while (iVar2 != 0);
        local_8c = *pfVar1;
        local_88 = *(float *)(param_1 + 0x68);
        local_84 = *(undefined_32 *)(param_1 + 0x6c);
        local_80 = *(undefined_32 *)(param_1 + 0x70);
        local_7c = *(undefined_32 *)(param_1 + 0x74);
        local_78 = *(undefined_32 *)(param_1 + 0x78);
        local_74 = *(undefined_32 *)(param_1 + 0x7c);
        local_70 = *(undefined_32 *)(param_1 + 0x80);
        local_6c = *(undefined_32 *)(param_1 + 0x84);
        local_68 = *(undefined_32 *)(param_1 + 0x88);
        local_64 = *(undefined_32 *)(param_1 + 0x8c);
        local_60 = *(undefined_32 *)(param_1 + 0x90);
        local_5c = *(undefined_32 *)(param_1 + 0x94);
        local_58 = *(undefined_32 *)(param_1 + 0x98);
        local_50 = *(undefined_32 *)(param_1 + 0xa0);
        *(undefined_32 *)(param_1 + 0xe4) = *(undefined_32 *)(param_1 + 0xa4);
        *(undefined_32 *)(param_1 + 0xe8) = *(undefined_32 *)(param_1 + 0xa8);
        *(undefined_32 *)(param_1 + 0xec) = *(undefined_32 *)(param_1 + 0xac);
        *(undefined_32 *)(param_1 + 0xf0) = *(undefined_32 *)(param_1 + 0xb0);
        *(undefined_32 *)(param_1 + 0xf4) = *(undefined_32 *)(param_1 + 0xb4);
        *(undefined_32 *)(param_1 + 0xf8) = *(undefined_32 *)(param_1 + 0xb8);
        *(undefined_32 *)(param_1 + 0xfc) = *(undefined_32 *)(param_1 + 0xbc);
        *(undefined_32 *)(param_1 + 0x100) = *(undefined_32 *)(param_1 + 0xc0);
        *(undefined_32 *)(param_1 + 0x104) = *(undefined_32 *)(param_1 + 0xc4);
        *(undefined_32 *)(param_1 + 0x108) = *(undefined_32 *)(param_1 + 200);
        *(undefined_32 *)(param_1 + 0x10c) = *(undefined_32 *)(param_1 + 0xcc);
        *(undefined_32 *)(param_1 + 0x110) = *(undefined_32 *)(param_1 + 0xd0);
        *(undefined_32 *)(param_1 + 0x114) = *(undefined_32 *)(param_1 + 0xd4);
        *(undefined_32 *)(param_1 + 0x118) = *(undefined_32 *)(param_1 + 0xd8);
        local_8 = *(float *)(param_1 + 0x9c);
        *(undefined_32 *)(param_1 + 0x11c) = *(undefined_32 *)(param_1 + 0xdc);
        *(undefined_32 *)(param_1 + 0x120) = *(undefined_32 *)(param_1 + 0xe0);
    }
    else
    {
        *(undefined_32 *)(param_1 + 0xe8) = *(undefined_32 *)(param_1 + 0x68);
        *(float *)(param_1 + 0xe4) = *pfVar1;
        *(undefined_32 *)(param_1 + 0xf4) = *(undefined_32 *)(param_1 + 0x74);
        *(undefined_32 *)(param_1 + 0xec) = *(undefined_32 *)(param_1 + 0x6c);
        *(undefined_32 *)(param_1 + 0xf0) = *(undefined_32 *)(param_1 + 0x70);
        *(undefined_32 *)(param_1 + 0x100) = *(undefined_32 *)(param_1 + 0x80);
        *(undefined_32 *)(param_1 + 0xf8) = *(undefined_32 *)(param_1 + 0x78);
        *(undefined_32 *)(param_1 + 0xfc) = *(undefined_32 *)(param_1 + 0x7c);
        *(undefined_32 *)(param_1 + 0x10c) = *(undefined_32 *)(param_1 + 0x8c);
        *(undefined_32 *)(param_1 + 0x104) = *(undefined_32 *)(param_1 + 0x84);
        *(undefined_32 *)(param_1 + 0x108) = *(undefined_32 *)(param_1 + 0x88);
        *(undefined_32 *)(param_1 + 0x118) = *(undefined_32 *)(param_1 + 0x98);
        *(undefined_32 *)(param_1 + 0x110) = *(undefined_32 *)(param_1 + 0x90);
        *(undefined_32 *)(param_1 + 0x114) = *(undefined_32 *)(param_1 + 0x94);
        *(undefined_32 *)(param_1 + 0x11c) = *(undefined_32 *)(param_1 + 0x9c);
        *(undefined_32 *)(param_1 + 0x120) = *(undefined_32 *)(param_1 + 0xa0);
        *(undefined_32 *)(param_1 + 0x1c8) = 1;
        FUN_00430b80(pfVar1, &local_ac);
        local_48 = *(float *)(param_1 + 0x68);
        local_9c = 0;
        local_ac = local_ac - *pfVar1 * 10.0;
        local_98 = 0;
        puVar3 = (undefined_32 *)(param_1 + 0x10);
        iVar2 = 3;
        local_a8 = local_a8 - local_48 * 10.0;
        local_90 = *pfVar1 * -10.0;
        local_94 = local_48 * -10.0;
        do
        {
            FUN_00431710(*puVar3, &local_ac);
            local_ac = local_ac - local_90;
            puVar3 = puVar3 + 1;
            iVar2 = iVar2 + -1;
            local_a8 = local_a8 - local_94;
        } while (iVar2 != 0);
        FUN_00430b80(&local_40, &local_ac);
        local_90 = local_40 * -10.0;
        local_ac = local_ac - local_40 * 10.0;
        local_94 = local_3c * -10.0;
        local_a8 = local_a8 - local_3c * 10.0;
        puVar3 = (undefined_32 *)(param_1 + 0x1c);
        local_9c = 0;
        local_98 = 0;
        iVar2 = 3;
        do
        {
            FUN_00431710(*puVar3, &local_ac);
            local_ac = local_ac - local_90;
            puVar3 = puVar3 + 1;
            iVar2 = iVar2 + -1;
            local_a8 = local_a8 - local_94;
        } while (iVar2 != 0);
        local_8c = local_40;
        local_88 = local_3c;
        local_84 = local_38;
        local_80 = local_34;
        local_7c = local_30;
        local_78 = local_2c;
        local_74 = local_28;
        local_70 = local_24;
        local_6c = local_20;
        local_68 = local_1c;
        local_64 = local_18;
        local_60 = local_14;
        local_5c = local_10;
        local_58 = local_c;
        local_50 = local_4;
    }
    local_54 = local_8 - -22.0;
    FUN_00431390(&local_8c, 0x43340000, 0, 0, 1.0f, &local_8c);
    FUN_00431640(*(undefined_32 *)(param_1 + 0x28), &local_8c);
    FUN_0042b640(*(undefined_32 *)(param_1 + 0x28), -1, -1, 0, 0xff, 0, 0);
    if (*(int *)(param_1 + 0x28) != 0)
    {
        FUN_00431a50(*(int *)(param_1 + 0x28), 2, 3, 0x10, 2);
    }
    return;
}

void FUN_00466370(void)

{
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    local_c = 0x42800000;
    local_8 = 0x42800000;
    local_4 = 0x42800000;
    local_18 = 255.0f;
    local_14 = 255.0f;
    local_10 = 255.0f;
    local_24 = 0;
    local_20 = 0;
    local_1c = 0xc2c80000;
    FUN_00483840(-1, &local_c, &local_18, &local_24);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004663e0(int param_1, int param_2)

{
    undefined_32 uVar1;
    char cVar2;
    int iVar3;
    int iVar4;
    undefined_32 *puVar5;
    int *piVar6;
    int iVar7;
    undefined_8 *puVar8;
    int *piVar9;
    int **ppiVar10;
    int iVar11;
    undefined_32 *puVar12;
    int **ppiVar13;
    int *local_1ec;
    int local_1e8;
    undefined_32 local_1e4;
    undefined_32 local_1e0[19];
    undefined_8 auStack_194[4];
    int local_190[20];
    int aiStack_140[20];
    undefined_32 local_f0[20];
    int aiStack_a0[20];
    int local_50[20];

    DAT_00e27240 = get_buffer_index();
    FUN_00447300(MAGIC('T', 'e', 's', 't'), *(undefined_32 *)(param_1 + 0x1bc));
    FUN_00450db0(MAGIC('T', 'e', 's', 't'));
    iVar3 = get_buffer_index();
    DAT_00e27240 = iVar3 - DAT_00e27240;
    iVar3 = 0;
    puVar12 = &DAT_00e28860;
    MEMSET(iVar7, puVar12, 0, 0x14)
    iVar7 = 0;
    do
    {
        (&DAT_00e27840)[iVar3] = 0;
        iVar3 = iVar3 + 4;
    } while (iVar3 < 0x50);
    iVar3 = *(int *)(param_1 + 0x1bc);
    local_1e4 = 0;
    if (0 < iVar3)
    {
        ppiVar13 = (int **)(param_2 + 0x18);
        do
        {
            iVar4 = 0;
            if (0 < iVar3)
            {
                ppiVar10 = (int **)(param_2 + 0x18);
                do
                {
                    if ((iVar7 != iVar4) && (**ppiVar13 == **ppiVar10))
                    {
                        local_1e4 = 1;
                    }
                    iVar4 = iVar4 + 1;
                    ppiVar10 = ppiVar10 + 0x22;
                } while (iVar4 < iVar3);
            }
            iVar7 = iVar7 + 1;
            ppiVar13 = ppiVar13 + 0x22;
        } while (iVar7 < iVar3);
    }
    _DAT_0050ca1c = local_1e4;
    local_1e8 = 0;
    if (0 < *(int *)(param_1 + 0x1bc))
    {
        local_1ec = &DAT_00e28860;
        puVar12 = local_f0;
        piVar6 = (int *)(param_2 + 0x18);
        do
        {
            iVar3 = get_buffer_index();
            *local_1ec = iVar3;
            iVar3 = lookup_translation(*(undefined_32 *)(*piVar6 + 0x14));
            (&DAT_00e27840)[local_1e8 * 4] = *(undefined_8 *)(iVar3 + 2);
            iVar3 = lookup_translation(*(undefined_32 *)(*piVar6 + 0x14));
            (&DAT_00e27841)[local_1e8 * 4] = *(undefined_8 *)(iVar3 + 3);
            iVar7 = lookup_translation(*(undefined_32 *)(*piVar6 + 0x14));
            iVar3 = DAT_0050ca18;
            (&DAT_00e27842)[local_1e8 * 4] = *(undefined_8 *)(iVar7 + 4);
            (&DAT_00e27843)[local_1e8 * 4] = 0;
            cVar2 = '\x03';
            if (piVar6[-5] == MAGIC('L', 'o', 'c', 'l'))
            {
                cVar2 = (1 < iVar3) + '\x01';
            }
            if ((*(byte *)(param_1 + 8) & 0x20) == 0)
            {
                if (iVar3 == 0)
                {
                    cVar2 = '\x03';
                }
            }
            else
            {
                cVar2 = '\x01';
            }
            if ((cVar2 == '\x02') || (cVar2 == '\x01'))
            {
                iVar3 = *piVar6;
                local_1e0[local_1e8] = 0;
                *puVar12 = 0;
                iVar3 = models_load(*(undefined_32 *)(iVar3 + 4));
                aiStack_140[local_1e8] = iVar3;
                if (iVar3 == 0)
                {
                    *(int *)(param_1 + 0x1bc) = local_1e8;
                    DAT_0050ca2c = local_1e8;
                }
                else if ((cVar2 == '\x01') && (-1 < *(int *)(*piVar6 + 8)))
                {
                    iVar7 = models_load(*(int *)(*piVar6 + 8));
                    aiStack_a0[local_1e8] = iVar7;
                    if (iVar7 == 0)
                    {
                        *(int *)(param_1 + 0x1bc) = local_1e8;
                        DAT_0050ca2c = local_1e8;
                    }
                    else
                    {
                        FUN_00448c70(iVar3, iVar7);
                    }
                }
            }
            else if (cVar2 == '\x03')
            {
                aiStack_140[local_1e8] = 0;
                *puVar12 = 0;
                local_1e0[local_1e8] = 0;
                puVar5 = (undefined_32 *)models_load(*(undefined_32 *)(*piVar6 + 0xc));
                if (puVar5 != NULL)
                {
                    uVar1 = puVar5[1];
                    local_1e0[local_1e8] = *puVar5;
                    *puVar12 = uVar1;
                }
            }
            else if (cVar2 == '\x04')
            {
                iVar3 = *piVar6;
                aiStack_140[local_1e8] = 0;
                *puVar12 = 0;
                uVar1 = *(undefined_32 *)(iVar3 + 0x10);
                local_1e0[local_1e8] = 0;
                puVar5 = (undefined_32 *)models_load(uVar1);
                if (puVar5 != NULL)
                {
                    uVar1 = *puVar5;
                    *puVar12 = 0;
                    local_1e0[local_1e8] = uVar1;
                }
            }
            iVar3 = get_buffer_index();
            piVar6 = piVar6 + 0x22;
            puVar12 = puVar12 + 1;
            *local_1ec = iVar3 - *local_1ec;
            local_1e8 = local_1e8 + 1;
            local_1ec = local_1ec + 1;
        } while (local_1e8 < *(int *)(param_1 + 0x1bc));
    }
    iVar3 = *(int *)(param_1 + 0x1bc);
    if (0 < iVar3)
    {
        piVar6 = local_190;
        MEMSET(iVar7, piVar6, -1, iVar3)
    }
    iVar7 = 0;
    if (0 < iVar3)
    {
        do
        {
            iVar3 = *(int *)(param_1 + 0x1bc);
            rand();
            iVar4 = __ftol();
            iVar11 = -1;
            if (-1 < iVar4)
            {
                puVar8 = auStack_194;
                do
                {
                    piVar6 = (int *)(puVar8 + 4);
                    puVar8 = puVar8 + 4;
                    iVar11 = iVar11 + 1;
                    if (*piVar6 == -1)
                    {
                        iVar4 = iVar4 + -1;
                    }
                } while (-1 < iVar4);
            }
            local_190[iVar11] = iVar7;
            iVar7 = iVar7 + 1;
        } while (iVar7 < iVar3);
    }
    iVar3 = *(int *)(param_1 + 0x1bc);
    iVar7 = 1;
    if (0 < iVar3)
    {
        piVar9 = local_50;
        piVar6 = (int *)(param_2 + 4);
        iVar4 = iVar3;
        do
        {
            if (((*(byte *)(piVar6 + 1) & 0x20) == 0) && (*piVar6 != MAGIC('L', 'o', 'c', 'l')))
            {
                *piVar9 = iVar7;
                iVar7 = iVar7 + 1;
            }
            else
            {
                *piVar9 = -1;
            }
            piVar6 = piVar6 + 0x22;
            piVar9 = piVar9 + 1;
            iVar4 = iVar4 + -1;
        } while (iVar4 != 0);
    }
    iVar7 = 0;
    if (0 < iVar3)
    {
        piVar6 = local_190;
        do
        {
            iVar3 = *piVar6;
            FUN_00465980(param_1, param_2 + iVar3 * 0x88, local_50[iVar3], aiStack_140[iVar3], aiStack_a0[iVar3],
                         local_1e0[iVar3], local_f0[iVar3], local_1e4);
            iVar7 = iVar7 + 1;
            piVar6 = piVar6 + 1;
        } while (iVar7 < *(int *)(param_1 + 0x1bc));
    }
    return;
}

void FUN_004667e0(int param_1)

{
    float fVar1;
    float local_100[4];
    undefined_32 local_f0;
    undefined_32 local_ec;
    undefined_32 local_e8;
    undefined_32 local_e4;
    undefined_32 local_e0;
    undefined_32 local_dc;
    undefined_32 local_d8;
    undefined_32 local_d4;
    undefined_32 local_d0;
    undefined_32 local_cc;
    undefined_32 local_c8;
    undefined_32 local_c4;
    undefined_32 local_c0;
    undefined_32 local_bc;
    undefined_32 local_b8;
    undefined_32 local_b4;
    undefined_32 local_b0;
    undefined_32 local_ac;
    undefined_32 local_a8;
    undefined_32 local_a4;
    undefined_32 local_a0;
    undefined_32 local_9c;
    undefined_32 local_98;
    undefined_32 local_94;
    undefined_32 local_90;
    undefined_32 local_8c;
    undefined_32 local_88;
    undefined_32 local_84;
    undefined_32 local_80;
    undefined_32 local_7c;
    undefined_32 local_78;
    undefined_32 local_74;
    undefined_32 local_70;
    undefined_32 local_6c;
    undefined_32 local_68;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    DAT_004c7084 = -1;
    DAT_0050cb58 = 0;
    local_c = 0x42040000;
    local_8 = 0;
    local_100[0] = 8.64;
    local_100[1] = 20.0;
    local_100[2] = 11.2;
    local_100[3] = 38.0;
    local_f0 = 0;
    local_ec = 0;
    local_e8 = 0;
    local_e4 = 0;
    local_e0 = 0x410c8b44;
    local_dc = 0x420c0000;
    local_d8 = 0x411b3334;
    local_d4 = 0x42180000;
    local_d0 = 0x412ccccd;
    local_cc = 0x42180000;
    local_c8 = 0x4135999a;
    local_c4 = 0x42000000;
    local_c0 = 0x410c6666;
    local_bc = 0x41d00000;
    local_b8 = 0x411b3334;
    local_b4 = 0x420c0000;
    local_b0 = 0x411fdb23;
    local_ac = 40.0f;
    local_a8 = 0;
    local_a4 = 0;
    local_a0 = 0x411eecc0;
    local_9c = 0x42100000;
    local_98 = 0x412d999a;
    local_94 = 0x420c0000;
    local_90 = 0x4124cccd;
    local_8c = 0x420c0000;
    local_88 = 0;
    local_84 = 0;
    local_80 = 0x4120a1cb;
    local_7c = 0x42140000;
    local_78 = 10.0f;
    local_74 = 0x42080000;
    local_70 = 0x4120cccd;
    local_6c = 0x420c0000;
    local_68 = 0x41273333;
    local_64 = 0x41d80000;
    local_60 = 0x41075c28;
    local_5c = 0x41b80000;
    local_58 = 0x41139999;
    local_54 = 40.0f;
    local_50 = 0x411b3334;
    local_4c = 0x420c0000;
    local_48 = 0;
    local_44 = 0;
    local_40 = 0x410cd4fd;
    local_3c = 0x41c80000;
    local_38 = 0x41266666;
    local_34 = 30.0f;
    local_30 = 0x4129999a;
    local_2c = 0x42040000;
    local_28 = 0;
    local_24 = 0;
    local_20 = 0x410dd70a;
    local_1c = 0x42000000;
    local_18 = 0x411f147b;
    local_14 = 30.0f;
    local_10 = 0x4121999a;
    local_4 = 0;
    DAT_004c707c = local_100[(*(int *)(param_1 + 0x1c0) + *(int *)(param_1 + 0x1ac) * 4) * 2] * 0.1;
    DAT_004c7080 = local_100[(*(int *)(param_1 + 0x1c0) + *(int *)(param_1 + 0x1ac) * 4) * 2 + 1];
    if ((*(int *)(param_1 + 0x1ac) == 1) && (*(int *)(param_1 + 0x1c0) != 3))
    {
        DAT_004c7084 = 1;
        DAT_0050cb58 = (uint)(*(int *)(param_1 + 0x1c0) == 0);
        if (*(int *)(param_1 + 0x1c0) == 1)
        {
            DAT_0050cb58 = 2;
        }
        if (*(int *)(param_1 + 0x1c0) == 2)
        {
            DAT_0050cb58 = 3;
        }
    }
    if (*(int *)(param_1 + 0x1ac) == 3)
    {
        if (*(int *)(param_1 + 0x1c0) == 1)
        {
            DAT_004c7084 = 6;
        }
        if (*(int *)(param_1 + 0x1c0) == 2)
        {
            DAT_004c7084 = 5;
        }
    }
    if ((*(int *)(param_1 + 0x1ac) == 4) && (*(int *)(param_1 + 0x1c0) != 3))
    {
        if (*(int *)(param_1 + 0x1c0) == 0)
        {
            DAT_004c7084 = 2;
        }
        if (*(int *)(param_1 + 0x1c0) == 1)
        {
            DAT_004c7084 = 3;
        }
        if (*(int *)(param_1 + 0x1c0) == 2)
        {
            DAT_004c7084 = 4;
        }
    }
    if (*(int *)(param_1 + 0x1c4) == -1)
    {
        fVar1 = 0.9;
    }
    else
    {
        if (*(int *)(param_1 + 0x1c4) != 1)
            goto LAB_00466bb2;
        fVar1 = 1.1;
    }
    DAT_004c707c = DAT_004c707c * fVar1;
LAB_00466bb2:
    if ((*(byte *)(param_1 + 8) & 0x20) != 0)
    {
        DAT_004c7080 = 2.0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00466bd0(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;
    short *psVar4;
    int iVar5;
    int *piVar6;
    short sVar7;
    int iVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    int iVar12;
    int iVar13;

    iVar11 = 0;
    DAT_0050c530 = 0;
    sVar7 = 0;
    psVar4 = &DAT_0050c9d0;
    do
    {
        *psVar4 = sVar7;
        psVar4 = psVar4 + 1;
        sVar7 = sVar7 + 1;
    } while ((int)psVar4 < 0x50c9f8);
    FUN_00445aa0(1);
    DAT_00e289a8 = get_buffer_index();
    DAT_00e288b4 = 0;
    DAT_0050ca2c = 0;
    FUN_00426910();
    FUN_004258e0();
    FUN_0042d470();
    FUN_0042c460();
    FUN_0042c3e0();
    FUN_0042c400();
    iVar9 = 0;
    iVar12 = 0;
    iVar8 = 0;
    *(undefined_32 *)(param_1 + 0x130) = 0;
    DAT_00e28960 = param_2;
    DAT_00e2899c = 0;
    DAT_00e27820 = 0;
    DAT_00e2781c = 0;
    DAT_00e27890 = 0;
    DAT_0050ca18 = 0;
    iVar5 = param_2;
    if (0 < *(int *)(param_1 + 0x1bc))
    {
        do
        {
            iVar10 = iVar9;
            iVar13 = iVar12;
            iVar1 = DAT_00e2781c;
            iVar2 = DAT_00e27820;
            iVar3 = DAT_00e2899c;
            if ((((*(int *)(iVar5 + 4) == MAGIC('L', 'o', 'c', 'l'))
                  && (DAT_0050ca18 = DAT_0050ca18 + 1, iVar10 = iVar5, iVar3 = iVar5, iVar9 != 0))
                 && (iVar10 = iVar9, iVar2 = iVar5, iVar3 = DAT_00e2899c, DAT_00e27820 != 0))
                && ((iVar13 = iVar5, iVar1 = iVar5, iVar2 = DAT_00e27820,
                     iVar12 != 0 && (iVar13 = iVar12, iVar1 = DAT_00e2781c, iVar11 == 0))))
            {
                iVar11 = iVar5;
                DAT_00e27890 = iVar5;
            }
            DAT_00e2899c = iVar3;
            DAT_00e27820 = iVar2;
            DAT_00e2781c = iVar1;
            iVar8 = iVar8 + 1;
            iVar5 = iVar5 + 0x88;
            iVar9 = iVar10;
            iVar12 = iVar13;
        } while (iVar8 < *(int *)(param_1 + 0x1bc));
    }
    DAT_0050ccf8 = 0;
    DAT_0050cd00 = 0;
    DAT_0050ccfc = 0;
    DAT_0050cd04 = 0;
    DAT_0050ccf0 = 0;
    DAT_0050ca14 = 0;
    if (1 < DAT_0050ca18)
    {
        _DAT_004b91c8 = 0;
        DAT_0050ccf0 = 1;
        if (*(int *)(param_1 + 0x1ac) == 6)
        {
            DAT_0050ca14 = 1;
        }
    }
    if ((*(int *)(param_1 + 0x1ac) == 3) && (*(int *)(param_1 + 0x1c0) == 2))
    {
        DAT_0050cb40 = 1;
    }
    else if ((*(int *)(param_1 + 0x1ac) != 1) || (DAT_0050cb40 = 2, *(int *)(param_1 + 0x1c0) != 0))
    {
        DAT_0050cb40 = 0;
    }
    FUN_00465510(param_1);
    FUN_00464630(*(undefined_32 *)(param_1 + 0x1ac), *(undefined_32 *)(param_1 + 0x1c0), param_1);
    FUN_00465d00(param_1);
    FUN_00465d50(param_1);
    FUN_00466370(param_1);
    FUN_004667e0(param_1);
    FUN_004663e0(param_1, param_2);
    FUN_00427d70();
    iVar11 = 0;
    do
    {
        FUN_004276a0(iVar11, 0xff0000);
        iVar11 = iVar11 + 1;
    } while (iVar11 < 0x14);
    DAT_00e28a60 = get_buffer_index();
    _DAT_00e27894 = FUN_00445bf0();
    _DAT_00e2875c = DAT_00e28a60 - DAT_00e289a8;
    _DAT_00e28760 = (0x400000 - _DAT_00e2875c) - _DAT_00e27894;
    piVar6 = &DAT_00e28860;
    do
    {
        iVar11 = *piVar6;
        piVar6 = piVar6 + 1;
        _DAT_00e2875c = _DAT_00e2875c - iVar11;
    } while ((int)piVar6 < 0xe288b0);
    _DAT_00e2875c = _DAT_00e2875c - (DAT_00e27240 + DAT_00e288b4 + DAT_00e289a4);
    FUN_00445b90();
    return;
}

void FUN_00466e40(undefined_32 param_1, byte param_2)

{
    undefined_32 uVar1;
    undefined_32 uVar2;

    if ((param_2 & 4) == 0)
    {
        DAT_00e996e0 = DAT_00e996e0 & 0xfd;
        if (DAT_00e287e0 == 0)
            goto LAB_00466e80;
        uVar2 = 2;
        uVar1 = 3;
    }
    else
    {
        DAT_00e996e0 = DAT_00e996e0 | 2;
        if (DAT_00e287e0 == 0)
            goto LAB_00466e80;
        uVar2 = 3;
        uVar1 = 0xfffffffc;
    }
    FUN_00431a50(DAT_00e287e0, 2, uVar1, 0x10, uVar2);
LAB_00466e80:
    if ((((DAT_0050c048 & 0x200) != 0) && (0 < DAT_0050c040)) && ((DAT_00e98e90 & 0x1100) == 0x1100))
    {
        DAT_00e996e0 = DAT_00e996e0 | 2;
        FUN_00483a60(0, 0, 0);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00466ec0(float param_1, undefined_32 param_2)

{
    int *piVar1;
    float fVar2;
    bool bVar3;
    int iVar4;
    int iVar5;
    int *piVar6;
    int iVar7;
    int iVar8;
    undefined_32 uVar9;
    float10 fVar10;
    undefined_32 uVar11;
    undefined_32 uVar12;
    undefined_32 uVar13;
    undefined_32 uVar14;
    undefined_32 uVar15;
    undefined_32 local_2c;
    undefined_32 local_28;
    float local_24;
    float local_20;
    float local_1c;
    int local_18;
    int local_14;
    undefined_32 local_10;
    float local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar4 = (int)param_1;
    uVar9 = 1;
    fVar2 = *(float *)((int)param_1 + 0x78);
    iVar8 = 5;
    bVar3 = false;
    local_1c = 0.1;
    local_20 = 0.1;
    local_24 = 0.2;
    local_28 = 0.2f;
    local_2c = 0.2f;
    local_18 = 1;
    local_10 = 5;
    if (*(int *)((int)param_1 + 0xc) == -1)
    {
        return;
    }
    local_14 = *(int *)((int)param_1 + 0x14);
    *(undefined_32 *)((int)param_1 + 0x14) = param_2;
    *(undefined_32 *)((int)param_1 + 0x18) = 0;
    if (*(int *)((int)param_1 + 8) == 6)
    {
        return;
    }
    param_1 = fVar2;
    if (fVar2 < 0.0)
    {
        param_1 = -fVar2;
    }
    FUN_00468d00(iVar4);
    iVar5 = **(int **)(iVar4 + 0x34);
    if (iVar5 != 0)
    {
        iVar7 = 0;
        do
        {
            *(uint *)(iVar5 + 0x100) = *(uint *)(iVar5 + 0x100) | 0x10000000;
            iVar7 = iVar7 + 4;
            iVar5 = *(int *)(iVar7 + *(int *)(iVar4 + 0x34));
        } while (iVar5 != 0);
    }
    switch (*(undefined_32 *)(iVar4 + 0x14))
    {
    case 0:
        iVar5 = 0;
        *(undefined_32 *)(iVar4 + 0x78) = 0;
        iVar8 = **(int **)(iVar4 + 0x34);
        while (iVar8 != 0)
        {
            iVar5 = iVar5 + 4;
            *(uint *)(iVar8 + 0x100) = *(uint *)(iVar8 + 0x100) & 0xefffffff;
            iVar8 = *(int *)(iVar5 + *(int *)(iVar4 + 0x34));
        }
        break;
    case 1:
        uVar9 = 0;
        rand();
        uVar11 = __ftol();
        switch (uVar11)
        {
        case 0:
            *(undefined_32 *)(iVar4 + 0x88) = 0x1b;
            break;
        case 1:
            *(undefined_32 *)(iVar4 + 0x88) = 0x1c;
            break;
        case 2:
            *(undefined_32 *)(iVar4 + 0x88) = 0xf;
            break;
        case 3:
            *(undefined_32 *)(iVar4 + 0x88) = 0x19;
            break;
        default:
            *(undefined_32 *)(iVar4 + 0x88) = 0x1a;
        }
        break;
    case 2:
    case 0x21:
        *(undefined_32 *)(iVar4 + 0x88) = 0xf;
        uVar9 = 0;
        break;
    case 4:
    case 5:
        *(undefined_32 *)(iVar4 + 0x88) = 0x10;
        uVar9 = 0;
        break;
    case 6:
        uVar9 = 0;
        *(undefined_32 *)(iVar4 + 0x88) = 0xb;
        if (local_14 == 6)
        {
            local_28 = 0;
        }
        break;
    case 7:
        *(undefined_32 *)(iVar4 + 0x88) = 0x13;
        uVar9 = 0;
        break;
    case 8:
        iVar8 = rand();
        if (0.3 <= (float)iVar8 * 4.656613e-10)
        {
            uVar11 = 0x32;
        }
        else
        {
            uVar11 = 0x31;
        }
        FUN_00426c80(uVar11, 6, 0.25f, 0.5f, 0);
        *(undefined_32 *)(iVar4 + 0x88) = 0x14;
        local_28 = 0;
        break;
    case 9:
        *(undefined_32 *)(iVar4 + 0x88) = 0x15;
        local_28 = 0;
        uVar9 = 0;
        break;
    case 10:
        goto switchD_00466f94_caseD_a;
    case 0xb:
        *(undefined_32 *)(iVar4 + 0x88) = 9;
        local_28 = 0;
        local_2c = 0;
        break;
    case 0xc:
        *(undefined_32 *)(iVar4 + 0x88) = 10;
        local_28 = 0;
        uVar9 = 0;
        break;
    case 0xd:
    case 0x36:
    case 0x3b:
    case 0x40:
        *(undefined_32 *)(iVar4 + 0x88) = 3;
        uVar9 = 0;
        break;
    case 0xe:
        local_28 = 0;
        *(undefined_32 *)(iVar4 + 0x88) = 4;
        iVar8 = rand();
        *(float *)(iVar4 + 0x1c) = (float)iVar8 * 4.656613e-10 * 4.0 - -8.0;
        break;
    case 0xf:
        uVar9 = 0;
        *(undefined_32 *)(iVar4 + 0x88) = 5;
        local_28 = 0;
        break;
    case 0x10:
        uVar9 = 0;
        *(undefined_32 *)(iVar4 + 0x88) = 0;
        break;
    case 0x11:
        *(undefined_32 *)(iVar4 + 0x88) = 5;
        iVar8 = FUN_00427670(0, 0x80000000);
        if (iVar8 != 0)
            break;
        if ((DAT_00e2a67c == 4) || (DAT_00e2a67c == 7))
        {
            iVar8 = rand();
            if (0.15 <= (float)iVar8 * 4.656613e-10)
                break;
            iVar8 = rand();
            if (0.998 < (float)iVar8 * 4.656613e-10)
            {
                uVar15 = 6;
                uVar14 = 9;
                uVar13 = 6;
                uVar12 = 9;
                uVar11 = 6;
            LAB_0046745b:
                FUN_00427590(0, (int)DAT_00e35a84, uVar11, uVar12, uVar13, uVar14, uVar15, 0);
                break;
            }
            uVar15 = 8;
            uVar14 = 0xe;
            uVar13 = 0x12;
            uVar12 = 5;
            uVar11 = 1;
        }
        else
        {
            if (DAT_00e2a67c != 8)
                break;
            iVar8 = rand();
            if (0.05 <= (float)iVar8 * 4.656613e-10)
            {
                iVar8 = rand();
                if ((float)iVar8 * 4.656613e-10 < 0.001)
                {
                    FUN_00427590(0, (int)DAT_00e35a84, 6, 9, 6, 9, 6, 0);
                }
                break;
            }
            iVar8 = rand();
            if (0.5 <= (float)iVar8 * 4.656613e-10)
            {
                uVar15 = 0xc;
                uVar14 = 3;
                uVar13 = 5;
                uVar12 = 7;
                uVar11 = 8;
                goto LAB_0046745b;
            }
            uVar15 = 0xb;
            uVar14 = 1;
            uVar13 = 5;
            uVar12 = 7;
            uVar11 = 0xc;
        }
        FUN_00427590(0, (int)DAT_00e35a84, uVar11, uVar12, uVar13, uVar14, uVar15, 0);
        break;
    case 0x12:
        if ((*(float *)(iVar4 + 0x50) == _DAT_004c403c) && (*(float *)(iVar4 + 0x54) == _DAT_004c4040))
        {
            iVar8 = 2;
            bVar3 = true;
            local_10 = 2;
        }
        rand();
        iVar5 = __ftol();
        if (iVar5 == *(int *)(iVar4 + 0xa4))
        {
            iVar5 = iVar5 + 1;
        }
        if (iVar8 <= iVar5)
        {
            iVar5 = 0;
        }
        *(int *)(iVar4 + 0xa4) = iVar5;
        switch (iVar5)
        {
        case 0:
            if (bVar3)
            {
                *(undefined_32 *)(iVar4 + 0x88) = 4;
                uVar9 = 0;
            }
            else
            {
                *(undefined_32 *)(iVar4 + 0x88) = 3;
                uVar9 = 0;
            }
            break;
        case 1:
            if (!bVar3)
            {
                *(undefined_32 *)(iVar4 + 0x88) = 6;
                uVar9 = 0;
                break;
            }
        default:
        switchD_00466f94_caseD_a:
            *(undefined_32 *)(iVar4 + 0x88) = 8;
            uVar9 = 0;
            break;
        case 2:
            *(undefined_32 *)(iVar4 + 0x88) = 7;
            uVar9 = 0;
            break;
        case 3:
            *(undefined_32 *)(iVar4 + 0x88) = 4;
            uVar9 = 0;
        }
        break;
    case 0x13:
        local_2c = 0;
        if (*(int *)(iVar4 + 0x88) == 1)
        {
            local_18 = 0;
        }
        *(undefined_32 *)(iVar4 + 0x88) = 1;
        break;
    case 0x14:
        vec3f_sub(&local_c, iVar4 + 0x50, iVar4 + 0x44);
        local_4 = 0;
        if (*(int *)(iVar4 + 0xa0) == 0)
        {
            fVar10 = (float10)arctan2(-local_c, local_8);
        }
        else
        {
            fVar10 = (float10) * (float *)(iVar4 + 0x6c);
        }
        fVar10 = fVar10 - (float10) * (float *)(iVar4 + 0x68);
        if (fVar10 < (float10)-180.0)
        {
            fVar10 = fVar10 - (float10)-360.0;
        }
        if ((float10)180.0 < fVar10)
        {
            fVar10 = fVar10 - (float10)360.0;
        }
        *(undefined_32 *)(iVar4 + 0x88) = 1;
        if (((float10)5.0 < fVar10) || (fVar10 < (float10)-5.0))
        {
            if (((float10)85.0 < fVar10) && (fVar10 < (float10)175.0))
            {
                *(undefined_32 *)(iVar4 + 0x88) = 0xb;
                uVar9 = 0;
            }
            if ((fVar10 < (float10)-85.0) && ((float10)-175.0 < fVar10))
            {
                *(undefined_32 *)(iVar4 + 0x88) = 0xb;
                uVar9 = 0;
                param_1 = -1.0;
            }
            if ((float10)175.0 < fVar10)
            {
                *(undefined_32 *)(iVar4 + 0x88) = 0xc;
                uVar9 = 0;
            }
            else if (fVar10 < (float10)-175.0)
            {
                *(undefined_32 *)(iVar4 + 0x88) = 0xc;
                uVar9 = 0;
            }
        }
        local_2c = 0;
        if ((local_14 == 0x13) && (*(int *)(iVar4 + 0x88) == 1))
        {
            local_18 = 0;
        }
        break;
    case 0x18:
        *(undefined_32 *)(iVar4 + 0x88) = 9;
        break;
    case 0x19:
        iVar8 = rand();
        if (0.75 <= (float)iVar8 * 4.656613e-10)
        {
            FUN_00427590(0, (int)DAT_00e35a84, 2, 2, 2, 2, 2, 0);
        }
        else
        {
            FUN_00467c80(10, 0xb, 0xc, 0xd, 0x12);
        }
        *(undefined_32 *)(iVar4 + 0x88) = 9;
        uVar9 = 0;
        iVar8 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), 0x15);
        if (*(int *)(iVar8 + 0x14) == 0x20)
        {
            FUN_00466ec0(iVar8, 0x25);
        }
        else if (*(int *)(iVar8 + 0x14) == 0x1d)
        {
            FUN_00466ec0(iVar8, 0x23);
        }
        break;
    case 0x1a:
        iVar8 = rand();
        if (0.75 <= (float)iVar8 * 4.656613e-10)
        {
            FUN_00427590(0, (int)DAT_00e35a84, 3, 3, 3, 5, 5, 0);
        }
        else
        {
            FUN_00467c80(2, 0x1f, 7, 8, 9);
        }
        *(undefined_32 *)(iVar4 + 0x88) = 10;
        uVar9 = 0;
        iVar8 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), 0x15);
        if (*(int *)(iVar8 + 0x14) == 0x20)
        {
            FUN_00466ec0(iVar8, 0x26);
        }
        else if (*(int *)(iVar8 + 0x14) == 0x1d)
        {
            FUN_00466ec0(iVar8, 0x24);
        }
        break;
    case 0x1b:
        piVar6 = *(int **)(iVar4 + 0x34);
        *(undefined_32 *)(iVar4 + 0x88) = 0xd;
        iVar8 = *piVar6;
        while (iVar8 != 0)
        {
            piVar1 = piVar6 + 1;
            piVar6 = piVar6 + 1;
            iVar8 = *piVar1;
        }
        break;
    case 0x1c:
        *(undefined_32 *)(iVar4 + 0x88) = 0xd;
        break;
    case 0x1d:
        iVar8 = rand();
        if (0.5 <= (float)iVar8 * 4.656613e-10)
        {
            iVar8 = rand();
            if (0.5 <= (float)iVar8 * 4.656613e-10)
            {
                iVar8 = rand();
                if (((float)iVar8 * 4.656613e-10 < 0.8) || (DAT_00e35a84 == '\x02'))
                {
                    uVar15 = 0x2b;
                    uVar14 = 0x29;
                    uVar13 = 0x13;
                    uVar12 = 0x2e;
                    uVar11 = 0x18;
                }
                else
                {
                    uVar15 = 0x20;
                    uVar14 = 0x19;
                    uVar13 = 0x2c;
                    uVar12 = 0x20;
                    uVar11 = 0x19;
                }
            }
            else
            {
                uVar15 = 0x27;
                uVar14 = 0x26;
                uVar13 = 0x25;
                uVar12 = 0x24;
                uVar11 = 0x23;
            }
        }
        else
        {
            uVar15 = 0x2b;
            uVar14 = 0x22;
            uVar13 = 0x32;
            uVar12 = 0x31;
            uVar11 = 0x30;
        }
        FUN_00467c80(uVar11, uVar12, uVar13, uVar14, uVar15);
        local_2c = 0;
        local_28 = 0;
        *(undefined_32 *)(iVar4 + 0x88) = 0;
        iVar8 = rand();
        *(float *)(iVar4 + 0x1c) = ((float)iVar8 * 4.656613e-10 + (float)iVar8 * 4.656613e-10) - -3.0;
        break;
    case 0x1f:
        uVar9 = 0;
        *(undefined_32 *)(iVar4 + 0x88) = 0xb;
        local_28 = 0;
        break;
    case 0x20:
        *(undefined_32 *)(iVar4 + 0x88) = 0xc;
        iVar8 = rand();
        *(float *)(iVar4 + 0x1c) = ((float)iVar8 * 4.656613e-10 + (float)iVar8 * 4.656613e-10) - -3.0;
        break;
    case 0x22:
        *(undefined_32 *)(iVar4 + 0x88) = 0;
    case 0x1e:
        *(undefined_32 *)(iVar4 + 0x88) = 0;
        local_2c = 0;
        local_28 = 0;
        break;
    case 0x23:
        iVar8 = rand();
        if ((float)iVar8 * 4.656613e-10 < 0.25)
        {
            FUN_00467c80(0xb, 0xc, 0xd, 0x2d, 0x14);
        }
        *(undefined_32 *)(iVar4 + 0x88) = 3;
        uVar9 = 0;
        break;
    case 0x24:
        iVar8 = rand();
        if ((float)iVar8 * 4.656613e-10 < 0.25)
        {
            FUN_00467c80(0x12, 0x28, 0x36, 0xe, 0x17);
        }
        *(undefined_32 *)(iVar4 + 0x88) = 1;
        uVar9 = 0;
        break;
    case 0x25:
        iVar8 = rand();
        if ((float)iVar8 * 4.656613e-10 < 0.25)
        {
            FUN_00467c80(0xb, 0xc, 0xd, 0x2d, 0x14);
        }
        *(undefined_32 *)(iVar4 + 0x88) = 0xd;
        uVar9 = 0;
        break;
    case 0x26:
        iVar8 = rand();
        if ((float)iVar8 * 4.656613e-10 < 0.25)
        {
            FUN_00467c80(0x12, 0x28, 0x36, 0xe, 0x17);
        }
    case 3:
        *(undefined_32 *)(iVar4 + 0x88) = 0xe;
        uVar9 = 0;
        break;
    case 0x27:
        iVar8 = rand();
        if ((float)iVar8 * 4.656613e-10 < 0.25)
        {
            iVar8 = rand();
            if (((float)iVar8 * 4.656613e-10 < 0.8) || (DAT_00e35a84 == '\x02'))
            {
                FUN_00467c80(0x2a, 0x32, 0x31, 0x33, 0x13);
            }
            else
            {
                FUN_00467c80(0x2c, 0x19, 0x20, 0x2c, 0x19);
            }
        }
    case 0x2d:
    case 0x31:
        uVar9 = 0;
        *(undefined_32 *)(iVar4 + 0x88) = 2;
        local_2c = 0;
        local_28 = 0;
        break;
    case 0x2b:
    case 0x2f:
    case 0x33:
    case 0x38:
    case 0x3d:
        uVar9 = 0;
        *(undefined_32 *)(iVar4 + 0x88) = 0;
        local_2c = 0;
        local_28 = 0;
        break;
    case 0x2c:
    case 0x30:
    case 0x34:
    case 0x39:
    case 0x3e:
        *(undefined_32 *)(iVar4 + 0x88) = 1;
        local_2c = 0;
        local_28 = 0;
        break;
    case 0x2e:
        *(undefined_32 *)(iVar4 + 0x88) = 3;
        local_2c = 0;
        param_1 = 0.5;
        break;
    case 0x32:
        *(undefined_32 *)(iVar4 + 0x88) = 3;
        local_2c = 0;
        break;
    case 0x35:
    case 0x3a:
    case 0x3f:
        *(undefined_32 *)(iVar4 + 0x88) = 2;
        local_2c = 0;
        local_28 = 0;
        break;
    case 0x37:
    case 0x3c:
    case 0x41:
        *(undefined_32 *)(iVar4 + 0x88) = 4;
        local_2c = 0;
        break;
    case 0x42:
        *(undefined_32 *)(iVar4 + 0x88) = 5;
    }
    if (*(int *)(iVar4 + 8) == 3)
    {
        local_2c = 0;
        local_28 = 0.1f;
    }
    if (*(int *)(iVar4 + 0x14) != 0)
    {
        FUN_00468a30(iVar4, &local_20, &local_24);
        local_1c = local_20;
    }
    iVar8 = *(int *)(iVar4 + 0x14);
    if ((iVar8 == 0x1b) && (*(int *)(iVar4 + 0x88) != 0xd))
    {
        local_24 = local_20 - -0.1;
    }
    if (param_1 < 0.0)
    {
        local_1c = local_24 - 0.1;
    }
    if (iVar8 == 5)
    {
        local_20 = local_24 - 0.1;
        local_1c = local_20;
    }
    if (iVar8 == 0x2a)
    {
        local_2c = 0;
    }
    if (local_18 != 0)
    {
        FUN_0044b360(*(undefined_32 *)(iVar4 + 0x34), local_1c, local_20, local_24, uVar9, local_28, local_2c);
    }
    if (*(float *)(iVar4 + 0x78) != param_1)
    {
        *(float *)(iVar4 + 0x78) = param_1;
        FUN_0044b330(*(undefined_32 *)(iVar4 + 0x34), param_1);
    }
    return;
}

void FUN_00467c80(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5)

{
    int iVar1;

    iVar1 = FUN_00427670(0, 0x10);
    if (iVar1 != 0)
    {
        iVar1 = FUN_00427670(0, 0x20);
        if (iVar1 == 0)
        {
            FUN_00427590(2, 0, param_1, param_2, param_3, param_4, param_5, 0);
        }
    }
    return;
}

void FUN_004686b0(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    int iVar1;

    if (param_1 != 0)
    {
        *(byte *)(param_1 + 7) = *(byte *)(param_1 + 7) & 0xfe;
        *(undefined_32 *)(param_1 + 0x30) = param_2;
        *(undefined_32 *)(param_1 + 0x34) = param_3;
        vec3f_set(param_1 + 0x44, 0, 0, 0);
        vec3f_set(param_1 + 0x50, 0, 0, 0);
        vec3f_set(param_1 + 0x5c, 0, 0, 0);
        *(undefined_32 *)(param_1 + 0x88) = -1;
        *(undefined_32 *)(param_1 + 8) = param_4;
        *(undefined_32 *)(param_1 + 0x10) = 0;
        *(undefined_32 *)(param_1 + 0x14) = 0;
        *(undefined_32 *)(param_1 + 0x18) = 0;
        iVar1 = rand();
        *(float *)(param_1 + 0x1c) = (float)iVar1 * 4.656613e-10 * 5.0 - -3.0;
        vec3f_set(param_1 + 0x20, 0, 0, 0);
        *(undefined_32 *)(param_1 + 0x2c) = 0;
        vec3f_set(param_1 + 0x38, 0, 0, 0);
        *(undefined_32 *)(param_1 + 0x68) = 0x42b40000;
        *(undefined_32 *)(param_1 + 0x6c) = 0x42b40000;
        *(undefined_32 *)(param_1 + 0x70) = 0x42b40000;
        *(undefined_32 *)(param_1 + 0x74) = 0;
        *(undefined_32 *)(param_1 + 0x78) = 1.0f;
        *(undefined_32 *)(param_1 + 0x7c) = 0;
        *(undefined_32 *)(param_1 + 0x80) = -1.0f;
        *(undefined_32 *)(param_1 + 0x84) = -1.0f;
        *(undefined_32 *)(param_1 + 0x8c) = 0;
        *(undefined_32 *)(param_1 + 0x90) = 0;
        *(undefined_32 *)(param_1 + 0x94) = 1.0f;
        *(undefined_32 *)(param_1 + 0x98) = 0;
        *(undefined_32 *)(param_1 + 0x9c) = 0;
        *(undefined_32 *)(param_1 + 0xa0) = 0;
        *(undefined_32 *)(param_1 + 0xa4) = -1;
        *(undefined_32 *)(param_1 + 0xa8) = 0;
        iVar1 = rand();
        *(undefined_32 *)(param_1 + 0xb0) = 0;
        *(undefined_32 *)(param_1 + 0xb4) = 0;
        *(undefined_32 *)(param_1 + 0xb8) = -1;
        *(float *)(param_1 + 0xac) = ((float)iVar1 * 4.656613e-10 + (float)iVar1 * 4.656613e-10) - -3.0;
    }
    return;
}

void FUN_00468800(int param_1, int param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                  undefined_32 param_6)

{
    int iVar1;
    int iVar2;
    int iVar3;
    undefined_8 local_58[12];
    undefined_8 local_4c[12];
    undefined_8 local_40[64];

    iVar2 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), param_1);
    if (iVar2 == 0)
    {
        return;
    }
    iVar1 = iVar2 + 0x44;
    vec3f_copy(iVar1, param_3);
    vec3f_copy(iVar2 + 0x50, param_4);
    vec3f_copy(iVar2 + 0x5c, param_3);
    *(undefined_32 *)(iVar2 + 0x68) = param_5;
    *(undefined_32 *)(iVar2 + 0x6c) = param_6;
    iVar3 = **(int **)(iVar2 + 0x30);
    if (iVar3 != 0)
    {
        FUN_00431a50(iVar3, 2, 0xfffffffc, 0x10, 3);
        vec3f_copy(local_58, iVar1);
        vec3f_set(local_4c, *(undefined_32 *)(iVar2 + 0x68), 0, 0);
        mat_set_rotation_translation(local_40, local_58);
        FUN_00431640(iVar3, local_40);
    }
    switch (*(undefined_32 *)(iVar2 + 8))
    {
    case 1:
        if (param_1 < 0x37)
        {
            iVar3 = rand();
            *(undefined_32 *)(iVar2 + 0x94) = 0.3f;
            *(float *)(iVar2 + 0x78) = (float)iVar3 * 4.656613e-10 * 0.4 - -0.8;
            break;
        }
        goto LAB_00468939;
    case 2:
        if (param_2 == 0x1b)
        {
            *(undefined_32 *)(iVar2 + 0x94) = 0.1f;
            break;
        }
        if (param_2 == 0x1c)
        {
            *(undefined_32 *)(iVar2 + 0x94) = 0.1f;
            break;
        }
    LAB_00468939:
        *(undefined_32 *)(iVar2 + 0x94) = 0.3f;
        break;
    case 3:
        *(undefined_32 *)(iVar2 + 0x94) = 0.24f;
        break;
    case 4:
        *(undefined_32 *)(iVar2 + 0x94) = 2.5f;
        break;
    case 5:
        *(undefined_32 *)(iVar2 + 0x94) = 0.4f;
        break;
    case 6:
        *(undefined_32 *)(iVar2 + 0x94) = 0.2f;
        break;
    case 7:
        *(undefined_32 *)(iVar2 + 0x94) = 0.23f;
        break;
    case 8:
        *(undefined_32 *)(iVar2 + 0x94) = 1.8f;
        break;
    case 9:
    case 0xc:
        *(undefined_32 *)(iVar2 + 0x94) = 1.7f;
        break;
    case 10:
        *(undefined_32 *)(iVar2 + 0x94) = 1.5f;
        break;
    case 0xb:
        *(undefined_32 *)(iVar2 + 0x94) = 2.0f;
    }
    FUN_0044b270(*(undefined_32 *)(iVar2 + 0x30), iVar1);
    FUN_0044b180(*(undefined_32 *)(iVar2 + 0x30), *(undefined_32 *)(iVar2 + 0x94), *(undefined_32 *)(iVar2 + 0x68));
    FUN_0044b330(*(undefined_32 *)(iVar2 + 0x34), *(undefined_32 *)(iVar2 + 0x78));
    FUN_00466ec0(iVar2, param_2);
    return;
}

void FUN_00468a30(int param_1, float *param_2, float *param_3)

{
    int iVar1;
    int iVar2;

    iVar1 = *(int *)(param_1 + 0x88);
    if ((iVar1 != -1)
        || ((((iVar2 = *(int *)(param_1 + 8), iVar2 != 1 && (iVar2 != 2)) && (iVar2 != 6)) && (iVar2 != 3))))
    {
        switch (*(undefined_32 *)(param_1 + 8))
        {
        case 1:
            *param_2 = (float)(int)*(short *)(&DAT_004c25a8 + iVar1 * 4) * 0.0666;
            *param_3 = (float)(int)*(short *)(&PTR_DAT_004c25aa + *(int *)(param_1 + 0x88)) * 0.0666;
            return;
        case 2:
            *param_2 = (float)(int)*(short *)(&DAT_004c2620 + iVar1 * 4) * 0.0333;
            *param_3 = (float)(int)*(short *)(&DAT_004c2622 + *(int *)(param_1 + 0x88) * 4) * 0.0333;
            return;
        case 3:
            *param_2 = (float)(int)*(short *)(&DAT_004c2658 + iVar1 * 4) * 0.0333;
            *param_3 = (float)(int)*(short *)(&DAT_004c265a + *(int *)(param_1 + 0x88) * 4) * 0.0333;
            return;
        case 4:
            *param_2 = 0.03333;
            *param_3 = 14.3333;
            return;
        case 5:
            *param_2 = 0.03333;
            *param_3 = 4.2;
            return;
        default:
            *param_2 = 0.0;
            *param_3 = 0.0;
            break;
        case 7:
            *param_2 = 0.0666;
            *param_3 = 5.0616;
            return;
        case 8:
            *param_2 = (float)(int)*(short *)(&DAT_004c26d0 + iVar1 * 4) * 0.0333;
            *param_3 = (float)(int)*(short *)(&DAT_004c26d2 + *(int *)(param_1 + 0x88) * 4) * 0.0333;
            return;
        case 9:
            *param_2 = (float)(int)*(short *)(&DAT_004c26e8 + iVar1 * 4) * 0.0333;
            *param_3 = (float)(int)*(short *)(&DAT_004c26ea + *(int *)(param_1 + 0x88) * 4) * 0.0333;
            return;
        case 10:
            *param_2 = (float)(int)*(short *)(&DAT_004c2698 + iVar1 * 4) * 0.0333;
            *param_3 = (float)(int)*(short *)(&DAT_004c269a + *(int *)(param_1 + 0x88) * 4) * 0.0333;
            return;
        case 0xb:
            *param_2 = (float)(int)*(short *)(&DAT_004c26b8 + iVar1 * 4) * 0.0333;
            *param_3 = (float)(int)*(short *)(&DAT_004c26ba + *(int *)(param_1 + 0x88) * 4) * 0.0333;
            return;
        case 0xc:
            *param_2 = (float)(int)*(short *)(&DAT_004c26a8 + iVar1 * 4) * 0.0333;
            *param_3 = (float)(int)*(short *)(&DAT_004c26aa + *(int *)(param_1 + 0x88) * 4) * 0.0333;
            return;
        }
    }
    return;
}

void FUN_00468d00(int param_1)

{
    float10 fVar1;

    if (*(int *)(param_1 + 8) == 2)
    {
        *(undefined_32 *)(param_1 + 0x58) = *(undefined_32 *)(param_1 + 0x4c);
    }
    fVar1 = (float10)vec3f_distance(param_1 + 0x50, param_1 + 0x44);
    if (fVar1 <= (float10)10.0)
    {
        *(undefined_32 *)(param_1 + 0xa0) = 1;
        return;
    }
    *(undefined_32 *)(param_1 + 0xa0) = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00468d50(float param_1)

{
    float *pfVar1;
    int iVar2;
    float fVar3;
    float fVar4;
    int iVar5;
    float10 fVar6;
    float local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar5 = (int)param_1;
    if (0 < DAT_0050cad4)
    {
        DAT_0050cad4 = DAT_0050cad4 + -1;
        return;
    }
    pfVar1 = (float *)((int)param_1 + 0x50);
    vec3f_sub(&local_c, pfVar1, (int)param_1 + 0x44);
    if (*(int *)((int)param_1 + 8) == 2)
    {
        local_4 = 0;
    }
    fVar6 = (float10)rdVector_Len3(&local_c);
    if ((fVar6 <= (float10)35.0) && (*(int *)((int)param_1 + 0x4c) == -0x3cef0000))
    {
        *(undefined_32 *)((int)param_1 + 0xa0) = 1;
    }
    if (*(int *)((int)param_1 + 0xa0) == 0)
    {
        fVar6 = (float10)arctan2(-local_c, local_8);
        FUN_00468d00(param_1);
        param_1 = (float)fVar6;
    }
    else
    {
        param_1 = *(float *)((int)param_1 + 0x6c);
    }
    fVar3 = param_1 - *(float *)(iVar5 + 0x68);
    if (fVar3 < -180.0)
    {
        fVar3 = fVar3 - -360.0;
    }
    if (180.0 < fVar3)
    {
        fVar3 = fVar3 - 360.0;
    }
    if (*(int *)(iVar5 + 0x4c) == -0x3d900000)
    {
        fVar4 = 2.0;
    }
    else
    {
        fVar4 = 1.0;
    }
    if ((5.0 < fVar3) || (fVar3 < -5.0))
    {
        fVar4 = fVar4 * fVar3 * 0.01111111;
        *(float *)(iVar5 + 0x98) = fVar4;
        if (fVar4 < 0.0)
        {
            *(float *)(iVar5 + 0x98) = -fVar4;
        }
        *(undefined_32 *)(iVar5 + 0x9c) = 0;
        *(float *)(iVar5 + 0x70) = *(float *)(iVar5 + 0x68);
        *(float *)(iVar5 + 0x74) = fVar3;
        fVar4 = _DAT_00e22a50;
        if (0.0 < *(float *)(iVar5 + 0x98))
        {
            *(float *)(iVar5 + 0x9c) = _DAT_00e22a50;
            if (*(float *)(iVar5 + 0x98) < fVar4)
            {
                *(undefined_32 *)(iVar5 + 0x9c) = *(undefined_32 *)(iVar5 + 0x98);
            }
            fVar3 = (*(float *)(iVar5 + 0x9c) / *(float *)(iVar5 + 0x98)) * fVar3 + *(float *)(iVar5 + 0x68);
            *(float *)(iVar5 + 0x68) = fVar3;
            if (fVar3 < -180.0)
            {
                *(float *)(iVar5 + 0x68) = fVar3 - -360.0;
            }
            if (180.0 < *(float *)(iVar5 + 0x68))
            {
                *(float *)(iVar5 + 0x68) = *(float *)(iVar5 + 0x68) - 360.0;
                return;
            }
        }
    }
    else
    {
        iVar2 = *(int *)(iVar5 + 8);
        *(float *)(iVar5 + 0x68) = param_1;
        if (iVar2 == 2)
        {
            if (*(int *)(iVar5 + 0xa0) == 0)
            {
                FUN_00466ec0(iVar5, 0x13);
                return;
            }
            FUN_00466ec0(iVar5, 0x11);
            return;
        }
        if (iVar2 == 3)
        {
            if (*(int *)(iVar5 + 0xa0) == 0)
            {
                FUN_00466ec0(iVar5, 0x1e);
                return;
            }
            if (*pfVar1 != _DAT_004c4534)
            {
                FUN_00466ec0(iVar5, 0x1d);
                return;
            }
            FUN_00466ec0(iVar5, 0x1f);
            return;
        }
        if (iVar2 == 1)
        {
            FUN_00466ec0(iVar5, 10);
            return;
        }
    }
    return;
}

void FUN_00468fe0(undefined_32 param_1, undefined_32 param_2)

{
    int iVar1;

    iVar1 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), param_1);
    if (iVar1 != 0)
    {
        FUN_00466ec0(iVar1, param_2);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00469010(void)

{
    float10 fVar1;

    DAT_0050cad8 = DAT_0050cad8 + _DAT_00e22a50;
    if (6.26666 < DAT_0050cad8)
    {
        DAT_0050cad8 = DAT_0050cad8 - 6.26666;
    }
    fVar1 = (float10)FUN_0045a420(DAT_0050cad8, 0x4048887b);
    DAT_004c7074 = (float)(fVar1 * (float10)0.1595746 - (float10)-0.5);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00469070(int param_1)

{
    int iVar1;
    int iVar2;
    float10 fVar3;
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    iVar1 = param_1 + 0x44;
    vec3f_sub(local_c, param_1 + 0x50, iVar1);
    vec3f_sub(local_18, &DAT_00e2af90, &DAT_00e298f0);
    vec3f_sub(local_24, iVar1, &DAT_00e298f0);
    rdVector_Normalize3(local_c);
    rdVector_Normalize3(local_18);
    rdVector_Normalize3(local_24);
    iVar2 = 0;
    fVar3 = (float10)vec3f_squared_norm(local_18, local_24);
    if (fVar3 < (float10)0.5)
    {
        do
        {
            if (0x27 < iVar2)
                break;
            vec3f_multiply_add(iVar1, iVar1, _DAT_00e22a50 * 130.0, local_c);
            vec3f_sub(local_18, &DAT_00e2af90, &DAT_00e298f0);
            vec3f_sub(local_24, iVar1, &DAT_00e298f0);
            rdVector_Normalize3(local_18);
            rdVector_Normalize3(local_24);
            iVar2 = iVar2 + 1;
            fVar3 = (float10)vec3f_squared_norm(local_18, local_24);
        } while (fVar3 < (float10)0.5);
    }
    if (0 < iVar2)
    {
        FUN_0044b270(*(undefined_32 *)(param_1 + 0x30), iVar1);
    }
    return;
}

int FUN_004691c0(int param_1)

{
    float *pfVar1;
    int iVar2;

    iVar2 = 0;
    pfVar1 = (float *)&DAT_004c4514;
    while ((*(float *)(param_1 + 0x50) != pfVar1[-1] || (*(float *)(param_1 + 0x54) != *pfVar1)))
    {
        pfVar1 = pfVar1 + 3;
        iVar2 = iVar2 + 1;
        if (0x4c45d3 < (int)pfVar1)
        {
            return -1;
        }
    }
    return iVar2;
}

void FUN_00469200(int param_1, int param_2)

{
    vec3f_copy(param_1 + 0x50, &DAT_004c4510 + param_2 * 3);
    *(undefined_32 *)(param_1 + 0xa0) = 0;
    return;
}

undefined_32 FUN_00469230(int param_1)

{
    int iVar1;
    undefined_32 uVar2;

    iVar1 = FUN_004691c0(param_1);
    if (iVar1 == -1)
    {
        return 0;
    }
    if (iVar1 == 0)
    {
        uVar2 = 1;
    }
    else
    {
        if (iVar1 != 1)
        {
            if (iVar1 != 2)
            {
                return 0;
            }
            FUN_00466ec0(param_1, 0);
            *(undefined_32 *)(param_1 + 0xb8) = 2;
            return 1;
        }
        uVar2 = 2;
    }
    FUN_00469200(param_1, uVar2);
    *(int *)(param_1 + 0xb8) = iVar1;
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004692a0(int param_1)

{
    float fVar1;
    float fVar2;
    float10 fVar3;
    float local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    vec3f_sub(&local_c, param_1 + 0x50, param_1 + 0x44);
    local_4 = 0;
    rdVector_Len3(&local_c);
    fVar3 = (float10)arctan2(-local_c, local_8);
    fVar1 = (float)fVar3;
    fVar2 = fVar1 - *(float *)(param_1 + 0x68);
    *(float *)(param_1 + 0x6c) = fVar1;
    if (fVar2 < -180.0)
    {
        fVar2 = fVar2 - -360.0;
    }
    if (180.0 < fVar2)
    {
        fVar2 = fVar2 - 360.0;
    }
    if ((fVar2 <= 5.0) && (-5.0 <= fVar2))
    {
        *(float *)(param_1 + 0x68) = fVar1;
        return;
    }
    if (fVar2 < 0.0)
    {
        *(float *)(param_1 + 0x68) = *(float *)(param_1 + 0x68) - _DAT_00e22a50 * 90.0;
        return;
    }
    *(float *)(param_1 + 0x68) = *(float *)(param_1 + 0x68) - _DAT_00e22a50 * -90.0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00469380(int param_1)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    int iVar4;
    float fVar5;
    float fVar6;
    undefined_32 uVar7;
    float local_f4;
    float local_f0;
    undefined_8 local_ec[48];
    undefined_8 local_bc[8];
    float local_b4;
    undefined_32 local_ac;
    undefined_32 local_a8;
    undefined_32 local_a4;
    undefined_32 local_a0;
    undefined_32 local_9c;
    undefined_32 local_98;
    undefined_32 local_94;
    undefined_32 local_90;
    undefined_32 local_8c;
    undefined_32 local_88;
    undefined_32 local_84;
    undefined_32 local_80;
    undefined_32 local_7c;
    undefined_32 local_78;
    undefined_32 local_74;
    undefined_8 local_70[8];
    undefined_32 local_68;
    undefined_8 local_64[12];
    undefined_8 local_58[12];
    undefined_8 local_4c[12];
    undefined_8 local_40[48];
    undefined_8 local_10[8];
    float local_8;

    local_f4 = DAT_00e295a0;
    local_f0 = 0.0;
    if (DAT_00e295a4 == 0)
    {
        local_f4 = 0.0;
    }
    local_94 = 80.0f;
    local_90 = 75.0f;
    local_8c = 50.0f;
    local_ac = 0x436b0000;
    local_a8 = 100.0f;
    local_a4 = 0;
    local_a0 = 0;
    local_9c = 0xc2c80000;
    local_98 = 0x43c80000;
    local_7c = 20.0f;
    local_78 = 0x42820000;
    local_74 = 40.0f;
    local_88 = 255.0f;
    local_84 = 255.0f;
    local_80 = 200.0f;
    vec3f_sub(local_70, &DAT_00e2af90, &DAT_00e298f0);
    fVar6 = 1.0 - local_f4;
    local_68 = 0x43c80000;
    vec3f_multiply2_add(local_4c, fVar6, &local_94, local_f4, &local_7c);
    vec3f_multiply2_add(local_58, fVar6, &local_ac, local_f4, &local_88);
    vec3f_multiply2_add(local_64, fVar6, &local_a0, local_f4, local_70);
    FUN_00483840(-1, local_4c, local_58, local_64);
    fVar6 = DAT_00e295a0;
    local_f4 = DAT_00e295a0;
    iVar1 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), 4);
    if (DAT_004c7078 == -1)
    {
        DAT_004c7078 = param_1;
        FUN_00469b50(&DAT_0050cab8, iVar1, 2);
        FUN_00469b50(&DAT_0050ca98, iVar1, 8);
        FUN_00469b50(&DAT_0050cac8, iVar1, 4);
        FUN_00469b50(&DAT_0050caa8, iVar1, 5);
    }
    DAT_0050cadc = DAT_0050cadc - _DAT_00e22a50 * -9.0;
    if (360.0 < DAT_0050cadc)
    {
        DAT_0050cadc = DAT_0050cadc - 360.0;
    }
    if (fVar6 == 0.0)
    {
        DAT_0050cadc = 0.0;
    }
    iVar4 = *(int *)(*(int *)(iVar1 + 0x30) + 8);
    if (iVar4 != 0)
    {
        if (DAT_00e295a4 == 0)
        {
            local_f4 = 0.0;
        }
        mat_set_rotation(local_ec, DAT_0050cadc, 0, 0);
        mat_multiply_rows(local_ec, 1.5f, 1.5f, 1.5f, local_ec);
        if (0.5 <= local_f4)
        {
            fVar6 = 1.0;
            fVar5 = (local_f4 - 0.5) + (local_f4 - 0.5);
        }
        else
        {
            fVar6 = local_f4 + local_f4;
            fVar5 = 0.1;
        }
        mat_multiply_rows(local_ec, fVar5, fVar5, fVar6, local_ec);
        vec3f_copy(local_bc, &DAT_0050cab8);
        FUN_00431640(iVar4, local_ec);
        rand();
        uVar2 = __ftol();
        FUN_0042b640(iVar4, 0, 0, 0, 0xff, 0, uVar2);
        iVar3 = FUN_0042b560(iVar4);
        if (iVar3 != 0)
        {
            FUN_0044fc00(iVar3, 0x3de147ae, 0x3de147ae);
        }
        if (local_f4 <= 0.0)
        {
            uVar7 = 3;
            uVar2 = 0xfffffffc;
        }
        else
        {
            uVar7 = 2;
            uVar2 = 3;
        }
        FUN_00431a50(iVar4, 2, uVar2, 0x10, uVar7);
    }
    iVar4 = *(int *)(*(int *)(iVar1 + 0x30) + 0x20);
    if (iVar4 != 0)
    {
        if (DAT_00e295a8 == 0)
        {
            local_f4 = 0.0;
        }
        mat_set_rotation(local_ec, DAT_0050cadc, 0, 0);
        mat_multiply_rows(local_ec, 1.5f, 1.5f, 1.5f, local_ec);
        if (0.5 <= local_f4)
        {
            fVar6 = 1.0;
            fVar5 = (local_f4 - 0.5) + (local_f4 - 0.5);
        }
        else
        {
            fVar6 = local_f4 + local_f4;
            fVar5 = 0.1;
        }
        mat_multiply_rows(local_ec, fVar5, fVar5, fVar6, local_ec);
        vec3f_copy(local_bc, &DAT_0050ca98);
        FUN_00431640(iVar4, local_ec);
        rand();
        uVar2 = __ftol();
        FUN_0042b640(iVar4, 0, 0, 0, 0xff, 0, uVar2);
        iVar3 = FUN_0042b560(iVar4);
        if (iVar3 != 0)
        {
            FUN_0044fc00(iVar3, 0x3de147ae, 0x3de147ae);
        }
        if (local_f4 <= 0.0)
        {
            uVar7 = 3;
            uVar2 = 0xfffffffc;
        }
        else
        {
            uVar7 = 2;
            uVar2 = 3;
        }
        FUN_00431a50(iVar4, 2, uVar2, 0x10, uVar7);
    }
    if (DAT_00e295a8 != 0)
    {
        local_f0 = DAT_00e295a0;
    }
    iVar4 = *(int *)(*(int *)(iVar1 + 0x30) + 0x14);
    if (iVar4 != 0)
    {
        mat_set_identity(local_ec);
        vec3f_copy(local_bc, &DAT_0050caa8);
        local_b4 = local_b4 - (1.0 - local_f0) * 117.0;
        FUN_00431640(iVar4, local_ec);
        iVar4 = *(int *)(*(int *)(iVar1 + 0x30) + 0x18);
        if (iVar4 != 0)
        {
            if (local_f0 <= 0.0)
            {
                uVar7 = 3;
                uVar2 = 0xfffffffc;
            }
            else
            {
                rand();
                uVar2 = __ftol();
                FUN_0042b640(iVar4, 0, 0, 0, 0xff, 0, uVar2);
                iVar3 = FUN_0042b560(iVar4);
                if (iVar3 != 0)
                {
                    FUN_0044fc00(iVar3, 0x3de147ae, 0x3de147ae);
                }
                uVar7 = 2;
                uVar2 = 3;
            }
            FUN_00431a50(iVar4, 2, uVar2, 0x10, uVar7);
        }
        iVar4 = FUN_00450b30(MAGIC('E', 'l', 'm', 'o'), 0x1c);
        mat_set_identity(local_40);
        FUN_004816f0((*(undefined_32 **)(iVar1 + 0x30))[5], local_40, **(undefined_32 **)(iVar1 + 0x30), local_40);
        local_8 = local_8 - -10.0;
        if (local_f0 == 1.0)
        {
            vec3f_multiply2_add(local_10, 0x3f400000, &DAT_004c4490, 0.25f, local_10);
            local_f0 = local_f0 * 0.25;
        }
        FUN_0044b270(*(undefined_32 *)(iVar4 + 0x30), local_10);
        FUN_0044b180(*(undefined_32 *)(iVar4 + 0x30), *(float *)(iVar4 + 0x94) * local_f0, DAT_0050cadc * 4.0);
    }
    fVar6 = DAT_00e295ac;
    iVar4 = *(int *)(*(int *)(iVar1 + 0x30) + 0x10);
    if (iVar4 != 0)
    {
        mat_set_identity(local_ec);
        vec3f_copy(local_bc, &DAT_0050cac8);
        local_b4 = local_b4 - (1.0 - fVar6) * 117.0;
        FUN_00431640(iVar4, local_ec);
        iVar1 = *(int *)(*(int *)(iVar1 + 0x30) + 0x1c);
        if (iVar1 != 0)
        {
            if (0.0 < fVar6)
            {
                rand();
                uVar2 = __ftol();
                FUN_0042b640(iVar1, 0, 0, 0, 0xff, 0, uVar2);
                iVar4 = FUN_0042b560(iVar1);
                if (iVar4 != 0)
                {
                    FUN_0044fc00(iVar4, 0x3de147ae, 0x3de147ae);
                }
                FUN_00431a50(iVar1, 2, 3, 0x10, 2);
                return;
            }
            FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
        }
    }
    return;
}

void FUN_00469b50(undefined_32 param_1, int param_2, int param_3)

{
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    FUN_004316a0(*(undefined_32 *)(*(int *)(param_2 + 0x30) + param_3 * 4), local_40);
    vec3f_copy(param_1, local_10);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

float10 FUN_00469b90(float param_1)

{
    DAT_00e295a0 = param_1 * _DAT_00e22a50 + DAT_00e295a0;
    if (1.0 < DAT_00e295a0)
    {
        DAT_00e295a0 = 1.0;
    }
    if (DAT_00e295a0 < 0.0)
    {
        DAT_00e295a0 = 0.0;
    }
    return (float10)DAT_00e295a0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00469bf0(void)

{
    if ((0.0 < _DAT_00e295d8) && (_DAT_00e295d8 = _DAT_00e295d8 - _DAT_00e22a50, _DAT_00e295d8 < 0.0))
    {
        _DAT_00e295d8 = 0.0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00469c30(int param_1, float param_2, int param_3)

{
    bool bVar1;
    int iVar2;
    int iVar3;

    bVar1 = false;
    DAT_00e295b0 = 0;
    DAT_00e295b4 = 0;
    DAT_00e295b8 = (uint)(0 < DAT_00e295d0);
    DAT_00e295bc = (uint)(DAT_00e295d0 < DAT_00e295cc + -1);
    if (((&DAT_0050c908)[param_1] & 0x20000) != 0)
    {
        if (DAT_00e295d0 < DAT_00e295cc + -1)
        {
            DAT_00e295b4 = 1;
            if ((_DAT_00e295d8 == 0.0) || (((&DAT_0050c918)[param_1] & 0x20000) != 0))
            {
                bVar1 = true;
                DAT_00e295e0 = 1;
                _DAT_00e295d8 = 0.6;
                if (0 < DAT_00e295dc)
                {
                    _DAT_00e295d8 = 0.1 / param_2;
                }
            }
        }
        else if (DAT_00e295a0 == 1.0)
        {
            FUN_00440550(0x4b);
        }
    }
    if (((&DAT_0050c908)[param_1] & 0x10000) != 0)
    {
        if (DAT_00e295d0 < 1)
        {
            if (DAT_00e295a0 == 1.0)
            {
                FUN_00440550(0x4b);
            }
        }
        else
        {
            DAT_00e295b0 = 1;
            if ((_DAT_00e295d8 == 0.0) || (((&DAT_0050c918)[param_1] & 0x10000) != 0))
            {
                bVar1 = true;
                DAT_00e295e0 = -1;
                _DAT_00e295d8 = 0.6;
                if (DAT_00e295dc < 0)
                {
                    _DAT_00e295d8 = 0.1 / param_2;
                }
            }
        }
    }
    iVar3 = DAT_00e295d0;
    iVar2 = DAT_00e295b0;
    if ((DAT_00e295b0 != 0) || (DAT_00e295b4 != 0))
    {
        (&DAT_0050c918)[param_1] = (&DAT_0050c918)[param_1] & 0xfffffffc;
    }
    if (bVar1)
    {
        if (DAT_00e295dc * DAT_00e295e0 < 0)
        {
            DAT_00e295dc = 0;
        }
        DAT_00e295d0 = iVar3 + DAT_00e295e0;
        DAT_00e295dc = DAT_00e295dc + DAT_00e295e0;
        FUN_00440550(0x58);
        iVar2 = DAT_00e295b0;
        iVar3 = DAT_00e295d0;
    }
    if ((DAT_00e295b4 == 0) && (iVar2 == 0))
    {
        DAT_00e295dc = 0;
    }
    if (((DAT_00e295d4 == iVar3) && (iVar2 == 0)) && (DAT_00e295b4 == 0))
    {
        if (param_3 != 0)
        {
            FUN_00469b90(param_2 * 3.3);
            return;
        }
    }
    else
    {
        FUN_00469b90(param_2 * -3.3);
        if (DAT_00e295a0 == 0.0)
        {
            DAT_00e295d4 = DAT_00e295d0;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046a5e0(undefined_32 param_1)

{
    _DAT_00e27168 = param_1;
    return;
}

// set some matrices
int FUN_0046a5f0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, float param_5)

{
    int iVar1;

    iVar1 = FUN_00450d20(MAGIC('S', 'm', 'o', 'k'));
    if (iVar1 == 0)
    {
        return 0;
    }
    *(undefined_32 *)(iVar1 + 100) = param_2;
    *(undefined_32 *)(iVar1 + 0x60) = param_1;
    *(undefined_32 *)(iVar1 + 0x68) = param_3;
    mat_set_diagonal(iVar1 + 0x20, param_5, param_5, param_5);
    vec3f_copy(iVar1 + 0x50, param_4);
    switch (param_1)
    {
    case 2:
    case 3:
        *(undefined_32 *)(iVar1 + 0x70) = 5;
        vec3f_set(iVar1 + 0x74, 0, 0, param_5 * 10.0);
        *(float *)(iVar1 + 0x8c) = param_5 * 5.0;
        *(float *)(iVar1 + 0x88) = param_5;
        *(undefined_32 *)(iVar1 + 0x98) = 360.0f;
        *(undefined_32 *)(iVar1 + 0x9c) = -9.0f;
        *(float *)(iVar1 + 0x90) = param_5 * 10.0;
        *(undefined_32 *)(iVar1 + 0xa0) = 1.4f;
        *(undefined_32 *)(iVar1 + 0xa4) = 0;
        *(float *)(iVar1 + 0x94) = param_5 * 5.0;
        *(undefined_32 *)(iVar1 + 0xa8) = 3.0f;
        *(undefined_32 *)(iVar1 + 0xac) = 1.0f;
        *(undefined_32 *)(iVar1 + 0xb0) = 0.5f;
        FUN_00430a90(iVar1 + 0xb4, 1.0f, 1.0f, 1.0f, 1.0f);
        break;
    default:
        goto switchD_0046a652_caseD_4;
    case 6:
        *(undefined_32 *)(iVar1 + 0x70) = 5;
        vec3f_set(iVar1 + 0x74, 0, param_5 * -10.0, 0);
        *(float *)(iVar1 + 0x8c) = param_5 * 3.0;
        *(float *)(iVar1 + 0x88) = param_5;
        *(undefined_32 *)(iVar1 + 0x98) = 360.0f;
        *(undefined_32 *)(iVar1 + 0x9c) = -9.0f;
        *(float *)(iVar1 + 0x90) = param_5 * 10.0;
        *(undefined_32 *)(iVar1 + 0xa0) = 1.4f;
        *(undefined_32 *)(iVar1 + 0xa4) = 0;
        *(undefined_32 *)(iVar1 + 0xa8) = 3.0f;
        *(undefined_32 *)(iVar1 + 0xac) = 1.0f;
        *(undefined_32 *)(iVar1 + 0xb0) = 0.5f;
        *(float *)(iVar1 + 0x94) = param_5 * 5.0;
        FUN_00430a90(iVar1 + 0xb4, 1.0f, 1.0f, 1.0f, 1.0f);
        break;
    case 8:
        *(undefined_32 *)(iVar1 + 0x70) = 5;
        vec3f_set(iVar1 + 0x74, 0, param_5 * -10.0, 0);
        *(float *)(iVar1 + 0x8c) = param_5 * 3.0;
        *(float *)(iVar1 + 0x88) = param_5;
        *(undefined_32 *)(iVar1 + 0x98) = 360.0f;
        *(undefined_32 *)(iVar1 + 0x9c) = -9.0f;
        *(float *)(iVar1 + 0x90) = param_5 * 10.0;
        *(undefined_32 *)(iVar1 + 0xa0) = 0x4019999a;
        *(undefined_32 *)(iVar1 + 0xa4) = 0.5f;
        *(undefined_32 *)(iVar1 + 0xa8) = 3.0f;
        *(undefined_32 *)(iVar1 + 0xac) = 1.0f;
        *(undefined_32 *)(iVar1 + 0xb0) = 0.5f;
        *(float *)(iVar1 + 0x94) = param_5 * 5.0;
        FUN_00430a90(iVar1 + 0xb4, 1.0f, 1.0f, 1.0f, 1.0f);
    }
    FUN_00430a90(iVar1 + 0xc4, 0, 0, 0, 1.0f);
    *(undefined_32 *)(iVar1 + 0x80) = 0.1f;
    *(undefined_32 *)(iVar1 + 0x84) = 0.5f;
    *(undefined_32 *)(iVar1 + 0xd4) = 0;
    *(undefined_32 *)(iVar1 + 0xd8) = 0;
switchD_0046a652_caseD_4:
    return iVar1;
}

void FUN_0046a920(int param_1, undefined_32 param_2)

{
    if (param_1 != 0)
    {
        vec3f_copy(param_1 + 0x50, param_2);
    }
    return;
}

void FUN_0046a940(int param_1, undefined_32 param_2)

{
    if (param_1 != 0)
    {
        vec3f_copy(param_1 + 0x74, param_2);
    }
    return;
}

void FUN_0046a960(int param_1, undefined_32 param_2)

{
    if (param_1 != 0)
    {
        *(undefined_32 *)(param_1 + 0x68) = param_2;
    }
    return;
}

void FUN_0046a970(int param_1, undefined_32 param_2)

{
    if (param_1 != 0)
    {
        *(undefined_32 *)(param_1 + 0xf0) = param_2;
    }
    return;
}

void FUN_0046a990(int param_1, int param_2)

{
    if (((&DAT_00e98e90)[param_2] & 0x2000) != 0)
    {
        if ((*(uint *)(param_1 + 0x60) & 0x1000) == 0)
        {
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x1000;
        }
    }
    return;
}

uint FUN_0046a9c0(int param_1)

{
    uint uVar1;
    int iVar2;
    byte *pbVar3;

    uVar1 = 0;
    iVar2 = 0;
    pbVar3 = (byte *)(param_1 + 0x2a0);
    do
    {
        if ((*pbVar3 & 0x14) != 0)
        {
            if (iVar2 < 3)
            {
                uVar1 = uVar1 | 1;
            }
            else
            {
                uVar1 = uVar1 | 2;
            }
        }
        iVar2 = iVar2 + 1;
        pbVar3 = pbVar3 + 4;
    } while (iVar2 < 6);
    return uVar1;
}

float10 FUN_0046a9f0(int param_1)

{
    int iVar1;
    float *pfVar2;
    float10 fVar3;

    iVar1 = 0;
    fVar3 = (float10)0.0;
    pfVar2 = (float *)(param_1 + 0x288);
    do
    {
        if (0.8 < *pfVar2)
        {
            if (iVar1 < 3)
            {
                fVar3 = fVar3 - (float10)0.33;
            }
            else
            {
                fVar3 = fVar3 - (float10)-0.33;
            }
        }
        iVar1 = iVar1 + 1;
        pfVar2 = pfVar2 + 1;
    } while (iVar1 < 6);
    return fVar3;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046aa30(int param_1)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    byte *pbVar4;

    iVar1 = -1;
    iVar3 = 0;
    pbVar4 = (byte *)(param_1 + 0x2a0);
    do
    {
        if ((*pbVar4 & 8) != 0)
        {
            iVar1 = rand();
            FUN_00474cd0(param_1, iVar3, ((float)iVar1 * 4.656613e-10 * 0.1 - -0.1) * (float)_DAT_00e22a40);
            iVar1 = iVar3;
        }
        iVar3 = iVar3 + 1;
        pbVar4 = pbVar4 + 4;
    } while (iVar3 < 6);
    if (iVar1 < 0)
    {
        FUN_004276a0(0, 0x40000);
    }
    else
    {
        iVar1 = FUN_00427670();
        if (iVar1 == 0)
        {
            FUN_00427590(1, **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), 0xc, 0xc, 0xc, 0xc, 0xc,
                         param_1 + 0x50);
            FUN_00427690(0, 0x40000);
            if (iVar3 < 3)
            {
                uVar2 = 0;
            }
            else
            {
                uVar2 = (uint)(iVar3 < 6);
            }
            FUN_00409ee0(0x15, -1, uVar2 * 0xb4 + 0x5a, -1, 0);
            return;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 0046ab10
// RepairFunction
void FUN_0046ab10(int param_1)

{
    float fVar1;
    uint uVar2;
    bool bVar3;
    bool bVar4;
    bool bVar5;
    uint *puVar6;
    int iVar7;
    float *pfVar8;
    uint *puVar9;
    int iVar10;
    undefined_32 local_14;

    local_14 = 0;
    *(float *)(param_1 + 700) = *(float *)(param_1 + 700) - (float)_DAT_00e22a40;
    bVar4 = false;
    bVar5 = false;
    bVar3 = false;
    if ((*(uint *)(param_1 + 0x60) & 0x400) != 0) // isPlayerReparing
    {
        *(undefined_32 *)(param_1 + 700) = 0.1f;
    }
    puVar9 = (uint *)(param_1 + 0x2a0);
    iVar10 = -1; // 0xffff ffff
    iVar7 = 0;
    puVar6 = puVar9;
    do
    {
        uVar2 = *puVar6;
        *puVar6 = uVar2 & 0xffffffef; // disable repair lean
        if ((uVar2 & 4) != 0) // test if section is being repaired
        {
            iVar10 = iVar7;
        }
        iVar7 = iVar7 + 1;
        *puVar6 = uVar2 & 0xffffffeb; // disable repair
        puVar6 = puVar6 + 1;
    } while (iVar7 < 6); // foreach engine

    if (0.0 < *(float *)(param_1 + 700)) // if player is repairing
    {
        if (iVar10 < 0) // if a section wasnt already being repaired
        {
            fVar1 = 0.0;
            iVar7 = 0;
            pfVar8 = (float *)(param_1 + 0x288);
            do
            {
                if ((fVar1 < *pfVar8) && (0.5 < *pfVar8))
                {
                    fVar1 = *pfVar8;
                    iVar10 = iVar7;
                }
                iVar7 = iVar7 + 1;
                pfVar8 = pfVar8 + 1;
            } while (iVar7 < 6); // find engine with most damage
            if (-1 < iVar10)
                goto LAB_0046abcd;
        }
        else
        {
        LAB_0046abcd: // if half of most damage taken is less than engine damage
            if (*(float *)(param_1 + 0x270 + iVar10 * 4) * 0.5 < *(float *)(param_1 + 0x288 + iVar10 * 4))
            {
                // tag section for repair
                *(uint *)(param_1 + 0x2a0 + iVar10 * 4) = *(uint *)(param_1 + 0x2a0 + iVar10 * 4) | 4;
            }
        }
        if ((*(uint *)(param_1 + 100) & 0x40000) == 0) // if lava == false
        {
            iVar10 = 6;
            puVar6 = puVar9;
            do
            {
                if ((*puVar6 & 8) != 0) // if engine section is on fire
                {
                    *puVar6 = *puVar6 | 0x10; // tag section for lean
                }
                puVar6 = puVar6 + 1;
                iVar10 = iVar10 + -1;
            } while (iVar10 != 0); // foreach engine
        }
    }
    iVar10 = 6;
    do
    {
        if ((*(byte *)puVar9 & 4) != 0)
        {
            bVar3 = true;
            puVar9[-6] = (uint)((float)_DAT_00e22a40 * ((float)puVar9[-0xc] * 0.5 - (float)puVar9[-0xc])
                                    * *(float *)(param_1 + 0x98) * 0.5
                                + (float)puVar9[-6]);
        }
        if (((*(byte *)puVar9 & 0x10) != 0) && (iVar7 = rand(), (float)iVar7 * 4.656613e-10 < 0.03))
        {
            *puVar9 = *puVar9 & 0xfffffff7; // disable fire
        }
        puVar9 = puVar9 + 1;
        iVar10 = iVar10 + -1;
    } while (iVar10 != 0); // foreach engine
    if ((*(byte *)(param_1 + 0x60) & 0x20) != 0) // if playcam
    {
        if (bVar3) // if something was repaired
        {
            FUN_00409ee0(0xb, -1, -1, -1, 0);
        }
        else
        {
            FUN_0040a0b0(0xb);
        }
        if ((*(byte *)(param_1 + 0x60) & 0x20) != 0) // if playcam
        {
            if (bVar3) // if something was repaired
            {
                iVar10 = rand();
                if (((float)iVar10 * 4.656613e-10 < 0.15)
                    && (iVar10 = FUN_00427670((int)*(char *)(*(int *)(param_1 + 0x1e70) + 0x10), 0x10000), iVar10 == 0))
                {
                    FUN_00427590(1, **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), 10, 10, 10, 10, 10,
                                 param_1 + 0x50);
                    FUN_00427690((int)*(char *)(*(int *)(param_1 + 0x1e70) + 0x10), 0x10000);
                }
            }
            else
            {
                iVar10 = FUN_00427670((int)*(char *)(*(int *)(param_1 + 0x1e70) + 0x10), 0x10000);
                if (iVar10 != 0)
                {
                    FUN_00427590(1, **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), 0xb, 0xb, 0xb, 0xb, 0xb,
                                 param_1 + 0x50);
                    FUN_004276a0((int)*(char *)(*(int *)(param_1 + 0x1e70) + 0x10), 0x10000);
                }
            }
        }
    }
    iVar10 = 0;
    pfVar8 = (float *)(param_1 + 0x288); // damage address
    do
    {
        if (1.0 <= *pfVar8)
        {
            if (iVar10 < 3) // left engines
            {
                bVar4 = true;
            }
            else // right engines
            {
                bVar5 = true;
            }
        }
        iVar10 = iVar10 + 1;
        pfVar8 = pfVar8 + 1;
    } while (iVar10 < 6); // foreach engine

    if ((bVar4) || (bVar5))
    {
        *(float *)(param_1 + 0x2c0) = *(float *)(param_1 + 0x2c0) - (float)_DAT_00e22a40; // - Time
        if ((*(uint *)(param_1 + 0x60) & 2.0f) != 0) // if player tries to boost, set timer to 0
        {
            *(undefined_32 *)(param_1 + 0x2c0) = 0;
        }
    }
    else
    {
        iVar10 = rand();
        *(float *)(param_1 + 0x2c0) = (float)iVar10 * 4.656613e-10 * 4.0 - -6.0; // rand [6, 10]
    }
    if (0.0 < *(float *)(param_1 + 0x2c0))
    {
        return;
    } // else <= 0
    if (bVar4)
    {
        if (!bVar5)
        {
            if (bVar4)
            {
                local_14 = 1;
                goto LAB_0046aea1;
            }
            goto LAB_0046ae95;
        }
        iVar10 = rand();
        if ((float)iVar10 * 4.656613e-10 < 0.5)
        {
            local_14 = 1;
            goto LAB_0046aea1;
        }
    }
    else
    {
    LAB_0046ae95:
        if (!bVar5)
            goto LAB_0046aea1;
    }
    local_14 = 2;
LAB_0046aea1:
    FUN_004741d0(param_1, local_14);
    return;
}

void FUN_0046aec0(int param_1, undefined_32 param_2, int param_3, int param_4)

{
    float fVar1;

    if (*(float *)(param_1 + 0x58) <= *(float *)(param_3 + 8))
    {
        if (((*(uint *)(param_1 + 100) & 0x200) == 0) && (param_4 != 0))
        {
            fVar1 = *(float *)(param_1 + 0x184);
        }
        else
        {
            fVar1 = 500.0;
        }
    }
    else
    {
        fVar1 = 0.0;
    }
    if (400.0 < fVar1)
    {
        *(undefined_32 *)(param_1 + 0x2fc) = -1.0f;
        return;
    }
    *(undefined_32 *)(param_1 + 0x2fc) = 0;
    return;
}

void FUN_0046af20(int param_1)

{
    bool bVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    int iVar5;
    undefined_32 uVar6;
    float10 fVar7;
    float local_70;
    float local_6c;
    float local_68;
    float local_64;
    float local_60;
    float local_5c;
    float local_58;
    float local_54;
    float local_50;
    float local_4c;
    float local_48;
    float local_44;
    undefined_8 local_40[48];
    float local_10;
    float local_c;
    float local_8;

    if ((*(byte *)(param_1 + 0x60) & 0x10) == 0)
    {
        *(undefined_32 *)(param_1 + 0x18c) = 0x3ef5c28f;
    }
    else
    {
        *(undefined_32 *)(param_1 + 0x18c) = 0x3f7ae148;
    }
    if (*(float *)(param_1 + 0x104) < 0.01)
    {
        *(undefined_32 *)(param_1 + 0x104) = 0.01f;
    }
    if (2.0 < *(float *)(param_1 + 0x104))
    {
        *(undefined_32 *)(param_1 + 0x104) = 2.0f;
    }
    iVar5 = rand();
    if (0.0 <= (float)iVar5 * 4.656613e-10 + (float)iVar5 * 4.656613e-10)
    {
        rand();
    }
    else
    {
        rand();
    }
    uVar6 = __ftol();
    *(undefined_32 *)(param_1 + 0xd4) = uVar6;
    if (0 < DAT_004c7084)
    {
        if (DAT_004c7084 == 1)
        {
            if (*(float *)(param_1 + 0xe8) < 0.01)
            {
            LAB_0046b0da:
                *(undefined_32 *)(param_1 + 0xd4) = 0;
            }
            else if (0.07 < *(float *)(param_1 + 0xe0))
            {
                bVar1 = *(float *)(param_1 + 0xe0) < 0.14;
                goto LAB_0046b0d3;
            }
        }
        else if (DAT_004c7084 == 2)
        {
            if ((0.53 < *(float *)(param_1 + 0xe0)) && (*(float *)(param_1 + 0xe0) < 0.54))
                goto LAB_0046b0da;
            if (0.55 < *(float *)(param_1 + 0xe0))
            {
                bVar1 = *(float *)(param_1 + 0xe0) < 0.57;
                goto LAB_0046b0d3;
            }
        }
        else if (DAT_004c7084 == 3)
        {
            if (0.27 < *(float *)(param_1 + 0xe0))
            {
                bVar1 = *(float *)(param_1 + 0xe0) < 0.29;
            LAB_0046b0d3:
                if (bVar1)
                    goto LAB_0046b0da;
            }
        }
        else if (DAT_004c7084 == 4)
        {
            if (0.72 < *(float *)(param_1 + 0xe0))
            {
                bVar1 = *(float *)(param_1 + 0xe0) < 0.73;
                goto LAB_0046b0d3;
            }
        }
        else if (DAT_004c7084 == 5)
        {
            if ((0.063 < *(float *)(param_1 + 0xe0)) && (*(float *)(param_1 + 0xe0) < 0.072))
            {
            LAB_0046b13a:
                *(undefined_32 *)(param_1 + 0xd4) = 1;
            }
        }
        else if (((DAT_004c7084 == 6) && (0.093 < *(float *)(param_1 + 0xe0))) && (*(float *)(param_1 + 0xe0) < 0.108))
            goto LAB_0046b13a;
    }
    FUN_0044eeb0(param_1 + 0xac, local_40, 0);
    local_70 = local_10;
    local_6c = local_c;
    local_68 = local_8;
    FUN_0044eeb0(param_1 + 0xac, local_40, *(undefined_32 *)(param_1 + 0x104));
    if (((((float)*(int *)(param_1 + 0x1998) - 400.0) * 0.001666667 < 1.0) || ((*(byte *)(param_1 + 0x60) & 0x20) != 0))
        || ((*(uint *)(param_1 + 100) & 0x4000000) != 0))
    {
        uVar6 = 1;
    }
    else
    {
        uVar6 = 0;
    }
    FUN_0046aec0(param_1, &local_10, &local_70, uVar6);
    fVar2 = (local_68 - local_8) * (local_68 - local_8) + (local_6c - local_c) * (local_6c - local_c)
        + (local_70 - local_10) * (local_70 - local_10);
    if (*(float *)(param_1 + 0x108) <= fVar2)
    {
        if (*(float *)(param_1 + 0x108) < fVar2)
        {
            fVar2 = *(float *)(param_1 + 0x104) - 0.01;
            goto LAB_0046b258;
        }
    }
    else
    {
        fVar2 = *(float *)(param_1 + 0x104) - -0.01;
    LAB_0046b258:
        *(float *)(param_1 + 0x104) = fVar2;
    }
    local_70 = local_10;
    local_6c = local_c;
    local_68 = local_8;
    vec3f_multiply_add(&local_58, &local_70,
                       (*(float *)(param_1 + 0x54) - local_c) * *(float *)(param_1 + 0x198)
                           + (*(float *)(param_1 + 0x58) - local_8) * *(float *)(param_1 + 0x19c)
                           + (*(float *)(param_1 + 0x50) - local_10) * *(float *)(param_1 + 0x194),
                       (float *)(param_1 + 0x194));
    local_64 = local_58 - *(float *)(param_1 + 0x50);
    local_60 = local_54 - *(float *)(param_1 + 0x54);
    local_5c = local_50 - *(float *)(param_1 + 0x58);
    fVar7 = (float10)rdVector_Len3(&local_64);
    if (fVar7 <= (float10)0.01)
    {
        return;
    }
    fVar7 = (float10)1.0 / fVar7;
    local_64 = (float)((float10)local_64 * fVar7);
    local_60 = (float)((float10)local_60 * fVar7);
    local_5c = (float)((float10)local_5c * fVar7);
    rdVector_Cross3(&local_4c, param_1 + 0x30, &local_64);
    fVar2 = local_48 * *(float *)(param_1 + 0x198) + local_4c * *(float *)(param_1 + 0x194)
        + local_44 * *(float *)(param_1 + 0x19c);
    if (fVar2 <= 0.02)
    {
        fVar3 = 0.0;
        if ((-0.02 <= fVar2) || (fVar3 = fVar2 * -1.428571, -0.3 <= fVar2))
            goto LAB_0046b414;
        fVar4 = fVar2 - -1.0;
    }
    else
    {
        fVar3 = fVar2 * -1.428571;
        if (fVar2 <= 0.3)
            goto LAB_0046b414;
        fVar4 = 1.0 - fVar2;
    }
    fVar3 = fVar2 * -1.428571;
    *(float *)(param_1 + 0x18c) = fVar4 * 0.5 * *(float *)(param_1 + 0x18c);
LAB_0046b414:
    *(float *)(param_1 + 0x1f0) = *(float *)(param_1 + 0x22c) * *(float *)(param_1 + 0x74) * fVar3;
    return;
}

void FUN_0046b430(int param_1)

{
    float fVar1;
    float fVar2;
    int iVar3;
    float10 fVar4;
    float local_60;
    float local_5c;
    float local_58;
    float local_54;
    undefined_32 local_50[4];
    int local_40[4];
    float local_30;
    float local_2c;
    float local_28;

    local_60 = 1.0;
    *(undefined_32 *)(param_1 + 0x150) = 0;
    iVar3 =
        FUN_00450e70(MAGIC('T', 'e', 's', 't'), param_1 + 0x50, 0x451c4000, param_1, 4, local_50, &local_30, local_40);
    if (0 < iVar3)
    {
        rdVector_Cross3(&local_5c, (float *)(param_1 + 0x30), &local_30);
        fVar4 = (float10)SQRT3(local_50[0]);
        fVar1 = (50.0 - (float)fVar4) * 0.2;
        fVar1 = fVar1 * fVar1 * 0.1 * 8.0;
        fVar2 = *(float *)(param_1 + 0x198) * local_58 + *(float *)(param_1 + 0x19c) * local_54
            + *(float *)(param_1 + 0x194) * local_5c;
        if (((iVar3 == 1) && ((*(byte *)(local_40[0] + 0x60) & 0x20) != 0))
            && (*(float *)(param_1 + 0x38) * local_28 + *(float *)(param_1 + 0x34) * local_2c
                    + local_30 * *(float *)(param_1 + 0x30)
                < 0.0))
        {
            local_60 = -1.0;
        }
        if (0.0 < fVar2)
        {
            *(float *)(param_1 + 0x1f0) = local_60 * fVar1 + *(float *)(param_1 + 0x1f0);
            return;
        }
        if (fVar2 < 0.0)
        {
            *(float *)(param_1 + 0x1f0) = *(float *)(param_1 + 0x1f0) - local_60 * fVar1;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 0046b5a0
// TiltFunction
void FUN_0046b5a0(int param_1, float param_2)

{
    float fVar1;

    if (*(float *)(param_1 + 0x1a0) < 200.0) // min speed for tilt
    {
        param_2 = 0.0;
    }
    if (param_2 <= *(float *)(param_1 + 0x208))
    {
        if ((*(float *)(param_1 + 0x208) <= param_2)
            || (fVar1 = *(float *)(param_1 + 0x208) - (float)_DAT_00e22a40 * 3.2, *(float *)(param_1 + 0x208) = fVar1,
                param_2 <= fVar1))
            goto LAB_0046b627;
    }
    else
    {
        fVar1 = *(float *)(param_1 + 0x208) - (float)_DAT_00e22a40 * -3.2;
        *(float *)(param_1 + 0x208) = fVar1;
        if (fVar1 <= param_2)
            goto LAB_0046b627;
    }
    *(float *)(param_1 + 0x208) = param_2;
LAB_0046b627:
    if (param_2 == 0.0)
    {
        // tilt update
        fVar1 = *(float *)(param_1 + 0x208);
        if (*(float *)(param_1 + 0x208) < 0.0)
        {
            fVar1 = -fVar1;
        }
        if (fVar1 < 0.1)
        {
            *(float *)(param_1 + 0x208) = *(float *)(param_1 + 0x208) * 0.5;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 0046b670
// only function that read AI difficulty and spread
// is param_1 a Player or another struct ?
void FUN_0046b670(int param_1)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    int iVar5;
    int iVar6;
    float10 fVar7;

    *(undefined_32 *)(param_1 + 0x230) = DAT_004c707c; // AI level
    if ((*(uint *)(param_1 + 100) & 0x2000000) != 0) // if race complete
    {
        *(undefined_32 *)(param_1 + 0x230) = 0.65;
        if (*(float *)(param_1 + 0x108) <= 5625.0) // what is at 0x108 ?
        {
            *(undefined_32 *)(param_1 + 0x108) = 5625.0;
            *(undefined_32 *)(param_1 + 0x70) = 1500.0; // turn response
            *(undefined_32 *)(param_1 + 0x74) = 400.0; // max turn rate
        }
        else
        {
            fVar1 = (float)_DAT_00e22a40;
            *(undefined_32 *)(param_1 + 0x70) = 1500.0;
            *(undefined_32 *)(param_1 + 0x74) = 400.0;
            *(float *)(param_1 + 0x108) = *(float *)(param_1 + 0x108) - fVar1 * 100.0;
        }
        goto LAB_0046b989;
    }
    fVar7 = (float10)FUN_0047e870();
    fVar2 = DAT_004c7080 * 0.0001;
    fVar1 = (float)((float10)500000.0 / fVar7);
    fVar3 = fVar2 * fVar1;
    if ((*(uint *)(param_1 + 0x60) & 0x100) == 0)
    {
        if (*(short *)(*(int *)(param_1 + 0x1e70) + 0x5c) == 1)
        {
            *(undefined_32 *)(param_1 + 0x138) = 0;
            goto LAB_0046b989;
        }
        fVar4 = *(float *)(param_1 + 0x234) - (float)_DAT_00e22a40;
        *(float *)(param_1 + 0x234) = fVar4;
        if (fVar4 < 0.0)
        {
            iVar5 = rand();
            *(float *)(param_1 + 0x234) = (float)iVar5 * 4.656613e-10 * 10.0 - -8.0;
            iVar5 = rand();
            if (0.15 <= (float)iVar5 * 4.656613e-10)
            {
                if ((float)iVar5 * 4.656613e-10 <= 0.85)
                    goto LAB_0046b86c;
                iVar5 = *(int *)(param_1 + 0x23c);
                iVar6 = iVar5 + 1;
                *(int *)(param_1 + 0x23c) = iVar6;
                if (iVar6 - *(int *)(param_1 + 0x238) < 3)
                {
                    iVar6 = *(int *)(param_1 + 0x238) - iVar6;
                    goto joined_r0x0046b863;
                }
            }
            else
            {
                iVar5 = *(int *)(param_1 + 0x23c);
                iVar6 = iVar5 + -1;
                *(int *)(param_1 + 0x23c) = iVar6;
                if ((1 < iVar6) && (iVar6 - *(int *)(param_1 + 0x238) < 3))
                {
                    iVar6 = *(int *)(param_1 + 0x238) - iVar6;
                joined_r0x0046b863:
                    if (iVar6 < 3)
                        goto LAB_0046b86c;
                }
            }
            *(int *)(param_1 + 0x23c) = iVar5;
        }
    LAB_0046b86c:
        if (0.0 < _DAT_0050cae0)
        {
            fVar1 = *(float *)(param_1 + 0x230) * 1.06;
            *(float *)(param_1 + 0x230) = fVar1;
            *(float *)(param_1 + 0x230) = (1.0 - ((float)*(int *)(param_1 + 0x23c) - 1.0) * _DAT_0050cae0) * fVar1;
            goto LAB_0046b989;
        }
        fVar2 = (((float)*(int *)(param_1 + 0x23c) - 1.0) * fVar2 - 0.0008) * fVar1;
        *(float *)(param_1 + 0x138) = fVar2;
        if ((*(float *)(param_1 + 300) <= fVar3 * 0.25) || ((*(uint *)(param_1 + 0x60) & 0x18000) == 0))
        {
            fVar2 = (*(float *)(param_1 + 300) - fVar2) * 10.0;
        }
        else
        {
            if ((*(uint *)(param_1 + 0x60) & 0x8000) == 0)
            {
                fVar2 = *(float *)(param_1 + 0x134);
            }
            else
            {
                fVar2 = *(float *)(param_1 + 0x130);
            }
            if (fVar2 <= 0.0)
            {
                fVar2 = fVar2 * 10.02;
            }
            else
            {
                fVar2 = fVar2 * 10.3;
            }
        }
        fVar1 = (fVar2 * 40.0) / fVar1 - -1.045;
        if (1.6 < fVar1)
        {
            fVar1 = 1.6;
        }
        if (fVar1 < 0.5)
        {
            fVar1 = 0.5;
        }
    }
    else
    {
        *(undefined_32 *)(param_1 + 0x138) = 0;
        if (*(short *)(*(int *)(param_1 + 0x1e70) + 0x5c) == 1)
        {
            fVar1 = *(float *)(param_1 + 0x230) * 1.06;
        }
        else if (*(float *)(param_1 + 0x130) <= fVar3 * 3.0)
        {
            fVar1 = *(float *)(param_1 + 0x230) * 1.1;
        }
        else
        {
            fVar1 = *(float *)(param_1 + 0x230) * 1.4;
        }
    }
    *(float *)(param_1 + 0x230) = fVar1;
LAB_0046b989:
    if (*(float *)(param_1 + 0x230) <= *(float *)(param_1 + 0x22c))
    {
        if ((*(float *)(param_1 + 0x230) < *(float *)(param_1 + 0x22c))
            && (fVar1 = *(float *)(param_1 + 0x22c) - (float)_DAT_00e22a40 * 0.2, *(float *)(param_1 + 0x22c) = fVar1,
                fVar1 < *(float *)(param_1 + 0x230)))
        {
            *(undefined_32 *)(param_1 + 0x22c) = *(undefined_32 *)(param_1 + 0x230);
        }
    }
    else
    {
        fVar1 = *(float *)(param_1 + 0x22c) + (float)_DAT_00e22a40 * 0.2;
        *(float *)(param_1 + 0x22c) = fVar1;
        if (*(float *)(param_1 + 0x230) < fVar1)
        {
            *(undefined_32 *)(param_1 + 0x22c) = *(undefined_32 *)(param_1 + 0x230);
            return;
        }
    }
    return;
}

void FUN_0046ba30(int param_1)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    undefined_8 local_c[12];

    if (((*(uint *)(param_1 + 0x60) & 0x6000) == 0) && (*(int *)(param_1 + 0x31c) == 0))
    {
        iVar1 = param_1 + 0x50;
        iVar2 = rand(1.0f, iVar1, 0, 1, 50.0f, 500.0f);
        FUN_00426d10(0x87, 6, (float)iVar2 * 4.656613e-10 * 0.04 - -0.23);
        iVar2 = rand(1.0f, iVar1, 0, 1, 50.0f, 500.0f);
        FUN_00426d10(0x88, 7, (float)iVar2 * 4.656613e-10 * 0.04 - -0.23);
        *(undefined_32 *)(param_1 + 0x268) = 0x41700000;
        vec3f_copy(local_c, iVar1);
        uVar3 = FUN_0046a5f0(8, 0, 0x41000000, local_c, 2.0f);
        *(undefined_32 *)(param_1 + 0x31c) = uVar3;
        FUN_0046a970(uVar3, (undefined_32 *)(param_1 + 0x31c));
    }
    return;
}

void FUN_0046bb30(undefined_32 param_1)

{
    FUN_0041df10(-1, 0, MAGIC('f', 'l', 'a', 'm'), param_1);
    return;
}

void FUN_0046bb50(int param_1)

{
    FUN_0046ba30((&DAT_00e29c44)[param_1 * 0x22]);
    return;
}

void FUN_0046bb70(int param_1)

{
    undefined_32 local_20;
    int local_1c;

    if (DAT_0050ca3c != 0)
    {
        local_20 = MAGIC('S', 'n', 'a', 'p');
        local_1c = 2;
        FUN_00450c00(param_1, &local_20);
    }
    if (((DAT_0050c048 & 0x100) != 0) && (DAT_0050c040 != 0))
    {
        FUN_0046a990(param_1, 1);
        if (((DAT_00e98e90 & 0x800) != 0) || ((DAT_00e98e90 & 0x400) != 0))
        {
            local_1c = (-(uint)((DAT_00e98e90 & 0x800) != 0) & 0xfffffffe) + 1;
            local_20 = MAGIC('S', 'n', 'a', 'p');
            FUN_00450c00(param_1, &local_20);
        }
    }
    if (((byte) * (undefined_32 *)(param_1 + 0x60) & 0xf) == 2)
    {
        FUN_0046af20(param_1);
        if ((*(uint *)(param_1 + 0x60) & 0x4000) != 0)
        {
            *(undefined_32 *)(param_1 + 0x18c) = 0;
            return;
        }
        if ((*(byte *)(param_1 + 100) & 0x20) != 0)
        {
            FUN_0046b5a0(param_1, 1.0f);
            return;
        }
        FUN_0046b5a0(param_1, 0);
    }
    return;
}

void FUN_0046bc50(int param_1, undefined_8 *param_2, undefined_8 *param_3, float *param_4)

{
    int iVar1;
    float fVar2;

    *param_2 = 0;
    param_2[1] = 0xff;
    param_2[2] = 0;
    *param_3 = 0xff;
    param_3[1] = 0xff;
    param_3[2] = 0xff;
    param_3[3] = 100;
    *param_4 = 0.0;
    iVar1 = *(int *)(param_1 + 0x210);
    if (iVar1 == 0)
    {
        *param_2 = 0;
        param_2[1] = 0xff;
        param_2[2] = 0;
        *param_3 = 0xff;
        param_3[1] = 0xff;
        param_3[2] = 0xff;
        param_3[3] = 100;
        fVar2 = *(float *)(param_1 + 0x1a0) / (*(float *)(param_1 + 0x7c) * 0.75);
        *param_4 = fVar2;
        if (1.0 < fVar2)
        {
            *param_4 = 1.0;
        }
    }
    else
    {
        if (iVar1 == 1)
        {
            *param_2 = 0;
            param_2[1] = 0xff;
            param_2[2] = 0;
            *param_3 = 0xff;
            param_3[1] = 0x80;
            param_3[2] = 0;
            param_3[3] = 200;
            *param_4 = *(float *)(param_1 + 0x214);
            return;
        }
        if (iVar1 == 2)
        {
            *param_2 = 0xff;
            param_2[1] = 0xff;
            param_2[2] = 0;
            *param_3 = 0xff;
            param_3[1] = 0x80;
            param_3[2] = 0;
            param_3[3] = 200;
            *param_4 = 1.0;
            return;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// BoostChargeFunction
// 0046bd20
undefined_32 FUN_0046bd20(int param_1) // player structure base

{
    uint uVar1;
    int iVar2;
    float fVar3;
    int iVar4;

    iVar4 = __ftol(); // ec8850
    uVar1 = *(uint *)(param_1 + 0x60);
    if (((uVar1 & 0x200000) == 0) || ((uVar1 & 0x800000) != 0))
    {
        *(uint *)(param_1 + 0x60) = uVar1 & 0xffbfffff;
    }
    else
    {
        iVar2 = *(int *)(param_1 + 0x210); // BoostIndicatorStatus
        if (iVar2 == 0)
        {
            // thrustInput == 0.0 && ThrottleInput <= 0.6
            if ((_DAT_00ec884c == 0.0) && (DAT_00ec8830 <= 0.6))
            {
                return 0;
            }
            // pitchInput
            if (_DAT_00ec883c <= 0.7)
            {
                return 0;
            }
            *(undefined_32 *)(param_1 + 0x210) = 1;
            *(undefined_32 *)(param_1 + 0x214) = 0;
            return 0;
        }
        if (iVar2 == 1)
        {
            if (((_DAT_00ec884c != 0.0) || (0.6 < DAT_00ec8830)) && (0.7 < _DAT_00ec883c))
            {
                fVar3 = *(float *)(param_1 + 0x214) + (float)_DAT_00e22a40;
                *(float *)(param_1 + 0x214) = fVar3;
                if (fVar3 <= 1.0)
                {
                    return 0;
                }
                *(undefined_32 *)(param_1 + 0x210) = 2; // boost ready
                return 0;
            }
        }
        else if ((iVar2 == 2) && (0.7 <= _DAT_00ec883c)) // boost ready && 0.7 <= pitchInput
        {
            if (iVar4 == 0)
            {
                return 0;
            }
            // boost button pressed
            *(undefined_32 *)(param_1 + 0x210) = 0;
            iVar4 = rand();
            FUN_00426d10(0x72, 7, (float)iVar4 * 4.656613e-10 * 0.1 - -0.18, 1.0f, param_1 + 0x50, 0, 1, 10.0f, 500.0f);
            return 1;
        }
    }
    *(undefined_32 *)(param_1 + 0x210) = 0;
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046bec0(int param_1)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    uint uVar5;
    bool bVar6;
    undefined_32 uVar7;
    int iVar8;
    uint uVar9;
    char cVar10;
    int iVar11;
    uint uVar12;
    uint uVar13;
    float10 extraout_ST0;
    float10 fVar14;
    undefined_32 uVar15;
    undefined_32 uVar16;
    undefined_32 uVar17;
    undefined_32 uVar18;
    float local_60;
    float local_5c;
    uint local_58;
    uint local_54;
    uint local_50;
    uint local_4c;
    int local_48;
    float local_40;
    int local_3c;
    uint local_38;
    uint local_34;
    int local_30;
    int local_20;
    int local_1c;

    local_48 = 0;
    local_40 = 0.0;
    local_5c = 0.0;
    local_60 = 0.0;
    local_4c = 0;
    bVar6 = false;
    local_50 = 0;
    local_54 = 0;
    local_58 = 0;
    local_38 = 0;
    local_34 = 0;
    local_3c = 0;
    *(undefined_32 *)(param_1 + 0x18c) = 0;
    *(undefined_32 *)(param_1 + 0x1f0) = 0;
    iVar8 = *(int *)(param_1 + 0x1e70);
    uVar13 = (uint) * (char *)(iVar8 + 0x10);
    iVar11 = (int)*(char *)(*(int *)(iVar8 + 0xc) + 0x23);
    *(uint *)(iVar8 + 8) = *(uint *)(iVar8 + 8) & 0xfffffffb;
    *(uint *)(*(int *)(param_1 + 0x1e70) + 8) = *(uint *)(*(int *)(param_1 + 0x1e70) + 8) & 0xfffffff7;
    uVar5 = *(uint *)(param_1 + 0x60);
    uVar9 = (&DAT_00e98e90)[uVar13];
    switch (iVar11)
    {
    case 0:
    case 9:
        if ((DAT_00e996dc & 0x4000) == 0)
        {
            local_5c = DAT_00ec8838;
            local_54 = __ftol();
            local_58 = __ftol();
        }
        else
        {
            local_5c = -DAT_00ec8838;
            local_58 = __ftol();
            local_54 = __ftol();
        }
        local_48 = __ftol();
        local_50 = __ftol();
        local_34 = __ftol();
        local_38 = __ftol();
        local_3c = __ftol();
        if ((_DAT_00ec8864 == 0.0) || (bVar6 = true, _DAT_00ec88c4 <= 0.5))
        {
            bVar6 = false;
        }
        local_4c = __ftol();
        local_40 = DAT_00ec8830;
        if (((DAT_00ec8820 == 0) && (local_50 != 0)) || (local_48 != 0))
        {
            iVar8 = *(int *)(param_1 + 0x1e70);
            uVar12 = *(uint *)(iVar8 + 8) & 0xfffffff7;
        LAB_0046c1e4:
            *(uint *)(iVar8 + 8) = uVar12;
        }
        else if (DAT_00ec8830 != 0.0)
        {
            iVar8 = *(int *)(param_1 + 0x1e70);
            uVar12 = *(uint *)(iVar8 + 8) | 8;
            goto LAB_0046c1e4;
        }
        if (((local_48 != 0) && (DAT_00ec8820 != 0)) && (local_50 != 0))
        {
            local_50 = 0;
        }
        local_60 = (float)(extraout_ST0 * (float10)0.8);
        if ((float10)0.8 < extraout_ST0 * (float10)0.8)
        {
            local_60 = 0.8;
        }
        if (local_60 < -0.8)
        {
            local_60 = 0.8;
        }
        break;
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
        local_5c = (float)(&DAT_00e98ea0)[uVar13];
        if ((DAT_00e996dc & 0x4000) == 0)
        {
            local_54 = uVar9 & 0x10;
            local_58 = uVar9 & 0x20;
        }
        else
        {
            local_58 = uVar9 & 0x10;
            local_5c = -local_5c;
            local_54 = uVar9 & 0x20;
        }
        local_60 = (float)(&DAT_00e98e80)[uVar13];
        local_48 = __ftol();
        local_50 = uVar9 & 2;
        local_38 = uVar9 & 8;
        local_34 = (&DAT_00e98eb0)[uVar13] & 4;
        if (((&DAT_00e98eb0)[uVar13] & 0x80) != 0)
        {
            if (0.25 < (float)_DAT_00e22a38 - *(float *)(param_1 + 0x2f4))
            {
                *(undefined_8 *)(param_1 + 0x2f9) = 0;
            }
            cVar10 = *(char *)(param_1 + 0x2f9) + '\x01';
            *(float *)(param_1 + 0x2f4) = (float)_DAT_00e22a38;
            *(char *)(param_1 + 0x2f9) = cVar10;
            if ('\x01' < cVar10)
            {
                local_3c = 1;
            }
        }
        if ((*(byte *)(&DAT_00e98ec0 + uVar13) & 0x80) != 0)
        {
            *(float *)(param_1 + 0x2f4) = (float)_DAT_00e22a38;
        }
        if ((((&DAT_00e98e90)[uVar13] & 0x80) != 0) && (0.5 < (float)_DAT_00e22a38 - *(float *)(param_1 + 0x2f4)))
        {
            bVar6 = true;
        }
        local_4c = (uint)(((&DAT_00e98e90)[uVar13] & 0x100) != 0);
        if (iVar11 == 1)
        {
            local_4c = (uint)(local_48 == 0);
        }
    }
    local_30 = FUN_0046bd20(param_1, uVar13);
    uVar12 = local_34;
    if ((DAT_0050c048 & 0x2000000) != 0)
    {
        uVar13 = (uint)(*(char *)(*(int *)(param_1 + 0x1e70) + 0x10) != '\0');
        fVar1 = (float)(&DAT_00e98ea0)[uVar13];
        fVar2 = (float)(&DAT_00e98e80)[uVar13];
        fVar3 = *(float *)(&DAT_00e98ea8 + uVar13 * 4);
        fVar4 = *(float *)(&DAT_00e98e88 + uVar13 * 4);
        if ((0.3 < fVar2) || (0.3 < fVar4))
        {
            local_48 = 1;
        }
        else
        {
            local_48 = 0;
        }
        if ((DAT_00e996dc & 0x4000) == 0)
        {
            local_5c = (fVar2 - fVar4) * 0.5;
            if ((-0.5 <= fVar1) || (local_54 = 1, -0.5 <= fVar3))
            {
                local_54 = 0;
            }
            if ((fVar1 <= 0.5) || (local_58 = 1, fVar3 <= 0.5))
            {
                local_58 = 0;
            }
        }
        else
        {
            local_5c = (fVar2 - fVar4) * -0.5;
            if ((-0.5 <= fVar1) || (local_58 = 1, -0.5 <= fVar3))
            {
                local_58 = 0;
            }
            if ((fVar1 <= 0.5) || (fVar3 <= 0.5))
            {
                local_54 = 0;
            }
            else
            {
                local_54 = 1;
            }
        }
        local_60 = (*(float *)(&DAT_00e98e88 + uVar13 * 4) + (float)(&DAT_00e98e80)[uVar13]) * 0.5;
        if ((-0.6 <= fVar2) || (local_50 = 1, -0.6 <= fVar4))
        {
            local_50 = 0;
        }
        uVar12 = (&DAT_00e98eb0)[uVar13] & 4;
        local_38 = (&DAT_00e98e90)[uVar13] & 8;
        if (((&DAT_00e98eb0)[uVar13] & 0x80) != 0)
        {
            if (0.25 < (float)_DAT_00e22a38 - *(float *)(param_1 + 0x2f4))
            {
                *(undefined_8 *)(param_1 + 0x2f9) = 0;
            }
            cVar10 = *(char *)(param_1 + 0x2f9) + '\x01';
            *(float *)(param_1 + 0x2f4) = (float)_DAT_00e22a38;
            *(char *)(param_1 + 0x2f9) = cVar10;
            if ('\x01' < cVar10)
            {
                local_3c = 1;
            }
        }
        if ((*(byte *)(&DAT_00e98ec0 + uVar13) & 0x80) != 0)
        {
            *(float *)(param_1 + 0x2f4) = (float)_DAT_00e22a38;
        }
        if (((*(byte *)(&DAT_00e98e90 + uVar13) & 0x80) != 0)
            && (0.5 < (float)_DAT_00e22a38 - *(float *)(param_1 + 0x2f4)))
        {
            bVar6 = true;
        }
        if ((fVar1 <= 0.5) || (-0.5 <= fVar3))
        {
            local_4c = 0;
        }
        else
        {
            local_4c = 1;
        }
    }
    *(undefined_32 *)(param_1 + 0xd4) = 0;
    if (0 < DAT_004c7084)
    {
        if (((DAT_004c7084 == 5) && (0.063 < *(float *)(param_1 + 0xe0))) && (*(float *)(param_1 + 0xe0) < 0.072))
        {
            *(undefined_32 *)(param_1 + 0xd4) = 1;
        }
        if (((DAT_004c7084 == 6) && (0.093 < *(float *)(param_1 + 0xe0))) && (*(float *)(param_1 + 0xe0) < 0.108))
        {
            *(undefined_32 *)(param_1 + 0xd4) = 1;
        }
    }
    local_34 = FUN_0046a9c0(param_1);
    if (local_34 != 0)
    {
        local_34 = 1;
        local_54 = 0;
        local_58 = 0;
        local_30 = 0;
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xff7fffff;
    }
    if ((((*(uint *)(param_1 + 0x60) & 0x10) != 0) && ((*(uint *)(param_1 + 0x60) & 0x200) == 0))
        && ((*(uint *)(param_1 + 100) & 0x2000000) == 0))
    {
        fVar14 = (float10)FUN_0046a9f0(param_1);
        if ((local_34 & 1) == 0)
        {
            if ((local_34 & 2) != 0)
            {
                fVar14 = fVar14 - (float10)0.2;
            }
        }
        else
        {
            fVar14 = fVar14 - (float10)-0.2;
        }
        fVar1 = (float)(fVar14 * (float10)1.5);
        if (fVar14 * (float10)1.5 == (float10)0.0)
        {
            FUN_0040a0b0(1);
        }
        else
        {
            uVar7 = __ftol((uint)(0.0 <= fVar1) * 0xb4 + 0x5a, -1, 0);
            FUN_00409ee0(1, uVar7);
            DAT_004d78a0 = 1;
        }
        local_5c = local_5c - fVar1 * -0.6;
        _DAT_0050cae4 = fVar1;
    }
    if ((DAT_0050c048 & 0x100) != 0)
    {
        if ((DAT_0050c040 != 0) && (((uVar9 & 0x800) != 0 || ((uVar9 & 0x400) != 0))))
        {
            local_1c = (-(uint)((uVar9 & 0x800) != 0) & 0xfffffffe) + 1;
            local_20 = MAGIC('S', 'n', 'a', 'p');
            FUN_00450c00(param_1, &local_20);
        }
        if (((DAT_0050c048 & 0x100) != 0) && (DAT_0050c040 != 0))
        {
            FUN_0046a990(param_1, uVar13);
        }
    }
    if ((local_3c != 0) || (DAT_004d79e0 != 0))
    {
        DAT_004d79e0 = 0;
        if ((((byte) * (uint *)(param_1 + 0x60) & 0xf) == 2)
            && (((*(uint *)(param_1 + 0x60) & 0x5800) == 0 && ((*(uint *)(param_1 + 100) & 0x4000) == 0))))
        {
            if (**(int **)(*(int *)(param_1 + 0x1e70) + 0x18) == 2)
            {
                FUN_0046ba30(param_1);
                FUN_0046bb30(**(undefined_32 **)(param_1 + 0x1e70));
            }
            iVar8 = rand();
            if (0.5 <= (float)iVar8 * 4.656613e-10)
            {
                uVar18 = 0x19;
                uVar17 = 0x18;
                uVar16 = 0x17;
                uVar15 = 0x16;
                iVar8 = **(int **)(*(int *)(param_1 + 0x1e70) + 0x18);
                uVar7 = 0x15;
            LAB_0046c78f:
                uVar15 = FUN_00427590(1, iVar8, uVar7, uVar15, uVar16, uVar17, uVar18, param_1 + 0x50);
                uVar7 = **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18);
                uVar16 = -1;
            }
            else
            {
                iVar8 = **(int **)(*(int *)(param_1 + 0x1e70) + 0x18);
                if (iVar8 == 0xe)
                {
                    uVar18 = 0x14;
                    uVar17 = 0x13;
                    uVar16 = 0x12;
                    uVar15 = 0x12;
                    uVar7 = 3;
                    goto LAB_0046c78f;
                }
                uVar15 = FUN_00427590(1, iVar8, 3, 0x11, 0x12, 0x13, 0x14, param_1 + 0x50);
                uVar7 = **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18);
                uVar16 = 1;
            }
            FUN_0041df10(uVar16, 0, MAGIC('t', 'a', 'u', 'n'), 1, uVar7, uVar15);
        }
    }
    if (local_38 == 0)
    {
        uVar9 = *(uint *)(param_1 + 0x60) & 0xffefffff;
    }
    else
    {
        uVar9 = *(uint *)(param_1 + 0x60) | 0x100000;
    }
    *(uint *)(param_1 + 0x60) = uVar9;
    if (bVar6)
    {
        uVar9 = *(uint *)(param_1 + 0x60) | 0x400;
    }
    else
    {
        uVar9 = *(uint *)(param_1 + 0x60) & 0xfffffbff;
    }
    *(uint *)(param_1 + 0x60) = uVar9;
    *(uint *)(param_1 + 0x60) = uVar9 & 0x7fffffff;
    if (((uVar9 & 0xf) != 0) && ((uVar9 & 0x4000) == 0))
    {
        if (uVar12 == 0)
        {
            if (DAT_00ec83d0 != 0)
            {
                local_20 = DAT_00ec83d0;
                local_1c = param_1;
                FUN_00450c50(MAGIC('c', 'M', 'a', 'n'), &local_20);
                DAT_00ec83d0 = 0;
            }
        }
        else
        {
            local_20 = 0x43427574;
            local_1c = param_1;
            FUN_00450c50(MAGIC('c', 'M', 'a', 'n'), &local_20);
        }
    }
    FUN_0046aa30(param_1);
    FUN_0046ab10(param_1);
    if ((*(uint *)(param_1 + 0x60) & 0x2000000) != 0)
    {
        if ((0.05 <= local_60) || (0.05 <= -local_60))
        {
            fVar1 = local_60 * 1.25 * local_60 * 1.25;
            if (local_60 < 0.0)
            {
                fVar1 = -fVar1;
            }
            *(float *)(param_1 + 0x224) = -(*(float *)(param_1 + 0x74) * fVar1 * 0.8) * 0.5;
        }
        else
        {
            *(undefined_32 *)(param_1 + 0x224) = 0;
        }
        local_60 = 0.0;
    }
    if (((((_DAT_00ec884c != 0.0) && (_DAT_00ec88ac < 0.2)) && (0.0 < _DAT_00ec88ac))
         || (((0.6 < DAT_00ec8830 && (_DAT_00ec8850 != 0.0)) && ((_DAT_00ec88b0 < 0.2 && (0.0 < _DAT_00ec88b0))))))
        && (uVar9 = *(uint *)(param_1 + 100), (uVar9 & 0x1000) == 0))
    {
        *(uint *)(param_1 + 100) = uVar9 | 0x1000;
        if ((uVar9 & 0x800) != 0)
        {
            *(uint *)(param_1 + 100) =
                uVar9 & 0xffff0000 | (uint)CONCAT11((char)((uVar9 | 0x1000) >> 8), (char)uVar9) | 0x2000;
        }
    }
    if ((*(uint *)(param_1 + 100) & 0x2000) != 0)
    {
        iVar8 = FUN_00427670(0, 0x80000);
        if (iVar8 == 0)
        {
            FUN_00427590(1, **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), 2, 2, 2, 2, 2, param_1 + 0x50);
            FUN_00427690(0, 0x80000);
        }
        if (((_DAT_00ec884c == 0.0) && (DAT_00ec8830 <= 0.6)) || (290.0 < *(float *)(param_1 + 0x1a0)))
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xffffdfff;
        }
    }
    uVar9 = *(uint *)(param_1 + 0x60);
    if (((byte)uVar9 & 0xf) != 2)
    {
        return;
    }
    if ((uVar9 & 0x4000) != 0)
    {
        return;
    }
    if (local_50 == 0)
    {
        *(uint *)(param_1 + 0x60) = uVar9 & 0xfffffdff;
    }
    else
    {
        *(uint *)(param_1 + 0x60) = uVar9 | 0x200;
        if (*(float *)(param_1 + 0x1a0) < 70.0)
        {
            *(uint *)(param_1 + 0x60) = uVar9 & 0xffffffef | 0x200;
        }
    }
    if ((*(byte *)(*(int *)(param_1 + 0x1e70) + 8) & 8) == 0)
    {
        if (local_48 == 0)
        {
            if ((-0.5 <= local_60) || (20.0 <= *(float *)(param_1 + 0x1a0)))
            {
                *(undefined_32 *)(param_1 + 0x18c) = 0.1f;
            }
            else
            {
                *(float *)(param_1 + 0x18c) = local_60 * 0.4;
            }
        }
        else
        {
            *(undefined_32 *)(param_1 + 0x18c) = 1.0f;
            if (local_34 != 0)
            {
                *(undefined_32 *)(param_1 + 0x18c) = 0.5f;
            }
        }
    }
    else
    {
        fVar1 = (local_40 - -1.0) * 0.5 * 1.176471;
        *(float *)(param_1 + 0x18c) = fVar1;
        if (1.0 < fVar1)
        {
            *(undefined_32 *)(param_1 + 0x18c) = 1.0f;
        }
        if (*(float *)(param_1 + 0x18c) < -1.0)
        {
            *(undefined_32 *)(param_1 + 0x18c) = -1.0f;
        }
    }
    if ((*(float *)(param_1 + 0x264) <= 0.0) && (0.3 < *(float *)(param_1 + 0x18c)))
    {
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x10;
    }
    uVar9 = *(uint *)(param_1 + 100);
    uVar13 = 1;
    if ((uVar9 & 0x200) == 0)
    {
        uVar13 = local_4c;
    }
    if (uVar13 == 0)
    {
        uVar9 = uVar9 & 0xfffffff7;
    }
    else
    {
        uVar9 = uVar9 | 8;
    }
    *(uint *)(param_1 + 100) = uVar9;
    if ((local_48 != 0) || (0.5 < local_40))
    {
        uVar9 = *(uint *)(param_1 + 100) & 0xfffffffb;
    }
    else
    {
        uVar9 = *(uint *)(param_1 + 100) | 4;
    }
    *(uint *)(param_1 + 100) = uVar9;
    if ((uVar13 == 0) || (*(float *)(param_1 + 0x1a0) <= 100.0))
    {
        fVar1 = *(float *)(param_1 + 0x1e8) - (float)_DAT_00e22a40 * 0.5;
        *(float *)(param_1 + 0x1e8) = fVar1;
        if (fVar1 < 0.0)
        {
            *(undefined_32 *)(param_1 + 0x1e8) = 0;
        }
    }
    else
    {
        fVar1 = *(float *)(param_1 + 0x1e8) - (float)_DAT_00e22a40 * -0.5;
        *(float *)(param_1 + 0x1e8) = fVar1;
        if (1.0 < fVar1)
        {
            *(undefined_32 *)(param_1 + 0x1e8) = 1.0f;
        }
    }
    if ((local_30 != 0) && ((uVar5 & 0x200000) != 0))
    {
        rand();
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x800000;
    }
    if ((((*(uint *)(param_1 + 0x60) & 0x800000) != 0) && (local_48 == 0)) && (local_40 <= 0.5))
    {
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xff7fffff;
    }
    *(float *)(param_1 + 0x1f14) = *(float *)(param_1 + 0x1f14) - (float)_DAT_00e22a40;
    if (((local_54 != 0) || (local_58 != 0)) && ((*(uint *)(param_1 + 100) & 0x400) != 0))
    {
        FUN_00426c80(0x4b, 7, 0.5f, 1.0f, 1);
    }
    if (local_54 == 0)
    {
        if (local_58 != 0)
            goto LAB_0046cca5;
    }
    else
    {
        if (local_58 == 0)
        {
            uVar7 = -1.0f;
            goto LAB_0046ccae;
        }
    LAB_0046cca5:
        if (local_54 == 0)
        {
            uVar7 = 1.0f;
            goto LAB_0046ccae;
        }
    }
    uVar7 = 0;
LAB_0046ccae:
    FUN_0046b5a0(param_1, uVar7);
    if ((0.05 <= local_5c) || (0.05 <= -local_5c))
    {
        fVar1 = local_5c * 1.25 * local_5c * 1.25;
        if (local_5c < 0.0)
        {
            fVar1 = -fVar1;
        }
        *(float *)(param_1 + 0x1f0) = -(*(float *)(param_1 + 0x74) * fVar1 * 0.8);
    }
    else
    {
        *(undefined_32 *)(param_1 + 0x1f0) = 0;
    }
    *(float *)(param_1 + 0x2fc) = local_60;
    if ((0.1 < local_60)
        && (*(float *)(param_1 + 0x1f0) = (1.0 - local_60 * 0.4) * *(float *)(param_1 + 0x1f0),
            0.5 < *(float *)(param_1 + 0x18c)))
    {
        *(float *)(param_1 + 0x18c) = *(float *)(param_1 + 0x18c) - local_60 * -0.4;
    }
    if (((local_60 < -0.1)
         && (*(float *)(param_1 + 0x1f0) = (1.0 - local_60 * 0.4) * *(float *)(param_1 + 0x1f0),
             (*(uint *)(param_1 + 100) & 0x200) == 0))
        && (0.5 < *(float *)(param_1 + 0x18c)))
    {
        *(float *)(param_1 + 0x18c) = *(float *)(param_1 + 0x18c) - local_60 * -0.4;
    }
    if (((*(uint *)(param_1 + 0x60) & 0x400000) != 0) && (*(float *)(param_1 + 0x18c) < 1.2))
    {
        *(undefined_32 *)(param_1 + 0x18c) = 0x3f99999a;
    }
    *(undefined_32 *)(param_1 + 0x22c) = 1.0f;
    return;
}

void FUN_0046ce30(int param_1)

{
    float fVar1;
    int iVar2;
    float10 fVar3;

    if (((*(uint *)(param_1 + 0x60) & 0x20) == 0) || (*(int *)(*(int *)(param_1 + 0x1e70) + 0xc) == 0))
    {
        if ((*(uint *)(param_1 + 0x60) & 0x80) != 0)
        {
            FUN_0046b670(param_1);
            *(undefined_32 *)(param_1 + 0x1ac) = *(undefined_32 *)(param_1 + 0x22c);
            return;
        }
        *(undefined_32 *)(param_1 + 0x22c) = 1.0f;
    }
    else
    {
        *(undefined_32 *)(param_1 + 0x22c) = 1.0f;
        iVar2 = FUN_0045d350();
        if ((1 < iVar2) && (0.0 < *(float *)(param_1 + 0x130)))
        {
            fVar3 = (float10)FUN_0047e870();
            fVar1 = (*(float *)(param_1 + 0x130) * 100.0) / (float)((float10)500000.0 / fVar3) - -1.0;
            *(float *)(param_1 + 0x22c) = fVar1;
            if (1.25 < fVar1)
            {
                *(undefined_32 *)(param_1 + 0x22c) = 0x3fa00000;
                *(undefined_32 *)(param_1 + 0x1ac) = *(undefined_32 *)(param_1 + 0x22c);
                return;
            }
        }
    }
    *(undefined_32 *)(param_1 + 0x1ac) = *(undefined_32 *)(param_1 + 0x22c);
    return;
}

void FUN_0046cf00(int param_1)

{
    uint uVar1;
    float fVar2;
    float fVar3;

    uVar1 = *(uint *)(param_1 + 0x60);
    *(undefined_32 *)(param_1 + 0x18c) = 0;
    *(undefined_32 *)(param_1 + 0x1f0) = 0;
    if (((uVar1 & 0x20) == 0) || (*(int *)(*(int *)(param_1 + 0x1e70) + 0xc) == 0))
    {
        if ((uVar1 & 0x40) == 0)
        {
            if ((uVar1 & 0x80) != 0)
            {
                FUN_0046bb70(param_1);
                if ((*(uint *)(param_1 + 100) & 0x4000000) != 0)
                {
                    *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x400;
                    FUN_0046ab10(param_1);
                }
                if (((byte) * (undefined_32 *)(param_1 + 0x60) & 0xf) == 2)
                {
                    FUN_0046b430(param_1);
                }
            }
        }
        else
        {
            if (((byte)uVar1 & 0xf) != 2)
            {
                return;
            }
            *(undefined_32 *)(param_1 + 0x1f0) = *(undefined_32 *)(param_1 + 0x1ec8);
        }
    }
    else
    {
        FUN_0046bec0(param_1);
    }
    if (((byte) * (undefined_32 *)(param_1 + 0x60) & 0xf) == 2)
    {
        FUN_0046ce30(param_1);
    }
    if ((*(byte *)(param_1 + 0x60) & 0x80) != 0)
    {
        *(float *)(param_1 + 0x18c) = *(float *)(param_1 + 0x1ac) * *(float *)(param_1 + 0x18c);
    }
    if (0.0 < *(float *)(param_1 + 0x264))
    {
        *(undefined_32 *)(param_1 + 0x18c) = 0;
    }
    fVar3 = *(float *)(param_1 + 0x1f0) * *(float *)(param_1 + 0x22c);
    fVar2 = *(float *)(param_1 + 0x74) * *(float *)(param_1 + 0x22c);
    *(float *)(param_1 + 0x1f0) = fVar3;
    if (fVar2 < fVar3)
    {
        *(float *)(param_1 + 0x1f0) = fVar2;
    }
    if (-fVar2 <= *(float *)(param_1 + 0x1f0))
    {
        return;
    }
    *(float *)(param_1 + 0x1f0) = -fVar2;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046d040(int param_1)

{
    float fVar1;
    float *pfVar2;
    int iVar3;
    undefined_32 local_20[8];

    *(undefined_32 *)(param_1 + 0x1a4) = 0;
    *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xffffffef;
    fVar1 = *(float *)(param_1 + 0x310) - (float)_DAT_00e22a40;
    *(float *)(param_1 + 0x310) = fVar1;
    if (fVar1 <= 0.0)
    {
        local_20[0] = MAGIC('S', 'n', 'a', 'p');
        FUN_00450c00(param_1, local_20);
        pfVar2 = (float *)(param_1 + 0x288);
        iVar3 = 6;
        do
        {
            pfVar2[6] = (float)((uint)pfVar2[6] & 0xfffffff7);
            if (0.1 < *pfVar2)
            {
                *pfVar2 = 0.1;
            }
            pfVar2 = pfVar2 + 1;
            iVar3 = iVar3 + -1;
        } while (iVar3 != 0);
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xfffff7ff;
        if ((*(byte *)(param_1 + 0x60) & 0x20) != 0)
        {
            FUN_00405cf0(1);
            FUN_0040a120(0);
            FUN_0040b110(param_1);
        }
    }
    return;
}

void FUN_0046d100(int param_1)

{
    uint uVar1;

    uVar1 = *(uint *)(param_1 + 0x60);
    if ((uVar1 & 0x1000) != 0)
    {
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xfffe3fff;
        *(uint *)(param_1 + 0x60) = uVar1 & 0xffffefff;
        if (((byte)(uVar1 & 0xffffefff) & 0xf) == 2)
        {
            if ((uVar1 & 0x4000) == 0)
            {
                FUN_00474970(param_1, 0);
            }
            if ((*(byte *)(param_1 + 0x60) & 0x20) != 0)
            {
                FUN_00427590(1, **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), 0xe, 0xe, 0xe, 0xe, 0xe,
                             param_1 + 0x50);
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// Never called ? Yet many things cascade from here. Or is it used in a thread / fork ?
void FUN_0046d170(int param_1)

{
    int iVar1;
    uint uVar2;
    uint uVar3;
    int *piVar4;
    float local_f0;
    float local_ec;
    float local_e8;
    int local_e4;
    int local_e0[8];
    undefined_8 local_c0[48];
    undefined_32 local_90;
    undefined_32 local_8c;
    undefined_32 local_88;
    undefined_8 local_80[32];
    undefined_8 local_60[96];

    uVar2 = *(uint *)(param_1 + 0x60);
    if ((uVar2 & 0x80) != 0)
    {
        if ((((byte)uVar2 & 0xf) == 2) && ((uVar2 & 0x6000) == 0))
        {
            if ((5.0 < *(float *)(param_1 + 0x110)) || (((uVar2 & 0x100) != 0 && (2.0 < *(float *)(param_1 + 0x110)))))
            {
                *(uint *)(param_1 + 0x60) = uVar2 | 0x1000;
            }
        }
        else
        {
            *(undefined_32 *)(param_1 + 0x110) = 0;
        }
    }
    if ((*(uint *)(param_1 + 0x60) & 0x20000) != 0)
    {
        FUN_00473f40(param_1, 0.5f);
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xfffdffff;
    }
    if (((((*(byte *)(param_1 + 0x60) & 0x80) != 0) && (**(int **)(*(int *)(param_1 + 0x1e70) + 0x18) == 2))
         && (200.0 < *(float *)(param_1 + 0x1a0)))
        && (2 < *(int *)(*(int *)(param_1 + 0x1e70) + 0x78) + 1))
    {
        local_f0 = *(float *)(param_1 + 0x50);
        local_ec = *(float *)(param_1 + 0x54);
        local_e8 = *(float *)(param_1 + 0x58);
        iVar1 = FUN_00450e70(MAGIC('T', 'e', 's', 't'), &local_f0, 0x461c4000, 0, 2, local_80, local_60, local_e0);
        if (0 < iVar1)
        {
            piVar4 = local_e0;
            do
            {
                if (*piVar4 != param_1)
                {
                    vec3f_sub(&local_f0, *piVar4 + 0x50, param_1 + 0x50);
                    if (0.0 < *(float *)(param_1 + 0x20) * local_f0 + *(float *)(param_1 + 0x24) * local_ec
                            + *(float *)(param_1 + 0x28) * local_e8)
                    {
                        FUN_0046ba30(param_1);
                    }
                }
                piVar4 = piVar4 + 1;
                iVar1 = iVar1 + -1;
            } while (iVar1 != 0);
        }
    }
    if (*(float *)(*(int *)(param_1 + 0x1e70) + 0x74) < 10.0)
    {
        *(undefined_32 *)(param_1 + 0x268) = 5.0f;
    }
    if (*(int *)(param_1 + 0x31c) == 0)
    {
        *(float *)(param_1 + 0x268) = *(float *)(param_1 + 0x268) - (float)_DAT_00e22a40;
    }
    else if (*(float *)(param_1 + 0x268) < 5.0)
    {
        *(undefined_32 *)(param_1 + 0x268) = 5.0f;
    }
    FUN_00482e60((undefined_32 *)(param_1 + 0x50));
    local_e4 = __ftol();
    *(int *)(param_1 + 0x1998) = local_e4;
    if ((((((float)local_e4 - 400.0) * 0.001666667 < 1.0) || ((*(byte *)(param_1 + 0x60) & 0x20) != 0))
         || ((*(uint *)(param_1 + 100) & 0x4000000) != 0))
        && ((*(uint *)(param_1 + 100) & 2) != 0))
    {
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xfffffffd;
        FUN_0044eeb0(param_1 + 0xac, local_c0, 0);
        *(undefined_32 *)(param_1 + 0x50) = local_90;
        *(undefined_32 *)(param_1 + 0x54) = local_8c;
        *(undefined_32 *)(param_1 + 0x58) = local_88;
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x10000000;
    }
    uVar2 = *(uint *)(param_1 + 0x60);
    uVar3 = uVar2 & 0xfff7ffff;
    *(uint *)(param_1 + 0x60) = uVar3;
    if (((uVar2 & 0x20) == 0) && (*(float *)(param_1 + 0x264) <= 0.0))
    {
        *(uint *)(param_1 + 0x60) = uVar3 | 0x10;
    }
    uVar2 = *(uint *)(param_1 + 0x60);
    uVar3 = uVar2 & 0xffdfffff;
    *(uint *)(param_1 + 0x60) = uVar3;
    if (((*(float *)(param_1 + 0x7c) * 0.75 < *(float *)(param_1 + 0x1a0)) && ((uVar2 & 0x7000) == 0))
        && ((*(uint *)(param_1 + 100) & 0x4000) == 0))
    {
        *(uint *)(param_1 + 0x60) = uVar3 | 0x200000;
    }
    if ((*(float *)(param_1 + 0x1a0) <= *(float *)(param_1 + 0x7c)) || ((*(uint *)(param_1 + 0x60) & 0x800000) == 0))
    {
        uVar2 = *(uint *)(param_1 + 0x60) & 0xbfffffff;
    }
    else
    {
        uVar2 = *(uint *)(param_1 + 0x60) | 2.0f;
    }
    *(uint *)(param_1 + 0x60) = uVar2;
    FUN_0046cf00(param_1);
    if (0.0 < *(float *)(param_1 + 0x264))
    {
        *(float *)(param_1 + 0x264) = *(float *)(param_1 + 0x264) - (float)_DAT_00e22a40;
    }
    FUN_00426910(param_1);
    if ((*(uint *)(param_1 + 0x60) & 0x800) != 0)
    {
        FUN_0046d040(param_1);
    }
    FUN_0046d100(param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046d4c0(int param_1)

{
    int iVar1;
    int iVar2;

    if (*(int *)(param_1 + 0x344) != 0)
    {
        _DAT_004c7a50 = 0;
        iVar2 = 0;
        do
        {
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + iVar2);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 3, 0x10, 2);
            }
            iVar2 = iVar2 + 4;
        } while (iVar2 < 300);
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0xf4);
        if (iVar2 != 0)
        {
            FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
        }
        iVar2 = 0xf8;
        do
        {
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + iVar2);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 3, 0x10, 2);
            }
            iVar2 = iVar2 + 4;
        } while (iVar2 < 0x101);
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x40);
        if (iVar2 != 0)
        {
            FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
        }
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x38);
        if (iVar2 != 0)
        {
            FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
        }
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x3c);
        if (iVar2 != 0)
        {
            FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
        }
    }
    return;
}

void FUN_0046d5c0(int *param_1, undefined_32 param_2)

{
    int *piVar1;
    int iVar2;

    iVar2 = *param_1;
    while (iVar2 != 0)
    {
        FUN_00426810(iVar2, 0x10000000);
        FUN_00426840(*param_1, 0);
        FUN_00426880(*param_1, param_2);
        piVar1 = param_1 + 1;
        param_1 = param_1 + 1;
        iVar2 = *piVar1;
    }
    return;
}

void FUN_0046d610(int *param_1)

{
    int *piVar1;
    int iVar2;

    iVar2 = *param_1;
    while (iVar2 != 0)
    {
        FUN_00426820(iVar2, 0x10000000);
        FUN_00426840(*param_1, 0);
        piVar1 = param_1 + 1;
        param_1 = param_1 + 1;
        iVar2 = *piVar1;
    }
    return;
}

int FUN_0046d650(int *param_1)

{
    int iVar1;

    iVar1 = *param_1;
    if (iVar1 == 0)
    {
        return 0;
    }
    while (((*(uint *)(iVar1 + 0x100) & 0x10000000) != 0 && (*(float *)(iVar1 + 0x114) < *(float *)(iVar1 + 0x108))))
    {
        iVar1 = param_1[1];
        param_1 = param_1 + 1;
        if (iVar1 == 0)
        {
            return iVar1;
        }
    }
    return 1;
}

undefined_32 FUN_0046d690(void)

{
    return 0;
}

void FUN_0046d6a0(int param_1)

{
    float fVar1;
    int iVar2;

    fVar1 = *(float *)(param_1 + 0x250);
    iVar2 = *(int *)(param_1 + 0x344);
    if (iVar2 != 0)
    {
        if (*(int *)(iVar2 + 4) != 0)
        {
            *(float *)(param_1 + 0x3c8) = fVar1 + *(float *)(param_1 + 0x3c8);
        }
        if (*(int *)(iVar2 + 8) != 0)
        {
            *(float *)(param_1 + 0x408) = fVar1 + *(float *)(param_1 + 0x408);
        }
        if (*(int *)(iVar2 + 0xc) != 0)
        {
            *(float *)(param_1 + 0x448) = fVar1 + *(float *)(param_1 + 0x448);
        }
        if (*(int *)(iVar2 + 0x10) != 0)
        {
            *(float *)(param_1 + 0x488) = fVar1 + *(float *)(param_1 + 0x488);
        }
        if (*(int *)(iVar2 + 0x14) != 0)
        {
            *(float *)(param_1 + 0x4c8) = fVar1 + *(float *)(param_1 + 0x4c8);
        }
    }
    return;
}

float10 FUN_0046d730(float param_1, float param_2, float param_3, float param_4, float param_5, float param_6)

{
    float10 fVar1;

    fVar1 = (float10)param_1;
    if ((float10)(param_5 + param_2) < fVar1)
    {
        fVar1 = (float10)(param_5 + param_2);
    }
    if (fVar1 < (float10)(param_2 - param_6))
    {
        fVar1 = (float10)(param_2 - param_6);
    }
    if (fVar1 < (float10)param_3)
    {
        fVar1 = (float10)param_3;
    }
    if ((float10)param_4 < fVar1)
    {
        fVar1 = (float10)param_4;
    }
    return fVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// param_1, 0.7f
void FUN_0046d7a0(float param_1, float param_2)

{
    uint *puVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    short sVar5;
    short sVar6;
    float fVar7;
    int iVar8;
    short sVar9;
    int iVar10;
    int iVar11;
    int iVar12;
    int iVar13;
    bool bVar14;
    float10 fVar15;
    float local_18;

    iVar8 = (int)param_1;
    fVar7 =
        (1.0
         - (*(float *)(&DAT_004c2be0 + **(int **)(*(int *)((int)param_1 + 0x1e70) + 0x18) * 0x3c) - 50.0) * 0.04347826)
            * 0.5
        - -0.75;
    fVar15 = (float10)FUN_0047f810((int)param_1 + 0xac);
    FUN_00427b20(DAT_0050ca8c, DAT_0050ca90, (float)fVar15, *(undefined_32 *)((int)param_1 + 0x1a0));
    bVar14 = (*(uint *)((int)param_1 + 0x60) & 0x5800) == 0;
    iVar13 = *(int *)((int)param_1 + 0x1e70);
    iVar10 = FUN_0045d350();
    if (iVar10 == 0)
    {
        iVar12 = 0;
    }
    else
    {
        iVar12 = FUN_0045d3d0(iVar13);
        if (iVar12 < 0)
        {
            return;
        }
    }
    fVar3 = *(float *)((int)param_1 + 0x1a0) / *(float *)(iVar13 + 0x2c);
    if (((byte) * (undefined_32 *)((int)param_1 + 0x60) & 0xf) != 2)
    {
        (&DAT_0050cae8)[iVar12] = 0;
        (&DAT_004c7a58)[iVar12] = 1.0f;
        DAT_0050cb00 = 0;
    }
    iVar13 = (&DAT_0050cae8)[iVar12];
    fVar4 = (float)(&DAT_004c7a70)[iVar13] - 0.1;
    if (fVar4 < 0.0)
    {
        fVar4 = 0.0;
    }
    sVar5 = *(short *)(&DAT_0050cae8 + iVar12);
    fVar2 = (float)(&DAT_004c7a74)[iVar13];
    if (fVar3 < fVar4)
    {
        (&DAT_0050cae8)[iVar12] = iVar13 + -1;
    }
    if (fVar2 - -0.1 < fVar3)
    {
        (&DAT_0050cae8)[iVar12] = (&DAT_0050cae8)[iVar12] + 1;
    }
    if ((int)(&DAT_0050cae8)[iVar12] < 0)
    {
        (&DAT_0050cae8)[iVar12] = 0;
    }
    if (3 < (int)(&DAT_0050cae8)[iVar12])
    {
        (&DAT_0050cae8)[iVar12] = 3;
    }
    sVar6 = *(short *)(&DAT_0050cae8 + iVar12);
    if (iVar12 == 0)
    {
        sVar9 = (short)(&DAT_0050cae8)[iVar12] + 0xaa;
    }
    else
    {
        sVar9 = (short)(&DAT_0050cae8)[iVar12] + 0xb0;
    }
    iVar13 = (int)sVar9;
    if (-1 < iVar13)
    {
        fVar3 = *(float *)(&DAT_004c7a88 + sVar6 * 8);
        fVar4 = *(float *)(&DAT_004c7a8c + sVar6 * 8);
        iVar11 = rand();
        if ((float)iVar11 * 4.656613e-10 < 0.05)
        {
            rand();
        }
        fVar3 = fVar7 * (fVar3 + fVar4) * 0.5;
        puVar1 = (uint *)((int)param_1 + 100);
        if ((*puVar1 & 0x4000) == 0)
        {
            param_1 = fVar3;
            if ((*puVar1 & 0x200) != 0)
            {
                param_1 = 0.25;
                iVar13 = (-(uint)(iVar12 != 0) & 6) + 0xaf;
            }
        }
        else
        {
            param_1 = fVar3 * 1.5;
        }
        if (bVar14)
        {
            FUN_00426d10(iVar13, 6, param_1, param_2, iVar8 + 0x50, 1, 0, 20.0f, 500.0f);
        }
    }
    if (((*(uint *)(iVar8 + 100) & 0x2000) != 0) && (DAT_0050cb00 == 0))
    {
        DAT_0050cb00 = 1;
        rand();
        if (bVar14)
        {
            FUN_00426d10(0x72, 7, 0.25f, param_2, iVar8 + 0x50, 0, 1, 10.0f, 500.0f);
        }
    }
    if ((0.5 < *(float *)(iVar8 + 0x18c)) && (iVar10 == 1))
    {
        local_18 = param_2 * 1.3;
        if (1.0 < local_18)
        {
            local_18 = 1.0;
        }
        if ((*(uint *)(iVar8 + 100) & 0x200) != 0)
        {
            local_18 = local_18 * 0.3;
        }
        if (bVar14)
        {
            FUN_00426d10((-(uint)(iVar12 != 0) & 6) + 0xae, 6, fVar7 * 0.2, local_18, iVar8 + 0x50, 1, 0, 10.0f,
                         500.0f);
        }
    }
    if ((*(uint *)(iVar8 + 0x60) & 0x200) == 0)
    {
        if (((float)(&DAT_004c7a58)[iVar12] == 0.0) && (bVar14))
        {
            FUN_00426d10(0x7f, 6, fVar7 * 0.25, param_2, iVar8 + 0x50, 0, 1, 10.0f, 500.0f);
        }
        fVar3 = (float)(&DAT_004c7a58)[iVar12];
        fVar4 = (float)_DAT_00e22a40;
        (&DAT_004c7a58)[iVar12] = fVar3 + fVar4;
        if (1.0 < fVar3 + fVar4)
        {
            (&DAT_004c7a58)[iVar12] = 1.0f;
        }
    }
    else
    {
        if (((&DAT_004c7a58)[iVar12] == 1.0f) && (bVar14))
        {
            FUN_00426d10(0x80, 6, fVar7 * 0.25, param_2, iVar8 + 0x50, 0, 1, 10.0f, 500.0f);
        }
        fVar3 = (float)(&DAT_004c7a58)[iVar12];
        fVar4 = (float)_DAT_00e22a40;
        (&DAT_004c7a58)[iVar12] = fVar3 - fVar4;
        if (fVar3 - fVar4 < 0.0)
        {
            (&DAT_004c7a58)[iVar12] = 0;
        }
    }
    if (sVar5 <= sVar6)
    {
        if (sVar5 < sVar6)
        {
            iVar13 = rand();
            iVar10 = rand();
            if (bVar14)
            {
                FUN_00426d10(0x7a, 6, fVar7 * ((float)iVar13 * 4.656613e-10 * 0.1 - -0.15),
                             ((float)iVar10 * 4.656613e-10 * 0.3 - -0.5) * param_2, iVar8 + 0x50, 0, 1, 10.0f, 500.0f);
            }
        }
        return;
    }
    rand();
    rand();
    return;
}

void FUN_0046dcd0(float param_1)

{
    float fVar1;
    float fVar2;
    float fVar3;
    int iVar4;

    iVar4 = (int)param_1;
    fVar1 = 0.0;
    if (*(float *)((int)param_1 + 0x2fc) < 0.0)
    {
        fVar1 = *(float *)((int)param_1 + 0x2fc) * -15.0;
    }
    if (*(float *)((int)param_1 + 0x1a0) < 100.0)
    {
        fVar1 = 0.0;
    }
    fVar3 = *(float *)((int)param_1 + 0x204) * 0.02222222;
    fVar1 = (fVar1 - *(float *)((int)param_1 + 0x19b8)) * 0.1 + *(float *)((int)param_1 + 0x19b8);
    fVar2 = -fVar3;
    *(float *)((int)param_1 + 0x19b8) = fVar1;
    if ((fVar3 < 0.0) || (2.0 < fVar3))
    {
        param_1 = 0.0;
    }
    else
    {
        param_1 = fVar3;
        if (1.0 < fVar3)
        {
            param_1 = 2.0 - fVar3;
        }
    }
    if ((fVar2 < 0.0) || (2.0 < fVar2))
    {
        fVar2 = 0.0;
    }
    else if (1.0 < fVar2)
    {
        fVar2 = 2.0 - fVar2;
    }
    if (*(int *)(*(int *)(iVar4 + 0x344) + 4) != 0)
    {
        FUN_00431390(iVar4 + 0x390, (param_1 * 0.5 - -1.0) * fVar1, 1.0f, 0, 0, iVar4 + 0x390);
        *(float *)(iVar4 + 0x3c8) = fVar1 * 0.01 + *(float *)(iVar4 + 0x3c8);
    }
    if (*(int *)(*(int *)(iVar4 + 0x344) + 8) != 0)
    {
        FUN_00431390(iVar4 + 0x3d0, (fVar2 * 0.5 - -1.0) * fVar1, 1.0f, 0, 0, iVar4 + 0x3d0);
        *(float *)(iVar4 + 0x408) = fVar1 * 0.01 + *(float *)(iVar4 + 0x408);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046dea0(float param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    float fVar4;
    int iVar5;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_8 local_4c[12];
    undefined_8 local_40[16];
    undefined_8 local_30[48];

    iVar3 = (int)param_1;
    if (((*(byte *)((int)param_1 + 0x60) & 0x20) != 0) || ((*(uint *)((int)param_1 + 100) & 0x4000000) != 0))
    {
        if ((*(uint *)((int)param_1 + 100) & 0x8000) == 0)
        {
            if ((*(uint *)((int)param_1 + 100) & 0x10000) == 0)
            {
                param_1 = 0.0;
                *(undefined_32 *)(iVar3 + 0x340) = 0;
                *(undefined_32 *)(iVar3 + 0x33c) = 0;
                *(undefined_32 *)(iVar3 + 0x338) = 0;
            }
            else
            {
                param_1 = 1.0;
            }
        }
        else
        {
            param_1 = -1.0;
        }
        if (param_1 != 0.0)
        {
            fVar4 = *(float *)(iVar3 + 0x340) - (float)_DAT_00e22a40 * -0.5;
            *(float *)(iVar3 + 0x340) = fVar4;
            if (1.0 < fVar4)
            {
                *(undefined_32 *)(iVar3 + 0x340) = 1.0f;
            }
            iVar5 = 1;
            if (param_1 <= 0.0)
            {
                iVar5 = 2;
            }
            iVar2 = iVar5 * 0x40 + 0x350 + iVar3;
            *(float *)(iVar3 + 0x338) =
                *(float *)(iVar3 + 0x338) - param_1 * (float)_DAT_00e22a40 * *(float *)(iVar3 + 0x340) * -360.0;
            FUN_0044bb10(local_40, iVar2);
            vec3f_multiply_add(&local_64, local_30, 0, local_40);
            vec3f_copy(&local_64, local_30);
            vec3f_set(&local_64, 0, 1.0f, 0);
            rdVector_Normalize3(&local_64);
            iVar1 = (iVar5 + 0xe) * 0x40 + iVar3;
            vec3f_copy(local_4c, iVar1);
            FUN_00431390(iVar2, *(undefined_32 *)(iVar3 + 0x338), local_64, local_60, local_5c, iVar2);
            vec3f_copy(iVar1, local_4c);
            iVar5 = *(int *)(*(int *)(iVar3 + 0x344) + iVar5 * 4);
            if (iVar5 != 0)
            {
                FUN_00431640(iVar5, iVar2);
            }
            iVar5 = iVar3 + 0x490;
            *(float *)(iVar3 + 0x33c) =
                *(float *)(iVar3 + 0x33c) - param_1 * (float)_DAT_00e22a40 * *(float *)(iVar3 + 0x340) * -600.0;
            FUN_0044bb10(local_40, iVar5);
            vec3f_multiply_add(&local_58, local_30, 0, local_40);
            vec3f_copy(&local_58, local_30);
            vec3f_set(&local_58, param_1 * 0.5, 1.0f, 0);
            rdVector_Normalize3(&local_58);
            vec3f_copy(local_4c, iVar3 + 0x4c0);
            FUN_00431390(iVar5, *(undefined_32 *)(iVar3 + 0x33c), local_58, local_54, local_50, iVar5);
            vec3f_copy(iVar3 + 0x4c0, local_4c);
            iVar3 = *(int *)(*(int *)(iVar3 + 0x344) + 0x14);
            if (iVar3 != 0)
            {
                FUN_00431640(iVar3, iVar5);
            }
        }
    }
    return;
}

void FUN_0046e150(int param_1)

{
    int iVar1;

    if (((*(byte *)(param_1 + 0x60) & 0x20) != 0) || ((*(uint *)(param_1 + 100) & 0x4000000) != 0))
    {
        if ((*(uint *)(param_1 + 100) & 0x8000) == 0)
        {
            if ((*(uint *)(param_1 + 100) & 0x10000) != 0)
            {
                iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 8);
                if (iVar1 != 0)
                {
                    FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
                }
                iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x18);
                if (iVar1 != 0)
                {
                    FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
                }
                iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x2c);
                if (iVar1 != 0)
                {
                    FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
                }
                iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0xfc);
                if (iVar1 != 0)
                {
                    FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
                }
                iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x110);
                if (iVar1 != 0)
                {
                    FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
                }
            }
        }
        else
        {
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 4);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
            }
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x18);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
            }
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x28);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
            }
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0xf8);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
            }
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x10c);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046e2c0(float param_1)

{
    float *pfVar1;
    float fVar2;
    int iVar3;
    float fVar4;
    float *pfVar5;
    int iVar6;
    float10 fVar7;
    float local_24;
    undefined_8 local_20[4];
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    fVar4 = param_1;
    if (*(int *)((int)param_1 + 0x344) != 0)
    {
        pfVar1 = (float *)((int)param_1 + 0x199c);
        iVar3 = **(int **)(*(int *)((int)param_1 + 0x1e70) + 0x18);
        iVar6 = 4;
        pfVar5 = pfVar1;
        do
        {
            iVar6 = iVar6 + -1;
            *pfVar5 = (float)_DAT_00e22a40 + *pfVar5;
            pfVar5 = pfVar5 + 1;
        } while (iVar6 != 0);
        if ((*(uint *)((int)param_1 + 0x60) & 0x1000000) != 0)
        {
            *(undefined_32 *)((int)param_1 + 0x19ac) = 1.0f;
        }
        if (*(float *)((int)param_1 + 0x1a0) <= 200.0)
        {
            fVar2 = -0.5;
        }
        else
        {
            fVar2 = 0.5;
        }
        *(float *)((int)param_1 + 0x19ac) = *(float *)((int)param_1 + 0x19ac) - (float)_DAT_00e22a40 * fVar2;
        if (0.4 <= *(float *)((int)param_1 + 0x19ac))
        {
            if (1.0 < *(float *)((int)param_1 + 0x19ac))
            {
                *(undefined_32 *)((int)param_1 + 0x19ac) = 1.0f;
            }
        }
        else
        {
            *(undefined_32 *)((int)param_1 + 0x19ac) = 0.4f;
        }
        local_18 = *(float *)((int)param_1 + 0x1d0) + *(float *)((int)param_1 + 0x1dc);
        local_14 = *(float *)((int)param_1 + 0x1d4) + *(float *)((int)param_1 + 0x1e0);
        local_10 = *(float *)((int)param_1 + 0x1d8) + *(float *)((int)param_1 + 0x1e4);
        local_24 = local_10 * local_10 + local_14 * local_14 + local_18 * local_18;
        if (local_24 <= 0.5)
        {
            local_18 = 0.0;
            local_14 = 0.0;
            local_10 = 0.0;
        }
        else
        {
            rdVector_Normalize3(&local_18);
        }
        fVar2 = *(float *)((int)fVar4 + 0x19ac) * 0.4;
        if (*(int *)(*(int *)((int)fVar4 + 0x344) + 4) != 0)
        {
            sin_cos(*pfVar1 * 72.0, &param_1, local_20);
            iVar6 = (int)fVar4 + 0x3c0;
            vec3f_multiply_add(iVar6, iVar6, param_1 * fVar2, (int)fVar4 + 0x3b0);
            if (*(float *)((int)fVar4 + 0x398) * local_10 + *(float *)((int)fVar4 + 0x390) * local_18
                    + *(float *)((int)fVar4 + 0x394) * local_14
                < 0.0)
            {
                vec3f_multiply_add(iVar6, iVar6, local_24 / (local_24 - -30.0), &local_18);
            }
            local_1c = param_1 * fVar2;
        }
        fVar2 = *(float *)((int)fVar4 + 0x19ac) * 0.4;
        if (*(int *)(*(int *)((int)fVar4 + 0x344) + 8) != 0)
        {
            sin_cos(*(float *)((int)fVar4 + 0x19a0) * 79.2, &param_1, local_20);
            iVar6 = (int)fVar4 + 0x400;
            vec3f_multiply_add(iVar6, iVar6, param_1 * fVar2, (int)fVar4 + 0x3f0);
            if (0.0 < *(float *)((int)fVar4 + 0x3d8) * local_10 + *(float *)((int)fVar4 + 0x3d4) * local_14
                    + *(float *)((int)fVar4 + 0x3d0) * local_18)
            {
                vec3f_multiply_add(iVar6, iVar6, local_24 / (local_24 - -30.0), &local_18);
            }
            local_24 = param_1 * fVar2;
        }
        fVar2 = *(float *)((int)fVar4 + 0x19ac);
        if (*(int *)(*(int *)((int)fVar4 + 0x344) + 0x14) != 0)
        {
            sin_cos(*(float *)((int)fVar4 + 0x19a4) * 86.4, &param_1, local_20);
            vec3f_multiply_add((int)fVar4 + 0x4c0, (int)fVar4 + 0x4c0, param_1 * fVar2 * 0.2, (int)fVar4 + 0x4b0);
        }
        if (*(int *)(*(int *)((int)fVar4 + 0x344) + 0xc) != 0)
        {
            vec3f_multiply_add((int)fVar4 + 0x440, (int)fVar4 + 0x440, (local_1c + local_1c + local_24) * 0.5,
                               (int)fVar4 + 0x430);
        }
        if (*(int *)(*(int *)((int)fVar4 + 0x344) + 0x10) != 0)
        {
            vec3f_multiply_add((int)fVar4 + 0x480, (int)fVar4 + 0x480, (local_24 + local_24 + local_1c) * 0.5,
                               (int)fVar4 + 0x470);
        }
        FUN_0046dcd0(fVar4);
        FUN_0046dea0(fVar4);
        if (**(int **)(*(int *)((int)fVar4 + 0x1e70) + 0x18) != 0xe)
        {
            fVar2 = *(float *)(&DAT_004c708c + iVar3 * 0x6c) * 1.5;
            if (fVar2 < 0.0)
            {
                fVar2 = -fVar2;
            }
            if (*(int *)(*(int *)((int)fVar4 + 0x344) + 0x14) != 0)
            {
                local_c = *(float *)((int)fVar4 + 0x50) - *(float *)((int)fVar4 + 0x4c0);
                local_8 = *(float *)((int)fVar4 + 0x54) - *(float *)((int)fVar4 + 0x4c4);
                local_4 = *(float *)((int)fVar4 + 0x58) - *(float *)((int)fVar4 + 0x4c8);
                if (fVar2 * fVar2 < local_4 * local_4 + local_8 * local_8 + local_c * local_c)
                {
                    fVar7 = (float10)rdVector_Normalize3(&local_c);
                    vec3f_multiply_add((int)fVar4 + 0x4c0, (int)fVar4 + 0x4c0, (float)(fVar7 - (float10)fVar2),
                                       &local_c);
                }
            }
        }
    }
    return;
}

void FUN_0046e750(int param_1)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int *piVar5;
    uint uVar6;

    iVar3 = param_1;
    if ((DAT_00e27130 < 10) && (param_1 != 0))
    {
        iVar2 = get_self(param_1);
        if (iVar2 == 0x3064)
        {
            piVar5 = (int *)(param_1 + 0x14);
            param_1 = 0;
            uVar6 = DAT_00e27130;
            if (0 < *piVar5)
            {
                while (uVar6 < 10)
                {
                    iVar2 = **(int **)(*(int *)(iVar3 + 0x18) + param_1 * 4);
                    if ((iVar2 != 0) && (*(int *)(iVar2 + 8) != 0))
                    {
                        bVar1 = false;
                        iVar4 = 0;
                        piVar5 = &DAT_00e27140;
                        do
                        {
                            if ((int)uVar6 <= iVar4)
                                break;
                            if (*(int *)(*piVar5 + 8) == *(int *)(iVar2 + 8))
                            {
                                bVar1 = true;
                            }
                            iVar4 = iVar4 + 1;
                            piVar5 = piVar5 + 1;
                            uVar6 = DAT_00e27130;
                        } while (!bVar1);
                        if (!bVar1)
                        {
                            (&DAT_00e27140)[uVar6] = iVar2;
                            uVar6 = uVar6 + 1;
                            DAT_00e27130 = uVar6;
                        }
                    }
                    param_1 = param_1 + 1;
                    if (*(int *)(iVar3 + 0x14) <= param_1)
                    {
                        return;
                    }
                }
            }
        }
        else
        {
            uVar6 = get_self(param_1);
            if ((uVar6 & 0x4000) != 0)
            {
                iVar2 = 0;
                iVar3 = FUN_00431780(param_1);
                if (0 < iVar3)
                {
                    do
                    {
                        FUN_0046e750(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar2 * 4));
                        iVar2 = iVar2 + 1;
                        iVar3 = FUN_00431780(param_1);
                    } while (iVar2 < iVar3);
                }
            }
        }
    }
    return;
}

void FUN_0046e850(int param_1) // this should be a int* instead

{
    int *piVar1;
    int iVar2;
    uint uVar3;
    int iVar4;

    if ((DAT_00e27134 < 5) && (param_1 != 0))
    {
        iVar2 = get_self(param_1);
        if (iVar2 == 0x3064)
        {
            iVar2 = 0;
            if (0 < *(int *)(param_1 + 0x14))
            {
                do
                {
                    piVar1 = *(int **)(*(int *)(param_1 + 0x18) + iVar2 * 4);
                    if (*piVar1 != 0)
                    {
                        DAT_0050cb10 = (DAT_0050cb10 + 1) % DAT_00e27130;
                        *piVar1 = (&DAT_00e27140)[DAT_0050cb10];
                        DAT_00e27134 = DAT_00e27134 + 1;
                    }
                    iVar2 = iVar2 + 1;
                } while (iVar2 < *(int *)(param_1 + 0x14));
                return;
            }
        }
        else
        {
            uVar3 = get_self(param_1);
            if ((uVar3 & 0x4000) != 0)
            {
                iVar4 = 0;
                iVar2 = FUN_00431780(param_1);
                if (0 < iVar2)
                {
                    do
                    {
                        FUN_0046e850(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar4 * 4));
                        iVar4 = iVar4 + 1;
                        iVar2 = FUN_00431780(param_1);
                    } while (iVar4 < iVar2);
                }
            }
        }
    }
    return;
}

// param_1 should be a *
void FUN_0046e910(undefined_32 param_1, undefined_32 param_2)

{
    DAT_00e27130 = 0;
    DAT_00e27134 = 0;
    FUN_0046e750(param_2);
    if (0 < DAT_00e27130)
    {
        FUN_0046e850(param_1);
    }
    return;
}

void FUN_0046e950(int param_1, undefined_32 param_2, int param_3, float param_4)

{
    float fVar1;
    int iVar2;
    int iVar3;
    uint uVar4;
    float *pfVar5;
    undefined_32 uVar6;
    undefined_32 local_50[4];
    float local_40[4]; // this is a 16 float matrix !!
    float local_30[4];
    undefined_8 local_20[16];
    undefined_8 local_10[16]; // till here ?

    if (((DAT_00e28a00 != 0) && (DAT_00e28764 != 0)) && (iVar2 = FUN_0046d650(DAT_00e28764), iVar2 != 0))
    {
        local_50[0] = 0x42697473;
        FUN_00450c50(MAGIC('T', 'e', 's', 't'), local_50);
        *(undefined_32 *)(param_1 + 0x324) = param_2;
        mat_set_identity(local_40);
        pfVar5 = local_30;
        iVar2 = 3;
        do
        {
            iVar3 = rand();
            pfVar5[-4] = (float)iVar3 * 4.656613e-10 * 0.99 - -0.01;
            uVar4 = rand();
            if ((uVar4 & 1) != 0)
            {
                pfVar5[-4] = -pfVar5[-4];
            }
            iVar3 = rand();
            *pfVar5 = (float)iVar3 * 4.656613e-10 * 0.99 - -0.01;
            uVar4 = rand();
            if ((uVar4 & 1) != 0)
            {
                *pfVar5 = -*pfVar5;
            }
            pfVar5 = pfVar5 + 1;
            iVar2 = iVar2 + -1;
        } while (iVar2 != 0);
        rdVector_Cross3(local_20, local_40, local_30);
        rdVector_Cross3(local_30, local_20, local_40);
        rdVector_Normalize3(local_40);
        rdVector_Normalize3(local_30);
        rdVector_Normalize3(local_20);
        fVar1 = param_4 * 1.5 - param_4;
        iVar2 = rand(local_40);
        rdVector_Scale3(local_40, (float)iVar2 * 4.656613e-10 * fVar1 + param_4);
        iVar2 = rand(local_30);
        rdVector_Scale3(local_30, (float)iVar2 * 4.656613e-10 * fVar1 + param_4);
        iVar2 = rand(local_20);
        rdVector_Scale3(local_20, (float)iVar2 * 4.656613e-10 * fVar1 + param_4);
        FUN_0046d610(DAT_00e28764);
        FUN_0046d5c0(DAT_00e28764, 3.0f);
        if (-1 < *(int *)(param_1 + 0x324))
        {
            param_3 = (*(int *)(param_1 + 0x324) + 0xe) * 0x40 + param_1;
        }
        vec3f_copy(local_10, param_3);
        if (*(int *)(param_1 + 0x344) == 0)
        {
            uVar6 = *(undefined_32 *)(param_1 + 0x348);
        }
        else
        {
            uVar6 = *(undefined_32 *)(*(int *)(param_1 + 0x344) + 4);
        }
        FUN_0046e910(DAT_00e28a00, uVar6);
        FUN_0044bb10(&DAT_00e289c0, local_40);
        FUN_00431640(DAT_00e28a00, local_40);
        if (DAT_00e28a00 != 0)
        {
            FUN_00431a50(DAT_00e28a00, 2, 3, 0x10, 2);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046ebf0(int param_1)

{
    int iVar1;
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    if ((DAT_00e28a00 != 0) && (DAT_00e28764 != 0))
    {
        iVar1 = FUN_0046d650(DAT_00e28764);
        if (iVar1 != 0)
        {
            if (DAT_00e28a00 != 0)
            {
                FUN_00431a50(DAT_00e28a00, 2, 0xfffffffc, 0x10, 3);
            }
            *(undefined_32 *)(param_1 + 0x324) = -1;
            _DAT_00e289f8 = 0xc7435000;
            return;
        }
        FUN_0044bb10(local_40, &DAT_00e289c0);
        if (-1 < *(int *)(param_1 + 0x324))
        {
            vec3f_copy(local_10, (*(int *)(param_1 + 0x324) + 0xe) * 0x40 + param_1);
        }
        FUN_0044bb10(&DAT_00e289c0, local_40);
        FUN_00431640(DAT_00e28a00, local_40);
        if (DAT_00e28a00 != 0)
        {
            FUN_00431a50(DAT_00e28a00, 2, 3, 0x10, 2);
        }
    }
    return;
}

void FUN_0046ecd0(float param_1, undefined_32 *param_2, undefined_32 param_3)

{
    int iVar1;
    float fVar2;
    float fVar3;
    int iVar4;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    if (**(int **)(*(int *)((int)param_1 + 0x1e70) + 0x18) != 0xe)
    {
        local_24 = *param_2;
        local_20 = param_2[1];
        local_1c = param_2[2];
        vec3f_sub(&local_18, &local_24, (int)param_1 + 0x3c0);
        vec3f_sub(&local_c, &local_24, (int)param_1 + 0x400);
        iVar4 = (int)param_1 + 0x390;
        iVar1 = (int)param_1 + 0x3d0;
        fVar2 = *(float *)((int)param_1 + 0x398) * local_10 + *(float *)((int)param_1 + 0x394) * local_14
            + local_18 * *(float *)((int)param_1 + 0x390);
        fVar3 = *(float *)((int)param_1 + 0x3d8) * local_4 + *(float *)((int)param_1 + 0x3d4) * local_8
            + local_c * *(float *)((int)param_1 + 0x3d0);
        if (fVar3 * fVar3 <= fVar2 * fVar2)
        {
            param_1 = -(*(float *)((int)param_1 + 0x1e64) * 0.5 + fVar3);
            iVar4 = iVar1;
            if (param_1 <= 0.0)
            {
                return;
            }
        }
        else
        {
            param_1 = -(fVar2 - *(float *)((int)param_1 + 0x1e64) * 0.5);
            if (0.0 <= param_1)
            {
                return;
            }
        }
        vec3f_multiply_add(param_3, &local_24, param_1, iVar4);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046ee20(int param_1)

{
    int iVar1;

    iVar1 = *(int *)(param_1 + 0x344);
    if (iVar1 != 0)
    {
        if ((*(uint *)(param_1 + 0x60) & 0x10000000) == 0)
        {
            if (*(int *)(iVar1 + 0x104) != 0)
            {
                FUN_00431a50(*(int *)(iVar1 + 0x104), 2, 0xfffffffc, 0x10, 3);
            }
        }
        else
        {
            if (*(int *)(iVar1 + 4) != 0)
            {
                FUN_0046ecd0(param_1, param_1 + 0x13c0, param_1 + 0x13c0);
                iVar1 = param_1 + 0x1390;
                mat_multiply_rows(iVar1, 3.0f, 3.0f, 3.0f, iVar1);
                FUN_00431640(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x104), iVar1);
            }
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xefffffff;
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x104);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 3, 0x10, 2);
            }
            if (_DAT_00e22a38 - -0.75 < (double)_DAT_0050cb14)
            {
                iVar1 = rand();
                _DAT_0050cb14 = ((float)iVar1 * 4.656613e-10 * 0.25 - -0.5) + (float)_DAT_00e22a38;
            }
            if (_DAT_0050cb14 < (float)_DAT_00e22a38)
            {
                iVar1 = rand(0x3f19999a, param_1 + 0x50, 0, 0, 10.0f, 500.0f);
                FUN_00426d10(0x3c, 5, (float)iVar1 * 4.656613e-10 * 0.2 - -0.3);
                iVar1 = rand();
                _DAT_0050cb14 = ((float)iVar1 * 4.656613e-10 * 0.25 - -0.5) + (float)_DAT_00e22a38;
            }
        }
        if ((*(uint *)(param_1 + 0x60) & 0x20000000) == 0)
        {
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x108);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
            }
        }
        else
        {
            if (*(int *)(*(int *)(param_1 + 0x344) + 4) != 0)
            {
                FUN_0046ecd0(param_1, param_1 + 0x1400, param_1 + 0x1400);
                iVar1 = param_1 + 0x13d0;
                mat_multiply_rows(iVar1, 2.0f, 2.0f, 2.0f, iVar1);
                FUN_00431640(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x108), iVar1);
            }
            iVar1 = *(int *)(*(int *)(param_1 + 0x344) + 0x108);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 3, 0x10, 2);
            }
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xdfffffff;
            if (_DAT_0050cb14 < (float)_DAT_00e22a38)
            {
                iVar1 = rand(0x3f19999a, param_1 + 0x50, 0, 0, 10.0f, 500.0f);
                FUN_00426d10(0x3c, 5, (float)iVar1 * 4.656613e-10 * 0.2 - -0.3);
                iVar1 = rand();
                _DAT_0050cb14 = ((float)iVar1 * 4.656613e-10 * 0.25 - -0.5) + (float)_DAT_00e22a38;
                return;
            }
        }
    }
    return;
}

void FUN_0046f0e0(int param_1, int param_2, float param_3, float param_4, int param_5, undefined_32 param_6)

{
    float10 fVar1;
    undefined_32 local_7c;
    undefined_32 local_78;
    undefined_32 local_74;
    float local_70;
    undefined_32 local_6c;
    undefined_32 local_68;
    float local_64;
    undefined_32 local_60;
    float local_5c;
    undefined_8 local_58[12];
    undefined_8 local_4c[12];
    undefined_8 local_40[16];
    undefined_8 local_30[16];
    undefined_8 local_20[32];

    vec3f_copy(&local_7c, param_1 + 0x30);
    vec3f_copy(local_58, param_2 + 0x30);
    param_5 = param_5 * 0x6c;
    local_70 = *(float *)(&DAT_004c70ac + param_5) * param_3;
    local_6c = *(undefined_32 *)(&DAT_004c70b0 + param_5);
    local_68 = *(undefined_32 *)(&DAT_004c70b4 + param_5);
    local_60 = *(undefined_32 *)(&DAT_004c70bc + param_5);
    local_64 = *(float *)(&DAT_004c70b8 + param_5) * param_3;
    local_5c = *(float *)(&DAT_004c70c0 + param_5) * param_4;
    mat_transform(&local_70, &local_70, param_1);
    vec3f_add(&local_7c, &local_70, &local_7c);
    mat_transform(&local_64, &local_64, param_2);
    vec3f_add(local_58, &local_64, local_58);
    vec3f_sub(local_4c, &local_7c, local_58);
    fVar1 = (float10)rdVector_Len3(local_4c);
    rdVector_Normalize3(local_4c);
    mat_set_translation(local_40, local_7c, local_78, local_74);
    vec3f_copy(local_30, local_4c);
    vec3f_set(local_20, 0, 0, 1.0f);
    rdVector_Cross3(local_40, local_30, local_20);
    rdVector_Cross3(local_20, local_40, local_30);
    mat_multiply_rows(local_40, 0x3b83126f, (float)fVar1 * 0.01, 0x3b83126f, local_40);
    FUN_0044bb10(param_6, local_40);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0046f2c0(int param_1, int param_2, float param_3, float param_4)

{
    float fVar1;
    float fVar2;
    bool bVar3;
    bool bVar4;
    bool bVar5;
    int iVar6;
    int iVar7;
    undefined_32 uVar8;
    undefined_32 uVar9;
    int iVar10;
    byte *pbVar11;
    float local_48;
    float local_44;
    undefined_8 local_40[16];
    undefined_8 local_30[16];
    undefined_8 local_20[32];

    bVar3 = false;
    bVar4 = false;
    bVar5 = false;
    if (param_1 == 0)
    {
        uVar9 = *(undefined_32 *)(param_2 + 0xf0);
    }
    else
    {
        param_2 = *(int *)(param_1 + 0x344);
        if (param_2 == 0)
        {
            return;
        }
        uVar9 = **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18);
        if (((*(uint *)(param_1 + 0x60) & 0x800000) != 0) || ((*(uint *)(param_1 + 100) & 0x2000) != 0))
        {
            bVar5 = true;
        }
        iVar6 = 0;
        pbVar11 = (byte *)(param_1 + 0x2a0);
        do
        {
            if ((*pbVar11 & 4) != 0)
            {
                if (iVar6 < 3)
                {
                    bVar3 = true;
                }
                else
                {
                    bVar4 = true;
                }
            }
            iVar6 = iVar6 + 1;
            pbVar11 = pbVar11 + 4;
        } while (iVar6 < 6);
    }
    local_48 = 0.0;
    local_44 = 0.0;
    if (0.0 <= param_3)
    {
        local_48 = param_3;
    }
    if (0.0 <= param_4)
    {
        local_44 = param_4;
    }
    if ((((DAT_0050c048 & 0x100) != 0) && (DAT_0050c040 != 0)) && ((DAT_00e98e94 & 0x1000) != 0))
    {
        local_48 = 1.0;
        local_44 = 1.0;
        bVar5 = false;
    }
    if (param_1 != 0)
    {
        fVar1 = *(float *)(param_1 + 0x18c);
        fVar2 = *(float *)(param_1 + 0x18c);
        if ((*(byte *)(param_1 + 100) & 8) != 0)
        {
            fVar1 = fVar1 * 0.5;
            fVar2 = fVar2 * 0.5;
        }
        if (bVar3)
        {
            fVar1 = fVar1 * 0.2;
        }
        if (bVar4)
        {
            fVar2 = fVar2 * 0.2;
        }
        local_48 = (fVar1 + *(float *)(param_1 + 0x330)) * 0.5;
        local_44 = (fVar2 + *(float *)(param_1 + 0x334)) * 0.5;
        *(float *)(param_1 + 0x330) = local_48;
        *(float *)(param_1 + 0x334) = local_44;
    }
    iVar6 = *(int *)(param_2 + 0x70);
    if (iVar6 != 0)
    {
        iVar7 = rand();
        param_3 = (float)iVar7 * 4.656613e-10 * 0.2 - -1.0;
        rand();
        param_4 = (float)_DAT_00e22a38 * 30.0;
        if (local_48 < 0.25)
        {
            param_3 = local_48 * param_3;
        }
        switch (uVar9)
        {
        case 4:
        case 6:
        case 0x10:
            param_3 = 1.0;
            param_4 = 0.0;
            rand();
            break;
        case 8:
        case 10:
            param_4 = 0.0;
        }
        mat_set_rotation(local_40, 0, 0, param_4);
        rdVector_Scale3(local_40, param_3, local_40);
        rdVector_Scale3(local_20, param_3, local_20);
        if (param_1 != 0)
        {
            FUN_0044bb10(param_1 + 0xa50, local_40);
        }
        FUN_00431640(iVar6, local_40);
        FUN_00431a50(iVar6, 2, 3, 0x10, 2);
        uVar8 = __ftol();
        FUN_0042b640(iVar6, 0, 0, 0xff, 0xff, 0xff, uVar8);
    }
    iVar6 = *(int *)(param_2 + 0xa8);
    if (iVar6 != 0)
    {
        iVar7 = rand();
        param_3 = (float)iVar7 * 4.656613e-10 * 0.2 - -1.0;
        rand();
        param_4 = (float)_DAT_00e22a38 * 30.0;
        if (local_44 < 0.25)
        {
            param_3 = local_44 * param_3;
        }
        switch (uVar9)
        {
        case 4:
        case 6:
        case 0x10:
            param_3 = 1.0;
            param_4 = 0.0;
            rand();
            break;
        case 8:
        case 10:
            param_4 = 0.0;
        }
        mat_set_rotation(local_40, 0, 0, param_4);
        rdVector_Scale3(local_40, param_3, local_40);
        rdVector_Scale3(local_20, param_3, local_20);
        if (param_1 != 0)
        {
            FUN_0044bb10(param_1 + 0xa50, local_40);
        }
        FUN_00431640(iVar6, local_40);
        FUN_00431a50(iVar6, 2, 3, 0x10, 2);
        uVar9 = __ftol();
        FUN_0042b640(iVar6, 0, 0, 0xff, 0xff, 0xff, uVar9);
    }
    iVar6 = *(int *)(param_2 + 0x74);
    if (iVar6 != 0)
    {
        iVar7 = FUN_0042b560(iVar6);
        rand();
        iVar10 = rand();
        rand();
        param_3 = local_48 * ((float)iVar10 * 4.656613e-10 * 0.25 - -1.0);
        if (bVar5)
        {
            iVar10 = rand();
            param_3 = (float)iVar10 * 4.656613e-10 * 0.6999998 - -3.5;
        }
        rand();
        mat_set_rotation(local_40, 0, 0, 0);
        rdVector_Scale3(local_30, param_3, local_30);
        if (param_1 != 0)
        {
            FUN_0044bb10(param_1 + 0xa90, local_40);
        }
        FUN_00431640(iVar6, local_40);
        FUN_00431a50(iVar6, 2, 3, 0x10, 2);
        if (iVar7 != 0)
        {
            FUN_0042b5e0(iVar7, 0, 0, 0xff, 0xff, 0xff, 0xff);
            FUN_0044fc00(iVar7, 0x3de147ae, 0);
        }
    }
    iVar6 = *(int *)(param_2 + 0xac);
    if (iVar6 != 0)
    {
        iVar7 = FUN_0042b560(iVar6);
        rand();
        iVar10 = rand();
        rand();
        param_3 = local_44 * ((float)iVar10 * 4.656613e-10 * 0.25 - -1.0);
        if (bVar5)
        {
            iVar10 = rand();
            param_3 = (float)iVar10 * 4.656613e-10 * 0.6999998 - -3.5;
        }
        rand();
        mat_set_rotation(local_40, 0, 0, 0);
        rdVector_Scale3(local_30, param_3, local_30);
        if (param_1 != 0)
        {
            FUN_0044bb10(param_1 + 0xe10, local_40);
        }
        FUN_00431640(iVar6, local_40);
        FUN_00431a50(iVar6, 2, 3, 0x10, 2);
        if (iVar7 != 0)
        {
            FUN_0042b5e0(iVar7, 0, 0, 0xff, 0xff, 0xff, 0xff);
            FUN_0044fc00(iVar7, 0x3de147ae, 0);
        }
    }
    return;
}

void FUN_0046f9a0(int param_1)

{
    undefined_32 *puVar1;
    uint *puVar2;
    int iVar3;
    undefined_32 uVar4;
    int iVar5;
    int iVar6;
    byte *pbVar7;
    int *piVar8;
    undefined_32 local_c8;
    undefined_32 local_c4;
    undefined_32 local_c0;
    undefined_32 local_bc;
    int local_b8[3];
    undefined_8 local_ac[12];
    int local_a0[8];
    undefined_8 local_80[32];
    undefined_8 local_60[96];

    iVar6 = 0;
    local_b8[1] = 0;
    local_b8[0] = 0;
    if (*(int *)(param_1 + 0x344) != 0)
    {
        pbVar7 = (byte *)(param_1 + 0x2a0);
        do
        {
            if ((*pbVar7 & 8) != 0)
            {
                local_b8[iVar6 / 3] = 1;
            }
            iVar6 = iVar6 + 1;
            pbVar7 = pbVar7 + 4;
        } while (iVar6 < 6);
        iVar6 = 0;
        do
        {
            if ((local_b8[iVar6] != 0) || (*(int *)(param_1 + 0x314 + iVar6 * 4) != 0))
            {
                iVar3 = (-iVar6 + 2) * 0x40;
                local_c4 = *(undefined_32 *)(iVar3 + 900 + param_1);
                iVar3 = iVar3 + param_1;
                local_c8 = *(undefined_32 *)((-iVar6 + 0x10) * 0x40 + param_1);
                local_c0 = *(undefined_32 *)(iVar3 + 0x388);
                vec3f_multiply_add(&local_c8, &local_c8, 0xc0000000, iVar3 + 0x360);
                if (**(int **)(*(int *)(param_1 + 0x1e70) + 0x18) == 0xe)
                {
                    local_bc = 0xc0000000;
                    if (iVar6 != 0)
                    {
                        local_bc = 2.0f;
                    }
                    vec3f_multiply_add(&local_c8, &local_c8, local_bc, iVar3 + 0x350);
                }
                rdVector_Scale3(local_ac, -20.0f, iVar3 + 0x360);
                if (local_b8[iVar6] != 0)
                {
                    iVar3 = *(int *)(param_1 + 0x314 + iVar6 * 4);
                    puVar1 = (undefined_32 *)(param_1 + 0x314 + iVar6 * 4);
                    if (iVar3 == 0)
                    {
                        uVar4 = FUN_0046a5f0(6, 0, 1000.0f, &local_c8, 1.0f);
                        *puVar1 = uVar4;
                        FUN_0046a970(uVar4, puVar1);
                    }
                    else
                    {
                        FUN_0046a960(iVar3, 5.0f);
                    }
                }
                iVar3 = *(int *)(param_1 + 0x314 + iVar6 * 4);
                if (iVar3 != 0)
                {
                    FUN_0046a920(iVar3, &local_c8);
                    FUN_0046a940(*(undefined_32 *)(param_1 + 0x314 + iVar6 * 4), local_ac);
                }
            }
            iVar6 = iVar6 + 1;
        } while (iVar6 < 2);
        if (((*(uint *)(param_1 + 0x60) & 0x87800) != 0) || ((*(uint *)(param_1 + 100) & 0x4000) != 0))
        {
            piVar8 = (int *)(param_1 + 0x314);
            iVar6 = 2;
            do
            {
                if (*piVar8 != 0)
                {
                    FUN_0046a960(*piVar8, 0);
                }
                piVar8 = piVar8 + 1;
                iVar6 = iVar6 + -1;
            } while (iVar6 != 0);
        }
    }
    iVar6 = *(int *)(param_1 + 0x31c);
    if (((iVar6 != 0) && (*(int *)(iVar6 + 0x60) == 8)) && (3.0 < *(float *)(iVar6 + 0x68)))
    {
        if (*(int *)(param_1 + 0x344) == 0)
        {
            local_c8 = *(undefined_32 *)(param_1 + 0x50);
            local_c4 = *(undefined_32 *)(param_1 + 0x54);
            local_c0 = *(undefined_32 *)(param_1 + 0x58);
            vec3f_multiply_add(&local_c8, &local_c8, 1.0f, param_1 + 0x30);
            iVar3 = param_1 + 0x20;
            uVar4 = 0x41700000;
        }
        else
        {
            local_c8 = *(undefined_32 *)(param_1 + 0x3c0);
            local_c4 = *(undefined_32 *)(param_1 + 0x3c4);
            local_c0 = *(undefined_32 *)(param_1 + 0x3c8);
            vec3f_multiply_add(&local_c8, &local_c8, 1.0f, param_1 + 0x3a0);
            iVar3 = param_1 + 0x390;
            uVar4 = 0x41400000;
        }
        vec3f_multiply_add(&local_c8, &local_c8, uVar4, iVar3);
        rdVector_Scale3(local_ac, 10.0f, iVar3);
        FUN_0046a920(iVar6, &local_c8);
        FUN_0046a940(iVar6, local_ac);
        vec3f_multiply_add(local_b8, &local_c8, 0.5f, local_ac);
        iVar6 = FUN_00450e70(MAGIC('T', 'e', 's', 't'), local_b8, 0x42800000, 0, 2, local_80, local_60, local_a0);
        if (0 < iVar6)
        {
            piVar8 = local_a0;
            do
            {
                iVar3 = *piVar8;
                if (((iVar3 != param_1) && ((*(uint *)(iVar3 + 0x60) & 0x7800) == 0))
                    && ((*(uint *)(iVar3 + 100) & 0x2000000) == 0))
                {
                    local_bc = rand();
                    iVar5 = __ftol();
                    iVar3 = *piVar8;
                    if (*(float *)(param_1 + 0x38) * *(float *)(iVar3 + 0x38)
                            + *(float *)(param_1 + 0x34) * *(float *)(iVar3 + 0x34)
                            + *(float *)(param_1 + 0x30) * *(float *)(iVar3 + 0x30)
                        < 0.0)
                    {
                        iVar5 = iVar5 + 3;
                    }
                    puVar2 = (uint *)(iVar3 + 0x2a0 + iVar5 * 4);
                    *puVar2 = *puVar2 | 8;
                }
                piVar8 = piVar8 + 1;
                iVar6 = iVar6 + -1;
            } while (iVar6 != 0);
        }
        if ((((*(uint *)(param_1 + 0x60) & 0x87800) != 0) || ((*(uint *)(param_1 + 100) & 0x4000) != 0))
            && (*(int *)(param_1 + 0x31c) != 0))
        {
            FUN_0046a960(*(int *)(param_1 + 0x31c), 0);
        }
    }
    return;
}

void FUN_0046fd60(float param_1, float *param_2, float param_3, float param_4, float param_5, float param_6,
                  int param_7)

{
    uint uVar1;
    bool bVar2;
    byte *pbVar3;
    undefined_32 uVar4;
    int iVar5;
    bool bVar6;
    bool bVar7;
    bool bVar8;
    bool bVar9;
    bool bVar10;
    bool bVar11;
    bool bVar12;
    float local_5c;
    uint local_44;
    float local_40;
    float local_3c;
    float local_38;
    float local_30;
    float local_2c;
    float local_28;
    float local_20;
    float local_1c;
    float local_18;
    float local_10;
    float local_c;
    float local_8;

    bVar9 = false;
    bVar2 = false;
    bVar12 = false;
    bVar6 = false;
    bVar7 = false;
    bVar8 = false;
    bVar10 = false;
    bVar11 = false;
    if (param_1 == 0.0)
    {
        return;
    }
    if ((*(uint *)((int)param_1 + 0x60) & 0x2007800) != 0)
    {
        return;
    }
    if (0.5 < *(float *)((int)param_1 + 0x1e8))
    {
        return;
    }
    if ((*(int *)((int)param_1 + 0x140) != 0)
        && (pbVar3 = (byte *)FUN_004318b0(*(int *)((int)param_1 + 0x140)), pbVar3 != NULL))
    {
        if ((*pbVar3 & 0x20) != 0)
        {
            return;
        }
        uVar1 = *(uint *)(pbVar3 + 0x2c);
        bVar6 = (uVar1 & 0x2000) != 0;
        if ((uVar1 & 0x4000) != 0)
        {
            return;
        }
        bVar7 = (uVar1 & 0x8000) != 0;
        bVar8 = (uVar1 & 0x100) != 0;
        bVar9 = (uVar1 & 0x200) != 0;
        bVar10 = (uVar1 & 0x400) != 0;
        bVar11 = (uVar1 & 0x1000) != 0;
        bVar12 = (uVar1 & 0x80) != 0;
        if ((uVar1 & 0x40) != 0)
        {
            bVar2 = true;
        }
    }
    if (param_7 != 0)
    {
        local_44 = local_44 | 1;
    }
    mat_set_identity(&local_40);
    local_10 = param_2[0xc];
    local_c = param_2[0xd];
    local_8 = param_2[0xe];
    local_30 = param_2[8];
    local_2c = param_2[9];
    local_28 = param_2[10];
    local_40 = param_2[4];
    local_3c = param_2[5];
    local_38 = param_2[6];
    local_20 = *param_2;
    local_1c = param_2[1];
    local_18 = param_2[2];
    rdVector_Normalize3(&local_40);
    rdVector_Normalize3(&local_30);
    rdVector_Normalize3(&local_20);
    local_5c = (*(float *)((int)param_1 + 0x1a0) - 200.0) * 0.005;
    if (local_5c <= 0.0)
    {
        return;
    }
    if (1.0 < local_5c)
    {
        local_5c = 1.0;
    }
    param_1 = 0.0;
    switch (DAT_0050ca8c)
    {
    case 0:
        if (!bVar2)
        {
            if (bVar9)
            {
                param_1 = 255.0;
                break;
            }
            if (!bVar10)
            {
                param_1 = 200.0;
                break;
            }
        }
        goto LAB_0047005f;
    case 1:
        if (bVar12)
        {
            param_1 = 255.0;
            break;
        }
        if (bVar2)
        {
            param_1 = 150.0;
            break;
        }
        if (bVar11)
        {
            param_1 = 0.0;
            break;
        }
        if (bVar7)
        {
            param_1 = 0.0;
            break;
        }
        goto LAB_004701ce;
    case 2:
        if (!bVar8)
        {
            if (bVar2)
            {
                param_1 = 64.0;
            }
            else
            {
                param_1 = 16.0;
            }
            break;
        }
    LAB_0047005f:
        param_1 = 255.0;
        break;
    case 4:
        if (bVar2)
        {
            param_1 = 255.0;
            break;
        }
        if (bVar9)
        {
            param_1 = 255.0;
            break;
        }
        if (bVar10)
        {
            param_1 = 255.0;
            break;
        }
        if (bVar8)
        {
            param_1 = 255.0;
            break;
        }
        if (bVar6)
        {
            param_1 = 255.0;
            break;
        }
    LAB_004701ce:
        param_1 = 50.0;
        break;
    case 5:
        if (bVar2)
        {
            param_1 = 200.0;
        }
        else if (bVar9)
        {
            param_1 = 255.0;
        }
        else
        {
            param_1 = 16.0;
        }
        break;
    case 6:
        if (bVar2)
        {
            param_1 = 150.0;
        }
        else if (bVar9)
        {
            param_1 = 255.0;
        }
        else
        {
            param_1 = 75.0;
        }
        break;
    case 7:
        if (bVar8)
        {
            param_1 = 255.0;
        }
        else
        {
            param_1 = 255.0;
            if (!bVar9)
            {
                param_1 = 128.0;
            }
        }
    }
    if (0.8 < local_28)
    {
        if (bVar8)
        {
            param_6 = 0.0;
        }
        vec3f_multiply_add(&local_10, &local_10, -param_6, &local_40);
        param_1 = param_1 * local_5c;
        local_40 = local_40 * param_3;
        local_3c = local_3c * param_3;
        local_38 = local_38 * param_3;
        local_30 = local_30 * param_4;
        local_2c = local_2c * param_4;
        local_28 = local_28 * param_4;
        local_20 = local_20 * param_5;
        local_1c = local_1c * param_5;
        local_18 = local_18 * param_5;
        if (param_1 < 1.0)
        {
            param_1 = 1.0;
        }
        else if (254.0 < param_1)
        {
            param_1 = 254.0;
        }
        if (0.0 < param_1)
        {
            uVar4 = __ftol(0.2f, local_44);
            uVar4 = __ftol(uVar4);
            uVar4 = __ftol(uVar4);
            uVar4 = __ftol(uVar4);
            iVar5 = FUN_0047bc40(&local_40, uVar4);
            if ((iVar5 != 0) && (bVar10 || bVar8))
            {
                FUN_00426c80(0x45, 7, local_5c * 0.1 * 0.25, 1.0f, 1);
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00470510(int param_1, float param_2, float param_3, float param_4, float param_5, float param_6,
                  undefined_32 param_7, undefined_32 param_8)

{
    float *pfVar1;
    float fVar2;
    float10 fVar3;

    param_6 = param_6 * (float)_DAT_00e22a40;
    pfVar1 = (float *)(param_1 + ((int)param_2 + 0x1d7) * 0xc);
    param_2 = param_3;
    fVar2 = *pfVar1;
    if ((*(uint *)(param_1 + 0x60) & 0x800000) != 0) // boosting
    {
        param_2 = param_3 * 0.5;
    }
    if ((*(uint *)(param_1 + 0x60) & 0x200) != 0) // airborne
    {
        param_6 = param_6 + param_6;
        param_2 = param_4;
    }
    fVar3 = (float10)FUN_0046d730(param_2, fVar2, param_7, param_8, param_6, param_5 * (float)_DAT_00e22a40);
    if ((*(uint *)(param_1 + 100) & 0x2000000) != 0) // ZMode | race complete ?
    {
        fVar3 = (fVar3 + (float10)fVar2) * (float10)0.5;
    }
    *pfVar1 = (float)fVar3;
    return;
}

void FUN_004705d0(int param_1, int param_2, undefined_32 param_3, float param_4)

{
    FUN_0044bb10(param_2, param_3);
    vec3f_multiply_add(param_2 + 0x30, param_2 + 0x30, *(float *)(param_1 + 0x1a0) * param_4, param_2 + 0x10);
    return;
}

// never called ? param_1 is player struct
void FUN_00470610(int param_1)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    DWORD DVar4;
    int iVar5;
    float10 extraout_ST0;
    float local_24;
    float fStack_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    float local_c;
    float local_8;
    undefined_32 local_4;

    FUN_0046d4c0(param_1);
    if ((*(uint *)(param_1 + 0x60) & 0x800) == 0)
    {
        iVar3 = FUN_0041d6b0();
        if (iVar3 != 0)
        {
            iVar3 = *(int *)(*(int *)(param_1 + 0x1e70) + 4);
            if ((iVar3 == MAGIC('L', 'o', 'c', 'l')) || (iVar3 == MAGIC('A', 'A', 'I', 'I')))
            {
                FUN_0041d930(param_1);
            }
            if (*(int *)(*(int *)(param_1 + 0x1e70) + 4) == MAGIC('R', 'E', 'M', 'O'))
            {
                DVar4 = timeGetTime();
                piVar1 = *(int **)(param_1 + 0x1e70);
                fStack_20 = 0.0;
                local_24 = (float)(DVar4 - *(int *)(&DAT_00ea0200 + *piVar1 * 4));
                *(uint *)(param_1 + 0x60) =
                    *(uint *)(&DAT_00ea03c0 + *piVar1 * 4) | *(uint *)(param_1 + 0x60) & 0xfff787ef | 0x40;
                *(uint *)(param_1 + 100) =
                    *(uint *)(&DAT_00ea01a0 + *piVar1 * 4) | *(uint *)(param_1 + 100) & 0xf17bffff | 0x10000000;
                *(undefined_32 *)(param_1 + 0x1a0) = (&DAT_00ec7640)[*piVar1];
                FUN_004705d0(param_1, param_1 + 0x20, &DAT_00ea0720 + *piVar1 * 0x1f28,
                             (float)(ulonglong)(uint)local_24 * 0.001);
            }
        }
        FUN_00470ae0(param_1);
        if (**(int **)(*(int *)(param_1 + 0x1e70) + 0x18) == 0xe)
        {
            FUN_0044bb10(param_1 + 0x390, param_1 + 0x490);
            FUN_0044bb10(param_1 + 0x3d0, param_1 + 0x490);
        }
        if (*(int *)(param_1 + 0x344) != 0)
        {
            FUN_00471760(param_1);
            FUN_00472a50(param_1);
            FUN_0046f2c0(param_1, 0, -1.0f, -1.0f);
            FUN_0046ee20(param_1);
        }
        FUN_0046f9a0(param_1);
        if (*(int *)(param_1 + 0x344) != 0)
        {
            FUN_0046d6a0(param_1);
            FUN_0046ebf0(param_1);
        }
        FUN_004709a0(param_1);
        FUN_00470a40(param_1);
        FUN_0046e150(param_1);
    }
    if (*(int *)(param_1 + 0x344) == 0)
    {
        if (*(int *)(param_1 + 0x348) != 0)
        {
            FUN_00431640(*(int *)(param_1 + 0x348), param_1 + 0x15d0);
        }
        iVar3 = *(int *)(param_1 + 0x34c);
        if (iVar3 != 0)
        {
            if (*(int *)(param_1 + 0x1998) < 0x65)
            {
                FUN_00431740(iVar3, 0);
            }
            else
            {
                FUN_00431740(iVar3, 1);
            }
        }
    }
    else
    {
        iVar3 = *(int *)(*(int *)(param_1 + 0x344) + 0x14);
        if (iVar3 != 0)
        {
            FUN_00431640(iVar3, param_1 + 0x490);
        }
        iVar3 = *(int *)(*(int *)(param_1 + 0x344) + 4);
        if (iVar3 != 0)
        {
            FUN_00431640(iVar3, param_1 + 0x390);
        }
        iVar3 = *(int *)(*(int *)(param_1 + 0x344) + 8);
        if (iVar3 != 0)
        {
            FUN_00431640(iVar3, param_1 + 0x3d0);
        }
        iVar3 = *(int *)(*(int *)(param_1 + 0x344) + 0xc);
        if (iVar3 != 0)
        {
            FUN_00431640(iVar3, param_1 + 0x410);
        }
        iVar3 = *(int *)(*(int *)(param_1 + 0x344) + 0x10);
        if (iVar3 != 0)
        {
            FUN_00431640(iVar3, param_1 + 0x450);
        }
        iVar5 = 0xf8;
        iVar3 = param_1 + 0x12d0;
        do
        {
            iVar2 = *(int *)(iVar5 + *(int *)(param_1 + 0x344));
            if (iVar2 != 0)
            {
                FUN_00431640(iVar2, iVar3);
            }
            iVar5 = iVar5 + 4;
            iVar3 = iVar3 + 0x40;
        } while (iVar5 < 0x101);
    }
    if (((*(uint *)(param_1 + 0x60) & 0x6000) != 0) && (iVar3 = *(int *)(param_1 + 0x300), -1 < iVar3))
    {
        local_18 = 0;
        local_14 = 0;
        local_10 = -1.0f;
        iVar5 = __ftol();
        local_1c = 255.0f;
        local_24 = (float)((extraout_ST0 - (float10)iVar5) * (float10)255.0);
        local_4 = 255.0f;
        fStack_20 = local_24;
        local_c = local_24;
        local_8 = local_24;
        FUN_00483840(iVar3, &local_24, &local_c, &local_18);
    }
    return;
}

void FUN_004709a0(int param_1)

{
    int iVar1;
    bool bVar2;

    iVar1 = *(int *)(param_1 + 0x1994);
    if (iVar1 != 0)
    {
        if (((*(byte *)(param_1 + 100) & 0x40) == 0) || ((*(uint *)(param_1 + 0x60) & 0x84000) != 0))
        {
            bVar2 = true;
        }
        else
        {
            bVar2 = false;
        }
        if ((((DAT_0050c048 & 0x100) != 0) && (DAT_0050c040 != 0)) && ((DAT_00e98e90 & 0x1000) != 0))
        {
            bVar2 = true;
        }
        if (bVar2)
        {
            FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
            return;
        }
        FUN_00431a50(iVar1, 2, 3, 0x10, 2);
        FUN_00431620(*(undefined_32 *)(param_1 + 0x1994), 0, 0,
                     (*(float *)(param_1 + 0x188) + *(float *)(param_1 + 0x188)) - 3.0);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00470a40(int param_1)

{
    int iVar1;

    if (((*(uint *)(param_1 + 0x60) & 0x20) == 0) && ((*(uint *)(param_1 + 100) & 0x4000000) == 0))
    {
        if ((*(uint *)(param_1 + 0x60) & 0x100) != 0)
        {
            iVar1 = FUN_0045d350();
            if (iVar1 == 0)
                goto LAB_00470ac7;
        }
        if ((double)*(int *)(param_1 + 0x1998) < 500.0)
        {
            _DAT_0050cb08 = 0;
            FUN_00426d10(
                (int)(short)((**(byte **)(*(int *)(param_1 + 0x1e70) + 0x18) & 1) + 0xa6 + (short)DAT_0050cb04), 4,
                0.25f, 1.0f, param_1 + 0x50, 1, 0, 10.0f, 5000.0f);
            return;
        }
    }
    else
    {
    LAB_00470ac7:
        FUN_0046d7a0(param_1, 0.7f);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00470ae0(int param_1)

{
    float *pfVar1;
    float fVar2;
    int *piVar3;
    int iVar4;
    int iVar5;
    uint uVar6;
    bool bVar7;
    float10 fVar8;
    undefined_32 uVar9;
    undefined_32 uVar10;
    undefined_8 *puVar11;
    float local_13c;
    float local_138;
    undefined_32 local_134;
    undefined_32 local_130;
    undefined_8 local_12c[48];
    undefined_8 local_fc[8];
    float local_f4;
    float local_ec;
    int local_e8;
    undefined_8 local_e4[16];
    float local_d4;
    float local_d0;
    float local_cc;
    undefined_8 local_c4[16];
    undefined_8 local_b4[16];
    undefined_8 local_a4[12];
    undefined_8 local_98[12];
    undefined_8 local_8c[12];
    undefined_8 local_80[16];
    undefined_8 local_70[16];
    undefined_8 local_60[32];
    undefined_8 local_40[16];
    undefined_8 local_30[16];
    undefined_8 local_20[32];

    local_e8 = 0;
    FUN_0044bb10(local_e4, param_1 + 0x20);
    if (DAT_0050ca3c != 0)
    {
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x80000;
    }
    uVar6 = *(uint *)(param_1 + 0x60) & 0x84000;
    if ((((DAT_0050c048 & 0x100) != 0) && (DAT_0050c040 != 0)) && ((DAT_00e98e90 & 0x1000) != 0))
    {
        uVar6 = 1;
    }
    if (DAT_0050ccf0 != 0)
    {
        iVar4 = FUN_0045d350();
        if (iVar4 == 0)
        {
            local_ec = -NAN;
        }
        else
        {
            local_ec = (float)FUN_0045d3d0(*(undefined_32 *)(param_1 + 0x1e70));
        }
    }
    if (*(int **)(param_1 + 0x344) == NULL)
    {
        mat_multiply_rows(param_1 + 0x15d0, 0x3b83126f, 0x3b83126f, 0x3b83126f, local_e4);
        if ((uVar6 == 0) || ((*(uint *)(param_1 + 0x60) & 0x5800) == 0))
        {
            if (*(int *)(param_1 + 0x348) != 0)
            {
                FUN_00431a50(*(int *)(param_1 + 0x348), 2, 3, 0x10, 2);
            }
            iVar4 = *(int *)(param_1 + 0x34c);
            if (iVar4 == 0)
                goto LAB_00470c11;
            uVar10 = 2;
            uVar9 = 3;
        }
        else
        {
            if (*(int *)(param_1 + 0x348) != 0)
            {
                FUN_00431a50(*(int *)(param_1 + 0x348), 2, 0xfffffffc, 0x10, 3);
            }
            iVar4 = *(int *)(param_1 + 0x34c);
            if (iVar4 == 0)
                goto LAB_00470c11;
            uVar10 = 3;
            uVar9 = 0xfffffffc;
        }
        FUN_00431a50(iVar4, 2, uVar9, 0x10, uVar10);
    LAB_00470c11:
        if ((DAT_0050ccf0 != 0) && (-1 < (int)local_ec))
        {
            if ((*(uint *)(param_1 + 0x60) & 0x84000) == 0x80000)
            {
                (&DAT_0050ccf8)[(int)local_ec] = *(undefined_32 *)(param_1 + 0x348);
                (&DAT_0050cd00)[(int)local_ec] = *(undefined_32 *)(param_1 + 0x34c);
            }
            else
            {
                (&DAT_0050ccf8)[(int)local_ec] = 0;
                (&DAT_0050cd00)[(int)local_ec] = 0;
            }
        }
        iVar4 = FUN_0041d6b0();
        if (iVar4 == 0)
        {
            return;
        }
        if (*(int *)(param_1 + 0x348) != 0)
        {
            FUN_00431a50(*(int *)(param_1 + 0x348), 2, 3, 0x10, 2);
        }
        if (*(int *)(param_1 + 0x34c) == 0)
        {
            return;
        }
        FUN_00431a50(*(int *)(param_1 + 0x34c), 2, 3, 0x10, 2);
        return;
    }
    iVar4 = **(int **)(param_1 + 0x344);
    if (uVar6 == 0)
    {
        if (iVar4 != 0)
        {
            uVar10 = 2;
            uVar9 = 3;
            goto LAB_00470cc6;
        }
    }
    else if (iVar4 != 0)
    {
        uVar10 = 3;
        uVar9 = 0xfffffffc;
    LAB_00470cc6:
        FUN_00431a50(iVar4, 2, uVar9, 0x10, uVar10);
    }
    if (DAT_0050ccf0 != 0)
    {
        if ((*(uint *)(param_1 + 0x60) & 0x84000) == 0x80000)
        {
            (&DAT_0050ccf8)[(int)local_ec] = **(undefined_32 **)(param_1 + 0x344);
        }
        else
        {
            (&DAT_0050ccf8)[(int)local_ec] = 0;
        }
    }
    local_ec = 1.0 - *(float *)(param_1 + 0x1a0) * 0.005;
    if ((*(uint *)(param_1 + 0x60) & 0x6000000) != 0)
    {
        local_ec = 0.0;
    }
    if (local_ec < 0.0)
    {
        local_ec = 0.0;
    }
    if (1.0 < local_ec)
    {
        local_ec = 1.0;
    }
    iVar4 = *(int *)(*(int *)(param_1 + 0x344) + 0xec);
    local_ec = local_ec * local_ec;
    if (iVar4 != 0)
    {
        FUN_00431a50(iVar4, 2, 3, 0x10, 2);
    }
    bVar7 = **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) == 0xe;
    piVar3 = *(int **)(param_1 + 0x344);
    if ((piVar3[3] != 0) && (piVar3[4] != 0))
    {
        local_e8 = 1;
    }
    if (*piVar3 != 0)
    {
        FUN_00431740(*piVar3, 0);
    }
    uVar6 = (*(int *)(param_1 + 0x1e3c) + 1U) % 0x12;
    *(undefined_32 *)(param_1 + 0x1e40) = 0x10;
    *(undefined_32 *)(param_1 + 0x1e44) = 10;
    *(uint *)(param_1 + 0x1e3c) = uVar6;
    FUN_0044bb10(uVar6 * 0x40 + 0x19bc + param_1, local_e4);
    if (((0x4b < *(int *)(param_1 + 0x1998)) || (*(int *)(param_1 + 0x344) == 0)) || (bVar7))
    {
        FUN_0044bb10(local_40, local_e4);
        FUN_0044bb10(local_80, local_e4);
    }
    else
    {
        iVar4 = *(int *)(param_1 + 0x1e3c) - *(int *)(param_1 + 0x1e40);
        if (iVar4 < 0)
        {
            iVar4 = iVar4 + ((0x11U - iVar4) / 0x12) * 0x12;
        }
        FUN_0044bb10(local_40, iVar4 * 0x40 + 0x19bc + param_1);
        iVar4 = *(int *)(param_1 + 0x1e3c) - *(int *)(param_1 + 0x1e44);
        if (iVar4 < 0)
        {
            iVar4 = iVar4 + ((0x11U - iVar4) / 0x12) * 0x12;
        }
        FUN_0044bb10(local_80, iVar4 * 0x40 + 0x19bc + param_1);
        uVar6 = (*(int *)(param_1 + 0x1e3c) + 1U) % 0x12;
        *(uint *)(param_1 + 0x1e3c) = uVar6;
        FUN_0044bb10(uVar6 * 0x40 + 0x19bc + param_1, local_e4);
        iVar4 = *(int *)(param_1 + 0x1e3c) - *(int *)(param_1 + 0x1e40);
        if (iVar4 < 0)
        {
            iVar4 = iVar4 + ((0x11U - iVar4) / 0x12) * 0x12;
        }
        FUN_0044bb10(local_40, iVar4 * 0x40 + 0x19bc + param_1);
        iVar4 = *(int *)(param_1 + 0x1e3c) - *(int *)(param_1 + 0x1e44);
        if (iVar4 < 0)
        {
            iVar4 = iVar4 + ((0x11U - iVar4) / 0x12) * 0x12;
        }
        FUN_0044bb10(local_80, iVar4 * 0x40 + 0x19bc + param_1);
        vec3f_multiply_add(local_40, local_40, 0.1f, local_e4);
        vec3f_multiply_add(local_30, local_30, 0.1f, &local_d4);
        vec3f_multiply_add(local_20, local_20, 0.1f, local_c4);
        rdVector_Cross3(local_40, local_30, local_20);
        rdVector_Cross3(local_20, local_40, local_30);
        rdVector_Normalize3(local_40);
        rdVector_Normalize3(local_30);
        rdVector_Normalize3(local_20);
        vec3f_multiply_add(local_80, local_80, 0.2f, local_e4);
        vec3f_multiply_add(local_70, local_70, 0.2f, &local_d4);
        vec3f_multiply_add(local_60, local_60, 0.2f, local_c4);
        rdVector_Cross3(local_80, local_70, local_60);
        rdVector_Cross3(local_60, local_80, local_70);
        rdVector_Normalize3(local_80);
        rdVector_Normalize3(local_70);
        rdVector_Normalize3(local_60);
    }
    if (bVar7)
    {
        puVar11 = local_e4;
        iVar4 = param_1 + 0x490;
    }
    else
    {
        iVar5 = **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) * 0x6c;
        vec3f_copy(&local_138, &DAT_004c7088 + iVar5);
        vec3f_add(&local_138, &local_138, param_1 + 0x164c);
        FUN_0044bb10(local_12c, local_80);
        vec3f_copy(local_fc, local_b4);
        vec3f_multiply_add(local_fc, local_fc, local_138, local_e4);
        vec3f_multiply_add(local_fc, local_fc, local_134, &local_d4);
        vec3f_multiply_add(local_fc, local_fc, local_130, local_c4);
        fVar2 = local_d0 * *(float *)(param_1 + 0x198) + local_cc * *(float *)(param_1 + 0x19c)
            + local_d4 * *(float *)(param_1 + 0x194);
        vec3f_multiply_add(local_fc, local_fc, (fVar2 - *(float *)(param_1 + 0x1e60)) * 50.0, local_c4);
        *(float *)(param_1 + 0x1e60) = fVar2;
        vec3f_sub(local_a4, local_fc, local_b4);
        iVar4 = param_1 + 0x1e48;
        vec3f_sub(local_8c, local_a4, iVar4);
        fVar8 = (float10)rdVector_Len3(local_8c);
        rdVector_Normalize3(local_8c);
        pfVar1 = (float *)(param_1 + 0x1e54);
        vec3f_multiply_add(pfVar1, pfVar1, (float)_DAT_00e22a40 * (float)fVar8 * 20.0, local_8c);
        fVar8 = (float10)decelerator(10.0f, (float)_DAT_00e22a40, pfVar1);
        rdVector_Scale3(pfVar1, (float)fVar8);
        vec3f_multiply_add(local_98, iVar4, (float)_DAT_00e22a40, pfVar1);
        if ((*(byte *)(param_1 + 0x60) & 2) == 0)
        {
            vec3f_copy(local_98, local_a4);
            vec3f_set(pfVar1, 0, 0, 0);
        }
        vec3f_sub(local_fc, local_fc, local_a4);
        vec3f_add(local_fc, local_fc, local_98);
        vec3f_copy(iVar4, local_98);
        local_13c = (*pfVar1 * *(float *)(param_1 + 0x194) + *(float *)(param_1 + 0x1e5c) * *(float *)(param_1 + 0x19c)
                     + *(float *)(param_1 + 0x1e58) * *(float *)(param_1 + 0x198))
            * -2.0;
        if (50.0 < local_13c)
        {
            local_13c = 50.0;
        }
        if (local_13c < -50.0)
        {
            local_13c = -50.0;
        }
        FUN_00431390(local_12c, local_13c, 1.0f, 0, 0, local_12c);
        fVar2 = (*(float *)(param_1 + 0x12c8) - local_f4) * local_ec;
        if (12.0 < fVar2)
        {
            fVar2 = 12.0;
        }
        if (fVar2 < -12.0)
        {
            fVar2 = -12.0;
        }
        local_f4 = fVar2 * 0.5 + local_f4;
        *(float *)(param_1 + 0x19b4) = fVar2 * 0.5;
        FUN_0044bb10(param_1 + 0x490, local_12c);
        vec3f_copy(&local_138, &DAT_004c7094 + iVar5);
        vec3f_add(&local_138, &local_138, param_1 + 0x161c);
        fVar2 = *(float *)(param_1 + 0x204);
        FUN_0044bb10(local_12c, local_e4);
        FUN_00431390(local_12c, fVar2 * -0.5, 0, 1.0f, 0, local_12c);
        vec3f_multiply_add(local_fc, local_fc, local_138, local_e4);
        vec3f_multiply_add(local_fc, local_fc, local_134, &local_d4);
        vec3f_multiply_add(local_fc, local_fc, local_130, local_c4);
        FUN_0044bb10(param_1 + 0x390, local_12c);
        iVar4 = local_e8;
        if (local_e8 != 0)
        {
            vec3f_multiply_add(local_fc, local_fc, DAT_004c7a40, local_e4);
            vec3f_multiply_add(local_fc, local_fc, DAT_004c7a44, &local_d4);
            vec3f_multiply_add(local_fc, local_fc, DAT_004c7a48, local_c4);
            FUN_0044bb10(param_1 + 0x410, local_12c);
        }
        vec3f_copy(&local_138, &DAT_004c7094 + iVar5);
        local_138 = -local_138;
        vec3f_add(&local_138, &local_138, param_1 + 0x1628);
        fVar2 = *(float *)(param_1 + 0x204);
        FUN_0044bb10(local_12c, local_e4);
        FUN_00431390(local_12c, fVar2 * -0.5, 0, 1.0f, 0, local_12c);
        vec3f_multiply_add(local_fc, local_fc, local_138, local_e4);
        vec3f_multiply_add(local_fc, local_fc, local_134, &local_d4);
        vec3f_multiply_add(local_fc, local_fc, local_130, local_c4);
        FUN_0044bb10(param_1 + 0x3d0, local_12c);
        if (iVar4 == 0)
            goto LAB_0047174a;
        vec3f_multiply_add(local_fc, local_fc, -DAT_004c7a40, local_e4);
        vec3f_multiply_add(local_fc, local_fc, DAT_004c7a44, &local_d4);
        vec3f_multiply_add(local_fc, local_fc, DAT_004c7a48, local_c4);
        puVar11 = local_12c;
        iVar4 = param_1 + 0x450;
    }
    FUN_0044bb10(iVar4, puVar11);
LAB_0047174a:
    FUN_0046e2c0(param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00471760(int param_1)

{
    float fVar1;
    int iVar2;
    float fVar3;
    undefined_32 uVar4;
    float *pfVar5;
    int iVar6;
    bool bVar7;
    bool bVar8;
    float local_ec;
    float local_e8;
    float local_d8;
    float local_d4;
    float local_d0;
    float local_cc;
    float local_c8;
    float local_c4;
    float local_c0;
    undefined_8 local_bc[8];
    float local_b4;
    undefined_8 local_b0[8];
    float local_a8;
    int local_a4;
    int local_a0;
    int local_9c;
    undefined_8 local_98[16];
    undefined_32 local_88;
    undefined_32 local_84;
    undefined_32 local_80;
    undefined_32 local_78;
    undefined_32 local_74;
    undefined_32 local_70;
    float local_68;
    float local_64;
    float local_60;
    undefined_8 local_58[12];
    undefined_8 local_4c[12];
    undefined_8 local_40[64];

    bVar7 = false;
    local_a4 = 0;
    if (*(int *)(param_1 + 0x344) != 0)
    {
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0xec);
        if (iVar2 != 0)
        {
            FUN_00431a50(iVar2, 2, 3, 0x10, 2);
        }
        FUN_0044bb10(local_40, param_1 + 0x20);
        bVar8 = **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) == 0xe;
        if (bVar8)
        {
            local_a4 = 1;
        }
        if ((*(int *)(*(int *)(param_1 + 0x344) + 0xc) != 0) && (*(int *)(*(int *)(param_1 + 0x344) + 0x10) != 0))
        {
            bVar7 = true;
        }
        if (!bVar8)
        {
            vec3f_copy(local_bc, param_1 + 0x3c0);
            vec3f_copy(&local_d8, &DAT_004c70c4 + **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) * 0x6c);
            local_d8 = -local_d8;
            mat_transform(&local_d8, &local_d8, param_1 + 0x390);
            vec3f_add(local_bc, &local_d8, local_bc);
            if (bVar7)
            {
                vec3f_copy(local_b0, param_1 + 0x480);
                vec3f_copy(&local_d8, &DAT_004c70c4 + **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) * 0x6c);
                mat_transform(&local_d8, &local_d8, param_1 + 0x450);
                vec3f_add(local_b0, &local_d8, local_b0);
                local_b4 = local_b4 + *(float *)(param_1 + 0x250);
                local_a8 = local_a8 + *(float *)(param_1 + 0x250);
                FUN_00472750(param_1, 2, local_bc, local_b0);
                vec3f_copy(local_bc, param_1 + 0x440);
                vec3f_copy(&local_d8, &DAT_004c70c4 + **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) * 0x6c);
                local_d8 = -local_d8;
                mat_transform(&local_d8, &local_d8, param_1 + 0x410);
                vec3f_add(local_bc, &local_d8, local_bc);
            }
            vec3f_copy(local_b0, param_1 + 0x400);
            vec3f_copy(&local_d8, &DAT_004c70c4 + **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) * 0x6c);
            mat_transform(&local_d8, &local_d8, param_1 + 0x3d0);
            vec3f_add(local_b0, &local_d8, local_b0);
            local_b4 = local_b4 + *(float *)(param_1 + 0x250);
            local_a8 = local_a8 + *(float *)(param_1 + 0x250);
            FUN_00472750(param_1, 1, local_bc, local_b0);
        }
        local_cc = *(float *)(param_1 + 0x1a0) * 0.001;
        if (1.0 < local_cc)
        {
            local_cc = 1.0;
        }
        if (local_cc < 0.0)
        {
            local_cc = 0.0;
        }
        local_a0 = FUN_0042b560(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x114));
        local_9c = FUN_0042b560(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x118));
        FUN_0044bb10(local_98, param_1 + 0x390);
        vec3f_copy(&local_d8, &DAT_004c70dc + **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) * 0x6c);
        mat_transform(&local_d8, &local_d8, local_98);
        local_68 = local_d8 + local_68;
        local_64 = local_d4 + local_64;
        local_60 = local_d0 + local_60;
        local_88 = *(undefined_32 *)(param_1 + 0x3b0);
        local_84 = *(undefined_32 *)(param_1 + 0x3b4);
        local_80 = *(undefined_32 *)(param_1 + 0x3b8);
        local_78 = *(undefined_32 *)(param_1 + 0x3a0);
        local_74 = *(undefined_32 *)(param_1 + 0x3a4);
        local_70 = *(undefined_32 *)(param_1 + 0x3a8);
        FUN_0044bb10(param_1 + 0x1410, local_98);
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x10c);
        if (iVar2 != 0)
        {
            FUN_00431a50(iVar2, 2, 3, 0x10, 2);
        }
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x10c);
        if (iVar2 != 0)
        {
            FUN_00431640(iVar2, param_1 + 0x1410);
        }
        FUN_0044bb10(local_98, param_1 + 0x3d0);
        vec3f_copy(&local_d8, &DAT_004c70dc + **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) * 0x6c);
        local_d8 = local_d8 * -1.0;
        mat_transform(&local_d8, &local_d8, local_98);
        local_68 = local_d8 + local_68;
        local_64 = local_d4 + local_64;
        local_60 = local_d0 + local_60;
        local_88 = *(undefined_32 *)(param_1 + 0x3f0);
        local_84 = *(undefined_32 *)(param_1 + 0x3f4);
        local_80 = *(undefined_32 *)(param_1 + 0x3f8);
        local_78 = *(undefined_32 *)(param_1 + 0x3e0);
        local_74 = *(undefined_32 *)(param_1 + 0x3e4);
        local_70 = *(undefined_32 *)(param_1 + 1000);
        FUN_0044bb10(param_1 + 0x1450, local_98);
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x110);
        if (iVar2 != 0)
        {
            FUN_00431a50(iVar2, 2, 3, 0x10, 2);
        }
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x110);
        if (iVar2 != 0)
        {
            FUN_00431640(iVar2, param_1 + 0x1450);
        }
        fVar3 = *(float *)(&DAT_004c70e8 + **(int **)(*(int *)(param_1 + 0x1e70) + 0x18) * 0x6c) * 0.01;
        fVar1 = -((local_cc * 3.0 - -9.0) * 0.01);
        local_c0 = fVar1;
        mat_set_diagonal(param_1 + 0x1490, fVar3, fVar3, fVar1);
        mat_set_diagonal(param_1 + 0x14d0, fVar3, fVar3, fVar1);
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x114);
        if (iVar2 != 0)
        {
            FUN_00431640(iVar2, param_1 + 0x1490);
        }
        iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x118);
        if (iVar2 != 0)
        {
            FUN_00431640(iVar2, param_1 + 0x14d0);
        }
        iVar2 = local_a0;
        pfVar5 = (float *)(param_1 + 0x294);
        iVar6 = 3;
        fVar1 = 1.0 - *(float *)(param_1 + 0x218) * 0.01;
        local_e8 = fVar1;
        do
        {
            if (local_e8 < pfVar5[-3])
            {
                local_e8 = pfVar5[-3];
            }
            if (fVar1 < *pfVar5)
            {
                fVar1 = *pfVar5;
            }
            if ((*(byte *)(pfVar5 + 3) & 8) != 0)
            {
                local_e8 = 1.0;
            }
            if ((*(byte *)(pfVar5 + 6) & 8) != 0)
            {
                fVar1 = 1.0;
            }
            pfVar5 = pfVar5 + 1;
            iVar6 = iVar6 + -1;
        } while (iVar6 != 0);
        local_e8 = (local_e8 - 0.5) + (local_e8 - 0.5);
        if (local_e8 < 0.0)
        {
            local_e8 = 0.0;
        }
        else if (1.0 < local_e8)
        {
            local_e8 = 1.0;
        }
        local_e8 = local_e8 * 4.0;
        if (1.0 < local_e8)
        {
            local_e8 = 1.0;
        }
        local_c0 = *(float *)(param_1 + 0x1a0) * 0.02;
        local_c4 = local_e8 * -255.0 - -255.0;
        if ((*(uint *)(param_1 + 100) & 0x4000) != 0)
        {
            local_c4 = 0.0;
        }
        local_c8 = local_c4;
        if (0.0 <= local_c4)
        {
            if (255.0 < local_c4)
            {
                local_c4 = 255.0;
            }
        }
        else
        {
            local_c4 = 0.0;
        }
        if (local_c8 < 0.0)
        {
            local_c8 = 0.0;
        }
        else if (255.0 < local_c8)
        {
            local_c8 = 255.0;
        }
        if (local_a0 != 0)
        {
            uVar4 = __ftol();
            uVar4 = __ftol(uVar4);
            uVar4 = __ftol(uVar4);
            uVar4 = __ftol(uVar4);
            FUN_0042b5e0(iVar2, 0, 0, uVar4);
            FUN_0044fc00(iVar2, 0, (local_cc * 3.5 - -0.5) * (float)_DAT_00e22a40);
        }
        iVar2 = local_9c;
        if (local_9c != 0)
        {
            uVar4 = __ftol();
            uVar4 = __ftol(uVar4);
            uVar4 = __ftol(uVar4);
            uVar4 = __ftol(uVar4);
            FUN_0042b5e0(iVar2, 0, 0, uVar4);
            FUN_0044fc00(iVar2, 0, (local_cc * 3.5 - -0.5) * (float)_DAT_00e22a40);
        }
        if (DAT_00ec86b4 == 0) // engine exhaust
        {
            iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x10c);
            if (iVar2 != 0)
            {
                FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
            }
            iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x110);
            if (iVar2 != 0)
            {
                FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
            }
        }
        if (DAT_00ec86b4 == 1) // engine exhaust
        {
            bVar7 = (*(uint *)(param_1 + 0x60) & 0x80) != 0;
            FUN_0046fd60(param_1, param_1 + 0x1310, 0.1f, 0xbdcccccd, 0xbdcccccd, 10.0f, bVar7);
            FUN_0046fd60(param_1, param_1 + 0x12d0, 0.1f, 0xbdcccccd, 0.1f, 10.0f, bVar7);
        }
        if (((local_a4 == 0) && (*(int *)(param_1 + 0x1998) < 0x4c)) && (*(int *)(param_1 + 0x344) != 0))
        {
            if (*(int *)(*(int *)(param_1 + 0x344) + 0x28) != 0)
            {
                FUN_0046f0e0(param_1 + 0x490, param_1 + 0x390, 1.0f, 1.0f,
                             **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), param_1 + 0x5d0);
                *(float *)(param_1 + 0x608) = *(float *)(param_1 + 0x250) + *(float *)(param_1 + 0x608);
                FUN_00431640(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x28), param_1 + 0x5d0);
            }
            if (*(int *)(*(int *)(param_1 + 0x344) + 0x2c) != 0)
            {
                FUN_0046f0e0(param_1 + 0x490, param_1 + 0x3d0, -1.0f, 1.0f,
                             **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), param_1 + 0x610);
                *(float *)(param_1 + 0x648) = *(float *)(param_1 + 0x250) + *(float *)(param_1 + 0x648);
                FUN_00431640(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x2c), param_1 + 0x610);
            }
            if (*(int *)(*(int *)(param_1 + 0x344) + 0x30) != 0)
            {
                FUN_0046f0e0(param_1 + 0x490, param_1 + 0x410, 1.0f, -1.0f,
                             **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), param_1 + 0x650);
                *(float *)(param_1 + 0x688) = *(float *)(param_1 + 0x250) + *(float *)(param_1 + 0x688);
                FUN_00431640(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x30), param_1 + 0x650);
            }
            if (*(int *)(*(int *)(param_1 + 0x344) + 0x34) != 0)
            {
                FUN_0046f0e0(param_1 + 0x490, param_1 + 0x450, -1.0f, -1.0f,
                             **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), param_1 + 0x690);
                *(float *)(param_1 + 0x6c8) = *(float *)(param_1 + 0x250) + *(float *)(param_1 + 0x6c8);
                FUN_00431640(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x34), param_1 + 0x690);
            }
            if ((*(int *)(param_1 + 0x1998) < 0x33) && (*(int *)(param_1 + 0x344) != 0))
            {
                *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x1000000;
                vec3f_set(local_4c, 0, 0, 0);
                vec3f_set(local_58, 0, 0, 0);
                fVar1 = *(float *)(param_1 + 0x1ec) * -0.03;
                local_ec = 0.3;
                if (1.0 < fVar1)
                {
                    local_ec = fVar1 * 0.3;
                }
                if (1.0 < local_ec)
                {
                    local_ec = 1.0;
                }
                FUN_00481c30(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x28), local_4c, local_58, local_ec, 1.0f,
                             (float)*(int *)(param_1 + 0x1998), 50.0f, 0);
                vec3f_set(local_4c, 0, 0, 0);
                vec3f_set(local_58, 0, 0, 0);
                fVar1 = *(float *)(param_1 + 0x1ec) * 0.03;
                local_ec = 0.3;
                if (1.0 < fVar1)
                {
                    local_ec = fVar1 * 0.3;
                }
                if (1.0 < local_ec)
                {
                    local_ec = 1.0;
                }
                FUN_00481c30(*(undefined_32 *)(*(int *)(param_1 + 0x344) + 0x2c), local_4c, local_58, local_ec, 1.0f,
                             (float)*(int *)(param_1 + 0x1998), 50.0f, 0);
                return;
            }
        }
        else
        {
            iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x28);
            if (iVar2 != 0)
            {
                FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
            }
            iVar2 = *(int *)(*(int *)(param_1 + 0x344) + 0x2c);
            if (iVar2 != 0)
            {
                FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00472750(int param_1, float param_2, float *param_3, float *param_4)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    float10 fVar6;
    float local_5c;
    float local_58;
    float local_54;
    float local_50;
    float local_4c;
    float local_48;
    undefined_32 local_44;
    undefined_8 local_40[12];
    undefined_32 local_34;
    undefined_8 local_30[12];
    undefined_32 local_24;
    undefined_8 local_20[12];
    undefined_32 local_14;
    undefined_8 local_10[12];
    undefined_32 local_4;

    iVar3 = param_1;
    if (*(int *)(param_1 + 0x344) != 0)
    {
        if (param_2 == 1.401298e-45)
        {
            iVar5 = 7;
            iVar4 = 6;
            param_1 = 7;
        }
        else
        {
            param_1 = 9;
            iVar4 = 8;
            iVar5 = 9;
        }
        if (((byte) * (undefined_32 *)(iVar3 + 0x60) & 0xf) == 2)
        {
            _DAT_0050caf8 = 1000.0;
        }
        param_2 = _DAT_0050caf8 - (float)(int)*(short *)(iVar3 + 4) * 0.1;
        if (0.0 < param_2)
        {
            param_2 = param_2 * param_2;
        }
        if (param_2 < 0.01)
        {
            iVar1 = *(int *)(*(int *)(iVar3 + 0x344) + iVar4 * 4);
            if (iVar1 != 0)
            {
                FUN_00431a50(iVar1, 2, 0xfffffffc, 0x10, 3);
            }
            mat_set_translation(iVar4 * 0x40 + 0x350 + iVar3, 0, 0, 0xc7c35000);
            mat_set_identity(iVar5 * 0x40 + 0x350 + iVar3);
            return;
        }
        local_5c = param_2 * 8.0;
        if (1.0 < local_5c)
        {
            local_5c = 1.0;
        }
        param_2 = param_2 * 0.1;
        if (1.0 < param_2)
        {
            param_2 = 1.0;
        }
        local_58 = *param_3 - *param_4;
        local_54 = param_3[1] - param_4[1];
        local_50 = param_3[2] - param_4[2];
        fVar6 = (float10)rdVector_Len3(&local_58);
        rdVector_Scale3(&local_58, 1.0 / (float)fVar6, &local_58);
        local_48 = -local_58;
        local_4c = local_54;
        local_44 = 0;
        rdVector_Normalize3(&local_4c);
        rdVector_Cross3(local_40, &local_58, &local_4c);
        vec3f_copy(local_20, &local_58);
        vec3f_copy(local_30, &local_4c);
        local_34 = 0;
        local_24 = 0;
        local_14 = 0;
        local_4 = 1.0f;
        rdVector_Scale3(local_10, 0.5f, param_3);
        vec3f_multiply_add(local_10, local_10, 0.5f, param_4);
        iVar5 = iVar4 * 0x40 + 0x350 + iVar3;
        FUN_0044bb10(iVar5, local_40);
        mat_set_diagonal(local_40, param_2 * 0.2, param_2, local_5c * (float)fVar6 * 0.05);
        iVar1 = param_1 * 0x40 + 0x350 + iVar3;
        FUN_0044bb10(iVar1, local_40);
        iVar2 = *(int *)(iVar4 * 4 + *(int *)(iVar3 + 0x344));
        if (iVar2 != 0)
        {
            FUN_00431a50(iVar2, 2, 3, 0x10, 2);
        }
        iVar2 = *(int *)(*(int *)(iVar3 + 0x344) + param_1 * 4);
        if (iVar2 != 0)
        {
            FUN_00431640(iVar2, iVar1);
        }
        iVar3 = *(int *)(iVar4 * 4 + *(int *)(iVar3 + 0x344));
        if (iVar3 != 0)
        {
            FUN_00431640(iVar3, iVar5);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00472a50(int param_1)

{
    float fVar1;
    float fVar2;
    undefined_32 uVar3;
    float fVar4;
    float fVar5;
    int iVar6;
    float10 fVar7;
    float local_a0;
    undefined_8 local_94[64];
    float local_54;
    float local_50;
    float local_4c;
    float local_48;
    float local_44;
    undefined_8 local_40[64];

    if (*(int *)(param_1 + 0x344) == 0)
    {
        return;
    }
    iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xec);
    uVar3 = **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18);
    if (iVar6 != 0)
    {
        FUN_00431a50(iVar6, 2, 3, 0x10, 2);
    }
    FUN_0044bb10(local_40, param_1 + 0x20);
    fVar1 = *(float *)(param_1 + 0x1f0) * -0.05;
    local_50 = *(float *)(param_1 + 0x1e70);
    if (fVar1 < -1.0)
    {
        fVar1 = -1.0;
    }
    else if (1.0 < fVar1)
    {
        fVar1 = 1.0;
    }
    local_48 = (fVar1 - -1.0) * -0.5;
    local_44 = (1.0 - fVar1) * -0.5;
    if (0x4b < *(int *)(param_1 + 0x1998))
    {
        return;
    }
    if (*(int *)(param_1 + 0x344) == 0)
    {
        return;
    }
    fVar4 = local_44 - local_48;
    fVar7 = (float10)FUN_00470510(param_1, 0x2e, fVar4 * 40.0, 0, 75.0f, 75.0f, -40.0f, 40.0f);
    local_54 = (float)fVar7;
    fVar7 = (float10)FUN_00470510(param_1, 0x2f, 0, 45.0f, 20.0f, 50.0f, 0, 30.0f);
    local_50 = (float)fVar7;
    fVar4 = fVar4 * 30.0;
    local_4c = fVar4;
    fVar7 = (float10)FUN_00470510(param_1, 0x20, fVar4, 45.0f, 20.0f, 50.0f, 0, 30.0f);
    fVar1 = (float)fVar7;
    fVar5 = (local_48 - local_44) * 30.0;
    local_4c = fVar5;
    fVar7 = (float10)FUN_00470510(param_1, 0x12, fVar5, 45.0f, 20.0f, 50.0f, 0, 30.0f);
    fVar2 = (float)fVar7;
    fVar7 = (float10)FUN_00470510(param_1, 0x23, fVar4, 45.0f, 80.0f, 80.0f, 0, 30.0f);
    local_48 = (float)fVar7;
    fVar7 = (float10)FUN_00470510(param_1, 0x15, fVar5, 45.0f, 80.0f, 80.0f, 0, 30.0f);
    fVar4 = *(float *)(param_1 + 0x1a0) + *(float *)(param_1 + 0x1a0);
    local_4c = (float)fVar7;
    if (fVar4 < 100.0)
    {
        fVar4 = 100.0;
    }
    if (700.0 < fVar4)
    {
        fVar4 = 700.0;
    }
    local_a0 = (float)_DAT_00e22a40 * fVar4 + *(float *)(param_1 + 0x17a0);
    if (local_a0 < -180.0)
    {
        local_a0 = local_a0 - -360.0;
    }
    if (180.0 < local_a0)
    {
        local_a0 = local_a0 - 360.0;
    }
    *(float *)(param_1 + 0x17a0) = local_a0;
    switch (uVar3)
    {
    case 0:
        mat_set_rotation(local_94, 0, fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x88);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x50);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, -local_48, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x8c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, local_48, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x58);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xbc);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, -local_4c, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x54);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xb8);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, local_4c, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x90);
        if (iVar6 == 0)
        {
            return;
        }
        FUN_00431640(iVar6, local_94);
        return;
    case 1:
        mat_set_rotation(local_94, 0, 0, local_a0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, -fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x88);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, -fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x50);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, local_54, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xb8);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xbc);
        break;
    case 2:
        mat_set_rotation(local_94, 0, -fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, -fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        goto joined_r0x00473387;
    case 3:
        mat_set_rotation(local_94, 0, 0, local_a0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xb8);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xbc);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, local_54, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xc0);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xc4);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 200);
        goto LAB_00473367;
    case 4:
        fVar1 = -fVar1;
        local_50 = fVar1;
        mat_set_rotation(local_94, fVar1, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x88);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x8c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        fVar2 = -fVar2;
        local_50 = fVar2;
        mat_set_rotation(local_94, fVar2, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x50);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x54);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, 0, -local_54);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xb8);
    LAB_00473367:
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xcc);
    joined_r0x00473387:
        if (iVar6 == 0)
        {
            return;
        }
        goto LAB_00473dbf;
    case 5:
        mat_set_rotation(local_94, 0, 0, local_a0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x88);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x8c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x90);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x50);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x54);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x58);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, -fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x58);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 100);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, -fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x90);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x9c);
        break;
    case 6:
        mat_set_rotation(local_94, local_54, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 200);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xd0);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, 0, -local_54);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xcc);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xd4);
        break;
    case 7:
        mat_set_rotation(local_94, 0, fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        break;
    case 8:
        mat_set_rotation(local_94, 0, 0, local_a0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar2 * -2.0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x50);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x54);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar1 * -2.0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x88);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x8c);
        break;
    default:
        goto switchD_00472cfa_caseD_9;
    case 10:
        mat_set_rotation(local_94, -fVar1, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, fVar1, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, -fVar2, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, fVar2, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, local_50, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 200);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xcc);
        break;
    case 0xc:
        mat_set_rotation(local_94, 0, local_50, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xd0);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xd8);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, local_54 * 0.5, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 200);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xd4);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, -local_54 * 0.5, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xcc);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xdc);
        break;
    case 0xd:
        mat_set_rotation(local_94, 0, 0, local_a0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x88);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x50);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x54);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x8c);
        break;
    case 0xe:
        mat_set_rotation(local_94, 0, -fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x90);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x94);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x98);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x9c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xa0);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xa4);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, -fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x58);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x5c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x60);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 100);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x68);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x6c);
        break;
    case 0xf:
        mat_set_rotation(local_94, 0, -fVar1, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x80);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x84);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x88);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x8c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        mat_set_rotation(local_94, 0, -fVar2, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x48);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x4c);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x50);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0x54);
        break;
    case 0x16:
        mat_set_rotation(local_94, local_54, 0, 0);
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xc0);
        if (iVar6 != 0)
        {
            FUN_00431640(iVar6, local_94);
        }
        iVar6 = *(int *)(*(int *)(param_1 + 0x344) + 0xc4);
    }
    if (iVar6 != 0)
    {
    LAB_00473dbf:
        FUN_00431640(iVar6, local_94);
    }
switchD_00472cfa_caseD_9:
    return;
}

void FUN_00473e40(undefined_32 *param_1, int param_2)

{
    float10 fVar1;
    undefined_32 local_80;
    undefined_32 local_7c;
    float local_78;
    undefined_32 local_74;
    undefined_32 local_70;
    float local_6c;
    undefined_8 local_68[12];
    undefined_32 local_5c;
    undefined_32 local_58;
    float local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_8 local_40[48];
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;

    FUN_0044eeb0(param_2 + 0xac, local_40, 1.0f);
    vec3f_multiply_add(&local_80, &local_10, 50.0f, local_40);
    local_78 = local_78 - -1000.0;
    local_5c = local_80;
    local_58 = local_7c;
    local_44 = 0x44bb8000;
    local_50 = 0;
    local_4c = 0;
    local_48 = -1.0f;
    local_54 = local_78;
    fVar1 = (float10)FUN_00444d10(*(undefined_32 *)(param_2 + 0x13c), &local_5c, &local_74, local_68);
    if (fVar1 < (float10)0.0)
    {
        *param_1 = local_10;
        param_1[1] = local_c;
        param_1[2] = local_8;
        return;
    }
    *param_1 = local_74;
    param_1[1] = local_70;
    param_1[2] = local_6c - -20.0;
    return;
}

void FUN_00473f40(int param_1, float param_2)

{
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_8 local_40[64];

    FUN_0044eeb0(param_1 + 0xac, local_40, param_2);
    FUN_00430b80(local_40, &local_58);
    *(undefined_32 *)(param_1 + 8) = local_58;
    *(undefined_32 *)(param_1 + 0xc) = local_54;
    *(undefined_32 *)(param_1 + 0x10) = local_50;
    *(undefined_32 *)(param_1 + 0x14) = local_4c;
    *(undefined_32 *)(param_1 + 0x18) = local_48;
    *(undefined_32 *)(param_1 + 0x1c) = local_44;
    mat_set_rotation_translation(param_1 + 0x20, (undefined_32 *)(param_1 + 8));
    *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xff65fdef;
    *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xff3fffff;
    *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xfbffffff;
    *(undefined_32 *)(param_1 + 0xdc) = 0;
    *(undefined_32 *)(param_1 + 0xec) = 0;
    *(undefined_32 *)(param_1 + 0xf8) = 0;
    *(undefined_32 *)(param_1 + 0x100) = 0;
    *(undefined_32 *)(param_1 + 0x124) = 1.0f;
    *(undefined_32 *)(param_1 + 0x118) = 0;
    *(undefined_32 *)(param_1 + 0x11c) = 0;
    *(undefined_32 *)(param_1 + 0x120) = 1.0f;
    *(undefined_16 *)(param_1 + 0x10c) = 0;
    *(undefined_16 *)(param_1 + 0x10e) = 0;
    *(undefined_32 *)(param_1 + 0x110) = 0;
    *(undefined_32 *)(param_1 + 0x114) = 0;
    if (param_2 < 0.0)
    {
        *(undefined_32 *)(param_1 + 0xe8) = *(undefined_32 *)(param_1 + 0xe0);
    }
    *(undefined_32 *)(param_1 + 0x18c) = 0;
    *(undefined_32 *)(param_1 + 400) = 0x42000000;
    vec3f_set(param_1 + 0x194, 0, 0, -1.0f);
    *(undefined_32 *)(param_1 + 0x1a0) = 0;
    *(undefined_32 *)(param_1 + 0x1b0) = 0;
    *(undefined_32 *)(param_1 + 0x1b4) = 0;
    *(undefined_32 *)(param_1 + 0x1a4) = 0;
    *(undefined_32 *)(param_1 + 0x1a8) = 0;
    *(undefined_32 *)(param_1 + 0x218) = 100.0f;
    vec3f_set(param_1 + 0x1b8, 0, 0, 0);
    *(undefined_32 *)(param_1 + 0x1efc) = 0.25f;
    *(undefined_32 *)(param_1 + 0x1ec) = 0;
    *(undefined_32 *)(param_1 + 0x1f0) = 0;
    *(undefined_32 *)(param_1 + 0x228) = 0;
    *(undefined_32 *)(param_1 + 0x220) = 0;
    *(undefined_32 *)(param_1 + 0x224) = 0;
    *(undefined_32 *)(param_1 + 500) = 0;
    *(undefined_32 *)(param_1 + 0x1f8) = 0;
    *(undefined_32 *)(param_1 + 0x1fc) = 0;
    *(undefined_32 *)(param_1 + 0x200) = 0;
    *(undefined_32 *)(param_1 + 0x204) = 0;
    vec3f_set(param_1 + 0x1c4, 0, 0, 0);
    vec3f_set(param_1 + 0x1d0, 0, 0, 0);
    vec3f_set(param_1 + 0x1dc, 0, 0, 0);
    vec3f_set(param_1 + 0x154, 0, 0, 0);
    vec3f_set(param_1 + 0x144, 0, 0, 1.0f);
    vec3f_copy(param_1 + 0x16c, param_1 + 0x50);
    vec3f_copy(param_1 + 0x178, param_1 + 0x50);
    *(undefined_32 *)(param_1 + 0x150) = 0;
    *(undefined_32 *)(param_1 + 0x1f18) = 0;
    *(undefined_32 *)(param_1 + 0x250) = 0;
    *(undefined_32 *)(param_1 + 0x338) = 0;
    *(undefined_32 *)(param_1 + 0x33c) = 0;
    *(undefined_32 *)(param_1 + 0x340) = 0;
    *(undefined_32 *)(param_1 + 0x1f14) = 0;
    *(undefined_32 *)(param_1 + 0x208) = 0;
    *(undefined_32 *)(param_1 + 0x20c) = 0;
    *(undefined_32 *)(param_1 + 0x264) = 0;
    *(undefined_32 *)(param_1 + 0x19b0) = 0;
    *(undefined_32 *)(param_1 + 0x184) = 0;
    *(undefined_32 *)(param_1 + 0x188) = 0;
    *(undefined_32 *)(param_1 + 0x268) = 0x42700000;
    *(undefined_32 *)(param_1 + 0x19ac) = 1.0f;
    *(undefined_32 *)(param_1 + 0x19b4) = 1.0f;
    return;
}

void FUN_004741d0(int param_1, byte param_2)

{
    uint uVar1;
    bool bVar2;
    int iVar3;
    undefined_32 uVar4;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    bVar2 = false;
    uVar1 = *(uint *)(param_1 + 0x60);
    if (((uVar1 & 0x20) == 0) && ((*(uint *)(param_1 + 100) & 0x4000000) == 0))
    {
        return;
    }
    if ((*(uint *)(param_1 + 100) & 0x4000) != 0)
    {
        return;
    }
    if ((uVar1 & 0x7000) != 0)
    {
        return;
    }
    *(uint *)(param_1 + 0x60) = uVar1 & 0xff5fffff;
    iVar3 = rand();
    *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x4000;
    *(float *)(param_1 + 0x310) = (float)iVar3 * 4.656613e-10 - -2.0;
    if ((*(byte *)(param_1 + 0x60) & 0x20) != 0)
    {
        FUN_0040a120(0);
    }
    if ((param_2 & 2) == 0)
    {
        if ((param_2 & 1) == 0)
            goto LAB_004742fe;
        local_18 = *(undefined_32 *)(param_1 + 0x400);
        local_10 = *(undefined_32 *)(param_1 + 0x408);
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x10000;
        local_14 = *(undefined_32 *)(param_1 + 0x404);
        uVar4 = 2;
    }
    else
    {
        local_14 = *(undefined_32 *)(param_1 + 0x3c4);
        local_10 = *(undefined_32 *)(param_1 + 0x3c8);
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x8000;
        local_18 = *(undefined_32 *)(param_1 + 0x3c0);
        uVar4 = 1;
    }
    local_4 = 0;
    local_8 = 0;
    local_c = 0;
    bVar2 = true;
    FUN_0046e950(param_1, uVar4, &local_c, 0.3f);
LAB_004742fe:
    if (!bVar2)
    {
        FUN_00427590(1, **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), 0xd, 0xe, 0xd, 0xe, 0xd,
                     param_1 + 0x50);
        return;
    }
    FUN_0046a5f0(3, 0, 2.0f, &local_18, 1.0f);
    FUN_0046a5f0(3, 0, 0x400ccccd, &local_18, 3.0f);
    iVar3 = rand();
    if (0.33 <= (float)iVar3 * 4.656613e-10)
    {
        uVar4 = 0x35;
        if (0.66 <= (float)iVar3 * 4.656613e-10)
        {
            uVar4 = 0x36;
        }
    }
    else
    {
        uVar4 = 0x34;
    }
    iVar3 = rand();
    FUN_00426d10(uVar4, 7, (float)iVar3 * 4.656613e-10 * 0.2 - -0.1, 1.0f, &local_18, 0, 0, 10.0f, 500.0f);
    iVar3 = rand();
    if (0.33 <= (float)iVar3 * 4.656613e-10)
    {
        uVar4 = 0x35;
        if (0.66 <= (float)iVar3 * 4.656613e-10)
        {
            uVar4 = 0x36;
        }
    }
    else
    {
        uVar4 = 0x34;
    }
    iVar3 = rand();
    FUN_00426d10(uVar4, 7, (float)iVar3 * 4.656613e-10 * 0.2 - -0.1, 1.0f, &local_18, 0, 0, 10.0f, 500.0f);
    FUN_00427590(1, **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), 9, 9, 9, 9, 9, param_1 + 0x50);
    return;
}

void FUN_004744b0(int param_1, int param_2, int param_3)

{
    bool bVar1;
    float fVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    undefined_8 local_30[4];
    undefined_8 local_2c[4];
    undefined_8 local_28[12];
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar3 = param_3;
    if (param_3 == 0)
    {
        iVar4 = __ftol();
        *(float *)(param_1 + 0xb4) = (float)-iVar4 * 0.1;
        if (1.0 <= (float)-iVar4 * 0.1)
        {
            *(undefined_32 *)(param_1 + 0xb4) = 0;
            FUN_0044eaa0(*(undefined_32 *)(param_1 + 0xac), 1, (undefined_32 *)(param_1 + 0xac));
        }
    }
    local_10 = 0;
    local_c = 0;
    local_8 = -1.0f;
    local_4 = 5000.0f;
    iVar4 = param_3;
    do
    {
        bVar1 = true;
        if (iVar4 == 0)
        {
            iVar5 = FUN_0047f890(param_1 + 0xac);
        }
        else
        {
            local_1c = *(undefined_32 *)(param_2 + 0x30);
            local_18 = *(undefined_32 *)(param_2 + 0x34);
            local_14 = *(undefined_32 *)(param_2 + 0x38);
            iVar5 = FUN_00444e40(*(undefined_32 *)(param_1 + 0x13c), &local_1c);
        }
        if ((iVar5 == 0) || ((iVar5 = FUN_004318b0(iVar5), iVar5 != 0 && ((*(uint *)(iVar5 + 0x2c) & 0x16000) != 0))))
        {
            bVar1 = false;
        }
        if (bVar1)
        {
            iVar5 = FUN_00450e70(MAGIC('T', 'e', 's', 't'), param_2 + 0x30, 0x44610000, param_1, 1, local_2c, local_28,
                                 local_30);
            if (0 < iVar5)
            {
                bVar1 = false;
            }
            if (!bVar1)
                goto LAB_004745e9;
            if ((iVar4 == 0) && (iVar3 != 0))
            {
                iVar4 = 1;
                *(float *)(param_1 + 0xb4) = *(float *)(param_1 + 0xb4) - 0.09;
                FUN_0044ed80(param_1 + 0xac, param_2);
                bVar1 = false;
            }
        }
        else
        {
        LAB_004745e9:
            if (param_3 == 0)
            {
                if (iVar4 == 0)
                {
                    fVar2 = -0.1;
                }
                else
                {
                    fVar2 = -0.04;
                }
                *(float *)(param_1 + 0xb4) = *(float *)(param_1 + 0xb4) - fVar2;
            }
            else
            {
                param_3 = 0;
                iVar5 = __ftol();
                iVar4 = 0;
                *(float *)(param_1 + 0xb4) = (float)-iVar5 * 0.1;
            }
            FUN_0044ed80(param_1 + 0xac, param_2);
        }
        if (bVar1)
        {
            return;
        }
    } while (true);
}

void FUN_004746b0(int param_1)

{
    int iVar1;
    float *pfVar2;
    undefined_32 uVar3;
    undefined_32 *puVar4;
    undefined_32 local_8c;
    undefined_32 local_88;
    undefined_32 local_84;
    undefined_8 local_80[64];
    undefined_8 local_40[64];

    if ((*(uint *)(param_1 + 0x60) & 0x4000) == 0)
    {
        local_88 = *(undefined_32 *)(param_1 + 0x54);
        local_84 = *(undefined_32 *)(param_1 + 0x58);
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x4000;
        local_8c = *(undefined_32 *)(param_1 + 0x50);
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xfffe7fff;
        FUN_0044eeb0(param_1 + 0xac, local_80, 0x3ba3d70a);
        FUN_004744b0(param_1, local_80, 0);
        FUN_00473f40(param_1, 0);
        FUN_0044eeb0(param_1 + 0xac, local_40, 0xbc23d70a);
        FUN_0046a5f0(3, 0, 2.0f, &local_8c, 1.0f);
        FUN_0046a5f0(3, 0, 0x400ccccd, &local_8c, 3.0f);
        if (*(int *)(param_1 + 0x344) == 0)
        {
            puVar4 = &local_8c;
        }
        else if ((*(uint *)(param_1 + 100) & 0x10000) == 0)
        {
            if ((*(uint *)(param_1 + 100) & 0x8000) == 0)
            {
                iVar1 = rand();
                if (0.5 <= (float)iVar1 * 4.656613e-10)
                {
                    puVar4 = (undefined_32 *)(param_1 + 0x400);
                }
                else
                {
                    puVar4 = (undefined_32 *)(param_1 + 0x3c0);
                }
            }
            else
            {
                puVar4 = (undefined_32 *)(param_1 + 0x400);
            }
        }
        else
        {
            puVar4 = (undefined_32 *)(param_1 + 0x3c0);
        }
        FUN_0046e950(param_1, -1, puVar4, 0.2f);
        iVar1 = rand();
        if (0.33 <= (float)iVar1 * 4.656613e-10)
        {
            uVar3 = 0x35;
            if (0.66 <= (float)iVar1 * 4.656613e-10)
            {
                uVar3 = 0x36;
            }
        }
        else
        {
            uVar3 = 0x34;
        }
        iVar1 = rand();
        FUN_00426d10(uVar3, 7, (float)iVar1 * 4.656613e-10 * 0.2 - -0.1, 1.0f, &local_8c, 0, 0, 10.0f, 500.0f);
        iVar1 = rand();
        if (0.33 <= (float)iVar1 * 4.656613e-10)
        {
            uVar3 = 0x35;
            if (0.66 <= (float)iVar1 * 4.656613e-10)
            {
                uVar3 = 0x36;
            }
        }
        else
        {
            uVar3 = 0x34;
        }
        iVar1 = rand();
        FUN_00426d10(uVar3, 7, (float)iVar1 * 4.656613e-10 * 0.2 - -0.1, 1.0f, &local_8c, 0, 0, 10.0f, 500.0f);
        pfVar2 = (float *)(param_1 + 0x288);
        iVar1 = 6;
        do
        {
            pfVar2[6] = (float)((uint)pfVar2[6] & 0xfffffff7);
            if (0.1 < *pfVar2)
            {
                *pfVar2 = 0.1;
            }
            pfVar2 = pfVar2 + 1;
            iVar1 = iVar1 + -1;
        } while (iVar1 != 0);
        if ((*(uint *)(param_1 + 0x60) & 0x100) != 0)
        {
            *(undefined_32 *)(param_1 + 0x30c) = 1.0f;
            return;
        }
        *(undefined_32 *)(param_1 + 0x30c) = 5.0f;
    }
    return;
}

void FUN_00474970(int param_1, undefined_32 param_2)

{
    uint uVar1;
    int iVar2;
    float *pfVar3;
    undefined_32 uVar4;
    undefined_32 *puVar5;
    undefined_32 local_cc;
    undefined_32 local_c8;
    undefined_32 local_c4;
    undefined_32 local_c0;
    int local_bc;
    undefined_32 local_b8;
    undefined_32 *local_b4;
    undefined_8 *local_b0;
    undefined_8 *local_ac;
    undefined_8 local_80[48];
    undefined_8 local_50[16];
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    uVar1 = *(uint *)(param_1 + 0x60);
    if (((uVar1 & 0x80) != 0) && ((*(uint *)(param_1 + 100) & 0x4000000) == 0))
    {
        FUN_004746b0(param_1, param_2);
        return;
    }
    if ((uVar1 & 0x4000) == 0)
    {
        local_c8 = *(undefined_32 *)(param_1 + 0x54);
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xfffe7fff;
        local_cc = *(undefined_32 *)(param_1 + 0x50);
        *(uint *)(param_1 + 0x60) = uVar1 & 0xff7fffff | 0x4000;
        local_c4 = *(undefined_32 *)(param_1 + 0x58);
        *(undefined_32 *)(param_1 + 0x30c) = 10.0f;
        FUN_0044eeb0(param_1 + 0xac, local_80, 0);
        FUN_004744b0(param_1, local_80, 1);
        FUN_00473f40(param_1, 0);
        FUN_0044eeb0(param_1 + 0xac, local_40, 0xbc23d70a);
        local_b4 = &local_cc;
        local_b0 = local_50;
        local_ac = local_10;
        local_c0 = 0x44657468;
        local_bc = param_1;
        local_b8 = 0;
        FUN_00450c50(MAGIC('c', 'M', 'a', 'n'), &local_c0);
        FUN_0046a5f0(3, 0, 0x404ccccd, &local_cc, 3.0f);
        if (*(int *)(param_1 + 0x344) == 0)
        {
            puVar5 = &local_cc;
        }
        else if ((*(uint *)(param_1 + 100) & 0x10000) == 0)
        {
            if ((*(uint *)(param_1 + 100) & 0x8000) == 0)
            {
                iVar2 = rand();
                if (0.5 <= (float)iVar2 * 4.656613e-10)
                {
                    puVar5 = (undefined_32 *)(param_1 + 0x400);
                }
                else
                {
                    puVar5 = (undefined_32 *)(param_1 + 0x3c0);
                }
            }
            else
            {
                puVar5 = (undefined_32 *)(param_1 + 0x400);
            }
        }
        else
        {
            puVar5 = (undefined_32 *)(param_1 + 0x3c0);
        }
        FUN_0046e950(param_1, -1, puVar5, 0.2f);
        iVar2 = rand();
        if (0.33 <= (float)iVar2 * 4.656613e-10)
        {
            uVar4 = 0x35;
            if (0.66 <= (float)iVar2 * 4.656613e-10)
            {
                uVar4 = 0x36;
            }
        }
        else
        {
            uVar4 = 0x34;
        }
        iVar2 = rand();
        FUN_00426d10(uVar4, 7, (float)iVar2 * 4.656613e-10 * 0.2 - -0.1, 1.0f, &local_cc, 0, 0, 10.0f, 500.0f);
        iVar2 = rand();
        if (0.33 <= (float)iVar2 * 4.656613e-10)
        {
            uVar4 = 0x35;
            if (0.66 <= (float)iVar2 * 4.656613e-10)
            {
                uVar4 = 0x36;
            }
        }
        else
        {
            uVar4 = 0x34;
        }
        iVar2 = rand();
        FUN_00426d10(uVar4, 7, (float)iVar2 * 4.656613e-10 * 0.2 - -0.1, 1.0f, &local_cc, 0, 0, 10.0f, 500.0f);
        pfVar3 = (float *)(param_1 + 0x288);
        iVar2 = 6;
        do
        {
            pfVar3[6] = (float)((uint)pfVar3[6] & 0xfffffff7);
            if (0.1 < *pfVar3)
            {
                *pfVar3 = 0.1;
            }
            pfVar3 = pfVar3 + 1;
            iVar2 = iVar2 + -1;
        } while (iVar2 != 0);
        if ((*(byte *)(param_1 + 0x60) & 0x20) != 0)
        {
            FUN_0040a120(0);
            FUN_00409ee0(0x1b, -1, -1, -1, 0);
            if ((*(byte *)(param_1 + 0x60) & 0x20) != 0)
            {
                FUN_00427590(1, **(undefined_32 **)(*(int *)(param_1 + 0x1e70) + 0x18), 0xe, 0xe, 0xe, 0xe, 0xe,
                             (undefined_32 *)(param_1 + 0x50));
                FUN_004276a0((int)*(char *)(*(int *)(param_1 + 0x1e70) + 0x10), 0xf0000);
            }
        }
    }
    return;
}

// 00474cd0
// DamageFunction
// param_1 looks like a player struct
// param_3 is Time ?
void FUN_00474cd0(int param_1, int param_2, float param_3)

{
    float fVar1;

    // invincibility
    if (DAT_0050ca28 == 0)
    {
        // podVisible is true and IFrames is false
        if (((*(uint *)(param_1 + 0x60) & 0x6000) == 0) && ((*(uint *)(param_1 + 100) & 0x2000000) == 0))
        {
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xff7fffff;
            // DamageImmunity * Time + EngineDamage
            fVar1 = *(float *)(param_1 + 0xa0) * param_3 + *(float *)(param_1 + 0x288 + param_2 * 4);
            *(float *)(param_1 + 0x288 + param_2 * 4) = fVar1;
            if (1.0 < fVar1)
            {
                // EngineDamage
                *(undefined_32 *)(param_1 + 0x288 + param_2 * 4) = 1.0f;
            }
            *(uint *)(param_1 + 0x2a0 + param_2 * 4) = *(uint *)(param_1 + 0x2a0 + param_2 * 4) | 1;
            if (*(float *)(param_1 + 0x270 + param_2 * 4) < *(float *)(param_1 + 0x288 + param_2 * 4))
            {
                // LeastDamage = EngineDamage
                *(undefined_32 *)(param_1 + 0x270 + param_2 * 4) = *(undefined_32 *)(param_1 + 0x288 + param_2 * 4);
            }
            *(float *)(param_1 + 0x2c4) = param_3 + *(float *)(param_1 + 0x2c4);
        }
    }
    return;
}

// Never called ?
undefined_32 FUN_00474d80(float param_1, int *param_2, int param_3)

{
    undefined_8 *puVar1;
    float fVar2;
    int *piVar3;
    float fVar4;
    uint uVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    int *piVar10;
    undefined_32 *puVar11;
    uint *puVar12;
    undefined_32 *puVar13;
    undefined_32 uVar14;
    undefined_32 uVar15;
    undefined_32 uVar16;
    undefined_32 uVar17;
    undefined_32 uVar18;
    undefined_32 local_20;
    uint local_18[6];

    iVar8 = (int)param_1;
    iVar6 = *param_2;
    local_20 = -1;
    if (iVar6 < 0x46726566)
    {
        if (iVar6 == MAGIC('F', 'r', 'e', 'e'))
        {
            return 1;
        }
        if (iVar6 != MAGIC('A', 'l', 'o', 'c'))
        {
            return 0;
        }
        return 1;
    }
    if (MAGIC('H', 'i', 't', 't') < iVar6)
    {
        if (iVar6 < 0x5165727a)
        {
            if (iVar6 != MAGIC('Q', 'e', 'r', 'y'))
            {
                if (iVar6 != MAGIC('L', 'o', 'a', 'd'))
                {
                    return 0;
                }
                FUN_00450e30(param_1);
                return 1;
            }
            piVar10 = param_2 + 1;
            if (param_2[1] == MAGIC('Q', 'e', 'r', 'y'))
            {
                return 1;
            }
            do
            {
                piVar3 = (int *)piVar10[1];
                if ((*piVar10 == 0x3173743f) && (*(short *)(*(int *)((int)param_1 + 0x1e70) + 0x5c) == 1))
                {
                    *piVar3 = (int)param_1;
                }
                if ((*piVar10 == 0x326e643f) && (*(short *)(*(int *)((int)param_1 + 0x1e70) + 0x5c) == 2))
                {
                    *piVar3 = (int)param_1;
                }
                if ((*piVar10 == 0x3372643f) && (*(short *)(*(int *)((int)param_1 + 0x1e70) + 0x5c) == 3))
                {
                    *piVar3 = (int)param_1;
                }
                if (*piVar10 == 0x43616d50)
                {
                    FUN_00473e40(piVar10[1], param_1);
                }
                piVar3 = piVar10 + 2;
                piVar10 = piVar10 + 2;
            } while (*piVar3 != MAGIC('Q', 'e', 'r', 'y'));
            return 1;
        }
        if (iVar6 < 0x526d436f)
        {
            if (iVar6 != 0x526d436e)
            {
                if (iVar6 != MAGIC('R', 'S', 'e', 't'))
                {
                    return 0;
                }
                FUN_00450e30(param_1);
                return 1;
            }
            if ((*(byte *)((int)param_1 + 0x60) & 0x40) == 0)
            {
                return 1;
            }
            if (*(int *)((int)param_1 + 0x1eb4) != param_2[1])
            {
                return 1;
            }
            *(undefined_32 *)((int)param_1 + 0x1eb8) = *(undefined_32 *)(param_3 + 8);
            *(undefined_32 *)((int)param_1 + 0x1ebc) = *(undefined_32 *)(param_3 + 0xc);
            *(int *)((int)param_1 + 0x1ec0) = param_2[4];
            return 1;
        }
        if (iVar6 < 0x526d4c64)
        {
            if (iVar6 == 0x526d4c63)
            {
                if ((*(byte *)((int)param_1 + 0x60) & 0x40) == 0)
                {
                    return 1;
                }
                if (*(int *)((int)param_1 + 0x1eb4) != param_2[1])
                {
                    return 1;
                }
                puVar11 = (undefined_32 *)(param_3 + 8);
                puVar13 = (undefined_32 *)((int)param_1 + 0x1ecc);
                QMEMCPY(iVar6, puVar11, puVar13, 6)
                return 1;
            }
            if (iVar6 != 0x526d4869)
            {
                return 0;
            }
            if ((*(byte *)((int)param_1 + 0x60) & 0x40) == 0)
            {
                return 1;
            }
            if (-1 < *(int *)((int)param_1 + 0x1eb4))
            {
                return 1;
            }
            *(int *)((int)param_1 + 0x1eb4) = param_2[1];
            *(undefined_32 *)((int)param_1 + 0x1ebc) = 0;
            *(undefined_32 *)((int)param_1 + 0x1eb8) = 0;
            *(undefined_32 *)((int)param_1 + 0x1ec0) = 0;
            puVar11 = (undefined_32 *)((int)param_1 + 8);
            puVar13 = (undefined_32 *)((int)param_1 + 0x1ecc);
            QMEMCPY(iVar6, puVar11, puVar13, 6)
            return 2;
        }
        if (iVar6 == 0x526d5468)
        {
            if ((*(byte *)((int)param_1 + 0x60) & 0x40) == 0)
            {
                return 1;
            }
            if (*(int *)((int)param_1 + 0x1eb4) != param_2[1])
            {
                return 1;
            }
            *(undefined_32 *)((int)param_1 + 0x1ec8) = *(undefined_32 *)(param_3 + 0xc);
            return 1;
        }
        if (iVar6 != MAGIC('S', 'n', 'a', 'p'))
        {
            if (iVar6 != MAGIC('s', 'L', 'O', 'D'))
            {
                return 0;
            }
            iVar6 = *(int *)((int)param_1 + 0x344);
            if (iVar6 == 0)
            {
                return 1;
            }
            if ((*(byte *)((int)param_1 + 0x60) & 0x20) != 0)
            {
                iVar8 = param_2[1] * 0x20;
                FUN_00481b30(*(undefined_32 *)(iVar6 + 0x14), &DAT_004c7ab8 + iVar8);
                puVar1 = &DAT_004c7abc + iVar8;
                FUN_00481b30(*(undefined_32 *)(*(int *)((int)param_1 + 0x344) + 4), puVar1);
                FUN_00481b30(*(undefined_32 *)(*(int *)((int)param_1 + 0x344) + 8), puVar1);
                FUN_00481b30(*(undefined_32 *)(*(int *)((int)param_1 + 0x344) + 0xc), puVar1);
                FUN_00481b30(*(undefined_32 *)(*(int *)((int)param_1 + 0x344) + 0x10), puVar1);
                return 1;
            }
            iVar8 = param_2[1] * 0x20;
            FUN_00481b30(*(undefined_32 *)(iVar6 + 0x14), &DAT_004c7b38 + iVar8);
            puVar1 = &DAT_004c7b3c + iVar8;
            FUN_00481b30(*(undefined_32 *)(*(int *)((int)param_1 + 0x344) + 4), puVar1);
            FUN_00481b30(*(undefined_32 *)(*(int *)((int)param_1 + 0x344) + 8), puVar1);
            FUN_00481b30(*(undefined_32 *)(*(int *)((int)param_1 + 0x344) + 0xc), puVar1);
            FUN_00481b30(*(undefined_32 *)(*(int *)((int)param_1 + 0x344) + 0x10), puVar1);
            return 1;
        }
        iVar6 = param_2[1];
        if (iVar6 < 0)
        {
            FUN_00473f40(param_1, 0xbdcccccd);
            return 1;
        }
        if (0 < iVar6)
        {
            if (1 < iVar6)
            {
                FUN_00473f40(param_1, 0.01f);
                return 1;
            }
            FUN_00473f40(param_1, 0.1f);
            return 1;
        }
        FUN_00473f40(param_1, 0);
        return 1;
    }
    if (iVar6 != MAGIC('H', 'i', 't', 't'))
    {
        if (iVar6 != 0x476f2121)
        {
            return 0;
        }
        *(uint *)((int)param_1 + 0x60) = *(uint *)((int)param_1 + 0x60) & 0xfffffff2 | 2;
        return 1;
    }
    if (*(int *)((int)param_1 + 0x1e70) == 0)
    {
        return 1;
    }
    iVar6 = param_2[1];
    fVar2 = *(float *)(param_3 + 8);
    if ((*(uint *)((int)param_1 + 0x60) & 2.0f) != 0)
    {
        fVar2 = fVar2 * 4.0;
    }
    fVar2 = fVar2 * 0.0005;
    if ((*(uint *)((int)param_1 + 0x60) & 0x20) != 0)
    {
        (&DAT_004c7ab0)[DAT_0050cb38] = (char)iVar6;
        *(float *)(&DAT_0050cb18 + DAT_0050cb38 * 4) = fVar2;
        DAT_0050cb38 = DAT_0050cb38 + 1;
        if (7 < DAT_0050cb38)
        {
            DAT_0050cb38 = 0;
        }
    }
    if (iVar6 < 0x426f746e)
    {
        if (iVar6 != MAGIC('B', 'o', 't', 'm'))
        {
            if (iVar6 != 0x42697473)
            {
                return 1;
            }
            *(undefined_32 *)((int)param_1 + 0x324) = -1;
            return 1;
        }
        param_1 = (float)__ftol();
        if (6 < (int)param_1)
        {
            param_1 = 8.407791e-45;
        }
        if ((int)param_1 < 1)
        {
            param_1 = 1.401298e-45;
        }
        *(undefined_32 *)(iVar8 + 0x2b8) = 1.0f;
        if (0 < (int)param_1)
        {
            fVar4 = (float)(int)param_1;
            do
            {
                uVar5 = rand();
                FUN_00474cd0(iVar8, uVar5 % 6, fVar2 / fVar4);
                param_1 = (float)((int)param_1 + -1);
            } while (param_1 != 0.0);
        }
        if (500.0 <= (double)*(int *)(iVar8 + 0x1998))
        {
            return 1;
        }
        iVar6 = rand();
        param_1 = *(float *)(iVar8 + 0x1a0) * 0.002 - -0.75;
        if (1.0 < param_1)
        {
            param_1 = 1.0;
        }
        if ((*(byte *)(iVar8 + 0x60) & 0x20) == 0)
        {
            uVar14 = 0;
        }
        else
        {
            FUN_00409ee0(0x13, -1, -1, -1, 0);
            uVar14 = DAT_004c7aa8;
        }
        FUN_00426d10(0x37, 6, (float)iVar6 * 4.656613e-10 * 0.3 - -0.1, param_1, iVar8 + 0x50, 0, uVar14, 10.0f,
                     200.0f);
        if ((*(byte *)(iVar8 + 0x60) & 0x20) == 0)
        {
            return 1;
        }
        iVar6 = rand();
        if (0.15 <= (float)iVar6 * 4.656613e-10)
        {
            return 1;
        }
        uVar18 = 8;
        uVar17 = 8;
        uVar16 = 7;
        uVar15 = 7;
        uVar14 = 7;
    }
    else
    {
        if (iVar6 < 0x4c744675)
        {
            if (iVar6 == MAGIC('L', 't', 'F', 't'))
                goto LAB_0047537d;
            if (iVar6 != MAGIC('K', 'P', 'o', 'w'))
            {
                return 1;
            }
            iVar9 = 1;
            *(undefined_32 *)((int)param_1 + 0x2b8) = 1.0f;
            param_1 = 1.401298e-45;
            local_18[0] = 3;
            iVar6 = rand();
            if ((float)iVar6 * 4.656613e-10 < 0.5)
            {
                iVar9 = 2;
                local_18[1] = 0;
                param_1 = 2.802597e-45;
            }
            iVar6 = rand();
            if ((float)iVar6 * 4.656613e-10 < 0.25)
            {
                local_18[iVar9] = 4;
                iVar9 = iVar9 + 1;
                param_1 = (float)iVar9;
            }
            iVar6 = rand();
            if ((float)iVar6 * 4.656613e-10 < 0.25)
            {
                local_18[iVar9] = 1;
                iVar9 = iVar9 + 1;
                param_1 = (float)iVar9;
            }
            if (iVar9 != 0)
            {
                puVar12 = local_18;
                do
                {
                    FUN_00474cd0(iVar8, *puVar12, fVar2 / (float)(int)param_1);
                    puVar12 = puVar12 + 1;
                    iVar9 = iVar9 + -1;
                } while (iVar9 != 0);
            }
            if (500.0 <= (double)*(int *)(iVar8 + 0x1998))
            {
                return 1;
            }
            iVar6 = rand();
            param_1 = *(float *)(iVar8 + 0x1a0) * 0.002 - -0.75;
            if (1.0 < param_1)
            {
                param_1 = 1.0;
            }
            if ((*(byte *)(iVar8 + 0x60) & 0x20) == 0)
            {
                uVar14 = 0;
            }
            else
            {
                FUN_00409ee0(0x14, -1, 0, -1, 0);
                uVar14 = DAT_004c7aa8;
            }
            FUN_00426d10(0x37, 6, (float)iVar6 * 4.656613e-10 * 0.3 - -0.1, param_1, iVar8 + 0x50, 0, uVar14, 10.0f,
                         200.0f);
            if ((*(byte *)(iVar8 + 0x60) & 0x20) == 0)
            {
                return 1;
            }
            iVar6 = rand();
        }
        else
        {
            if (iVar6 < 0x52744675)
            {
                if ((iVar6 != MAGIC('R', 't', 'F', 't')) && (iVar6 != MAGIC('L', 't', 'S', 'd')))
                {
                    return 1;
                }
            LAB_0047537d:
                *(undefined_32 *)((int)param_1 + 0x2b8) = 1.0f;
                if (iVar6 == MAGIC('R', 't', 'F', 't'))
                {
                    iVar9 = 1;
                    local_18[0] = 3;
                    param_1 = 1.401298e-45;
                    iVar7 = rand();
                    if ((float)iVar7 * 4.656613e-10 < 0.5)
                    {
                        iVar9 = 2;
                        local_18[1] = 0;
                        param_1 = 2.802597e-45;
                    }
                    iVar7 = rand();
                    if ((float)iVar7 * 4.656613e-10 < 0.25)
                    {
                        local_18[iVar9] = 4;
                        iVar9 = iVar9 + 1;
                        param_1 = (float)iVar9;
                    }
                    local_20 = 0x2d;
                }
                else if (iVar6 == MAGIC('L', 't', 'F', 't'))
                {
                    iVar9 = 1;
                    local_18[0] = 0;
                    param_1 = 1.401298e-45;
                    iVar7 = rand();
                    if ((float)iVar7 * 4.656613e-10 < 0.5)
                    {
                        iVar9 = 2;
                        local_18[1] = 3;
                        param_1 = 2.802597e-45;
                    }
                    iVar7 = rand();
                    if ((float)iVar7 * 4.656613e-10 < 0.25)
                    {
                        local_18[iVar9] = 1;
                        iVar9 = iVar9 + 1;
                        param_1 = (float)iVar9;
                    }
                    local_20 = 0x13b;
                }
                else if (iVar6 == MAGIC('R', 't', 'S', 'd'))
                {
                    iVar9 = 1;
                    local_18[0] = 3;
                    param_1 = 1.401298e-45;
                    iVar7 = rand();
                    if ((float)iVar7 * 4.656613e-10 < 0.5)
                    {
                        iVar9 = 2;
                        local_18[1] = 4;
                        param_1 = 2.802597e-45;
                    }
                    iVar7 = rand();
                    if ((float)iVar7 * 4.656613e-10 < 0.25)
                    {
                        local_18[iVar9] = 5;
                        iVar9 = iVar9 + 1;
                        param_1 = (float)iVar9;
                    }
                    local_20 = 0x5a;
                }
                else if (iVar6 == MAGIC('L', 't', 'S', 'd'))
                {
                    iVar9 = 1;
                    local_18[0] = 0;
                    param_1 = 1.401298e-45;
                    iVar7 = rand();
                    if ((float)iVar7 * 4.656613e-10 < 0.5)
                    {
                        local_18[1] = 1;
                        iVar9 = 2;
                        param_1 = 2.802597e-45;
                    }
                    iVar7 = rand();
                    if ((float)iVar7 * 4.656613e-10 < 0.25)
                    {
                        local_18[iVar9] = 2;
                        iVar9 = iVar9 + 1;
                        param_1 = (float)iVar9;
                    }
                    local_20 = 0x10e;
                }
                else
                {
                    iVar9 = (int)param_1;
                    if (iVar6 == MAGIC('V', 'h', 'L', 't'))
                    {
                        param_1 = 5.605194e-45;
                        iVar9 = 4;
                        puVar12 = local_18;
                        do
                        {
                            uVar5 = rand();
                            iVar9 = iVar9 + -1;
                            *puVar12 = uVar5 % 6;
                            puVar12 = puVar12 + 1;
                        } while (iVar9 != 0);
                        iVar9 = rand();
                        *(float *)(iVar8 + 0x308) = (float)iVar9 * 4.656613e-10 * 6.0 - -2.0;
                        iVar9 = 4;
                    }
                }
                if (0 < iVar9)
                {
                    puVar12 = local_18;
                    do
                    {
                        FUN_00474cd0(iVar8, *puVar12, fVar2 / (float)(int)param_1);
                        puVar12 = puVar12 + 1;
                        iVar9 = iVar9 + -1;
                    } while (iVar9 != 0);
                }
                if (((((double)*(int *)(iVar8 + 0x1998) < 500.0) && ((*(byte *)(iVar8 + 0x60) & 0x20) != 0))
                     && (FUN_00409ee0(0x14, -1, local_20, -1, 0), (*(byte *)(iVar8 + 0x60) & 0x20) != 0))
                    && (iVar9 = rand(), (float)iVar9 * 4.656613e-10 < 0.15))
                {
                    if (iVar6 == MAGIC('V', 'h', 'L', 't'))
                    {
                        FUN_00427590(1, **(undefined_32 **)(*(int *)(iVar8 + 0x1e70) + 0x18), 1, 6, 5, 6, 5,
                                     iVar8 + 0x50);
                        return 1;
                    }
                    FUN_00427590(1, **(undefined_32 **)(*(int *)(iVar8 + 0x1e70) + 0x18), 5, 6, 5, 6, 7, iVar8 + 0x50);
                    return 1;
                }
                return 1;
            }
            if (iVar6 == MAGIC('R', 't', 'S', 'd'))
                goto LAB_0047537d;
            if (iVar6 != 0x54323031)
            {
                if (iVar6 != MAGIC('V', 'h', 'L', 't'))
                {
                    return 1;
                }
                goto LAB_0047537d;
            }
            *(undefined_32 *)((int)param_1 + 0x2b8) = 1.0f;
            iVar6 = 3;
            do
            {
                uVar5 = rand();
                FUN_00474cd0(param_1, uVar5 % 6, fVar2 * 0.3333333);
                iVar6 = iVar6 + -1;
            } while (iVar6 != 0);
            if (500.0 <= (double)*(int *)((int)param_1 + 0x1998))
            {
                return 1;
            }
            iVar6 = rand();
            param_1 = *(float *)((int)param_1 + 0x1a0) * 0.002 - -0.75;
            if (1.0 < param_1)
            {
                param_1 = 1.0;
            }
            if ((*(byte *)(iVar8 + 0x60) & 0x20) == 0)
            {
                uVar14 = 0;
            }
            else
            {
                FUN_00409ee0(0x13, -1, -1, -1, 0);
                uVar14 = DAT_004c7aa8;
            }
            FUN_00426d10(0x37, 6, (float)iVar6 * 4.656613e-10 * 0.3 - -0.1, param_1, iVar8 + 0x50, 0, uVar14, 10.0f,
                         200.0f);
            if ((*(byte *)(iVar8 + 0x60) & 0x20) == 0)
            {
                return 1;
            }
            iVar6 = rand();
        }
        if (0.15 <= (float)iVar6 * 4.656613e-10)
        {
            return 1;
        }
        uVar18 = 7;
        uVar17 = 6;
        uVar16 = 5;
        uVar15 = 6;
        uVar14 = 5;
    }
    FUN_00427590(1, **(undefined_32 **)(*(int *)(iVar8 + 0x1e70) + 0x18), uVar14, uVar15, uVar16, uVar17, uVar18,
                 iVar8 + 0x50);
    return 1;
}

void FUN_00475ad0(int param_1, int param_2, undefined_32 param_3, int param_4, undefined_32 param_5,
                  undefined_32 *param_6, int param_7, undefined_32 param_8, undefined_32 param_9, int param_10)

{
    undefined_32 *puVar1;
    uint *puVar2;
    int iVar3;
    uint uVar4;
    undefined_32 *puVar5;
    int iVar6;
    int iVar7;
    float *pfVar8;
    float10 fVar9;
    undefined_8 local_6c[12];
    undefined_8 local_60[12];
    float local_54;
    float local_50;
    float local_48;
    float local_44;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    int local_1c;

    iVar3 = param_1;
    *(int *)(param_1 + 0xac) = param_2;
    *(undefined_32 *)(param_1 + 0xb0) = 0;
    *(undefined_32 *)(param_1 + 0xb4) = 0;
    *(undefined_32 *)(param_1 + 0xb8) = 0;
    *(undefined_32 *)(param_1 + 0xcc) = 0;
    *(undefined_32 *)(param_1 + 0xd0) = 0;
    *(undefined_32 *)(param_1 + 0xd4) = 0;
    *(undefined_32 *)(param_1 + 0xd8) = 0;
    if (param_2 != 0)
    {
        FUN_0044eef0((int *)(param_1 + 0xac), 0);
    }
    *(undefined_32 *)(param_1 + 0xb4) = 0.01f;
    *(undefined_32 *)(param_1 + 0x60) = 0;
    *(undefined_32 *)(param_1 + 100) = 0;
    uVar4 = *(uint *)(param_1 + 0x60);
    *(uint *)(param_1 + 0x60) = uVar4 & 0xfffffff0;
    iVar6 = *(int *)(*(int *)(param_1 + 0x1e70) + 4);
    if (iVar6 == MAGIC('L', 'o', 'c', 'l'))
    {
        uVar4 = uVar4 & 0xfffffff0 | 0x20;
    }
    else
    {
        if (iVar6 == MAGIC('R', 'E', 'M', 'O'))
        {
            *(uint *)(param_1 + 0x60) = uVar4 & 0xfffffff0 | 0x40;
            *(undefined_32 *)(param_1 + 0x1eb4) = -1;
            goto LAB_00475b62;
        }
        if (iVar6 != MAGIC('A', 'A', 'I', 'I'))
            goto LAB_00475b62;
        uVar4 = uVar4 & 0xfffffff0 | 0x80;
    }
    *(uint *)(param_1 + 0x60) = uVar4;
LAB_00475b62:
    if ((*(byte *)(*(int *)(param_1 + 0x1e70) + 8) & 0x20) == 0)
    {
        uVar4 = *(uint *)(param_1 + 0x60) & 0xfffffeff;
    }
    else
    {
        uVar4 = *(uint *)(param_1 + 0x60) | 0x100;
    }
    *(uint *)(param_1 + 0x60) = uVar4;
    puVar1 = (undefined_32 *)(param_1 + 0x20);
    puVar5 = (undefined_32 *)(param_1 + 0x50);
    *(undefined_32 *)(param_1 + 0x6c) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x1c);
    *(undefined_32 *)(param_1 + 0x70) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x20);
    *(undefined_32 *)(param_1 + 0x74) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x24);
    *(undefined_32 *)(param_1 + 0x78) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x28);
    *(undefined_32 *)(param_1 + 0x7c) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x2c);
    *(undefined_32 *)(param_1 + 0x80) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x30);
    *(undefined_32 *)(param_1 + 0x84) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x34);
    *(undefined_32 *)(param_1 + 0x88) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x38);
    *(undefined_32 *)(param_1 + 0x8c) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x3c);
    *(undefined_32 *)(param_1 + 0x90) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x40);
    *(undefined_32 *)(param_1 + 0x98) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x48);
    *(undefined_32 *)(param_1 + 0x94) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x44);
    *(undefined_32 *)(param_1 + 0x9c) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x4c);
    *(undefined_32 *)(param_1 + 0xa0) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x50);
    *(undefined_32 *)(param_1 + 0xa4) = 2.0f;
    *(undefined_32 *)(param_1 + 0xa8) = *(undefined_32 *)(*(int *)(param_1 + 0x1e70) + 0x54);
    *puVar1 = *param_6;
    *(undefined_32 *)(param_1 + 0x24) = param_6[1];
    *(undefined_32 *)(param_1 + 0x28) = param_6[2];
    *(undefined_32 *)(param_1 + 0x2c) = param_6[3];
    *(undefined_32 *)(param_1 + 0x30) = param_6[4];
    *(undefined_32 *)(param_1 + 0x34) = param_6[5];
    *(undefined_32 *)(param_1 + 0x38) = param_6[6];
    *(undefined_32 *)(param_1 + 0x3c) = param_6[7];
    *(undefined_32 *)(param_1 + 0x40) = param_6[8];
    *(undefined_32 *)(param_1 + 0x44) = param_6[9];
    *(undefined_32 *)(param_1 + 0x48) = param_6[10];
    *(undefined_32 *)(param_1 + 0x4c) = param_6[0xb];
    *puVar5 = param_6[0xc];
    *(undefined_32 *)(param_1 + 0x54) = param_6[0xd];
    *(undefined_32 *)(param_1 + 0x58) = param_6[0xe];
    *(undefined_32 *)(param_1 + 0x5c) = param_6[0xf];
    local_3c = *puVar5;
    local_38 = *(undefined_32 *)(param_1 + 0x54);
    local_34 = *(undefined_32 *)(param_1 + 0x58);
    local_24 = 40.0f;
    local_30 = 0;
    local_2c = 0;
    local_28 = -1.0f;
    fVar9 = (float10)FUN_00444d10(param_4, &local_3c, local_60, local_6c);
    *(float *)(param_1 + 0x58) =
        (float)((float10) * (float *)(param_1 + 0x58) - (fVar9 - (float10) * (float *)(param_1 + 0x94)));
    FUN_00430b80(puVar1, param_1 + 8);
    *(undefined_32 *)(param_1 + 700) = 0;
    *(undefined_32 *)(param_1 + 0xdc) = 0;
    *(undefined_32 *)(param_1 + 0xe0) = 0x3f666666;
    *(undefined_32 *)(param_1 + 0xe4) = 0x3f666666;
    *(undefined_32 *)(param_1 + 0xe8) = 0;
    *(undefined_32 *)(param_1 + 0xec) = 0;
    *(undefined_32 *)(param_1 + 0xf8) = 0;
    *(undefined_32 *)(param_1 + 0x100) = 0;
    *(undefined_32 *)(param_1 + 0xf0) = 0;
    *(undefined_32 *)(param_1 + 0x124) = 1.0f;
    *(undefined_32 *)(param_1 + 0x118) = 0;
    *(undefined_32 *)(param_1 + 0x11c) = 0;
    *(undefined_32 *)(param_1 + 0x120) = 1.0f;
    *(undefined_32 *)(param_1 + 0x128) = 0;
    *(undefined_32 *)(param_1 + 0x130) = 0;
    *(undefined_32 *)(param_1 + 0x134) = 0;
    *(undefined_32 *)(param_1 + 0x138) = 0;
    *(undefined_32 *)(param_1 + 300) = 0;
    *(undefined_32 *)(param_1 + 0x104) = 0.2f;
    *(undefined_32 *)(param_1 + 0x108) = 0x45fd2000;
    *(undefined_16 *)(param_1 + 0x10c) = 0;
    *(undefined_16 *)(param_1 + 0x10e) = 0;
    *(undefined_32 *)(param_1 + 0x110) = 0;
    *(undefined_32 *)(param_1 + 0x114) = 0;
    *(undefined_32 *)(param_1 + 0x310) = 0;
    *(undefined_32 *)(param_1 + 0x338) = 0;
    *(undefined_32 *)(param_1 + 0x33c) = 0;
    *(undefined_32 *)(param_1 + 0x340) = 0;
    *(undefined_32 *)(param_1 + 0x314) = 0;
    *(undefined_32 *)(param_1 + 0x318) = 0;
    *(undefined_32 *)(param_1 + 0x31c) = 0;
    *(undefined_32 *)(param_1 + 800) = 0;
    *(undefined_32 *)(param_1 + 0x328) = 0;
    *(undefined_32 *)(param_1 + 0x32c) = 0;
    *(undefined_32 *)(param_1 + 0x324) = -1;
    *(undefined_32 *)(param_1 + 0x18c) = 0;
    *(undefined_32 *)(param_1 + 400) = 0x42000000;
    vec3f_set(param_1 + 0x194, 0, 0, -1.0f);
    *(undefined_32 *)(param_1 + 0x1a0) = 0;
    *(undefined_32 *)(param_1 + 0x1b0) = 0;
    *(undefined_32 *)(param_1 + 0x1b4) = 0;
    *(undefined_32 *)(param_1 + 0x1a4) = 0;
    *(undefined_32 *)(param_1 + 0x1a8) = 0;
    vec3f_set(param_1 + 0x1b8, 0, 0, 0);
    *(undefined_32 *)(param_1 + 0x1efc) = 0.25f;
    *(undefined_32 *)(param_1 + 0x1ec) = 0;
    *(undefined_32 *)(param_1 + 0x1f0) = 0;
    *(undefined_32 *)(param_1 + 0x228) = 0;
    *(undefined_32 *)(param_1 + 0x220) = 0;
    *(undefined_32 *)(param_1 + 0x224) = 0;
    *(undefined_32 *)(param_1 + 500) = 0;
    *(undefined_32 *)(param_1 + 0x1f8) = 0;
    *(undefined_32 *)(param_1 + 0x1fc) = 0;
    *(undefined_32 *)(param_1 + 0x200) = 0;
    *(undefined_32 *)(param_1 + 0x204) = 0;
    vec3f_set(param_1 + 0x1c4, 0, 0, 0);
    vec3f_set(param_1 + 0x1d0, 0, 0, 0);
    vec3f_set(param_1 + 0x1dc, 0, 0, 0);
    vec3f_set(param_1 + 0x144, 0, 0, 1.0f);
    vec3f_set(param_1 + 0x154, 0, 0, 0);
    vec3f_copy(param_1 + 0x16c, puVar5);
    vec3f_copy(param_1 + 0x178, puVar5);
    vec3f_set(param_1 + 0x160, 0, 0, 1.0f);
    *(undefined_32 *)(param_1 + 0x150) = 0;
    *(undefined_32 *)(param_1 + 0x1f18) = 0;
    *(undefined_32 *)(param_1 + 0x250) = 0;
    *(undefined_32 *)(param_1 + 0x218) = 100.0f;
    *(undefined_32 *)(param_1 + 0x1f00) = 80.0f;
    *(undefined_32 *)(param_1 + 0x1f04) = 0;
    *(undefined_32 *)(param_1 + 0x1f08) = 0;
    *(undefined_32 *)(param_1 + 0x2f0) = 0;
    *(undefined_32 *)(param_1 + 0x2f4) = 0;
    *(undefined_32 *)(param_1 + 0x2f8) = 0;
    *(undefined_32 *)(param_1 + 0x2fc) = 0;
    *(undefined_32 *)(param_1 + 0x19b8) = 0;
    *(undefined_32 *)(param_1 + 0x1f14) = 0;
    *(undefined_32 *)(param_1 + 0x208) = 0;
    *(undefined_32 *)(param_1 + 0x20c) = 0;
    *(undefined_32 *)(param_1 + 0x1e6c) = 0;
    *(undefined_32 *)(param_1 + 0x184) = 0;
    *(undefined_32 *)(param_1 + 0x188) = 0;
    *(undefined_32 *)(param_1 + 0x1ac) = 1.0f;
    *(undefined_32 *)(param_1 + 0x244) = 1.0f;
    *(undefined_32 *)(param_1 + 0x240) = 0;
    *(undefined_32 *)(param_1 + 0x248) = 1.0f;
    *(undefined_32 *)(param_1 + 0x330) = 0;
    *(undefined_32 *)(param_1 + 0x334) = 0;
    *(undefined_32 *)(param_1 + 0x24c) = 1.0f;
    *(undefined_32 *)(param_1 + 0x1e8) = 0;
    *(undefined_32 *)(param_1 + 0x22c) = 1.0f;
    *(undefined_32 *)(param_1 + 0x230) = 1.0f;
    *(undefined_32 *)(param_1 + 0x234) = 10.0f;
    *(int *)(param_1 + 0x238) = param_7;
    if (param_7 < 0)
    {
        *(undefined_32 *)(param_1 + 0x238) = 0;
    }
    else
    {
        *(int *)(param_1 + 0x238) = param_7 + 1;
        if (2 < param_7 + 1)
        {
            *(int *)(param_1 + 0x238) = param_7;
        }
        if (5 < *(int *)(param_1 + 0x238))
        {
            *(int *)(param_1 + 0x238) = *(int *)(param_1 + 0x238) + -1;
        }
    }
    *(undefined_32 *)(param_1 + 0x264) = 0;
    *(undefined_32 *)(param_1 + 0x23c) = *(undefined_32 *)(param_1 + 0x238);
    *(undefined_32 *)(param_1 + 0x268) = 0x42700000;
    *(undefined_32 *)(param_1 + 0x1998) = 0;
    *(undefined_32 *)(param_1 + 0x26c) = 0xffffff00;
    *(undefined_32 *)(param_1 + 0x140) = 0;
    *(undefined_32 *)(param_1 + 0x1f24) = 0;
    *(undefined_32 *)(param_1 + 0x1f1c) = 0;
    *(undefined_32 *)(param_1 + 0x1f20) = 0;
    *(undefined_32 *)(param_1 + 0x21c) = 0;
    puVar5 = (undefined_32 *)(param_1 + 0x288);
    iVar6 = 6;
    do
    {
        puVar5[-6] = 0;
        *puVar5 = 0;
        puVar5[6] = 0;
        puVar5 = puVar5 + 1;
        iVar6 = iVar6 + -1;
    } while (iVar6 != 0);
    *(undefined_32 *)(param_1 + 0x2b8) = 0;
    *(undefined_32 *)(param_1 + 700) = 0;
    *(undefined_32 *)(param_1 + 0x2c0) = 0;
    *(undefined_32 *)(param_1 + 0x2c4) = 0;
    *(undefined_32 *)(param_1 + 0x2c8) = 0;
    *(undefined_32 *)(param_1 + 0x30c) = 0;
    *(undefined_32 *)(param_1 + 0x308) = 0;
    *(undefined_32 *)(param_1 + 0x1e3c) = 0;
    iVar6 = param_1 + 0x19bc;
    param_1 = 0x12;
    do
    {
        FUN_0044bb10(iVar6, puVar1);
        iVar6 = iVar6 + 0x40;
        param_1 = param_1 + -1;
    } while (param_1 != 0);
    *(undefined_32 *)(iVar3 + 0x1e40) = 9;
    *(undefined_32 *)(iVar3 + 0x1e44) = 6;
    vec3f_set(iVar3 + 0x1e48, 0, 0, 0);
    vec3f_set(iVar3 + 0x1e54, 0, 0, 0);
    *(int *)(iVar3 + 0x13c) = param_4;
    *(undefined_32 *)(iVar3 + 0x1e60) = 0;
    *(undefined_32 *)(iVar3 + 0x344) = param_3;
    *(undefined_32 *)(iVar3 + 0x300) = param_5;
    *(undefined_32 *)(iVar3 + 0x304) = 0;
    if (((param_10 != 0) && ((*(byte *)(iVar3 + 0x60) & 0x20) != 0))
        && (*(char *)(*(int *)(iVar3 + 0x1e70) + 0x10) != '\0'))
    {
        *(undefined_32 *)(iVar3 + 0x304) = 2;
    }
    iVar6 = iVar3 + 0x1610;
    iVar7 = iVar3 + 0x350;
    param_4 = 0x4b;
    do
    {
        mat_set_identity(iVar7);
        vec3f_set(iVar6, 0, 0, 0);
        iVar7 = iVar7 + 0x40;
        iVar6 = iVar6 + 0xc;
        param_4 = param_4 + -1;
    } while (param_4 != 0);
    *(undefined_32 *)(iVar3 + 0x13c8) = 0xc4fa0000;
    *(undefined_32 *)(iVar3 + 0x1408) = 0xc4fa0000;
    iVar6 = 4;
    pfVar8 = (float *)(iVar3 + 0x199c);
    do
    {
        iVar7 = rand();
        iVar6 = iVar6 + -1;
        *pfVar8 = (float)iVar7 * 4.656613e-10 * 60.0;
        pfVar8 = pfVar8 + 1;
    } while (iVar6 != 0);
    *(undefined_32 *)(iVar3 + 0x19b0) = 0;
    *(undefined_32 *)(iVar3 + 0x19ac) = 1.0f;
    *(undefined_32 *)(iVar3 + 0x19b4) = 1.0f;
    local_20 = MAGIC('s', 'L', 'O', 'D');
    local_1c = (-(uint)(DAT_00ec86bc != 1) & 0xfffffffe) + 2;
    FUN_00450c00(iVar3, &local_20);
    FUN_0046d4c0(iVar3);
    if (*(int *)(iVar3 + 0x344) != 0)
    {
        iVar6 = *(int *)(*(int *)(iVar3 + 0x344) + 0xf8);
        if (iVar6 != 0)
        {
            puVar2 = (uint *)(iVar6 + 0x10);
            *puVar2 = *puVar2 | 1;
        }
        iVar6 = *(int *)(*(int *)(iVar3 + 0x344) + 8);
        if (iVar6 != 0)
        {
            puVar2 = (uint *)(iVar6 + 0x10);
            *puVar2 = *puVar2 | 1;
        }
        iVar6 = *(int *)(*(int *)(iVar3 + 0x344) + 0x10);
        if (iVar6 != 0)
        {
            puVar2 = (uint *)(iVar6 + 0x10);
            *puVar2 = *puVar2 | 1;
        }
        iVar6 = *(int *)(*(int *)(iVar3 + 0x344) + 0x38);
        if (iVar6 != 0)
        {
            puVar2 = (uint *)(iVar6 + 0x10);
            *puVar2 = *puVar2 | 1;
        }
    }
    *(undefined_32 *)(iVar3 + 0x1e64) = 2.0f;
    *(undefined_32 *)(iVar3 + 0x1e68) = 2.0f;
    if ((*(int *)(iVar3 + 0x344) != 0) && (iVar6 = *(int *)(*(int *)(iVar3 + 0x344) + 0xf8), iVar6 != 0))
    {
        iVar6 = FUN_00482000(iVar6, &local_54, 0);
        if (iVar6 != 0)
        {
            *(float *)(iVar3 + 0x1e68) = (local_44 - local_50) * 0.004;
            *(float *)(iVar3 + 0x1e64) = (local_48 - local_54) * 0.0036;
        }
    }
    if (**(int **)(*(int *)(iVar3 + 0x1e70) + 0x18) == 0xe)
    {
        *(undefined_32 *)(iVar3 + 0x1e64) = 3.0f;
        *(undefined_32 *)(iVar3 + 0x1e68) = 5.0f;
    }
    if ((*(byte *)(iVar3 + 0x60) & 0x20) != 0)
    {
        FUN_0040a120(0);
        FUN_0040b110(iVar3);
    }
    if (((*(uint *)(iVar3 + 0x60) & 0x20) != 0) || ((*(uint *)(iVar3 + 0x60) & 0x100) != 0))
    {
        FUN_00426910(1, **(undefined_32 **)(*(int *)(iVar3 + 0x1e70) + 0x18));
    }
    if ((*(byte *)(iVar3 + 0x60) & 0x20) != 0)
    {
        FUN_0046d690(iVar3);
    }
    return;
}

void FUN_00476390(float *param_1, float *param_2, float *param_3, undefined_32 *param_4)

{
    float10 fVar1;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    *param_4 = 0;
    param_4[2] = 0;
    fVar1 = (float10)ninety_minus_arctan(*param_1 * *param_3 + param_3[2] * param_1[2] + param_3[1] * param_1[1]);
    param_4[1] = (float)(fVar1 - (float10)90.0);
    rdVector_Cross3(&local_18, param_3, param_1);
    rdVector_Cross3(&local_c, param_2, &local_18);
    fVar1 = (float10)rdVector_Len3(&local_18);
    if (fVar1 <= (float10)0.01)
    {
        return;
    }
    fVar1 = (float10)ninety_minus_arctan(
        (float)(((float10)param_2[2] * (float10)local_10 + (float10)param_2[1] * (float10)local_14
                 + (float10)local_18 * (float10)*param_2)
                / fVar1));
    if (0.0 < local_c * *param_1 + local_4 * param_1[2] + local_8 * param_1[1])
    {
        param_4[2] = -(float)fVar1;
        return;
    }
    param_4[2] = (float)fVar1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004764a0(int param_1)

{
    *(float *)(param_1 + 400 /*0x190*/) = _DAT_004c2590 * 0.25;
    *(undefined_32 *)(param_1 + 0x194) = DAT_004c2598;
    *(undefined_32 *)(param_1 + 0x198) = DAT_004c259c;
    *(undefined_32 *)(param_1 + 0x19c) = DAT_004c25a0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004764e0(int param_1, undefined_32 param_2, undefined_32 *param_3, undefined_32 *param_4, undefined_32 param_5,
                  float param_6, float param_7, float param_8, int param_9)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float10 fVar4;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_8 local_18[4];
    float local_14;
    float local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    rdVector_Cross3(&local_24, param_3, param_2);
    fVar4 = (float10)rdVector_Len3(&local_24);
    if ((float10)0.01 < fVar4)
    {
        rdVector_Scale3(&local_24, (float)((float10)1.0 / fVar4), &local_24);
    }
    else
    {
        local_24 = *param_4;
        local_20 = param_4[1];
        local_1c = param_4[2];
    }
    rdVector_Cross3(&local_c, param_2, &local_24);
    fVar4 = (float10)rdVector_Len3(&local_c);
    if ((float10)0.01 < fVar4)
    {
        rdVector_Scale3(&local_c, (float)((float10)1.0 / fVar4), &local_c);
    }
    else
    {
        local_c = *param_3;
        local_8 = param_3[1];
        local_4 = param_3[2];
    }
    FUN_00476390(&local_c, &local_24, param_5, local_18);
    if ((*(uint *)(param_1 + 100) & 0x400) != 0)
    {
        if (85.0 < local_10)
        {
            local_10 = 85.0;
        }
        if (local_10 < -85.0)
        {
            local_10 = -85.0;
        }
    }
    fVar3 = local_14 - *(float *)(param_9 + 4);
    if (*(float *)(param_9 + 4) <= local_14)
    {
        if (local_14 <= *(float *)(param_9 + 4))
            goto LAB_00476655;
        fVar1 = 0.5;
    }
    else
    {
        fVar1 = 0.3333333;
    }
    fVar3 = fVar3 * fVar1;
LAB_00476655:
    fVar1 = (local_10 - *(float *)(param_9 + 8)) * 0.125;
    if ((*(uint *)(param_1 + 0x60) & 0x4000000) == 0)
    {
        fVar2 = (param_7 - param_6) / (param_7 - param_8);
        if (fVar2 <= 0.0)
        {
            fVar1 = *(float *)(param_9 + 8) * -0.125;
            fVar3 = 0.0;
            if (-37.0 < *(float *)(param_9 + 4))
            {
                fVar3 = (float)_DAT_00e22a40 * -22.0;
            }
            if ((*(float *)(param_1 + 0x2fc) < 0.0) && (*(float *)(param_9 + 4) < -10.0))
            {
                fVar3 = fVar3 - (float)_DAT_00e22a40 * *(float *)(param_1 + 0x2fc) * 20.0;
            }
        }
        else if (fVar2 < 1.0)
        {
            fVar3 = fVar2 * fVar3;
            fVar1 = fVar1 * fVar2;
        }
    }
    *(float *)(param_9 + 4) = fVar3 + *(float *)(param_9 + 4);
    *(float *)(param_9 + 8) = fVar1 + *(float *)(param_9 + 8);
    return;
}

float10 FUN_00476740(int param_1, undefined_32 param_2, undefined_32 param_3, float param_4, float *param_5)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    undefined_32 *puVar6;
    float *pfVar7;
    int iVar8;
    int iVar9;
    float10 fVar10;
    float local_154;
    float local_150;
    float local_14c;
    float local_148[6];
    undefined_8 local_130[16];
    undefined_32 local_120;
    undefined_32 local_11c;
    undefined_32 local_118;
    undefined_32 local_110;
    undefined_32 local_10c;
    undefined_32 local_108;
    undefined_32 local_100;
    undefined_32 local_fc;
    undefined_32 local_f8;
    float afStack_f0[18];
    float local_a8[18];
    undefined_32 local_60[3];
    undefined_8 local_54[12];
    float local_48[3];
    undefined_8 local_3c[60];

    iVar8 = **(int **)(*(int *)(param_1 + 0x1e70) + 0x18);
    vec3f_set(local_60, 0, 0, 0);
    iVar8 = iVar8 * 0x6c;
    vec3f_copy(local_54, &DAT_004c7094 + iVar8);
    vec3f_copy(local_48, &DAT_004c7094 + iVar8);
    local_48[0] = -local_48[0];
    vec3f_copy(local_3c, &DAT_004c7088 + iVar8);
    pfVar7 = local_148;
    iVar8 = 0;
    do
    {
        rdVector_Scale3(&local_154, *(undefined_32 *)((int)local_60 + iVar8), param_1 + 0x20);
        vec3f_multiply_add(&local_154, &local_154, *(undefined_32 *)((int)local_60 + iVar8 + 4), param_1 + 0x30);
        vec3f_multiply_add(&local_154, &local_154, *(undefined_32 *)((int)local_60 + iVar8 + 8), param_1 + 0x40);
        vec3f_add((int)local_a8 + iVar8, param_2, &local_154);
        if ((0.05 <= param_5[2]) || (param_5[2] <= -0.05))
        {
            fVar1 = *param_5;
            fVar2 = param_5[1];
            fVar4 = param_5[1];
            fVar5 = param_5[2];
            *(float *)((int)afStack_f0 + iVar8) = *param_5;
            fVar3 = param_5[2];
            *(float *)((int)afStack_f0 + iVar8 + 4) = fVar4;
            *(float *)((int)afStack_f0 + iVar8 + 8) = fVar5;
            fVar2 = (-(local_154 * fVar1) - local_150 * fVar2) / fVar3 - local_14c;
            fVar1 = *(float *)((int)local_a8 + iVar8 + 8);
            *pfVar7 = param_4 - fVar2;
            *(float *)((int)local_a8 + iVar8 + 8) = (fVar2 + fVar1) - param_4;
        }
        else
        {
            fVar1 = *(float *)((int)local_a8 + iVar8 + 8);
            fVar2 = param_5[1];
            fVar3 = param_5[2];
            *(float *)((int)afStack_f0 + iVar8) = *param_5;
            *(float *)((int)afStack_f0 + iVar8 + 4) = fVar2;
            *(float *)((int)local_a8 + iVar8 + 8) = fVar1 - param_4;
            *(float *)((int)afStack_f0 + iVar8 + 8) = fVar3;
            *pfVar7 = param_4;
        }
        iVar8 = iVar8 + 0xc;
        pfVar7 = pfVar7 + 1;
    } while (iVar8 < 0x30);
    if (1.0 <= ((float)*(int *)(param_1 + 0x1998) - 40.0) * 0.01666667)
    {
        puVar6 = (undefined_32 *)(param_1 + 0x12c8);
        iVar8 = 4;
        do
        {
            *puVar6 = 0xc7c35000;
            puVar6 = puVar6 + 0x10;
            iVar8 = iVar8 + -1;
        } while (iVar8 != 0);
    }
    else
    {
        pfVar7 = local_148;
        iVar8 = param_1 + 0x1290;
        iVar9 = 0;
        do
        {
            if (*pfVar7 <= 0.0)
            {
                *(undefined_32 *)(iVar8 + 0x38) = 0xc7c35000;
            }
            else
            {
                mat_set_identity(local_130);
                local_110 = *(undefined_32 *)((int)afStack_f0 + iVar9);
                local_10c = *(undefined_32 *)((int)afStack_f0 + iVar9 + 4);
                local_108 = *(undefined_32 *)((int)afStack_f0 + iVar9 + 8);
                local_120 = *(undefined_32 *)(param_1 + 0x30);
                local_11c = *(undefined_32 *)(param_1 + 0x34);
                local_118 = *(undefined_32 *)(param_1 + 0x38);
                rdVector_Cross3(local_130, &local_120, &local_110);
                rdVector_Cross3(&local_120, &local_110, local_130);
                local_100 = *(undefined_32 *)((int)local_a8 + iVar9);
                local_fc = *(undefined_32 *)((int)local_a8 + iVar9 + 4);
                local_f8 = *(undefined_32 *)((int)local_a8 + iVar9 + 8);
                FUN_0044bb10(iVar8, local_130);
                mat_multiply_rows(iVar8, 0x3b83126f, 0x3b83126f, 0x3b83126f, iVar8);
            }
            iVar9 = iVar9 + 0xc;
            pfVar7 = pfVar7 + 1;
            iVar8 = iVar8 + 0x40;
        } while (iVar9 < 0x30);
    }
    fVar10 = (float10)local_148[1];
    if ((0.0 < local_148[2]) && (local_148[2] < local_148[1]))
    {
        fVar10 = (float10)local_148[2];
    }
    if ((float10)0.0 <= fVar10)
    {
        return fVar10 - (float10)2.0;
    }
    if (0.0 <= param_4)
    {
        return (float10)param_4;
    }
    return (float10)100000.0;
}

void FUN_00476ac0(int param_1, float *param_2)

{
    float **ppfVar1;
    float fVar2;
    float fVar3;
    ushort uVar4;
    uint uVar5;
    float fVar6;
    float fVar7;
    float fVar8;
    float fVar9;
    float fVar10;
    float fVar11;
    float fVar12;
    float fVar13;
    float fVar14;
    float fVar15;
    float fVar16;
    float fVar17;
    float fVar18;
    float fVar19;
    float fVar20;
    int iVar21;
    uint uVar22;
    float *pfVar23;

    pfVar23 = param_2;
    if (param_2 != NULL)
    {
        do
        {
            uVar4 = *(ushort *)((int)pfVar23 + 0x26);
            uVar22 = 0;
            if (uVar4 != 0)
            {
                uVar22 = (uint)((uVar4 & 1) != 0);
                if (((uVar4 & 2) != 0) && (*(float *)(param_1 + 0x1a0) < 150.0))
                {
                    uVar22 = 1;
                }
                if (((*(byte *)(param_1 + 0x60) & 0x20) == 0) && ((uVar4 & 0x20) != 0))
                {
                    uVar22 = 1;
                }
                uVar5 = *(uint *)(*(int *)(param_1 + 0x1e70) + 0x78);
                if ((uVar5 == 0) && ((uVar4 & 4) != 0))
                {
                    uVar22 = 1;
                }
                if ((uVar5 == 1) && ((uVar4 & 8) != 0))
                {
                    uVar22 = uVar5;
                }
                if ((uVar5 == 2) && ((uVar4 & 0x10) != 0))
                {
                    uVar22 = 1;
                }
            }
            if ((uVar22 == 0) && (iVar21 = FUN_0047c7d0(pfVar23), iVar21 != 0))
            {
                fVar10 = pfVar23[6] * 0.5;
                fVar2 = *pfVar23;
                fVar3 = pfVar23[1];
                fVar6 = *(float *)(param_1 + 0x50);
                fVar7 = *(float *)(param_1 + 0x54);
                fVar20 = pfVar23[7] * 0.5;
                fVar8 = *(float *)(param_1 + 0x58);
                fVar9 = pfVar23[2];
                fVar18 = fVar2 - fVar10 * pfVar23[4];
                fVar17 = fVar2 + fVar10 * pfVar23[4];
                fVar11 = fVar3 + fVar10 * pfVar23[3];
                fVar19 = fVar3 - fVar10 * pfVar23[3];
                fVar14 = fVar18 - fVar17;
                fVar12 = fVar11 - fVar19;
                fVar13 = fVar12 * fVar12 + fVar14 * fVar14 + 0.0;
                fVar15 = fVar17;
                fVar16 = fVar19;
                if (0.001 < fVar13)
                {
                    param_2 = (float *)(((fVar12 * fVar7 + fVar14 * fVar6 + fVar8 * 0.0)
                                         - (fVar12 * fVar19 + fVar14 * fVar17 + fVar8 * 0.0))
                                        / fVar13);
                    if ((0.0 < (float)param_2) && (fVar15 = fVar18, fVar16 = fVar11, (float)param_2 < 1.0))
                    {
                        fVar15 = fVar14 * (float)param_2 + fVar17;
                        fVar16 = fVar12 * (float)param_2 + fVar19;
                    }
                }
                else
                {
                    param_2 = NULL;
                }
                if ((*(short *)(pfVar23 + 9) == 0x66) || (*(short *)(pfVar23 + 9) == 0x68))
                {
                    if (((0.0 < (float)param_2)
                         && ((((float)param_2 < 1.0 && (fVar8 < fVar20 + fVar9)) && (fVar9 - fVar20 < fVar8))))
                        && (fVar2 = fVar2 * pfVar23[3] + fVar3 * pfVar23[4] + fVar9 * pfVar23[5],
                            fVar2 < *(float *)(param_1 + 0x16c) * pfVar23[3] + *(float *)(param_1 + 0x170) * pfVar23[4]
                                        + *(float *)(param_1 + 0x174) * pfVar23[5]
                                == fVar7 * pfVar23[4] + fVar6 * pfVar23[3] + fVar8 * pfVar23[5] < fVar2))
                        goto LAB_00476e7c;
                }
                else if ((((fVar16 - fVar7) * (fVar16 - fVar7) + (fVar15 - fVar6) * (fVar15 - fVar6) < fVar10 * fVar10)
                          && (fVar8 < fVar20 + fVar9))
                         && (fVar9 - fVar20 < fVar8))
                {
                LAB_00476e7c:
                    FUN_0047ce60(iVar21, param_1, 0);
                }
            }
            ppfVar1 = (float **)(pfVar23 + 10);
            pfVar23 = *ppfVar1;
        } while (*ppfVar1 != NULL);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 00476ea0
// SurfaceTagFunction
// player struct
void FUN_00476ea0(int param_1)

{
    float fVar1;
    byte *pbVar2;
    uint uVar3;
    float local_c;
    float local_8;
    float local_4;

    local_4 = 1.0;
    local_8 = 1.0;
    local_c = 0.0;
    if (((*(uint *)(param_1 + 0x60) & 0x2000000) != 0) && (*(float *)(param_1 + 0x1a0) < 75.0))
    {
        local_c = 75.0 - *(float *)(param_1 + 0x1a0);
    }
    *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xff63fb1e; // some mask
    if ((*(int *)(param_1 + 0x140) != 0) && (pbVar2 = (byte *)FUN_004318b0(*(int *)(param_1 + 0x140)), pbVar2 != NULL))
    {
        uVar3 = *(uint *)(param_1 + 0x26c) & ~*(uint *)(pbVar2 + 0x34);
        *(uint *)(param_1 + 0x26c) = uVar3;
        *(uint *)(param_1 + 0x26c) =
            (uint)(uint3)((uint3)((uint) * (undefined_32 *)(pbVar2 + 0x38) >> 8) | (uint3)(uVar3 >> 8)) << 8;
        if ((*pbVar2 & 0x10) != 0)
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x80;
        }
        if ((*pbVar2 & 0x20) != 0)
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x400;
        }
        if ((*(uint *)(pbVar2 + 0x2c) & 0x2000) != 0) // lava
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x40000;
        }
        if ((*(uint *)(pbVar2 + 0x2c) & 0x4000) != 0) // fall
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x80000;
        }
        if ((((*(uint *)(pbVar2 + 0x2c) & 0x20000) != 0) /* flat */ && ((*(byte *)(param_1 + 0x60) & 0x80) != 0))
            && ((*(uint *)(param_1 + 100) & 0x4000000) == 0)) // player grounded
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x800000;
        }
        if ((*(uint *)(pbVar2 + 0x2c) & 0x8000) != 0) // soft
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x100000;
        }
        if ((((DAT_0050c048 & 0x2000) != 0) && ((DAT_00e98eb0 & 0x100) != 0)) && (((byte)DAT_00e98e90 & 0x80) != 0))
        {
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) ^ 0x2000000;
        }
        // ZModeOn
        if ((pbVar2[0x2c] & 1) != 0)
        {
            // Enable ZMode
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x2000000;
        }
        // ZModeOff
        if (((pbVar2[0x2c] & 2) != 0) && ((*(uint *)(param_1 + 0x60) & 0x2000000) != 0))
        {
            // When exiting anti-grav tunnels
            *(float *)(param_1 + 0x1b8) = *(float *)(param_1 + 0x50) - *(float *)(param_1 + 0x16c);
            *(float *)(param_1 + 0x1bc) = *(float *)(param_1 + 0x54) - *(float *)(param_1 + 0x170);
            *(float *)(param_1 + 0x1c0) = *(float *)(param_1 + 0x58) - *(float *)(param_1 + 0x174);
            *(undefined_32 *)(param_1 + 0x228) = 3.0f;
            *(undefined_32 *)(param_1 + 0x1c4) = 0;
            *(undefined_32 *)(param_1 + 0x1c8) = 0;
            *(undefined_32 *)(param_1 + 0x1cc) = 0;
            // turn off ZMode
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xfdffffff | 0x4000000;
        }
        if ((*(uint *)(pbVar2 + 0x2c) & 4) != 0) // fast terrain
        {
            local_c = 200.0;
        }
        if ((*(uint *)(pbVar2 + 0x2c) & 8) != 0) // slow terrain
        {
            local_8 = 0.75;
            if ((*(uint *)(param_1 + 0x60) & 0x2000000) != 0) // if ZMode
            {
                // kill boost
                *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xff7fffff;
            }
        }
        if ((pbVar2[0x2c] & 0x10) != 0) // slowest
        {
            local_8 = 0.1;
            // kill boost
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xff7fffff;
        }
        if ((*(uint *)(pbVar2 + 0x2c) & 0x20) != 0) // slippery
        {
            local_4 = 0.2;
        }
        if ((*(uint *)(param_1 + 100) & 0x2000000) != 0)
        {
            local_4 = 1.0;
        }
        if ((*(uint *)(pbVar2 + 0x2c) & 0x400) != 0)
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 1;
        }
        if (*(int *)(pbVar2 + 0x3c) != 0)
        {
            FUN_00476ac0(param_1, *(int *)(pbVar2 + 0x3c));
        }
        // Mirr && reflectionsEnabled
        if (((*(uint *)(pbVar2 + 0x2c) & 0x1000) != 0) && (DAT_00ec86a0 == 1))
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x40;
        }
        // Side
        if ((*(uint *)(pbVar2 + 0x2c) & 0x20000000) != 0)
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x20;
        }
    }
    if (DAT_0050cb48 != 0)
    {
        FUN_00476ac0(param_1, DAT_0050cb48);
    }
    if (local_c <= *(float *)(param_1 + 0x240))
    {
        if ((local_c < *(float *)(param_1 + 0x240))
            && (fVar1 = *(float *)(param_1 + 0x240) - (float)_DAT_00e22a40 * 25.0, *(float *)(param_1 + 0x240) = fVar1,
                fVar1 < local_c))
        {
            *(float *)(param_1 + 0x240) = local_c;
        }
    }
    else
    {
        fVar1 = (float)_DAT_00e22a40 * 25.0 + *(float *)(param_1 + 0x240);
        *(float *)(param_1 + 0x240) = fVar1;
        if (local_c < fVar1)
        {
            *(float *)(param_1 + 0x240) = local_c;
        }
    }
    if (local_8 <= *(float *)(param_1 + 0x244))
    {
        if ((local_8 < *(float *)(param_1 + 0x244))
            && (fVar1 = *(float *)(param_1 + 0x244) - (float)_DAT_00e22a40 * 0.5, *(float *)(param_1 + 0x244) = fVar1,
                fVar1 < local_8))
        {
            *(float *)(param_1 + 0x244) = local_8;
        }
    }
    else
    {
        fVar1 = (float)_DAT_00e22a40 * 0.5 + *(float *)(param_1 + 0x244);
        *(float *)(param_1 + 0x244) = fVar1;
        if (local_8 < fVar1)
        {
            *(float *)(param_1 + 0x244) = local_8;
        }
    }
    if (local_4 <= *(float *)(param_1 + 0x248))
    {
        if ((local_4 < *(float *)(param_1 + 0x248))
            && (fVar1 = *(float *)(param_1 + 0x248) - (float)_DAT_00e22a40 * 0.5, *(float *)(param_1 + 0x248) = fVar1,
                fVar1 < local_4))
        {
            *(float *)(param_1 + 0x248) = local_4;
        }
    }
    else
    {
        fVar1 = (float)_DAT_00e22a40 * 0.5 + *(float *)(param_1 + 0x248);
        *(float *)(param_1 + 0x248) = fVar1;
        if (local_4 < fVar1)
        {
            *(float *)(param_1 + 0x248) = local_4;
        }
    }
    *(undefined_32 *)(param_1 + 0x250) = 0;
    if ((((((float)*(int *)(param_1 + 0x1998) - 400.0) * 0.001666667 < 1.0)
          || ((*(byte *)(param_1 + 0x60) & 0x20) != 0))
         || ((*(uint *)(param_1 + 100) & 0x4000000) != 0))
        && (((*(uint *)(param_1 + 100) & 0x80000) != 0 && ((*(uint *)(param_1 + 100) & 0x200) == 0))))
    {
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x1000;
    }
    return;
}

float10 FUN_004772f0(float param_1, undefined_32 param_2, undefined_32 *param_3)

{
    int iVar1;
    undefined_32 uVar2;
    float10 fVar3;
    float local_4c;
    float local_48;
    float local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_8 local_28[8];
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    float local_10;
    float local_c;
    float local_8;
    undefined_32 local_4;

    iVar1 = (int)param_1;
    if ((*(uint *)((int)param_1 + 100) & 0x400) == 0)
    {
        local_4c = *(float *)((int)param_1 + 0x194);
        local_48 = *(float *)((int)param_1 + 0x198);
        local_44 = *(float *)((int)param_1 + 0x19c);
    }
    else
    {
        local_4c = -*(float *)((int)param_1 + 0x160);
        local_48 = -*(float *)((int)param_1 + 0x164);
        local_44 = -*(float *)((int)param_1 + 0x168);
    }
    vec3f_multiply_add(&local_34, param_2, 0xc0000000, &local_4c);
    local_10 = local_4c;
    local_c = local_48;
    local_8 = local_44;
    local_4 = 0x461c4000;
    local_1c = local_34;
    local_18 = local_30;
    local_14 = local_2c;
    FUN_00441020();
    if ((*(byte *)((int)param_1 + 100) & 0x80) == 0)
    {
        fVar3 = (float10)FUN_00444f10(*(undefined_32 *)((int)param_1 + 0xec), &local_1c, local_28, &local_40);
        param_1 = (float)fVar3;
    }
    else
    {
        param_1 = -1.0;
    }
    if (param_1 < 0.0)
    {
        fVar3 = (float10)FUN_00444d10(*(undefined_32 *)(iVar1 + 0x13c), &local_1c, local_28, &local_40);
        param_1 = (float)fVar3;
    }
    if (((*(uint *)(iVar1 + 100) & 0x400) != 0) && (param_1 < 0.0))
    {
        local_48 = *(float *)(iVar1 + 0x198);
        local_44 = *(float *)(iVar1 + 0x19c);
        local_4c = *(float *)(iVar1 + 0x194);
        local_10 = local_4c;
        local_c = local_48;
        local_8 = local_44;
        fVar3 = (float10)FUN_00444d10(*(undefined_32 *)(iVar1 + 0x13c), &local_1c, local_28, &local_40);
        param_1 = (float)fVar3;
    }
    uVar2 = FUN_00441030();
    *(undefined_32 *)(iVar1 + 0x140) = uVar2;
    if (param_1 < 0.0)
    {
        *param_3 = 0;
        param_3[1] = 0;
        param_3[2] = 1.0f;
        *(undefined_32 *)(iVar1 + 0x188) = 0xc61c4000;
        return (float10)100000.0;
    }
    *param_3 = local_40;
    param_3[1] = local_3c;
    param_3[2] = local_38;
    *(undefined_32 *)(iVar1 + 0x188) = local_20;
    return (float10)param_1 - (float10)2.0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 004774f0
void gravityFunction(float param_1, float *param_2, float param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    int iVar4;
    uint uVar5;
    float10 fVar6;
    float local_2c;
    float local_28;
    float local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    float local_18;

    iVar4 = (int)param_1;
    uVar5 = *(uint *)((int)param_1 + 100);
    if ((uVar5 & 0x400) == 0) // ZModeExit
    {
        local_2c = *(float *)((int)param_1 + 0x194);
        local_28 = *(float *)((int)param_1 + 0x198);
        local_24 = *(float *)((int)param_1 + 0x19c);
    }
    else
    {
        local_2c = -*(float *)((int)param_1 + 0x160);
        local_28 = -*(float *)((int)param_1 + 0x164);
        local_24 = -*(float *)((int)param_1 + 0x168);
    }
    fVar2 = param_3 - *(float *)((int)param_1 + 0xa4);
    fVar3 = *(float *)((int)param_1 + 0x94) - *(float *)((int)param_1 + 0xa4);
    fVar1 = *(float *)((int)param_1 + 0x28);
    if (*(float *)((int)param_1 + 0x28) < 0.0)
    {
        fVar1 = -fVar1;
    }
    fVar1 = *(float *)((int)param_1 + 0xa8) * fVar1;
    param_1 = fVar2;
    if (3.0 < fVar1)
    {
        param_1 = fVar2 - (fVar1 - 3.0);
    }
    if (param_3 <= 99999.0)
    {
        *(undefined_32 *)(iVar4 + 0x2c8) = 0;
    }
    else
    {
        fVar1 = (float)_DAT_00e22a40 + *(float *)(iVar4 + 0x2c8);
        *(float *)(iVar4 + 0x2c8) = fVar1;
        if (3.0 < fVar1)
        {
            *(uint *)(iVar4 + 0x60) = *(uint *)(iVar4 + 0x60) | 0x1000;
        }
    }
    if (param_3 <= 30.0)
    {
        uVar5 = uVar5 & 0xfffffdff;
    }
    else
    {
        uVar5 = uVar5 | 0x200;
    }
    *(uint *)(iVar4 + 100) = uVar5;
    if (param_1 <= 12.0)
    {
        fVar1 = (1.0 - (12.0 - param_1) / (12.0 - fVar3)) * (float)_DAT_00e22a40 + *(float *)(iVar4 + 0x1b4);
        *(float *)(iVar4 + 0x1b4) = fVar1;
        if ((fVar3 < param_1) && (fVar1 < 0.0))
        {
            fVar6 = (float10)decelerator(4.0f, (float)_DAT_00e22a40);
            *(float *)(iVar4 + 0x1b4) = (float)(fVar6 * (float10) * (float *)(iVar4 + 0x1b4));
        }
    }
    else if (*(float *)(iVar4 + 0x1a0) < 0.0)
    {
        *(float *)(iVar4 + 0x1b4) = *(float *)(iVar4 + 0x1b4) - (float)_DAT_00e22a40 * -2.0;
    }
    else
    {
        *(float *)(iVar4 + 0x1b4) = *(float *)(iVar4 + 0x1b4) + (float)_DAT_00e22a40;
    }
    fVar1 = (float)_DAT_00e22a40 * *(float *)(iVar4 + 400) * *(float *)(iVar4 + 0x1b4) * 30.0;
    *(float *)(iVar4 + 0x1b0) = fVar1;
    if (((*(float *)(iVar4 + 0x2fc) < 0.0) && (0.0 <= *(float *)(iVar4 + 0x1a0))) && (0.0 < fVar1))
    {
        *(float *)(iVar4 + 0x1b0) = (*(float *)(iVar4 + 0x2fc) * 0.9 - -1.0) * fVar1;
    }
    if (*(float *)(iVar4 + 0x1b0) <= param_1)
    {
        uVar5 = *(uint *)(iVar4 + 0x60) & 0xfeffffff;
    }
    else
    {
        fVar1 = *(float *)(iVar4 + 0x1b0);
        fVar3 = (float)_DAT_00e22a40;
        fVar2 = *(float *)(iVar4 + 0x1b4);
        *(float *)(iVar4 + 0x1b0) = param_1;
        if (0.0 < *(float *)(iVar4 + 0x1b4))
        {
            *(float *)(iVar4 + 0x1b4) = -(*(float *)(iVar4 + 0x1b4) * 0.2);
        }
        if ((4.0 < fVar2 * 8.0) && ((*(uint *)(iVar4 + 0x60) & 0x1000000) == 0))
        {
            local_18 = (fVar1 / fVar3) * 0.5;
            local_20 = MAGIC('H', 'i', 't', 't');
            local_1c = MAGIC('B', 'o', 't', 'm');
            FUN_00450c00(iVar4, &local_20);
        }
        uVar5 = *(uint *)(iVar4 + 0x60) | 0x1000000;
    }
    *(uint *)(iVar4 + 0x60) = uVar5;
    *param_2 = *(float *)(iVar4 + 0x1b0) * local_2c + *param_2;
    param_2[1] = *(float *)(iVar4 + 0x1b0) * local_28 + param_2[1];
    param_2[2] = *(float *)(iVar4 + 0x1b0) * local_24 + param_2[2];
    return;
}

void FUN_00477850(int param_1, float param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                  float param_6)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    float local_8;

    if (param_6 == 1.401298e-45)
    {
        iVar3 = 0x41;
        uVar2 = 0x10000000;
    }
    else
    {
        iVar3 = 0x42;
        uVar2 = 0x20000000;
    }
    local_8 = param_2;
    param_6 = param_2;
    if (0.2 < param_2)
    {
        param_6 = 0.2;
    }
    iVar1 = rand();
    if ((float)iVar1 * 4.656613e-10 < 0.5)
    {
        iVar1 = rand();
        local_8 = (float)iVar1 * 4.656613e-10 * 0.5 - -0.25;
        param_6 = local_8 * param_6;
        local_8 = local_8 * param_2;
    }
    iVar3 = iVar3 * 0x40 + 0x350 + param_1;
    FUN_00481100(iVar3, param_4, param_5, param_1 + 0x30, param_3);
    mat_multiply_rows(iVar3, local_8, param_6, param_6, iVar3);
    *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | uVar2;
    return;
}

void FUN_00477940(float param_1, undefined_32 param_2, undefined_32 param_3)

{
    float *pfVar1;
    float fVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    float local_48;
    float local_44;
    float local_40;
    undefined_8 local_3c[12];
    undefined_8 local_30[12];
    undefined_8 local_24[12];
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    iVar3 = (int)param_1;
    fVar2 = *(float *)((int)param_1 + 0x208);
    if (*(float *)((int)param_1 + 0x208) < 0.0)
    {
        fVar2 = -fVar2;
    }
    param_1 = *(float *)((int)param_1 + 0xa8) - *(float *)((int)param_1 + 0xa8) * 0.75 * fVar2;
    if (param_1 < 1.5)
    {
        param_1 = 1.5;
    }
    pfVar1 = (float *)(iVar3 + 0x40);
    iVar5 = 0;
    iVar4 = FUN_00444740(*(undefined_32 *)(iVar3 + 0x13c), param_2, param_1, pfVar1, 1.0f, -1.0f, &local_48, local_3c,
                         local_30);
    if (iVar4 != 0)
    {
        iVar5 = 1;
        FUN_00441030();
        iVar4 = FUN_00444740(*(undefined_32 *)(iVar3 + 0x13c), param_2, param_1, pfVar1, 1.0f, -1.0f, local_18,
                             local_3c, local_24);
        if (iVar4 != 0)
        {
            iVar5 = 2;
            FUN_00441030();
        }
    }
    if ((((iVar5 != 0) && (50.0 < *(float *)(iVar3 + 0x1a0)))
         && (fVar2 = *(float *)(iVar3 + 0x48) * local_40 + *(float *)(iVar3 + 0x44) * local_44 + local_48 * *pfVar1,
             fVar2 < 0.5))
        && (-fVar2 < 0.5))
    {
        FUN_00477850(iVar3, *(float *)(iVar3 + 0x1a0) * 0.002, 0.3f, local_30, &local_48, 1);
    }
    FUN_0044abc0(param_2, param_3, *(undefined_32 *)(iVar3 + 0x13c), local_c);
    return;
}

// 00477ad0
// TurnFunction2
void FUN_00477ad0(int param_1, undefined_32 param_2, undefined_32 param_3, int param_4)

{
    byte *pbVar1;
    float *pfVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    int iVar6;

    iVar6 = param_1;
    fVar3 = *(float *)(param_1 + 0xa4); // IsectRadius
    fVar4 = *(float *)(param_1 + 0x94); // HoverHeight
    fVar5 = *(float *)(param_1 + 0x94);
    if ((*(uint *)(param_1 + 100) & 0x400) == 0)
    {
        *(float *)(param_4 + 8) = *(float *)(param_4 + 8) - *(float *)(param_1 + 0x200);
    }
    FUN_004764e0(param_1, param_2, param_1 + 0x30, param_1 + 0x20, param_1 + 0x194, param_3, fVar4 * 1.5,
                 (fVar3 + fVar3 + fVar5) * 0.3333333, param_4);
    if (((*(uint *)(param_1 + 100) & 0x400) == 0)
        && (*(float *)(param_4 + 8) = *(float *)(param_1 + 0x200) + *(float *)(param_4 + 8),
            (*(uint *)(param_1 + 100) & 0x400) == 0))
    {
        pbVar1 = (byte *)(param_1 + 0x60);
        fVar3 = *(float *)(param_1 + 0x200);
        pfVar2 = (float *)(param_1 + 0x200);
        param_1 = 300.0f;
        if ((*pbVar1 & 0x80) == 0)
        {
            param_1 = 0x428c0000;
        }
        FUN_0044af50(pfVar2, *(undefined_32 *)(iVar6 + 0x1ec), *(undefined_32 *)(iVar6 + 0x1f0),
                     *(undefined_32 *)(iVar6 + 0x74), param_1);
        *(float *)(param_4 + 8) = *(float *)(param_4 + 8) - (*pfVar2 - fVar3) * 0.2;
        if (((*(uint *)(iVar6 + 100) & 0x400) == 0) && (*(float *)(iVar6 + 0x208) != 0.0))
        {
            fVar3 = *(float *)(iVar6 + 0x208); // tilt
            if (*(float *)(iVar6 + 0x208) < 0.0)
            {
                fVar3 = -fVar3;
            }
            *(float *)(param_4 + 8) =
                (*(float *)(iVar6 + 0x208) * 80.0 - *(float *)(param_4 + 8)) * fVar3 + *(float *)(param_4 + 8);
        }
    }
    *(undefined_32 *)(iVar6 + 0x204) = *(undefined_32 *)(param_4 + 8);
    return;
}

void FUN_00477c30(int param_1, undefined_32 *param_2, undefined_32 *param_3)

{
    float *pfVar1;
    float *pfVar2;
    float fVar3;
    int iVar4;
    float10 fVar5;
    float local_11c;
    float local_118;
    float local_114;
    float local_110;
    float local_10c;
    float local_108;
    float local_104;
    float local_100;
    float local_f8;
    float local_f4;
    float local_f0;
    float local_e8;
    float local_e4;
    float local_e0;
    float local_c8;
    float local_c4;
    float local_c0;
    float local_b8;
    float local_b4;
    float local_b0;
    float local_a8;
    float local_a4;
    float local_88;
    float local_84;
    float local_80;
    float local_7c;
    float local_78;
    float local_70;
    float local_6c;
    float local_68;
    float local_60;
    float local_5c;
    float local_58;
    float local_40;
    float local_3c;
    float local_38;
    float local_30;
    float local_2c;
    float local_28;
    float local_20;
    float local_1c;
    float local_18;

    local_108 = *(float *)(param_1 + 0x20);
    pfVar1 = (float *)(param_1 + 0x20);
    pfVar2 = (float *)(param_1 + 0x30);
    local_104 = *(float *)(param_1 + 0x24);
    local_100 = *(float *)(param_1 + 0x28);
    local_f8 = *pfVar2;
    local_f4 = *(float *)(param_1 + 0x34);
    local_f0 = *(float *)(param_1 + 0x38);
    local_e8 = *(float *)(param_1 + 0x40);
    local_e4 = *(float *)(param_1 + 0x44);
    local_e0 = *(float *)(param_1 + 0x48);
    if (((((float)*(int *)(param_1 + 0x1998) - 400.0) * 0.001666667 < 1.0) || ((*(byte *)(param_1 + 0x60) & 0x20) != 0))
        || ((*(uint *)(param_1 + 100) & 0x4000000) != 0))
    {
        local_114 = -local_f8;
        local_110 = local_f4;
        fVar5 = (float10)SQRT3(local_114 * local_114 + local_f4 * local_f4);
        if (fVar5 < (float10)0.1)
        {
            local_114 = -local_e8;
            local_110 = local_e4;
            fVar5 = (float10)SQRT3(local_114 * local_114 + local_e4 * local_e4);
        }
        local_110 = (float)((float10)local_110 / fVar5);
        local_114 = (float)((float10)local_114 / fVar5);
        FUN_00431150(&local_40, param_3[2], local_f8, local_f4, local_f0);
        sin_cos(param_3[1], &local_84, &local_10c);
        local_88 = local_114 * local_114;
        fVar3 = local_10c * local_88 + local_110 * local_110;
        local_b4 = local_10c * local_110 * local_110 + local_88;
        local_c4 = (1.0 - local_10c) * local_114 * local_110;
        local_b0 = local_110 * local_84;
        local_c0 = -(local_114 * local_84);
        local_a8 = -local_c0;
        local_a4 = -local_b0;
        local_80 = local_38 * local_a8 + local_3c * local_c4 + local_40 * fVar3;
        local_7c = local_38 * local_a4 + local_3c * local_b4 + local_40 * local_c4;
        local_78 = local_10c * local_38 + local_3c * local_b0 + local_40 * local_c0;
        local_70 = local_28 * local_a8 + local_2c * local_c4 + local_30 * fVar3;
        local_6c = local_28 * local_a4 + local_2c * local_b4 + local_30 * local_c4;
        local_68 = local_10c * local_28 + local_2c * local_b0 + local_30 * local_c0;
        local_60 = local_18 * local_a8 + local_1c * local_c4 + local_20 * fVar3;
        local_5c = local_18 * local_a4 + local_1c * local_b4 + local_20 * local_c4;
        local_58 = local_10c * local_18 + local_1c * local_b0 + local_20 * local_c0;
        sin_cos(*param_3, &local_11c, &local_118);
        local_c8 = local_118 * local_80 - local_11c * local_7c;
        local_c4 = local_11c * local_80 + local_118 * local_7c;
        local_b8 = local_118 * local_70 - local_11c * local_6c;
        local_b4 = local_11c * local_70 + local_118 * local_6c;
        local_a8 = local_118 * local_60 - local_11c * local_5c;
        fVar3 = local_11c * local_60 + local_118 * local_5c;
        *pfVar1 = local_100 * local_a8 + local_104 * local_b8 + local_108 * local_c8;
        *(float *)(param_1 + 0x24) = local_100 * fVar3 + local_104 * local_b4 + local_108 * local_c4;
        *(float *)(param_1 + 0x28) = local_100 * local_58 + local_104 * local_68 + local_108 * local_78;
        *pfVar2 = local_f0 * local_a8 + local_f4 * local_b8 + local_f8 * local_c8;
        *(float *)(param_1 + 0x34) = local_f0 * fVar3 + local_f4 * local_b4 + local_f8 * local_c4;
        *(float *)(param_1 + 0x38) = local_f0 * local_58 + local_f4 * local_68 + local_f8 * local_78;
        *(float *)(param_1 + 0x40) = local_e0 * local_a8 + local_e4 * local_b8 + local_e8 * local_c8;
        *(float *)(param_1 + 0x44) = local_e0 * fVar3 + local_e4 * local_b4 + local_e8 * local_c4;
        *(float *)(param_1 + 0x48) = local_e0 * local_58 + local_e4 * local_68 + local_e8 * local_78;
    }
    else
    {
        sin_cos(*param_3, &local_11c, &local_118);
        *pfVar1 = local_118 * local_108 - local_11c * local_104;
        *(float *)(param_1 + 0x24) = local_118 * local_104 + local_11c * local_108;
        *pfVar2 = local_118 * local_f8 - local_11c * local_f4;
        *(float *)(param_1 + 0x34) = local_118 * local_f4 + local_11c * local_f8;
        *(float *)(param_1 + 0x28) = local_100;
        *(float *)(param_1 + 0x40) = local_118 * local_e8 - local_11c * local_e4;
        *(float *)(param_1 + 0x38) = local_f0;
        *(float *)(param_1 + 0x48) = local_e0;
        *(float *)(param_1 + 0x44) = local_118 * local_e4 + local_11c * local_e8;
    }
    iVar4 = *(int *)(param_1 + 0x1e6c) + -1;
    *(int *)(param_1 + 0x1e6c) = iVar4;
    if (iVar4 < 0)
    {
        rdVector_Normalize3(pfVar1);
        rdVector_Normalize3(pfVar2);
        rdVector_Normalize3(param_1 + 0x40);
        *(undefined_32 *)(param_1 + 0x1e6c) = 8;
    }
    *(undefined_32 *)(param_1 + 0x50) = *param_2;
    *(undefined_32 *)(param_1 + 0x54) = param_2[1];
    *(undefined_32 *)(param_1 + 0x58) = param_2[2];
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address
// 004783e0
float10 speedFunction(float param_1)

{
    uint *puVar1;
    uint uVar2;
    float fVar3;
    float fVar4;
    int iVar5;
    float10 fVar6;

    iVar5 = (int)param_1;
    if (((*(uint *)((int)param_1 + 0x60) & 0x800000) != 0)
        || (puVar1 = (uint *)((int)param_1 + 100), param_1 = 1.5, (*puVar1 & 0x2000) != 0))
    {
        param_1 = 4.0;
    }
    if ((*(byte *)(*(int *)(iVar5 + 0x1e70) + 8) & 8) == 0)
    {
        if (*(float *)(iVar5 + 0x18c) <= 0.1)
        {
            if (-0.1 <= *(float *)(iVar5 + 0x18c))
            {
                if (0.2 <= *(float *)(iVar5 + 0x1a4))
                {
                    fVar6 = (float10)decelerator(*(undefined_32 *)(iVar5 + 0x84), (float)_DAT_00e22a40);
                    *(float *)(iVar5 + 0x1a4) = (float)(fVar6 * (float10) * (float *)(iVar5 + 0x1a4));
                }
                else
                {
                    fVar6 = (float10)decelerator(10.0f, (float)_DAT_00e22a40);
                    *(float *)(iVar5 + 0x1a4) = (float)(fVar6 * (float10) * (float *)(iVar5 + 0x1a4));
                }
            }
            else
            {
                fVar3 = (float)_DAT_00e22a40 * param_1 * *(float *)(iVar5 + 0x18c) + *(float *)(iVar5 + 0x1a4);
                *(float *)(iVar5 + 0x1a4) = fVar3;
                if ((-0.6 < *(float *)(iVar5 + 0x18c)) && (fVar3 < *(float *)(iVar5 + 0x18c) * 0.5))
                {
                    fVar6 = (float10)decelerator(20.0f, (float)_DAT_00e22a40);
                    *(float *)(iVar5 + 0x1a4) = (float)(fVar6 * (float10) * (float *)(iVar5 + 0x1a4));
                }
            }
        }
        else
        {
            fVar3 = (float)_DAT_00e22a40 * param_1 * *(float *)(iVar5 + 0x18c) + *(float *)(iVar5 + 0x1a4);
            *(float *)(iVar5 + 0x1a4) = fVar3;
            if (*(float *)(iVar5 + 0x18c) < 0.99)
            {
                fVar4 = *(float *)(iVar5 + 0x18c) / (1.0 - *(float *)(iVar5 + 0x18c));
            }
            else
            {
                fVar4 = 10000.0;
            }
            if (fVar4 < fVar3)
            {
                fVar6 = (float10)decelerator(*(undefined_32 *)(iVar5 + 0x84), (float)_DAT_00e22a40);
                *(float *)(iVar5 + 0x1a4) = (float)(fVar6 * (float10) * (float *)(iVar5 + 0x1a4));
            }
        }
        uVar2 = *(uint *)(iVar5 + 0x60);
    }
    else
    {
        if (*(float *)(iVar5 + 0x18c) <= 0.1)
        {
            if (-0.1 <= *(float *)(iVar5 + 0x18c))
            {
                fVar6 = (float10)decelerator(*(undefined_32 *)(iVar5 + 0x84), (float)_DAT_00e22a40);
                *(float *)(iVar5 + 0x1a4) = (float)(fVar6 * (float10) * (float *)(iVar5 + 0x1a4));
            }
            else
            {
                fVar3 = (float)_DAT_00e22a40 * param_1 * *(float *)(iVar5 + 0x18c) + *(float *)(iVar5 + 0x1a4);
                *(float *)(iVar5 + 0x1a4) = fVar3;
                if ((-0.6 < *(float *)(iVar5 + 0x18c)) && (fVar3 < *(float *)(iVar5 + 0x18c) * 0.5))
                {
                    fVar6 = (float10)decelerator(20.0f, (float)_DAT_00e22a40);
                    *(float *)(iVar5 + 0x1a4) = (float)(fVar6 * (float10) * (float *)(iVar5 + 0x1a4));
                }
            }
        }
        else
        {
            fVar3 = (float)_DAT_00e22a40 * param_1 * *(float *)(iVar5 + 0x18c) + *(float *)(iVar5 + 0x1a4);
            *(float *)(iVar5 + 0x1a4) = fVar3;
            if (*(float *)(iVar5 + 0x18c) < 0.99)
            {
                fVar4 = *(float *)(iVar5 + 0x18c) / (1.0 - *(float *)(iVar5 + 0x18c));
            }
            else
            {
                fVar4 = 10000.0;
            }
            if (fVar4 < fVar3)
            {
                fVar6 = (float10)decelerator(*(undefined_32 *)(iVar5 + 0x84), (float)_DAT_00e22a40);
                *(float *)(iVar5 + 0x1a4) = (float)(fVar6 * (float10) * (float *)(iVar5 + 0x1a4));
            }
        }
        uVar2 = *(uint *)(iVar5 + 0x60);
    }
    if ((uVar2 & 0x200) != 0)
    {
        fVar6 = (float10)decelerator(*(undefined_32 *)(iVar5 + 0x80), (float)_DAT_00e22a40);
        *(float *)(iVar5 + 0x1a4) = (float)(fVar6 * (float10) * (float *)(iVar5 + 0x1a4));
    }
    if (*(float *)(iVar5 + 0x1a4) <= 0.0)
    {
        fVar6 = -((-(float10) * (float *)(iVar5 + 0x1a4) * (float10) * (float *)(iVar5 + 0x7c))
                  / ((float10) * (float *)(iVar5 + 0x78) - (float10) * (float *)(iVar5 + 0x1a4)));
    }
    else
    {
        fVar6 = ((float10) * (float *)(iVar5 + 0x1a4) * (float10) * (float *)(iVar5 + 0x7c))
            / ((float10) * (float *)(iVar5 + 0x78) + (float10) * (float *)(iVar5 + 0x1a4));
    }
    fVar6 = fVar6 * (float10) * (float *)(iVar5 + 0x1ac);
    if (15.0 <= *(float *)(iVar5 + 0x184))
    {
        *(uint *)(iVar5 + 100) = *(uint *)(iVar5 + 100) & 0xf7ffffff;
    }
    else
    {
        uVar2 = *(uint *)(iVar5 + 100);
        if (((uVar2 & 0x8000000) == 0) && (*(uint *)(iVar5 + 100) = uVar2 | 0x8000000, *(float *)(iVar5 + 0x244) < 1.0))
        {
            *(uint *)(iVar5 + 100) = uVar2 | 0x18000000;
        }
        fVar6 = fVar6 * (float10) * (float *)(iVar5 + 0x244);
    }
    fVar6 = fVar6 + (float10) * (float *)(iVar5 + 0x240);
    if (((*(uint *)(iVar5 + 0x60) & 0x4000000) != 0) && (fVar6 < (float10)75.0))
    {
        fVar6 = (float10)75.0;
    }
    if (((*(uint *)(iVar5 + 0x60) & 0x80) != 0) && (*(float *)(iVar5 + 0x2fc) < -0.5))
    {
        if ((*(uint *)(iVar5 + 100) & 0x2000000) != 0)
        {
            return fVar6 * (float10)1.9;
        }
        fVar6 = fVar6 * (float10)1.3;
    }
    return fVar6;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 004787f0
float10 boostSpeedFunction(int param_1)

{
    float10 fVar1;

    if ((*(uint *)(param_1 + 0x60) & 0x800000) == 0)
    {
        if (0.0 < *(float *)(param_1 + 0x1a8))
        {
            fVar1 = (float10)decelerator(5.0f, (float)_DAT_00e22a40);
            *(float *)(param_1 + 0x1a8) = (float)(fVar1 * (float10) * (float *)(param_1 + 0x1a8));
        }
        if (*(float *)(param_1 + 0x1a8) < 0.001)
        {
            *(undefined_32 *)(param_1 + 0x1a8) = 0;
        }
    }
    else
    {
        *(float *)(param_1 + 0x1a8) = (float)_DAT_00e22a40 * 1.5 + *(float *)(param_1 + 0x1a8);
    }
    if ((*(uint *)(param_1 + 0x60) & 0x200) != 0) // isAirborne
    {
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xff7fffff;
    }
    if (0.0 < *(float *)(param_1 + 0x1a8))
    {
        return ((float10) * (float *)(param_1 + 0x1a8) * (float10) * (float *)(param_1 + 0x88))
            / ((float10) * (float *)(param_1 + 0x1a8) - (float10)-0.33);
    }
    return (float10)0.0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 004788c0
void heatFunction(int param_1)

{
    float fVar1;
    int iVar2;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    iVar2 = 0;
    if ((*(uint *)(param_1 + 100) & 0x40000) == 0)
    {
        if ((*(uint *)(param_1 + 0x60) & 0x800000) == 0)
        {
            fVar1 = (float)_DAT_00e22a40 * *(float *)(param_1 + 0x90) + *(float *)(param_1 + 0x218);
        }
        else
        {
            fVar1 = *(float *)(param_1 + 0x218) - (float)_DAT_00e22a40 * *(float *)(param_1 + 0x8c);
        }
        *(float *)(param_1 + 0x218) = fVar1;
    }
    else
    {
        *(float *)(param_1 + 0x218) = *(float *)(param_1 + 0x218) - (float)_DAT_00e22a40 * 20.0;
        if (-0.5 <= *(float *)(param_1 + 0x208))
        {
            if (0.5 < *(float *)(param_1 + 0x208))
            {
                iVar2 = 1;
            }
        }
        else
        {
            iVar2 = -1;
        }
    }
    if (100.0 <= *(float *)(param_1 + 0x218))
    {
        *(undefined_32 *)(param_1 + 0x218) = 100.0f;
    }
    if (0.0 < *(float *)(param_1 + 0x218))
    {
        return;
    }
    *(undefined_32 *)(param_1 + 0x218) = 0;
    if (iVar2 < 0)
    {
        rand();
    }
    else
    {
        if (0 < iVar2)
        {
            rand();
            iVar2 = __ftol();
            iVar2 = 3 - iVar2;
            goto LAB_004789f4;
        }
        rand();
    }
    iVar2 = __ftol();
LAB_004789f4:
    if ((*(byte *)(param_1 + 0x2a0 + iVar2 * 4) & 8) == 0)
    {
        local_c = 0;
        local_8 = 0;
        local_4 = 0;
        FUN_0046e950(param_1, 2 - iVar2 / 3, &local_c, 0.1f);
    }
    *(uint *)(param_1 + 0x2a0 + iVar2 * 4) = *(uint *)(param_1 + 0x2a0 + iVar2 * 4) | 8;
    *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xff7fffff;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 00478a70
// (player struct, total speed float, vec3f, vec3f)
void tractionFunction(float param_1, float param_2, float *param_3, float *param_4)

{
    float fVar1;
    float fVar2;
    float fVar3;
    uint uVar4;
    float fVar5;
    int iVar6;

    iVar6 = (int)param_1;
    fVar1 = *param_3;
    if (param_2 <= 0.0)
    {
        fVar1 = -fVar1;
        fVar2 = -param_3[1];
        fVar3 = -param_3[2];
    }
    else
    {
        fVar2 = param_3[1];
        fVar3 = param_3[2];
    }
    fVar5 = fVar3 * *(float *)((int)param_1 + 0x1c0) + fVar2 * *(float *)((int)param_1 + 0x1bc)
        + fVar1 * *(float *)((int)param_1 + 0x1b8);
    if (fVar5 < 0.0) // speed sum
    {
        // update speed
        fVar5 = -fVar5;
        *(float *)((int)param_1 + 0x1b8) = fVar1 * fVar5 + *(float *)((int)param_1 + 0x1b8);
        *(float *)((int)param_1 + 0x1bc) = fVar2 * fVar5 + *(float *)((int)param_1 + 0x1bc);
        *(float *)((int)param_1 + 0x1c0) = fVar3 * fVar5 + *(float *)((int)param_1 + 0x1c0);
    }
    rdVector_Scale3(param_4, param_2, param_3);
    fVar1 = *(float *)((int)param_1 + 0x6c) * *(float *)((int)param_1 + 0x248) * *(float *)((int)param_1 + 0x24c);
    fVar1 = (1.0 - fVar1 * fVar1) * 0.996666; // skid
    if (1.0 < *(float *)((int)param_1 + 0x22c))
    {
        if (*(float *)((int)param_1 + 0x22c) <= 2.0)
        {
            fVar1 = (2.0 - *(float *)((int)param_1 + 0x22c)) * fVar1;
        }
        else
        {
            param_1 = 0.0;
            fVar1 = param_1;
        }
    }
    param_1 = fVar1;
    fVar5 = (float)_DAT_00e22a40;
    fVar3 = 1.0 - param_1;
    fVar1 = param_4[1];
    fVar2 = param_4[2];
    // update speed with skid and time
    *(float *)(iVar6 + 0x1b8) =
        (1.0 / fVar5) * (*param_4 * fVar5 * fVar3 + fVar5 * *(float *)(iVar6 + 0x1b8) * param_1);
    *(float *)(iVar6 + 0x1bc) =
        (1.0 / (float)_DAT_00e22a40) * (fVar5 * fVar1 * fVar3 + fVar5 * *(float *)(iVar6 + 0x1bc) * param_1);
    *(float *)(iVar6 + 0x1c0) =
        (1.0 / (float)_DAT_00e22a40) * (fVar5 * fVar2 * fVar3 + fVar5 * *(float *)(iVar6 + 0x1c0) * param_1);
    *param_4 = *(float *)(iVar6 + 0x1b8);
    param_4[1] = *(float *)(iVar6 + 0x1bc);
    param_4[2] = *(float *)(iVar6 + 0x1c0);
    rdVector_Normalize3(param_4);
    if (param_2 < 0.0)
    {
        param_2 = -param_2;
    }
    rdVector_Scale3(param_4, param_2, param_4);
    uVar4 = *(uint *)(iVar6 + 100);
    // update sliding
    if ((uVar4 & 0x10) == 0) // sliding
    {
        fVar1 = 1.0;
        if ((uVar4 & 4) != 0) // thrusting
        {
            fVar1 = 0.8;
        }
        if ((uVar4 & 8) != 0) // playerSliding
        {
            fVar1 = fVar1 * 0.45;
        }
        if (*(float *)(iVar6 + 0x24c) <= fVar1)
        {
            if ((*(float *)(iVar6 + 0x24c) < fVar1)
                && (fVar2 = *(float *)(iVar6 + 0x24c) - (float)_DAT_00e22a40 * -2.0, *(float *)(iVar6 + 0x24c) = fVar2,
                    fVar1 < fVar2))
            {
                *(float *)(iVar6 + 0x24c) = fVar1;
                return;
            }
        }
        else
        {
            fVar2 = *(float *)(iVar6 + 0x24c) - ((float)_DAT_00e22a40 + (float)_DAT_00e22a40);
            *(float *)(iVar6 + 0x24c) = fVar2;
            if (fVar2 < fVar1)
            {
                *(float *)(iVar6 + 0x24c) = fVar1;
                return;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 00478d80
void mainSpeedFunction(float param_1, undefined_32 param_2, float *param_3, undefined_32 param_4)

{
    float *pfVar1;
    float fVar2;
    float fVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    float10 fVar7;
    float10 fVar8;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    undefined_8 local_c[12];

    iVar4 = (int)param_1;
    fVar7 = (float10)speedFunction(param_1);
    fVar8 = (float10)boostSpeedFunction(param_1);
    fVar2 = (float)(fVar8 + (float10)(float)fVar7);
    tractionFunction(param_1, fVar2, param_4, &local_24);
    if (((((*(uint *)((int)param_1 + 100) & 0x400) == 0) && ((*(uint *)((int)param_1 + 0x60) & 0x2000000) == 0))
         && (0.0 < local_1c))
        && (fVar3 = local_20 * local_20 + local_24 * local_24, fVar3 * 0.1369 < local_1c * local_1c))
    {
        fVar7 = (float10)SQRT3(fVar3);
        local_1c = (float)(fVar7 * (float10)0.2);
    }
    local_24 = local_24 + *(float *)((int)param_1 + 0x1dc);
    local_20 = local_20 + *(float *)((int)param_1 + 0x1e0);
    local_1c = local_1c + *(float *)((int)param_1 + 0x1e4);
    fVar7 = (float10)decelerator(4.0f, (float)_DAT_00e22a40);
    *(float *)((int)param_1 + 0x1d0) = (float)(fVar7 * (float10) * (float *)((int)param_1 + 0x1d0));
    fVar7 = (float10)decelerator(4.0f, (float)_DAT_00e22a40);
    *(float *)((int)param_1 + 0x1d4) = (float)(fVar7 * (float10) * (float *)((int)param_1 + 0x1d4));
    fVar7 = (float10)decelerator(4.0f, (float)_DAT_00e22a40);
    *(float *)((int)param_1 + 0x1d8) = (float)(fVar7 * (float10) * (float *)((int)param_1 + 0x1d8));
    fVar7 = (float10)decelerator(4.0f, (float)_DAT_00e22a40);
    *(float *)((int)param_1 + 0x1dc) = (float)(fVar7 * (float10) * (float *)((int)param_1 + 0x1dc));
    fVar7 = (float10)decelerator(4.0f, (float)_DAT_00e22a40);
    *(float *)((int)param_1 + 0x1e0) = (float)(fVar7 * (float10) * (float *)((int)param_1 + 0x1e0));
    fVar7 = (float10)decelerator(4.0f, (float)_DAT_00e22a40);
    *(float *)((int)param_1 + 0x1e4) = (float)(fVar7 * (float10) * (float *)((int)param_1 + 0x1e4));
    if (((*(uint *)((int)param_1 + 0x60) & 0x5000) == 0)
        && (((0.1 < *(float *)((int)param_1 + 0x18c) || (0.1 < -*(float *)((int)param_1 + 0x18c)))
             || ((*(uint *)((int)param_1 + 0x60) & 0x2000) == 0))))
    {
        pfVar1 = (float *)((int)param_1 + 0x1c4);
        fVar3 = local_24 * *(float *)((int)param_1 + 0x1c4) + local_20 * *(float *)((int)param_1 + 0x1c8)
            + local_1c * *(float *)((int)param_1 + 0x1cc);
        if ((fVar3 < 0.0) || (fVar7 = (float10)rdVector_Len3(pfVar1), fVar7 <= (float10)1.0))
        {
            local_24 = local_24 + *pfVar1;
            local_20 = local_20 + *(float *)((int)param_1 + 0x1c8);
            local_1c = local_1c + *(float *)((int)param_1 + 0x1cc);
        }
        else
        {
            if ((1.0 < fVar2) && (fVar2 = fVar3 / (fVar2 * 60.0), 0.0 < fVar2))
            {
                fVar2 = (float)_DAT_00e22a40 * fVar2;
                *(float *)((int)param_1 + 0x1a4) = fVar2 + fVar2 + *(float *)((int)param_1 + 0x1a4);
            }
            fVar7 = ((float10)fVar3 / fVar7) * (float10)0.01;
            param_1 = (float)fVar7;
            if (fVar7 < (float10)1.0)
            {
                param_1 = 1.0;
            }
            vec3f_multiply_add(&local_24, &local_24, param_1, pfVar1);
        }
    }
    vec3f_multiply_add(param_3, param_2, (float)_DAT_00e22a40, &local_24);
    if (((1.0 <= ((float)*(int *)(iVar4 + 0x1998) - 400.0) * 0.001666667) && ((*(byte *)(iVar4 + 0x60) & 0x20) == 0))
        && ((*(uint *)(iVar4 + 100) & 0x4000000) == 0))
    {
        *(undefined_32 *)(iVar4 + 0x154) = 0;
        *(undefined_32 *)(iVar4 + 0x158) = 0;
        *(undefined_32 *)(iVar4 + 0x15c) = 0;
        return;
    }
    if ((*(uint *)(iVar4 + 100) & 0x800000) != 0)
    {
        *(undefined_32 *)(iVar4 + 0x154) = 0;
        *(undefined_32 *)(iVar4 + 0x158) = 0;
        *(undefined_32 *)(iVar4 + 0x15c) = 0;
        return;
    }
    local_18 = param_3[0];
    local_14 = param_3[1];
    local_10 = param_3[2];
    iVar5 = FUN_0044acb0(param_3, param_2, *(undefined_32 *)(iVar4 + 0x13c), local_c);
    for (iVar6 = 0; (iVar5 != 0 && (iVar6 < 6)); iVar6 = iVar6 + 1)
    {
        iVar5 = FUN_0044acb0(param_3, param_2, *(undefined_32 *)(iVar4 + 0x13c), local_c);
    }
    if ((0 < iVar6) && ((*(byte *)(iVar4 + 0x60) & 0x80) != 0))
    {
        fVar7 = (float10)decelerator(5.0f, (float)_DAT_00e22a40);
        *(float *)(iVar4 + 0x1a4) = (float)(fVar7 * (float10) * (float *)(iVar4 + 0x1a4));
    }
    fVar2 = param_3[2];
    fVar3 = param_3[1];
    *(float *)(iVar4 + 0x154) = param_3[0] - local_18;
    *(float *)(iVar4 + 0x158) = fVar3 - local_14;
    *(float *)(iVar4 + 0x15c) = fVar2 - local_10;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004791d0(int param_1, undefined_32 param_2, undefined_32 param_3, float param_4, float *param_5,
                  float *param_6, undefined_32 param_7)

{
    int iVar1;
    float fVar2;
    float fVar3;
    float *pfVar4;
    float10 fVar5;
    float10 fVar6;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    float local_20;
    float local_1c;
    undefined_8 local_18[12];
    undefined_8 local_c[12];

    pfVar4 = param_6;
    fVar3 = param_5[2] * *(float *)(param_1 + 0x19c) + param_5[1] * *(float *)(param_1 + 0x198)
        + *param_5 * *(float *)(param_1 + 0x194);
    if ((fVar3 < -0.995) || (0.995 < fVar3))
    {
        vec3f_set(param_6, 0, 0, 0);
        iVar1 = param_1 + 0x1c4;
        rdVector_Scale3(iVar1, 0x3f666666, iVar1);
        vec3f_copy(param_7, iVar1);
        *(undefined_32 *)(param_1 + 0x1f8) = 0;
        return;
    }
    rdVector_Cross3(local_18, param_5, (float *)(param_1 + 0x194));
    rdVector_Cross3(param_6, param_5, local_18);
    rdVector_Normalize3(param_6);
    fVar3 = param_6[2] * *(float *)(param_1 + 0x19c) + param_6[1] * *(float *)(param_1 + 0x198)
        + *param_6 * *(float *)(param_1 + 0x194);
    fVar5 = (float10)arctan(fVar3);
    _DAT_00e2712c = (float)fVar5;
    if (param_4 <= 50.0)
    {
        param_6 = (float *)((1.0 - param_4 * 0.02) * fVar3);
    }
    else
    {
        param_6 = NULL;
    }
    fVar3 = (float)param_6 * (float)param_6 * 400.0;
    rdVector_Scale3(local_c, -fVar3, pfVar4);
    vec3f_multiply_add(param_7, param_1 + 0x1c4, (float)_DAT_00e22a40 + (float)_DAT_00e22a40, local_c);
    fVar6 = (float10)rdVector_Len3(param_7);
    fVar5 = fVar6;
    if (fVar6 < (float10)0.0)
    {
        fVar5 = -fVar6;
    }
    fVar2 = fVar3;
    if (fVar3 < 0.0)
    {
        fVar2 = -fVar3;
    }
    if ((float10)fVar2 < fVar5)
    {
        fVar6 = (float10)fVar3 / fVar6;
        if (fVar6 < (float10)0.0)
        {
            fVar6 = -fVar6;
        }
        rdVector_Scale3(param_7, (float)fVar6, param_7);
    }
    vec3f_copy(param_1 + 0x1c4, param_7);
    local_30 = *pfVar4;
    local_2c = pfVar4[1];
    local_24 = *(float *)(param_1 + 0x30);
    local_20 = *(float *)(param_1 + 0x34);
    local_28 = 0.0;
    local_1c = 0.0;
    fVar5 = (float10)rdVector_Normalize3(&local_30);
    if (fVar5 < (float10)0.01)
    {
        local_30 = -*param_5;
        local_2c = -param_5[1];
        local_28 = -param_5[2];
    }
    rdVector_Normalize3(&local_24);
    fVar3 = local_28 * local_1c + local_2c * local_20 + local_30 * local_24;
    if (0.0 <= fVar3)
    {
        if (0.707 < fVar3)
        {
            fVar3 = (1.0 - fVar3) * 2.544529 * 0.707;
        }
        fVar3 = (local_30 * *pfVar4 + local_2c * pfVar4[1] + local_28 * pfVar4[2]) * fVar3;
        if (0.0 <= local_2c * local_24 - local_30 * local_20)
        {
            fVar3 = fVar3 * -2.0;
        }
        else
        {
            fVar3 = fVar3 + fVar3;
        }
    }
    else
    {
        fVar3 = 0.0;
    }
    if ((float)param_6 - -0.15 < 0.0)
    {
        fVar2 = ((float)param_6 - -0.15) * 1.176471;
        *(float *)(param_1 + 0x1f8) = fVar2 * fVar2 * fVar3 * 600.0;
        return;
    }
    *(undefined_32 *)(param_1 + 0x1f8) = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00479550(int param_1)

{
    int iVar1;
    float fVar2;
    float fVar3;
    float *pfVar4;
    float10 fVar5;
    float10 fVar6;
    float *param_5;
    float *param_6;
    undefined_32 param_7;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    undefined_8 local_c[12];

    pfVar4 = param_6;
    fVar3 = param_5[2] * *(float *)(param_1 + 0x19c) + param_5[1] * *(float *)(param_1 + 0x198)
        + *param_5 * *(float *)(param_1 + 0x194);
    if ((fVar3 < -0.995) || (0.995 < fVar3))
    {
        vec3f_set(param_6, 0, 0, 0);
        iVar1 = param_1 + 0x1c4;
        rdVector_Scale3(iVar1, 0x3f666666, iVar1);
        vec3f_copy(param_7, iVar1);
        *(undefined_32 *)(param_1 + 0x1f8) = 0;
        return;
    }
    rdVector_Cross3(&local_18, param_5, (float *)(param_1 + 0x194));
    rdVector_Normalize3(&local_18);
    rdVector_Cross3(param_6, param_5, &local_18);
    fVar3 = param_6[1] * *(float *)(param_1 + 0x198) + *param_6 * *(float *)(param_1 + 0x194)
        + param_6[2] * *(float *)(param_1 + 0x19c);
    fVar5 = (float10)arctan(fVar3);
    param_6 = (float *)(float)(fVar5 * (float10)-1.111111);
    if (200.0 <= *(float *)(param_1 + 0x1a0))
    {
        if (250.0 <= *(float *)(param_1 + 0x1a0))
        {
            if (300.0 <= *(float *)(param_1 + 0x1a0))
            {
                if (350.0 <= *(float *)(param_1 + 0x1a0))
                {
                    param_6 = (float *)(((float)param_6 - 80.0) * 5.0);
                }
                else
                {
                    param_6 = (float *)(((float)param_6 - 60.0) * 2.5);
                }
            }
            else
            {
                param_6 = (float *)(((float)param_6 - 40.0) * 1.666667);
            }
        }
        else
        {
            param_6 = (float *)(((float)param_6 - 25.0) * 1.333333);
        }
    }
    if ((float)param_6 < 0.0)
    {
        param_6 = NULL;
    }
    if ((float10)87.0 < fVar5)
    {
        param_6 = (float *)((float)param_6 + (float)param_6);
    }
    rdVector_Scale3(local_c, -(float)param_6, pfVar4);
    vec3f_multiply_add(param_7, param_1 + 0x1c4, (float)_DAT_00e22a40 + (float)_DAT_00e22a40, local_c);
    fVar6 = (float10)rdVector_Len3(param_7);
    fVar5 = fVar6;
    if (fVar6 < (float10)0.0)
    {
        fVar5 = -fVar6;
    }
    fVar2 = (float)param_6;
    if ((float)param_6 < 0.0)
    {
        fVar2 = -(float)param_6;
    }
    if ((float10)fVar2 < fVar5)
    {
        fVar6 = (float10)(float)param_6 / fVar6;
        if (fVar6 < (float10)0.0)
        {
            fVar6 = -fVar6;
        }
        rdVector_Scale3(param_7, (float)fVar6, param_7);
    }
    vec3f_copy(param_1 + 0x1c4, param_7);
    local_30 = *pfVar4;
    local_2c = pfVar4[1];
    local_24 = *(float *)(param_1 + 0x30);
    local_20 = *(float *)(param_1 + 0x34);
    local_28 = 0.0;
    local_1c = 0.0;
    fVar5 = (float10)rdVector_Normalize3(&local_30);
    if (fVar5 < (float10)0.01)
    {
        local_30 = -*param_5;
        local_2c = -param_5[1];
        local_28 = -param_5[2];
    }
    rdVector_Normalize3(&local_24);
    fVar2 = local_28 * local_1c + local_2c * local_20 + local_30 * local_24;
    if (0.0 <= fVar2)
    {
        if (local_1c * local_10 + local_20 * local_14 + local_24 * local_18 <= 0.0)
        {
            fVar5 = (float10)arctan(fVar2);
            *(float *)(param_1 + 0x1f8) = (float)-(fVar5 * (float10)fVar3);
            return;
        }
        fVar5 = (float10)arctan(fVar2);
        *(float *)(param_1 + 0x1f8) = (float)-(-fVar5 * (float10)fVar3);
        return;
    }
    *(float *)(param_1 + 0x1f8) = -(fVar3 * 0.0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00479920(int param_1, float *param_2, float *param_3)

{
    uint uVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    bool bVar6;
    float10 fVar7;
    float10 fVar8;
    float local_4c;
    float local_44;
    float local_40;
    float local_3c;
    float local_38;
    float local_34;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    float local_18;

    local_30 = param_3[2];
    local_34 = param_3[1];
    local_38 = *param_3;
    bVar6 = false;
    fVar2 = local_38 * *param_2 + local_30 * param_2[2] + local_34 * param_2[1];
    fVar7 = (float10)rdVector_Len3(param_2);
    if ((float10)0.1 <= fVar7)
    {
        fVar7 = (float10)0.7 - (float10)fVar2 / fVar7;
    }
    else
    {
        fVar7 = (float10)0.0;
    }
    if ((float10)0.0 <= fVar7)
    {
        local_4c = (float)(fVar7 * (float10)1.428571);
    }
    else
    {
        local_4c = 0.0;
    }
    fVar2 = -fVar2;
    local_44 = local_38 * fVar2 + *param_2;
    local_40 = local_34 * fVar2 + param_2[1];
    local_3c = local_30 * fVar2 + param_2[2];
    *param_2 = local_44;
    param_2[1] = local_40;
    param_2[2] = local_3c;
    fVar7 = (float10)rdVector_Len3(&local_44);
    if (fVar7 < (float10)0.01)
    {
        return;
    }
    fVar2 = 1.0 / (float)fVar7;
    local_44 = local_44 * fVar2;
    local_40 = local_40 * fVar2;
    local_3c = local_3c * fVar2;
    fVar2 = *(float *)(param_1 + 0x38) * local_3c + *(float *)(param_1 + 0x34) * local_40
        + local_44 * *(float *)(param_1 + 0x30);
    rdVector_Cross3(&local_2c, param_1 + 0x194, (float *)(param_1 + 0x30));
    rdVector_Normalize3(&local_2c);
    fVar3 = local_4c * fVar2 * fVar2;
    fVar4 = local_24 * local_3c + local_28 * local_40 + local_2c * local_44;
    if (0.7 < fVar3)
    {
        uVar1 = *(uint *)(param_1 + 0x60);
        bVar6 = true;
        *(uint *)(param_1 + 0x60) = uVar1 & 0xffffffef;
        if ((uVar1 & 0x7000) == 0)
        {
            *(undefined_32 *)(param_1 + 0x264) = 0.1f;
        }
    }
    fVar5 = fVar3 * *(float *)(param_1 + 0x1a0) * 1.5;
    *(float *)(param_1 + 0x1d0) = local_44 * fVar5 + *(float *)(param_1 + 0x1d0);
    *(float *)(param_1 + 0x1d4) = local_40 * fVar5 + *(float *)(param_1 + 0x1d4);
    *(float *)(param_1 + 0x1d8) = local_3c * fVar5 + *(float *)(param_1 + 0x1d8);
    if ((*(uint *)(param_1 + 100) & 0x400) != 0)
    {
        *(undefined_32 *)(param_1 + 500) = 0;
        goto LAB_00479c1f;
    }
    if (0.0 <= fVar2)
    {
    LAB_00479c03:
        *(undefined_32 *)(param_1 + 500) = 0;
    }
    else if (0.0 <= fVar4)
    {
        fVar5 = ((fVar4 - fVar2) - 1.0) * 2.5;
        *(float *)(param_1 + 500) = fVar5;
        if (fVar5 < 0.0)
            goto LAB_00479c03;
    }
    else
    {
        fVar5 = ((fVar4 + fVar2) - -1.0) * 2.5;
        *(float *)(param_1 + 500) = fVar5;
        if (0.0 < fVar5)
            goto LAB_00479c03;
    }
    *(float *)(param_1 + 500) = local_4c * -150.0 * *(float *)(param_1 + 500);
LAB_00479c1f:
    if ((0.0 < fVar3) && (100.0 < *(float *)(param_1 + 0x1a0)))
    {
        fVar8 = (float10)decelerator(50.0f, (float)_DAT_00e22a40);
        *(float *)(param_1 + 0x1a4) = (float)(fVar8 * (float10) * (float *)(param_1 + 0x1a4));
        if (0.05 < fVar3)
        {
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x40000;
        }
        local_20 = MAGIC('H', 'i', 't', 't');
        if (bVar6)
        {
            local_1c = MAGIC('K', 'P', 'o', 'w');
        }
        else
        {
            if (fVar2 < 0.0)
            {
                fVar2 = -fVar2;
            }
            fVar3 = fVar4;
            if (fVar4 < 0.0)
            {
                fVar3 = -fVar4;
            }
            if (fVar2 <= fVar3)
            {
                local_1c = MAGIC('R', 't', 'S', 'd');
                if (0.0 <= fVar4)
                {
                    local_1c = MAGIC('L', 't', 'S', 'd');
                }
            }
            else if (0.0 <= fVar4)
            {
                local_1c = MAGIC('L', 't', 'F', 't');
            }
            else
            {
                local_1c = MAGIC('R', 't', 'F', 't');
            }
        }
        local_18 = (float)fVar7 / (float)_DAT_00e22a40;
        FUN_00450c00(param_1, &local_20);
    }
    return;
}

void FUN_00479d40(int param_1)

{
    float local_38;
    float local_34;
    float local_30;
    undefined_8 local_2c[12];
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;

    vec3f_multiply_add(local_2c, param_1 + 0x50, 6.0f, (float *)(param_1 + 0x144));
    local_38 = -*(float *)(param_1 + 0x144);
    local_34 = -*(float *)(param_1 + 0x148);
    local_30 = -*(float *)(param_1 + 0x14c);
    FUN_00477850(param_1, 0.2f, 0, local_2c, &local_38, 2);
    FUN_0041df10(-1, 0, MAGIC('S', 'p', 'r', 'k'), **(undefined_32 **)(param_1 + 0x1e70), 0xa0000000, 1.575f, 0, 0,
                 local_2c, &local_38, 2);
    local_18 = *(undefined_32 *)(param_1 + 0x150);
    local_20 = MAGIC('H', 'i', 't', 't');
    local_1c = MAGIC('V', 'h', 'L', 't');
    FUN_00450c00(param_1, &local_20);
    return;
}

float10 FUN_00479e10(int param_1, float *param_2, undefined_32 param_3, undefined_32 *param_4, int param_5)

{
    float fVar1;
    uint uVar2;
    undefined_32 *puVar3;
    int iVar4;
    float10 fVar5;
    float local_c0;
    float local_bc;
    float local_b8;
    float local_b4;
    float local_b0;
    float local_ac;
    float local_a8;
    undefined_8 local_a4[12];
    undefined_8 local_98[12];
    undefined_8 local_8c[12];
    undefined_8 local_80[56];
    float local_48;
    undefined_8 local_40[56];
    float local_8;

    local_b0 = *param_2;
    local_ac = param_2[1];
    local_a8 = param_2[2];
    if (((((float)*(int *)(param_1 + 0x1998) - 400.0) * 0.001666667 < 1.0) || ((*(uint *)(param_1 + 0x60) & 0x20) != 0))
        || ((*(uint *)(param_1 + 100) & 0x4000000) != 0))
    {
        if (((*(uint *)(param_1 + 100) & 0x400000) == 0) || ((*(uint *)(param_1 + 100) & 0x800000) == 0))
        {
            fVar5 = (float10)FUN_004772f0(param_1, param_2, param_4);
            uVar2 = *(uint *)(param_1 + 100);
            local_c0 = (float)fVar5;
            if ((uVar2 & 0x800000) == 0)
            {
                uVar2 = uVar2 & 0xffbfffff;
            }
            else
            {
                uVar2 = uVar2 | 0x400000;
            }
        }
        else
        {
            local_c0 = param_2[2] - *(float *)(param_1 + 0x188);
            *param_4 = *(undefined_32 *)(param_1 + 0x160);
            param_4[1] = *(undefined_32 *)(param_1 + 0x164);
            param_4[2] = *(undefined_32 *)(param_1 + 0x168);
            *(undefined_32 *)(param_1 + 0x140) = *(undefined_32 *)(param_1 + 0xec);
            uVar2 = *(uint *)(param_1 + 100) | 0x20000000;
        }
        *(uint *)(param_1 + 100) = uVar2;
        if (((uVar2 & 0x400) != 0) && ((float)param_4[2] < 0.05))
        {
            param_4[2] = 0.05f;
            rdVector_Normalize3(param_4);
        }
        *(undefined_32 *)(param_1 + 0x160) = *param_4;
        *(undefined_32 *)(param_1 + 0x164) = param_4[1];
        *(undefined_32 *)(param_1 + 0x168) = param_4[2];
        if (((*(uint *)(param_1 + 0x60) & 0x5000) == 0)
            && (((0.1 < *(float *)(param_1 + 0x18c) || (0.1 < -*(float *)(param_1 + 0x18c)))
                 || ((*(uint *)(param_1 + 0x60) & 0x2000) == 0))))
        {
            if ((*(uint *)(param_1 + 100) & 0x400) == 0)
            {
                FUN_004791d0(param_1, param_2, param_3, local_c0, param_4, local_98, local_a4);
            }
            else
            {
                FUN_00479550();
            }
        }
        if ((*(uint *)(param_1 + 0x60) & 0x4000000) == 0)
        {
            gravityFunction(param_1, param_2, local_c0);
        }
        if (local_c0 < 0.0)
        {
            local_c0 = 2.0;
        }
        if (((((byte) * (uint *)(param_1 + 0x60) & 0xf) == 2) && ((*(uint *)(param_1 + 0x60) & 0x20) == 0))
            && ((fVar1 = ((float)*(int *)(param_1 + 0x1998) - 400.0) * 0.001666667, 0.0 <= fVar1 && (fVar1 <= 1.0))))
        {
            FUN_0044eeb0(param_1 + 0xac, local_40, 0);
            param_2[2] =
                ((float)*(int *)(param_1 + 0x1998) - 400.0) * 0.001666667 * (local_8 - param_2[2]) + param_2[2];
        }
        if ((*(uint *)(param_1 + 100) & 0x800000) == 0)
        {
            if ((*(byte *)(param_1 + 0x60) & 0x20) == 0)
            {
                FUN_0044abc0(param_2, &local_b0, *(undefined_32 *)(param_1 + 0x13c), local_8c);
            }
            else
            {
                local_bc = *param_2;
                local_b8 = param_2[1];
                local_b4 = param_2[2];
                FUN_00477940(param_1, param_2, param_3);
                local_bc = *(float *)(param_1 + 0x154) + (*param_2 - local_bc);
                local_b8 = *(float *)(param_1 + 0x158) + (param_2[1] - local_b8);
                local_b4 = *(float *)(param_1 + 0x15c) + (param_2[2] - local_b4);
                FUN_00479920(param_1, &local_bc, param_4);
            }
        }
        if (1.0 <= ((float)*(int *)(param_1 + 0x1998) - 40.0) * 0.01666667)
        {
            puVar3 = (undefined_32 *)(param_1 + 0x12c8);
            iVar4 = 4;
            do
            {
                *puVar3 = 0xc7c35000;
                puVar3 = puVar3 + 0x10;
                iVar4 = iVar4 + -1;
            } while (iVar4 != 0);
        }
        else
        {
            fVar5 = (float10)FUN_00476740(param_1, param_2, *(undefined_32 *)(param_5 + 8), local_c0, param_4);
            local_c0 = (float)fVar5;
        }
    }
    else
    {
        *(undefined_32 *)(param_1 + 0x140) = *(undefined_32 *)(param_1 + 0xec);
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x20000000;
        if (((byte) * (uint *)(param_1 + 0x60) & 0xf) == 2)
        {
            FUN_0044eeb0(param_1 + 0xac, local_80, 0);
            param_2[2] = local_48;
        }
        local_c0 = 2.0;
        *param_4 = 0;
        param_4[1] = 0;
        param_4[2] = 1.0f;
        if (((byte) * (undefined_32 *)(param_1 + 0x60) & 0xf) == 2)
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 2;
        }
    }
    *(float *)(param_1 + 0x184) = local_c0;
    return (float10)local_c0;
}

float10 FUN_0047a200(int param_1, float *param_2, undefined_32 param_3, undefined_32 *param_4)

{
    uint uVar1;
    float10 fVar2;
    float local_64;
    float local_60;
    float local_5c;
    float local_58;
    float local_54;
    float local_50;
    undefined_8 local_4c[12];
    undefined_8 local_40[56];
    float local_8;

    local_58 = *param_2;
    local_54 = param_2[1];
    local_50 = param_2[2];
    uVar1 = *(uint *)(param_1 + 100);
    *(uint *)(param_1 + 100) = uVar1 & 0xfffffdff;
    if (((((float)*(int *)(param_1 + 0x1998) - 400.0) * 0.001666667 < 1.0) || ((*(uint *)(param_1 + 0x60) & 0x20) != 0))
        || ((uVar1 & 0x4000000) != 0))
    {
        if ((*(byte *)(param_1 + 0x60) & 0x20) != 0)
        {
            local_64 = *param_2;
            local_60 = param_2[1];
            local_5c = param_2[2];
            FUN_00477940(param_1, param_2, param_3);
            local_64 = *(float *)(param_1 + 0x154) + (*param_2 - local_64);
            local_60 = *(float *)(param_1 + 0x158) + (param_2[1] - local_60);
            local_5c = *(float *)(param_1 + 0x15c) + (param_2[2] - local_5c);
            FUN_00479920(param_1, &local_64, param_4);
            return (float10)0.0;
        }
        FUN_0044abc0(param_2, &local_58, *(undefined_32 *)(param_1 + 0x13c), local_4c);
        fVar2 = (float10)0.0;
    }
    else
    {
        if (((byte) * (uint *)(param_1 + 0x60) & 0xf) == 2)
        {
            FUN_0044eeb0(param_1 + 0xac, local_40, 0);
            param_2[2] = local_8;
        }
        else
        {
            param_2[2] = 0.0;
        }
        fVar2 = (float10)2.0;
        *param_4 = 0;
        param_4[1] = 0;
        param_4[2] = 1.0f;
        if (((byte) * (undefined_32 *)(param_1 + 0x60) & 0xf) == 2)
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 2;
            return fVar2;
        }
    }
    return fVar2;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047a3a0(int param_1, undefined_32 param_2)

{
    uint *puVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    int iVar5;
    float10 fVar6;
    float10 fVar7;
    float local_38;
    int local_34[2];
    undefined_32 local_2c[2];
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;

    local_38 = 1.0;
    if ((*(uint *)(param_1 + 100) & 0x10) != 0)
    {
        fVar2 = (float)_DAT_00e22a40;
        *(undefined_32 *)(param_1 + 0x24c) = 0.25f;
        if (*(float *)(param_1 + 0x1fc) <= 0.0)
        {
            *(float *)(param_1 + 0x1fc) = *(float *)(param_1 + 0x1fc) - fVar2 * -100.0;
            if (*(float *)(param_1 + 0x1fc) <= 0.0)
                goto LAB_0047a438;
        }
        else
        {
            *(float *)(param_1 + 0x1fc) = *(float *)(param_1 + 0x1fc) - fVar2 * 100.0;
            if (0.0 <= *(float *)(param_1 + 0x1fc))
                goto LAB_0047a438;
        }
        *(undefined_32 *)(param_1 + 0x1fc) = 0;
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xffffffef;
    }
LAB_0047a438:
    iVar5 = FUN_00450e70(MAGIC('S', 'm', 'o', 'k'), param_2, 0x45afc800, 0, 1, local_2c, &local_18, local_34);
    if (0 < iVar5)
    {
        fVar6 = (float10)SQRT3(local_2c[0]);
        if (*(int *)(local_34[0] + 0x60) != 1)
        {
            if (*(int *)(local_34[0] + 0x60) != 2)
            {
                return;
            }
            if (*(float *)(local_34[0] + 0x68) < 2.0)
            {
                return;
            }
            local_38 = -1.0;
            if (((float)fVar6 < 30.0) && (iVar5 = rand(), (float)iVar5 * 4.656613e-10 < 0.25))
            {
                rand();
                iVar5 = __ftol();
                if (5 < iVar5)
                {
                    iVar5 = 0;
                }
                puVar1 = (uint *)(param_1 + 0x2a0 + iVar5 * 4);
                *puVar1 = *puVar1 | 8;
            }
        }
        fVar2 = *(float *)(param_1 + 0x74);
        local_20 = -local_18;
        local_1c = 0.0;
        local_24 = local_14;
        fVar7 = (float10)rdVector_Normalize3(&local_24);
        if ((float10)0.1 <= fVar7)
        {
            fVar2 = -(*(float *)(param_1 + 0x28) * local_1c + *(float *)(param_1 + 0x24) * local_20
                      + *(float *)(param_1 + 0x20) * local_24)
                * (75.0 - (float)fVar6) * 0.01428571 * fVar2;
        }
        else
        {
            fVar2 = 1.0;
        }
        if ((*(uint *)(param_1 + 100) & 0x10) == 0)
        {
            *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x10;
            *(float *)(param_1 + 0x1fc) = local_38 * fVar2;
            return;
        }
        fVar4 = fVar2;
        if (fVar2 < 0.0)
        {
            fVar4 = -fVar2;
        }
        fVar3 = *(float *)(param_1 + 0x1fc);
        if (*(float *)(param_1 + 0x1fc) < 0.0)
        {
            fVar3 = -fVar3;
        }
        if (fVar3 < fVar4)
        {
            *(float *)(param_1 + 0x1fc) = local_38 * fVar2;
            return;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047a610(int param_1, undefined_32 param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;
    float fVar4;
    float local_7c;
    float local_78;
    float local_74;
    undefined_8 local_70[12];
    undefined_8 local_64[12];
    undefined_8 local_58[12];
    undefined_8 local_4c[12];
    undefined_8 local_40[48];
    float local_10;
    float local_c;
    float local_8;

    if (*(float *)(param_1 + 0x104) < 0.01)
    {
        *(undefined_32 *)(param_1 + 0x104) = 0.01f;
    }
    if (2.0 < *(float *)(param_1 + 0x104))
    {
        *(undefined_32 *)(param_1 + 0x104) = 2.0f;
    }
    FUN_0044eeb0(param_1 + 0xac, local_40, 0);
    local_78 = local_c;
    local_7c = local_10;
    local_74 = local_8;
    FUN_0044eeb0(param_1 + 0xac, local_40, *(undefined_32 *)(param_1 + 0x104));
    fVar4 = (local_74 - local_8) * (local_74 - local_8) + (local_78 - local_c) * (local_78 - local_c)
        + (local_7c - local_10) * (local_7c - local_10);
    if (18000.0 <= fVar4)
    {
        if (fVar4 <= 90000.0)
            goto LAB_0047a72e;
        fVar4 = *(float *)(param_1 + 0x104) - 0.01;
    }
    else
    {
        fVar4 = *(float *)(param_1 + 0x104) - -0.01;
    }
    *(float *)(param_1 + 0x104) = fVar4;
LAB_0047a72e:
    local_74 = local_8;
    local_7c = local_10;
    local_78 = local_c;
    vec3f_sub(local_70, &local_7c, param_1 + 0x50);
    rdVector_Normalize3(local_70);
    iVar1 = param_1 + 0x30;
    vec3f_sub(local_64, local_70, iVar1);
    vec3f_multiply_add(local_58, iVar1, 0.2f, local_64);
    if ((*(uint *)(param_1 + 0x60) & 0x4000000) == 0)
    {
        fVar4 = (float)_DAT_00e22a40 * *(float *)(param_1 + 0x1f0);
        fVar4 = *(float *)(param_1 + 0x21c) - (fVar4 + fVar4);
        *(float *)(param_1 + 0x21c) = fVar4;
        fVar4 = fVar4 - (float)_DAT_00e22a40 * *(float *)(param_1 + 0x208) * -1000.0;
        *(float *)(param_1 + 0x21c) = fVar4;
        if (180.0 < fVar4)
        {
            *(undefined_32 *)(param_1 + 0x21c) = 0x43340000;
        }
        if (*(float *)(param_1 + 0x21c) < -180.0)
        {
            *(undefined_32 *)(param_1 + 0x21c) = 0xc3340000;
        }
        fVar4 = *(float *)(param_1 + 0x21c) * 0.98;
    }
    else
    {
        fVar4 = *(float *)(param_1 + 0x2ec) * 10.0;
    }
    *(float *)(param_1 + 0x21c) = fVar4;
    vec3f_copy(local_4c, param_2);
    vec3f_copy(iVar1, local_58);
    iVar2 = param_1 + 0x40;
    iVar3 = param_1 + 0x20;
    rdVector_Cross3(iVar3, iVar1, iVar2);
    rdVector_Cross3(iVar2, iVar3, iVar1);
    rdVector_Normalize3(iVar3);
    rdVector_Normalize3(iVar1);
    rdVector_Normalize3(iVar2);
    FUN_00431390(iVar3, (float)_DAT_00e22a40 * *(float *)(param_1 + 0x1ec) * 1.5, 0, 0, 1.0f, iVar3);
    FUN_00431390(iVar3, (float)_DAT_00e22a40 * *(float *)(param_1 + 0x220) * 1.5, 1.0f, 0, 0, iVar3);
    FUN_00431390(iVar3, (float)_DAT_00e22a40 * *(float *)(param_1 + 0x21c), 0, 1.0f, 0, iVar3);
    vec3f_copy(param_1 + 0x50, local_4c);
    *(undefined_32 *)(param_1 + 0x204) = 0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047a930(int param_1)

{
    float fVar1;
    float fVar2;
    uint uVar3;
    uint uVar4;

    uVar3 = 0;
    fVar1 = *(float *)(param_1 + 0x54);
    fVar2 = *(float *)(param_1 + 0x50);
    if (_DAT_00e2711c - _DAT_00e27128 < fVar1)
    {
        uVar3 = 0x800000;
    }
    if ((fVar1 < _DAT_00e27128 + _DAT_00e2711c) && (_DAT_00e27118 - _DAT_00e27128 < fVar1))
    {
        uVar3 = uVar3 | 0x400000;
    }
    if ((fVar1 < _DAT_00e27128 + _DAT_00e27118) && (_DAT_00e27114 - _DAT_00e27128 < fVar1))
    {
        uVar3 = uVar3 | 0x200000;
    }
    if ((fVar1 < _DAT_00e27128 + _DAT_00e27114) && (_DAT_00e27110 - _DAT_00e27128 < fVar1))
    {
        uVar3 = uVar3 | 0x100000;
    }
    if ((fVar1 < _DAT_00e27128 + _DAT_00e27110) && (_DAT_00e2710c - _DAT_00e27128 < fVar1))
    {
        uVar3 = uVar3 | 0x80000;
    }
    if ((fVar1 < _DAT_00e27128 + _DAT_00e2710c) && (_DAT_00e27108 - _DAT_00e27128 < fVar1))
    {
        uVar3 = uVar3 | 0x40000;
    }
    if ((fVar1 < _DAT_00e27128 + _DAT_00e27108) && (_DAT_00e27104 - _DAT_00e27128 < fVar1))
    {
        uVar3 = uVar3 | 0x20000;
    }
    if (fVar1 < _DAT_00e27128 + _DAT_00e27104)
    {
        uVar3 = uVar3 | 0x10000;
    }
    uVar4 = 0;
    if (_DAT_00e270d8 - _DAT_00e27124 < fVar2)
    {
        uVar4 = (int)uVar3 >> 8;
    }
    if ((fVar2 < _DAT_00e27124 + _DAT_00e270d8) && (_DAT_00e270d4 - _DAT_00e27124 < fVar2))
    {
        uVar4 = uVar4 | uVar3;
    }
    if (fVar2 < _DAT_00e27124 + _DAT_00e270d4)
    {
        uVar4 = uVar4 | uVar3 << 8;
    }
    *(uint *)(param_1 + 0x26c) = uVar4;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047ab40(int param_1)

{
    float fVar1;
    uint uVar2;
    undefined_32 uVar3;
    int iVar4;
    float *pfVar5;
    bool bVar6;
    float10 fVar7;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    uVar2 = FUN_00445660(5);
    if (150.0 < *(float *)(param_1 + 0x1a0))
    {
        FUN_00445640(5, uVar2 | 4);
    }
    if (DAT_0050cb40 != 0)
    {
        FUN_0047a930(param_1);
    }
    uVar3 = FUN_00445660(3);
    FUN_00445640(3, *(undefined_32 *)(param_1 + 0x26c));
    _DAT_00e270e0 = *(undefined_32 *)(param_1 + 0x1f8);
    bVar6 = (*(uint *)(param_1 + 0x60) & 0x2000000) == 0;
    if (bVar6)
    {
        FUN_004764a0(param_1);
        FUN_00476390(param_1 + 0x30, param_1 + 0x20, param_1 + 0x194, param_1 + 0x2e4);
    }
    else
    {
        rdVector_Scale3(param_1 + 0x194, -1.0f, param_1 + 0x40);
        *(undefined_32 *)(param_1 + 0x2e8) = 0;
        *(undefined_32 *)(param_1 + 0x2ec) = 0;
        *(undefined_32 *)(param_1 + 0x2e4) = 0;
    }
    pfVar5 = (float *)(param_1 + 0x2e4);
    bVar6 = !bVar6;
    *(undefined_32 *)(param_1 + 0x170) = *(undefined_32 *)(param_1 + 0x54);
    *(undefined_32 *)(param_1 + 0x16c) = *(undefined_32 *)(param_1 + 0x50);
    *(undefined_32 *)(param_1 + 0x174) = *(undefined_32 *)(param_1 + 0x58);
    *(float *)(param_1 + 0x2d8) = *pfVar5;
    *(undefined_32 *)(param_1 + 0x2dc) = *(undefined_32 *)(param_1 + 0x2e8);
    *(undefined_32 *)(param_1 + 0x2e0) = *(undefined_32 *)(param_1 + 0x2ec);
    iVar4 = FUN_0046a9c0(param_1);
    if (iVar4 == 0)
    {
        if ((*(uint *)(param_1 + 0x60) & 0x800000) == 0)
        {
            if (bVar6)
                goto LAB_0047acc7;
            fVar1 = *(float *)(param_1 + 0x208);
            if (*(float *)(param_1 + 0x208) < 0.0)
            {
                fVar1 = -fVar1;
            }
            fVar1 = (1.0 - fVar1 * 0.5) * *(float *)(param_1 + 0x1f0);
        }
        else
        {
            fVar1 = *(float *)(param_1 + 0x1f0) * 0.5;
        }
    }
    else
    {
        fVar1 = *(float *)(param_1 + 0x1f0) * 0.8;
    }
    *(float *)(param_1 + 0x1f0) = fVar1;
LAB_0047acc7:
    if ((*(uint *)(param_1 + 100) & 0x400) == 0)
    {
        FUN_0044ae40(param_1 + 0x1ec, pfVar5, *(undefined_32 *)(param_1 + 0x1f0),
                     *(float *)(param_1 + 0x70) * *(float *)(param_1 + 0x22c), *(undefined_32 *)(param_1 + 500),
                     *(float *)(param_1 + 0x1fc) + *(float *)(param_1 + 0x1f8));
    }
    else
    {
        fVar1 = *(float *)(param_1 + 0x1f0) * 0.5;
        *(float *)(param_1 + 0x1f0) = fVar1;
        FUN_0044ae40(param_1 + 0x1ec, pfVar5, fVar1, *(float *)(param_1 + 0x70) * *(float *)(param_1 + 0x22c),
                     *(undefined_32 *)(param_1 + 500), *(undefined_32 *)(param_1 + 0x1fc));
        if (*(float *)(param_1 + 0x1f8) <= 0.0)
        {
            if (*(float *)(param_1 + 0x1f8) < 0.0)
            {
                *pfVar5 = *(float *)(param_1 + 0x1f8) + *pfVar5;
            }
        }
        else
        {
            *pfVar5 = *(float *)(param_1 + 0x1f8) + *pfVar5;
        }
    }
    fVar7 = (float10)decelerator(1.5f, (float)_DAT_00e22a40);
    fVar7 = fVar7 * (float10) * (float *)(param_1 + 500);
    *(float *)(param_1 + 500) = (float)fVar7;
    if ((fVar7 < (float10)0.5) && (-fVar7 < (float10)0.5))
    {
        *(undefined_32 *)(param_1 + 500) = 0;
    }
    if (bVar6)
    {
        fVar1 = *(float *)(param_1 + 0x22c) * (float)_DAT_00e22a40;
        if (*(float *)(param_1 + 0x220) <= *(float *)(param_1 + 0x224))
        {
            fVar1 = *(float *)(param_1 + 0x70) * fVar1 + *(float *)(param_1 + 0x220);
            *(float *)(param_1 + 0x220) = fVar1;
            if (*(float *)(param_1 + 0x224) < fVar1)
            {
                *(undefined_32 *)(param_1 + 0x220) = *(undefined_32 *)(param_1 + 0x224);
            }
        }
        else
        {
            fVar1 = *(float *)(param_1 + 0x220) - *(float *)(param_1 + 0x70) * fVar1;
            *(float *)(param_1 + 0x220) = fVar1;
            if (fVar1 < *(float *)(param_1 + 0x224))
            {
                *(undefined_32 *)(param_1 + 0x220) = *(undefined_32 *)(param_1 + 0x224);
            }
        }
    }
    mainSpeedFunction(param_1, (undefined_32 *)(param_1 + 0x16c), &local_c, param_1 + 0x30);
    if (bVar6)
    {
        *(undefined_32 *)(param_1 + 0x140) = *(undefined_32 *)(param_1 + 0xec);
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x20000000;
        *(undefined_32 *)(param_1 + 0x244) = 1.0f;
        *(undefined_32 *)(param_1 + 0x248) = 1.0f;
    }
    *(undefined_32 *)(param_1 + 0x2cc) = local_c;
    *(undefined_32 *)(param_1 + 0x50) = local_c;
    *(undefined_32 *)(param_1 + 0x2d0) = local_8;
    *(undefined_32 *)(param_1 + 0x2d4) = local_4;
    *(undefined_32 *)(param_1 + 0x54) = local_8;
    *(undefined_32 *)(param_1 + 0x58) = local_4;
    FUN_00445640(5, uVar2);
    FUN_00445640(3, uVar3);
    return;
}

float10 FUN_0047aee0(float *param_1, float *param_2, float *param_3, float *param_4, undefined_32 param_5,
                     undefined_32 param_6, float *param_7, float *param_8)

{
    float fVar1;
    float fVar2;
    float fVar3;

    *param_7 = *param_2 - *param_1;
    param_7[1] = param_2[1] - param_1[1];
    *param_8 = *param_4 - *param_3;
    fVar1 = param_4[1];
    fVar2 = param_3[1];
    param_8[1] = fVar1 - fVar2;
    fVar3 = *param_7 - *param_8;
    fVar1 = param_7[1] - (fVar1 - fVar2);
    fVar2 = fVar1 * fVar1 + fVar3 * fVar3;
    if ((fVar2 < 0.001) && (-fVar2 < 0.001))
    {
        return (float10)-1.0;
    }
    param_2 = (float *)(-(fVar1 * (param_1[1] - param_3[1]) + fVar3 * (*param_1 - *param_3)) / fVar2);
    if ((float)param_2 < 0.0)
    {
        param_2 = NULL;
    }
    if (1.0 < (float)param_2)
    {
        param_2 = (float *)1.0f;
    }
    vec2f_multiply_add(param_5, param_1, param_2, param_7);
    vec2f_multiply_add(param_6, param_3, param_2, param_8);
    return (float10)(float)param_2;
}

void FUN_0047b000(int param_1, float param_2, float param_3)

{
    uint uVar1;
    uint uVar2;
    undefined_32 uVar3;

    uVar1 = *(uint *)(param_1 + 0x60);
    if (((uVar1 & 0x7000) == 0) && (uVar2 = *(uint *)(param_1 + 100), (uVar2 & 0x2000000) == 0))
    {
        if ((uVar2 & 0x10000000) != 0)
        {
            *(uint *)(param_1 + 100) = uVar2 & 0xefffffff;
            return;
        }
        if (((DAT_004c7bbc < param_3) && (DAT_004c7bb8 < param_2)) && (DAT_0050ca28 == 0))
        {
            if ((200.0 <= *(float *)(param_1 + 0x1a0)) && ((uVar1 & 0x80) == 0))
            {
                if (0.0 <= *(float *)(param_1 + 500))
                {
                    uVar3 = 2;
                }
                else
                {
                    uVar3 = 1;
                }
                FUN_004741d0(param_1, uVar3);
                *(undefined_32 *)(param_1 + 0x18c) = 5.0f;
                *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x800000;
                return;
            }
            *(uint *)(param_1 + 0x60) = uVar1 | 0x1000;
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047b0c0(int param_1)

{
    float *pfVar1;
    float *pfVar2;
    float fVar3;
    undefined_32 uVar4;
    int iVar5;
    float10 fVar6;
    float10 fVar7;
    float local_108;
    float local_104;
    float local_fc;
    float local_f8;
    int local_f0;
    float local_ec;
    float local_e8;
    float local_e0;
    float local_dc;
    float local_d4;
    float local_d0;
    float local_c8;
    float local_c4;
    float local_bc;
    float local_b8;
    float local_b0;
    float local_ac;
    float local_a4;
    float local_a0;
    undefined_8 local_98[12];
    float local_8c;
    undefined_8 local_80[12];
    float local_74;
    float local_70;
    undefined_8 local_68[12];
    undefined_8 local_5c[12];
    int local_50[4];
    undefined_8 local_40[16];
    undefined_8 local_30[48];

    if (((*(uint *)(param_1 + 0x60) & 0x6000) == 0) && ((*(uint *)(param_1 + 100) & 0x2000000) == 0))
    {
        iVar5 = FUN_00450e70(MAGIC('T', 'e', 's', 't'), param_1 + 0x50, 0x451c4000, param_1, 4, local_40, local_30,
                             local_50);
        *(undefined_32 *)(param_1 + 0x150) = 0;
        if ((0 < iVar5)
            && (((*(uint *)(local_50[0] + 0x60) & 0x6000) == 0 && ((*(uint *)(local_50[0] + 100) & 0x2000000) == 0))))
        {
            pfVar1 = (float *)(local_50[0] + 0x2cc);
            local_f0 = local_50[0] + 0x16c;
            pfVar2 = (float *)(param_1 + 0x2cc);
            fVar6 = (float10)FUN_0047aee0(param_1 + 0x16c, pfVar2, local_f0, pfVar1, &local_b0, &local_bc, local_80,
                                          local_98);
            fVar3 = (float)fVar6;
            if (((float10)0.0 <= fVar6)
                && ((local_8c = local_b0 - local_bc,
                     (local_ac - local_b8) * (local_ac - local_b8) + local_8c * local_8c < 100.0 && (0.01 <= fVar3))))
            {
                vec2f_scale(&local_ec, 0.5f, &local_b0);
                vec2f_multiply_add(&local_ec, &local_ec, 0.5f, &local_bc);
                vec2f_scale(&local_fc, *(undefined_32 *)(param_1 + 0x9c), local_80);
                vec2f_multiply_add(&local_fc, &local_fc, *(undefined_32 *)(local_50[0] + 0x9c), local_98);
                vec2f_scale(&local_fc, (1.0 - fVar3) / (*(float *)(local_50[0] + 0x9c) + *(float *)(param_1 + 0x9c)),
                            &local_fc);
                local_c8 = local_fc + local_ec;
                local_c4 = local_f8 + local_e8;
                vec2f_multiply_add(&local_a4, param_1 + 0x16c, fVar3 - 0.05, local_80);
                vec2f_multiply_add(&local_74, local_f0, fVar3 - 0.05, local_98);
                local_108 = local_a4 - local_74;
                local_104 = local_a0 - local_70;
                vec2f_normalize(&local_108);
                vec2f_scale(local_68, 5.0f, &local_108);
                vec2f_scale(local_5c, 0xc0a00000, &local_108);
                vec2f_add(pfVar2, &local_c8, local_68);
                vec2f_add(pfVar1, &local_c8, local_5c);
                local_d4 = *pfVar1 - *(float *)(local_50[0] + 0x50);
                local_d0 = *(float *)(local_50[0] + 0x2d0) - *(float *)(local_50[0] + 0x54);
                local_e0 = *pfVar2 - *(float *)(param_1 + 0x50);
                *(float *)(param_1 + 0x50) = *pfVar2;
                local_dc = *(float *)(param_1 + 0x2d0) - *(float *)(param_1 + 0x54);
                *(undefined_32 *)(param_1 + 0x54) = *(undefined_32 *)(param_1 + 0x2d0);
                *(float *)(local_50[0] + 0x50) = *pfVar1;
                *(undefined_32 *)(local_50[0] + 0x54) = *(undefined_32 *)(local_50[0] + 0x2d0);
                if (*(float *)(param_1 + 0x1a0) <= *(float *)(local_50[0] + 0x1a0))
                {
                    uVar4 = *(undefined_32 *)(local_50[0] + 0x1a0);
                }
                else
                {
                    uVar4 = *(undefined_32 *)(param_1 + 0x1a0);
                }
                fVar7 = (float10)vec2f_norm(&local_e0);
                fVar6 = (float10)_DAT_00e22a40;
                *(undefined_32 *)(param_1 + 0x14c) = 0;
                *(float *)(param_1 + 0x150) = (float)(fVar7 / fVar6);
                *(float *)(param_1 + 0x144) = -local_108;
                *(float *)(param_1 + 0x148) = -local_104;
                FUN_00479d40(param_1);
                FUN_0047b000(param_1, uVar4, *(undefined_32 *)(param_1 + 0x150));
                fVar6 = (float10)vec2f_norm(&local_d4);
                *(float *)(local_50[0] + 0x150) = (float)(fVar6 / (float10)_DAT_00e22a40);
                *(float *)(local_50[0] + 0x144) = local_108;
                *(undefined_32 *)(local_50[0] + 0x14c) = 0;
                *(float *)(local_50[0] + 0x148) = local_104;
                FUN_00479d40(local_50[0]);
                FUN_0047b000(local_50[0], uVar4, *(undefined_32 *)(local_50[0] + 0x150));
                *(float *)(param_1 + 0x1dc) = *(float *)(param_1 + 0x1dc) - local_e0 * -0.5;
                *(float *)(param_1 + 0x1e0) = *(float *)(param_1 + 0x1e0) - local_dc * -0.5;
                *(float *)(local_50[0] + 0x1dc) = *(float *)(local_50[0] + 0x1dc) - local_d4 * -0.5;
                *(float *)(local_50[0] + 0x1e0) = *(float *)(local_50[0] + 0x1e0) - local_d0 * -0.5;
            }
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047b520(int param_1)

{
    float fVar1;
    uint uVar2;
    uint uVar3;
    undefined_32 uVar4;
    float *pfVar5;
    uint uVar6;
    float10 fVar7;
    float10 fVar8;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    undefined_8 local_c[12];

    uVar3 = FUN_00445660(5);
    if (150.0 < *(float *)(param_1 + 0x1a0))
    {
        FUN_00445640(5, uVar3 | 4);
    }
    uVar4 = FUN_00445660(3);
    FUN_00445640(3, *(undefined_32 *)(param_1 + 0x26c));
    local_24 = *(float *)(param_1 + 0x2cc);
    local_20 = *(float *)(param_1 + 0x2d0);
    local_1c = *(float *)(param_1 + 0x2d4);
    uVar6 = *(uint *)(param_1 + 0x60) >> 0x19 & 1;
    *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xdfffffff;
    FUN_0047b0c0(param_1);
    if (uVar6 == 0)
    {
        fVar7 = (float10)FUN_00479e10(param_1, &local_24, param_1 + 0x16c, local_c, param_1 + 0x2e4);
    }
    else
    {
        rdVector_Scale3(local_c, 1.0f, param_1 + 0x40);
        fVar7 = (float10)FUN_0047a200(param_1, &local_24, param_1 + 0x16c, local_c, param_1 + 0x2e4);
    }
    pfVar5 = (float *)(param_1 + 0x2e4);
    local_18 = local_24 - *(float *)(param_1 + 0x16c);
    local_14 = local_20 - *(float *)(param_1 + 0x170);
    local_10 = local_1c - *(float *)(param_1 + 0x174);
    *(float *)(param_1 + 0x2cc) = local_24;
    fVar1 = *(float *)(param_1 + 0x1a0);
    *(float *)(param_1 + 0x2d0) = local_20;
    *(float *)(param_1 + 0x2d4) = local_1c;
    if ((*(uint *)(param_1 + 0x60) & 0x5000) == 0)
    {
        if ((uVar6 == 0) && ((*(uint *)(param_1 + 0x60) & 0x4000000) == 0))
        {
            fVar8 = (float10)vec2f_norm(&local_18);
        }
        else
        {
            fVar8 = (float10)rdVector_Len3(&local_18);
        }
        *(float *)(param_1 + 0x1a0) = (float)(fVar8 / (float10)_DAT_00e22a40);
        if (*(float *)(param_1 + 0x38) * local_10 + *(float *)(param_1 + 0x34) * local_14
                + *(float *)(param_1 + 0x30) * local_18
            < 0.0)
        {
            *(float *)(param_1 + 0x1a0) = -*(float *)(param_1 + 0x1a0);
        }
    }
    else
    {
        *(undefined_32 *)(param_1 + 0x1a0) = 0;
    }
    uVar2 = *(uint *)(param_1 + 100);
    if ((uVar2 & 0x4000) != 0)
    {
        *(float *)(param_1 + 0x310) = *(float *)(param_1 + 0x310) - (float)_DAT_00e22a40;
        if (*(float *)(param_1 + 0x1a0) < 200.0)
        {
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x1000;
        }
        if (*(float *)(param_1 + 0x310) < 0.0)
        {
            *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) | 0x1000;
        }
    }
    if (((*(byte *)(param_1 + 0x60) & 0x80) == 0) || ((uVar2 & 0x4000000) != 0))
    {
        FUN_0047b000(param_1, fVar1, fVar1 - *(float *)(param_1 + 0x1a0));
    }
    else
    {
        *(uint *)(param_1 + 100) = uVar2 & 0xefffffff;
    }
    if (((*(uint *)(param_1 + 0x60) & 0x40000) != 0)
        && (*(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xfffbffff, 0.0 < *(float *)(param_1 + 0x1a4)))
    {
        if (*(float *)(param_1 + 0x1a0) <= *(float *)(param_1 + 0x7c))
        {
            if (0.0 <= *(float *)(param_1 + 0x1a0))
            {
                fVar1 = (*(float *)(param_1 + 0x78) * *(float *)(param_1 + 0x1a0))
                    / (*(float *)(param_1 + 0x7c) - *(float *)(param_1 + 0x1a0));
            }
            else
            {
                fVar1 = 0.0;
            }
            if (fVar1 < *(float *)(param_1 + 0x1a4))
            {
                *(float *)(param_1 + 0x1a4) = fVar1;
            }
        }
        else
        {
            *(undefined_32 *)(param_1 + 0x1a4) = 0x3f7fbe77;
        }
    }
    heatFunction(param_1);
    if (uVar6 == 0)
    {
        if (((((float)*(int *)(param_1 + 0x1998) - 400.0) * 0.001666667 < 1.0)
             || ((*(byte *)(param_1 + 0x60) & 0x20) != 0))
            || ((*(uint *)(param_1 + 100) & 0x4000000) != 0))
        {
            FUN_00477ad0(param_1, local_c, (float)fVar7, pfVar5);
        }
        *pfVar5 = *pfVar5 - *(float *)(param_1 + 0x2d8);
        *(float *)(param_1 + 0x2e8) = *(float *)(param_1 + 0x2e8) - *(float *)(param_1 + 0x2dc);
        *(float *)(param_1 + 0x2ec) = *(float *)(param_1 + 0x2ec) - *(float *)(param_1 + 0x2e0);
    }
    if (((*(uint *)(param_1 + 0x60) & 0x4000000) == 0) && (uVar6 == 0))
    {
        FUN_00477c30(param_1, &local_24, pfVar5);
    }
    else
    {
        FUN_0047a610(param_1, &local_24);
    }
    FUN_00476ea0(param_1);
    FUN_0047a3a0(param_1, &local_24);
    if (0.0 < *(float *)(param_1 + 0x308))
    {
        *(float *)(param_1 + 0x308) = *(float *)(param_1 + 0x308) - (float)_DAT_00e22a40;
    }
    if (0.0 < *(float *)(param_1 + 0x30c))
    {
        *(float *)(param_1 + 0x30c) = *(float *)(param_1 + 0x30c) - (float)_DAT_00e22a40;
    }
    uVar2 = *(uint *)(param_1 + 0x60);
    if ((uVar2 & 0x2000) == 0)
    {
        if ((((uVar2 & 0x4000) != 0) && ((uVar2 & 0x80) != 0)) && (*(float *)(param_1 + 0x30c) <= 0.0))
        {
            *(undefined_32 *)(param_1 + 0x30c) = 3.0f;
            *(uint *)(param_1 + 0x60) = uVar2 & 0xffffbfff | 0x2000;
        }
    }
    else if (*(float *)(param_1 + 0x30c) <= 0.0)
    {
        *(uint *)(param_1 + 0x60) = uVar2 & 0xffffdfff;
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x200000;
    }
    if (((uVar6 == 0) && ((*(uint *)(param_1 + 0x60) & 0x4000000) != 0)) && ((float)fVar7 < 12.0))
    {
        *(uint *)(param_1 + 0x60) = *(uint *)(param_1 + 0x60) & 0xfbffffff;
    }
    *(undefined_32 *)(param_1 + 0x1f18) = 0;
    if ((*(byte *)(param_1 + 0x60) & 0x20) != 0)
    {
        FUN_0040b150(0, 0);
    }
    FUN_00445640(5, uVar3);
    FUN_00445640(3, uVar4);
    return;
}

void FUN_0047bc40(undefined_32 param_1, undefined_8 param_2, undefined_8 param_3, undefined_8 param_4, int param_5,
                  undefined_32 param_6, undefined_32 param_7)

{
    int iVar1;
    undefined_32 uVar2;

    if (0xf < param_5)
    {
        iVar1 = FUN_00450d20(MAGIC('T', 'o', 's', 's'));
        if (iVar1 == 0)
        {
            return;
        }
        *(undefined_32 *)(iVar1 + 0x6c) = param_6;
        *(undefined_32 *)(iVar1 + 0x68) = param_6;
        *(undefined_8 *)(iVar1 + 0x70) = param_2;
        *(undefined_32 *)(iVar1 + 100) = param_7;
        *(undefined_8 *)(iVar1 + 0x71) = param_3;
        *(undefined_8 *)(iVar1 + 0x72) = param_4;
        *(char *)(iVar1 + 0x73) = (char)param_5;
        uVar2 = FUN_0042b560(*(undefined_32 *)(iVar1 + 0x78));
        *(undefined_32 *)(iVar1 + 0x74) = uVar2;
        FUN_0044bb10(iVar1 + 0x20, param_1);
        if (*(int *)(iVar1 + 0x78) != 0)
        {
            FUN_00431a50(*(int *)(iVar1 + 0x78), 2, 3, 0x10, 2);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047bcd0(undefined_32 param_1)

{
    _DAT_00e270c8 = param_1;
    return;
}

int FUN_0047bce0(int param_1)

{
    int iVar1;
    uint uVar2;
    int **ppiVar3;
    int iVar4;

    if (param_1 != 0)
    {
        iVar1 = get_self(param_1);
        if (iVar1 == 0x3064)
        {
            iVar1 = 0;
            if (0 < *(int *)(param_1 + 0x14))
            {
                ppiVar3 = *(int ***)(param_1 + 0x18);
                while (true)
                {
                    iVar4 = **ppiVar3;
                    if ((iVar4 != 0) && (*(int *)(iVar4 + 0xc) != 0))
                        break;
                    iVar1 = iVar1 + 1;
                    ppiVar3 = ppiVar3 + 1;
                    if (*(int *)(param_1 + 0x14) <= iVar1)
                    {
                        return 0;
                    }
                }
                return *(int *)(**ppiVar3 + 0xc);
            }
        }
        else
        {
            uVar2 = get_self(param_1);
            if ((uVar2 & 0x4000) != 0)
            {
                iVar4 = 0;
                iVar1 = FUN_00431780(param_1);
                if (0 < iVar1)
                {
                    do
                    {
                        iVar1 = FUN_0047bce0(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar4 * 4));
                        if (iVar1 != 0)
                        {
                            return iVar1;
                        }
                        iVar4 = iVar4 + 1;
                        iVar1 = FUN_00431780(param_1);
                    } while (iVar4 < iVar1);
                }
            }
        }
    }
    return 0;
}

void FUN_0047bd80(int param_1, uint param_2, uint param_3, float param_4)

{
    uint uVar1;
    int iVar2;
    int iVar3;
    float fVar4;

    if ((param_1 != 0) && (uVar1 = get_self(param_1), (uVar1 & 0x4000) != 0))
    {
        iVar2 = get_self(param_1);
        if (iVar2 == 0xd065)
        {
            iVar2 = FUN_00426740(param_1, 8);
            if (iVar2 != 0)
            {
                *(uint *)(iVar2 + 0x100) = ~param_2 & *(uint *)(iVar2 + 0x100) | param_3;
                fVar4 = param_4;
                if (0.0 < *(float *)(iVar2 + 0x110))
                {
                    fVar4 = -param_4;
                }
                FUN_00426880(iVar2, fVar4);
            }
            iVar2 = FUN_00426740(param_1, 9);
            if (iVar2 != 0)
            {
                *(uint *)(iVar2 + 0x100) = ~param_2 & *(uint *)(iVar2 + 0x100) | param_3;
                fVar4 = param_4;
                if (0.0 < *(float *)(iVar2 + 0x110))
                {
                    fVar4 = -param_4;
                }
                FUN_00426880(iVar2, fVar4);
            }
        }
        iVar3 = 0;
        iVar2 = FUN_00431780(param_1);
        if (0 < iVar2)
        {
            do
            {
                FUN_0047bd80(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar3 * 4), param_2, param_3, param_4);
                iVar3 = iVar3 + 1;
                iVar2 = FUN_00431780(param_1);
            } while (iVar3 < iVar2);
        }
    }
    return;
}

void FUN_0047bea0(int param_1)

{
    int *piVar1;
    int iVar2;
    int *piVar3;

    piVar3 = *(int **)(&DAT_00e25e60 + param_1 * 4);
    iVar2 = *piVar3;
    while (iVar2 != 0)
    {
        FUN_00426810(iVar2, 0x10000000);
        FUN_00426840(*piVar3, 0);
        piVar1 = piVar3 + 1;
        piVar3 = piVar3 + 1;
        iVar2 = *piVar1;
    }
    return;
}

void FUN_0047bee0(int param_1)

{
    int *piVar1;
    int iVar2;
    int *piVar3;

    piVar3 = *(int **)(&DAT_00e25e60 + param_1 * 4);
    iVar2 = *piVar3;
    while (iVar2 != 0)
    {
        FUN_00426820(iVar2, 0x10000000);
        FUN_00426840(*piVar3, 0);
        piVar1 = piVar3 + 1;
        piVar3 = piVar3 + 1;
        iVar2 = *piVar1;
    }
    return;
}

int FUN_0047bf20(int param_1)

{
    int iVar1;
    int *piVar2;

    piVar2 = *(int **)(&DAT_00e25e60 + param_1 * 4);
    iVar1 = *piVar2;
    if (iVar1 == 0)
    {
        return 0;
    }
    while (((*(uint *)(iVar1 + 0x100) & 0x10000000) != 0 && (*(float *)(iVar1 + 0x114) < *(float *)(iVar1 + 0x108))))
    {
        iVar1 = piVar2[1];
        piVar2 = piVar2 + 1;
        if (iVar1 == 0)
        {
            return iVar1;
        }
    }
    return 1;
}

void FUN_0047bf70(int param_1)

{
    byte *pbVar1;
    int iVar2;
    int iVar3;

    iVar3 = -1;
    iVar2 = *(int *)(param_1 + 8);
    if (iVar2 == 100)
    {
        iVar3 = 0;
    }
    else if (iVar2 == 0x66)
    {
        iVar3 = 0;
    }
    else if (iVar2 == 0xc9)
    {
        iVar3 = 0;
    }
    else if (iVar2 == 0xca)
    {
        iVar3 = 1;
    }
    else if (iVar2 == 0xd4)
    {
        iVar3 = 0;
    }
    else if (iVar2 == 0x13a)
    {
        iVar3 = 0;
    }
    else if (iVar2 == 0x1f5)
    {
        iVar3 = 5;
    }
    if ((iVar2 == 0x13a) || (iVar2 == 0x1f5))
    {
        pbVar1 = (byte *)(*(int *)(param_1 + 0x4c) + 0x26);
        *pbVar1 = *pbVar1 & 0xfe;
    }
    else
    {
        pbVar1 = (byte *)(*(int *)(param_1 + 0x4c) + 0x26);
        *pbVar1 = *pbVar1 | 1;
    }
    if (iVar3 != -1)
    {
        FUN_0047bee0(iVar3);
        if ((&DAT_00e26fe0)[iVar3] != 0)
        {
            FUN_00431a50((&DAT_00e26fe0)[iVar3], 2, 0xfffffffc, 0x10, 3);
        }
        *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) & 0xfffffffe;
        FUN_00450e30(param_1);
    }
    if (*(int *)(param_1 + 8) == 0x6c)
    {
        FUN_0047bee0(2);
        if (DAT_00e26fe8 != 0)
        {
            FUN_00431a50(DAT_00e26fe8, 2, 0xfffffffc, 0x10, 3);
        }
        if (*(int *)(param_1 + 0x48) != 0)
        {
            FUN_00431a50(*(int *)(param_1 + 0x48), 2, 3, 0x10, 2);
        }
        *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) & 0xfffffffe;
        FUN_00450e30(param_1);
    }
    return;
}

void FUN_0047c080(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar1 = FUN_00450b00(MAGIC('T', 'r', 'i', 'g'));
    iVar3 = 0;
    if (0 < iVar1)
    {
        while ((((iVar2 = FUN_00450b30(MAGIC('T', 'r', 'i', 'g'), iVar3),
                  iVar2 == 0 || ((*(ushort *)(iVar2 + 6) & 0x100) != 0))
                 || ((*(byte *)(iVar2 + 0xc) & 1) == 0))
                || (*(short *)(*(int *)(iVar2 + 0x4c) + 0x24) != param_1)))
        {
            iVar3 = iVar3 + 1;
            if (iVar1 <= iVar3)
            {
                return;
            }
        }
        FUN_0047bf70(iVar2);
    }
    return;
}

int FUN_0047c0f0(int param_1)

{
    int *piVar1;
    int iVar2;

    iVar2 = 0;
    piVar1 = &DAT_00e27000;
    do
    {
        if ((*piVar1 == 0) || (*piVar1 == param_1))
            break;
        piVar1 = piVar1 + 1;
        iVar2 = iVar2 + 1;
    } while ((int)piVar1 < 0xe270c8);
    if ((&DAT_00e27000)[iVar2] != 0)
    {
        return iVar2 * 0x58 + 0xe25e80;
    }
    return 0;
}

int FUN_0047c130(int param_1)

{
    int iVar1;
    int *piVar2;
    int iVar3;

    iVar3 = 0;
    piVar2 = &DAT_00e27000;
    do
    {
        if ((*piVar2 == 0) || (*piVar2 == param_1))
            break;
        piVar2 = piVar2 + 1;
        iVar3 = iVar3 + 1;
    } while ((int)piVar2 < 0xe270c8);
    if ((&DAT_00e27000)[iVar3] == 0)
    {
        iVar1 = iVar3 * 0x58 + 0xe25e80;
        FUN_00431b20(iVar1, 0xd065);
        (&DAT_00e27000)[iVar3] = param_1;
        return iVar1;
    }
    return 0;
}

uint FUN_0047c7d0(int param_1)

{
    int iVar1;
    uint uVar2;
    undefined_32 uVar3;
    int iVar4;
    undefined_8 local_80[64];
    undefined_8 local_40[48];
    undefined_8 local_10[16];

    iVar1 = FUN_00450b00(MAGIC('T', 'r', 'i', 'g'));
    iVar4 = 0;
    if (0 < iVar1)
    {
        do
        {
            uVar2 = FUN_00450b30(MAGIC('T', 'r', 'i', 'g'), iVar4);
            if (((uVar2 != 0) && ((*(ushort *)(uVar2 + 6) & 0x100) == 0)) && (*(int *)(uVar2 + 0x4c) == param_1))
            {
                return uVar2 & ~-(uint)((*(uint *)(uVar2 + 0xc) & 2) != 0);
            }
            iVar4 = iVar4 + 1;
        } while (iVar4 < iVar1);
    }
    uVar2 = FUN_00450d20(MAGIC('T', 'r', 'i', 'g'));
    if (uVar2 == 0)
    {
        return 0;
    }
    *(int *)(uVar2 + 0x4c) = param_1;
    uVar3 = *(undefined_32 *)(param_1 + 0x20);
    *(undefined_32 *)(uVar2 + 0x3c) = uVar3;
    *(int *)(uVar2 + 8) = (int)*(short *)(param_1 + 0x24);
    uVar3 = FUN_00426740(uVar3, 8);
    *(undefined_32 *)(uVar2 + 0x40) = uVar3;
    uVar3 = FUN_00426740(*(undefined_32 *)(uVar2 + 0x3c), 9);
    *(undefined_32 *)(uVar2 + 0x44) = uVar3;
    if (*(int *)(uVar2 + 0x3c) != 0)
    {
        mat_set_identity(local_80);
        uVar3 = FUN_00465500();
        FUN_004816f0(*(undefined_32 *)(uVar2 + 0x3c), local_40, uVar3, local_80);
        vec3f_copy(uVar2 + 0x30, local_10);
    }
    if (*(int *)(uVar2 + 0x40) != 0)
    {
        FUN_00426840(*(int *)(uVar2 + 0x40), 0);
        FUN_00426880(*(undefined_32 *)(uVar2 + 0x40), 0);
    }
    if (*(int *)(uVar2 + 0x44) != 0)
    {
        FUN_00426840(*(int *)(uVar2 + 0x44), 0);
        FUN_00426880(*(undefined_32 *)(uVar2 + 0x44), 0);
    }
    return uVar2;
}

void FUN_0047c920(int param_1, int param_2)

{
    float *pfVar1;
    int iVar2;
    float10 fVar3;
    float local_4c;
    float local_48;
    float local_44;
    float local_40;
    float local_3c;
    float local_30;
    float local_2c;
    float local_10;
    float local_c;
    float local_8;

    if (*(int *)(param_1 + 0x3c) != 0)
    {
        FUN_00431a50(*(int *)(param_1 + 0x3c), 2, 0xfffffffc, 0x10, 3);
    }
    *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 2;
    iVar2 = FUN_0047bf20(2);
    if (iVar2 == 0)
    {
        FUN_0047c080(0x6c);
    }
    *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 1;
    mat_set_identity(&local_40);
    pfVar1 = *(float **)(param_1 + 0x4c);
    local_c = pfVar1[1];
    local_10 = *pfVar1 - -8.0;
    local_4c = *(float *)(param_2 + 0x50) - *(float *)(param_2 + 0x16c);
    local_48 = *(float *)(param_2 + 0x54) - *(float *)(param_2 + 0x170);
    local_44 = *(float *)(param_2 + 0x58) - *(float *)(param_2 + 0x174);
    local_8 = pfVar1[2] - 24.0;
    fVar3 = (float10)vec2f_normalize(&local_4c);
    if ((float10)0.001 < fVar3)
    {
        local_3c = -local_4c;
        local_30 = local_4c;
        local_2c = local_48;
        local_40 = local_48;
    }
    FUN_00431640(DAT_00e26fe8, &local_40);
    if (DAT_00e26fe8 != 0)
    {
        FUN_00431a50(DAT_00e26fe8, 2, 3, 0x10, 2);
    }
    iVar2 = FUN_0047c0f0(*(undefined_32 *)(param_1 + 0x4c));
    *(int *)(param_1 + 0x48) = iVar2;
    if (iVar2 != 0)
    {
        FUN_00431a50(iVar2, 2, 0xfffffffc, 0x10, 3);
        FUN_00431640(iVar2, &local_40);
        *(undefined_8 **)(iVar2 + 0x18) = &DAT_00e26fd0;
    }
    FUN_0047bea0(2);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047ca90(int param_1, int param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    undefined_32 *puVar7;
    int iVar8;
    undefined_32 uVar9;
    int iVar10;
    float10 fVar11;
    undefined_32 uVar12;
    undefined_32 uVar13;
    undefined_32 uVar14;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_8 local_40[48];
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;

    local_50 = MAGIC('H', 'i', 't', 't');
    local_4c = 0x54323031;
    iVar10 = param_1;
    if (*(int *)(param_1 + 8) == 0xc9)
    {
        fVar11 = (float10)decelerator(0x41c80000, (float)_DAT_00e22a40);
        local_48 = 100.0f;
        *(float *)(param_2 + 0x1a4) = (float)(fVar11 * (float10) * (float *)(param_2 + 0x1a4));
        FUN_00450c00(param_2, &local_50);
        iVar10 = 0;
    }
    if (*(int *)(param_1 + 8) == 0xca)
    {
        fVar11 = (float10)decelerator(2.5f, (float)_DAT_00e22a40);
        local_48 = 0x44160000;
        *(float *)(param_2 + 0x1a4) = (float)(fVar11 * (float10) * (float *)(param_2 + 0x1a4));
        FUN_00450c00(param_2, &local_50);
        iVar10 = 1;
    }
    if (*(int *)(param_1 + 8) == 100)
    {
        iVar10 = 0;
    }
    if (*(int *)(param_1 + 8) == 0x66)
    {
        fVar11 = (float10)decelerator(2.5f, (float)_DAT_00e22a40);
        local_48 = 300.0f;
        *(float *)(param_2 + 0x1a4) = (float)(fVar11 * (float10) * (float *)(param_2 + 0x1a4));
        FUN_00450c00(param_2, &local_50);
        iVar10 = 0;
    }
    if (*(int *)(param_1 + 8) == 0xd4)
    {
        iVar10 = 0;
    }
    if (*(int *)(param_1 + 0x3c) != 0)
    {
        FUN_00431a50(*(int *)(param_1 + 0x3c), 2, 0xfffffffc, 0x10, 3);
    }
    *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 3;
    FUN_00431a50(*(undefined_32 *)(param_1 + 0x3c), 0, 0xfffffffd, 0x10, 3);
    if (*(int *)(param_1 + 8) == 0x66)
    {
        if ((*(byte *)(param_2 + 0x60) & 0x80) != 0)
        {
            mat_set_diagonal(local_40, 0x41000000, 0x41000000, 0x41000000);
            puVar7 = *(undefined_32 **)(param_1 + 0x4c);
            local_10 = *puVar7;
            local_c = puVar7[1];
            local_8 = puVar7[2];
            FUN_00431640((&DAT_00e26fe0)[iVar10], local_40);
            goto LAB_0047cc59;
        }
        puVar7 = *(undefined_32 **)(param_1 + 0x4c);
        uVar9 = puVar7[2];
        uVar14 = puVar7[1];
        uVar13 = *puVar7;
        uVar12 = (&DAT_00e26fe0)[iVar10];
    }
    else
    {
        puVar7 = *(undefined_32 **)(param_1 + 0x4c);
        uVar9 = puVar7[2];
        uVar14 = puVar7[1];
        uVar13 = *puVar7;
        uVar12 = (&DAT_00e26fe0)[iVar10];
    }
    FUN_00431620(uVar12, uVar13, uVar14, uVar9);
LAB_0047cc59:
    if ((&DAT_00e26fe0)[iVar10] != 0)
    {
        FUN_00431a50((&DAT_00e26fe0)[iVar10], 2, 3, 0x10, 2);
    }
    FUN_0047bea0(iVar10);
    iVar8 = rand();
    FUN_00426d10(0x39, 6, (float)iVar8 * 4.656613e-10 * 0.15 - -0.25, 1.0f, (float *)(param_2 + 0x50), 0, 0, 10.0f,
                 500.0f);
    fVar1 = *(float *)(param_2 + 0x50);
    fVar2 = *(float *)(param_2 + 0x54);
    fVar3 = *(float *)(param_2 + 0x58);
    fVar4 = *(float *)(param_2 + 0x16c);
    fVar5 = *(float *)(param_2 + 0x170);
    fVar6 = *(float *)(param_2 + 0x174);
    puVar7 = *(undefined_32 **)(param_1 + 0x4c);
    *(undefined_32 *)(param_1 + 0x24) = *puVar7;
    *(undefined_32 *)(param_1 + 0x28) = puVar7[1];
    *(undefined_32 *)(param_1 + 0x2c) = puVar7[2];
    *(float *)(param_1 + 0x18) = (fVar1 - fVar4) * (0.8 / (float)_DAT_00e22a40);
    *(float *)(param_1 + 0x1c) = (fVar2 - fVar5) * (0.8 / (float)_DAT_00e22a40);
    *(float *)(param_1 + 0x20) = (fVar3 - fVar6) * (0.8 / (float)_DAT_00e22a40);
    if ((*(int *)(param_1 + 8) == 0x66) && ((*(byte *)(param_2 + 0x60) & 0x80) != 0))
    {
        *(undefined_32 *)(param_1 + 0x50) = 0;
    }
    else
    {
        *(int *)(param_1 + 0x50) = param_2 + 0x20;
    }
    uVar9 = FUN_0047bce0((&DAT_00e26fe0)[iVar10]);
    *(undefined_32 *)(param_1 + 0x54) = uVar9;
    *(undefined_32 *)(param_1 + 0x10) = 0;
    return;
}

void FUN_0047cd90(int param_1, int param_2)

{
    ushort *puVar1;
    int iVar2;
    undefined_32 uVar3;
    undefined_8 local_40[64];

    iVar2 = FUN_0047bf20(param_2);
    if (iVar2 == 0)
    {
        FUN_00450e30(param_1);
        return;
    }
    *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 1;
    puVar1 = (ushort *)(*(int *)(param_1 + 0x4c) + 0x26);
    *puVar1 = *puVar1 | 1;
    FUN_004316a0(*(undefined_32 *)(*(int *)(param_1 + 0x4c) + 0x20), local_40);
    FUN_00431640((&DAT_00e26fe0)[param_2], local_40);
    if ((&DAT_00e26fe0)[param_2] != 0)
    {
        FUN_00431a50((&DAT_00e26fe0)[param_2], 2, 3, 0x10, 2);
    }
    FUN_0047bea0(param_2);
    *(undefined_32 *)(param_1 + 0x50) = 0;
    if (param_2 == 0)
    {
        uVar3 = FUN_0047bce0(DAT_00e26fe0);
        *(undefined_32 *)(param_1 + 0x54) = uVar3;
        *(undefined_32 *)(param_1 + 0x10) = 0;
        return;
    }
    *(undefined_32 *)(param_1 + 0x54) = 0;
    *(undefined_32 *)(param_1 + 0x10) = 0;
    return;
}

void FUN_0047ce60(int param_1, undefined_32 param_2, byte param_3)

{
    ushort *puVar1;
    uint *puVar2;
    int iVar3;
    int iVar4;
    undefined_32 local_114;
    undefined_32 local_110;
    undefined_32 local_10c;
    int local_104;
    undefined_8 local_100[256];

    if ((param_3 & 1) == 0)
    {
        FUN_0047e830(*(undefined_32 *)(param_1 + 0x4c), param_2);
    }
    iVar3 = *(int *)(param_1 + 0x4c);
    *(undefined_32 *)(param_1 + 0x14) = 0;
    iVar4 = (int)*(short *)(iVar3 + 0x24);
    if (iVar4 < 0xcb)
    {
        if (iVar4 < 0xc9)
        {
            switch (iVar4)
            {
            case 100:
            case 0x66:
                goto switchD_0047cec0_caseD_64;
            case 0x65:
                *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 1;
                if ((*(int *)(param_1 + 0x40) != 0)
                    && (puVar2 = (uint *)(*(int *)(param_1 + 0x40) + 0x100), *puVar2 = *puVar2 & 0xffffffef,
                        3.0 < *(float *)(param_1 + 0x10)))
                {
                    *(undefined_32 *)(param_1 + 0x10) = 0;
                    iVar3 = *(int *)(param_1 + 0x40);
                    if (0.0 < *(float *)(iVar3 + 0x110))
                    {
                        FUN_00426880(iVar3, -20.0f);
                        return;
                    }
                    FUN_00426880(iVar3, 20.0f);
                    return;
                }
                break;
            case 0x67:
                if (iVar3 != 0)
                {
                    if (*(int *)(iVar3 + 0x20) != 0)
                    {
                        FUN_00431a50(*(int *)(iVar3 + 0x20), 2, 0xfffffffc, 0x10, 3);
                    }
                    FUN_00431a50(*(undefined_32 *)(*(int *)(param_1 + 0x4c) + 0x20), 0, 0xfffffffd, 0x10, 3);
                    goto LAB_0047d138;
                }
                break;
            case 0x68:
                local_104 = rand();
                if (0.5 <= (float)local_104 * 4.656613e-10)
                {
                    FUN_004741d0(param_2, 2);
                    return;
                }
                FUN_004741d0(param_2, 1);
                return;
            case 0x69:
                *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 1;
                *(ushort *)(iVar3 + 0x26) = *(ushort *)(iVar3 + 0x26) | 1;
                FUN_0047bd80(*(undefined_32 *)(*(int *)(param_1 + 0x4c) + 0x20), 0, 0x10000000, 0x3f19999a);
                goto LAB_0047d25c;
            case 0x6a:
            switchD_0047cec0_caseD_6a:
                FUN_0047e450(param_2);
                return;
            case 0x6c:
                FUN_0047c920(param_1, param_2);
                return;
            }
            return;
        }
    }
    else
    {
        if (0xd4 < iVar4)
        {
            if (iVar4 < 0x131)
            {
                if (iVar4 != 0x130)
                {
                    if (iVar4 != 0xd5)
                    {
                        return;
                    }
                    if (iVar3 == 0)
                    {
                        return;
                    }
                    *(ushort *)(iVar3 + 0x26) = *(ushort *)(iVar3 + 0x26) | 1;
                    local_114 = 0x5368616b;
                    local_110 = 0.25f;
                    local_10c = 0x41000000;
                    FUN_00450c50(MAGIC('c', 'M', 'a', 'n'), &local_114);
                    *(undefined_32 *)(param_1 + 0x54) = 0;
                    *(undefined_32 *)(param_1 + 0x50) = 0;
                    *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) & 0xfffffffb | 1;
                    *(undefined_32 *)(param_1 + 0x10) = 0;
                    return;
                }
                if (*(int *)(param_1 + 0x44) != 0)
                {
                    FUN_00426880(*(int *)(param_1 + 0x44), 1.0f);
                }
                if (*(int *)(param_1 + 0x40) != 0)
                {
                    FUN_00426880(*(int *)(param_1 + 0x40), 1.0f);
                }
            LAB_0047d138:
                puVar1 = (ushort *)(*(int *)(param_1 + 0x4c) + 0x26);
                *puVar1 = *puVar1 | 1;
                *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) & 0xfffffffe;
                FUN_00450e30(param_1);
                return;
            }
            if (0x138 < iVar4)
            {
                if (iVar4 == 0x13a)
                {
                    FUN_0047cd90(param_1, 0);
                    return;
                }
                if (iVar4 != 0x1f5)
                {
                    if (iVar4 != 900)
                    {
                        return;
                    }
                    FUN_0044fce0(local_100, 3.0f);
                    FUN_00473f40(param_2, 0);
                    return;
                }
                FUN_0047cd90(param_1, 5);
                return;
            }
            if (iVar4 != 0x138)
            {
                if (iVar4 == 0x132)
                {
                    if (iVar3 == 0)
                    {
                        return;
                    }
                    *(ushort *)(iVar3 + 0x26) = *(ushort *)(iVar3 + 0x26) | 1;
                    local_114 = 0x5368616b;
                    local_110 = 0.25f;
                    local_10c = 0x41000000;
                    FUN_00450c50(MAGIC('c', 'M', 'a', 'n'), &local_114);
                    *(undefined_32 *)(param_1 + 0x54) = 0;
                    *(undefined_32 *)(param_1 + 0x50) = 0;
                    *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) & 0xfffffffb | 1;
                    *(undefined_32 *)(param_1 + 0x10) = 0;
                    return;
                }
                if (iVar4 != 0x133)
                {
                    return;
                }
                *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 1;
                if (*(int *)(iVar3 + 0x20) == 0)
                {
                    return;
                }
                if (*(float *)(param_1 + 0x10) <= 3.0)
                {
                    return;
                }
                *(undefined_32 *)(param_1 + 0x10) = 0;
                FUN_0047bd80(*(undefined_32 *)(iVar3 + 0x20), 0x10, 0, 1.0f);
                return;
            }
            *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 1;
            *(ushort *)(iVar3 + 0x26) = *(ushort *)(iVar3 + 0x26) | 1;
            FUN_0047bd80(*(undefined_32 *)(*(int *)(param_1 + 0x4c) + 0x20), 0, 0x10000000, 0x3f19999a);
        LAB_0047d25c:
            local_10c = 4.0f;
            local_110 = 0.05f;
            local_114 = 0x5368616b;
            FUN_00450c50(MAGIC('c', 'M', 'a', 'n'), &local_114);
            *(undefined_32 *)(param_1 + 0x10) = 0;
            return;
        }
        if (iVar4 != 0xd4)
        {
            if (iVar4 != 0xcb)
            {
                return;
            }
            if ((*(uint *)(param_1 + 0xc) & 1) == 0)
            {
                *(undefined_32 *)(param_1 + 0x10) = 100.0f;
            }
            *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) | 1;
            if (*(float *)(param_1 + 0x10) <= 3.0)
            {
                return;
            }
            *(undefined_32 *)(param_1 + 0x10) = 0;
            FUN_00426c80(0x30, 7, 0.25f, 1.0f, 0);
            goto switchD_0047cec0_caseD_6a;
        }
    }
switchD_0047cec0_caseD_64:
    FUN_0047ca90(param_1, param_2);
    return;
}

int FUN_0047d310(undefined_32 param_1, uint param_2, int param_3)

{
    int iVar1;

    iVar1 = FUN_0047c130(param_1);
    if (iVar1 != 0)
    {
        *(undefined_32 *)(iVar1 + 0x14) = 1;
        *(undefined_8 **)(iVar1 + 0x18) = &DAT_00e26fc0 + param_3 * 4;
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = iVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        FUN_00431a50(iVar1, 2, 0xf, 0x10, 3);
        FUN_00431a50(iVar1, 2, param_2 & 0xfffffff0, 0x10, 2);
    }
    return iVar1;
}

void FUN_0047d380(float *param_1, undefined_32 param_2)

{
    float fVar1;
    int iVar2;
    int iVar3;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    float local_30;
    float local_2c;
    float local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    float local_10;
    float local_c;
    float local_8;
    undefined_32 local_4;

    if (param_1 != NULL)
    {
        do
        {
            FUN_0047e760(param_1);
            if ((*(short *)(param_1 + 9) == 0x6c) && (iVar2 = FUN_0047d310(param_1, param_2, 3), iVar2 != 0))
            {
                FUN_00431620(iVar2, *param_1 - -8.0, param_1[1], param_1[2] - 24.0);
            }
            if (*(short *)(param_1 + 9) == 100)
            {
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 2;
            }
            if (*(short *)(param_1 + 9) == 0x69)
            {
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 0x20;
                FUN_0047bd80(param_1[8], 0x10000010, 0, 0x3f19999a);
            }
            if (*(short *)(param_1 + 9) == 0x68)
            {
                DAT_0050cb48 = param_1;
            }
            if (*(short *)(param_1 + 9) == 0xc9)
            {
                FUN_00431a50(param_1[8], 0, 0xfffffffd, 0x10, 3);
            }
            if (*(short *)(param_1 + 9) == 0xca)
            {
                FUN_00431a50(param_1[8], 0, 0xfffffffb, 0x10, 3);
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 2;
                if (DAT_0050cb4c == 1)
                {
                    DAT_0050cb48 = param_1;
                }
            }
            if (*(short *)(param_1 + 9) == 0xcb)
            {
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 0x20;
            }
            if (*(short *)(param_1 + 9) == 0xd0)
            {
                iVar2 = FUN_0047d310(param_1, param_2, 2);
                iVar3 = FUN_0047c7d0(param_1);
                *(int *)(iVar3 + 0x48) = iVar2;
                *(uint *)(iVar3 + 0xc) = *(uint *)(iVar3 + 0xc) | 1;
                if (*(int *)(iVar3 + 0x44) != 0)
                {
                    FUN_00426880(*(int *)(iVar3 + 0x44), 1.0f);
                }
                if (*(int *)(iVar3 + 0x40) != 0)
                {
                    FUN_00426880(*(int *)(iVar3 + 0x40), 1.0f);
                }
                if ((iVar2 != 0) && (param_1[8] != 0.0))
                {
                    FUN_004316a0(*(undefined_32 *)(*(int *)(iVar3 + 0x4c) + 0x20), &local_40);
                    if (*(int *)(iVar3 + 0x48) != 0)
                    {
                        FUN_00431a50(*(int *)(iVar3 + 0x48), 2, 3, 0x10, 2);
                        FUN_00431640(*(undefined_32 *)(iVar3 + 0x48), &local_40);
                    }
                }
            }
            if (*(short *)(param_1 + 9) == 0xd4)
            {
                FUN_00431a50(param_1[8], 0, 0xfffffffb, 0x10, 3);
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 2;
            }
            if (*(short *)(param_1 + 9) == 0xd3)
            {
                iVar2 = FUN_0047d310(param_1, param_2, 2);
                if (iVar2 != 0)
                {
                    local_3c = 0;
                    local_38 = 0;
                    local_34 = 0;
                    local_24 = 0;
                    local_20 = 0;
                    local_1c = 0;
                    local_18 = 1.0f;
                    local_14 = 0;
                    local_10 = 0.0;
                    local_40 = 1.0f;
                    local_c = 0.0;
                    local_8 = 0.0;
                    local_4 = 1.0f;
                    local_30 = param_1[3];
                    local_2c = param_1[4];
                    local_28 = param_1[5];
                    rdVector_Cross3(&local_40, &local_30, &local_20);
                    rdVector_Cross3(&local_20, &local_40, &local_30);
                    rdVector_Normalize3(&local_40);
                    rdVector_Normalize3(&local_30);
                    local_10 = *param_1;
                    local_c = param_1[1];
                    local_8 = param_1[2] - param_1[7] * 0.5;
                    FUN_00431640(iVar2, &local_40);
                    if (param_1[8] != 0.0)
                    {
                        FUN_00431a50(param_1[8], 2, 0xfffffffc, 0x10, 3);
                    }
                }
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 1;
            }
            if (*(short *)(param_1 + 9) == 0xd5)
            {
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 0x24;
            }
            if (*(short *)(param_1 + 9) == 0x132)
            {
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 0x24;
                iVar2 = rand();
                if (0.5 < (float)iVar2 * 4.656613e-10)
                {
                    *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 8;
                }
            }
            if (*(short *)(param_1 + 9) == 0x133)
            {
                FUN_0047bd80(param_1[8], 0x10, 0, 1.0f);
            }
            if (*(short *)(param_1 + 9) == 0x134)
            {
                iVar2 = FUN_0047d310(param_1, param_2, 0);
                iVar3 = FUN_0047c7d0(param_1);
                *(int *)(iVar3 + 0x48) = iVar2;
                *(uint *)(iVar3 + 0xc) = *(uint *)(iVar3 + 0xc) | 1;
                if (*(int *)(iVar3 + 0x44) != 0)
                {
                    FUN_00426880(*(int *)(iVar3 + 0x44), 1.0f);
                }
                if (*(int *)(iVar3 + 0x40) != 0)
                {
                    FUN_00426880(*(int *)(iVar3 + 0x40), 1.0f);
                }
                if ((iVar2 != 0) && (param_1[8] != 0.0))
                {
                    FUN_004316a0(*(undefined_32 *)(*(int *)(iVar3 + 0x4c) + 0x20), &local_40);
                    if (*(int *)(iVar3 + 0x48) != 0)
                    {
                        FUN_00431a50(*(int *)(iVar3 + 0x48), 2, 3, 0x10, 2);
                        FUN_00431640(*(undefined_32 *)(iVar3 + 0x48), &local_40);
                    }
                }
            }
            if (*(short *)(param_1 + 9) == 0x136)
            {
                iVar2 = FUN_0047d310(param_1, param_2, 0);
                if ((iVar2 != 0) && (param_1[8] != 0.0))
                {
                    FUN_004316a0(param_1[8], &local_40);
                    FUN_00431a50(iVar2, 2, 3, 0x10, 2);
                    FUN_00431640(iVar2, &local_40);
                }
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 1;
            }
            if (*(short *)(param_1 + 9) == 0x138)
            {
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 0x20;
                FUN_0047bd80(param_1[8], 0x10000010, 0, 1.0f);
            }
            if (*(short *)(param_1 + 9) == 0x13a)
            {
                fVar1 = param_1[8];
                *(byte *)((int)param_1 + 0x26) = *(byte *)((int)param_1 + 0x26) | 0x20;
                if ((fVar1 != 0.0) && (fVar1 != 0.0))
                {
                    FUN_00431a50(fVar1, 2, 0xfffffffc, 0x10, 3);
                }
            }
            if ((*(short *)(param_1 + 9) == 0x1f5) && (param_1[8] != 0.0))
            {
                FUN_00431a50(param_1[8], 2, 0xfffffffc, 0x10, 3);
            }
            param_1 = (float *)param_1[10];
        } while (param_1 != NULL);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047d890(void)

{
    float fVar1;
    float fVar2;
    float local_14;
    float local_c;
    float local_8;
    float local_4;

    if (DAT_0050cb40 == 1)
    {
        local_14 = -8500.0;
        local_4 = 3500.0;
        local_8 = 2500.0;
        local_c = -5500.0;
    }
    else if (DAT_0050cb40 == 2)
    {
        local_14 = -9300.0;
        local_4 = 9000.0;
        local_8 = 7500.0;
        local_c = -7500.0;
    }
    fVar1 = (local_4 - local_14) * 0.125;
    fVar2 = (local_8 - local_c) * 0.3333333;
    _DAT_00e270d0 = local_c;
    _DAT_00e270d4 = local_c + fVar2;
    _DAT_00e270dc = local_8;
    _DAT_00e27100 = local_14;
    _DAT_00e270d8 = local_8 - fVar2;
    _DAT_00e27104 = local_14 + fVar1;
    _DAT_00e27108 = local_14 - fVar1 * -2.0;
    _DAT_00e2710c = local_14 - fVar1 * -3.0;
    _DAT_00e27110 = local_14 - fVar1 * -4.0;
    _DAT_00e27114 = local_14 - fVar1 * -5.0;
    _DAT_00e27118 = local_14 - fVar1 * -6.0;
    _DAT_00e2711c = local_4 - fVar1;
    _DAT_00e27120 = local_4;
    _DAT_00e27124 = fVar2 * 0.25;
    _DAT_00e27128 = fVar1 * 0.25;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

uint FUN_0047da10(int param_1)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;

    if (_DAT_00e27104 <= *(float *)(param_1 + 0x20))
    {
        if (*(float *)(param_1 + 0x20) < _DAT_00e27108)
        {
            uVar2 = 0xfe0000;
            goto LAB_0047dad2;
        }
        if (*(float *)(param_1 + 0x20) < _DAT_00e2710c)
        {
            uVar2 = 0xfc0000;
            goto LAB_0047dad2;
        }
        if (*(float *)(param_1 + 0x20) < _DAT_00e27110)
        {
            uVar2 = 0xf80000;
            goto LAB_0047dad2;
        }
        if (*(float *)(param_1 + 0x20) < _DAT_00e27114)
        {
            uVar2 = 0xf00000;
            goto LAB_0047dad2;
        }
        if (*(float *)(param_1 + 0x20) < _DAT_00e27118)
        {
            uVar2 = 0xe00000;
            goto LAB_0047dad2;
        }
        if (*(float *)(param_1 + 0x20) < _DAT_00e2711c)
        {
            uVar2 = 0xc00000;
            goto LAB_0047dad2;
        }
        if (*(float *)(param_1 + 0x20) < _DAT_00e27120)
        {
            uVar2 = 0x800000;
            goto LAB_0047dad2;
        }
    }
    else
    {
        uVar2 = 0xff0000;
    LAB_0047dad2:
        if (_DAT_00e27100 <= *(float *)(param_1 + 0x2c))
        {
            if (_DAT_00e27104 <= *(float *)(param_1 + 0x2c))
            {
                if (_DAT_00e27108 <= *(float *)(param_1 + 0x2c))
                {
                    if (_DAT_00e2710c <= *(float *)(param_1 + 0x2c))
                    {
                        if (_DAT_00e27110 <= *(float *)(param_1 + 0x2c))
                        {
                            if (_DAT_00e27114 <= *(float *)(param_1 + 0x2c))
                            {
                                if (_DAT_00e27118 <= *(float *)(param_1 + 0x2c))
                                {
                                    if (*(float *)(param_1 + 0x2c) < _DAT_00e2711c)
                                    {
                                        uVar2 = uVar2 & 0x7f0000;
                                    }
                                }
                                else
                                {
                                    uVar2 = uVar2 & 0x3f0000;
                                }
                            }
                            else
                            {
                                uVar2 = uVar2 & 0x1f0000;
                            }
                        }
                        else
                        {
                            uVar2 = uVar2 & 0xf0000;
                        }
                    }
                    else
                    {
                        uVar2 = uVar2 & 0x70000;
                    }
                }
                else
                {
                    uVar2 = uVar2 & 0x30000;
                }
            }
            else
            {
                uVar2 = uVar2 & 0x10000;
            }
            goto LAB_0047db92;
        }
    }
    uVar2 = 0;
LAB_0047db92:
    uVar3 = uVar2 << 8;
    uVar1 = (int)uVar2 >> 8;
    if (uVar2 != 0)
    {
        if ((*(float *)(param_1 + 0x28) < _DAT_00e270d0) || (_DAT_00e270d4 < *(float *)(param_1 + 0x1c)))
        {
            uVar3 = 0;
        }
        if ((*(float *)(param_1 + 0x28) < _DAT_00e270d4) || (_DAT_00e270d8 < *(float *)(param_1 + 0x1c)))
        {
            uVar2 = 0;
        }
        if ((*(float *)(param_1 + 0x28) < _DAT_00e270d8) || (_DAT_00e270dc < *(float *)(param_1 + 0x1c)))
        {
            uVar1 = 0;
        }
    }
    uVar3 = uVar1 | uVar2 | uVar3;
    FUN_00431a50(param_1, 0, 0xff, 0x10, 3);
    FUN_00431a50(param_1, 0, uVar3, 0x10, 2);
    return uVar3;
}

uint __thiscall FUN_0047dc40(int param_1_00, uint param_1)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    undefined_32 uVar5;
    uint uVar6;
    int iVar7;
    int local_4;

    iVar1 = param_1;
    uVar2 = get_self(param_1);
    iVar3 = DAT_0050cb50;
    iVar7 = 0;
    param_1 = 0;
    if (uVar2 == 0x3064)
    {
        if ((DAT_0050cb40 != 0) && (DAT_0050cb50 == 0))
        {
            param_1 = FUN_0047da10(iVar1);
        }
        iVar3 = FUN_00431780(iVar1);
        iVar7 = 0;
        if (0 < iVar3)
        {
            do
            {
                iVar4 = FUN_00431850(iVar1, iVar7);
                if (iVar4 != 0)
                {
                    iVar4 = FUN_004318b0(iVar4);
                    if ((iVar4 != 0) && (*(int *)(iVar4 + 0x3c) != 0))
                    {
                        uVar5 = FUN_00431b00(iVar1, 2);
                        FUN_0047d380(*(undefined_32 *)(iVar4 + 0x3c), uVar5);
                    }
                }
                iVar7 = iVar7 + 1;
            } while (iVar7 < iVar3);
            return param_1;
        }
    }
    else if ((uVar2 & 0x4000) != 0)
    {
        local_4 = param_1_00;
        if ((uVar2 & 0x8000) != 0)
        {
            DAT_0050cb50 = 1;
            local_4 = iVar3;
        }
        iVar3 = FUN_00431780(iVar1);
        if (0 < iVar3)
        {
            do
            {
                iVar4 = *(int *)(*(int *)(iVar1 + 0x18) + iVar7 * 4);
                if (iVar4 != 0)
                {
                    uVar6 = FUN_0047dc40(iVar4);
                    param_1 = param_1 | uVar6;
                }
                iVar7 = iVar7 + 1;
            } while (iVar7 < iVar3);
        }
        if ((DAT_0050cb40 != 0) && (DAT_0050cb50 == 0))
        {
            FUN_00431a50(iVar1, 0, 0xff, 0x10, 3);
            FUN_00431a50(iVar1, 0, param_1, 0x10, 2);
        }
        if ((uVar2 & 0x8000) != 0)
        {
            DAT_0050cb50 = local_4;
        }
    }
    return param_1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_8 *FUN_0047dd90(void)

{
    FUN_00431b20(&DAT_00e25de0, 0x5064);
    DAT_00e25df4 = 0;
    _DAT_00e25df8 = &DAT_00e259c0;
    return &DAT_00e25de0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0047ddc0(int param_1, undefined_32 param_2, int param_3)

{
    int *piVar1;
    int iVar2;
    undefined_32 uVar3;
    undefined_32 *puVar4;
    undefined_8 local_40[64];

    DAT_0050cb48 = 0;
    puVar4 = &DAT_00e27000;
    MEMSET(iVar2, puVar4, 0, 0x32)
    _DAT_0050cb44 = 0;
    uVar3 = 0;
    DAT_0050cb4c = param_1;
    if (DAT_0050cb40 != 0)
    {
        FUN_0047d890();
    }
    if (param_1 == 1)
    {
        uVar3 = FUN_0047dd90();
        piVar1 = (int *)models_load(0xfe);
        _DAT_00e25e60 = FUN_00448bd0(piVar1);
        FUN_0047bee0(0);
        DAT_00e26fe0 = *piVar1;
        if (DAT_00e26fe0 != 0)
        {
            FUN_00431a50(DAT_00e26fe0, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        piVar1 = (int *)models_load(0xfb);
        _DAT_00e25e64 = FUN_00448bd0(piVar1);
        FUN_0047bee0(1);
        _DAT_00e26fe4 = *piVar1;
        if (_DAT_00e26fe4 != 0)
        {
            FUN_00431a50(_DAT_00e26fe4, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        piVar1 = (int *)models_load(0xc4);
        _DAT_00e25e68 = FUN_00448bd0(piVar1);
        FUN_0047bee0(2);
        DAT_00e26fe8 = *piVar1;
        if (DAT_00e26fe8 != 0)
        {
            FUN_00431a50(DAT_00e26fe8, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        piVar1 = (int *)models_load(0xc5);
        _DAT_00e25e6c = FUN_00448bd0(piVar1);
        _DAT_00e26fcc = *(int *)(*(int *)(*piVar1 + 0x18) + 4);
        _DAT_00e26fd0 = **(undefined_32 **)(*piVar1 + 0x18);
        _DAT_00e26fec = _DAT_00e26fcc;
        _DAT_00e26ff0 = _DAT_00e26fd0;
        if (param_3 != 0)
        {
            FUN_0047dc40(param_3);
        }
    }
    if (param_1 == 2)
    {
        uVar3 = FUN_0047dd90();
        piVar1 = (int *)models_load(0x9b);
        _DAT_00e25e60 = FUN_00448bd0(piVar1);
        _DAT_00e26fc0 = *piVar1;
        DAT_00e26fe0 = _DAT_00e26fc0;
        piVar1 = (int *)models_load(0x132);
        _DAT_00e25e64 = FUN_00448bd0(piVar1);
        FUN_0047bee0(1);
        _DAT_00e26fe4 = *piVar1;
        if (_DAT_00e26fe4 != 0)
        {
            FUN_00431a50(_DAT_00e26fe4, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        if (param_3 != 0)
        {
            FUN_0047dc40(param_3);
        }
    }
    if (param_1 == 3)
    {
        uVar3 = FUN_0047dd90();
        if (param_3 != 0)
        {
            FUN_0047dc40(param_3);
        }
    }
    if (param_1 == 4)
    {
        uVar3 = FUN_0047dd90();
        piVar1 = (int *)models_load(0x128);
        _DAT_00e25e60 = FUN_00448bd0(piVar1);
        FUN_0047bee0(0);
        DAT_00e26fe0 = *piVar1;
        if (DAT_00e26fe0 != 0)
        {
            FUN_00431a50(DAT_00e26fe0, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        piVar1 = (int *)models_load(0x127);
        _DAT_00e25e64 = FUN_00448bd0(piVar1);
        FUN_0047bee0(1);
        _DAT_00e26fe4 = *piVar1;
        if (_DAT_00e26fe4 != 0)
        {
            FUN_00431a50(_DAT_00e26fe4, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        piVar1 = (int *)models_load(0x132);
        _DAT_00e25e6c = FUN_00448bd0(piVar1);
        FUN_0047bee0(3);
        _DAT_00e26fec = *piVar1;
        if (_DAT_00e26fec != 0)
        {
            FUN_00431a50(_DAT_00e26fec, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        piVar1 = (int *)models_load(0x13d);
        _DAT_00e25e68 = FUN_00448bd0(piVar1);
        _DAT_00e26fc8 = *piVar1;
        DAT_00e26fe8 = _DAT_00e26fc8;
        piVar1 = (int *)models_load(0x137);
        _DAT_00e25e74 = FUN_00448bd0(piVar1);
        FUN_0047bee0(5);
        _DAT_00e26ff4 = *piVar1;
        if (_DAT_00e26ff4 != 0)
        {
            FUN_00431a50(_DAT_00e26ff4, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        if (param_3 != 0)
        {
            FUN_0047dc40(param_3);
        }
    }
    if (param_1 == 5)
    {
        uVar3 = FUN_0047dd90();
        piVar1 = (int *)models_load(0x138);
        _DAT_00e25e60 = FUN_00448bd0(piVar1);
        _DAT_00e26fc0 = *piVar1;
        DAT_00e26fe0 = _DAT_00e26fc0;
        piVar1 = (int *)models_load(0x13d);
        _DAT_00e25e68 = FUN_00448bd0(piVar1);
        _DAT_00e26fc8 = *piVar1;
        DAT_00e26fe8 = _DAT_00e26fc8;
        mat_set_diagonal(local_40, 0x4019999a, 0x4019999a, 0x4019999a);
        FUN_00431640(DAT_00e26fe8, local_40);
        if (param_3 != 0)
        {
            FUN_0047dc40(param_3);
        }
    }
    if (param_1 == 6)
    {
        uVar3 = FUN_0047dd90();
        piVar1 = (int *)models_load(0x133);
        _DAT_00e25e60 = FUN_00448bd0(piVar1);
        FUN_0047bee0(0);
        DAT_00e26fe0 = *piVar1;
        if (DAT_00e26fe0 != 0)
        {
            FUN_00431a50(DAT_00e26fe0, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        if (param_3 != 0)
        {
            FUN_0047dc40(param_3);
        }
    }
    if (param_1 == 7)
    {
        uVar3 = FUN_0047dd90();
        piVar1 = (int *)models_load(0x135);
        _DAT_00e25e60 = FUN_00448bd0(piVar1);
        FUN_0047bee0(0);
        DAT_00e26fe0 = *piVar1;
        if (DAT_00e26fe0 != 0)
        {
            FUN_00431a50(DAT_00e26fe0, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        if (param_3 != 0)
        {
            FUN_0047dc40(param_3);
        }
    }
    if (param_1 == 0)
    {
        uVar3 = FUN_0047dd90();
        piVar1 = (int *)models_load(0xfc);
        _DAT_00e25e60 = FUN_00448bd0(piVar1);
        FUN_0047bee0(0);
        DAT_00e26fe0 = *piVar1;
        if (DAT_00e26fe0 != 0)
        {
            FUN_00431a50(DAT_00e26fe0, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        piVar1 = (int *)models_load(0xfb);
        _DAT_00e25e64 = FUN_00448bd0(piVar1);
        FUN_0047bee0(1);
        _DAT_00e26fe4 = *piVar1;
        if (_DAT_00e26fe4 != 0)
        {
            FUN_00431a50(_DAT_00e26fe4, 2, 0xfffffffc, 0x10, 3);
        }
        *(int *)(&DAT_00e259c0 + DAT_00e25df4 * 4) = *piVar1;
        DAT_00e25df4 = DAT_00e25df4 + 1;
        piVar1 = (int *)models_load(0x134);
        _DAT_00e25e68 = FUN_00448bd0(piVar1);
        _DAT_00e26fc8 = *piVar1;
        DAT_00e26fe8 = _DAT_00e26fc8;
        if (param_3 != 0)
        {
            FUN_0047dc40(param_3);
        }
    }
    return uVar3;
}

void FUN_0047e450(int param_1)

{
    int iVar1;
    float *pfVar2;
    float *pfVar3;
    undefined_8 local_80[48];
    float local_50;
    float local_4c;
    float local_48;
    undefined_8 local_40[64];

    rand();
    rand();
    pfVar2 = (float *)&DAT_00e25e00;
    pfVar3 = (float *)&DAT_004c7bc0;
    do
    {
        if (*pfVar3 <= 0.0)
        {
            iVar1 = rand();
            *pfVar3 = (float)iVar1 * 4.656613e-10 * 6.0 - -2.0;
            FUN_0044bb10(local_40, param_1 + 0x20);
            FUN_0044eeb0(param_1 + 0xac, local_80,
                         *(float *)(param_1 + 0x1a0) * 0.003333333 * *pfVar3 * 0.2857143 * 1.2);
            *pfVar2 = local_50;
            pfVar2[1] = local_4c;
            pfVar2[2] = local_48 - 8.0;
            iVar1 = rand();
            *pfVar2 = ((float)iVar1 * 4.656613e-10 * 200.0 - 100.0) + *pfVar2;
            iVar1 = rand();
            pfVar2[1] = ((float)iVar1 * 4.656613e-10 * 200.0 - 100.0) + pfVar2[1];
        }
        pfVar3 = pfVar3 + 1;
        pfVar2 = pfVar2 + 3;
    } while ((int)pfVar3 < 0x4c7be0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047e580(int param_1, float param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    int iVar4;
    int iVar5;
    float *pfVar6;
    undefined_32 *puVar7;
    undefined_32 uVar8;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    if (param_2 != 0.0)
    {
        puVar7 = &DAT_004c7bc0;
        MEMSET(iVar5, puVar7, -1.0f, 8)
        return;
    }
    puVar7 = &DAT_00e25e00;
    pfVar6 = (float *)&DAT_004c7bc0;
    do
    {
        if (0.0 < *pfVar6)
        {
            fVar1 = *pfVar6;
            fVar2 = *pfVar6;
            fVar3 = (float)_DAT_00e22a40;
            *pfVar6 = fVar2 - fVar3;
            if ((0.8 < fVar1) && (fVar2 - fVar3 <= 0.8))
            {
                uVar8 = 0x43;
                iVar5 = rand();
                iVar4 = rand();
                param_2 = (float)iVar4 * 4.656613e-10 * 0.2 - -0.5;
                if (param_1 == 6)
                {
                    uVar8 = 0x6e;
                    iVar4 = rand();
                    param_2 = (float)iVar4 * 4.656613e-10 * 0.2 - -0.8;
                }
                FUN_00426c80(uVar8, 7, (float)iVar5 * 4.656613e-10 * 0.1 - -0.2, param_2, 0);
            }
            if (*pfVar6 <= 0.0)
            {
                iVar5 = rand();
                iVar4 = rand();
                FUN_00426d10(0x43, 6, (float)iVar5 * 4.656613e-10 * 0.08000001 - -0.1,
                             (float)iVar4 * 4.656613e-10 * 0.2 - -0.8, puVar7, 0, 0, 1000.0f, 2000.0f);
                local_c = *puVar7;
                local_8 = puVar7[1];
                local_4 = puVar7[2];
                FUN_0046a5f0(2, 0, 5.0f, &local_c, 5.0f);
            }
        }
        pfVar6 = pfVar6 + 1;
        puVar7 = puVar7 + 3;
    } while ((int)pfVar6 < 0x4c7be0);
    return;
}

void FUN_0047e760(int param_1)

{
    if ((param_1 != 0) && (DAT_0050cb54 < 200))
    {
        (&DAT_00e25ac0)[DAT_0050cb54] = param_1;
        DAT_0050cb54 = DAT_0050cb54 + 1;
    }
    return;
}

void FUN_0047e790(int param_1)

{
    int iVar1;
    int iVar2;
    int *piVar3;

    iVar2 = 0;
    iVar1 = -1;
    if (0 < DAT_0050cb54)
    {
        piVar3 = &DAT_00e25ac0;
        do
        {
            if (iVar1 != -1)
            {
                return;
            }
            if (*piVar3 == param_1)
            {
                iVar1 = iVar2;
            }
            iVar2 = iVar2 + 1;
            piVar3 = piVar3 + 1;
        } while (iVar2 < DAT_0050cb54);
    }
    return;
}

undefined_32 FUN_0047e7c0(int param_1)

{
    if ((-1 < param_1) && (param_1 < DAT_0050cb54))
    {
        return (&DAT_00e25ac0)[param_1];
    }
    return 0;
}

void FUN_0047e7e0(undefined_32 param_1, int param_2)

{
    int iVar1;
    int iVar2;

    iVar1 = FUN_0047e7c0(param_1);
    if (param_2 < 0)
    {
        iVar2 = 0;
    }
    else
    {
        iVar2 = (&DAT_00e29c44)[param_2 * 0x22];
    }
    if ((iVar1 != 0) && (iVar2 != 0))
    {
        iVar1 = FUN_0047c7d0(iVar1);
        if (iVar1 != 0)
        {
            FUN_0047ce60(iVar1, iVar2, 1);
        }
    }
    return;
}

void FUN_0047e830(int param_1, int param_2)

{
    int iVar1;

    if (param_1 != 0)
    {
        iVar1 = FUN_0047e790(param_1);
        if (iVar1 != -1)
        {
            FUN_0041df10(-1, 0, MAGIC('t', 'r', 'i', 'g'), iVar1, **(undefined_32 **)(param_2 + 0x1e70));
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

float10 FUN_0047e870(void)

{
    return (float10)_DAT_004c7be0;
}

undefined_32 *FUN_0047e880(undefined_32 *param_1, undefined_32 param_2)

{
    *param_1 = param_2;
    param_1[1] = 0;
    param_1[3] = 0;
    param_1[2] = 0;
    param_1[8] = 0;
    param_1[9] = 0;
    param_1[10] = 0;
    param_1[0xb] = 0;
    FUN_0044eef0(param_1, 0);
    return param_1;
}

void FUN_0047e8b0(short **param_1, int param_2)

{
    short *psVar1;
    short *psVar2;
    short *psVar3;
    short *psVar4;

    psVar2 = (short *)(param_2 / 10);
    psVar1 = *param_1;
    if ((int)psVar2 < *(int *)(psVar1 + 2))
    {
        param_1[4] = psVar2;
        psVar4 = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + 4 + (int)psVar2 * 0x54);
        param_1[5] = psVar4;
        if (*psVar1 != 1)
        {
            psVar4 = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + 4 + (int)psVar4 * 0x54);
            param_1[6] = psVar4;
            param_1[7] = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + 4 + (int)psVar4 * 0x54);
        }
        param_1[0xb] = NULL;
        param_1[2] = (short *)(((float)param_2 - (float)(int)psVar2 * 10.0) * 0.1);
    }
    else
    {
        psVar4 = NULL;
        if (0 < *(int *)(psVar1 + 2))
        {
            do
            {
                psVar3 = NULL;
                do
                {
                    if ((short *)(int)*(short *)(*(int *)(psVar1 + 6) + 0x42 + (int)(psVar3 + (int)psVar4 * 0x15) * 2)
                        == psVar2)
                    {
                        param_1[4] = psVar4;
                        param_1[0xb] = psVar3;
                        param_1[2] = (short *)(((float)param_2 - (float)(int)psVar2 * 10.0) * 0.1);
                        psVar4 = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + 4
                                                          + (((uint)psVar3 & 1) + (int)psVar4 * 0x2a) * 2);
                        param_1[5] = psVar4;
                        if (*psVar1 != 1)
                        {
                            psVar4 = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + 4
                                                              + (((int)psVar3 >> 1 & 1U) + (int)psVar4 * 0x2a) * 2);
                            param_1[6] = psVar4;
                            param_1[7] = (short *)(int)*(short *)(*(int *)(psVar1 + 6) + 4
                                                                  + (((int)psVar3 >> 2 & 1U) + (int)psVar4 * 0x2a) * 2);
                        }
                        psVar3 = (short *)0x1869f;
                        psVar4 = (short *)0x1869f;
                    }
                    psVar3 = (short *)((int)psVar3 + 1);
                } while ((int)psVar3 < 8);
                psVar4 = (short *)((int)psVar4 + 1);
            } while ((int)psVar4 < *(int *)(psVar1 + 2));
            return;
        }
    }
    return;
}

void FUN_0047eb60(int param_1, float *param_2)

{
    float fVar1;
    bool bVar2;
    bool bVar3;
    undefined_8 local_40[16];
    float local_30;
    float local_2c;
    float local_28;
    float local_10;
    float local_c;
    float local_8;

    bVar3 = false;
    FUN_0044ed80(param_1, local_40);
    do
    {
        bVar2 = true;
        if (local_8 * local_28 + local_c * local_2c + local_10 * local_30
            < local_30 * *param_2 + local_2c * param_2[1] + local_28 * param_2[2])
        {
            fVar1 = *(float *)(param_1 + 8);
            *(float *)(param_1 + 8) = *(float *)(param_1 + 8) - -0.01;
            FUN_0044ed80(param_1, local_40);
            bVar2 = fVar1 == *(float *)(param_1 + 8);
            bVar3 = true;
        }
    } while (!bVar2);
    if (!bVar3)
    {
        *(float *)(param_1 + 8) = *(float *)(param_1 + 8) - 0.01;
        FUN_0044ed80(param_1, local_40);
        do
        {
            bVar3 = true;
            if (local_30 * *param_2 + local_2c * param_2[1] + local_28 * param_2[2]
                < local_8 * local_28 + local_c * local_2c + local_10 * local_30)
            {
                fVar1 = *(float *)(param_1 + 8);
                *(float *)(param_1 + 8) = *(float *)(param_1 + 8) - 0.01;
                FUN_0044ed80(param_1, local_40);
                if (fVar1 != *(float *)(param_1 + 8))
                {
                    bVar3 = false;
                }
            }
        } while (!bVar3);
        *(float *)(param_1 + 8) = *(float *)(param_1 + 8) - -0.01;
        FUN_0044ed80(param_1, local_40);
    }
    return;
}

void FUN_0047ee20(short *param_1, float param_2, undefined_32 param_3, undefined_32 param_4, code *param_5)

{
    int *piVar1;
    float fVar2;
    short *psVar3;
    int iVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    int iVar8;
    int local_3c;
    int local_34;
    undefined_8 local_30[48];

    psVar3 = param_1;
    iVar4 = FUN_0047e880(local_30, param_1);
    piVar1 = (int *)(param_1 + 2);
    param_1 = NULL;
    if (0 < *piVar1)
    {
        local_3c = 0;
        do
        {
            FUN_004270c0();
            *(short **)(iVar4 + 0x10) = param_1;
            *(undefined_32 *)(iVar4 + 0x2c) = 0;
            local_34 = 0;
            if (0 < *(short *)(local_3c + *(int *)(psVar3 + 6)))
            {
                do
                {
                    iVar7 = 0;
                    uVar6 = *(uint *)(iVar4 + 0x2c) & 0xfffffffe;
                    *(uint *)(iVar4 + 0x2c) = uVar6;
                    if (local_34 != 0)
                    {
                        *(uint *)(iVar4 + 0x2c) = uVar6 | 1;
                    }
                    iVar5 = (int)*(short *)(*(int *)(psVar3 + 6) + 4 + (local_34 + *(int *)(iVar4 + 0x10) * 0x2a) * 2);
                    *(int *)(iVar4 + 0x14) = iVar5;
                    if (*psVar3 == 1)
                    {
                        *(undefined_32 *)(iVar4 + 8) = 0;
                        do
                        {
                            (*param_5)(iVar4, param_2, param_3, param_4);
                            fVar2 = 1.0 / param_2 + *(float *)(iVar4 + 8);
                            *(float *)(iVar4 + 8) = fVar2;
                        } while (fVar2 < 1.0);
                    }
                    else if (0 < *(short *)(*(int *)(psVar3 + 6) + iVar5 * 0x54))
                    {
                        do
                        {
                            uVar6 = *(uint *)(iVar4 + 0x2c) & 0xfffffffd;
                            *(uint *)(iVar4 + 0x2c) = uVar6;
                            if (iVar7 != 0)
                            {
                                *(uint *)(iVar4 + 0x2c) = uVar6 | 2;
                            }
                            iVar5 =
                                (int)*(short *)(*(int *)(psVar3 + 6) + 4 + (iVar7 + *(int *)(iVar4 + 0x14) * 0x2a) * 2);
                            *(int *)(iVar4 + 0x18) = iVar5;
                            if ((iVar5 != *(int *)(iVar4 + 0x10))
                                && (iVar8 = 0, 0 < *(short *)(*(int *)(psVar3 + 6) + iVar5 * 0x54)))
                            {
                                do
                                {
                                    uVar6 = *(uint *)(iVar4 + 0x2c) & 0xfffffffb;
                                    *(uint *)(iVar4 + 0x2c) = uVar6;
                                    if (iVar8 != 0)
                                    {
                                        *(uint *)(iVar4 + 0x2c) = uVar6 | 4;
                                    }
                                    iVar5 = (int)*(short *)(*(int *)(psVar3 + 6) + 4
                                                            + (iVar8 + *(int *)(iVar4 + 0x18) * 0x2a) * 2);
                                    *(int *)(iVar4 + 0x1c) = iVar5;
                                    if (iVar5 != *(int *)(iVar4 + 0x14))
                                    {
                                        *(undefined_32 *)(iVar4 + 8) = 0;
                                        do
                                        {
                                            (*param_5)(iVar4, param_2, param_3, param_4);
                                            fVar2 = 1.0 / param_2 + *(float *)(iVar4 + 8);
                                            *(float *)(iVar4 + 8) = fVar2;
                                        } while (fVar2 < 1.0);
                                    }
                                    iVar8 = iVar8 + 1;
                                } while (iVar8 < *(short *)(*(int *)(psVar3 + 6) + *(int *)(iVar4 + 0x18) * 0x54));
                            }
                            iVar7 = iVar7 + 1;
                        } while (iVar7 < *(short *)(*(int *)(psVar3 + 6) + *(int *)(iVar4 + 0x14) * 0x54));
                    }
                    local_34 = local_34 + 1;
                } while (local_34 < *(short *)(*(int *)(psVar3 + 6) + *(int *)(iVar4 + 0x10) * 0x54));
            }
            param_1 = (short *)((int)param_1 + 1);
            local_3c = local_3c + 0x54;
        } while ((int)param_1 < *(int *)(psVar3 + 2));
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0047f060(undefined_32 *param_1, float param_2, int param_3, short *param_4)

{
    float fVar1;
    bool bVar2;
    int iVar3;
    int iVar4;
    undefined_32 *puVar5;
    int iVar6;
    undefined_32 *puVar7;
    float10 fVar8;
    float local_9c;
    float local_98;
    int local_94;
    float local_90;
    float local_8c;
    undefined_32 local_88;
    undefined_32 local_84;
    undefined_32 local_80;
    int local_7c;
    float local_78;
    int local_74;
    undefined_32 local_70;
    undefined_32 local_6c;
    undefined_32 local_68;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30[12];

    bVar2 = false;
    local_7c = 0;
    iVar3 = FUN_0044e620(param_1, 0);
    if ((float)(&DAT_00e22a60)[iVar3 * 2] <= 0.0)
    {
        if (param_1[0xb] == 0)
        {
            local_7c = 1;
            local_90 = 0.0;
        }
        else
        {
            local_90 = (float)(&DAT_00e22a60)[param_1[4] * 2];
        }
        (&DAT_00e22a60)[iVar3 * 2] = local_90;
        local_78 = 1.0 / param_2;
        puVar5 = param_1;
        puVar7 = local_30;
        QMEMCPY(iVar3, puVar5, puVar7, 0xc)
        local_30[2] = 0;
        local_9c = 0.0;
        FUN_0044ed80(local_30, &local_70);
        local_88 = local_40;
        local_84 = local_3c;
        local_80 = local_38;
        local_94 = 0;
        iVar3 = -1;
        do
        {
            iVar4 = iVar3;
            local_8c = 0.0;
            local_94 = local_94 + 1;
            iVar3 = 1;
            if (1.0 < param_2)
            {
                do
                {
                    local_8c = local_8c + local_78;
                    FUN_0044eeb0(local_30, &local_70, local_8c);
                    fVar8 = (float10)vec3f_distance(&local_88, &local_40);
                    iVar3 = iVar3 + 1;
                    local_84 = local_3c;
                    local_88 = local_40;
                    local_80 = local_38;
                    local_9c = (float)(fVar8 + (float10)local_9c);
                    local_74 = iVar3;
                } while ((float)iVar3 < param_2);
            }
            local_30[2] = 1.0f;
            FUN_0044ed80(local_30, &local_70);
            iVar3 = FUN_0044e620(local_30, 0);
            if (iVar4 == iVar3)
            {
                bVar2 = true;
                local_98 = 1.0;
                if (DAT_004c7be4 == -2)
                {
                    _DAT_00e25960 = local_70;
                    DAT_00e25964 = local_6c;
                    DAT_00e25968 = local_68;
                    DAT_00e2596c = local_64;
                    DAT_00e25970 = local_60;
                    DAT_00e25974 = local_5c;
                    DAT_00e25978 = local_58;
                    DAT_00e2597c = local_54;
                    DAT_00e25980 = local_50;
                    DAT_00e25984 = local_4c;
                    DAT_00e25988 = local_48;
                    DAT_00e2598c = local_44;
                    DAT_00e25990 = local_40;
                    DAT_00e25994 = local_3c;
                    DAT_00e25998 = local_38;
                    DAT_00e2599c = local_34;
                    DAT_004c7be4 = iVar3;
                }
                else
                {
                    DAT_004c7be4 = -3;
                }
            }
            else
            {
                fVar8 = (float10)vec3f_distance(&local_88, &local_40);
                local_84 = local_3c;
                local_88 = local_40;
                local_80 = local_38;
                local_9c = (float)(fVar8 + (float10)local_9c);
                if (0.0 <= (float)(&DAT_00e22a60)[iVar3 * 2])
                {
                    local_98 = (float)(&DAT_00e22a60)[iVar3 * 2];
                    bVar2 = true;
                }
                else
                {
                    local_30[2] = 0;
                    (&DAT_00e22a60)[iVar3 * 2] = local_9c;
                }
            }
        } while (!bVar2);
        if (local_98 == 0.0)
        {
            local_98 = 1.0;
        }
        if (local_7c != 0)
        {
            _DAT_004c7be0 = local_9c;
        }
        puVar5 = local_30;
        QMEMCPY(iVar3, param_1, puVar5, 0xc)
        iVar6 = 0;
        iVar3 = iVar4;
        if (0 < local_94)
        {
            do
            {
                iVar4 = FUN_0044e620(local_30, 0);
                *(short *)(param_3 + iVar4 * 2) = *param_4;
                fVar1 = ((float)(&DAT_00e22a60)[iVar4 * 2] - local_90) / local_9c;
                fVar1 = fVar1 * local_98 + (1.0 - fVar1) * local_90;
                (&DAT_00e22a60)[iVar4 * 2] = fVar1;
                if (iVar6 != 0)
                {
                    *(float *)(&DAT_00e22a64 + iVar3 * 8) = fVar1 - (float)(&DAT_00e22a60)[iVar3 * 2];
                }
                local_30[2] = 1.0f;
                FUN_0044ed80(local_30, &local_70);
                iVar6 = iVar6 + 1;
                local_30[2] = 0;
                iVar3 = iVar4;
            } while (iVar6 < local_94);
        }
        *(float *)(&DAT_00e22a64 + iVar4 * 8) = local_98 - (float)(&DAT_00e22a60)[iVar4 * 2];
        *param_4 = *param_4 + 1;
    }
    return;
}

void FUN_0047f450(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    FUN_0047f060(param_1, param_2, param_3, param_4);
    return;
}

void FUN_0047f470(short *param_1, undefined_32 param_2, undefined_16 *param_3)

{
    uint uVar1;
    short *psVar2;
    int iVar3;
    undefined_16 *puVar4;
    undefined_32 *puVar5;
    int iVar6;
    int iVar7;
    int local_38;
    int local_34;
    undefined_8 local_30[48];

    psVar2 = param_1;
    iVar3 = 0;
    if (0 < *(int *)(param_1 + 4))
    {
        puVar5 = &DAT_00e22a60;
        puVar4 = param_3;
        do
        {
            *puVar4 = 0xffff;
            *puVar5 = -1.0f;
            iVar3 = iVar3 + 1;
            puVar4 = puVar4 + 1;
            puVar5 = puVar5 + 2;
        } while (iVar3 < *(int *)(param_1 + 4));
    }
    param_1 = NULL;
    puVar5 = (undefined_32 *)FUN_0047e880(local_30, psVar2);
    local_34 = 0;
    if (0 < *(int *)(psVar2 + 2))
    {
        do
        {
            FUN_004270c0();
            iVar3 = FUN_0044e5e0(*puVar5, local_34, 0);
            puVar5[4] = iVar3;
            while (iVar3 != -1)
            {
                iVar3 = puVar5[4];
                puVar5[0xb] = 0;
                local_38 = 0;
                if (0 < *(short *)(*(int *)(psVar2 + 6) + iVar3 * 0x54))
                {
                    do
                    {
                        uVar1 = puVar5[0xb];
                        puVar5[0xb] = uVar1 & 0xfffffffe;
                        if (local_38 != 0)
                        {
                            puVar5[0xb] = uVar1 & 0xfffffffe | 1;
                        }
                        iVar3 = (int)*(short *)(*(int *)(psVar2 + 6) + 4 + (local_38 + iVar3 * 0x2a) * 2);
                        puVar5[5] = iVar3;
                        if (*psVar2 == 1)
                        {
                            FUN_0047f450(puVar5, param_2, param_3, &param_1);
                        }
                        else
                        {
                            iVar6 = 0;
                            if (0 < *(short *)(*(int *)(psVar2 + 6) + iVar3 * 0x54))
                            {
                                do
                                {
                                    uVar1 = puVar5[0xb];
                                    puVar5[0xb] = uVar1 & 0xfffffffd;
                                    if (iVar6 != 0)
                                    {
                                        puVar5[0xb] = uVar1 & 0xfffffffd | 2;
                                    }
                                    iVar3 = (int)*(short *)(*(int *)(psVar2 + 6) + 4 + (iVar6 + puVar5[5] * 0x2a) * 2);
                                    puVar5[6] = iVar3;
                                    if ((iVar3 != puVar5[4])
                                        && (iVar7 = 0, 0 < *(short *)(*(int *)(psVar2 + 6) + iVar3 * 0x54)))
                                    {
                                        do
                                        {
                                            uVar1 = puVar5[0xb];
                                            puVar5[0xb] = uVar1 & 0xfffffffb;
                                            if (iVar7 != 0)
                                            {
                                                puVar5[0xb] = uVar1 & 0xfffffffb | 4;
                                            }
                                            iVar3 = (int)*(short *)(*(int *)(psVar2 + 6) + 4
                                                                    + (iVar7 + puVar5[6] * 0x2a) * 2);
                                            puVar5[7] = iVar3;
                                            if (iVar3 != puVar5[5])
                                            {
                                                FUN_0047f450(puVar5, param_2, param_3, &param_1);
                                            }
                                            iVar7 = iVar7 + 1;
                                        } while (iVar7 < *(short *)(*(int *)(psVar2 + 6) + puVar5[6] * 0x54));
                                    }
                                    iVar6 = iVar6 + 1;
                                } while (iVar6 < *(short *)(*(int *)(psVar2 + 6) + puVar5[5] * 0x54));
                            }
                        }
                        iVar3 = puVar5[4];
                        local_38 = local_38 + 1;
                    } while (local_38 < *(short *)(*(int *)(psVar2 + 6) + iVar3 * 0x54));
                }
                iVar3 = FUN_0044e5e0(*puVar5, local_34, puVar5[4] + 1);
                puVar5[4] = iVar3;
            }
            local_34 = local_34 + 1;
        } while (local_34 < *(int *)(psVar2 + 2));
    }
    return;
}

void FUN_0047f6c0(int param_1)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = (undefined_32 *)(&DAT_00e23240 + param_1 * 0x28);
    MEMSET(iVar1, puVar2, 0, 10)
    (&DAT_00e22a60)[param_1 * 2] = 0;
    *(undefined_32 *)(&DAT_00e22a64 + param_1 * 8) = 0;
    return;
}

void FUN_0047f6f0(int param_1, undefined_32 param_2)

{
    int iVar1;
    int iVar2;
    undefined_8 local_1f4[500];

    DAT_004c7be4 = -1;
    if ((param_1 != 0) && (*(int *)(param_1 + 8) < 0xfb))
    {
        if (*(short *)(*(int *)(param_1 + 0xc) + 2) == 0)
        {
            DAT_004c7be4 = -2;
            iVar2 = 0;
            if (0 < *(int *)(param_1 + 4))
            {
                iVar1 = 0;
                do
                {
                    FUN_004270c0();
                    if ((DAT_004c7be4 == -3) && (*(short *)(*(int *)(param_1 + 0xc) + iVar1) == 0))
                    {
                        FUN_0047f6c0(iVar2);
                    }
                    iVar2 = iVar2 + 1;
                    iVar1 = iVar1 + 0x54;
                } while (iVar2 < *(int *)(param_1 + 4));
            }
        }
        else
        {
            iVar2 = 0;
            if (0 < *(int *)(param_1 + 4))
            {
                iVar1 = 0;
                do
                {
                    FUN_004270c0();
                    if (*(short *)(*(int *)(param_1 + 0xc) + iVar1) == 0)
                    {
                        FUN_0047f6c0(iVar2);
                    }
                    iVar2 = iVar2 + 1;
                    iVar1 = iVar1 + 0x54;
                } while (iVar2 < *(int *)(param_1 + 4));
            }
        }
        FUN_0047f470(param_1, 100.0f, local_1f4);
        FUN_0047ee20(param_1, 10.0f, param_2, local_1f4, &LAB_0047ea20);
        if (DAT_00e259a0 != 0)
        {
            FUN_0047ee20(param_1, 10.0f, 0, 0, &LAB_0047ece0);
        }
    }
    return;
}

float10 FUN_0047f810(int param_1)

{
    float fVar1;
    int iVar2;
    float10 fVar3;

    iVar2 = FUN_0044e620(param_1, 0);
    fVar1 = *(float *)(param_1 + 8) * *(float *)(&DAT_00e22a64 + iVar2 * 8) + (float)(&DAT_00e22a60)[iVar2 * 2];
    if (DAT_004c7be4 < 0)
    {
        if (fVar1 < 1.0)
        {
            fVar3 = (float10)fVar1;
        }
        else
        {
            fVar3 = (float10)0.9999;
        }
    }
    else if (fVar1 <= 1.0)
    {
        fVar3 = (float10)fVar1;
    }
    else
    {
        fVar3 = (float10)1.0;
    }
    return fVar3;
}

undefined_32 FUN_0047f890(undefined_32 param_1)

{
    int iVar1;
    int iVar2;

    iVar1 = __ftol();
    iVar2 = FUN_0044e620(param_1, 0);
    return *(undefined_32 *)(&DAT_00e23240 + (iVar1 + iVar2 * 10) * 4);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_004800c0(undefined_32 *param_1)

{
    if (-1 < DAT_004c7be4)
    {
        *param_1 = _DAT_00e25960;
        param_1[1] = DAT_00e25964;
        param_1[2] = DAT_00e25968;
        param_1[3] = DAT_00e2596c;
        param_1[4] = DAT_00e25970;
        param_1[5] = DAT_00e25974;
        param_1[6] = DAT_00e25978;
        param_1[7] = DAT_00e2597c;
        param_1[8] = DAT_00e25980;
        param_1[9] = DAT_00e25984;
        param_1[10] = DAT_00e25988;
        param_1[0xb] = DAT_00e2598c;
        param_1[0xc] = DAT_00e25990;
        param_1[0xd] = DAT_00e25994;
        param_1[0xe] = DAT_00e25998;
        param_1[0xf] = DAT_00e2599c;
        return 1;
    }
    return 0;
}

int FUN_00480170(short *param_1, float *param_2, float param_3, int param_4, int param_5, float param_6)

{
    float fVar1;
    float fVar2;
    bool bVar3;
    int iVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    float *pfVar8;
    int local_b4;
    float local_ac;
    float local_a8;
    int local_a0;
    int local_9c;
    float local_88;
    float local_84;
    float local_7c;
    float local_78;
    undefined_8 local_70[48];
    float local_40;
    float local_3c;
    undefined_8 local_30[48];

    local_b4 = 0;
    if (*param_1 != 1)
    {
        return 0;
    }
    iVar4 = FUN_0047e880(local_30, param_1);
    bVar3 = false;
    local_9c = 0;
    if (0 < *(int *)(param_1 + 2))
    {
        do
        {
            iVar7 = 0;
            *(int *)(iVar4 + 0x10) = local_9c;
            local_a0 = (int)*(short *)(*(int *)(param_1 + 6) + local_9c * 0x54);
            if (DAT_0050cb58 != 0)
            {
                bVar3 = false;
                if (local_9c == 1)
                {
                    local_a0 = 1;
                }
                else if (DAT_0050cb58 == 1)
                {
                    if ((0x62 < local_9c) && (local_9c < 0x72))
                        goto LAB_00480242;
                }
                else if (DAT_0050cb58 == 2)
                {
                    if ((0x66 < local_9c) && (local_9c < 0x74))
                    {
                    LAB_00480242:
                        bVar3 = true;
                    }
                }
                else if (((DAT_0050cb58 == 3) && (0x83 < local_9c)) && (local_9c < 0x91))
                    goto LAB_00480242;
            }
            if (!bVar3)
            {
                *(undefined_32 *)(iVar4 + 0x2c) = 0;
                FUN_0044e5a0(param_1, local_9c, &local_88);
                local_ac = local_88 - *param_2;
                local_a8 = local_84 - param_2[1];
                if (0 < local_a0)
                {
                    fVar1 = -param_3;
                    do
                    {
                        uVar6 = *(uint *)(iVar4 + 0x2c) & 0xfffffffe;
                        *(uint *)(iVar4 + 0x2c) = uVar6;
                        if (iVar7 != 0)
                        {
                            *(uint *)(iVar4 + 0x2c) = uVar6 | 1;
                        }
                        iVar5 =
                            (int)*(short *)(*(int *)(param_1 + 6) + 4 + (iVar7 + *(int *)(iVar4 + 0x10) * 0x2a) * 2);
                        *(int *)(iVar4 + 0x14) = iVar5;
                        FUN_0044e5a0(param_1, iVar5, &local_7c);
                        if ((((fVar1 <= local_ac) || (fVar1 <= local_7c - *param_2))
                             && ((local_ac <= param_3 || (local_7c - *param_2 <= param_3))))
                            && (((fVar1 <= local_a8 || (fVar1 <= local_78 - param_2[1]))
                                 && ((local_a8 <= param_3 || (local_78 - param_2[1] <= param_3))))))
                        {
                            *(undefined_32 *)(iVar4 + 8) = 0;
                            pfVar8 = (float *)(param_5 + local_b4 * 8);
                            do
                            {
                                FUN_0044ed80(iVar4, local_70);
                                local_ac = local_40 - *param_2;
                                local_a8 = local_3c - param_2[1];
                                if ((((local_ac < param_3) && (-local_ac < param_3)) && (local_a8 < param_3))
                                    && (-local_a8 < param_3))
                                {
                                    if (local_b4 < param_4)
                                    {
                                        *pfVar8 = local_ac;
                                        pfVar8[1] = local_a8;
                                    }
                                    local_b4 = local_b4 + 1;
                                    pfVar8 = pfVar8 + 2;
                                }
                                fVar2 = 1.0 / param_6 + *(float *)(iVar4 + 8);
                                *(float *)(iVar4 + 8) = fVar2;
                            } while (fVar2 < 1.0);
                        }
                        iVar7 = iVar7 + 1;
                    } while (iVar7 < local_a0);
                }
            }
            local_9c = local_9c + 1;
        } while (local_9c < *(int *)(param_1 + 2));
    }
    return local_b4;
}

void FUN_00480480(undefined_32 param_1, undefined_32 param_2)

{
    DAT_0050cb70 = param_1;
    DAT_0050cb74 = param_2;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 004804a0
void __setargv_0(void)

{
    _DAT_0050cb78 = 1;
    return;
}

void FUN_004804b0(undefined_32 param_1)

{
    DAT_0050cb64 = param_1;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004804c0(void)

{
    if ((double)CONCAT44(DAT_0050cb74, DAT_0050cb70) <= 0.0)
    {
        DAT_0050cb70 = 0x20000000;
        DAT_0050cb74 = 0x3fb11111;
    }
    _DAT_00e22a50 = (float)(double)CONCAT44(DAT_0050cb74, DAT_0050cb70);
    DAT_00e22a40 = DAT_0050cb70;
    DAT_00e22a44 = DAT_0050cb74;
    _DAT_00e22a38 = 0;
    _DAT_00e22a3c = 0;
    DAT_00e22a30 = 0;
    DAT_0050cb64 = 0;
    if (DAT_0050cb68 == 0)
    {
        DAT_0050cb60 = timeGetTime();
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00480540(void)

{
    double dVar1;
    DWORD DVar2;

    dVar1 = (double)CONCAT44(_DAT_00e22a4c, _DAT_00e22a48);
    if (DAT_0050cb68 == 0)
    {
        DVar2 = timeGetTime();
        dVar1 = (double)(ulonglong)(DVar2 - DAT_0050cb60) * 0.001;
        DAT_0050cb60 = DVar2;
        _DAT_00e22a40 = dVar1;
        if (0.1000000014901161 < dVar1)
        {
            _DAT_00e22a40 = 0.1000000014901161;
        }
    }
    else
    {
        _DAT_00e22a40 = (double)CONCAT44(DAT_0050cb74, DAT_0050cb70);
    }
    _DAT_00e22a4c = (undefined_32)((ulonglong)dVar1 >> 0x20);
    _DAT_00e22a48 = SUB84(dVar1, 0);
    if (DAT_0050cb64 != 0)
    {
        _DAT_00e22a40 = 0.0;
    }
    if (_DAT_00e22a40 <= 0.0)
    {
        _DAT_00e22a40 = 0.002000000094994903;
    }
    _DAT_00e22a50 = (float)_DAT_00e22a40;
    _DAT_00e22a38 = _DAT_00e22a38 + _DAT_00e22a40;
    DAT_00e22a30 = DAT_00e22a30 + 1;
    return;
}

// 00480650
float10 decelerator(float decelInv, float time)

{
    return (float10)1.0 - ((float10)time * (float10)33.33334) / ((float10)time * (float10)33.33334 + (float10)decelInv);
}

float10 SQRT3(float param_1)

{
    return (float10)SQRT(param_1);
}

void FUN_00480690(float *param_1, float *param_2, float *param_3)

{
    param_1[0] = param_3[0] * param_2[0] + param_3[4] * param_2[1] + param_3[8] * param_2[2] + param_3[12];
    param_1[1] = param_3[1] * param_2[0] + param_3[5] * param_2[1] + param_3[9] * param_2[2] + param_3[13];
    param_1[2] = param_3[2] * param_2[0] + param_3[6] * param_2[1] + param_3[10] * param_2[2] + param_3[14];
    param_1[3] = param_3[3] * param_2[0] + param_3[7] * param_2[1] + param_3[11] * param_2[2] + param_3[15];
    return;
}

void FUN_00480730(float *param_1, float *param_2, float *param_3, float *param_4)

{
    float fVar1;
    float fVar2;
    float10 fVar3;

    fVar3 = (float10)rdVector_Len3(param_1);
    fVar2 = 1.0 / (float)fVar3;
    *param_4 = (float)fVar3;
    *param_3 = *param_1 * fVar2;
    param_3[1] = param_1[1] * fVar2;
    fVar1 = param_1[2];
    param_3[3] = 0.0;
    param_3[2] = fVar1 * fVar2;
    fVar3 = (float10)rdVector_Len3(param_1 + 4);
    fVar2 = 1.0 / (float)fVar3;
    param_4[1] = (float)fVar3;
    param_3[4] = param_1[4] * fVar2;
    param_3[5] = param_1[5] * fVar2;
    fVar1 = param_1[6];
    param_3[7] = 0.0;
    param_3[6] = fVar1 * fVar2;
    fVar3 = (float10)rdVector_Len3(param_1 + 8);
    fVar2 = 1.0 / (float)fVar3;
    param_4[2] = (float)fVar3;
    param_3[8] = param_1[8] * fVar2;
    param_3[9] = param_1[9] * fVar2;
    fVar1 = param_1[10];
    param_3[0xb] = 0.0;
    param_3[10] = fVar1 * fVar2;
    *param_2 = param_1[0xc];
    param_2[1] = param_1[0xd];
    param_2[2] = param_1[0xe];
    param_3[0xc] = 0.0;
    param_3[0xd] = 0.0;
    param_3[0xe] = 0.0;
    param_3[0xf] = 1.0;
    return;
}

void FUN_00480850(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 *param_4)

{
    FUN_0044bb10(param_1, param_3);
    vec3f_add(param_1 + 0x30, param_1 + 0x30, param_2);
    mat_multiply_rows(param_1, *param_4, param_4[1], param_4[2], param_1);
    return;
}

void FUN_00480890(float *param_1, float *param_2, float *param_3)

{
    float fVar1;

    fVar1 = param_1[3] - (*param_2 * *param_1 + param_2[1] * param_1[1] + param_2[2] * param_1[2]);
    *param_3 = fVar1 * *param_1;
    param_3[1] = fVar1 * param_1[1];
    param_3[2] = fVar1 * param_1[2];
    *param_3 = *param_2 + *param_3;
    param_3[1] = param_3[1] + param_2[1];
    param_3[2] = param_3[2] + param_2[2];
    return;
}

void FUN_004808f0(float *param_1, float *param_2, float *param_3, float *param_4)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;

    fVar1 = *param_3 - *param_2;
    fVar3 = param_3[1] - param_2[1];
    fVar4 = param_3[2] - param_2[2];
    fVar2 = fVar4 * fVar4 + fVar3 * fVar3 + fVar1 * fVar1;
    if (fVar2 <= 0.001)
    {
        *param_4 = *param_2;
        param_4[1] = param_2[1];
        param_4[2] = param_2[2];
        return;
    }
    fVar2 = ((fVar1 * *param_1 + param_1[2] * fVar4 + param_1[1] * fVar3)
             - (fVar3 * param_2[1] + fVar4 * param_2[2] + fVar1 * *param_2))
        / fVar2;
    if (fVar2 <= 0.0)
    {
        *param_4 = *param_2;
        param_4[1] = param_2[1];
        param_4[2] = param_2[2];
        return;
    }
    if (1.0 <= fVar2)
    {
        *param_4 = *param_3;
        param_4[1] = param_3[1];
        param_4[2] = param_3[2];
        return;
    }
    *param_4 = fVar1 * fVar2;
    param_4[1] = fVar3 * fVar2;
    param_4[2] = fVar4 * fVar2;
    *param_4 = *param_2 + fVar1 * fVar2;
    param_4[1] = param_2[1] + fVar3 * fVar2;
    param_4[2] = param_2[2] + fVar4 * fVar2;
    return;
}

undefined_32 FUN_00480a70(float *param_1, float *param_2, float *param_3, float *param_4, undefined_32 param_5,
                          undefined_32 param_6, undefined_32 param_7)

{
    int iVar1;
    float local_48[6];
    float local_30[3];
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    local_24 = *param_2 - *param_1;
    local_20 = param_2[1] - param_1[1];
    local_1c = param_2[2] - param_1[2];
    local_18 = *param_3 - *param_1;
    local_14 = param_3[1] - param_1[1];
    local_10 = param_3[2] - param_1[2];
    local_c = *param_4 - *param_1;
    local_8 = param_4[1] - param_1[1];
    local_4 = param_4[2] - param_1[2];
    rdVector_Cross3(local_48, param_5, param_6);
    if (((local_48[0] != 0.0) || (local_48[1] != 0.0)) || (local_48[2] != 0.0))
    {
        rdVector_Cross3(local_48, local_48 + 9, param_5);
        rdVector_Cross3(local_48 + 3, &local_18, param_6);
        rdVector_Cross3(local_48 + 6, &local_c, param_7);
        if (0.0 <= local_48[0])
        {
            param_3 = (float *)local_48[0];
        }
        else
        {
            param_3 = (float *)-local_48[0];
        }
        if (0.0 <= local_48[1])
        {
            param_2 = (float *)local_48[1];
        }
        else
        {
            param_2 = (float *)-local_48[1];
        }
        if (local_48[2] < 0.0)
        {
            local_48[2] = -local_48[2];
        }
        if (local_48[2] + (float)param_2 + (float)param_3 <= 0.0001)
        {
            if (0.0 <= local_48[3])
            {
                param_3 = (float *)local_48[3];
            }
            else
            {
                param_3 = (float *)-local_48[3];
            }
            if (0.0 <= local_48[4])
            {
                param_2 = (float *)local_48[4];
            }
            else
            {
                param_2 = (float *)-local_48[4];
            }
            if (local_48[5] < 0.0)
            {
                local_48[5] = -local_48[5];
            }
            if (local_48[5] + (float)param_2 + (float)param_3 < 0.001)
            {
                return 1;
            }
            if ((float)param_2 <= (float)param_3)
            {
                if (local_48[5] <= (float)param_3)
                {
                    iVar1 = 0;
                }
                else
                {
                    iVar1 = 2;
                }
            }
            else if (local_48[5] <= (float)param_2)
            {
                iVar1 = 1;
            }
            else
            {
                iVar1 = 2;
            }
            if (0.0 <= local_48[iVar1 + 3])
            {
                if (0.0 <= local_48[iVar1 + 6])
                {
                    return 1;
                }
            }
            else if (local_48[iVar1 + 6] <= 0.0)
            {
                return 1;
            }
        }
        else
        {
            if ((float)param_2 <= (float)param_3)
            {
                if (local_48[2] <= (float)param_3)
                {
                    iVar1 = 0;
                }
                else
                {
                    iVar1 = 2;
                }
            }
            else if (local_48[2] <= (float)param_2)
            {
                iVar1 = 1;
            }
            else
            {
                iVar1 = 2;
            }
            if (0.0 <= local_48[iVar1])
            {
                if ((0.0 <= local_48[iVar1 + 3]) && (0.0 <= local_48[iVar1 + 6]))
                {
                    return 1;
                }
            }
            else if ((local_48[iVar1 + 3] <= 0.0) && (local_48[iVar1 + 6] <= 0.0))
            {
                return 1;
            }
        }
    }
    return 0;
}

float10 FUN_00480dc0(float *param_1, float *param_2, float *param_3, float *param_4, float param_5, float *param_6,
                     float *param_7)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    int iVar7;
    float10 fVar8;
    float10 fVar9;
    float local_34;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;

    FUN_004314f0(&local_10, param_2, param_3, param_4);
    fVar6 = (*param_1 - *param_2) * local_10;
    fVar4 = (param_1[2] - param_2[2]) * local_8;
    fVar5 = (param_1[1] - param_2[1]) * local_c;
    FUN_00480890(&local_10, param_1, param_6);
    fVar1 = (*param_1 - *param_6) * (*param_1 - *param_6) + (param_1[2] - param_6[2]) * (param_1[2] - param_6[2])
        + (param_1[1] - param_6[1]) * (param_1[1] - param_6[1]);
    if ((0.0 < param_5) && (param_5 < fVar1))
    {
        return (float10)-1.0;
    }
    local_34 = *param_3 - *param_2;
    local_30 = param_3[1] - param_2[1];
    local_2c = param_3[2] - param_2[2];
    local_28 = *param_4 - *param_3;
    local_24 = param_4[1] - param_3[1];
    local_20 = param_4[2] - param_3[2];
    local_1c = *param_2 - *param_4;
    local_18 = param_2[1] - param_4[1];
    local_14 = param_2[2] - param_4[2];
    iVar7 = FUN_00480a70(param_6, param_2, param_3, param_4, &local_34, &local_28, &local_1c);
    if (iVar7 == 0)
    {
        FUN_004808f0(param_6, param_2, param_3, &local_34);
        FUN_004808f0(param_6, param_3, param_4, &local_28);
        FUN_004808f0(param_6, param_4, param_2, &local_1c);
        fVar1 = *param_1;
        fVar2 = param_1[1];
        fVar3 = param_1[2];
        *param_6 = local_34;
        param_6[1] = local_30;
        param_6[2] = local_2c;
        fVar9 = ((float10)param_1[2] - (float10)local_20) * (float10)(float)((float10)param_1[2] - (float10)local_20)
            + ((float10)param_1[1] - (float10)local_24) * ((float10)param_1[1] - (float10)local_24)
            + ((float10)*param_1 - (float10)local_28) * (float10)(float)((float10)*param_1 - (float10)local_28);
        fVar8 = ((float10)fVar3 - (float10)local_2c) * (float10)(float)((float10)fVar3 - (float10)local_2c)
            + ((float10)fVar2 - (float10)local_30) * (float10)(float)((float10)fVar2 - (float10)local_30)
            + ((float10)fVar1 - (float10)local_34) * (float10)(float)((float10)fVar1 - (float10)local_34);
        if (fVar9 < fVar8)
        {
            *param_6 = local_28;
            fVar8 = (float10)(float)fVar9;
            param_6[1] = local_24;
            param_6[2] = local_20;
        }
        fVar9 = ((float10)param_1[2] - (float10)local_14) * (float10)(float)((float10)param_1[2] - (float10)local_14)
            + ((float10)param_1[1] - (float10)local_18) * ((float10)param_1[1] - (float10)local_18)
            + ((float10)*param_1 - (float10)local_1c) * (float10)(float)((float10)*param_1 - (float10)local_1c);
        if (fVar9 < fVar8)
        {
            *param_6 = local_1c;
            fVar8 = (float10)(float)fVar9;
            param_6[1] = local_18;
            param_6[2] = local_14;
        }
    }
    else
    {
        fVar8 = (float10)fVar1;
    }
    if (fVar5 + fVar4 + fVar6 < 0.0)
    {
        *param_7 = -local_10;
        param_7[1] = -local_c;
        param_7[2] = -local_8;
        return fVar8;
    }
    *param_7 = local_10;
    param_7[1] = local_c;
    param_7[2] = local_8;
    return fVar8;
}

void FUN_00481100(float *param_1, float *param_2, float *param_3, float *param_4, float param_5)

{
    float *pfVar1;
    float fVar2;

    param_1[0xc] = 0.0;
    param_1[0xd] = 0.0;
    param_1[0xe] = 0.0;
    param_1[0xf] = 1.0;
    param_1[0xc] = *param_3 * param_5 + *param_2;
    param_1[0xd] = param_5 * param_3[1] + param_2[1];
    param_1[0xe] = param_5 * param_3[2] + param_2[2];
    fVar2 = param_3[2] * param_4[2] + param_4[1] * param_3[1] + *param_3 * *param_4;
    if ((0.95 <= fVar2) || (fVar2 <= -0.95))
    {
        param_1[4] = *param_3 * -1.0;
        param_1[5] = param_3[1] * -1.0;
        fVar2 = param_3[2];
        *param_1 = 0.0;
        param_1[1] = 0.0;
        param_1[2] = 1.0;
        param_1[6] = fVar2 * -1.0;
    }
    else
    {
        param_1[4] = *param_3 * -1.0;
        param_1[5] = param_3[1] * -1.0;
        param_1[6] = param_3[2] * -1.0;
        *param_1 = *param_4;
        param_1[1] = param_4[1];
        param_1[2] = param_4[2];
    }
    pfVar1 = param_1 + 8;
    rdVector_Cross3(pfVar1, param_1, param_1 + 4);
    rdVector_Cross3(param_1, param_1 + 4, pfVar1);
    rdVector_Normalize3(param_1);
    rdVector_Normalize3(pfVar1);
    return;
}

void FUN_00481220(float *param_1, float *param_2, undefined_32 param_3, float *param_4, float param_5)

{
    float10 fVar1;
    float local_c;
    float local_8;
    float local_4;

    *param_4 = *param_1;
    param_4[1] = param_1[1];
    param_4[2] = param_1[2];
    local_c = *param_2 - *param_1;
    local_8 = param_2[1] - param_1[1];
    local_4 = param_2[2] - param_1[2];
    fVar1 = (float10)rdVector_Len3(&local_c);
    if (fVar1 <= (float10)0.0001)
    {
        mat_set_translation(param_3, *param_1, param_1[1], param_1[2]);
        return;
    }
    rdVector_Scale3(&local_c, (float)((float10)1.0 / fVar1), &local_c);
    fVar1 = (float10)arctan(local_4);
    param_4[4] = (float)fVar1;
    param_4[5] = param_5;
    if ((0.0001 <= local_8) || (local_8 <= -0.0001))
    {
        fVar1 = (float10)arctan2(-local_c, local_8);
        param_4[3] = (float)fVar1;
        mat_set_rotation_translation(param_3, param_4);
        return;
    }
    if (local_c < -0.0001)
    {
        param_4[3] = 90.0;
        mat_set_rotation_translation(param_3, param_4);
        return;
    }
    if (0.0001 < local_c)
    {
        param_4[3] = -90.0;
        mat_set_rotation_translation(param_3, param_4);
        return;
    }
    param_4[3] = 0.0;
    mat_set_rotation_translation(param_3, param_4);
    return;
}

void FUN_004813a0(float *param_1, float *param_2, float param_3, int param_4)

{
    float *pfVar1;
    float fVar2;
    float *pfVar3;
    int iVar4;
    int iVar5;
    float10 fVar6;
    undefined_8 local_1c[4];
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    pfVar3 = param_2;
    param_2 =
        (float *)(*param_2 * *param_1 + param_2[3] * param_1[3] + param_2[1] * param_1[1] + param_2[2] * param_1[2]);
    if ((float)param_2 < 0.0)
    {
        local_10 = -*param_1;
        local_c = -param_1[1];
        local_8 = -param_1[2];
        local_4 = -param_1[3];
        FUN_004813a0(&local_10, pfVar3, param_3, param_4);
        return;
    }
    if (1.0 < (float)param_2)
    {
        param_2 = (float *)1.0f;
    }
    fVar6 = (float10)ninety_minus_arctan(param_2);
    fVar2 = (float)fVar6;
    if ((float10)1e-05 < fVar6)
    {
        sin_cos(fVar2, &param_2, local_1c);
        local_18 = (float)param_2;
        sin_cos((1.0 - param_3) * fVar2, &param_2, local_1c);
        local_14 = (float)param_2 / local_18;
        sin_cos(fVar2 * param_3, &param_2, local_1c);
        param_3 = (float)param_2 / local_18;
    }
    else
    {
        local_14 = 1.0 - param_3;
    }
    iVar4 = (int)param_1 - (int)pfVar3;
    param_4 = param_4 - (int)pfVar3;
    iVar5 = 4;
    do
    {
        pfVar1 = (float *)(iVar4 + (int)pfVar3);
        fVar2 = *pfVar3;
        pfVar3 = pfVar3 + 1;
        iVar5 = iVar5 + -1;
        *(float *)(param_4 + -4 + (int)pfVar3) = param_3 * fVar2 + *pfVar1 * local_14;
    } while (iVar5 != 0);
    return;
}

void FUN_00481520(float *param_1, float *param_2)

{
    float *pfVar1;
    float fVar2;
    float fVar3;
    float *pfVar4;
    float10 fVar5;
    undefined_8 local_4[4];

    pfVar4 = param_2;
    fVar2 = param_2[1];
    fVar3 = param_2[0] * param_2[0] + param_2[2] * param_2[2] + fVar2 * fVar2;
    if ((1e-05 <= fVar3) || (1e-05 <= -fVar3))
    {
        pfVar1 = param_2 + 3;
        param_2 = (float *)fVar2;
        fVar5 = (float10)ninety_minus_arctan(*pfVar1);
        fVar2 = (float)fVar5;
        sin_cos(fVar2, &param_2, local_4);
        if (((float)param_2 <= -1e-05) || (1e-05 <= (float)param_2))
        {
            param_1[3] = fVar2 + fVar2;
            param_1[0] = pfVar4[0] / (float)param_2;
            param_1[1] = pfVar4[1] / (float)param_2;
            param_1[2] = pfVar4[2] / (float)param_2;
            rdVector_Normalize3(param_1);
            return;
        }
    }
    param_1[0] = 0.0;
    param_1[1] = 0.0;
    param_1[2] = 1.0;
    param_1[3] = 0.0;
    return;
}

void FUN_00481620(float *param_1, float *param_2)

{
    float *pfVar1;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    pfVar1 = param_2;
    sin_cos(param_2[3] * 0.5, &param_2, &local_10);
    local_c = pfVar1[0];
    local_8 = pfVar1[1];
    local_4 = pfVar1[2];
    rdVector_Normalize3(&local_c);
    param_1[3] = local_10;
    param_1[0] = local_c * (float)param_2;
    param_1[1] = local_8 * (float)param_2;
    param_1[2] = local_4 * (float)param_2;
    return;
}

// 004816b0
// Statically imported ?
int rand(void)

{
    int iVar1;

    if (DAT_0050cb80 == '\0')
    {
        DAT_0050cb7c = 0x2750250;
        DAT_0050cb80 = '\x01';
    }
    iVar1 = DAT_0050cb7c * 0x41c64e6d + 0x3039;
    DAT_0050cb7c = iVar1;
    if (iVar1 != -0x80000000)
    {
        if (iVar1 < 0)
        {
            iVar1 = -iVar1;
        }
        return iVar1;
    }
    return 0;
}

void FUN_004816f0(int param_1, undefined_32 *param_2, int param_3, undefined_32 param_4)

{
    float *pfVar1;
    float *pfVar2;
    float *pfVar3;
    float fVar4;
    int iVar5;
    int iVar6;
    float *pfVar7;
    float *pfVar8;
    int iVar9;
    undefined_32 local_84;
    undefined_32 local_80;
    undefined_32 local_7c;
    undefined_32 local_78;
    undefined_32 local_74;
    undefined_32 local_70;
    undefined_32 local_6c;
    undefined_32 local_68;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    float local_48[4];
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    float local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    int local_4;

    if (param_3 != 0)
    {
        iVar6 = get_self(param_3);
        FUN_0044bb10(&local_84, param_4);
        if (iVar6 != 0x5064)
        {
            if ((iVar6 < 0xd064) || (0xd065 < iVar6))
            {
                if (param_1 != param_3)
                {
                    return;
                }
                param_2[1] = local_80;
                param_2[2] = local_7c;
                param_2[3] = local_78;
                param_2[4] = local_74;
                param_2[5] = local_70;
                param_2[6] = local_6c;
                param_2[7] = local_68;
                param_2[8] = local_64;
                param_2[9] = local_60;
                *param_2 = local_84;
                param_2[10] = local_5c;
                param_2[0xb] = local_58;
                param_2[0xc] = local_54;
                param_2[0xd] = local_50;
                param_2[0xe] = local_4c;
                param_2[0xf] = local_48[0];
                return;
            }
            if (iVar6 == 0xd065)
            {
                local_4 = param_3;
            }
            local_48[1] = *(float *)(undefined_32 *)(param_3 + 0x1c);
            local_48[2] = *(float *)(param_3 + 0x20);
            local_48[3] = *(float *)(param_3 + 0x24);
            local_34 = *(undefined_32 *)(param_3 + 0x28);
            local_30 = *(undefined_32 *)(param_3 + 0x2c);
            local_2c = *(float *)(param_3 + 0x30);
            pfVar7 = (float *)(param_3 + 0x34);
            local_24 = *(undefined_32 *)(param_3 + 0x34);
            local_20 = *(undefined_32 *)(param_3 + 0x38);
            local_1c = *(undefined_32 *)(param_3 + 0x3c);
            local_38 = 0;
            local_14 = *(undefined_32 *)(param_3 + 0x40);
            local_10 = *(undefined_32 *)(param_3 + 0x44);
            local_c = *(undefined_32 *)(param_3 + 0x48);
            local_28 = 0;
            local_18 = 0;
            local_8 = 1.0f;
            if ((*(byte *)(param_3 + 0xc) & 0x10) != 0)
            {
                iVar6 = 3;
                pfVar8 = (float *)(local_4 + 0x4c);
                do
                {
                    pfVar1 = pfVar7 + -3;
                    fVar4 = *pfVar7;
                    pfVar2 = pfVar7 + -6;
                    pfVar3 = (float *)(((int)&local_2c - (int)(undefined_32 *)(param_3 + 0x1c)) + (int)pfVar7);
                    pfVar7 = pfVar7 + 1;
                    iVar6 = iVar6 + -1;
                    *pfVar3 = *pfVar8 + -(*pfVar2 * *(float *)(local_4 + 0x4c))
                        + -(*pfVar1 * *(float *)(local_4 + 0x50)) + -(fVar4 * *(float *)(local_4 + 0x54)) + *pfVar3;
                    pfVar8 = pfVar8 + 1;
                } while (iVar6 != 0);
            }
            mat_mult(&local_84, (undefined_32 *)((int)register0x00000010 + -0x44), param_4);
        }
        if (param_1 == param_3)
        {
            *param_2 = local_84;
            param_2[1] = local_80;
            param_2[2] = local_7c;
            param_2[3] = local_78;
            param_2[4] = local_74;
            param_2[5] = local_70;
            param_2[6] = local_6c;
            param_2[7] = local_68;
            param_2[8] = local_64;
            param_2[9] = local_60;
            param_2[10] = local_5c;
            param_2[0xb] = local_58;
            param_2[0xc] = local_54;
            param_2[0xd] = local_50;
            param_2[0xe] = local_4c;
            param_2[0xf] = local_48[0];
        }
        iVar6 = FUN_00431780(param_3);
        iVar9 = 0;
        if (0 < iVar6)
        {
            do
            {
                iVar5 = *(int *)(*(int *)(param_3 + 0x18) + iVar9 * 4);
                if (iVar5 != 0)
                {
                    FUN_004816f0(param_1, param_2, iVar5, &local_84);
                }
                iVar9 = iVar9 + 1;
            } while (iVar9 < iVar6);
        }
    }
    return;
}

void FUN_004819b0(int *param_1, undefined_32 *param_2)

{
    int *piVar1;
    undefined_32 *puVar2;
    float fVar3;
    uint uVar4;
    float *pfVar5;
    float *pfVar6;
    float *pfVar7;
    int iVar8;
    undefined_32 *puVar9;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    float local_10[4];

    *param_2 = 1.0f;
    param_2[5] = 1.0f;
    param_2[10] = 1.0f;
    param_2[0xf] = 1.0f;
    param_2[1] = 0;
    param_2[2] = 0;
    param_2[3] = 0;
    param_2[4] = 0;
    param_2[6] = 0;
    param_2[7] = 0;
    param_2[8] = 0;
    param_2[9] = 0;
    param_2[0xb] = 0;
    param_2[0xc] = 0;
    param_2[0xd] = 0;
    param_2[0xe] = 0;
    iVar8 = *param_1;
    puVar9 = param_2;
    while (iVar8 != 0)
    {
        uVar4 = get_self(*param_1);
        if ((uVar4 & 0x8000) != 0)
        {
            puVar2 = (undefined_32 *)*param_1;
            if (uVar4 == 0xd065)
            {
                puVar9 = puVar2;
            }
            local_40 = puVar2[7];
            local_3c = puVar2[8];
            local_38 = puVar2[9];
            local_30 = puVar2[10];
            local_2c = puVar2[0xb];
            local_28 = puVar2[0xc];
            local_20 = puVar2[0xd];
            local_1c = puVar2[0xe];
            local_18 = puVar2[0xf];
            local_10[0] = (float)puVar2[0x10];
            local_10[1] = (float)puVar2[0x11];
            local_10[2] = (float)puVar2[0x12];
            local_34 = 0;
            local_24 = 0;
            local_14 = 0;
            local_10[3] = 1.0;
            if ((*(byte *)(puVar2 + 3) & 0x10) != 0)
            {
                iVar8 = 3;
                pfVar5 = local_10;
                pfVar6 = (float *)(puVar2 + 0xd);
                pfVar7 = (float *)(puVar9 + 0x13);
                do
                {
                    iVar8 = iVar8 + -1;
                    fVar3 = -(pfVar6[-6] * (float)puVar9[0x13]) + *pfVar5;
                    *pfVar5 = fVar3;
                    fVar3 = -(pfVar6[-3] * (float)puVar9[0x14]) + fVar3;
                    *pfVar5 = fVar3;
                    fVar3 = -(*pfVar6 * (float)puVar9[0x15]) + fVar3;
                    *pfVar5 = fVar3;
                    *pfVar5 = *pfVar7 + fVar3;
                    pfVar5 = pfVar5 + 1;
                    pfVar6 = pfVar6 + 1;
                    pfVar7 = pfVar7 + 1;
                } while (iVar8 != 0);
            }
            mat_mult(param_2, &local_40, param_2);
        }
        piVar1 = param_1 + 1;
        param_1 = param_1 + 1;
        iVar8 = *piVar1;
    }
    return;
}

void FUN_00481b30(int param_1, float *param_2)

{
    uint uVar1;
    int iVar2;
    float fVar3;
    int iVar4;
    float fVar5;

    if ((param_1 != 0) && (param_2 != NULL))
    {
        uVar1 = get_self(param_1);
        if (uVar1 == 0x5066)
        {
            fVar3 = 0.0;
            fVar5 = *param_2;
            while (0.0 <= fVar5)
            {
                fVar5 = fVar3;
                if (fVar3 != 0.0)
                {
                    fVar5 = param_2[(int)fVar3];
                }
                FUN_00431750(param_1, fVar3, fVar5);
                iVar2 = (int)fVar3 + 1;
                fVar3 = (float)((int)fVar3 + 1);
                fVar5 = param_2[iVar2];
            }
            FUN_00431750(param_1, fVar3, -1.0f);
        }
        if ((uVar1 & 0x4000) != 0)
        {
            iVar2 = FUN_00431780(param_1);
            iVar4 = 0;
            if (0 < iVar2)
            {
                do
                {
                    FUN_00481b30(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar4 * 4), param_2);
                    iVar4 = iVar4 + 1;
                } while (iVar4 < iVar2);
            }
        }
    }
    return;
}

void FUN_00481be0(int param_1, int param_2, int param_3, int param_4, int param_5)

{
    vec3f_sub_cross_product(param_2 + 0x3c, param_1 + param_3 * 0xc, param_1 + param_4 * 0xc, param_1 + param_5 * 0xc);
    **(int **)(param_2 + 0x14) = param_3;
    *(int *)(*(int *)(param_2 + 0x14) + 4) = param_4;
    *(int *)(*(int *)(param_2 + 0x14) + 8) = param_5;
    return;
}

void FUN_00481c30(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                  float param_6, float param_7, undefined_32 param_8)

{
    int iVar1;
    char *_Str1;
    undefined_32 *puVar2;
    float fVar3;
    uint uVar4;
    int iVar5;
    undefined_32 *puVar6;
    undefined_32 *puVar7;
    undefined_32 *puVar8;
    int iVar9;
    undefined_32 *puVar10;
    int iVar11;
    undefined_8 *puVar12;
    int iVar13;
    int iVar14;
    int local_8;
    undefined_8 local_4[4];

    if (DAT_0050ccc8 == 0)
    {
        local_8 = 0;
        puVar12 = &DAT_0050cbc8;
        do
        {
            sin_cos((float)local_8 * 360.0 * 0.015625, puVar12, local_4);
            puVar12 = puVar12 + 4;
            local_8 = local_8 + 1;
        } while ((int)puVar12 < 0x50ccc8);
        DAT_0050ccc8 = 1;
    }
    uVar4 = get_self(param_1);
    if ((uVar4 & 0x4000) == 0)
    {
        if (uVar4 == 0x3064)
        {
            _Str1 = *(char **)(**(int **)(param_1 + 0x18) + 0x30);
            iVar5 = _strncmp(_Str1, (char *)&PTR_DAT_004c3c14, 3);
            if (iVar5 == 0)
            {
                puVar2 = *(undefined_32 **)(_Str1 + 0x4c);
                puVar6 = *(undefined_32 **)(_Str1 + 0x58);
                if (param_6 < param_7)
                {
                    fVar3 = 1.0 - (param_6 / param_7) * (param_6 / param_7);
                }
                else
                {
                    fVar3 = 0.0;
                }
                if (fVar3 < 0.1)
                {
                    puVar6 = puVar2 + 2;
                    puVar8 = &DAT_004c7c34;
                    do
                    {
                        puVar7 = puVar8 + 3;
                        puVar6[-2] = puVar8[-1];
                        puVar6[-1] = *puVar8;
                        *puVar6 = *(undefined_32 *)(((int)&DAT_004c7c30 - (int)puVar2) + (int)puVar6);
                        puVar6 = puVar6 + 3;
                        puVar8 = puVar7;
                    } while ((int)puVar7 < 0x4c7c7c);
                    return;
                }
                *(undefined_32 *)(_Str1 + 0x74) = 0x1b;
                *(undefined_32 *)(_Str1 + 0x7c) = 0x30;
                iVar13 = (int)&DAT_004c7c78 - (int)puVar6;
                iVar5 = (int)&DAT_004c7c30 - (int)puVar2;
                param_6 = 1.121039e-44;
                puVar8 = puVar2;
                do
                {
                    iVar11 = 3;
                    do
                    {
                        iVar9 = 3;
                        do
                        {
                            *puVar8 = *(undefined_32 *)(iVar5 + (int)puVar8);
                            puVar8 = puVar8 + 1;
                            iVar9 = iVar9 + -1;
                        } while (iVar9 != 0);
                        iVar9 = 4;
                        do
                        {
                            *puVar6 = *(undefined_32 *)(iVar13 + (int)puVar6);
                            puVar6 = puVar6 + 1;
                            iVar9 = iVar9 + -1;
                        } while (iVar9 != 0);
                        iVar11 = iVar11 + -1;
                    } while (iVar11 != 0);
                    iVar5 = iVar5 + -0x24;
                    iVar13 = iVar13 + -0x30;
                    param_6 = (float)((int)param_6 + -1);
                } while (param_6 != 0.0);
                param_6 = 4.203895e-45;
                puVar7 = puVar6;
                puVar10 = puVar8;
                do
                {
                    iVar5 = 3;
                    do
                    {
                        *puVar10 = *(undefined_32 *)(((int)&DAT_004c7c54 - (int)puVar8) + (int)puVar10);
                        puVar10 = puVar10 + 1;
                        iVar5 = iVar5 + -1;
                    } while (iVar5 != 0);
                    iVar5 = 4;
                    do
                    {
                        *puVar7 = *(undefined_32 *)(((int)&DAT_004c7ca8 - (int)puVar6) + (int)puVar7);
                        puVar7 = puVar7 + 1;
                        iVar5 = iVar5 + -1;
                    } while (iVar5 != 0);
                    param_6 = (float)((int)param_6 + -1);
                } while (param_6 != 0.0);
                puVar6 = puVar2 + 9;
                local_8 = 1;
                do
                {
                    iVar5 = __ftol();
                    __ftol();
                    iVar13 = __ftol();
                    iVar11 = 3;
                    puVar8 = puVar6;
                    do
                    {
                        puVar8[1] = (float)iVar5;
                        *puVar8 = *puVar8;
                        puVar6 = puVar8 + 3;
                        iVar11 = iVar11 + -1;
                        puVar8[2] = (float)puVar8[2] + (float)iVar13;
                        puVar8 = puVar6;
                    } while (iVar11 != 0);
                    local_8 = local_8 + 1;
                } while (local_8 < 8);
                iVar5 = *(int *)(_Str1 + 0x6c);
                iVar13 = 1;
                do
                {
                    iVar11 = iVar13 + 4;
                    iVar9 = iVar13 + 1;
                    FUN_00481be0(puVar2, iVar5, iVar13 + -1, iVar9, iVar11);
                    FUN_00481be0(puVar2, iVar5 + 0x48, iVar11, iVar13 + 2, iVar13 + -1);
                    iVar1 = iVar13 + 3;
                    FUN_00481be0(puVar2, iVar5 + 0x90, iVar13 + 2, iVar1, iVar13);
                    FUN_00481be0(puVar2, iVar5 + 0xd8, iVar13, iVar13 + -1, iVar13 + 2);
                    iVar14 = iVar5 + 0x168;
                    FUN_00481be0(puVar2, iVar5 + 0x120, iVar9, iVar13, iVar1);
                    iVar5 = iVar5 + 0x1b0;
                    FUN_00481be0(puVar2, iVar14, iVar1, iVar11, iVar9);
                    iVar13 = iVar1;
                } while (iVar1 < 0x19);
            }
        }
    }
    else
    {
        iVar5 = FUN_00431780(param_1);
        iVar13 = 0;
        if (0 < iVar5)
        {
            do
            {
                FUN_00481c30(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar13 * 4), param_2, param_3, param_4,
                             param_5, param_6, param_7, param_8);
                iVar13 = iVar13 + 1;
            } while (iVar13 < iVar5);
            return;
        }
    }
    return;
}

undefined_32 FUN_00482000(int param_1, int param_2, uint param_3)

{
    uint uVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    undefined_8 local_40[64];

    if (param_1 == 0)
    {
        return 0;
    }
    if ((param_3 & 1) == 0)
    {
        mat_set_identity(&DAT_0050cb88);
    }
    uVar1 = get_self(param_1);
    if ((uVar1 & 0x4000) == 0)
    {
        if (uVar1 == 0x3064)
        {
            FUN_00431820(**(undefined_32 **)(param_1 + 0x18), param_2);
            mat_transform_translate(param_2, param_2, &DAT_0050cb88);
            mat_transform_translate(param_2 + 0xc, param_2 + 0xc, &DAT_0050cb88);
            return 1;
        }
        return 0;
    }
    if (uVar1 == 0xd065)
    {
        FUN_004316a0(param_1, local_40);
    }
    else
    {
        if (uVar1 != 0xd064)
            goto LAB_00482081;
        FUN_004316a0(param_1, local_40);
    }
    mat_mult_inplace(&DAT_0050cb88, local_40);
LAB_00482081:
    iVar2 = FUN_00431780(param_1);
    iVar4 = 0;
    if (iVar2 < 1)
    {
        return 0;
    }
    do
    {
        iVar3 = FUN_00482000(*(undefined_32 *)(*(int *)(param_1 + 0x18) + iVar4 * 4), param_2, param_3 | 1);
        if (iVar3 != 0)
        {
            return 1;
        }
        iVar4 = iVar4 + 1;
    } while (iVar4 < iVar2);
    return 0;
}

void FUN_00482120(short *param_1, short *param_2, short *param_3, undefined_32 param_4, float *param_5,
                  undefined_32 param_6, undefined_32 *param_7, undefined_32 *param_8)

{
    int iVar1;
    float10 fVar2;
    undefined_32 local_a0;
    undefined_32 local_9c;
    undefined_32 local_98;
    undefined_32 local_94;
    undefined_32 local_90;
    undefined_32 local_8c;
    float local_88;
    float local_84;
    float local_80;
    float local_7c;
    float local_78;
    float local_74;
    float local_70;
    float local_6c;
    float local_68;
    undefined_8 local_64[12];
    undefined_8 local_58[12];
    undefined_8 local_4c[12];
    undefined_8 local_40[64];

    local_7c = (float)(int)*param_1;
    local_78 = (float)(int)param_1[1];
    local_74 = (float)(int)param_1[2];
    local_88 = (float)(int)*param_2;
    local_84 = (float)(int)param_2[1];
    local_80 = (float)(int)param_2[2];
    local_70 = (float)(int)*param_3;
    local_6c = (float)(int)param_3[1];
    local_68 = (float)(int)param_3[2];
    mat_transform_translate(local_58, &local_7c, param_4);
    mat_transform_translate(local_4c, &local_88, param_4);
    mat_transform_translate(local_64, &local_70, param_4);
    fVar2 = (float10)FUN_00480dc0(param_6, local_58, local_4c, local_64, *param_5, &local_a0, &local_94);
    if (((float10)0.0 <= fVar2) && (fVar2 < (float10)*param_5))
    {
        param_7[0] = local_a0;
        param_7[1] = local_9c;
        param_7[2] = local_98;
        param_8[0] = local_94;
        param_8[1] = local_90;
        param_8[2] = local_8c;
        param_5[0] = (float)fVar2;
        if (-1 < DAT_0050ccd0)
        {
            iVar1 = 0;
            if (0 < DAT_0050ccd0)
            {
                do
                {
                    *(undefined_32 *)(DAT_00e229dc + iVar1 * 4) = (&DAT_00e229e0)[iVar1];
                    iVar1 = iVar1 + 1;
                } while (iVar1 < DAT_0050ccd0);
            }
            *(undefined_32 *)(DAT_00e229dc + DAT_0050ccd0 * 4) = 0;
            mat_unk2(local_40, param_4);
            mat_transform_translate(&DAT_00e229d0, &local_a0, local_40);
            mat_transform(&DAT_00e229c0, &local_94, local_40);
            return;
        }
    }
    return;
}

// WARNING: Could not reconcile some variable overlaps

void FUN_00482320(int *param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                  undefined_32 param_6)

{
    ushort *puVar1;
    ushort *puVar2;
    ushort uVar3;
    bool bVar4;
    uint uVar5;
    ushort *puVar6;
    ushort *puVar7;
    char cVar8;
    int iVar9;
    int iVar10;
    ushort *local_58;
    ushort *local_54;
    ushort *local_50;
    ushort *local_4c;
    ushort *local_48;
    ushort *local_44;
    int local_40;
    ushort local_38[4];
    ushort local_30[4];
    ushort local_28[4];
    ushort local_20[4];
    ushort local_18[4];
    ushort local_10[4];
    undefined_32 local_8;
    undefined_32 local_4;

    bVar4 = false;
    iVar10 = local_40;
    if (param_1 != NULL)
    {
        do
        {
            local_8 = *param_1;
            local_4 = param_1[1];
            uVar5 = local_8 << 0x18;
            cVar8 = (char)((uint)local_8 >> 8);
            local_8._2_1_ = (char)((uint)local_8 >> 0x10);
            local_8._3_1_ = (char)((uint)local_8 >> 0x18);
            if (uVar5 < 0x5000001)
            {
                if (uVar5 == 0x5000000)
                {
                    local_54 = (ushort *)(iVar10 + local_8._2_1_ * 8);
                    local_58 = (ushort *)(iVar10 + cVar8 * 8);
                    local_50 = (ushort *)(iVar10 + local_8._3_1_ * 8);
                    iVar9 = 0;
                    puVar6 = local_28;
                    do
                    {
                        puVar7 = local_30 + iVar9;
                        *puVar7 = *local_58;
                        puVar1 = local_38 + iVar9;
                        *puVar1 = *local_54;
                        *puVar6 = *local_50;
                        *puVar7 = CONCAT11((char)*puVar7, (char)((uint)*puVar7 >> 8));
                        *puVar1 = CONCAT11((char)*puVar1, (char)((uint)*puVar1 >> 8));
                        *puVar6 = CONCAT11((char)*puVar6, (char)((uint)*puVar6 >> 8));
                        iVar9 = iVar9 + 1;
                        local_58 = local_58 + 1;
                        local_54 = local_54 + 1;
                        local_50 = local_50 + 1;
                        puVar6 = puVar6 + 1;
                    } while (iVar9 < 3);
                    FUN_00482120(local_30, local_38, local_28, param_2, param_3, param_4, param_5, param_6);
                }
                else if (uVar5 == 0x1000000)
                {
                    local_40 = param_1[1];
                    iVar10 = local_40;
                }
            }
            else if (uVar5 == 0x6000000)
            {
                puVar6 = local_28;
                local_4._3_1_ = (char)((uint)local_4 >> 0x18);
                local_4._2_1_ = (char)((uint)local_4 >> 0x10);
                local_44 = (ushort *)(iVar10 + local_4._3_1_ * 8);
                local_48 = (ushort *)(iVar10 + local_4._2_1_ * 8);
                puVar7 = local_20;
                local_4c = (ushort *)(iVar10 + (char)((uint)local_4 >> 8) * 8);
                local_58 = (ushort *)(iVar10 + local_8._3_1_ * 8);
                local_50 = (ushort *)(iVar10 + cVar8 * 8);
                local_54 = (ushort *)(iVar10 + local_8._2_1_ * 8);
                iVar10 = 0;
                do
                {
                    puVar1 = local_10 + iVar10;
                    *puVar1 = *local_50;
                    puVar2 = local_18 + iVar10;
                    *puVar2 = *local_54;
                    *puVar7 = *local_58;
                    local_30[iVar10] = *local_4c;
                    local_38[iVar10] = *local_48;
                    *puVar6 = *local_44;
                    *puVar1 = CONCAT11((char)*puVar1, (char)((uint)*puVar1 >> 8));
                    *puVar2 = CONCAT11((char)*puVar2, (char)((uint)*puVar2 >> 8));
                    uVar3 = local_30[iVar10];
                    *puVar7 = CONCAT11((char)*puVar7, (char)((uint)*puVar7 >> 8));
                    local_30[iVar10] = CONCAT11((char)uVar3, (char)((uint)uVar3 >> 8));
                    uVar3 = *puVar6;
                    local_38[iVar10] = CONCAT11((char)local_38[iVar10], (char)((uint)local_38[iVar10] >> 8));
                    iVar10 = iVar10 + 1;
                    *puVar6 = CONCAT11((char)uVar3, (char)((uint)uVar3 >> 8));
                    local_50 = local_50 + 1;
                    local_54 = local_54 + 1;
                    local_58 = local_58 + 1;
                    local_4c = local_4c + 1;
                    local_48 = local_48 + 1;
                    local_44 = local_44 + 1;
                    puVar7 = puVar7 + 1;
                    puVar6 = puVar6 + 1;
                } while (iVar10 < 3);
                FUN_00482120(local_10, local_18, local_20, param_2, param_3, param_4, param_5, param_6);
                FUN_00482120(local_30, local_38, local_28, param_2, param_3, param_4, param_5, param_6);
                iVar10 = local_40;
            }
            else if (uVar5 == 0xdf000000)
            {
                bVar4 = true;
            }
            param_1 = param_1 + 2;
        } while (!bVar4);
    }
    return;
}

void FUN_00482690(int param_1, undefined_32 param_2, int param_3, float *param_4, undefined_32 param_5,
                  undefined_32 *param_6, undefined_32 param_7)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    short *psVar4;
    float10 fVar5;
    int local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    float local_c;
    float local_8;
    float local_4;

    local_1c = 0;
    if (0 < *(int *)(param_1 + 0x14))
    {
        do
        {
            iVar1 = *(int *)(*(int *)(param_1 + 0x18) + local_1c * 4);
            if (param_3 == 0)
            {
                uVar2 = FUN_0044c9d0(iVar1, param_2, param_4, param_5, param_6, param_7);
                FUN_00482320(uVar2);
            }
            else
            {
                psVar4 = *(short **)(iVar1 + 0x34);
                iVar3 = 0;
                if (0 < *(short *)(iVar1 + 0x3a))
                {
                    do
                    {
                        local_c = (float)(int)*psVar4;
                        local_8 = (float)(int)psVar4[1];
                        local_4 = (float)(int)psVar4[2];
                        mat_transform_translate(&local_18, &local_c, param_2);
                        fVar5 = (float10)vec3f_squared_distance(&local_18, param_5);
                        if (fVar5 < (float10)*param_4)
                        {
                            *param_6 = local_18;
                            param_6[1] = local_14;
                            param_6[2] = local_10;
                            *param_4 = (float)fVar5;
                        }
                        psVar4 = psVar4 + 8;
                        iVar3 = iVar3 + 1;
                    } while (iVar3 < *(short *)(iVar1 + 0x3a));
                }
            }
            local_1c = local_1c + 1;
        } while (local_1c < *(int *)(param_1 + 0x14));
    }
    return;
}

int FUN_004827b0(int param_1)

{
    int iVar1;
    int iVar2;
    float *pfVar3;

    iVar1 = FUN_00431780(param_1);
    if (iVar1 < 1)
    {
        return -1;
    }
    if (20.0 < *(float *)(param_1 + 0x1c))
    {
        return -1;
    }
    iVar2 = 1;
    pfVar3 = (float *)(param_1 + 0x20);
    do
    {
        if ((*pfVar3 == -1.0) || (20.0 <= *pfVar3))
            break;
        iVar2 = iVar2 + 1;
        pfVar3 = pfVar3 + 1;
    } while (iVar2 < 8);
    if (iVar1 <= iVar2 + -1)
    {
        return -1;
    }
    return iVar2 + -1;
}

void FUN_00482820(uint param_1, uint param_2, undefined_32 param_3, int param_4, undefined_32 param_5,
                  undefined_32 param_6, undefined_32 param_7, undefined_32 param_8, undefined_32 param_9)

{
    float *pfVar1;
    float *pfVar2;
    float *pfVar3;
    float fVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    uint uVar8;
    float *pfVar9;
    uint uVar10;
    float *pfVar11;
    int local_8c;
    float local_84[4];
    undefined_32 local_74;
    undefined_32 local_70;
    undefined_32 local_6c;
    float local_68;
    undefined_32 local_64;
    undefined_32 local_60;
    undefined_32 local_5c;
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_8 local_40[64];

    if (param_2 == 0)
    {
        return;
    }
    iVar5 = FUN_00431b00(param_2, 2);
    if (iVar5 == 0)
    {
        return;
    }
    uVar6 = get_self(param_2);
    if (param_2 == param_1)
    {
        param_4 = 1;
    }
    FUN_0044bb10(local_40, param_3);
    if ((int)uVar6 < 0x5065)
    {
        if (uVar6 != 0x5064)
        {
            if (uVar6 != 0x3064)
            {
                return;
            }
            if (param_4 == 0)
            {
                return;
            }
            FUN_00482690(param_2, local_40, param_5, param_6, param_7, param_8, param_9);
            return;
        }
    }
    else
    {
        if (0xd065 < (int)uVar6)
        {
            return;
        }
        if ((int)uVar6 < 0xd064)
        {
            if (uVar6 == 0x5065)
            {
                iVar7 = FUN_00431780(param_2);
                iVar5 = *(int *)(param_2 + 0x1c);
                if (iVar5 == -2)
                {
                    return;
                }
                if (iVar5 == -1)
                {
                    local_8c = 0;
                    if (iVar7 < 1)
                    {
                        return;
                    }
                    do
                    {
                        iVar5 = *(int *)(*(int *)(param_2 + 0x18) + local_8c * 4);
                        if (iVar5 != 0)
                        {
                            FUN_00482820(param_1, iVar5, local_40, param_4, param_5, param_6, param_7, param_8,
                                         param_9);
                        }
                        local_8c = local_8c + 1;
                    } while (local_8c < iVar7);
                    return;
                }
                iVar5 = *(int *)(*(int *)(param_2 + 0x18) + iVar5 * 4);
                if (iVar5 == 0)
                {
                    return;
                }
                FUN_00482820(param_1, iVar5, local_40, param_4, param_5, param_6, param_7, param_8, param_9);
                return;
            }
            if (uVar6 != 0x5066)
            {
                return;
            }
            iVar5 = FUN_004827b0(param_2);
            if (iVar5 == -1)
            {
                return;
            }
            iVar5 = *(int *)(*(int *)(param_2 + 0x18) + iVar5 * 4);
            if (iVar5 == 0)
            {
                return;
            }
            FUN_00482820(param_1, iVar5, local_40, param_4, param_5, param_6, param_7, param_8, param_9);
            return;
        }
    }
    uVar8 = uVar6 & 0x8000;
    if (uVar8 != 0)
    {
        if (-1 < DAT_0050ccd0)
        {
            if (DAT_0050ccd0 < DAT_0050cccc + -1)
            {
                (&DAT_00e229e0)[DAT_0050ccd0] = param_2;
            }
            DAT_0050ccd0 = DAT_0050ccd0 + 1;
        }
        uVar10 = uVar8;
        if (uVar6 == 0xd065)
        {
            uVar10 = param_2;
        }
        local_84[1] = *(float *)(undefined_32 *)(param_2 + 0x1c);
        local_84[2] = *(float *)(param_2 + 0x20);
        local_84[3] = *(float *)(param_2 + 0x24);
        local_70 = *(undefined_32 *)(param_2 + 0x28);
        local_6c = *(undefined_32 *)(param_2 + 0x2c);
        local_68 = *(float *)(param_2 + 0x30);
        pfVar9 = (float *)(param_2 + 0x34);
        local_60 = *(undefined_32 *)(param_2 + 0x34);
        local_5c = *(undefined_32 *)(param_2 + 0x38);
        local_58 = *(undefined_32 *)(param_2 + 0x3c);
        local_74 = 0;
        local_50 = *(undefined_32 *)(param_2 + 0x40);
        local_4c = *(undefined_32 *)(param_2 + 0x44);
        local_48 = *(undefined_32 *)(param_2 + 0x48);
        local_64 = 0;
        local_54 = 0;
        local_44 = 1.0f;
        if ((*(byte *)(param_2 + 0xc) & 0x10) != 0)
        {
            iVar5 = 3;
            pfVar11 = (float *)(uVar10 + 0x4c);
            do
            {
                pfVar1 = pfVar9 + -6;
                pfVar2 = pfVar9 + -3;
                fVar4 = *pfVar9;
                pfVar3 = (float *)(((int)&local_68 - (int)(undefined_32 *)(param_2 + 0x1c)) + (int)pfVar9);
                pfVar9 = pfVar9 + 1;
                iVar5 = iVar5 + -1;
                *pfVar3 = *pfVar11 + -(fVar4 * *(float *)(uVar10 + 0x54)) + -(*pfVar1 * *(float *)(uVar10 + 0x4c))
                    + -(*pfVar2 * *(float *)(uVar10 + 0x50)) + *pfVar3;
                pfVar11 = pfVar11 + 1;
            } while (iVar5 != 0);
        }
        mat_mult(local_40, (undefined_32 *)((int)register0x00000010 + -0x80), param_3);
    }
    iVar5 = FUN_00431780(param_2);
    local_8c = 0;
    if (0 < iVar5)
    {
        do
        {
            iVar7 = *(int *)(*(int *)(param_2 + 0x18) + local_8c * 4);
            if (iVar7 != 0)
            {
                FUN_00482820(param_1, iVar7, local_40, param_4, param_5, param_6, param_7, param_8, param_9);
            }
            local_8c = local_8c + 1;
        } while (local_8c < iVar5);
    }
    if ((uVar8 != 0) && (-1 < DAT_0050ccd0))
    {
        DAT_0050ccd0 = DAT_0050ccd0 + -1;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00482c40(undefined_32 param_1, undefined_32 param_2, undefined_32 *param_3, int param_4, undefined_32 param_5,
                  undefined_32 *param_6, undefined_32 *param_7)

{
    undefined_32 local_58;
    undefined_32 local_54;
    undefined_32 local_50;
    undefined_32 local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    DAT_00e229dc = param_5;
    DAT_0050ccd0 = 0;
    if (0x14 < param_4)
    {
        param_4 = 0x14;
    }
    local_4c = 0;
    local_48 = 0;
    DAT_00e229d4 = param_3[1];
    DAT_00e229d8 = param_3[2];
    _DAT_00e229d0 = *param_3;
    local_44 = 1.0f;
    _DAT_00e229c0 = 0;
    DAT_00e229c4 = 0;
    DAT_00e229c8 = 1.0f;
    local_40 = 1.0f;
    local_3c = 0;
    local_38 = 0;
    local_34 = 0;
    local_30 = 0;
    local_2c = 1.0f;
    local_28 = 0;
    local_24 = 0;
    local_20 = 0;
    local_1c = 0;
    local_18 = 1.0f;
    local_14 = 0;
    local_10 = 0;
    local_c = 0;
    local_8 = 0;
    local_4 = 1.0f;
    param_5 = 0x4cbebc20;
    DAT_0050cccc = param_4;
    local_58 = _DAT_00e229d0;
    local_54 = DAT_00e229d4;
    local_50 = DAT_00e229d8;
    FUN_00482820(param_2, param_1, &local_40, 0, 0, &param_5, param_3, &local_58, &local_4c);
    param_6[0] = _DAT_00e229d0;
    param_6[1] = DAT_00e229d4;
    param_6[2] = DAT_00e229d8;
    param_7[0] = _DAT_00e229c0;
    param_7[1] = DAT_00e229c4;
    param_7[2] = DAT_00e229c8;
    return;
}

void FUN_00482dd0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5)

{
    undefined_8 local_40[64];

    FUN_004819b0(param_3, local_40);
    mat_transform_translate(param_1, param_4, local_40);
    mat_transform(param_2, param_5, local_40);
    return;
}

void FUN_00482e20(void)

{
    DAT_00e98244 = DAT_00e98244 + 1;
    if (2 < DAT_00e98244)
    {
        DAT_00e98244 = 0;
    }
    DAT_00e98228 = '\x01' - DAT_00e98228;
    return;
}

void thunk_FUN_00426910(void)

{
    return;
}

float10 FUN_00482e60(float param_1)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_8 *puVar3;
    float10 fVar4;

    uVar1 = param_1;
    iVar2 = 1;
    if (0 < DAT_0050ccec)
    {
        fVar4 = (float10)vec3f_squared_distance(param_1, &DAT_00e22820);
        param_1 = (float)fVar4;
        if (1 < DAT_0050ccec)
        {
            puVar3 = &DAT_00e2282c;
            do
            {
                fVar4 = (float10)vec3f_squared_distance(uVar1, puVar3);
                if (fVar4 < (float10)param_1)
                {
                    param_1 = (float)fVar4;
                }
                iVar2 = iVar2 + 1;
                puVar3 = puVar3 + 0xc;
            } while (iVar2 < DAT_0050ccec);
        }
        fVar4 = (float10)SQRT3(param_1);
        return fVar4;
    }
    return (float10)-1.0;
}

void FUN_00482ee0(int param_1)

{
    *(float *)(param_1 + 0x154) =
        ((45.0 / *(float *)(param_1 + 0x134) - 1.0) * *(float *)(param_1 + 0x150) - -1.0) * *(float *)(param_1 + 0x148);
    return;
}

void FUN_00482f10(int param_1)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float10 fVar7;

    fVar2 = ((float)(*(int *)(param_1 + 0x28) - *(int *)(param_1 + 0x20)) * *(float *)(param_1 + 0x138))
        / (float)(*(int *)(param_1 + 0x2c) - *(int *)(param_1 + 0x24));
    if (0.01 <= fVar2)
    {
        fVar7 = (float10)tan(*(float *)(param_1 + 0x134) * 0.5);
        fVar7 = (float10)arctan2((float)fVar7, fVar2);
        fVar7 = fVar7 + fVar7;
    }
    else
    {
        fVar7 = (float10)3.0;
    }
    fVar3 = *(float *)(param_1 + 0x140);
    fVar4 = *(float *)(param_1 + 0x144);
    fVar7 = (float10)tan((float)(fVar7 * (float10)0.5));
    fVar1 = (float)(fVar7 * (float10)fVar3);
    fVar7 = fVar7 * (float10)fVar3 * (float10)fVar2;
    fVar2 = (float)fVar7;
    fVar7 = -fVar7;
    *(undefined_32 *)(param_1 + 0xf4) = 0;
    *(undefined_32 *)(param_1 + 0xf8) = 0;
    *(undefined_32 *)(param_1 + 0xfc) = 0;
    *(undefined_32 *)(param_1 + 0x100) = 0;
    fVar5 = fVar2 - (float)fVar7;
    *(undefined_32 *)(param_1 + 0x108) = 0;
    *(undefined_32 *)(param_1 + 0x10c) = 0;
    *(undefined_32 *)(param_1 + 0x120) = 0;
    *(undefined_32 *)(param_1 + 0x124) = 0;
    *(undefined_32 *)(param_1 + 300) = 0;
    *(undefined_32 *)(param_1 + 0x11c) = -1.0f;
    *(float *)(param_1 + 0xf0) = (fVar3 + fVar3) / fVar5;
    fVar6 = fVar1 - -fVar1;
    *(float *)(param_1 + 0x104) = (fVar3 + fVar3) / fVar6;
    *(float *)(param_1 + 0x110) = (float)((fVar7 + (float10)fVar2) / (float10)fVar5);
    *(float *)(param_1 + 0x114) = (-fVar1 + fVar1) / fVar6;
    *(float *)(param_1 + 0x118) = -((fVar4 + fVar3) / (fVar4 - fVar3));
    *(float *)(param_1 + 0x128) = (fVar4 * fVar3 * -2.0) / (fVar4 - fVar3);
    FUN_00482ee0(param_1);
    return;
}

void FUN_004830e0(int param_1)

{
    short sVar1;
    short sVar2;
    short sVar3;
    short sVar4;

    sVar1 = __ftol();
    sVar2 = __ftol();
    sVar3 = __ftol();
    sVar4 = __ftol();
    *(short *)(param_1 + 0x10) = (sVar3 - sVar1) * 2 + 8;
    *(short *)(param_1 + 0x18) = (sVar3 + sVar1) * 2;
    *(short *)(param_1 + 0x12) = (sVar4 - sVar2) * 2 + 8;
    *(short *)(param_1 + 0x1a) = (sVar4 + sVar2) * 2;
    if (DAT_0050c058 != 0)
    {
        *(undefined_16 *)(param_1 + 0x10) = 0x500;
        *(undefined_16 *)(param_1 + 0x12) = 0x3c0;
        *(ushort *)(param_1 + 0x18) = (-(ushort)((DAT_00e9a9b0 & 1) != 0) & 0xfb00) + 0x500;
        *(ushort *)(param_1 + 0x1a) = (-(ushort)((DAT_00e9a9b0 & 2) != 0) & 0xfc40) + 0x3c0;
    }
    *(undefined_16 *)(param_1 + 0x14) = 0x92;
    *(undefined_16 *)(param_1 + 0x1c) = 0x36c;
    return;
}

void FUN_004831d0(int param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5)

{
    int iVar1;

    iVar1 = param_1 * 0x16c;
    if (DAT_0050c058 != 0)
    {
        param_2 = 0;
        param_4 = 0x140;
        param_3 = 0;
        param_5 = 0xf0;
    }
    *(undefined_32 *)(&DAT_00dfb060 + iVar1) = param_2;
    *(undefined_32 *)(&DAT_00dfb064 + iVar1) = param_3;
    *(undefined_32 *)(&DAT_00dfb068 + iVar1) = param_4;
    *(undefined_32 *)(&DAT_00dfb06c + iVar1) = param_5;
    FUN_004830e0(&DAT_00dfb040 + param_1 * 0x5b);
    FUN_00482f10(&DAT_00dfb040 + param_1 * 0x5b);
    return;
}

void FUN_00483230(int param_1, int param_2)

{
    if (param_2 < 0)
    {
        (&DAT_00dfb044)[param_1 * 0x5b] = param_2;
        (&DAT_00dfb040)[param_1 * 0x5b] = (&DAT_00dfb040)[param_1 * 0x5b] & 0xfffffffe;
        return;
    }
    (&DAT_00dfb044)[param_1 * 0x5b] = param_2;
    (&DAT_00dfb040)[param_1 * 0x5b] = (&DAT_00dfb040)[param_1 * 0x5b] | 1;
    return;
}

void FUN_00483270(int param_1)

{
    int iVar1;
    uint *puVar2;

    iVar1 = param_1 * 0x16c;
    puVar2 = &DAT_00dfb040 + param_1 * 0x5b;
    *puVar2 = (&DAT_00dfb040)[param_1 * 0x5b] & 0xfffffffe;
    (&DAT_00dfb044)[param_1 * 0x5b] = -1;
    *(undefined_32 *)(&DAT_00dfb048 + iVar1) = -1;
    *(undefined_32 *)(&DAT_00dfb04c + iVar1) = -1;
    *(undefined_32 *)(&DAT_00dfb050 + iVar1) = DAT_004c7ce0;
    *(undefined_32 *)(&DAT_00dfb054 + iVar1) = DAT_004c7ce4;
    *(undefined_32 *)(&DAT_00dfb058 + iVar1) = DAT_004c7ce8;
    *(undefined_32 *)(&DAT_00dfb05c + iVar1) = DAT_004c7cec;
    *(undefined_32 *)(&DAT_00dfb060 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb064 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb068 + iVar1) = 0x140;
    *(undefined_32 *)(&DAT_00dfb06c + iVar1) = 0xf0;
    *(undefined_32 *)(&DAT_00dfb070 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb074 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb078 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb07c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb080 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb084 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb088 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb08c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb090 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb094 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb098 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb09c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0a0 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0a4 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0a8 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0ac + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb0b0 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb0b4 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0b8 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0bc + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0c0 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0c4 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb0c8 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0cc + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0d0 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0d4 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0d8 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb0dc + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0e0 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0e4 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0e8 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0ec + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb0f0 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb0f4 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0f8 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb0fc + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb100 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb104 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb108 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb10c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb110 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb114 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb118 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb11c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb120 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb124 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb128 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb12c + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb130 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb134 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb138 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb13c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb140 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb144 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb148 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb14c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb150 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb154 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb158 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb15c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb160 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb164 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb168 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb16c + iVar1) = 1.0f;
    *(undefined_16 *)(&DAT_00dfb170 + iVar1) = 0x10;
    *(undefined_32 *)(&DAT_00dfb174 + iVar1) = 0x42b40000;
    *(undefined_32 *)(&DAT_00dfb178 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb17c + iVar1) = -1.0f;
    *(undefined_32 *)(&DAT_00dfb180 + iVar1) = 5.0f;
    *(undefined_32 *)(&DAT_00dfb184 + iVar1) = 5000.0f;
    *(undefined_32 *)(&DAT_00dfb188 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb18c + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb190 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb194 + iVar1) = 1.0f;
    *(undefined_32 *)(&DAT_00dfb198 + iVar1) = 6;
    *(undefined_32 *)(&DAT_00dfb19c + iVar1) = -1;
    *(undefined_32 *)(&DAT_00dfb1a0 + iVar1) = 0;
    *(undefined_32 *)(&DAT_00dfb1a4 + iVar1) = -1;
    *(undefined_32 *)(&DAT_00dfb1a8 + iVar1) = 0;
    FUN_004830e0(puVar2);
    FUN_00482f10(puVar2);
    return;
}

void FUN_004834b0(void)

{
    int iVar1;

    FUN_0042d470();
    FUN_0042c3e0();
    FUN_0042c400();
    FUN_0042c460();
    FUN_0042c500();
    iVar1 = 0;
    do
    {
        FUN_00483270(iVar1);
        iVar1 = iVar1 + 1;
    } while (iVar1 < 4);
    FUN_00483230(0, 1);
    FUN_004831d0(0, 0, 0, 0x140, 0xf0);
    FUN_004831d0(1, 8, 8, 0x138, 0xe8);
    PTR_DAT_004c7cdc = (undefined_8 *)&DAT_00dfb040;
    if ((DAT_00e996dc & 0x400) != 0)
    {
        FUN_00483230(1, 0);
        FUN_004831d0(1, 8, 8, 0x138, 0xe8);
    }
    *(uint *)PTR_DAT_004c7cdc = *(uint *)PTR_DAT_004c7cdc & 0xfffffffe;
    FUN_0044fcc0();
    DAT_00e98244 = 0;
    DAT_00e98228 = 0;
    FUN_00445640(3, 2);
    FUN_00445640(5, 0);
    return;
}

void FUN_00483590(int param_1, float param_2, float param_3, float param_4, float param_5, float param_6)

{
    if (DAT_00ec86c0 == 3) // drawdistance setting
    {
        param_5 = param_5 * 1.5;
    }
    if (DAT_00ec86c0 == 1) // drawdistance setting
    {
        param_5 = param_5 * 0.4;
    }
    if (0.0 < param_2)
    {
        *(float *)(&DAT_00dfb174 + param_1 * 0x16c) = param_2;
    }
    if (0.0 < param_3)
    {
        *(float *)(&DAT_00dfb178 + param_1 * 0x16c) = param_3;
    }
    if (0.0 < param_4)
    {
        *(float *)(&DAT_00dfb180 + param_1 * 0x16c) = param_4;
    }
    if (0.0 < param_5)
    {
        *(float *)(&DAT_00dfb184 + param_1 * 0x16c) = param_5;
    }
    if (0.0 <= param_6)
    {
        *(float *)(&DAT_00dfb17c + param_1 * 0x16c) = param_6;
    }
    FUN_00482ee0(&DAT_00dfb040 + param_1 * 0x5b);
    return;
}

void FUN_00483690(float *param_1, float *param_2)

{
    *param_1 = *param_2;
    param_1[4] = param_2[1];
    param_1[8] = param_2[2];
    param_1[2] = -param_2[4];
    param_1[6] = -param_2[5];
    param_1[10] = -param_2[6];
    param_1[1] = param_2[8];
    param_1[5] = param_2[9];
    param_1[9] = param_2[10];
    param_1[0xc] = -(param_1[4] * param_2[0xd] + param_1[8] * param_2[0xe] + *param_1 * param_2[0xc]);
    param_1[0xd] = -(param_2[0xd] * param_1[5] + param_2[0xe] * param_1[9] + param_2[0xc] * param_1[1]);
    param_1[0xe] = -(param_1[2] * param_2[0xc] + param_1[10] * param_2[0xe] + param_1[6] * param_2[0xd]);
    param_1[3] = param_2[3];
    param_1[7] = param_2[7];
    param_1[0xb] = param_2[0xb];
    param_1[0xf] = param_2[0xf];
    return;
}

void FUN_00483750(int param_1)

{
    int iVar1;
    undefined_16 uVar2;
    undefined_32 local_cc;
    undefined_32 local_c8;
    undefined_32 local_c4;
    undefined_8 local_c0[48];
    undefined_32 local_90;
    undefined_32 local_8c;
    undefined_32 local_88;
    undefined_8 local_80[64];
    undefined_8 local_40[64];

    iVar1 = param_1 * 0x16c;
    FUN_004830e0(&DAT_00dfb040 + param_1 * 0x5b);
    FUN_00482f10(&DAT_00dfb040 + param_1 * 0x5b);
    FUN_0044bb10(local_c0, &DAT_00dfb0b0 + iVar1);
    local_cc = local_90;
    local_c8 = local_8c;
    local_c4 = local_88;
    local_90 = 0;
    local_8c = 0;
    local_88 = 0;
    FUN_00483690(local_80, local_c0);
    mat_mult(local_40, local_80, &DAT_00dfb130 + iVar1);
    FUN_0044b690(local_40, &local_cc);
    if (0.0 < *(float *)(&DAT_00dfb17c + iVar1))
    {
        uVar2 = __ftol();
        *(undefined_16 *)(&DAT_00dfb170 + iVar1) = uVar2;
    }
    return;
}

void FUN_00483840(int param_1, undefined_32 param_2, undefined_32 param_3, int param_4)

{
    float10 fVar1;
    undefined_16 local_24;
    undefined_16 local_22;
    undefined_16 local_20;
    undefined_16 local_1c;
    undefined_16 local_1a;
    undefined_16 local_18;
    undefined_16 local_14;
    undefined_16 local_12;
    undefined_16 local_10;
    float local_8;
    float local_4;

    fVar1 = (float10)rdVector_Len3(param_4);
    if ((float10)0.01 <= fVar1)
    {
        local_8 = (float)((float10) * (float *)(param_4 + 4) * ((float10)120.0 / fVar1));
        local_4 = (float)((float10) * (float *)(param_4 + 8) * ((float10)120.0 / fVar1));
    }
    else
    {
        local_8 = 0.0;
        local_4 = -1.0;
    }
    local_14 = __ftol();
    local_12 = __ftol();
    local_10 = __ftol();
    local_1c = __ftol();
    local_1a = __ftol();
    local_18 = __ftol();
    local_24 = __ftol();
    local_22 = __ftol();
    local_20 = __ftol();
    if (param_1 == -1)
    {
        FUN_0044e140(&local_14, &local_1c, &local_24);
        return;
    }
    FUN_0044e190(param_1, &local_14, &local_1c, &local_24);
    return;
}

void FUN_00483a40(int param_1)

{
    if (param_1 != -1)
    {
        FUN_0044e1f0(param_1);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00483a60(undefined_16 param_1, undefined_16 param_2, undefined_16 param_3)

{
    _DAT_00e229a8 = param_1;
    _DAT_00e229aa = param_2;
    _DAT_00e229ac = param_3;
    return;
}

void FUN_00483a90(int param_1)

{
    undefined_32 uVar1;
    undefined_32 uVar2;

    if (DAT_0050ccf0 != 0)
    {
        if (param_1 == 1)
        {
            if (DAT_0050ccf8 != 0)
            {
                FUN_00431a50(DAT_0050ccf8, 2, 0xfffffffc, 0x10, 3);
            }
            if (DAT_0050cd00 != 0)
            {
                FUN_00431a50(DAT_0050cd00, 2, 0xfffffffc, 0x10, 3);
            }
            if (DAT_0050ccfc != 0)
            {
                FUN_00431a50(DAT_0050ccfc, 2, 3, 0x10, 2);
            }
            if (DAT_0050cd04 == 0)
                goto LAB_00483b7a;
            uVar2 = 2;
            uVar1 = 3;
        }
        else
        {
            if (DAT_0050ccf8 != 0)
            {
                FUN_00431a50(DAT_0050ccf8, 2, 3, 0x10, 2);
            }
            if (DAT_0050cd00 != 0)
            {
                FUN_00431a50(DAT_0050cd00, 2, 3, 0x10, 2);
            }
            if (DAT_0050ccfc != 0)
            {
                FUN_00431a50(DAT_0050ccfc, 2, 0xfffffffc, 0x10, 3);
            }
            if (DAT_0050cd04 == 0)
                goto LAB_00483b7a;
            uVar2 = 3;
            uVar1 = 0xfffffffc;
        }
        FUN_00431a50(DAT_0050cd04, 2, uVar1, 0x10, uVar2);
    }
LAB_00483b7a:
    FUN_0044e000(&DAT_00e229b0);
    FUN_0044db70(&DAT_00e229b0, &DAT_00dfb040 + param_1 * 0x5b);
    return;
}

void FUN_00483ba0(void)

{
    FUN_00426910(&DAT_00e229b0);
    return;
}

void FUN_00483bb0(int param_1)

{
    PTR_DAT_004c7cdc = (undefined_8 *)(&DAT_00dfb040 + param_1 * 0x5b);
    FUN_00483750(param_1);
    FUN_00483ba0(param_1);
    return;
}

void FUN_00483be0(int param_1)

{
    undefined_32 uVar1;
    float10 fVar2;
    undefined_8 local_40[64];

    if (1 < param_1)
    {
        __ftol();
        uVar1 = __ftol();
        uVar1 = __ftol(uVar1);
        uVar1 = lookup_translation(s__r_spos___d__d__d_004c7d40, uVar1);
        _sprintf(local_40, uVar1);
        create_text_entry_2(4, 0x11d, 0xd6, local_40);
        fVar2 = (float10)FUN_0045d390();
        if ((float10)0.0 < fVar2)
        {
            uVar1 = lookup_translation(s__r_scomp____5f_004c7d30, (double)fVar2);
            _sprintf(local_40, uVar1);
            create_text_entry_2(4, 300, 0xc2, local_40);
            return;
        }
    }
    return;
}

void FUN_00483ca0(void)

{
    FUN_0044de10(&DAT_00dfb1ac);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00483cb0(void)

{
    int iVar1;
    bool bVar2;
    int iVar3;
    undefined_16 extraout_var;
    uint extraout_EDX;
    int iVar4;
    undefined_16 *puVar5;
    undefined_32 *puVar6;
    undefined_32 uVar7;
    undefined_32 uVar8;
    undefined_8 *local_4;

    bVar2 = true;
    if (DAT_0050c600 == 1)
    {
        FUN_00483ca0();
        DAT_0050c600 = 0;
    }
    iVar4 = 0;
    FUN_00426910();
    iVar3 = DAT_0050cce0;
    DAT_0050cd0c = DAT_0050cd0c + 1;
    iVar1 = *(int *)(&DAT_00e34a70 + (uint)DAT_00e98244 * 4);
    _DAT_0050cce4 = DAT_0050cce0;
    DAT_0050cce0 = DAT_00e6b160;
    if (DAT_00e6b160 == 0)
    {
        DAT_0050cce0 = iVar1;
    }
    if (iVar3 == 0)
    {
        _DAT_0050cce4 = iVar1;
    }
    DAT_0050ccec = 0;
    _DAT_00e229a0 = &DAT_00dfb600 + (uint)DAT_00e98228 * 80000;
    DAT_00e229b0 = _DAT_00e229a0;
    DAT_00e6b160 = iVar1;
    FUN_00483bb0(0);
    if ((DAT_0050ccf0 == 0) || ((DAT_00dfb318 & 1) == 0))
    {
        if (DAT_0050c084 != 0)
        {
            _DAT_00e229a8 = 0;
            _DAT_00e229aa = 0;
            _DAT_00e229ac = 0;
        }
        thunk_FUN_00426910(DAT_0050c084 == 0 && (DAT_00e996e0 & 2) == 0);
    }
    else
    {
        thunk_FUN_00426910(0, (int)DAT_00e2270a, (int)DAT_00e22716, extraout_EDX & 0xffff0000 | (uint)DAT_00e22704,
                           CONCAT22(extraout_var, DAT_00e22706), DAT_0050ccf0 & 0xffff0000 | (uint)DAT_00e22708,
                           extraout_EDX & 0xffff0000 | (uint)DAT_00e22710, CONCAT22(extraout_var, DAT_00e22712),
                           DAT_0050ccf0 & 0xffff0000 | (uint)DAT_00e22714);
    }
    FUN_004283b0(1);
    local_4 = DAT_00e229b0;
    puVar6 = &DAT_00dfb040;
    puVar5 = &DAT_00e22708;
    do
    {
        if ((*(byte *)puVar6 & 1) != 0)
        {
            local_4 = DAT_00e229b0;
            FUN_00483bb0(iVar4);
            if (((DAT_0050ccf0 != 0) && (0xe22713 < (int)puVar5)) && ((DAT_00dfb318 & 1) != 0))
            {
                if (puVar5[-10] == 0)
                {
                    FUN_0044e0c0(0);
                }
                else
                {
                    FUN_0044e0c0(1);
                    FUN_0044e0e0((int)(short)puVar5[-9], 1000, (int)(short)puVar5[-8], (int)(short)puVar5[-7],
                                 (int)(short)puVar5[-6], 0xff);
                }
                if (puVar5[-5] == 0)
                {
                    if (DAT_0050cd08 != 0)
                    {
                        uVar8 = 3;
                        uVar7 = 0xfffffffc;
                        goto LAB_00483ead;
                    }
                }
                else if (DAT_0050cd08 != 0)
                {
                    uVar8 = 2;
                    uVar7 = 3;
                LAB_00483ead:
                    FUN_00431a50(DAT_0050cd08, 2, uVar7, 0x10, uVar8);
                }
            }
            if (DAT_0050c084 == 0)
            {
                FUN_0042d490(puVar6, !bVar2);
                FUN_00483a90(iVar4);
            }
            if (DAT_0050ccec < 0x1f)
            {
                vec3f_copy(&DAT_00e22820 + DAT_0050ccec * 0xc, PTR_DAT_004b91c4 + puVar6[1] * 0x7c + 0x44);
                DAT_0050ccec = DAT_0050ccec + 1;
            }
            bVar2 = false;
        }
        puVar5 = puVar5 + 6;
        iVar4 = iVar4 + 1;
        puVar6 = puVar6 + 0x5b;
        if (0xe22737 < (int)puVar5)
        {
            FUN_00483bb0(0);
            if ((((DAT_0050c048 & 0x200) == 0) || (DAT_0050c040 < 1)) || ((DAT_00e98e90 & 0x1100) != 0x1100))
            {
                FUN_004283b0(2);
                FUN_00483be0(DAT_0050c040, (uint)((int)DAT_00e229b0 - (int)local_4) >> 3);
                FUN_00450280();
                FUN_004283b0(3);
                FUN_004502b0();
            }
            FUN_00449270();
            FUN_00484130();
            DAT_0050c084 = 0;
            return;
        }
    } while (true);
}

void FUN_00483fc0(undefined_32 param_1)

{
    undefined_32 *puVar1;

    puVar1 = &DAT_00dfb040;
    do
    {
        FUN_00431a00(puVar1, param_1);
        puVar1 = puVar1 + 0x5b;
    } while ((int)puVar1 < 0xdfb5f0);
    return;
}

void FUN_00483ff0(undefined_32 param_1, undefined_32 param_2)

{
    undefined_32 *puVar1;

    puVar1 = &DAT_00dfb040;
    do
    {
        FUN_00431a10(puVar1, param_1, param_2);
        puVar1 = puVar1 + 0x5b;
    } while ((int)puVar1 < 0xdfb5f0);
    return;
}

void FUN_00484020(short param_1, short param_2, short param_3, short param_4)

{
    undefined_16 uVar1;
    int iVar2;

    if (DAT_0050cd10 < 0x1f)
    {
        param_1 = param_1 + -1;
        param_2 = param_2 + -1;
        param_3 = param_3 + 1;
        param_4 = param_4 + 1;
        if (param_1 < 0)
        {
            param_1 = 0;
        }
        if (param_2 < 0)
        {
            param_2 = 0;
        }
        if (DAT_00ec86c4 + -1 < (int)param_3)
        {
            param_3 = (short)DAT_00ec86c4 + -1;
        }
        if (DAT_00ec85e8 + -1 < (int)param_4)
        {
            param_4 = (short)DAT_00ec85e8 + -1;
        }
        if ((param_1 < param_3) && (param_2 < param_4))
        {
            iVar2 = DAT_0050cd10 * 8;
            uVar1 = __ftol();
            *(undefined_16 *)(&DAT_00e22720 + iVar2) = uVar1;
            uVar1 = __ftol();
            *(undefined_16 *)(&DAT_00e22722 + iVar2) = uVar1;
            uVar1 = __ftol();
            *(undefined_16 *)(&DAT_00e22724 + iVar2) = uVar1;
            uVar1 = __ftol();
            DAT_0050cd10 = DAT_0050cd10 + 1;
            *(undefined_16 *)(&DAT_00e22726 + iVar2) = uVar1;
        }
    }
    return;
}

void FUN_00484130(void)

{
    DAT_0050cd10 = 0;
    return;
}

int *FUN_00484140(undefined_32 param_1, int param_2, char *param_3)

{
    int *piVar1;
    int iVar2;
    int *piVar3;

    // PlatformAbstraction->allocator_large
    piVar1 = (int *)(**(code **)(DAT_00ecc420 + 0x20))(0x8c);
    if (piVar1 == NULL)
    {
        return NULL;
    }
    piVar3 = piVar1;
    MEMSET(iVar2, piVar3, 0, 0x23)
    if (-1 < param_2)
    {
        if (param_2 < 3)
        {
            // Mode 0, 1, 2: Search for "<path>\\*.*" or just "*.*"
            construct_path(piVar1 + 2, 0x80, param_1, &DAT_004c7d54);
        }
        else if (param_2 == 3)
        {
            // Mode 3: Search for a specific extension using
            // "<path>\\*.<extension>"
            if (*param_3 == '.')
            {
                param_3 = param_3 + 1;
            }
            _sprintf(&DAT_00ecbc20, &DAT_004c7d58, param_3);
            construct_path(piVar1 + 2, 0x80, param_1, &DAT_00ecbc20);
            *piVar1 = 3;
            return piVar1;
        }
    }
    *piVar1 = param_2;
    return piVar1;
}

// static import 004841e0
void __findclose(int param_1)

{
    if (param_1 != 0)
    {
        if (*(int *)(param_1 + 4) != 0)
        {
            FUN_004a0ec0(*(undefined_32 *)(param_1 + 0x88));
        }
        if (param_1 != 0)
        {
            // PlatformAbstraction->allocator_free
            (**(code **)(DAT_00ecc420 + 0x24))(param_1);
        }
    }
    return;
}

undefined_32 FUN_00484220(int *param_1, undefined_32 *param_2)

{
    char cVar1;
    bool bVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    undefined_32 *puVar6;
    char *pcVar7;
    char *pcVar8;
    undefined_32 *puVar9;
    uint local_118[3];
    undefined_32 local_10c;
    char local_104[260];

    if (param_1 == NULL)
    {
        return 0;
    }
    iVar3 = param_1[1];
    param_1[1] = iVar3 + 1;
    if (iVar3 == 0)
    {
        iVar3 = __findfirst(param_1 + 2, local_118);
        param_1[0x22] = iVar3;
    }
    else
    {
        iVar3 = __findnext(param_1[0x22], local_118);
    }

    // Check for errors
    if (iVar3 == -1)
    {
        return 0;
    }

    iVar3 = *param_1;
    if ((((iVar3 == 0) || (iVar3 == 3)) || ((iVar3 == 1 && ((local_118[0] & 0x10) == 0))))
        || ((iVar3 == 2 && ((local_118[0] & 0x10) != 0))))
    {
        bVar2 = true;
    }
    else
    {
        bVar2 = false;
    }
    if (!bVar2)
    {
        return 0;
    }

    uVar4 = -1;
    pcVar7 = local_104;
    do
    {
        pcVar8 = pcVar7;
        if (uVar4 == 0)
            break;
        uVar4 = uVar4 - 1;
        pcVar8 = pcVar7 + 1;
        cVar1 = *pcVar7;
        pcVar7 = pcVar8;
    } while (cVar1 != '\0');
    uVar4 = ~uVar4;
    puVar6 = (undefined_32 *)(pcVar8 + -uVar4);
    puVar9 = param_2;
    QMEMCPY(uVar5, puVar6, puVar9, uVar4 >> 2)
    for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1)
    {
        *(undefined_8 *)puVar9 = *(undefined_8 *)puVar6;
        puVar6 = (undefined_32 *)((int)puVar6 + 1);
        puVar9 = (undefined_32 *)((int)puVar9 + 1);
    }
    param_2[0x41] = local_118[0] & 0x10;
    param_2[0x42] = local_10c;
    return 1;
}

// 00484310
void create_dir(LPCSTR param_1)

{
    CreateDirectoryA(param_1, (LPSECURITY_ATTRIBUTES)0x0);
    return;
}

// Is there something here ? Ghidra doesn't dump anything but notes show this
// function
// //----- (00484320) --------------------------------------------------------
// BOOL __cdecl delete_file(LPCSTR lpFileName)
// {
//     return DeleteFileA(lpFileName);
// }

//----- (00484330) --------------------------------------------------------
// Returns 1 on success, something else otherwise
BOOL delete_dir(LPCSTR param_1)

{
    char cVar1;
    byte bVar2;
    HANDLE hFindFile;
    CHAR *pCVar3;
    BOOL BVar4;
    uint uVar5;
    uint uVar6;
    int iVar7;
    int iVar8;
    byte *pbVar9;
    undefined_32 *puVar10;
    LPCSTR pCVar11;
    char *pcVar12;
    char *pcVar13;
    CHAR *pCVar14;
    undefined_32 *puVar15;
    bool bVar16;
    undefined_32 local_244[65];
    _WIN32_FIND_DATAA local_140;

    uVar5 = -1;
    pCVar11 = param_1;
    do
    {
        pcVar12 = pCVar11;
        if (uVar5 == 0)
            break;
        uVar5 = uVar5 - 1;
        pcVar12 = pCVar11 + 1;
        cVar1 = *pCVar11;
        pCVar11 = pcVar12;
    } while (cVar1 != '\0');
    uVar5 = ~uVar5;
    puVar10 = (undefined_32 *)(pcVar12 + -uVar5);
    puVar15 = local_244;
    QMEMCPY(uVar6, puVar10, puVar15, uVar5 >> 2)
    iVar8 = 1;
    for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
    {
        *(undefined_8 *)puVar15 = *(undefined_8 *)puVar10;
        puVar10 = (undefined_32 *)((int)puVar10 + 1);
        puVar15 = (undefined_32 *)((int)puVar15 + 1);
    }
    uVar5 = -1;

    pcVar12 = &DAT_004c7d60;
    do
    {
        pcVar13 = pcVar12;
        if (uVar5 == 0)
            break;
        uVar5 = uVar5 - 1;
        pcVar13 = pcVar12 + 1;
        cVar1 = *pcVar12;
        pcVar12 = pcVar13;
    } while (cVar1 != '\0');
    uVar5 = ~uVar5;
    iVar7 = -1;
    puVar10 = local_244;
    do
    {
        puVar15 = puVar10;
        if (iVar7 == 0)
            break;
        iVar7 = iVar7 + -1;
        puVar15 = (undefined_32 *)((int)puVar10 + 1);
        cVar1 = *(char *)puVar10;
        puVar10 = puVar15;
    } while (cVar1 != '\0');
    puVar10 = (undefined_32 *)(pcVar13 + -uVar5);
    puVar15 = (undefined_32 *)((int)puVar15 + -1);
    QMEMCPY(uVar6, puVar10, puVar15, uVar5 >> 2)
    for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
    {
        *(undefined_8 *)puVar15 = *(undefined_8 *)puVar10;
        puVar10 = (undefined_32 *)((int)puVar10 + 1);
        puVar15 = (undefined_32 *)((int)puVar15 + 1);
    }

    hFindFile = FindFirstFileA((LPCSTR)local_244, &local_140);
    if (hFindFile == (HANDLE)-1)
    {
        iVar8 = 0;
    }
    else
    {
        do
        {
            if (local_140.dwFileAttributes == 0x10)
            {
                pbVar9 = &DAT_004b3b2c;
                pCVar3 = local_140.cFileName;
                do
                {
                    bVar2 = *pCVar3;
                    bVar16 = bVar2 < *pbVar9;
                    if (bVar2 != *pbVar9)
                    {
                    LAB_004843f5:
                        iVar7 = (1 - (uint)bVar16) - (uint)(bVar16 != 0);
                        goto LAB_004843fa;
                    }
                    if (bVar2 == 0)
                        break;
                    bVar2 = pCVar3[1];
                    bVar16 = bVar2 < pbVar9[1];
                    if (bVar2 != pbVar9[1])
                        goto LAB_004843f5;
                    pCVar3 = pCVar3 + 2;
                    pbVar9 = pbVar9 + 2;
                } while (bVar2 != 0);
                iVar7 = 0;
            LAB_004843fa:
                if (iVar7 != 0)
                {
                    pbVar9 = &DAT_004b4f44;
                    pCVar3 = local_140.cFileName;
                    do
                    {
                        bVar2 = *pCVar3;
                        bVar16 = bVar2 < *pbVar9;
                        if (bVar2 != *pbVar9)
                        {
                        LAB_00484432:
                            iVar7 = (1 - (uint)bVar16) - (uint)(bVar16 != 0);
                            goto LAB_00484437;
                        }
                        if (bVar2 == 0)
                            break;
                        bVar2 = pCVar3[1];
                        bVar16 = bVar2 < pbVar9[1];
                        if (bVar2 != pbVar9[1])
                            goto LAB_00484432;
                        pCVar3 = pCVar3 + 2;
                        pbVar9 = pbVar9 + 2;
                    } while (bVar2 != 0);
                    iVar7 = 0;
                LAB_00484437:
                    if (iVar7 != 0)
                    {
                        uVar5 = -1;
                        pCVar11 = param_1;
                        do
                        {
                            pcVar12 = pCVar11;
                            if (uVar5 == 0)
                                break;
                            uVar5 = uVar5 - 1;
                            pcVar12 = pCVar11 + 1;
                            cVar1 = *pCVar11;
                            pCVar11 = pcVar12;
                        } while (cVar1 != '\0');
                        uVar5 = ~uVar5;
                        puVar10 = (undefined_32 *)(pcVar12 + -uVar5);
                        puVar15 = local_244;
                        QMEMCPY(uVar6, puVar10, puVar15, uVar5 >> 2)
                        for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                        {
                            *(undefined_8 *)puVar15 = *(undefined_8 *)puVar10;
                            puVar10 = (undefined_32 *)((int)puVar10 + 1);
                            puVar15 = (undefined_32 *)((int)puVar15 + 1);
                        }
                        uVar5 = -1;
                        pcVar12 = &DAT_004b3b48;
                        do
                        {
                            pcVar13 = pcVar12;
                            if (uVar5 == 0)
                                break;
                            uVar5 = uVar5 - 1;
                            pcVar13 = pcVar12 + 1;
                            cVar1 = *pcVar12;
                            pcVar12 = pcVar13;
                        } while (cVar1 != '\0');
                        uVar5 = ~uVar5;
                        iVar8 = -1;
                        puVar10 = local_244;
                        do
                        {
                            puVar15 = puVar10;
                            if (iVar8 == 0)
                                break;
                            iVar8 = iVar8 + -1;
                            puVar15 = (undefined_32 *)((int)puVar10 + 1);
                            cVar1 = *(char *)puVar10;
                            puVar10 = puVar15;
                        } while (cVar1 != '\0');
                        puVar10 = (undefined_32 *)(pcVar13 + -uVar5);
                        puVar15 = (undefined_32 *)((int)puVar15 + -1);
                        QMEMCPY(uVar6, puVar10, puVar15, uVar5 >> 2)
                        for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                        {
                            *(undefined_8 *)puVar15 = *(undefined_8 *)puVar10;
                            puVar10 = (undefined_32 *)((int)puVar10 + 1);
                            puVar15 = (undefined_32 *)((int)puVar15 + 1);
                        }
                        uVar5 = -1;
                        pCVar3 = local_140.cFileName;
                        do
                        {
                            pCVar14 = pCVar3;
                            if (uVar5 == 0)
                                break;
                            uVar5 = uVar5 - 1;
                            pCVar14 = pCVar3 + 1;
                            cVar1 = *pCVar3;
                            pCVar3 = pCVar14;
                        } while (cVar1 != '\0');
                        uVar5 = ~uVar5;
                        iVar8 = -1;
                        puVar10 = local_244;
                        do
                        {
                            puVar15 = puVar10;
                            if (iVar8 == 0)
                                break;
                            iVar8 = iVar8 + -1;
                            puVar15 = (undefined_32 *)((int)puVar10 + 1);
                            cVar1 = *(char *)puVar10;
                            puVar10 = puVar15;
                        } while (cVar1 != '\0');
                        pCVar3 = pCVar14 + -uVar5;
                        puVar10 = (undefined_32 *)((int)puVar15 + -1);
                        for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1)
                        {
                            *puVar10 = *(undefined_32 *)pCVar3;
                            pCVar3 = pCVar3 + 4;
                            puVar10 = puVar10 + 1;
                        }
                        for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                        {
                            *(CHAR *)puVar10 = *pCVar3;
                            pCVar3 = pCVar3 + 1;
                            puVar10 = (undefined_32 *)((int)puVar10 + 1);
                        }
                        iVar8 = delete_dir(local_244);
                    }
                }
            }
            else
            {
                uVar5 = -1;
                pCVar11 = param_1;
                do
                {
                    pcVar12 = pCVar11;
                    if (uVar5 == 0)
                        break;
                    uVar5 = uVar5 - 1;
                    pcVar12 = pCVar11 + 1;
                    cVar1 = *pCVar11;
                    pCVar11 = pcVar12;
                } while (cVar1 != '\0');
                uVar5 = ~uVar5;
                puVar10 = (undefined_32 *)(pcVar12 + -uVar5);
                puVar15 = local_244;
                QMEMCPY(uVar6, puVar10, puVar15, uVar5 >> 2)
                for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                {
                    *(undefined_8 *)puVar15 = *(undefined_8 *)puVar10;
                    puVar10 = (undefined_32 *)((int)puVar10 + 1);
                    puVar15 = (undefined_32 *)((int)puVar15 + 1);
                }
                uVar5 = -1;
                pcVar12 = &DAT_004b3b48;
                do
                {
                    pcVar13 = pcVar12;
                    if (uVar5 == 0)
                        break;
                    uVar5 = uVar5 - 1;
                    pcVar13 = pcVar12 + 1;
                    cVar1 = *pcVar12;
                    pcVar12 = pcVar13;
                } while (cVar1 != '\0');
                uVar5 = ~uVar5;
                iVar8 = -1;
                puVar10 = local_244;
                do
                {
                    puVar15 = puVar10;
                    if (iVar8 == 0)
                        break;
                    iVar8 = iVar8 + -1;
                    puVar15 = (undefined_32 *)((int)puVar10 + 1);
                    cVar1 = *(char *)puVar10;
                    puVar10 = puVar15;
                } while (cVar1 != '\0');
                puVar10 = (undefined_32 *)(pcVar13 + -uVar5);
                puVar15 = (undefined_32 *)((int)puVar15 + -1);
                QMEMCPY(uVar6, puVar10, puVar15, uVar5 >> 2)
                for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                {
                    *(undefined_8 *)puVar15 = *(undefined_8 *)puVar10;
                    puVar10 = (undefined_32 *)((int)puVar10 + 1);
                    puVar15 = (undefined_32 *)((int)puVar15 + 1);
                }
                uVar5 = -1;
                pCVar3 = local_140.cFileName;
                do
                {
                    pCVar14 = pCVar3;
                    if (uVar5 == 0)
                        break;
                    uVar5 = uVar5 - 1;
                    pCVar14 = pCVar3 + 1;
                    cVar1 = *pCVar3;
                    pCVar3 = pCVar14;
                } while (cVar1 != '\0');
                uVar5 = ~uVar5;
                iVar8 = -1;
                puVar10 = local_244;
                do
                {
                    puVar15 = puVar10;
                    if (iVar8 == 0)
                        break;
                    iVar8 = iVar8 + -1;
                    puVar15 = (undefined_32 *)((int)puVar10 + 1);
                    cVar1 = *(char *)puVar10;
                    puVar10 = puVar15;
                } while (cVar1 != '\0');
                pCVar3 = pCVar14 + -uVar5;
                puVar10 = (undefined_32 *)((int)puVar15 + -1);
                for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1)
                {
                    *puVar10 = *(undefined_32 *)pCVar3;
                    pCVar3 = pCVar3 + 4;
                    puVar10 = puVar10 + 1;
                }
                for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                {
                    *(CHAR *)puVar10 = *pCVar3;
                    pCVar3 = pCVar3 + 1;
                    puVar10 = (undefined_32 *)((int)puVar10 + 1);
                }
                iVar8 = DeleteFileA((LPCSTR)local_244);
            }
            BVar4 = FindNextFileA(hFindFile, &local_140);
        } while ((BVar4 != 0) && (iVar8 == 1));
        FindClose(hFindFile);
        if (iVar8 != 0)
        {
            BVar4 = RemoveDirectoryA(param_1);
            return BVar4;
        }
    }
    return iVar8;
}

//----- (004845B0) --------------------------------------------------------
// a1 = path, seperated using backslashes
// Returns filename, or full path if no backslash was found
char *get_basename(char *param_1)

{
    char *pcVar1;
    char cVar2;
    char *pcVar3;

    pcVar3 = _strrchr(param_1, '\\');
    if (pcVar3 != NULL)
    {
        cVar2 = *pcVar3;
        while (cVar2 == '\\')
        {
            pcVar1 = pcVar3 + 1;
            pcVar3 = pcVar3 + 1;
            cVar2 = *pcVar1;
        }
        return pcVar3;
    }
    return param_1;
}

//----- (004845E0) --------------------------------------------------------
// a1 = path, seperated using backslashes
// Returns extension or NULL if no extension found
char *get_extension(undefined_32 param_1)

{
    char *pcVar1;

    pcVar1 = (char *)get_basename(param_1);
    pcVar1 = _strrchr(pcVar1, 0x2e);
    if (pcVar1 == NULL)
    {
        return NULL;
    }
    return pcVar1 + 1;
}

undefined_32 FUN_00484600(char *param_1, char *param_2)

{
    char cVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    undefined_32 *puVar5;
    char *pcVar6;
    char *pcVar7;
    char *pcVar8;
    undefined_32 *puVar9;

    iVar2 = get_extension(param_1);
    if (iVar2 != 0)
    {
        return 0;
    }
    uVar3 = -1;
    pcVar7 = &DAT_004b3b2c;
    do
    {
        pcVar8 = pcVar7;
        if (uVar3 == 0)
            break;
        uVar3 = uVar3 - 1;
        pcVar8 = pcVar7 + 1;
        cVar1 = *pcVar7;
        pcVar7 = pcVar8;
    } while (cVar1 != '\0');
    uVar3 = ~uVar3;
    iVar2 = -1;
    pcVar7 = param_1;
    do
    {
        pcVar6 = pcVar7;
        if (iVar2 == 0)
            break;
        iVar2 = iVar2 + -1;
        pcVar6 = pcVar7 + 1;
        cVar1 = *pcVar7;
        pcVar7 = pcVar6;
    } while (cVar1 != '\0');
    puVar5 = (undefined_32 *)(pcVar8 + -uVar3);
    puVar9 = (undefined_32 *)(pcVar6 + -1);
    QMEMCPY(uVar4, puVar5, puVar9, uVar3 >> 2)
    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
    {
        *(undefined_8 *)puVar9 = *(undefined_8 *)puVar5;
        puVar5 = (undefined_32 *)((int)puVar5 + 1);
        puVar9 = (undefined_32 *)((int)puVar9 + 1);
    }
    uVar3 = -1;
    do
    {
        pcVar7 = param_2;
        if (uVar3 == 0)
            break;
        uVar3 = uVar3 - 1;
        pcVar7 = param_2 + 1;
        cVar1 = *param_2;
        param_2 = pcVar7;
    } while (cVar1 != '\0');
    uVar3 = ~uVar3;
    iVar2 = -1;
    do
    {
        pcVar8 = param_1;
        if (iVar2 == 0)
            break;
        iVar2 = iVar2 + -1;
        pcVar8 = param_1 + 1;
        cVar1 = *param_1;
        param_1 = pcVar8;
    } while (cVar1 != '\0');
    puVar5 = (undefined_32 *)(pcVar7 + -uVar3);
    puVar9 = (undefined_32 *)(pcVar8 + -1);
    QMEMCPY(uVar4, puVar5, puVar9, uVar3 >> 2)
    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
    {
        *(undefined_8 *)puVar9 = *(undefined_8 *)puVar5;
        puVar5 = (undefined_32 *)((int)puVar5 + 1);
        puVar9 = (undefined_32 *)((int)puVar9 + 1);
    }
    return 1;
}

void FUN_00484670(undefined_32 param_1)

{
    int iVar1;

    iVar1 = get_extension(param_1);
    if (iVar1 != 0)
    {
        *(undefined_8 *)(iVar1 + -1) = 0;
    }
    return;
}

char *_construct_path(char *param_1, char *param_2, int param_3)

{
    char cVar1;
    uint uVar2;
    uint uVar3;
    char *pcVar4;

    uVar2 = strlen(param_1);
    uVar3 = uVar2 - 1;
    if (((param_1[uVar2 - 2] != '\\') && ((int)uVar3 < param_3 + -1)) && (*param_1 != '\0'))
    {
        param_1[uVar3] = '\\';
        param_1[uVar2] = '\0';
        uVar3 = uVar2;
    }
    _strncat(param_1, param_2, (param_3 - uVar3) - 1);
    return param_1;
}

//----- (004846E0) --------------------------------------------------------
// a1 = output string
// a2 = output buffer length
// a3 = path name
// a4 = filename
void construct_path(char *param_1, int param_2, char *param_3, undefined_32 param_4)
{
    _strncpy(param_1, param_3, param_2 - 1);
    param_1[param_2 + -1] = '\0';
    _construct_path(param_1, param_4, param_2);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 00484720
uint copy_platform_abstraction(uint param_1)

{
    ushort in_FPUControlWord;

    DAT_00ecc420 = param_1;
    DAT_00ec8c80 = in_FPUControlWord;
    DAT_00ec8c84 = CONCAT11(0xb, (char)in_FPUControlWord);
    DAT_00ec8c82 = CONCAT11(7, (char)in_FPUControlWord);
    _DAT_0050d518 = 1;
    return param_1 & 0xffff0000 | (uint)in_FPUControlWord;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00484760(void)

{
    _DAT_0050d518 = 0;
    return;
}

undefined_32 FUN_00484780(code *param_1, char *param_2, undefined_32 param_3, undefined_32 param_4)

{
    int iVar1;
    char cVar2;
    bool bVar3;
    int iVar4;
    int iVar5;

    iVar5 = 0;
    bVar3 = false;
    if (param_1 != (code *)0x0)
    {
        iVar4 = 0;
        cVar2 = *param_2;
        while (cVar2 != '\0')
        {
            if (cVar2 == '\\')
            {
                bVar3 = true;
                iVar5 = iVar4;
            }
            iVar1 = iVar4 + 1;
            iVar4 = iVar4 + 1;
            cVar2 = param_2[iVar1];
        }
        if (bVar3)
        {
            iVar5 = iVar5 + 1;
        }
        iVar5 = __snprintf(&DAT_0050cd18, 0x800, param_2 + iVar5);
        iVar4 = __snprintf(&DAT_0050cd18 + iVar5, 0x800 - iVar5, s___d___004c7d68, param_3);
        __vsnprintf(&DAT_0050cd18 + iVar5 + iVar4, (0x800 - iVar5) - iVar4, param_4, &stack0x00000014);
        (*param_1)(&DAT_0050cd18);
    }
    return 0;
}

// LAB_00484820
undefined4 platform_writeConsole(undefined4 param_1)

{
    __vsnprintf(&DAT_00ecbc20, 0x800, param_1, &stack0x00000008);
    writeConsole(&DAT_00ecbc20, 7);
    return 0x800;
}

char *FUN_00484860(char *param_1)

{
    char *pcVar1;

    pcVar1 = _strrchr(param_1, 0x5c);
    if (pcVar1 != NULL)
    {
        return pcVar1 + 1;
    }
    return param_1;
}

// 00484880
int stdCalcBitPos(int param_1)

{
    int iVar1;

    iVar1 = 0;
    if (1 < param_1)
    {
        do
        {
            param_1 = param_1 >> 1;
            iVar1 = iVar1 + 1;
        } while (1 < param_1);
    }
    return iVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_004848a0(void)

{
    int iVar1;
    undefined_32 uVar2;

    // Check if we already have a A3D instance
    if (IA3dX_0050d548 != NULL)
    {
        return 0;
    }

    // Load A3D COM module
    FUN_0049e940();

    // Presumably creates A3D instance
    iVar1 = FUN_0049e970(0, &IA3dX_0050d548, 0, 0x80);
    if ((iVar1 < 0) || (IA3dX_0050d548 == NULL))
    {
        DAT_004c7d80 = 0;
        DAT_0050d550 = 0;
        if (iVar1 < 0)
        {
            IA3dX_0050d548 = NULL;
            return 0;
        }
    }
    else
    {
        DAT_0050d550 = 1;
    }
    _DAT_0050d520 = 0x24;

    // IA3dX_50D548->GetHardwareCaps(&dword_50D520);
    (**(code **)(*IA3dX_0050d548 + 0x2c))(IA3dX_0050d548, &DAT_0050d520);
    DAT_0050d55c = DAT_0050d524 & 0x28;
    DAT_0050d554 = DAT_0050d524 & 2;
    uVar2 = get_hwnd();
    // IA3dX_50D548->SetCooperativeLevel(v2, 1)
    iVar1 = (**(code **)(*IA3dX_0050d548 + 0x4c))(IA3dX_0050d548, uVar2, 1);
    if (iVar1 < 0)
    {
        // IA3dX_50D548->Release();
        (**(code **)(*IA3dX_0050d548 + 8))(IA3dX_0050d548);
        IA3dX_0050d548 = NULL;
        return 0;
    }
    // IA3dX_50D548->SetCoordinateSystem(0);
    // IA3dX_50D548->SetNumFallbackSources(8);
    // IA3dX_50D548->GetOutputGain(&unk_50D544);
    (**(code **)(*IA3dX_0050d548 + 0x5c))(IA3dX_0050d548, 0);
    (**(code **)(*IA3dX_0050d548 + 0x6c))(IA3dX_0050d548, 8);
    (**(code **)(*IA3dX_0050d548 + 0x68))(IA3dX_0050d548, &DAT_0050d544);
    set_output_gain(DAT_004c7d70);
    if (DAT_0050d550 != 0)
    {
        // IA3dX_50D548->QueryInterface(&unk_4AE158, &dword_50D560)
        iVar1 = (**(code **)*IA3dX_0050d548)(IA3dX_0050d548, &DAT_004ae158, &DAT_0050d560);
        if (iVar1 < 0)
        {
            DAT_004c7d80 = 0;
            DAT_0050d550 = 0;
            DAT_0050d560 = 0;
            return 1;
        }
        // IA3dX_50D548->SetUnitsPerMeter(
        //     3.28f); // Game uses feet as unit (encoded as 0x4051EB85)
        // IA3dX_50D548->SetDistanceModelScale(LODWORD(flt_4C7D78));
        // IA3dX_50D548->SetDopplerScale(LODWORD(flt_4C7D74));
        (**(code **)(*IA3dX_0050d548 + 0x80))(IA3dX_0050d548, 0x4051eb85);
        (**(code **)(*IA3dX_0050d548 + 0x90))(IA3dX_0050d548, DAT_004c7d78);
        (**(code **)(*IA3dX_0050d548 + 0x88))(IA3dX_0050d548, DAT_004c7d74);
    }
    return 1;
}

void FUN_00484a20(void)

{
    if (IA3dX_0050d548 != NULL)
    {
        if (DAT_0050d564 != NULL)
        {
            (**(code **)(*DAT_0050d564 + 8))(DAT_0050d564);
        }
        if (DAT_0050d560 != NULL)
        {
            (**(code **)(*DAT_0050d560 + 8))(DAT_0050d560);
        }
        (**(code **)(*IA3dX_0050d548 + 8))(IA3dX_0050d548);
        DAT_0050d564 = NULL;
        DAT_0050d560 = NULL;
        IA3dX_0050d548 = NULL;
        CoUninitialize();
        return;
    }
    return;
}

// 00484a80
void set_output_gain(undefined_32 param_1)

{
    if (IA3dX_0050d548 != NULL)
    {
        // IA3dX_50D548->SetOutputGain(a1);
        (**(code **)(*IA3dX_0050d548 + 100))(IA3dX_0050d548, param_1);
    }
    return;
}

// WARNING: Restarted to delay deadcode elimination for space: stack

int *FUN_00484aa0(int param_1)

{
    int iVar1;
    uint uVar2;
    undefined_32 unaff_EBX;
    undefined_32 unaff_ESI;
    byte bVar3;
    uint unaff_retaddr;
    byte param_5;
    undefined_16 uStack_20;
    ushort uStack_1e;
    undefined_16 uStack_1c;
    undefined_16 uStack_1a;
    int local_18;
    uint uStack_14;
    undefined_16 uStack_10;
    int iStack_4;

    uStack_1c = (undefined_16)unaff_EBX;
    uStack_1a = (undefined_16)((uint)unaff_EBX >> 0x10);
    uStack_20 = (undefined_16)unaff_ESI;
    uStack_1e = (ushort)((uint)unaff_ESI >> 0x10);
    local_18 = 0;
    if (IA3dX_0050d548 == NULL)
    {
        return NULL;
    }
    bVar3 = param_1 != 0;
    if ((param_5 & 4) != 0)
    {
        bVar3 = bVar3 | 4;
    }
    iVar1 = (**(code **)(*IA3dX_0050d548 + 0x44))(IA3dX_0050d548, bVar3);
    if (-1 < iVar1)
    {
        if (DAT_0050d550 == 0)
        {
            iVar1 = (**(code **)(local_18 + 0xd0))(&local_18, 0x20);
            if (iVar1 < 0)
                goto LAB_00484b8b;
        }
        uStack_1e = (param_1 != 0) + 1;
        uStack_1c = (undefined_16)iStack_4;
        uStack_1a = (undefined_16)((uint)iStack_4 >> 0x10);
        uStack_20 = 1;
        uVar2 = (int)((uint)uStack_1e * (unaff_retaddr & 0xffff)) >> 3;
        uStack_14 = uVar2 | unaff_retaddr << 0x10;
        uStack_10 = 0;
        local_18 = uVar2 * iStack_4;
        iVar1 = (**(code **)(local_18 + 0x1c))(&local_18, &uStack_20);
        if (-1 < iVar1)
        {
            iVar1 = (**(code **)(local_18 + 0x14))(&local_18, param_1);
            if (-1 < iVar1)
            {
                return &local_18;
            }
        }
    }
LAB_00484b8b:
    if (&local_18 != NULL)
    {
        (**(code **)(local_18 + 8))(&local_18);
    }
    return NULL;
}

uint FUN_00484bb0(uint param_1)

{
    int iVar1;

    if (IA3dX_0050d548 == NULL)
    {
        return 0;
    }
    iVar1 = (**(code **)(*IA3dX_0050d548 + 0x48))(IA3dX_0050d548, param_1, &param_1);
    return param_1 & (iVar1 < 0) - 1;
}

bool FUN_00484be0(int *param_1)

{
    int *piVar1;
    int iVar2;
    uint unaff_ESI;
    int unaff_retaddr;

    piVar1 = param_1;
    if (param_1 == NULL)
    {
        return false;
    }
    (**(code **)(*param_1 + 0x28))(param_1, &param_1);
    iVar2 = 1;
    if ((unaff_ESI & 4) == 0)
    {
        iVar2 = unaff_retaddr;
    }
    iVar2 = (**(code **)(*piVar1 + 0x34))(piVar1, iVar2 != 0);
    return -1 < iVar2;
}

void FUN_00484c30(int *param_1, float param_2)

{
    float local_8;
    float local_4;

    if (IA3dX_0050d548 != 0)
    {
        local_8 = 1.0 - param_2;
        local_4 = param_2 - -1.0;
        if (local_8 <= 1.0)
        {
            if (1.0 < local_4)
            {
                local_8 = local_8 / local_4;
                local_4 = 1.0;
            }
        }
        else
        {
            local_4 = local_4 / local_8;
            local_8 = 1.0;
        }
        if (local_8 < -1.0)
        {
            local_8 = -1.0;
        }
        else if (1.0 < local_8)
        {
            local_8 = 1.0;
        }
        if (local_4 < -1.0)
        {
            local_4 = -1.0;
        }
        else if (1.0 < local_4)
        {
            local_4 = 1.0;
        }
        (**(code **)(*param_1 + 0xe4))(param_1, 2, &local_8);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00484d40(float param_1)

{
    if (param_1 < 0.0)
    {
        volume_setting_004c7d7c = 0.0;
        return;
    }
    if (param_1 <= 10.0)
    {
        volume_setting_004c7d7c = param_1;
        return;
    }
    volume_setting_004c7d7c = 10.0;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 00484d90
void FUN_00484d90(A3dSource *param_1, float param_2)

{
    uint uVar1;

    if (IA3dX_0050d548 != 0)
    {
        uVar1 = get_a3dsource_rendermode(param_1);
        if ((uVar1 & A3DSOURCE_RENDERMODE_NATIVE) != 0)
        {
            param_2 = param_2 * volume_setting_004c7d7c;
        }
        // return a1->SetGain(a2);
        (**(code **)(*param_1 + 0xa0))(param_1, param_2);
    }
    return;
}

void FUN_00484dd0(int *param_1, undefined_32 param_2, undefined_32 param_3)

{
    if (IA3dX_0050d548 != 0)
    {
        (**(code **)(*param_1 + 0xa8))(param_1, param_3);
    }
    return;
}

void FUN_00484df0(int *param_1, undefined_32 param_2, undefined_32 param_3)

{
    (**(code **)(*param_1 + 0x98))(param_1, param_2, param_3, 1);
    return;
}

// 00484E10
void set_listener_position(int *param_1, undefined_32 *param_2)

{
    // return a1->SetPosition3f(a2[0], a2[2], -a2[1]);
    (**(code **)(*param_1 + 0x50))(param_1, *param_2, param_2[2], -(float)param_2[1]);
    return;
}

void FUN_00484e40(int *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;

    if (*param_2 < -340.0)
    {
        fVar1 = -340.0;
    }
    else if (340.0 < *param_2)
    {
        fVar1 = 340.0;
    }
    else
    {
        fVar1 = *param_2;
    }
    *param_2 = fVar1;
    if (param_2[1] < -10.0)
    {
        fVar2 = -10.0;
    }
    else if (10.0 < param_2[1])
    {
        fVar2 = 10.0;
    }
    else
    {
        fVar2 = param_2[1];
    }
    param_2[1] = fVar2;
    if (param_2[2] < -340.0)
    {
        fVar3 = -340.0;
    }
    else if (340.0 < param_2[2])
    {
        fVar3 = 340.0;
    }
    else
    {
        fVar3 = param_2[2];
    }
    param_2[2] = fVar3;
    (**(code **)(*param_1 + 0x80))(param_1, fVar1, fVar3, -fVar2);
    return;
}

void FUN_00484f10(undefined_32 *param_1)

{
    if (DAT_0050d560 != NULL)
    {
        (**(code **)(*DAT_0050d560 + 0x3c))(DAT_0050d560, *param_1, param_1[2], -(float)param_1[1]);
    }
    return;
}

void FUN_00484f40(undefined_32 *param_1)

{
    undefined_32 *puVar1;
    undefined_32 *unaff_ESI;

    if (DAT_0050d560 != NULL)
    {
        puVar1 = (undefined_32 *)-(float)param_1[1];
        (**(code **)(*DAT_0050d560 + 0xc))(DAT_0050d560, *param_1, param_1[2]);
        (**(code **)(*DAT_0050d560 + 0x2c))(DAT_0050d560, *puVar1, puVar1[2], -(float)puVar1[1], *unaff_ESI,
                                            unaff_ESI[2], -(float)unaff_ESI[1]);
    }
    return;
}

void FUN_00484fa0(void)

{
    if (IA3dX_0050d548 != NULL)
    {
        (**(code **)(*IA3dX_0050d548 + 0x34))(IA3dX_0050d548);
    }
    return;
}

void FUN_00484fb0(int *param_1, float param_2)

{
    if ((IA3dX_0050d548 != 0) && (param_1 != NULL))
    {
        if (param_2 < 0.0)
        {
            param_2 = 0.0;
        }
        else if (10.0 < param_2)
        {
            (**(code **)(*param_1 + 0xb8))(param_1, 10.0f);
            return;
        }
        (**(code **)(*param_1 + 0xb8))(param_1, param_2);
    }
    return;
}

void FUN_00485020(int *param_1, undefined_32 param_2)

{
    (**(code **)(*param_1 + 0xd0))(param_1, param_2);
    return;
}

int *get_a3dsource_rendermode(int *param_1)

{
    undefined_32 local_4;

    local_4 = -1;
    (**(code **)(*param_1 + 0xd4))(param_1, &local_4);
    return param_1;
}

undefined_32 FUN_00485070(int *param_1)

{
    if (IA3dX_0050d548 == 0)
    {
        return 0;
    }
    (**(code **)(*param_1 + 0x38))(param_1);
    (**(code **)(*param_1 + 0x3c))(param_1);
    return 1;
}

// 004850a0
void release_ia3d(int *param_1)

{
    if (IA3dX_0050d548 != 0)
    {
        // a1->Release();
        (**(code **)(*param_1 + 8))(param_1);
    }
    return;
}

undefined_32 FUN_004850c0(int *param_1)

{
    int *piVar1;
    int iVar2;
    uint unaff_ESI;
    int unaff_retaddr;

    piVar1 = param_1;
    if (param_1 == NULL)
    {
        return -1;
    }
    iVar2 = (**(code **)(*param_1 + 0xe0))(param_1, &param_1);
    if (iVar2 < 0)
    {
        return -1;
    }
    if ((unaff_ESI & 1) == 0)
    {
        return 0;
    }
    if (unaff_retaddr != 0)
    {
        (**(code **)(*piVar1 + 0x4c))(piVar1, unaff_retaddr);
    }
    return 1;
}

undefined_32 *FUN_00485110(int *param_1, int param_2, int *param_3)

{
    int *piVar1;
    int iVar2;
    int *piVar3;
    int iVar4;
    undefined_32 *puVar5;
    undefined_32 local_4;

    piVar3 = param_3;
    iVar2 = param_2;
    piVar1 = param_1;
    puVar5 = &local_4;
    local_4 = 0;
    iVar4 = (**(code **)(*param_1 + 0x2c))(param_1, 0, param_2, puVar5, param_3, &param_3, &param_1, 0);
    if (iVar4 == 0)
    {
        if (puVar5 == NULL)
        {
            return NULL;
        }
        if (iVar2 == *piVar3)
        {
            return puVar5;
        }
    }
    if (puVar5 != NULL)
    {
        FUN_00485170(piVar1, puVar5, iVar2);
    }
    return NULL;
}

bool FUN_00485170(int *param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;

    iVar1 = (**(code **)(*param_1 + 0x30))(param_1, param_2, param_3, 0, 0);
    return iVar1 == 0;
}

uint FUN_004851a0(undefined_32 param_1, undefined_32 *param_2, int *param_3, uint *param_4, undefined_32 *param_5)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;
    char *pcVar4;
    bool bVar5;
    uint uStack_14;
    undefined_8 auStack_10[2];
    ushort uStack_e;
    undefined_16 uStack_c;
    undefined_16 uStack_a;
    uint uStack_4;

    uVar1 = param_1;
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(param_1, &param_1, 4);
    iVar2 = 4;
    bVar5 = true;
    puVar3 = &param_1;
    pcVar4 = &DAT_004c7eb8;
    do
    {
        if (iVar2 == 0)
            break;
        iVar2 = iVar2 + -1;
        bVar5 = *(char *)puVar3 == *pcVar4;
        puVar3 = (undefined_32 *)((int)puVar3 + 1);
        pcVar4 = pcVar4 + 1;
    } while (bVar5);
    if (!bVar5)
    {
        return 0;
    }
    // PlatformAbstraction->fseek
    (**(code **)(DAT_00ecc420 + 0x4c))(uVar1, 4, 1);
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(uVar1, &param_1, 4);
    iVar2 = 4;
    bVar5 = true;
    puVar3 = &param_1;
    pcVar4 = &DAT_004c7eb0;
    do
    {
        if (iVar2 == 0)
            break;
        iVar2 = iVar2 + -1;
        bVar5 = *(char *)puVar3 == *pcVar4;
        puVar3 = (undefined_32 *)((int)puVar3 + 1);
        pcVar4 = pcVar4 + 1;
    } while (bVar5);
    if (!bVar5)
    {
        return 0;
    }
    // PlatformAbstraction->fseek
    (**(code **)(DAT_00ecc420 + 0x4c))(uVar1, 4, 1);
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(uVar1, &uStack_14, 4);
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(uVar1, auStack_10, 0x10);
    *param_2 = CONCAT22(uStack_a, uStack_c);
    *param_3 = (int)((ulonglong)(uStack_4 & 0xffff) / (ulonglong)(longlong)(int)(uint)uStack_e) << 3;
    *param_4 = (uint)(uStack_e == 2);
    if (0x10 < uStack_14)
    {
        // PlatformAbstraction->fseek
        (**(code **)(DAT_00ecc420 + 0x4c))(uVar1, uStack_14 - 0x10, 1);
    }
    // PlatformAbstraction->fread
    (**(code **)(DAT_00ecc420 + 0x38))(uVar1, &param_1, 4);
    iVar2 = 4;
    bVar5 = true;
    puVar3 = &param_1;
    pcVar4 = &DAT_004c7ea8;
    do
    {
        if (iVar2 == 0)
            break;
        iVar2 = iVar2 + -1;
        bVar5 = *(char *)puVar3 == *pcVar4;
        puVar3 = (undefined_32 *)((int)puVar3 + 1);
        pcVar4 = pcVar4 + 1;
    } while (bVar5);
    do
    {
        if (bVar5)
        {
            // PlatformAbstraction->fread
            (**(code **)(DAT_00ecc420 + 0x38))(uVar1, &uStack_14, 4);
            // PlatformAbstraction->ftell
            uVar1 = (**(code **)(DAT_00ecc420 + 0x48))(uVar1);
            *param_5 = uVar1;
            return uStack_14;
        }
        // PlatformAbstraction->fread
        (**(code **)(DAT_00ecc420 + 0x38))(uVar1, &uStack_14, 4);
        // PlatformAbstraction->fseek
        (**(code **)(DAT_00ecc420 + 0x4c))(uVar1, uStack_14 + 4, 1);
        iVar2 = 4;
        bVar5 = true;
        puVar3 = &param_1;
        pcVar4 = &DAT_004c7ea8;
        do
        {
            if (iVar2 == 0)
                break;
            iVar2 = iVar2 + -1;
            bVar5 = *(char *)puVar3 == *pcVar4;
            puVar3 = (undefined_32 *)((int)puVar3 + 1);
            pcVar4 = pcVar4 + 1;
        } while (bVar5);
    } while (true);
}

uint FUN_00485340(void)

{
    return -(uint)(DAT_004c7d80 != 0) & DAT_0050d524;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00485360(void)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 uVar4;
    undefined_32 *puVar5;
    undefined_32 uVar6;

    if (DAT_0050fea8 != 0)
    {
        return 1;
    }
    puVar3 = &DAT_0050e028;
    MEMSET(iVar2, puVar3, 0, 0x210)
    puVar3 = &DAT_0050e868;
    MEMSET(iVar2, puVar3, 0, 0x210)
    puVar3 = &DAT_0050f0a8;
    MEMSET(iVar2, puVar3, 0, 0x168)
    puVar3 = &DAT_0050d568;
    MEMSET(iVar2, puVar3, 0, 0x3c)
    DAT_0050f648 = 0;
    DAT_0050f658 = 0;
    _DAT_0050f64c = 0;
    _DAT_0050f65c = 0;
    _DAT_0050f660 = 0;
    DAT_0050febc = 0;
    uVar6 = NULL;
    puVar3 = &DAT_0050d658;
    MEMSET(iVar2, puVar3, 0, 0x274)
    puVar3 = &DAT_00ec9ea0;
    MEMSET(iVar2, puVar3, 0, 0x4e8)
    puVar5 = &LPDIRECTINPUT_PTR_0050feb8; // receive LPDIRECTINPUT*
    uVar4 = 0x500; // DirectInput Version 5
    puVar3 = &DAT_00ecb240;
    MEMSET(iVar2, puVar3, 0, 0x274)
    _DAT_0050f650 = 0;
    DAT_0050fec8 = 0;
    DAT_0050fec0 = 0;
    uVar1 = get_instance(0x500, &LPDIRECTINPUT_PTR_0050feb8, 0);
    iVar2 = DirectInputCreateA(uVar1, uVar4, puVar5, uVar6); // TODO
    if (iVar2 != 0)
    {
        return 1;
    }
    iVar2 = (**(code **)(*LPDIRECTINPUT_PTR_0050feb8 + 0x10))(LPDIRECTINPUT_PTR_0050feb8, 0, FUN_00486a10, 0, 1);
    if (iVar2 != 0)
    {
        return 1;
    }
    FUN_00485f20();
    FUN_00485c40();
    FUN_00486010();
    FUN_004855c0();
    DAT_0050fea8 = 1;
    return 0;
}

void FUN_00485460(void)

{
    int *piVar1;
    int iVar2;
    int **ppiVar3;
    uint uVar4;
    undefined_32 *puVar5;

    if (DAT_0050fea8 != 0)
    {
        uVar4 = 0;
        DAT_0050fea8 = 0;
        if (DAT_0050fec0 != 0)
        {
            ppiVar3 = (int **)&DAT_00ecb484;
            do
            {
                piVar1 = *ppiVar3;
                if (piVar1 != NULL)
                {
                    (**(code **)(*piVar1 + 0x20))(piVar1);
                    (**(code **)(**ppiVar3 + 8))(*ppiVar3);
                }
                uVar4 = uVar4 + 1;
                ppiVar3 = ppiVar3 + 0x9d;
            } while (uVar4 < DAT_0050fec0);
        }
        DAT_0050fec0 = 0;
        puVar5 = &DAT_00ecb240;
        MEMSET(iVar2, puVar5, 0, 0x274)
        uVar4 = 0;
        if (DAT_0050febc != 0)
        {
            ppiVar3 = (int **)&DAT_0050d89c;
            do
            {
                piVar1 = *ppiVar3;
                if (piVar1 != NULL)
                {
                    (**(code **)(*piVar1 + 0x20))(piVar1);
                    (**(code **)(**ppiVar3 + 8))(*ppiVar3);
                }
                uVar4 = uVar4 + 1;
                ppiVar3 = ppiVar3 + 0x9d;
            } while (uVar4 < DAT_0050febc);
        }
        DAT_0050febc = 0;
        puVar5 = &DAT_0050d658;
        MEMSET(iVar2, puVar5, 0, 0x274)
        uVar4 = 0;
        if (DAT_0050fec8 != 0)
        {
            ppiVar3 = (int **)&DAT_00eca0e4;
            do
            {
                piVar1 = *ppiVar3;
                if (piVar1 != NULL)
                {
                    (**(code **)(*piVar1 + 0x20))(piVar1);
                    (**(code **)(**ppiVar3 + 8))(*ppiVar3);
                }
                uVar4 = uVar4 + 1;
                ppiVar3 = ppiVar3 + 0x9d;
            } while (uVar4 < DAT_0050fec8);
        }
        DAT_0050fec8 = 0;
        puVar5 = &DAT_00ec9ea0;
        MEMSET(iVar2, puVar5, 0, 0x4e8)
        if (LPDIRECTINPUT_PTR_0050feb8 != NULL)
        {
            // release
            (**(code **)(*LPDIRECTINPUT_PTR_0050feb8 + 8))(LPDIRECTINPUT_PTR_0050feb8);
            LPDIRECTINPUT_PTR_0050feb8 = NULL;
        }
    }
    return;
}

undefined_32 FUN_00485570(void)

{
    if (DAT_0050fea8 == 0)
    {
        return 1;
    }
    DAT_0050feac = 1;
    FUN_00485a30(1);
    return 0;
}

void FUN_004855a0(void)

{
    if (DAT_0050feac != 0)
    {
        FUN_00485a30(0);
        DAT_0050feac = 0;
    }
    return;
}

void FUN_004855c0(void)

{
    uint *puVar1;
    uint *puVar2;

    DAT_004c8170 = 0;
    DAT_0050fec4 = 0;
    puVar1 = &DAT_0050f0a8;
    do
    {
        puVar2 = puVar1 + 6;
        *puVar1 = *puVar1 & 0xfffffffd;
        puVar1 = puVar2;
    } while (puVar2 < &DAT_0050f648);
    return;
}

undefined_32 FUN_004855f0(uint param_1)

{
    if (0x3b < param_1)
    {
        return 0;
    }
    if (((&DAT_0050f0a8)[param_1 * 6] & 1) == 0)
    {
        return 0;
    }
    (&DAT_0050f0a8)[param_1 * 6] = (&DAT_0050f0a8)[param_1 * 6] | 2;
    FUN_00486140(param_1);
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00485630(void)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_0050feb4 != 0)
    {
        puVar2 = &DAT_0050e028;
        MEMSET(iVar1, puVar2, 0, 0x210)
        puVar2 = &DAT_0050f668;
        MEMSET(iVar1, puVar2, 0, 0x210)
        DAT_0050feb0 = 1;
        DAT_0050fecc = timeGetTime();
        DAT_0050fed8 = DAT_0050fecc - DAT_0050fed0;
        _DAT_004c8174 = 1.0 / (float)(ulonglong)DAT_0050fed8;
        puVar2 = &DAT_0050d568;
        MEMSET(iVar1, puVar2, 0, 0x3c)
        _DAT_004c8178 = _DAT_004c8174 * 1000.0;
        FUN_00486170();
        if (DAT_0050fec4 != 0)
        {
            FUN_00486340();
        }
        FUN_00486710();
        DAT_0050fed0 = DAT_0050fecc;
    }
    return;
}

float10 FUN_004856e0(int param_1)

{
    int iVar1;
    int iVar2;
    int iVar3;
    float10 fVar4;
    float10 fVar5;

    if (DAT_0050feb4 == 0)
    {
        return (float10)0.0;
    }
    iVar3 = param_1 * 0x18;
    if (((&DAT_0050f0a8)[param_1 * 6] & 2) == 0)
    {
        return (float10)0.0;
    }
    iVar1 = (&DAT_0050d568)[param_1] - *(int *)(&DAT_0050f0b4 + iVar3);
    if (iVar1 == 0)
    {
        return (float10)0.0;
    }
    if ((((&DAT_0050f0a8)[param_1 * 6] & 8) == 0) && (*(int *)(&DAT_0050f0b8 + iVar3) != 0))
    {
        iVar2 = iVar1;
        if (iVar1 < 0)
        {
            iVar2 = -iVar1;
        }
        if (iVar2 < *(int *)(&DAT_0050f0b8 + iVar3))
        {
            return (float10)0.0;
        }
    }
    fVar5 = (float10)iVar1 * (float10) * (float *)(&DAT_0050f0bc + iVar3);
    fVar4 = fVar5;
    if (fVar5 < (float10)0.0)
    {
        fVar4 = -fVar5;
    }
    if (fVar4 <= (float10)1e-05)
    {
        fVar5 = (float10)0.0;
    }
    if ((DAT_0050feb0 != 0) && (fVar5 != (float10)0.0))
    {
        DAT_0050feb0 = 0;
    }
    return fVar5;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

float10 FUN_004857b0(int param_1)

{
    uint uVar1;

    if (DAT_0050feb4 == 0)
    {
        return (float10)0.0;
    }
    uVar1 = (&DAT_0050e028)[param_1];
    if (((&DAT_0050e028)[param_1] == 0) && (uVar1 = DAT_0050fed8, (&DAT_0050e868)[param_1] == 0))
    {
        return (float10)0.0;
    }
    if (DAT_0050fed8 <= uVar1)
    {
        uVar1 = DAT_0050fed8;
    }
    if ((DAT_0050feb0 != 0) && ((float10)(ulonglong)uVar1 * (float10)_DAT_004c8174 != (float10)0.0))
    {
        DAT_0050feb0 = 0;
    }
    return (float10)(ulonglong)uVar1 * (float10)_DAT_004c8174;
}

undefined_32 FUN_00485840(undefined_32 param_1)

{
    float10 fVar1;

    fVar1 = (float10)FUN_004856e0(param_1);
    if (fVar1 < (float10)0.0)
    {
        fVar1 = -fVar1;
    }
    if ((float10)0.5 < fVar1)
    {
        return 1;
    }
    return 0;
}

undefined_32 FUN_00485880(int param_1, int *param_2)

{
    if (param_1 < 0)
    {
        return 0;
    }
    if (DAT_0050feb4 == 0)
    {
        if (param_2 != NULL)
        {
            *param_2 = 0;
        }
        return 0;
    }
    if (param_2 != NULL)
    {
        *param_2 = *param_2 + (&DAT_0050f668)[param_1];
    }
    if ((DAT_0050feb0 != 0) && ((&DAT_0050e868)[param_1] != 0))
    {
        DAT_0050feb0 = 0;
    }
    return (&DAT_0050e868)[param_1];
}

void FUN_004858e0(undefined_32 param_1, int param_2, int param_3)

{
    int iVar1;
    undefined_32 local_18;
    undefined_32 local_14;
    int local_10;
    undefined_32 local_c;
    undefined_32 uStack_8;

    local_18 = 0x18;
    local_14 = 0x10;
    if (param_3 == 0)
    {
        local_10 = param_3;
    }
    else if (param_3 == 1)
    {
        local_10 = 4;
    }
    else if (param_3 == 2)
    {
        local_10 = 8;
    }
    else if (param_3 == 3)
    {
        local_10 = 0xc;
    }
    else if (param_3 == 4)
    {
        local_10 = 0x10;
    }
    else if (param_3 == 5)
    {
        local_10 = 0x14;
    }
    local_c = 1;
    iVar1 = (**(code **)(*(int *)(&DAT_00eca0e4)[param_2 * 0x9d] + 0x14))((int *)(&DAT_00eca0e4)[param_2 * 0x9d], 4,
                                                                          &local_18);
    if (-1 < iVar1)
    {
        FUN_00486970(param_3 + param_2 * 6, local_14, local_10, uStack_8);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_004859a0(float param_1, undefined_32 *param_2)

{
    _DAT_004c817c = param_1;
    _DAT_004c8180 = (float)param_2;
    if ((DAT_0050f528 & 1) != 0)
    {
        param_2 = &param_1;
        param_1 = (float)(int)ROUND(ROUND(param_1 * 250.0));
        FUN_00486970(0x30, -(int)param_1, param_1, 0);
    }
    if ((DAT_0050f540 & 1) != 0)
    {
        param_2 = &param_1;
        param_1 = (float)(int)ROUND(ROUND(_DAT_004c8180 * 200.0));
        FUN_00486970(0x31, -(int)param_1, param_1, 0);
    }
    return;
}

void FUN_00485a30(int param_1)

{
    undefined_32 uVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int *piVar6;
    int **ppiVar7;

    uVar1 = DAT_0050fed8;
    if (DAT_0050feac != 0)
    {
        uVar2 = 0;
        do
        {
            if (*(int *)((int)&DAT_0050e868 + uVar2) != 0)
            {
                *(undefined_32 *)((int)&DAT_0050e868 + uVar2) = 0;
                if (*(int *)((int)&DAT_0050e028 + uVar2) == 0)
                {
                    *(undefined_32 *)((int)&DAT_0050e028 + uVar2) = uVar1;
                }
                *(undefined_32 *)((int)&DAT_0050e028 + uVar2) = *(undefined_32 *)((int)&DAT_0050e028 + uVar2);
            }
            iVar4 = DAT_004c8170;
            uVar2 = uVar2 + 4;
        } while (uVar2 < 0x400);
        if ((DAT_004c8170 != 0) && (uVar2 = 0, DAT_0050fec0 != 0))
        {
            piVar6 = &DAT_00ecb484;
            do
            {
                if (*piVar6 != 0)
                {
                    iVar5 = 4;
                    iVar3 = uVar2 << 4;
                    do
                    {
                        if (*(int *)((int)&DAT_0050f068 + iVar3) != 0)
                        {
                            *(undefined_32 *)((int)&DAT_0050f068 + iVar3) = 0;
                            if (*(int *)((int)&DAT_0050e828 + iVar3) == 0)
                            {
                                *(undefined_32 *)((int)&DAT_0050e828 + iVar3) = uVar1;
                            }
                            *(undefined_32 *)((int)&DAT_0050e828 + iVar3) =
                                *(undefined_32 *)((int)&DAT_0050e828 + iVar3);
                        }
                        iVar3 = iVar3 + 4;
                        iVar5 = iVar5 + -1;
                    } while (iVar5 != 0);
                }
                uVar2 = uVar2 + 1;
                piVar6 = piVar6 + 0x9d;
            } while (uVar2 < DAT_0050fec0);
        }
        if (param_1 != 0)
        {
            if ((iVar4 != 0) && (uVar2 = 0, DAT_0050fec0 != 0))
            {
                ppiVar7 = (int **)&DAT_00ecb484;
                do
                {
                    piVar6 = *ppiVar7;
                    if (piVar6 != NULL)
                    {
                        iVar4 = (**(code **)(*piVar6 + 0x1c))(piVar6);
                        if (iVar4 == 0)
                        {
                            ShowCursor(0);
                        }
                    }
                    uVar2 = uVar2 + 1;
                    ppiVar7 = ppiVar7 + 0x9d;
                } while (uVar2 < DAT_0050fec0);
            }
            uVar2 = 0;
            if (DAT_0050febc != 0)
            {
                ppiVar7 = (int **)&DAT_0050d89c;
                do
                {
                    piVar6 = *ppiVar7;
                    if (piVar6 != NULL)
                    {
                        (**(code **)(*piVar6 + 0x1c))(piVar6);
                    }
                    uVar2 = uVar2 + 1;
                    ppiVar7 = ppiVar7 + 0x9d;
                } while (uVar2 < DAT_0050febc);
            }
            uVar2 = 0;
            if (DAT_0050fec8 != 0)
            {
                ppiVar7 = (int **)&DAT_00eca0e4;
                do
                {
                    piVar6 = *ppiVar7;
                    if (piVar6 != NULL)
                    {
                        (**(code **)(*piVar6 + 0x1c))(piVar6);
                    }
                    uVar2 = uVar2 + 1;
                    ppiVar7 = ppiVar7 + 0x9d;
                } while (uVar2 < DAT_0050fec8);
            }
            DAT_0050feb4 = 1;
            return;
        }
        uVar2 = 0;
        if (DAT_0050fec0 != 0)
        {
            ppiVar7 = (int **)&DAT_00ecb484;
            do
            {
                piVar6 = *ppiVar7;
                if (piVar6 != NULL)
                {
                    iVar4 = (**(code **)(*piVar6 + 0x20))(piVar6);
                    if (iVar4 == 0)
                    {
                        ShowCursor(1);
                    }
                }
                uVar2 = uVar2 + 1;
                ppiVar7 = ppiVar7 + 0x9d;
            } while (uVar2 < DAT_0050fec0);
        }
        uVar2 = 0;
        if (DAT_0050febc != 0)
        {
            ppiVar7 = (int **)&DAT_0050d89c;
            do
            {
                piVar6 = *ppiVar7;
                if (piVar6 != NULL)
                {
                    (**(code **)(*piVar6 + 0x20))(piVar6);
                }
                uVar2 = uVar2 + 1;
                ppiVar7 = ppiVar7 + 0x9d;
            } while (uVar2 < DAT_0050febc);
        }
        uVar2 = 0;
        if (DAT_0050fec8 != 0)
        {
            ppiVar7 = (int **)&DAT_00eca0e4;
            do
            {
                piVar6 = *ppiVar7;
                if (piVar6 != NULL)
                {
                    (**(code **)(*piVar6 + 0x20))(piVar6);
                }
                uVar2 = uVar2 + 1;
                ppiVar7 = ppiVar7 + 0x9d;
            } while (uVar2 < DAT_0050fec8);
        }
        DAT_0050feb4 = 0;
    }
    return;
}

void FUN_00485c40(void)

{
    uint uVar1;
    int iVar2;
    uint *puVar3;
    undefined_32 *unaff_ESI;
    int **ppiVar4;
    int **ppiStack_54;
    int *piStack_50;
    int **ppiStack_4c;
    int local_38;
    int local_34;
    uint local_30;
    undefined_32 uStack_2c;
    undefined_32 uStack_28;
    undefined_32 uStack_24;
    undefined_32 uStack_20;
    undefined_32 uStack_1c;
    undefined_32 uStack_18;
    undefined_32 uStack_14;
    undefined_32 uStack_10;
    undefined_32 uStack_c;
    int **ppiStack_8;
    undefined_32 uStack_4;

    local_34 = 0;
    local_30 = 0;
    if (DAT_0050fec8 != 0)
    {
        puVar3 = &DAT_0050f0c0;
        ppiVar4 = (int **)&DAT_00eca0e4;
        local_38 = 2;
        do
        {
            piStack_50 = &local_34;
            ppiStack_4c = NULL;
            ppiStack_54 = ppiVar4 + -0x90;
            (**(code **)(*LPDIRECTINPUT_PTR_0050feb8 + 0xc))(LPDIRECTINPUT_PTR_0050feb8);
            iVar2 = (**(code **)*unaff_ESI)(unaff_ESI, &DAT_004aefb8, ppiVar4);
            (**(code **)(*piStack_50 + 8))(piStack_50);
            local_34 = 0;
            if (iVar2 < 0)
            {
            LAB_00485e9b:
                ppiStack_4c = (int **)*ppiVar4;
                if (ppiStack_4c != NULL)
                {
                    piStack_50 = (int *)0x485ea7;
                    (**(code **)((int)*ppiStack_4c + 8))();
                }
                uVar1 = puVar3[-6];
                *ppiVar4 = NULL;
                puVar3[-6] = uVar1 & 0xfffffffe;
                *puVar3 = *puVar3 & 0xfffffffe;
                puVar3[6] = puVar3[6] & 0xfffffffe;
                puVar3[0xc] = puVar3[0xc] & 0xfffffffe;
                puVar3[0x12] = puVar3[0x12] & 0xfffffffe;
                puVar3[0x18] = puVar3[0x18] & 0xfffffffe;
            }
            else
            {
                ppiStack_4c = ppiVar4 + 1;
                *ppiStack_4c = (int *)0x2c;
                piStack_50 = *ppiVar4;
                ppiStack_54 = (int **)0x485cc1;
                iVar2 = (**(code **)(*piStack_50 + 0xc))();
                if (iVar2 < 0)
                    goto LAB_00485e9b;
                piStack_50 = *ppiVar4;
                ppiStack_4c = (int **)&LAB_0049d670;
                ppiStack_54 = (int **)0x485cd6;
                iVar2 = (**(code **)(*piStack_50 + 0x2c))();
                if (iVar2 < 0)
                    goto LAB_00485e9b;
                ppiStack_4c = (int **)0x9;
                iVar2 = **ppiVar4;
                piStack_50 = (int *)0x485ce9;
                piStack_50 = (int *)get_hwnd();
                ppiStack_54 = (int **)*ppiVar4;
                iVar2 = (**(code **)(iVar2 + 0x34))();
                if (iVar2 < 0)
                    goto LAB_00485e9b;
                ppiStack_54 = (int **)*ppiVar4;
                ppiStack_4c = (int **)&uStack_18;
                uStack_18 = 0x18;
                uStack_14 = 0x10;
                uStack_10 = 0;
                uStack_c = 1;
                piStack_50 = (int *)0x4;
                iVar2 = (*(code *)(*ppiStack_54)[5])();
                if (-1 < iVar2)
                {
                    FUN_00486970((int)unaff_ESI + -2, uStack_14, uStack_10, 0x3e19999a);
                }
                uStack_1c = 4;
                iVar2 = (**(code **)(**ppiVar4 + 0x14))(*ppiVar4, 4, &uStack_24);
                if (-1 < iVar2)
                {
                    FUN_00486970((int)unaff_ESI + -1, uStack_20, uStack_1c, 0x3e19999a);
                }
                uStack_28 = 8;
                iVar2 = (**(code **)(**ppiVar4 + 0x14))(*ppiVar4, 4, &local_30);
                if (-1 < iVar2)
                {
                    FUN_00486970(unaff_ESI, uStack_2c, uStack_28, 0x3e19999a);
                }
                local_34 = 0xc;
                iVar2 = (**(code **)(**ppiVar4 + 0x14))(*ppiVar4, 4, &stack0xffffffc4);
                if (-1 < iVar2)
                {
                    FUN_00486970((int)unaff_ESI + 1, local_38, local_34, 0x3e19999a);
                }
                iVar2 = (**(code **)(**ppiVar4 + 0x14))(*ppiVar4, 4, &stack0xffffffb8);
                if (-1 < iVar2)
                {
                    FUN_00486970((int)unaff_ESI + 2, unaff_ESI, 0x10, 0x3e19999a);
                }
                ppiStack_4c = (int **)0x14;
                iVar2 = (**(code **)(**ppiVar4 + 0x14))(*ppiVar4, 4, &ppiStack_54);
                if (-1 < iVar2)
                {
                    ppiStack_4c = (int **)0x3e19999a;
                    piStack_50 = (int *)uStack_4;
                    ppiStack_54 = ppiStack_8;
                    FUN_00486970(local_38 + 3);
                }
                if (((uint)ppiVar4[2] & 0x100) != 0)
                {
                    ppiStack_54 = (int **)*ppiVar4;
                    ppiStack_4c = (int **)&uStack_2c;
                    uStack_2c = 0x14;
                    uStack_28 = 0x10;
                    uStack_24 = 0;
                    uStack_20 = 0;
                    uStack_1c = 0;
                    piStack_50 = (int *)0x9;
                    iVar2 = (*(code *)(*ppiStack_54)[6])();
                    if (iVar2 < 0)
                        goto LAB_00485e9b;
                }
                ppiStack_4c = (int **)*ppiVar4;
                piStack_50 = (int *)0x485e97;
                iVar2 = (**(code **)((int)*ppiStack_4c + 0x1c))();
                if (iVar2 < 0)
                    goto LAB_00485e9b;
            }
            local_38 = local_38 + 6;
            local_30 = local_30 + 1;
            ppiVar4 = ppiVar4 + 0x9d;
            puVar3 = puVar3 + 0x24;
        } while (local_30 < DAT_0050fec8);
    }
    return;
}

void FUN_00485f20(void)

{
    int *piVar1;
    int iVar2;
    undefined_32 uVar3;
    int **ppiVar4;
    uint local_18;
    undefined_32 uStack_14;
    undefined_32 uStack_10;
    undefined_32 uStack_c;
    undefined_32 uStack_8;
    undefined_32 uStack_4;

    if ((LPDIRECTINPUT_PTR_0050feb8 != NULL) && (local_18 = 0, DAT_0050febc != 0))
    {
        ppiVar4 = (int **)&DAT_0050d89c;
        do
        {
            iVar2 = (**(code **)(*LPDIRECTINPUT_PTR_0050feb8 + 0xc))(LPDIRECTINPUT_PTR_0050feb8, ppiVar4 + -0x90,
                                                                     ppiVar4, 0);
            if (iVar2 < 0)
            {
            LAB_00485fd8:
                piVar1 = *ppiVar4;
                if (piVar1 != NULL)
                {
                    (**(code **)(*piVar1 + 8))(piVar1);
                }
                *ppiVar4 = NULL;
            }
            else
            {
                ppiVar4[1] = (int *)0x2c;
                iVar2 = (**(code **)(**ppiVar4 + 0xc))(*ppiVar4, ppiVar4 + 1);
                if ((iVar2 < 0) || (iVar2 = (**(code **)(**ppiVar4 + 0x2c))(*ppiVar4, &LAB_0049e690), iVar2 < 0))
                    goto LAB_00485fd8;
                iVar2 = **ppiVar4;
                uVar3 = get_hwnd(6);
                iVar2 = (**(code **)(iVar2 + 0x34))(*ppiVar4, uVar3);
                if (iVar2 < 0)
                    goto LAB_00485fd8;
                uStack_14 = 0x14;
                uStack_10 = 0x10;
                uStack_c = 0;
                uStack_8 = 0;
                uStack_4 = 0x20;
                iVar2 = (**(code **)(**ppiVar4 + 0x18))(*ppiVar4, 1, &uStack_14);
                if (iVar2 < 0)
                    goto LAB_00485fd8;
            }
            local_18 = local_18 + 1;
            ppiVar4 = ppiVar4 + 0x9d;
        } while (local_18 < DAT_0050febc);
    }
    return;
}

void FUN_00486010(void)

{
    int *piVar1;
    int iVar2;
    undefined_32 uVar3;
    uint uVar4;
    int **ppiVar5;
    undefined_32 uStack_14;
    undefined_32 uStack_10;
    undefined_32 uStack_c;
    undefined_32 uStack_8;
    undefined_32 uStack_4;

    if (LPDIRECTINPUT_PTR_0050feb8 != NULL)
    {
        uVar4 = 0;
        if (DAT_0050fec0 != 0)
        {
            ppiVar5 = (int **)&DAT_00ecb484;
            do
            {
                iVar2 = (**(code **)(*LPDIRECTINPUT_PTR_0050feb8 + 0xc))(LPDIRECTINPUT_PTR_0050feb8, ppiVar5 + -0x90,
                                                                         ppiVar5, 0);
                if (iVar2 < 0)
                {
                LAB_004860c5:
                    piVar1 = *ppiVar5;
                    if (piVar1 != NULL)
                    {
                        (**(code **)(*piVar1 + 8))(piVar1);
                    }
                    *ppiVar5 = NULL;
                }
                else
                {
                    ppiVar5[1] = (int *)0x2c;
                    iVar2 = (**(code **)(**ppiVar5 + 0xc))(*ppiVar5, ppiVar5 + 1);
                    if ((iVar2 < 0) || (iVar2 = (**(code **)(**ppiVar5 + 0x2c))(*ppiVar5, &DAT_0049e720), iVar2 < 0))
                        goto LAB_004860c5;
                    iVar2 = **ppiVar5;
                    uVar3 = get_hwnd(6);
                    iVar2 = (**(code **)(iVar2 + 0x34))(*ppiVar5, uVar3);
                    if (iVar2 < 0)
                        goto LAB_004860c5;
                    uStack_14 = 0x14;
                    uStack_10 = 0x10;
                    uStack_c = 0;
                    uStack_8 = 0;
                    uStack_4 = 0x20;
                    iVar2 = (**(code **)(**ppiVar5 + 0x18))(*ppiVar5, 1, &uStack_14);
                    if (iVar2 < 0)
                        goto LAB_004860c5;
                }
                uVar4 = uVar4 + 1;
                ppiVar5 = ppiVar5 + 0x9d;
            } while (uVar4 < DAT_0050fec0);
        }
        if (DAT_0050fec0 != 0)
        {
            FUN_00486970(0x30, 0xffffff06, 0xfa, 0);
            FUN_00486970(0x31, 0xffffff38, 200, 0);
            if (2 < DAT_00ecb494)
            {
                FUN_00486970(0x32, 0xffffffec, 0x14, 0);
            }
        }
    }
    return;
}

void FUN_00486140(uint param_1)

{
    if ((0x2f < param_1) && (param_1 < 0x33))
    {
        DAT_004c8170 = 1;
        return;
    }
    if (param_1 < 0xc)
    {
        DAT_0050fec4 = 1;
    }
    return;
}

void FUN_00486170(void)

{
    int iVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    uint uVar5;
    uint uVar6;
    uint local_304;
    char acStack_300[256];
    int local_200[128];

    uVar6 = 0;
    local_304 = 0x20;
    if (DAT_0050febc != 0)
    {
        do
        {
            iVar3 = (**(code **)(*(int *)(&DAT_0050d89c)[uVar6 * 0x9d] + 0x28))((int *)(&DAT_0050d89c)[uVar6 * 0x9d],
                                                                                0x10, local_200, &local_304, 0);
            iVar2 = DAT_0050fecc;
            if (iVar3 < -0x7ff8ffe1)
            {
            LAB_004861cd:
                (**(code **)(*(int *)(&DAT_0050d89c)[uVar6 * 0x9d] + 0x1c))((int *)(&DAT_0050d89c)[uVar6 * 0x9d]);
            }
            else if (iVar3 == 0)
            {
                uVar6 = 0;
                if (local_304 != 0)
                {
                    piVar4 = local_200 + 1;
                    uVar5 = local_304;
                    do
                    {
                        iVar3 = piVar4[1];
                        iVar1 = piVar4[-1];
                        if (*piVar4 == 0)
                        {
                        LAB_004862cc:
                            if ((&DAT_0050e868)[iVar1] != 0)
                            {
                                (&DAT_0050e868)[iVar1] = 0;
                                if ((&DAT_0050e028)[iVar1] == 0)
                                {
                                    (&DAT_0050e028)[iVar1] = DAT_0050fed8;
                                }
                                (&DAT_0050e028)[iVar1] = (&DAT_0050e028)[iVar1] + (iVar3 - iVar2);
                            }
                        }
                        else if ((&DAT_0050e868)[iVar1] == 0)
                        {
                            (&DAT_0050e868)[iVar1] = 1;
                            (&DAT_0050e028)[iVar1] = iVar2 - iVar3;
                            (&DAT_0050f668)[iVar1] = (&DAT_0050f668)[iVar1] + 1;
                        }
                        else if (*piVar4 == 0)
                            goto LAB_004862cc;
                        piVar4 = piVar4 + 4;
                        uVar5 = uVar5 - 1;
                        uVar6 = local_304;
                    } while (uVar5 != 0);
                }
            }
            else
            {
                if (iVar3 != 1)
                    goto LAB_004861cd;
                iVar3 = (**(code **)(*(int *)(&DAT_0050d89c)[uVar6 * 0x9d] + 0x24))(
                    (int *)(&DAT_0050d89c)[uVar6 * 0x9d], 0x100, acStack_300);
                iVar2 = DAT_0050fed8;
                if (-1 < iVar3)
                {
                    uVar6 = 0;
                    piVar4 = &DAT_0050e028;
                    do
                    {
                        if (acStack_300[uVar6] == '\0')
                        {
                        LAB_00486240:
                            if ((&DAT_0050e868)[uVar6] != 0)
                            {
                                iVar3 = *piVar4;
                                (&DAT_0050e868)[uVar6] = 0;
                                if (iVar3 == 0)
                                {
                                    *piVar4 = iVar2;
                                }
                                *piVar4 = *piVar4;
                            }
                        }
                        else if ((&DAT_0050e868)[uVar6] == 0)
                        {
                            iVar3 = (&DAT_0050f668)[uVar6];
                            (&DAT_0050e868)[uVar6] = 1;
                            *piVar4 = 0;
                            (&DAT_0050f668)[uVar6] = iVar3 + 1;
                        }
                        else if (acStack_300[uVar6] == '\0')
                            goto LAB_00486240;
                        piVar4 = piVar4 + 1;
                        uVar6 = uVar6 + 1;
                    } while (piVar4 < &DAT_0050e428);
                }
            }
            uVar6 = uVar6 + 1;
        } while (uVar6 < DAT_0050febc);
    }
    return;
}

void FUN_00486340(void)

{
    int *piVar1;
    int iVar2;
    bool bVar3;
    int iVar4;
    int *piVar5;
    int *piVar6;
    uint *puVar7;
    uint uVar8;
    uint local_64;
    int **local_60;
    int local_5c;
    undefined_32 *local_58;
    undefined_32 uStack_50;
    undefined_32 uStack_4c;
    undefined_32 uStack_48;
    undefined_32 uStack_44;
    undefined_32 uStack_40;
    undefined_32 uStack_3c;
    uint auStack_30[4];
    char acStack_20[32];

    local_64 = 0;
    if (DAT_0050fec8 != 0)
    {
        local_5c = 0;
        local_58 = &DAT_0050d56c;
        local_60 = (int **)&DAT_00eca0e4;
        while ((iVar4 = (**(code **)(**local_60 + 100))(*local_60),
                -1 < iVar4 && (iVar4 = (**(code **)(**local_60 + 0x24))(*local_60, 0x50, &uStack_50), -1 < iVar4)))
        {
            local_58[-1] = uStack_50;
            *local_58 = uStack_4c;
            local_58[1] = uStack_48;
            local_58[2] = uStack_44;
            local_58[3] = uStack_40;
            local_58[4] = uStack_3c;
            uVar8 = 0;
            piVar5 = (int *)((int)&DAT_0050e428 + local_5c);
            iVar4 = local_5c;
            do
            {
                if (acStack_20[uVar8] == '\0')
                {
                LAB_00486408:
                    if (*(int *)((int)&DAT_0050ec68 + iVar4) != 0)
                    {
                        iVar2 = *piVar5;
                        *(undefined_32 *)((int)&DAT_0050ec68 + iVar4) = 0;
                        if (iVar2 == 0)
                        {
                            *piVar5 = DAT_0050fed8;
                        }
                        *piVar5 = *piVar5;
                    }
                }
                else if (*(int *)((int)&DAT_0050ec68 + iVar4) == 0)
                {
                    iVar2 = *(int *)((int)&DAT_0050fa68 + iVar4);
                    *(undefined_32 *)((int)&DAT_0050ec68 + iVar4) = 1;
                    *piVar5 = 0;
                    *(int *)((int)&DAT_0050fa68 + iVar4) = iVar2 + 1;
                }
                else if (acStack_20[uVar8] == '\0')
                    goto LAB_00486408;
                uVar8 = uVar8 + 1;
                iVar4 = iVar4 + 4;
                piVar5 = piVar5 + 1;
            } while (uVar8 < 0x10);
            piVar6 = NULL;
            piVar5 = local_60[6];
            if (piVar5 != NULL)
            {
                puVar7 = auStack_30;
                do
                {
                    if ((int *)0x3 < piVar6)
                        break;
                    uVar8 = *puVar7;
                    if ((uVar8 < 0x57e4) || (0x7b0c < uVar8))
                    {
                        bVar3 = false;
                    }
                    else
                    {
                        bVar3 = true;
                    }
                    iVar4 = (int)(piVar6 + local_64 * 2) * 4 + 0x110;
                    if (bVar3)
                    {
                        if ((&DAT_0050e868)[iVar4] == 0)
                        {
                            (&DAT_0050e868)[iVar4] = 1;
                            (&DAT_0050e028)[iVar4] = 0;
                            (&DAT_0050f668)[iVar4] = (&DAT_0050f668)[iVar4] + 1;
                        }
                        else if (!bVar3)
                            goto LAB_004864c0;
                    }
                    else
                    {
                    LAB_004864c0:
                        if ((&DAT_0050e868)[iVar4] != 0)
                        {
                            (&DAT_0050e868)[iVar4] = 0;
                            if ((&DAT_0050e028)[iVar4] == 0)
                            {
                                (&DAT_0050e028)[iVar4] = DAT_0050fed8;
                            }
                            (&DAT_0050e028)[iVar4] = (&DAT_0050e028)[iVar4];
                        }
                    }
                    if (((uVar8 < 0x7b0c) && (0x1194 < uVar8)) || ((short)uVar8 == -1))
                    {
                        bVar3 = false;
                    }
                    else
                    {
                        bVar3 = true;
                    }
                    piVar1 = piVar6 + local_64 * 2;
                    if (bVar3)
                    {
                        if (*(int *)(&DAT_0050ecac + (int)piVar1 * 0x10) == 0)
                        {
                            *(undefined_32 *)(&DAT_0050ecac + (int)piVar1 * 0x10) = 1;
                            *(undefined_32 *)(&DAT_0050e46c + (int)piVar1 * 0x10) = 0;
                            *(int *)(&DAT_0050faac + (int)piVar1 * 0x10) =
                                *(int *)(&DAT_0050faac + (int)piVar1 * 0x10) + 1;
                        }
                        else if (!bVar3)
                            goto LAB_00486551;
                    }
                    else
                    {
                    LAB_00486551:
                        if (*(int *)(&DAT_0050ecac + (int)piVar1 * 0x10) != 0)
                        {
                            *(undefined_32 *)(&DAT_0050ecac + (int)piVar1 * 0x10) = 0;
                            if (*(int *)(&DAT_0050e46c + (int)piVar1 * 0x10) == 0)
                            {
                                *(int *)(&DAT_0050e46c + (int)piVar1 * 0x10) = DAT_0050fed8;
                            }
                            *(undefined_32 *)(&DAT_0050e46c + (int)piVar1 * 0x10) =
                                *(undefined_32 *)(&DAT_0050e46c + (int)piVar1 * 0x10);
                        }
                    }
                    if ((uVar8 < 0x1194) || (0x34bc < uVar8))
                    {
                        bVar3 = false;
                    }
                    else
                    {
                        bVar3 = true;
                    }
                    if (bVar3)
                    {
                        if (*(int *)(&DAT_0050ecb0 + (int)piVar1 * 0x10) == 0)
                        {
                            *(undefined_32 *)(&DAT_0050ecb0 + (int)piVar1 * 0x10) = 1;
                            *(undefined_32 *)(&DAT_0050e470 + (int)piVar1 * 0x10) = 0;
                            *(int *)(&DAT_0050fab0 + (int)piVar1 * 0x10) =
                                *(int *)(&DAT_0050fab0 + (int)piVar1 * 0x10) + 1;
                        }
                        else if (!bVar3)
                            goto LAB_004865d4;
                    }
                    else
                    {
                    LAB_004865d4:
                        if (*(int *)(&DAT_0050ecb0 + (int)piVar1 * 0x10) != 0)
                        {
                            *(undefined_32 *)(&DAT_0050ecb0 + (int)piVar1 * 0x10) = 0;
                            if (*(int *)(&DAT_0050e470 + (int)piVar1 * 0x10) == 0)
                            {
                                *(int *)(&DAT_0050e470 + (int)piVar1 * 0x10) = DAT_0050fed8;
                            }
                            *(undefined_32 *)(&DAT_0050e470 + (int)piVar1 * 0x10) =
                                *(undefined_32 *)(&DAT_0050e470 + (int)piVar1 * 0x10);
                        }
                    }
                    if ((uVar8 < 0x34bc) || (0x57e4 < uVar8))
                    {
                        bVar3 = false;
                    }
                    else
                    {
                        bVar3 = true;
                    }
                    if (bVar3)
                    {
                        if (*(int *)(&DAT_0050ecb4 + (int)piVar1 * 0x10) == 0)
                        {
                            *(undefined_32 *)(&DAT_0050ecb4 + (int)piVar1 * 0x10) = 1;
                            *(undefined_32 *)(&DAT_0050e474 + (int)piVar1 * 0x10) = 0;
                            *(int *)(&DAT_0050fab4 + (int)piVar1 * 0x10) =
                                *(int *)(&DAT_0050fab4 + (int)piVar1 * 0x10) + 1;
                        }
                        else if (!bVar3)
                            goto LAB_00486657;
                    }
                    else
                    {
                    LAB_00486657:
                        if (*(int *)(&DAT_0050ecb4 + (int)piVar1 * 0x10) != 0)
                        {
                            *(undefined_32 *)(&DAT_0050ecb4 + (int)piVar1 * 0x10) = 0;
                            if (*(int *)(&DAT_0050e474 + (int)piVar1 * 0x10) == 0)
                            {
                                *(int *)(&DAT_0050e474 + (int)piVar1 * 0x10) = DAT_0050fed8;
                            }
                            *(undefined_32 *)(&DAT_0050e474 + (int)piVar1 * 0x10) =
                                *(undefined_32 *)(&DAT_0050e474 + (int)piVar1 * 0x10);
                        }
                    }
                    piVar6 = (int *)((int)piVar6 + 1);
                    puVar7 = puVar7 + 1;
                } while (piVar6 < piVar5);
            }
            local_64 = local_64 + 1;
            local_58 = local_58 + 6;
            local_5c = local_5c + 0x80;
            local_60 = local_60 + 0x9d;
            if (DAT_0050fec8 <= local_64)
            {
                return;
            }
        }
        (**(code **)(*(int *)(&DAT_00eca0e4)[local_64 * 0x9d] + 0x1c))((int *)(&DAT_00eca0e4)[local_64 * 0x9d]);
    }
    return;
}

void FUN_00486710(void)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    uint *puVar5;
    int *piVar6;
    int **ppiVar7;
    uint uVar8;
    uint uVar9;
    int **ppiVar10;
    int local_220;
    int **local_21c;
    int **local_218;
    int *local_214;
    undefined_8 local_210[4];
    undefined_8 auStack_20c[8];
    char acStack_204[4];
    uint auStack_200[128];

    uVar8 = 0;
    local_214 = (int *)0x20;
    if ((DAT_004c8170 != 0) && (DAT_0050fec0 != 0))
    {
        local_220 = 0;
        local_21c = (int **)&DAT_00ecb484;
        local_218 = (int **)&DAT_0050d628;
        do
        {
            ppiVar7 = local_218;
            ppiVar10 = local_21c;
            piVar6 = *local_21c;
            if (piVar6 != NULL)
            {
                iVar3 = (**(code **)(*piVar6 + 0x24))(piVar6, 0x10, local_210);
                if (((iVar3 == -0x7ff8fff4) || (iVar3 == -0x7ff8ffe2)) || (iVar3 != 0))
                {
                    (**(code **)(**ppiVar10 + 0x1c))(*ppiVar10);
                }
                else
                {
                    *ppiVar7 = (int *)local_21c;
                    ppiVar7[1] = (int *)local_218;
                    ppiVar7[2] = local_214;
                    if (DAT_0050fed8 < 0x19)
                    {
                        *ppiVar7 = (int *)((&DAT_0050f648)[uVar8] + (int)local_21c >> 1);
                        ppiVar7[1] = (int *)((&DAT_0050f658)[uVar8] + (int)local_218 >> 1);
                    }
                    (&DAT_0050f648)[uVar8] = local_21c;
                    (&DAT_0050f658)[uVar8] = local_218;
                }
                iVar4 = (**(code **)(**ppiVar10 + 0x28))(*ppiVar10, 0x10, auStack_20c, &local_220, 0);
                uVar2 = DAT_0050fed8;
                iVar3 = DAT_0050fecc;
                if (iVar4 == 0)
                {
                    puVar5 = auStack_200;
                    for (piVar6 = local_214; piVar6 != NULL; piVar6 = (int *)((int)piVar6 + -1))
                    {
                        uVar2 = *puVar5;
                        if ((0xb < uVar2) && (uVar2 < 0x10))
                        {
                            uVar9 = puVar5[2];
                            iVar4 = uVar2 + 500 + uVar8 * 4;
                            if (puVar5[1] == 0)
                            {
                            LAB_004868e7:
                                if ((&DAT_0050e868)[iVar4] != 0)
                                {
                                    (&DAT_0050e868)[iVar4] = 0;
                                    if ((&DAT_0050e028)[iVar4] == 0)
                                    {
                                        (&DAT_0050e028)[iVar4] = DAT_0050fed8;
                                    }
                                    (&DAT_0050e028)[iVar4] = (&DAT_0050e028)[iVar4] + (uVar9 - iVar3);
                                }
                            }
                            else if ((&DAT_0050e868)[iVar4] == 0)
                            {
                                (&DAT_0050e868)[iVar4] = 1;
                                (&DAT_0050e028)[iVar4] = iVar3 - uVar9;
                                (&DAT_0050f668)[iVar4] = (&DAT_0050f668)[iVar4] + 1;
                            }
                            else if (puVar5[1] == 0)
                                goto LAB_004868e7;
                        }
                        puVar5 = puVar5 + 4;
                        ppiVar10 = local_21c;
                        ppiVar7 = local_218;
                    }
                }
                else if (iVar4 == 1)
                {
                    uVar9 = 0;
                    puVar5 = (uint *)((int)&DAT_0050e828 + local_220);
                    iVar3 = local_220;
                    do
                    {
                        if (acStack_204[uVar9] == '\0')
                        {
                        LAB_00486844:
                            if (*(int *)((int)&DAT_0050f068 + iVar3) != 0)
                            {
                                uVar1 = *puVar5;
                                *(undefined_32 *)((int)&DAT_0050f068 + iVar3) = 0;
                                if (uVar1 == 0)
                                {
                                    *puVar5 = uVar2;
                                }
                                *puVar5 = *puVar5;
                            }
                        }
                        else if (*(int *)((int)&DAT_0050f068 + iVar3) == 0)
                        {
                            iVar4 = *(int *)(&DAT_0050fe68 + iVar3);
                            *(undefined_32 *)((int)&DAT_0050f068 + iVar3) = 1;
                            *puVar5 = 0;
                            *(int *)(&DAT_0050fe68 + iVar3) = iVar4 + 1;
                        }
                        else if (acStack_204[uVar9] == '\0')
                            goto LAB_00486844;
                        uVar9 = uVar9 + 1;
                        iVar3 = iVar3 + 4;
                        puVar5 = puVar5 + 1;
                        ppiVar7 = local_218;
                        ppiVar10 = local_21c;
                    } while (uVar9 < 4);
                }
                else
                {
                    (**(code **)(**ppiVar10 + 0x1c))(*ppiVar10);
                }
            }
            uVar8 = uVar8 + 1;
            local_218 = ppiVar7 + 3;
            local_21c = ppiVar10 + 0x9d;
            local_220 = local_220 + 0x10;
        } while (uVar8 < DAT_0050fec0);
    }
    return;
}

void FUN_00486970(int param_1, int param_2, int param_3, float param_4)

{
    float fVar1;
    int iVar2;
    int iVar3;

    iVar3 = param_1 * 0x18;
    (&DAT_0050f0a8)[param_1 * 6] = (&DAT_0050f0a8)[param_1 * 6] | 1;
    iVar2 = ((param_3 - param_2) + 1) / 2 + param_2;
    *(int *)(&DAT_0050f0ac + iVar3) = param_2;
    *(int *)(&DAT_0050f0b0 + iVar3) = param_3;
    *(int *)(&DAT_0050f0b4 + iVar3) = iVar2;
    fVar1 = (float)(param_3 - iVar2);
    *(float *)(&DAT_0050f0bc + iVar3) = 1.0 / fVar1;
    if (param_4 != 0.0)
    {
        *(int *)(&DAT_0050f0b8 + iVar3) = (int)ROUND(ROUND(param_4 * fVar1));
        return;
    }
    *(undefined_32 *)(&DAT_0050f0b8 + iVar3) = 0;
    return;
}

undefined_32 FUN_00486a10(undefined_32 *param_1)

{
    char cVar1;
    uint uVar2;
    int iVar3;
    undefined_32 *puVar4;

    cVar1 = *(char *)(param_1 + 9);
    if (cVar1 == '\x02')
    {
        if (DAT_0050fec0 < 4)
        {
            uVar2 = DAT_0050fec0 + 1;
            puVar4 = &DAT_00ecb240 + DAT_0050fec0 * 0x9d;
            for (iVar3 = 0x91; DAT_0050fec0 = uVar2, iVar3 != 0; iVar3 = iVar3 + -1)
            {
                *puVar4 = *param_1;
                param_1 = param_1 + 1;
                puVar4 = puVar4 + 1;
            }
        }
    }
    else if (cVar1 == '\x03')
    {
        if (DAT_0050febc < 4)
        {
            puVar4 = &DAT_0050d658 + DAT_0050febc * 0x9d;
            QMEMCPY(iVar3, param_1, puVar4, 0x91)
            DAT_0050febc = 1;
            return 1;
        }
    }
    else if ((cVar1 == '\x04') && (DAT_0050fec8 < 8))
    {
        puVar4 = &DAT_00ec9ea0 + DAT_0050fec8 * 0x9d;
        QMEMCPY(iVar3, param_1, puVar4, 0x91)
        DAT_0050fec8 = DAT_0050fec8 + 1;
        return 1;
    }
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

bool FUN_00486ad0(void)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;

    CoInitialize((LPVOID)0x0);
    CoCreateInstance((IID *)&DAT_004af4c8, (LPUNKNOWN)0x0, 1, (IID *)&DAT_004af4a8, &DAT_00510254);
    DAT_00513868 = 0;
    puVar3 = &DAT_00510260;
    MEMSET(iVar2, puVar3, 0, 0x460)
    DAT_0051386c = 0;
    _DAT_00510258 = 0;
    iVar2 = *DAT_00510254;
    uVar1 = FUN_0048c7e0(&LAB_00487370, 0, 0);
    iVar2 = (**(code **)(iVar2 + 0x8c))(DAT_00510254, uVar1);
    return iVar2 < 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00486b40(void)

{
    int iVar1;
    int *piVar2;
    uint uVar3;
    undefined_32 *puVar4;

    if (DAT_00510254 != NULL)
    {
        (**(code **)(*DAT_00510254 + 8))(DAT_00510254);
        DAT_00510254 = NULL;
    }
    uVar3 = 0;
    if (DAT_00513868 != 0)
    {
        piVar2 = &DAT_00510370;
        do
        {
            if (*piVar2 != 0)
            {
                // PlatformAbstraction->allocator_free
                (**(code **)(DAT_00ecc420 + 0x24))(*piVar2);
            }
            uVar3 = uVar3 + 1;
            piVar2 = piVar2 + 0x46;
        } while (uVar3 < DAT_00513868);
    }
    DAT_00513868 = 0;
    puVar4 = &DAT_00510260;
    MEMSET(iVar1, puVar4, 0, 0x460)
    DAT_0051386c = 0;
    _DAT_00510258 = 0;
    CoUninitialize();
    return;
}

uint FUN_00486bc0(int param_1)

{
    uint uVar1;

    if (DAT_00510254 == NULL)
    {
        return 0x887700fa;
    }
    uVar1 = (**(code **)(*DAT_00510254 + 0x98))(DAT_00510254, (&DAT_00510370)[param_1 * 0x46], 0);
    return uVar1 & (-1 < (int)uVar1) - 1;
}

undefined_32 FUN_00486c00(void)

{
    return DAT_00513868;
}

int FUN_00486c10(uint param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_00513868 < param_1)
    {
        return 1;
    }
    puVar2 = &DAT_00510260 + param_1 * 0x46;
    QMEMCPY(iVar1, puVar2, param_2, 0x46)
    return param_1 * 0x23;
}

undefined_32 FUN_00486c50(void)

{
    return DAT_00513870;
}

undefined_32 FUN_00486c60(uint param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_00513870 < param_1)
    {
        return 1;
    }
    puVar2 = &DAT_005117e8 + param_1 * 0x41;
    QMEMCPY(iVar1, puVar2, param_2, 0x41)
    return 0;
}

void FUN_00486ca0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5)

{
    (**(code **)(*DAT_00510254 + 0x68))(DAT_00510254, param_1, param_2, param_5, param_3, param_4);
    return;
}

int FUN_00486cd0(int *param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    int iVar2;

    uVar1 = param_3;
    iVar2 = (**(code **)(*DAT_00510254 + 100))(DAT_00510254, param_1, &param_3, 1, param_2, param_3);
    while (true)
    {
        if (iVar2 < 0)
        {
            return (iVar2 == -0x7788ff42) - 2;
        }
        if (*param_1 != 0)
            break;
        iVar2 = FUN_00487550(param_2, param_1);
        if (iVar2 != -1)
        {
            return iVar2;
        }
        iVar2 = (**(code **)(*DAT_00510254 + 100))(DAT_00510254, param_1, &stack0xfffffff4, 1, param_2, uVar1);
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

int FUN_00486d40(int param_1)

{
    undefined_32 *puVar1;
    int iVar2;
    uint *puVar3;
    uint local_150[6];
    undefined_32 local_138;
    undefined_32 local_134;
    undefined_32 local_130;
    undefined_32 local_12c;
    undefined_32 local_128;
    undefined_8 *local_120;
    int local_11c;
    undefined_32 local_110;
    undefined_32 local_108;
    undefined_32 local_104;
    undefined_8 local_100[256];

    puVar3 = local_150;
    MEMSET(iVar2, puVar3, 0, 0x14)
    local_150[0] = 0x50;
    local_150[1] = (uint)((ushort)local_150[1] & 0xff | 0xc4)
        | (uint)(uint3)((uint3)(local_150[1] >> 8) & 0xffff00 | (uint3)(byte)((byte)(local_150[1] >> 8) | 0x60) | 0x80)
            << 8
        | 0x20;
    puVar1 = (undefined_32 *)FUN_0048c7e0();
    local_138 = *puVar1;
    local_134 = puVar1[1];
    local_130 = puVar1[2];
    local_12c = puVar1[3];
    local_128 = *(undefined_32 *)(param_1 + 0x10);
    __snwprintf(local_100, 0x80, u__s__S_004c8680, param_1 + 0x58, param_1 + 0x98);
    local_120 = local_100;
    iVar2 = _wcslen(param_1 + 0xb8);
    if (iVar2 != 0)
    {
        local_11c = param_1 + 0xb8;
    }
    local_108 = *(undefined_32 *)(param_1 + 0xfc);
    local_104 = *(undefined_32 *)(param_1 + 0x100);
    local_110 = *(undefined_32 *)(param_1 + 0xf8);
    iVar2 = (**(code **)(*DAT_00510254 + 0x60))(DAT_00510254, local_150, 2);
    if (iVar2 < 0)
    {
        (**(code **)(*DAT_00510254 + 0x10))(DAT_00510254);
        _DAT_00510258 = 0;
        DAT_0051386c = 0;
        return iVar2;
    }
    _DAT_00510258 = 1;
    DAT_0051386c = 1;
    return 0;
}

uint FUN_00486e60(void)

{
    uint uVar1;
    int iVar2;
    int iVar3;
    undefined_32 unaff_EDI;
    undefined_32 uStack_118;
    undefined_8 *puStack_114;
    undefined_8 local_104[240];
    int iStack_14;

    puStack_114 = local_104;
    uStack_118 = 0;
    uVar1 = (**(code **)(*DAT_00510254 + 0x58))(DAT_00510254);
    if (uVar1 == 0x8877001e)
    {
        // PlatformAbstraction->allocator_large
        iVar2 = (**(code **)(DAT_00ecc420 + 0x20))(unaff_EDI);
        // PlatformAbstraction->fgetws
        uVar1 = (**(code **)(*DAT_00510254 + 0x58))(DAT_00510254, iVar2, &stack0xfffffef0);
        if (-1 < (int)uVar1)
        {
            *(undefined_32 *)(iVar2 + 0x28) = *(undefined_32 *)(iStack_14 + 0x10);
            __snwprintf(&uStack_118, 0x80, u__s__S_004c8680, iStack_14 + 0x58, iStack_14 + 0x98);
            *(undefined_32 **)(iVar2 + 0x30) = &uStack_118;
            iVar3 = _wcslen(iStack_14 + 0xb8);
            if (iVar3 != 0)
            {
                *(int *)(iVar2 + 0x34) = iStack_14 + 0xb8;
            }
            *(undefined_32 *)(iVar2 + 0x40) = *(undefined_32 *)(iStack_14 + 0xf8);
            *(undefined_32 *)(iVar2 + 0x48) = *(undefined_32 *)(iStack_14 + 0xfc);
            *(undefined_32 *)(iVar2 + 0x4c) = *(undefined_32 *)(iStack_14 + 0x100);
            *(uint *)(iVar2 + 4) = *(uint *)(iVar2 + 4) | 0xe0c4;
            uVar1 = (**(code **)(*DAT_00510254 + 0x7c))(DAT_00510254, iVar2, 0);
            uVar1 = uVar1 & (-1 < (int)uVar1) - 1;
        }
    }
    return uVar1;
}

int FUN_00486f50(void)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 uVar3;
    undefined_8 *puStack_10;
    undefined_8 local_4[4];

    puStack_10 = local_4;
    uVar3 = 0;
    iVar1 = (**(code **)(*DAT_00510254 + 0x58))(DAT_00510254, 0);
    if (iVar1 == -0x7788ffe2)
    {
        // PlatformAbstraction->allocator_large
        uVar2 = (**(code **)(DAT_00ecc420 + 0x20))(puStack_10);
        iVar1 = (**(code **)(*DAT_00510254 + 0x58))(DAT_00510254, uVar2, &puStack_10);
        if (-1 < iVar1)
        {
            FUN_004876d0(uVar2, uVar3);
            // PlatformAbstraction->allocator_free
            (**(code **)(DAT_00ecc420 + 0x24))(uVar2);
        }
    }
    return iVar1;
}

undefined_32 FUN_00486fc0(void)

{
    int iVar1;
    undefined_8 *puVar2;
    uint uVar3;
    undefined_32 uVar4;
    int unaff_retaddr;
    undefined_8 *puStack_110;
    undefined_8 local_104[246];
    undefined_16 uStack_e;
    undefined_32 uStack_8;
    undefined_32 uStack_4;

    puStack_110 = local_104;
    uVar4 = 0;
    iVar1 = (**(code **)(*DAT_00510254 + 0x58))(DAT_00510254, 0);
    if (iVar1 == -0x7788ffe2)
    {
        // PlatformAbstraction->allocator_large
        puVar2 = (undefined_8 *)(**(code **)(DAT_00ecc420 + 0x20))(puStack_110);
        if (puVar2 != NULL)
        {
            iVar1 = (**(code **)(*DAT_00510254 + 0x58))(DAT_00510254, puVar2, &puStack_110);
            if (-1 < iVar1)
            {
                if (unaff_retaddr == 0)
                {
                    uVar3 = *(uint *)(puVar2 + 4) | 0x20;
                }
                else
                {
                    uVar3 = *(uint *)(puVar2 + 4) & 0xffffffdf;
                }
                *(uint *)(puVar2 + 4) = uVar3;
                _wcsncpy(&stack0xfffffef4, *(undefined_32 *)(puVar2 + 0x30), 0x7f);
                uStack_e = 0;
                iVar1 = _wcsrchr(&stack0xfffffef4, 0x3a);
                if (iVar1 != 0)
                {
                    __snwprintf(iVar1 + 2, 0x20, &PTR_DAT_004c868c, uStack_8);
                    *(undefined_8 **)(puVar2 + 0x30) = &stack0xfffffef4;
                    *(undefined_32 *)(puVar2 + 0x28) = uStack_4;
                    iVar1 = (**(code **)(*DAT_00510254 + 0x7c))(DAT_00510254, puVar2, 0);
                    if (-1 < iVar1)
                        goto LAB_004870ab;
                }
            }
        }
        uVar4 = 1;
    }
    else
    {
        uVar4 = 1;
        puVar2 = puStack_110;
    }
LAB_004870ab:
    // PlatformAbstraction->allocator_free
    (**(code **)(DAT_00ecc420 + 0x24))(puVar2);
    return uVar4;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

int FUN_004870d0(int param_1, int param_2)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 local_50[4];
    undefined_32 local_40;
    undefined_32 local_3c;
    int local_1c;

    puVar2 = local_50;
    MEMSET(iVar1, puVar2, 0, 0x14)
    local_50[0] = 0x50;
    iVar1 = param_1 * 0x104;
    local_50[2] = (&DAT_005117e8)[param_1 * 0x41];
    local_50[3] = *(undefined_32 *)(&DAT_005117ec + iVar1);
    local_40 = *(undefined_32 *)(&DAT_005117f0 + iVar1);
    local_3c = *(undefined_32 *)(&DAT_005117f4 + iVar1);
    if (param_2 != 0)
    {
        iVar1 = _wcslen(param_2);
        if (iVar1 != 0)
        {
            local_1c = param_2;
        }
    }
    iVar1 = (**(code **)(*DAT_00510254 + 0x60))(DAT_00510254, local_50, 1);
    if (iVar1 < 0)
    {
        (**(code **)(*DAT_00510254 + 0x10))(DAT_00510254);
        return iVar1;
    }
    _DAT_00510258 = 0;
    DAT_0051386c = 1;
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00487180(void)

{
    if (DAT_0051386c != 0)
    {
        (**(code **)(*DAT_00510254 + 0x10))(DAT_00510254);
    }
    DAT_0051386c = 0;
    _DAT_00510258 = 0;
    return;
}

// Network-handling.c
undefined_32 FUN_004871b0(uint param_1)

{
    undefined_32 uVar1;
    int iVar2;
    undefined_32 *puVar3;

    DAT_00510250 = 0;
    puVar3 = &DAT_0050fee0;
    MEMSET(iVar2, puVar3, 0, 0xdc)
    if (DAT_0051386c != 0)
    {
        uVar1 = (**(code **)(*DAT_00510254 + 0x30))(DAT_00510254, 0, &LAB_004874a0, 0, 0);
        return uVar1;
    }
    if (param_1 < DAT_00513870)
    {
        uVar1 =
            (**(code **)(*DAT_00510254 + 0x30))(DAT_00510254, &DAT_005117e8 + param_1 * 0x41, &LAB_004874a0, 0, 0x80);
        return uVar1;
    }
    return 0x80004005;
}

void FUN_00487230(int param_1, int param_2)

{
    undefined_32 *puVar1;
    int iVar2;
    undefined_32 uVar3;
    undefined_32 local_50[6];
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    int local_1c;

    uVar3 = 0x41;
    if (param_1 != 0)
    {
        uVar3 = 0x51;
    }
    DAT_00513870 = 0;
    puVar1 = &DAT_005117e8;
    MEMSET(iVar2, puVar1, 0, 0x820)
    puVar1 = local_50;
    MEMSET(iVar2, puVar1, 0, 0x14)
    local_50[0] = 0x50;
    puVar1 = (undefined_32 *)FUN_0048c7e0();
    local_38 = *puVar1;
    local_34 = puVar1[1];
    local_30 = puVar1[2];
    local_2c = puVar1[3];
    if (param_2 != 0)
    {
        iVar2 = _wcslen(param_2);
        if (iVar2 != 0)
        {
            local_1c = param_2;
        }
    }
    iVar2 = *DAT_00510254;
    uVar3 = get_hwnd(uVar3);
    (**(code **)(iVar2 + 0x34))(DAT_00510254, local_50, 0, &LAB_00487450, uVar3);
    return;
}

undefined_32 FUN_004872e0(undefined_32 param_1)

{
    undefined_32 uVar1;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    uVar1 = 0;
    local_c = 0;
    local_4 = 0;
    local_8 = param_1;
    local_10 = 0x10;
    (**(code **)(*DAT_00510254 + 0x18))(DAT_00510254, &param_1, &local_10, 0, 0, 0, 0);
    return uVar1;
}

void FUN_00487320(undefined_32 param_1)

{
    (**(code **)(*DAT_00510254 + 0x24))(DAT_00510254, param_1);
    return;
}

undefined_32 FUN_00487340(void)

{
    return DAT_00510250;
}

undefined_32 FUN_00487350(int param_1)

{
    return *(undefined_32 *)(&DAT_0050ff08 + param_1 * 0x2c);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

int FUN_00487550(undefined_32 *param_1, undefined_32 *param_2)

{
    switch (*param_1)
    {
    case 3:
        *param_2 = param_1[2];
        return (-(uint)(param_1[1] != 1) & 0xfffffffa) + 5;
    default:
        return -1;
    case 5:
        *param_2 = param_1[2];
        return 2;
    case 0x31:
        return 1;
    case 0x101:
        _DAT_00510258 = 1;
        return 8;
    }
}

void FUN_004876d0(int param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_8 local_100[254];
    undefined_16 local_2;

    _wcsncpy(local_100, *(undefined_32 *)(param_1 + 0x30), 0x7f);
    local_2 = 0;
    iVar1 = _wcstok(local_100, &DAT_004c8698);
    if (iVar1 != 0)
    {
        _wcsncpy(param_2 + 0x16, iVar1, 0x1f);
        *(undefined_16 *)((int)param_2 + 0x96) = 0;
    }
    iVar1 = _wcstok(0, &DAT_004c8694);
    if (iVar1 != 0)
    {
        FUN_0048c380(param_2 + 0x26, iVar1, 0x1f);
        *(undefined_8 *)((int)param_2 + 0xb7) = 0;
    }
    *param_2 = *(undefined_32 *)(param_1 + 8);
    param_2[1] = *(undefined_32 *)(param_1 + 0xc);
    param_2[2] = *(undefined_32 *)(param_1 + 0x10);
    param_2[3] = *(undefined_32 *)(param_1 + 0x14);
    param_2[4] = *(undefined_32 *)(param_1 + 0x28);
    param_2[5] = *(undefined_32 *)(param_1 + 0x2c);
    param_2[0x3e] = *(undefined_32 *)(param_1 + 0x40);
    param_2[0x3f] = *(undefined_32 *)(param_1 + 0x48);
    param_2[0x40] = *(undefined_32 *)(param_1 + 0x4c);
    return;
}

// 004877b0
void file_access_fopen(undefined_32 param_1)

{
    _file_access_fopen(param_1, &DAT_004c86a0);
    return;
}

undefined_32 FUN_004877d0(char *param_1)

{
    if (DAT_00529508 != 0)
    {
        return 0;
    }
    // PlatformAbstraction->fopen
    DAT_00529508 = (**(code **)(DAT_00ecc420 + 0x30))(param_1, &DAT_004b6cfc);
    if (DAT_00529508 == 0)
    {
        DAT_00529508 = 0;
        return 0;
    }
    _strncpy(&DAT_005138b8, param_1, 0x7f);
    DAT_00513937 = 0;
    return 1;
}

// 00487830
undefined_32 _file_access_fopen(byte *param_1, undefined_32 param_2)

{
    byte bVar1;
    byte *pbVar2;
    int iVar3;
    byte *pbVar4;
    bool bVar5;

    if (DAT_00529500 != 0)
    {
        file_access_push();
    }
    pbVar4 = &DAT_004b7580;
    pbVar2 = param_1;
    do
    {
        bVar1 = *pbVar2;
        bVar5 = bVar1 < *pbVar4;
        if (bVar1 != *pbVar4)
        {
        LAB_00487872:
            iVar3 = (1 - (uint)bVar5) - (uint)(bVar5 != 0);
            goto LAB_00487877;
        }
        if (bVar1 == 0)
            break;
        bVar1 = pbVar2[1];
        bVar5 = bVar1 < pbVar4[1];
        if (bVar1 != pbVar4[1])
            goto LAB_00487872;
        pbVar2 = pbVar2 + 2;
        pbVar4 = pbVar4 + 2;
    } while (bVar1 != 0);
    iVar3 = 0;
LAB_00487877:
    if (iVar3 == 0)
    {
        DAT_00529504 = 0;
    }
    else
    {
        // PlatformAbstraction->fopen
        DAT_00529504 = (**(code **)(DAT_00ecc420 + 0x30))(param_1, param_2);
        if (DAT_00529504 == 0)
        {
            DAT_00529504 = 0;
            if (DAT_00529500 != 0)
            {
                file_access_pop();
            }
            return 0;
        }
    }
    // PlatformAbstraction->allocator_large
    DAT_00ec9e84 = (**(code **)(DAT_00ecc420 + 0x20))(0x1000);
    _strncpy((char *)&DAT_005143d8, (char *)param_1, 0x7f);
    DAT_00514457 = 0;
    DAT_005284f8 = 0;
    DAT_00529500 = 1;
    return 1;
}

//----- (00487900) --------------------------------------------------------
void file_access_close(void)

{
    if (DAT_00529500 != 0)
    {
        if (DAT_00529504 != 0)
        {
            // PlatformAbstraction->fclose
            (**(code **)(DAT_00ecc420 + 0x34))(DAT_00529504);
        }
        DAT_00529504 = 0;
        // PlatformAbstraction->allocator_free
        (**(code **)(DAT_00ecc420 + 0x24))(DAT_00ec9e84);
        if (DAT_0052950c != 0)
        {
            file_access_pop();
            return;
        }
        DAT_00529500 = 0;
    }
    return;
}

void FUN_00487960(void)

{
    if (DAT_00529508 != 0)
    {
        // PlatformAbstraction->fclose
        (**(code **)(DAT_00ecc420 + 0x34))(DAT_00529508);
        DAT_00529508 = 0;
        _strncpy(&DAT_005138b8, s_NOT_OPEN_004c86a4, 0x7f);
        DAT_00513937 = 0;
    }
    return;
}

bool FUN_004879a0(char *param_1)

{
    char cVar1;
    int iVar2;
    uint uVar3;
    char *pcVar4;

    if ((DAT_00529508 == 0) || (param_1 == NULL))
    {
        return false;
    }
    uVar3 = -1;
    pcVar4 = param_1;
    do
    {
        if (uVar3 == 0)
            break;
        uVar3 = uVar3 - 1;
        cVar1 = *pcVar4;
        pcVar4 = pcVar4 + 1;
    } while (cVar1 != '\0');
    // PlatformAbstraction->fwrite
    iVar2 = (**(code **)(DAT_00ecc420 + 0x40))(DAT_00529508, param_1, ~uVar3 - 1);
    return ~uVar3 - 1 != iVar2;
}

bool FUN_004879f0(int param_1)

{
    int iVar1;
    int iVar2;

    if ((DAT_00529508 != 0) && (param_1 != 0))
    {
        iVar1 = __vsnprintf(&DAT_00528500, 0x1000, param_1, &stack0x00000008);
        // PlatformAbstraction->fwrite
        iVar2 = (**(code **)(DAT_00ecc420 + 0x40))(DAT_00529508, &DAT_00528500, iVar1);
        return iVar2 != iVar1;
    }
    return true;
}

//----- (00487A50) --------------------------------------------------------
undefined_32 file_access_tokenizer(undefined_32 param_1)

{
    int iVar1;
    undefined_8 *puVar2;
    int iVar3;
    int *piVar4;

    iVar3 = 0;
    DAT_00ec8e80 = 0;
    iVar1 = strtok(param_1, s___004c86b0);
    if (iVar1 == 0)
    {
        DAT_00ec8e80 = 0;
        return 0;
    }
    piVar4 = &DAT_00ec8e88;
    do
    {
        if (0xec9e88 < (int)piVar4)
        {
            return 1;
        }
        puVar2 = (undefined_8 *)strchr(iVar1, 0x3d);
        if (puVar2 == NULL)
        {
            piVar4[-1] = iVar1;
            *piVar4 = iVar1;
        }
        else
        {
            *puVar2 = 0;
            piVar4[-1] = iVar1;
            *piVar4 = (int)(puVar2 + 1);
        }
        iVar3 = iVar3 + 1;
        piVar4 = piVar4 + 2;
        iVar1 = strtok(0, s___004c86b0);
    } while (iVar1 != 0);
    DAT_00ec8e80 = iVar3;
    return 0;
}

//----- (00487AE0) --------------------------------------------------------
undefined_32 parse_line(void)

{
    int iVar1;

    iVar1 = read_line();
    if (iVar1 != 0)
    {
        while (true)
        {
            iVar1 = file_access_tokenizer(DAT_00ec9e84);
            if (iVar1 != 0)
                break;
            if (DAT_00ec8e80 != 0)
            {
                return 1;
            }
            iVar1 = read_line();
            if (iVar1 == 0)
            {
                return 0;
            }
        }
    }
    return 0;
}

//----- (00487B20) --------------------------------------------------------
undefined_32 read_line(void)

{
    char cVar1;
    bool bVar2;
    int iVar3;
    undefined_8 *puVar4;
    uint uVar5;
    int iVar6;
    char *pcVar7;
    char *pcVar8;

    bVar2 = false;
    iVar6 = 0xfff;
    pcVar7 = DAT_00ec9e84;
    do
    {
        if (iVar6 == 0)
        {
            return 1;
        }
        // PlatformAbstraction->fgets
        iVar3 = (**(code **)(DAT_00ecc420 + 0x3c))(DAT_00529504, pcVar7, iVar6);
        if (iVar3 == 0)
        {
            return 0;
        }
        DAT_005284f8 = DAT_005284f8 + 1;
        cVar1 = *pcVar7;
        if ((((cVar1 != ';') && (cVar1 != '#')) && (cVar1 != '\n')) && (cVar1 != '\r'))
        {
            puVar4 = (undefined_8 *)strchr(pcVar7, '#');
            if (puVar4 != NULL)
            {
                *puVar4 = 0;
            }
            FUN_0049edd0(pcVar7);
            uVar5 = strlen(DAT_00ec9e84) if (DAT_00ec9e84[uVar5 - 3] == '\\')
            {
                iVar6 = 0x1000 - (uVar5 - 1);
                pcVar7 = DAT_00ec9e84 + (uVar5 - 3);
            }
            else
            {
                bVar2 = true;
                if ((DAT_00ec9e84[uVar5 - 2] == '\r') || (DAT_00ec9e84[uVar5 - 2] == '\n'))
                {
                    DAT_00ec9e84[uVar5 - 2] = '\0';
                }
            }
        }
        if (bVar2)
        {
            return 1;
        }
    } while (true);
}

//----- (00487C00) --------------------------------------------------------
void file_access_push(void)

{
    char cVar1;
    undefined_32 uVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    undefined_32 *puVar6;
    undefined_32 *puVar7;

    uVar3 = -1;
    puVar6 = &DAT_005143d8;
    do
    {
        puVar7 = puVar6;
        if (uVar3 == 0)
            break;
        uVar3 = uVar3 - 1;
        puVar7 = (undefined_32 *)((int)puVar6 + 1);
        cVar1 = *(char *)puVar6;
        puVar6 = puVar7;
    } while (cVar1 != '\0');
    uVar3 = ~uVar3;
    puVar6 = (undefined_32 *)((int)puVar7 - uVar3);
    puVar7 = (undefined_32 *)(&DAT_00513938 + DAT_0052950c * 0x80);
    QMEMCPY(uVar4, puVar6, puVar7, uVar3 >> 2)
    for (uVar3 = uVar3 & 3; uVar2 = DAT_005284f8, uVar3 != 0; uVar3 = uVar3 - 1)
    {
        *(undefined_8 *)puVar7 = *(undefined_8 *)puVar6;
        puVar6 = (undefined_32 *)((int)puVar6 + 1);
        puVar7 = (undefined_32 *)((int)puVar7 + 1);
    }
    DAT_005284f8 = 0;
    *(undefined_32 *)(&DAT_00514388 + DAT_0052950c * 4) = uVar2;
    uVar2 = DAT_00529504;
    DAT_00529504 = 0;
    *(undefined_32 *)(&DAT_00514338 + DAT_0052950c * 4) = DAT_00ec9e84;
    *(undefined_32 *)(&DAT_005284a8 + DAT_0052950c * 4) = uVar2;
    puVar6 = &DAT_00ec8e80;
    puVar7 = (undefined_32 *)(&DAT_00514458 + DAT_0052950c * 0x1004);
    QMEMCPY(iVar5, puVar6, puVar7, 0x401)
    DAT_0052950c = DAT_0052950c + 1;
    return;
}

//----- (00487C90) --------------------------------------------------------
void file_access_pop(void)

{
    char cVar1;
    uint uVar2;
    uint uVar3;
    int iVar4;
    int iVar5;
    undefined_32 *puVar6;
    char *pcVar7;
    char *pcVar8;
    undefined_32 *puVar9;

    if (DAT_0052950c != 0)
    {
        iVar5 = DAT_0052950c + -1;
        uVar2 = -1;
        pcVar7 = &DAT_00513938 + iVar5 * 0x80;
        do
        {
            pcVar8 = pcVar7;
            if (uVar2 == 0)
                break;
            uVar2 = uVar2 - 1;
            pcVar8 = pcVar7 + 1;
            cVar1 = *pcVar7;
            pcVar7 = pcVar8;
        } while (cVar1 != '\0');
        uVar2 = ~uVar2;
        puVar6 = (undefined_32 *)(pcVar8 + -uVar2);
        puVar9 = &DAT_005143d8;
        DAT_0052950c = iVar5;
        QMEMCPY(uVar3, puVar6, puVar9, uVar2 >> 2)
        DAT_00529504 = *(undefined_32 *)(&DAT_005284a8 + iVar5 * 4);
        for (uVar2 = uVar2 & 3; uVar2 != 0; uVar2 = uVar2 - 1)
        {
            *(undefined_8 *)puVar9 = *(undefined_8 *)puVar6;
            puVar6 = (undefined_32 *)((int)puVar6 + 1);
            puVar9 = (undefined_32 *)((int)puVar9 + 1);
        }
        DAT_005284f8 = *(undefined_32 *)(&DAT_00514388 + iVar5 * 4);
        DAT_00ec9e84 = *(undefined_32 *)(&DAT_00514338 + iVar5 * 4);
        puVar6 = (undefined_32 *)(&DAT_00514458 + iVar5 * 0x1004);
        puVar9 = &DAT_00ec8e80;
        QMEMCPY(iVar4, puVar6, puVar9, 0x401)
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00487d20(void)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_0052d438 == 0)
    {
        puVar2 = &DAT_00ec8ca0;
        MEMSET(iVar1, puVar2, 0, 0x38)
        puVar2 = &DAT_00ec8da0;
        MEMSET(iVar1, puVar2, 0, 0x38)
        puVar2 = &DAT_00529578;
        MEMSET(iVar1, puVar2, 0, 0x20)
        DAT_0052d438 = 1;
        DAT_0052d444 = 0;
        iVar1 = DirectDrawEnumerateA(&LAB_00488d70, NULL);
        if (iVar1 != 0)
        {
            return 0;
        }
        DAT_0052951c = 0x280;
        _DAT_00529520 = 0x1e0;
    }
    return 1;
}

void FUN_00487da0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_0052d43c != 0)
    {
        FUN_00487e80();
    }
    DAT_0052d44c = 0;
    puVar2 = &DAT_0052a9f8;
    MEMSET(iVar1, puVar2, 0, 0xa90)
    puVar2 = &DAT_00ec8ca0;
    MEMSET(iVar1, puVar2, 0, 0x38)
    puVar2 = &DAT_00ec8da0;
    MEMSET(iVar1, puVar2, 0, 0x38)
    puVar2 = &DAT_00529578;
    MEMSET(iVar1, puVar2, 0, 0x20)
    DAT_0052d450 = 0;
    DAT_0052d444 = 0;
    DAT_0052d438 = 0;
    return;
}

undefined_32 FUN_00487e00(uint param_1)

{
    undefined_32 uVar1;
    int iVar2;

    if (DAT_0052d43c != 0)
    {
        FUN_00487e80();
    }
    if (DAT_0052d444 < param_1)
    {
        return 0;
    }
    DAT_00529514 = param_1;
    DAT_0052d448 = &DAT_0052a9f8 + param_1 * 0xa9;
    uVar1 = get_hwnd();
    iVar2 = FUN_00488b00(uVar1);
    if (iVar2 == 0)
    {
        return 0;
    }
    _qsort(&DAT_005295f8, DAT_0052d44c, 0x50, &unk_compar);
    DAT_0052d43c = 1;
    return 1;
}

void FUN_00487e80(void)

{
    int iVar1;
    undefined_32 *puVar2;

    if ((DAT_0052d438 == 1) && (DAT_0052d43c != 0))
    {
        if (DAT_0052d440 != 0)
        {
            FUN_00488030();
        }
        FUN_00488d10();
        DAT_00529514 = 0;
        puVar2 = &DAT_00ec8ca0;
        MEMSET(iVar1, puVar2, 0, 0x38)
        puVar2 = &DAT_00ec8da0;
        MEMSET(iVar1, puVar2, 0, 0x38)
        puVar2 = &DAT_00529578;
        MEMSET(iVar1, puVar2, 0, 0x20)
        DAT_0052d448 = 0;
        PTR_FUN_004c86b8 = platform_noop;
        DAT_0052d43c = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00487f00(uint param_1, int param_2)

{
    undefined_32 uVar1;
    int iVar2;

    if ((param_2 != 0) && (DAT_0052d44c <= param_1))
    {
        return 0;
    }
    if (DAT_0052d440 != 0)
    {
        FUN_00488030();
    }
    if (param_2 == 0)
    {
        DAT_0052d450 = &DAT_00529518;
        uVar1 = get_hwnd(&DAT_00529518);
        iVar2 = FUN_00489270(uVar1);
        if (iVar2 == 0)
        {
            return 0;
        }
    }
    else
    {
        DAT_0052d450 = &DAT_005295f8 + param_1 * 0x50;
        uVar1 = get_hwnd(DAT_0052d450);
        iVar2 = FUN_00489790(uVar1);
        if (iVar2 == 0)
        {
            return 0;
        }
    }
    DAT_00529510 = CreateFontA((-(uint)(*(uint *)(DAT_0052d450 + 4) < 0x280) & 0xfffffff4) + 0x18, 0, 0, 0, 400, 0, 0,
                               0, 0, 0, 0, 0, 2, s_Arial_004c9050);
    _DAT_00529568 = 0;
    _DAT_0052956c = 0;
    _DAT_00529570 = DAT_00ec8dac;
    _DAT_00529574 = DAT_00ec8db0;
    DAT_0052d440 = 1;
    DAT_0052d458 = param_2;
    FUN_00488410(&DAT_00ec8da0, 0, 0);
    FUN_00489ab0();
    if (param_2 != 0)
    {
        FUN_00488410(&DAT_00ec8da0, 0, 0);
    }
    return 1;
}

void FUN_00488030(void)

{
    if (DAT_0052d440 != 0)
    {
        FUN_004899a0();
    }
    if (DAT_00529510 != (HGDIOBJ)0x0)
    {
        DeleteObject(DAT_00529510);
        DAT_00529510 = (HGDIOBJ)0x0;
    }
    DAT_0052d440 = 0;
    return;
}

undefined_32 FUN_00488070(void)

{
    return DAT_0052d444;
}

undefined_32 FUN_00488080(uint param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_32 *puVar2;

    if (param_1 < DAT_0052d444)
    {
        puVar2 = &DAT_0052a9f8 + param_1 * 0xa9;
        QMEMCPY(iVar1, puVar2, param_2, 0xa9)
        return 0;
    }
    return 1;
}

undefined_32 FUN_004880c0(undefined_32 *param_1)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_0052d444 != 0)
    {
        puVar2 = &DAT_0052a9f8 + DAT_00529514 * 0xa9;
        QMEMCPY(iVar1, puVar2, param_1, 0xa9)
        return 0;
    }
    return 1;
}

void FUN_00488100(int param_1)

{
    undefined_32 uVar1;
    int iVar2;

    if (DAT_0052d43c == 0)
    {
        return;
    }
    if (DAT_0052d440 == 0)
    {
        return;
    }
    if (param_1 == 0)
    {
        return;
    }
    iVar2 = *DAT_0052d454;
    uVar1 = get_hwnd(DAT_004c86bc);
    iVar2 = (**(code **)(iVar2 + 0x50))(DAT_0052d454, uVar1);
    if (iVar2 != 0)
    {
        return;
    }
    if (DAT_0052d458 == 0)
    {
        if (DAT_00ec8e00 == NULL)
            goto LAB_004881a3;
        iVar2 = (**(code **)(*DAT_00ec8e00 + 0x6c))(DAT_00ec8e00);
    }
    else
    {
        if ((DAT_0052d454 != NULL)
            && (iVar2 = (**(code **)(*DAT_0052d454 + 0x54))(DAT_0052d454, *(undefined_32 *)(DAT_0052d450 + 4),
                                                            *(undefined_32 *)(DAT_0052d450 + 8),
                                                            *(undefined_32 *)(DAT_0052d450 + 0x1c), 0, 0),
                iVar2 != 0))
        {
            return;
        }
        if (DAT_00ec8d00 == NULL)
            goto LAB_004881a3;
        iVar2 = (**(code **)(*DAT_00ec8d00 + 0x6c))(DAT_00ec8d00);
    }
    if (iVar2 != 0)
    {
        return;
    }
LAB_004881a3:
    if (DAT_00529578 != NULL)
    {
        (**(code **)(*DAT_00529578 + 0x6c))(DAT_00529578);
    }
    return;
}

// some constructor
undefined_32 *FUN_004881c0(int *param_1, int param_2, int param_3)

{
    undefined_32 *puVar1;
    undefined_32 *puVar2;
    uint uVar3;
    int iVar4;
    uint uVar5;
    int *piVar6;
    undefined_32 *puVar7;

    // PlatformAbstraction->allocator_large
    puVar2 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(0xe0); // VBuffer
    if (puVar2 == NULL)
    {
        return NULL;
    }
    puVar2[0x16] = 0;
    puVar2[1] = 0;
    piVar6 = puVar2 + 3;
    QMEMCPY(iVar4, param_1, piVar6, 0x13)
    iVar4 = puVar2[3];
    uVar5 = (uint)puVar2[9] >> 3;
    puVar2[0x17] = 0;
    uVar3 = uVar5 * iVar4;
    puVar2[6] = uVar3;
    puVar2[7] = uVar3 / uVar5;
    iVar4 = uVar5 * puVar2[4] * iVar4;
    puVar2[5] = iVar4;
    if ((param_2 != 0) && (DAT_0052d43c != 0))
    {
        puVar2[2] = 0;
        puVar1 = puVar2 + 0x19;
        *puVar2 = 1;
        puVar7 = puVar1;
        MEMSET(iVar4, puVar7, 0, 0x1f)
        *puVar1 = 0x7c;
        puVar2[0x1a] = 7;
        puVar2[0x33] = 0x40;
        if (param_3 == 0)
        {
            puVar2[0x33] = 0x840;
        }
        puVar2[0x1c] = puVar2[3];
        puVar2[0x1b] = puVar2[4];
        iVar4 = (**(code **)(*DAT_0052d454 + 0x18))(DAT_0052d454, puVar1, puVar2 + 0x18, 0);
        if (iVar4 != 0)
        {
            return NULL;
        }
        piVar6 = (int *)puVar2[0x18];
        iVar4 = (**(code **)(*piVar6 + 0x58))(piVar6, puVar2 + 0x19);
        if (iVar4 != 0)
        {
            return NULL;
        }
        if ((puVar2[0x33] & 0x4000) != 0)
        {
            puVar2[2] = 1;
        }
        puVar2[6] = puVar2[0x1d];
        puVar2[7] = (uint)puVar2[0x1d] / uVar5;
        return puVar2;
    }
    *puVar2 = 0;
    puVar2[2] = 0;
    // PlatformAbstraction->allocator_large
    iVar4 = (**(code **)(DAT_00ecc420 + 0x20))(iVar4);
    puVar2[0x16] = iVar4;
    if (iVar4 == 0)
    {
        return NULL;
    }
    puVar2[1] = 1;
    return puVar2;
}

void FUN_00488310(int *param_1)

{
    int *piVar1;

    if (*param_1 == 0)
    {
        if (param_1[0x16] != 0)
        {
            // PlatformAbstraction->allocator_free
            (**(code **)(DAT_00ecc420 + 0x24))(param_1[0x16]);
            param_1[0x16] = 0;
        }
    }
    else if ((*param_1 == 1) && (piVar1 = (int *)param_1[0x18], piVar1 != NULL))
    {
        (**(code **)(*piVar1 + 8))(piVar1);
        param_1[0x18] = 0;
        // PlatformAbstraction->allocator_free
        (**(code **)(DAT_00ecc420 + 0x24))(param_1);
        return;
    }
    // PlatformAbstraction->allocator_free
    (**(code **)(DAT_00ecc420 + 0x24))(param_1);
    return;
}

undefined_32 FUN_00488370(int *param_1)

{
    int iVar1;

    if (*param_1 != 0)
    {
        if (*param_1 != 1)
        {
            return 1;
        }
        if (((param_1[0x33] & 0x20U) != 0) && ((param_1[0x33] & 0x200000U) != 0))
        {
            return 0;
        }
        iVar1 = FUN_00489a00(param_1 + 0x18);
        param_1[0x16] = iVar1;
        if (iVar1 == 0)
        {
            return 0;
        }
    }
    param_1[1] = param_1[1] + 1;
    return 1;
}

int FUN_004883c0(int *param_1)

{
    int iVar1;

    if (*param_1 == 0)
    {
        if (param_1[1] != 0)
        {
            param_1[1] = param_1[1] + -1;
        }
    }
    else if (*param_1 == 1)
    {
        if (param_1[1] == 0)
        {
            return 0;
        }
        iVar1 = FUN_00489a60(param_1 + 0x18);
        if (iVar1 != 0)
        {
            return iVar1;
        }
        param_1[1] = param_1[1] + -1;
        return 0;
    }
    return 1;
}

bool FUN_00488410(int *param_1, uint param_2, int *param_3)

{
    undefined_8 uVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    uint *puVar5;
    undefined_32 *puVar6;
    uint *puVar7;
    undefined_32 *puVar8;
    int local_8;

    if (*param_1 == 0)
    {
        iVar2 = param_1[9];
        if (iVar2 == 8)
        {
            uVar1 = (undefined_8)param_2;
            if (param_3 == NULL)
            {
                uVar3 = param_1[5];
                puVar6 = (undefined_32 *)param_1[0x16];
                for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1)
                {
                    *puVar6 = CONCAT22(CONCAT11(uVar1, uVar1), CONCAT11(uVar1, uVar1));
                    puVar6 = puVar6 + 1;
                }
                for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
                {
                    *(undefined_8 *)puVar6 = uVar1;
                    puVar6 = (undefined_32 *)((int)puVar6 + 1);
                }
                return true;
            }
            local_8 = 0;
            puVar6 = (undefined_32 *)(param_1[7] * param_3[1] + param_1[0x16] + *param_3);
            if (0 < param_3[3])
            {
                do
                {
                    uVar3 = param_3[2];
                    puVar8 = puVar6;
                    for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1)
                    {
                        *puVar8 = CONCAT22(CONCAT11(uVar1, uVar1), CONCAT11(uVar1, uVar1));
                        puVar8 = puVar8 + 1;
                    }
                    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
                    {
                        *(undefined_8 *)puVar8 = uVar1;
                        puVar8 = (undefined_32 *)((int)puVar8 + 1);
                    }
                    puVar6 = (undefined_32 *)((int)puVar6 + param_1[6]);
                    local_8 = local_8 + 1;
                } while (local_8 < param_3[3]);
            }
        }
        else if (iVar2 == 0x10)
        {
            if (param_3 == NULL)
            {
                puVar5 = (uint *)param_1[0x16];
                uVar3 = (uint)param_1[5] >> 1;
                if ((uVar3 & 1) == 0)
                {
                    for (uVar3 = (uint)param_1[5] >> 2; uVar3 != 0; uVar3 = uVar3 - 1)
                    {
                        *puVar5 = param_2 & 0xffff | param_2 << 0x10;
                        puVar5 = puVar5 + 1;
                    }
                }
                else
                {
                    for (; uVar3 != 0; uVar3 = uVar3 - 1)
                    {
                        *(undefined_16 *)puVar5 = (undefined_16)param_2;
                        puVar5 = (uint *)((int)puVar5 + 2);
                    }
                }
                return true;
            }
            local_8 = 0;
            puVar5 = (uint *)(param_1[0x16] + (param_1[7] * param_3[1] + *param_3) * 2);
            if (0 < param_3[3])
            {
                do
                {
                    uVar3 = param_3[2];
                    puVar7 = puVar5;
                    if ((uVar3 & 1) == 0)
                    {
                        for (uVar3 = uVar3 >> 1; uVar3 != 0; uVar3 = uVar3 - 1)
                        {
                            *puVar7 = param_2 & 0xffff | param_2 << 0x10;
                            puVar7 = puVar7 + 1;
                        }
                    }
                    else
                    {
                        for (; uVar3 != 0; uVar3 = uVar3 - 1)
                        {
                            *(undefined_16 *)puVar7 = (undefined_16)param_2;
                            puVar7 = (uint *)((int)puVar7 + 2);
                        }
                    }
                    puVar5 = (uint *)((int)puVar5 + param_1[6]);
                    local_8 = local_8 + 1;
                } while (local_8 < param_3[3]);
                return true;
            }
        }
        else if (iVar2 == 0x20)
        {
            if (param_3 == NULL)
            {
                puVar5 = (uint *)param_1[0x16];
                for (uVar3 = (uint)param_1[5] >> 2; uVar3 != 0; uVar3 = uVar3 - 1)
                {
                    *puVar5 = param_2;
                    puVar5 = puVar5 + 1;
                }
                return true;
            }
            local_8 = 0;
            puVar5 = (uint *)(param_1[0x16] + (param_1[7] * param_3[1] + *param_3) * 4);
            if (0 < param_3[3])
            {
                do
                {
                    puVar7 = puVar5;
                    MEMSET(iVar2, puVar7, param_2, param_3[2])
                    puVar5 = (uint *)((int)puVar5 + param_1[6]);
                    local_8 = local_8 + 1;
                } while (local_8 < param_3[3]);
                return true;
            }
        }
    }
    else if (*param_1 == 1)
    {
        if (((param_1[0x33] & 0x20U) != 0) && ((param_1[0x33] & 0x200000U) != 0))
        {
            return false;
        }
        iVar2 = FUN_00489bd0(param_1 + 0x18, param_2, param_3);
        return iVar2 == 0;
    }
    return true;
}

int FUN_00488670(int *param_1, int param_2, undefined_32 param_3, undefined_32 param_4)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;
    int *piVar4;
    undefined_32 *puVar5;
    int *piVar6;
    bool bVar7;
    undefined_32 local_4c[5];
    int local_38[14];

    iVar1 = 0x38;
    bVar7 = true;
    piVar4 = param_1;
    piVar6 = (int *)(param_2 + 0x20);
    do
    {
        if (iVar1 == 0)
            break;
        iVar1 = iVar1 + -1;
        bVar7 = *(char *)piVar4 == *(char *)piVar6;
        piVar4 = (int *)((int)piVar4 + 1);
        piVar6 = (int *)((int)piVar6 + 1);
    } while (bVar7);
    if (bVar7)
    {
        return param_2;
    }
    if ((*(int *)(param_2 + 0x20) == 0) && (*param_1 == 0))
    {
        return param_2;
    }
    iVar1 = param_2;
    if (*(int *)(param_2 + 0x24) != param_1[1])
    {
        puVar3 = (undefined_32 *)(param_2 + 0xc);
        puVar5 = local_4c;
        QMEMCPY(iVar1, puVar3, puVar5, 0x13)
        piVar4 = param_1;
        piVar6 = local_38;
        QMEMCPY(iVar1, piVar4, piVar6, 0xe)
        iVar1 = FUN_004881c0(local_4c, 0, 0);
        if (iVar1 == 0)
        {
            // PlatformAbstraction->debugFunction3
            // "D:\\devel.QA5\\pc_gnome\\SpecPlat\\rdroid_gnome\\Jones3D\\Libs\\Std\\Win95\\stdDisplay.c"
            // Unable to allocate memory for new tVBuffer
            FUN_00484780(*(undefined_32 *)(DAT_00ecc420 + 0x10), s_D__devel_QA5_pc_gnome_SpecPlat_r_004c9058, 0x47a,
                         s_Unable_to_allocate_memory_for_ne_004c90a8, 0, 0, 0, 0);
            return 0;
        }
    }
    FUN_00488370(param_2);
    FUN_00488370(iVar1);
    iVar2 = 0;
    if (0 < *(int *)(iVar1 + 0x10))
    {
        do
        {
            FUN_0048d1c0(iVar2 * *(int *)(iVar1 + 0x18) + *(int *)(iVar1 + 0x58), param_1,
                         iVar2 * *(int *)(param_2 + 0x18) + *(int *)(param_2 + 0x58), param_2 + 0x20,
                         *(undefined_32 *)(iVar1 + 0xc), param_3, param_4);
            iVar2 = iVar2 + 1;
        } while (iVar2 < *(int *)(iVar1 + 0x10));
    }
    FUN_004883c0(param_2);
    FUN_004883c0(iVar1);
    piVar4 = (int *)(iVar1 + 0x20);
    QMEMCPY(iVar2, param_1, piVar4, 0xe)
    if (iVar1 != param_2)
    {
        FUN_00488310(param_2);
    }
    return iVar1;
}

undefined_32 FUN_004887c0(int param_1)

{
    char cVar1;
    int iVar2;
    uint uVar3;
    LPCSTR pCVar4;
    int unaff_retaddr;
    HDC hdc;
    LPCSTR local_4;

    hdc = DAT_00ec8e00;
    iVar2 = (**(code **)(DAT_00ec8e00->unused + 0x44))(DAT_00ec8e00, &local_4);
    if (iVar2 != 0)
    {
        return 0;
    }
    SetBkMode(hdc, 1);
    SelectObject(hdc, DAT_00529510);
    SetTextColor(hdc, 0xffff);
    uVar3 = -1;
    pCVar4 = local_4;
    do
    {
        if (uVar3 == 0)
            break;
        uVar3 = uVar3 - 1;
        cVar1 = *pCVar4;
        pCVar4 = pCVar4 + 1;
    } while (cVar1 != '\0');
    TextOutA(hdc, unaff_retaddr, param_1, local_4, ~uVar3 - 1);
    (**(code **)(DAT_00ec8e00->unused + 0x68))(DAT_00ec8e00, hdc);
    return 1;
}

// Not decompiled
// LAB_00488850
// UndefinedFunction_00488850
int unk_compar(int param_1, int param_2)

{
    int iVar1;
    int iVar2;

    iVar1 = *(int *)(param_1 + 0x1c);
    iVar2 = *(int *)(param_2 + 0x1c);
    if (iVar1 == iVar2)
    {
        iVar1 = *(int *)(param_1 + 4);
        iVar2 = *(int *)(param_2 + 4);
        if (iVar1 == iVar2)
        {
            iVar1 = *(int *)(param_1 + 8);
            iVar2 = *(int *)(param_2 + 8);
        }
    }
    return iVar1 - iVar2;
}

bool FUN_00488880(undefined_32 param_1, undefined_32 param_2)

{
    int iVar1;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;
    undefined_32 local_4;

    local_c = 0;
    local_8 = 0;
    local_4 = 0;
    local_10 = 0x1000;
    iVar1 = (**(code **)(*DAT_0052d454 + 0x5c))(DAT_0052d454, &local_10, param_1, param_2);
    return iVar1 != 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_004888d0(undefined_32 *param_1, int param_2)

{
    int *piVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 uStack_8c;
    int iStack_4;

    uStack_8c = 0;
    puVar3 = &DAT_0052957c;
    for (iVar2 = 0x1f; piVar1 = DAT_0052d454, iVar2 != 0; iVar2 = iVar2 + -1)
    {
        *puVar3 = 0;
        puVar3 = puVar3 + 1;
    }
    _DAT_00529584 = DAT_00ec8db0;
    _DAT_00529588 = DAT_00ec8dac;
    _DAT_005295e4 = (-(uint)(param_2 != 0) & 0xffffc800) + 0x24000;
    DAT_0052957c = 0x7c;
    _DAT_00529580 = 0x1007;
    puVar3 = &DAT_005295c4;
    QMEMCPY(iVar2, param_1, puVar3, 8)
    iVar2 = (**(code **)(*piVar1 + 0x18))(piVar1, &DAT_0052957c, &DAT_00529578);
    if (iVar2 != 0)
    {
        return 1;
    }
    if (param_2 == 0)
    {
        puVar3 = &uStack_8c;
        MEMSET(iVar2, puVar3, 0, 0x1f)
        uStack_8c = 0x7c;
        iVar2 = (**(code **)(*DAT_00529578 + 100))(DAT_00529578, 0, &uStack_8c, 1, 0);
        if (iVar2 == 0)
        {
            (**(code **)(*DAT_00529578 + 0x80))(DAT_00529578, 0);
        }
        else
        {
            _DAT_005295e4 = 0x800;
            DAT_004c86c0._0_2_ = 0;
            iStack_4 = 1;
            iVar2 = (**(code **)(*DAT_0052d454 + 0x18))(DAT_0052d454, &DAT_0052957c, &DAT_00529578, 0);
            if (iVar2 != 0)
            {
                return 1;
            }
        }
    }
    if ((iStack_4 != 1) && (iVar2 = (**(code **)(*DAT_00ec8e00 + 0xc))(DAT_00ec8e00, DAT_00529578), iVar2 != 0))
    {
        return 1;
    }
    iVar2 = (**(code **)(*DAT_00529578 + 0x58))(DAT_00529578, &DAT_0052957c);
    if (iVar2 == 0)
    {
        if (((*(uint *)(DAT_0052d448 + 0x11c) & 0x10000000) == 0) || (PTR_FUN_004c86b8 = FUN_00488a90, iStack_4 == 1))
        {
            PTR_FUN_004c86b8 = platform_noop;
        }
        FUN_00488a90();
        return 0;
    }
    return 1;
}

undefined_32 FUN_00488a80(void)

{
    return DAT_00529578;
}

void FUN_00488a90(void)

{
    undefined_32 *puVar1;
    int iVar2;
    undefined_32 local_64[20];
    uint local_14;

    puVar1 = local_64;
    MEMSET(iVar2, puVar1, 0, 0x19)
    local_64[0] = 100;
    local_14 = DAT_004c86c0 & 0xffff;
    do
    {
        iVar2 = (**(code **)(*DAT_00529578 + 0x14))(DAT_00529578, 0, 0, 0, 0x3000000, local_64);
        if (iVar2 == 0)
        {
            return;
        }
        if (iVar2 == -0x7789fe3e)
        {
            iVar2 = (**(code **)(*DAT_00529578 + 0x6c))(DAT_00529578);
        }
    } while (iVar2 == 0);
    return;
}

bool FUN_00488b00(void)

{
    int iVar1;
    undefined4 *puVar2;
    int *piVar3;
    undefined4 uStack_5e4;
    undefined4 *puStack_5e0;
    undefined *puStack_5dc;
    undefined4 *puStack_5d8;
    GUID *lpGUID;
    int *local_5c0[7];
    undefined4 local_5a4[12];
    int iStack_574;
    undefined4 auStack_440[255];
    int iStack_44;
    int iStack_40;
    undefined4 uStack_24;

    local_5c0[0] = NULL;
    if (*(int *)(DAT_0052d448 + 0x108) == 0)
    {
        lpGUID = (GUID *)(DAT_0052d448 + 0x294);
    }
    else
    {
        lpGUID = NULL;
    }
    puStack_5d8 = (undefined4 *)0x488b3a;
    iVar1 = DirectDrawCreate(lpGUID, local_5c0, (IUnknown *)0x0);
    if (iVar1 != 0)
    {
        return false;
    }
    puStack_5e0 = (undefined4 *)0x0;
    puVar2 = local_5a4;
    MEMSET(iVar1, puVar2, 0, 0x5f)
    local_5a4[0] = 0x17c;
    puStack_5d8 = (undefined4 *)0x488b6f;
    iVar1 = (**(code **)(*local_5c0[0] + 0x2c))(); // LPDIRECTDRAW * + 0x2c = GetCaps ?
    if (iVar1 != 0)
    {
        return false;
    }
    DAT_00ec8d80 = iStack_574;
    puStack_5d8 = &DAT_0052d454;
    puStack_5dc = &DAT_004af1c8;
    iVar1 = (**(code **)*puStack_5e0)();
    if (iVar1 != 0)
    {
        return false;
    }
    uStack_5e4 = 1;
    puVar2 = auStack_440;
    MEMSET(iVar1, puVar2, 0, 0x10a)
    piVar3 = DAT_0052d454;
    iVar1 = (**(code **)(*DAT_0052d454 + 0x6c))(DAT_0052d454, auStack_440);
    if (iVar1 != 0)
    {
        return false;
    }
    if (((iStack_44 == 0x1142) && (iStack_40 == 0x643d)) || ((iStack_44 == 0x10d9 && (iStack_40 == 0x8626))))
    {
        DAT_0052d45c = 1;
    }
    if ((iStack_44 == 0x121a) && ((iStack_40 == 1 || (iStack_40 == 2))))
    {
        puStack_5dc = (undefined *)0x1000;
        puStack_5d8 = NULL;
        iVar1 = (**(code **)(*DAT_0052d454 + 0x5c))(DAT_0052d454, &puStack_5dc, &puStack_5e0, &stack0xfffffa34);
        if (iVar1 != 0)
        {
            return false;
        }
        DAT_00ec8d80 = DAT_00ec8d80 - (int)puStack_5e0;
    }
    iVar1 = (**(code **)(iRam00000001 + 8))(1);
    if (iVar1 != 0)
    {
        return false;
    }
    DAT_0052d44c = 0;
    iVar1 = (**(code **)(*DAT_0052d454 + 0x50))(DAT_0052d454, uStack_24, 0x11, uStack_5e4, piVar3, 0);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*DAT_0052d454 + 0x20))(DAT_0052d454, 0, 0, 0, &LAB_00488f50);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*DAT_0052d454 + 0x50))(DAT_0052d454, uStack_24, 8);
    return iVar1 == 0;
}

// destructor for 52d454
void FUN_00488d10(void)

{
    int iVar1;
    undefined_32 uVar2;

    if (DAT_0052d454 != NULL)
    {
        iVar1 = *DAT_0052d454;
        uVar2 = get_hwnd(8);
        (**(code **)(iVar1 + 0x50))(DAT_0052d454, uVar2);
        (**(code **)(*DAT_0052d454 + 0x4c))(DAT_0052d454);
        (**(code **)(*DAT_0052d454 + 8))(DAT_0052d454); // release
        DAT_0052d454 = NULL;
    }
    DAT_004c86bc = 8;
    DAT_0052d44c = 0;
    return;
}

// Not decompiled
// DirectDrawEnumerateA Callback LPDDENUMCALLBACKA
undefined4 LAB_00488d70(undefined4 *param_1, char *param_2, char *param_3)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    undefined4 uVar4;
    int *unaff_ESI;
    int *piVar5;
    int *piVar6;
    int *piStack_4;

    piStack_4 = (int *)0x0;
    if (DAT_0052d444 < 0x10)
    {
        iVar1 = DAT_0052d444 * 0x2a4;
        iVar2 = DAT_0052d444 * 0xa9;
        if (param_1 == (undefined4 *)0x0)
        {
            *(undefined4 *)(&DAT_0052ac8c + iVar1) = 0;
            *(undefined4 *)(&DAT_0052ac90 + iVar1) = 0;
            *(undefined4 *)(&DAT_0052ac94 + iVar1) = 0;
            *(undefined4 *)(&DAT_0052ac98 + iVar1) = 0;
            *(undefined4 *)(&DAT_0052ab00 + iVar1) = 1;
        }
        else
        {
            *(undefined4 *)(&DAT_0052ac8c + iVar1) = *param_1;
            *(undefined4 *)(&DAT_0052ac90 + iVar1) = param_1[1];
            *(undefined4 *)(&DAT_0052ac94 + iVar1) = param_1[2];
            uVar4 = param_1[3];
            *(undefined4 *)(&DAT_0052ab00 + iVar1) = 0;
            *(undefined4 *)(&DAT_0052ac98 + iVar1) = uVar4;
        }
        _strncpy((char *)(iVar1 + 0x52aa78), param_2, 0x7f);
        (&DAT_0052aaf7)[iVar1] = 0;
        _strncpy((char *)(&DAT_0052a9f8 + iVar2), param_3, 0x7f);
        (&DAT_0052aa77)[iVar1] = 0;
        if (param_1 == (undefined4 *)0x0)
        {
            *(undefined4 *)(&DAT_0052aaf8 + iVar1) = 0;
        }
        else
        {
            *(undefined4 *)(&DAT_0052aaf8 + iVar1) = 1;
        }
        iVar2 = DirectDrawCreate(param_1, &piStack_4, NULL);
        if (iVar2 != 0)
        {
            MessageBoxA((HWND)0x0, s_DirectDraw_Failure_Check_the_Des_004c90d4, s_Racer_Error_004b4928, 0);
            return 1;
        }
        iVar2 = *piStack_4; // IDirectDraw
        piVar3 = (int *)get_hwnd(0x11);
        iVar2 = (**(code **)(iVar2 + 0x50))(piStack_4);
        if (iVar2 == 0)
        {
            piVar6 = (int *)(&DAT_0052ab10 + iVar1);
            piVar5 = piVar6;
            MEMSET(iVar2, piVar5, 0, 0x5f)
            *piVar6 = 0x17c;
            iVar2 = (**(code **)(*unaff_ESI + 0x2c))(unaff_ESI, piVar6, 0);
            if (iVar2 != 0)
            {
                (**(code **)(*piVar3 + 8))(piVar3);
                return 1;
            }
            if ((*(uint *)(&DAT_0052ab18 + iVar1) & 0x80000) == 0)
            {
                *(undefined4 *)(&DAT_0052ab04 + iVar1) = 1;
            }
            else
            {
                *(undefined4 *)(&DAT_0052ab04 + iVar1) = 0;
            }
            if (((&DAT_0052ab14)[iVar1] & 1) == 0)
            {
                *(undefined4 *)(&DAT_0052aafc + iVar1) = 0;
            }
            else
            {
                *(undefined4 *)(&DAT_0052aafc + iVar1) = 1;
            }
            *(undefined4 *)(&DAT_0052ab08 + iVar1) = *(undefined4 *)(&DAT_0052ab4c + iVar1);
            *(undefined4 *)(&DAT_0052ab0c + iVar1) = *(undefined4 *)(&DAT_0052ab50 + iVar1);
            iVar2 = *piVar3;
            uVar4 = get_hwnd(8);
            iVar2 = (**(code **)(iVar2 + 0x50))(piVar3, uVar4);
            if (iVar2 == 0)
            {
                (**(code **)(*piVar6 + 8))(piVar6);
                if (*(int *)(&DAT_0052aafc + iVar1) == 1)
                {
                    DAT_0052d444 = DAT_0052d444 + 1;
                }
                return 1;
            }
        }
    }
    return 0;
}

undefined_32 FUN_00489260(void)

{
    return DAT_0052d454;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00489270(undefined_32 param_1, undefined_32 *param_2)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    undefined_32 *puVar4;
    int *unaff_EDI;
    int *piVar5;
    undefined_32 *puVar6;
    int *piVar7;
    undefined_32 uVar8;
    undefined_32 local_8;
    undefined_32 local_4;

    local_8 = param_2[1];
    local_4 = param_2[2];
    DAT_00ec8ca0 = 1;
    _DAT_00ec8ca4 = 0;
    _DAT_00ec8ca8 = 0;
    _DAT_00ec8cf8 = 0;
    puVar4 = &DAT_00ec8d04;
    MEMSET(iVar2, puVar4, 0, 0x1f)
    uVar8 = 0;
    DAT_00ec8d04 = 0x7c;
    _DAT_00ec8d08 = 1;
    DAT_00ec8d6c = 0x200;
    piVar7 = &DAT_00ec8d04;
    iVar2 = (**(code **)(*DAT_0052d454 + 0x18))(DAT_0052d454, &DAT_00ec8d04, &DAT_00ec8d00, 0);
    if (iVar2 != 0)
    {
        return 0;
    }
    iVar2 = (**(code **)(*DAT_0052d454 + 0x10))(DAT_0052d454, 0, &local_8);
    if (iVar2 != 0)
    {
        return 0;
    }
    iVar2 = (**(code **)(*unaff_EDI + 0x20))(unaff_EDI, 0, uVar8);
    if (iVar2 != 0)
    {
        (**(code **)(*piVar7 + 8))(piVar7);
        return 0;
    }
    iVar2 = (**(code **)(*DAT_00ec8d00 + 0x70))(DAT_00ec8d00);
    if (iVar2 != 0)
    {
        (**(code **)(iRam00000000 + 8))(0);
        return 0;
    }
    (**(code **)(iRam00000000 + 8))(0);
    iVar1 = (**(code **)(*DAT_00ec8d00 + 0x58))(DAT_00ec8d00);
    iVar2 = DAT_00ec8d10;
    if (iVar1 != 0)
    {
        return 0;
    }
    param_2[1] = DAT_00ec8d10;
    iVar1 = DAT_00ec8d0c;
    param_2[2] = DAT_00ec8d0c;
    param_2[4] = DAT_00ec8d14;
    if (((iVar2 == 0x140) && (iVar1 == 200)) || ((iVar2 == 0x280 && (param_2[2] == 400))))
    {
        *param_2 = 0x3f400000;
    }
    else
    {
        *param_2 = 1.0f;
    }
    if ((DAT_00ec8d50 & 0x1828) != 0)
    {
        return 0;
    }
    piVar5 = unaff_EDI;
    if ((DAT_00ec8d50 & 0x40) != 0)
    {
        param_2[6] = 1;
        param_2[7] = DAT_00ec8d58;
        iVar2 = 0;
        for (uVar3 = DAT_00ec8d5c; (uVar3 & 1) == 0; uVar3 = uVar3 >> 1)
        {
            iVar2 = iVar2 + 1;
        }
        param_2[0xb] = iVar2;
        uVar8 = stdCalcBitPos((int)(0xff / (ulonglong)(DAT_00ec8d5c >> ((byte)iVar2 & 0x1f))));
        param_2[0xe] = uVar8;
        iVar2 = 0;
        for (; (uVar3 & 1) != 0; uVar3 = uVar3 >> 1)
        {
            iVar2 = iVar2 + 1;
        }
        param_2[8] = iVar2;
        iVar2 = 0;
        for (uVar3 = DAT_00ec8d60; (uVar3 & 1) == 0; uVar3 = uVar3 >> 1)
        {
            iVar2 = iVar2 + 1;
        }
        param_2[0xc] = iVar2;
        uVar8 = stdCalcBitPos((int)(0xff / (ulonglong)(DAT_00ec8d60 >> ((byte)iVar2 & 0x1f))));
        param_2[0xf] = uVar8;
        iVar2 = 0;
        for (; (uVar3 & 1) != 0; uVar3 = uVar3 >> 1)
        {
            iVar2 = iVar2 + 1;
        }
        param_2[9] = iVar2;
        iVar2 = 0;
        for (uVar3 = DAT_00ec8d64; (uVar3 & 1) == 0; uVar3 = uVar3 >> 1)
        {
            iVar2 = iVar2 + 1;
        }
        param_2[0xd] = iVar2;
        uVar8 = stdCalcBitPos((int)(0xff / (ulonglong)(DAT_00ec8d64 >> ((byte)iVar2 & 0x1f))));
        param_2[0x10] = uVar8;
        iVar2 = 0;
        for (; (uVar3 & 1) != 0; uVar3 = uVar3 >> 1)
        {
            iVar2 = iVar2 + 1;
        }
        param_2[10] = iVar2;
        piVar5 = unaff_EDI;
    }
    DAT_00ec8e0c = piVar5;
    DAT_00ec8e10 = piVar7;
    switch (param_2[7])
    {
    case 8:
        param_2[5] = param_2[4];
        break;
    case 0x10:
        param_2[5] = (uint)param_2[4] >> 1;
        break;
    case 0x18:
        param_2[5] = (uint)param_2[4] / 3;
        break;
    case 0x20:
        param_2[5] = (uint)param_2[4] >> 2;
    }
    puVar4 = (undefined_32 *)((uint)param_2[7] >> 3);
    param_2[3] = (int)puVar4 * param_2[1] * param_2[2];
    piVar7 = param_2 + 1;
    piVar5 = &DAT_00ec8cac;
    QMEMCPY(iVar2, piVar7, piVar5, 0x13)
    _DAT_00ec8cb8 = DAT_00ec8d14;
    _DAT_00ec8cbc = DAT_00ec8d14 / (uint)puVar4;
    if ((DAT_00ec8d6c & 0x4000) != 0)
    {
        _DAT_00ec8ca8 = 1;
    }
    puVar6 = &DAT_00ec8e04;
    MEMSET(iVar2, puVar6, 0, 0x1f)
    DAT_00ec8e04 = 0x7c;
    _DAT_00ec8e08 = 7;
    DAT_00ec8e6c = 0x2040;
    iVar2 = (**(code **)(*DAT_0052d454 + 0x18))(DAT_0052d454, &DAT_00ec8e04, &DAT_00ec8e00, 0);
    if (iVar2 == 0)
    {
        DAT_00ec8da0 = 1;
        _DAT_00ec8da4 = 0;
        _DAT_00ec8da8 = 1;
        iVar2 = (**(code **)(*DAT_00ec8e00 + 0x58))(DAT_00ec8e00, &DAT_00ec8e04);
        if (iVar2 != 0)
        {
            return 0;
        }
        DAT_00ec8db0 = DAT_00ec8e0c;
        DAT_00ec8dac = DAT_00ec8e10;
        _DAT_00ec8db8 = DAT_00ec8e14;
        if ((DAT_00ec8e50 & 0x1828) == 0)
        {
            if ((DAT_00ec8e50 & 0x40) != 0)
            {
                _DAT_00ec8dc0 = 1;
                _DAT_00ec8dc4 = DAT_00ec8e58;
                _DAT_00ec8dd4 = 0;
                for (uVar3 = DAT_00ec8e5c; (uVar3 & 1) == 0; uVar3 = uVar3 >> 1)
                {
                    _DAT_00ec8dd4 = _DAT_00ec8dd4 + 1;
                }
                _DAT_00ec8de0 = stdCalcBitPos((int)(0xff / (ulonglong)(DAT_00ec8e5c >> ((byte)_DAT_00ec8dd4 & 0x1f))));
                _DAT_00ec8dc8 = 0;
                for (; (uVar3 & 1) != 0; uVar3 = uVar3 >> 1)
                {
                    _DAT_00ec8dc8 = _DAT_00ec8dc8 + 1;
                }
                _DAT_00ec8dd8 = 0;
                for (uVar3 = DAT_00ec8e60; (uVar3 & 1) == 0; uVar3 = uVar3 >> 1)
                {
                    _DAT_00ec8dd8 = _DAT_00ec8dd8 + 1;
                }
                _DAT_00ec8de4 = stdCalcBitPos((int)(0xff / (ulonglong)(DAT_00ec8e60 >> ((byte)_DAT_00ec8dd8 & 0x1f))));
                _DAT_00ec8dcc = 0;
                for (; (uVar3 & 1) != 0; uVar3 = uVar3 >> 1)
                {
                    _DAT_00ec8dcc = _DAT_00ec8dcc + 1;
                }
                _DAT_00ec8ddc = 0;
                for (uVar3 = DAT_00ec8e64; (uVar3 & 1) == 0; uVar3 = uVar3 >> 1)
                {
                    _DAT_00ec8ddc = _DAT_00ec8ddc + 1;
                }
                _DAT_00ec8de8 = stdCalcBitPos((int)(0xff / (ulonglong)(DAT_00ec8e64 >> ((byte)_DAT_00ec8ddc & 0x1f))));
                _DAT_00ec8dd0 = 0;
                for (; (uVar3 & 1) != 0; uVar3 = uVar3 >> 1)
                {
                    _DAT_00ec8dd0 = _DAT_00ec8dd0 + 1;
                }
                puVar4 = &DAT_00ec8d04;
            }
            _DAT_00ec8db8 = DAT_00ec8e14;
            DAT_004c86bc = 8;
            _DAT_00ec8dbc = DAT_00ec8e14 / (uint)puVar4;
            return 1;
        }
        return 0;
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00489790(undefined_32 param_1)

{
    undefined_32 *puVar1;
    int iVar2;
    int unaff_EBX;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    int *piVar5;

    DAT_004c86bc = 0x11;
    iVar2 = (**(code **)(*DAT_0052d454 + 0x50))(DAT_0052d454, param_1, 0x11);
    if (iVar2 != 0)
    {
        return 0;
    }
    puVar1 = (undefined_32 *)(unaff_EBX + 4);
    iVar2 = (**(code **)(*DAT_0052d454 + 0x54))(DAT_0052d454, *puVar1, *(undefined_32 *)(unaff_EBX + 8),
                                                *(undefined_32 *)(unaff_EBX + 0x1c), 0, 0);
    if (iVar2 != 0)
    {
        return 0;
    }
    _DAT_00ec8ca4 = 0;
    _DAT_00ec8ca8 = 0;
    DAT_00ec8ca0 = 1;
    puVar3 = puVar1;
    puVar4 = &DAT_00ec8cac;
    QMEMCPY(iVar2, puVar3, puVar4, 0x13)
    _DAT_00ec8cf8 = 0;
    puVar3 = &DAT_00ec8d04;
    MEMSET(iVar2, puVar3, 0, 0x1f)
    DAT_00ec8d04 = 0x7c;
    DAT_00ec8d10 = *puVar1;
    DAT_00ec8d0c = *(undefined_32 *)(unaff_EBX + 8);
    _DAT_00ec8d18 = 1;
    _DAT_00ec8d08 = 0x21;
    DAT_00ec8d6c = 0x2218;
    iVar2 = (**(code **)(*DAT_0052d454 + 0x18))(DAT_0052d454, &DAT_00ec8d04, &DAT_00ec8d00, 0);
    if (iVar2 != 0)
    {
        return 0;
    }
    piVar5 = DAT_00ec8d00;
    iVar2 = (**(code **)(*DAT_00ec8d00 + 0x58))(DAT_00ec8d00, &DAT_00ec8d04);
    if (iVar2 != 0)
    {
        return 0;
    }
    _DAT_00ec8cb8 = DAT_00ec8d14;
    _DAT_00ec8cbc = DAT_00ec8d14 / (*(uint *)(unaff_EBX + 0x1c) >> 3);
    if ((DAT_00ec8d6c & 0x4000) != 0)
    {
        _DAT_00ec8ca8 = 1;
    }
    _DAT_00ec8da4 = 0;
    _DAT_00ec8da8 = 0;
    DAT_00ec8da0 = 1;
    puVar3 = puVar1;
    puVar4 = &DAT_00ec8dac;
    QMEMCPY(iVar2, puVar3, puVar4, 0x13)
    _DAT_00ec8df8 = 0;
    puVar3 = &DAT_00ec8e04;
    MEMSET(iVar2, puVar3, 0, 0x1f)
    DAT_00ec8e04 = 0x7c;
    DAT_00ec8e10 = *puVar1;
    DAT_00ec8e0c = *(undefined_32 *)(unaff_EBX + 8);
    _DAT_00ec8e08 = 0x21;
    DAT_00ec8e6c = 0x2004;
    _DAT_00ec8e18 = 1;
    iVar2 = (**(code **)(*DAT_00ec8d00 + 0x30))(DAT_00ec8d00, &DAT_00ec8e6c, &DAT_00ec8e00);
    if (iVar2 != 0)
    {
        return 0;
    }
    iVar2 = (**(code **)(*DAT_00ec8e00 + 0x58))(DAT_00ec8e00, &DAT_00ec8e04);
    if (iVar2 != 0)
    {
        return 0;
    }
    if ((DAT_00ec8e6c & 0x4000) != 0)
    {
        _DAT_00ec8da8 = 1;
    }
    _DAT_00ec8db8 = DAT_00ec8e14;
    _DAT_00ec8dbc = DAT_00ec8e14 / (uint)piVar5;
    return 1;
}

void FUN_004899a0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_00529578 != NULL)
    {
        (**(code **)(*DAT_00ec8e00 + 0x20))(DAT_00ec8e00, 0, DAT_00529578);
        (**(code **)(*DAT_00529578 + 8))(DAT_00529578);
    }
    if (DAT_00ec8d00 != NULL)
    {
        (**(code **)(*DAT_00ec8d00 + 8))(DAT_00ec8d00);
    }
    puVar2 = &DAT_00529578;
    MEMSET(iVar1, puVar2, 0, 0x20)
    puVar2 = &DAT_00ec8da0;
    MEMSET(iVar1, puVar2, 0, 0x38)
    puVar2 = &DAT_00ec8ca0;
    MEMSET(iVar1, puVar2, 0, 0x38)
    return;
}

int *FUN_00489a00(int **param_1)

{
    int iVar1;

    do
    {
        iVar1 = (**(code **)(**param_1 + 100))(*param_1, 0, param_1 + 1, 1, 0);
        if (iVar1 == 0)
        {
            return param_1[10];
        }
        if (iVar1 == -0x7789fe3e)
        {
            if ((*(byte *)(param_1 + 0x1b) & 4) == 0)
            {
                iVar1 = (**(code **)(**param_1 + 0x6c))(*param_1);
            }
            else
            {
                iVar1 = (**(code **)(*DAT_00ec8d00 + 0x6c))(DAT_00ec8d00);
            }
        }
    } while (iVar1 == 0);
    return NULL;
}

undefined_32 FUN_00489a60(int **param_1)

{
    int iVar1;

    do
    {
        iVar1 = (**(code **)(**param_1 + 0x80))(*param_1, 0);
        if (iVar1 == 0)
        {
            return 0;
        }
        if (iVar1 == -0x7789fe3e)
        {
            if ((*(byte *)(param_1 + 0x1b) & 4) == 0)
            {
                iVar1 = (**(code **)(**param_1 + 0x6c))(*param_1);
            }
            else
            {
                iVar1 = (**(code **)(*DAT_00ec8d00 + 0x6c))(DAT_00ec8d00);
            }
        }
    } while (iVar1 == 0);
    return 1;
}

undefined_32 FUN_00489ab0(void)

{
    int iVar1;
    HWND hWnd;
    tagPOINT local_28;
    undefined_32 local_20;
    undefined_32 local_1c;
    int local_18;
    int local_14;
    int local_10;
    int local_c;
    int local_8;
    int local_4;

    if (DAT_0050b5cc == 1)
    {
        DAT_0050b5cc = 0;
        return 0;
    }
    while (true)
    {
        if (DAT_0052d458 == 0)
        {
            hWnd = (HWND)get_hwnd();
            local_28.y = 0;
            local_28.x = 0;
            ClientToScreen(hWnd, &local_28);
            local_10 = local_28.x;
            local_8 = local_28.x + DAT_00ec8dac;
            local_18 = DAT_00ec8dac;
            local_c = local_28.y;
            local_4 = local_28.y + DAT_00ec8db0;
            local_20 = 0;
            local_1c = 0;
            local_14 = DAT_00ec8db0;
            iVar1 = (**(code **)(*DAT_00ec8d00 + 0x14))(DAT_00ec8d00, &local_10, DAT_00ec8e00, &local_20, 0x1000000, 0);
        }
        else
        {
            iVar1 = (**(code **)(*DAT_00ec8d00 + 0x2c))(DAT_00ec8d00, 0, 0);
        }
        if (iVar1 == 0)
            break;
        if (((iVar1 == -0x7789fe3e)
             && ((iVar1 = (**(code **)(*DAT_00ec8d00 + 0x6c))(DAT_00ec8d00),
                  iVar1 != 0
                      || ((DAT_0052d458 == 0
                           && (iVar1 = (**(code **)(*DAT_00ec8e00 + 0x6c))(DAT_00ec8e00), iVar1 != 0))))))
            || ((iVar1 != -0x7789fde4 && (iVar1 != 0))))
        {
            return 1;
        }
    }
    return 0;
}

void FUN_00489bc0(void)

{
    if (PTR_FUN_004c86b8 != NULL)
    {
        // WARNING: Could not recover jumptable at 0x00489bc9. Too many branches
        // WARNING: Treating indirect jump as call
        (*(code *)PTR_FUN_004c86b8)();
        return;
    }
    return;
}

undefined_32 FUN_00489bd0(int **param_1, undefined_32 param_2, int *param_3)

{
    int iVar1;
    undefined_32 *puVar2;
    int local_74;
    int local_70;
    int *local_6c;
    int *local_68;
    undefined_32 local_64[20];
    undefined_32 local_14;

    puVar2 = local_64;
    MEMSET(iVar1, puVar2, 0, 0x19)
    local_64[0] = 100;
    local_14 = param_2;
    if (param_3 == NULL)
    {
        local_6c = param_1[4];
        local_68 = param_1[3];
        local_74 = 0;
        local_70 = 0;
    }
    else
    {
        if (param_3[2] == 0)
        {
            return 1;
        }
        if (param_3[3] == 0)
        {
            return 1;
        }
        local_74 = *param_3;
        local_70 = param_3[1];
        local_6c = (int *)(local_74 + param_3[2]);
        local_68 = (int *)(local_70 + param_3[3]);
    }
    do
    {
        iVar1 = (**(code **)(**param_1 + 0x14))(*param_1, &local_74, 0, 0, 0x1000400, local_64);
        if (iVar1 == 0)
        {
            return 0;
        }
        if (iVar1 == -0x7789fe3e)
        {
            if ((*(byte *)(param_1 + 0x1b) & 4) == 0)
            {
                iVar1 = (**(code **)(**param_1 + 0x6c))(*param_1);
            }
            else
            {
                iVar1 = (**(code **)(*DAT_00ec8d00 + 0x6c))(DAT_00ec8d00);
            }
        }
    } while (iVar1 == 0);
    return 1;
}

void FUN_00489cd0(uint param_1, uint param_2, uint param_3, undefined_32 param_4)

{
    FUN_00489bd0(&DAT_00ec8e00, ((param_1 & 0xf8) << 5 | param_2 & 0xfc) << 3 | (param_3 & 0xff) >> 3, param_4);
    return;
}

void FUN_00489d20(undefined_32 param_1)

{
    FUN_0048d4a0(param_1, &DAT_00ec8da0);
    return;
}

undefined_32 FUN_00489d40(void)

{
    return DAT_0052d44c;
}

undefined_32 FUN_00489d50(uint param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_32 *puVar2;

    if (param_1 < DAT_0052d44c)
    {
        puVar2 = (undefined_32 *)(&DAT_005295f8 + param_1 * 0x50);
        QMEMCPY(iVar1, puVar2, param_2, 0x14)
        return 0;
    }
    return 1;
}

undefined_32 FUN_00489d90(undefined_32 *param_1)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_0052d450 != NULL)
    {
        puVar2 = DAT_0052d450;
        QMEMCPY(iVar1, puVar2, param_1, 0x14)
        return 0;
    }
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00489dc0(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_0052d570;
    MEMSET(iVar1, puVar2, 0, 0xc0)
    puVar2 = &DAT_0052d870;
    MEMSET(iVar1, puVar2, 0, 0x368)
    DAT_0052e638 = (undefined_32 *)FUN_00489260();
    if (DAT_0052e638 == NULL)
    {
        return 0;
    }
    iVar1 = (**(code **)*DAT_0052e638)(DAT_0052e638, &DAT_004af278, &DAT_0052e640);
    if (iVar1 != 0)
    {
        return 0;
    }
    DAT_0052d56c = 0;
    //   dword_52E640->EnumDevices(sub_48B540, 0) IDirectInput8::
    iVar1 = (**(code **)(*DAT_0052e640 + 0xc))(DAT_0052e640, &LAB_0048b540, 0);
    if (iVar1 != 0)
    {
        return 0;
    }
    if (DAT_0052d56c == 0)
    {
        return 0;
    }
    _DAT_0052e64c = 1;
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// constructor / destructor for 0052e644 ?
void FUN_00489e40(void)

{
    int iVar1;
    undefined_32 *puVar2;

    if (DAT_0052e650 != 0)
    {
        FUN_0048a1c0();
    }
    if (DAT_0052e640 != NULL)
    {
        (**(code **)(*DAT_0052e640 + 8))(DAT_0052e640); // Release
    }
    IDirect3DDevice9_0052e644 = 0; // NULL
    puVar2 = &DAT_0052d570;
    MEMSET(iVar1, puVar2, 0, 0xc0)
    puVar2 = &DAT_0052d870;
    MEMSET(iVar1, puVar2, 0, 0x368)
    DAT_0052e640 = NULL;
    DAT_0052d56c = 0;
    _DAT_0052e64c = 0;
    return;
}

undefined_32 FUN_00489ea0(void)

{
    return DAT_0052d56c;
}

undefined_32 *FUN_00489eb0(void)

{
    return &DAT_0052d870;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00489ec0(uint param_1)

{
    int iVar1;
    undefined_8 *puVar2;
    undefined_8 local_51c[284];
    undefined_8 local_400[1024];

    if ((DAT_0052e650 == 0) && (param_1 < DAT_0052d56c))
    {
        _DAT_0052d55c = param_1;
        DAT_0052e618 = &DAT_0052d870 + param_1 * 0xda;
        if ((&DAT_0052d878)[param_1 * 0xda] != 0)
        {
            FUN_0048b4b0(local_51c);
            iVar1 = FUN_004888d0(local_51c, *DAT_0052e618 == 0, (DAT_0052d4cc & 0x8000) != 0);
            if (iVar1 == 0)
            {
                puVar2 = local_400 + 2;
                iVar1 = 0x100;
                do
                {
                    puVar2[1] = 0x80;
                    *puVar2 = 0xfe;
                    puVar2[-1] = 0xfe;
                    puVar2[-2] = 0xfe;
                    puVar2 = puVar2 + 4;
                    iVar1 = iVar1 + -1;
                } while (iVar1 != 0);
                iVar1 = (**(code **)(*DAT_0052e638 + 0x14))(DAT_0052e638, 0x4c, local_400, &DAT_0052e63c, 0);
                if ((iVar1 == 0)
                    && (iVar1 = (**(code **)(*DAT_0052e640 + 0x20))(DAT_0052e640, DAT_0052e618 + 0x8e, DAT_00ec8e00,
                                                                    &IDirect3DDevice9_0052e644, 0),
                        iVar1 == 0))
                {
                    _DAT_0052d460 = 0xfc;
                    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xc))(IDirect3DDevice9_0052e644, &DAT_0052d460,
                                                                            &stack0xfffffadc);
                    if (iVar1 == 0)
                    {
                        DAT_0052e61c = 0;
                        _DAT_0052e620 = 0;
                        iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x20))(IDirect3DDevice9_0052e644,
                                                                                 &LAB_0048b770, 0);
                        if ((((iVar1 == 0) && (DAT_0052e61c != 0)) && (_DAT_0052e620 != 0))
                            && (iVar1 = FUN_0048b3c0(), iVar1 != 0))
                        {
                            DAT_0052e624 = 0x200;
                            if (DAT_0052e618[0xc] != 0)
                            {
                                DAT_0052e624 = DAT_0052e618[0xc];
                            }
                            DAT_004c98b4 = 1;
                            DAT_0052e62c = 0;
                            DAT_0052e630 = 0;
                            DAT_0052e634 = 0;
                            DAT_0052d564 = FUN_0048add0(&DAT_004ae850);
                            DAT_0052d568 = FUN_0048add0(&DAT_004ae888);
                            iVar1 = DAT_0052d568 * 0x60;
                            if (((&DAT_0052d59c)[DAT_0052d568 * 0x18] == 0) && (DAT_0052e618[3] != 0))
                            {
                                *(undefined_32 *)(&DAT_0052d5a8 + iVar1) = 1;
                                *(undefined_32 *)(&DAT_0052d5ac + iVar1) = 0;
                            }
                            DAT_0052d560 = FUN_0048add0(&DAT_004ae8c0);
                            iVar1 = DAT_0052d560 * 0x60;
                            if (((&DAT_0052d59c)[DAT_0052d560 * 0x18] == 0) && (DAT_0052e618[3] != 0))
                            {
                                *(undefined_32 *)(&DAT_0052d5a8 + iVar1) = 1;
                                *(undefined_32 *)(&DAT_0052d5ac + iVar1) = 0;
                            }
                            iVar1 = FUN_0048aeb0();
                            if ((iVar1 != 0)
                                && (iVar1 = FUN_00488880(DAT_0052e618 + 0x4d, DAT_0052e618 + 0x4e), iVar1 == 0))
                            {
                                DAT_0052e650 = 1;
                                return 1;
                            }
                        }
                    }
                }
            }
        }
    }
    return 0;
}

undefined_32 FUN_0048a140(void)

{
    int iVar1;
    uint uVar2;
    uint uVar3;

    if ((DAT_0052d4cc & 0x100) != 0)
    {
        iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x23, 3);
        if (iVar1 == 0)
        {
            return 2;
        }
    }
    if ((DAT_0052d4cc & 0x80) != 0)
    {
        uVar2 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x60))(IDirect3DDevice9_0052e644, 4, 0);
        uVar3 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x23, 0);
        if ((uVar2 | uVar3) == 0)
        {
            return 1;
        }
    }
    return 0;
}

uint FUN_0048a1a0(void)

{
    return (DAT_0052d4ec & 0xff) >> 3 & 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// some static constructor ?
void FUN_0048a1c0(void)

{
    FUN_0048ac50();
    if (DAT_0052e63c != NULL)
    {
        (**(code **)(*DAT_0052e63c + 8))(DAT_0052e63c); // Release ?
        DAT_0052e63c = NULL;
    }
    if (DAT_0052e648 != NULL)
    {
        (**(code **)(*DAT_0052e648 + 8))(DAT_0052e648); // Release ?
        DAT_0052e648 = NULL;
    }
    if (IDirect3DDevice9_0052e644 != NULL)
    {
        (**(code **)(*IDirect3DDevice9_0052e644 + 8))(IDirect3DDevice9_0052e644); // Release ?
        IDirect3DDevice9_0052e644 = NULL;
    }
    DAT_0052e61c = 0;
    _DAT_0052d55c = 0;
    DAT_0052e618 = 0;
    _DAT_0052e620 = 0;
    DAT_0052e650 = 0;
    return;
}

void FUN_0048a230(int param_1, undefined_32 *param_2, undefined_32 *param_3, undefined_32 *param_4)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;

    if (param_1 == 1)
    {
        *param_3 = *(undefined_32 *)(&DAT_0052d5a8 + DAT_0052d568 * 0x60);
        *param_4 = *(undefined_32 *)(&DAT_0052d5ac + DAT_0052d568 * 0x60);
        iVar1 = DAT_0052d568;
    }
    else if (param_1 == 2)
    {
        *param_3 = *(undefined_32 *)(&DAT_0052d5a8 + DAT_0052d560 * 0x60);
        *param_4 = *(undefined_32 *)(&DAT_0052d5ac + DAT_0052d560 * 0x60);
        iVar1 = DAT_0052d560;
    }
    else
    {
        *param_3 = 0;
        iVar1 = DAT_0052d564;
    }
    puVar3 = &DAT_0052d570 + iVar1 * 0x18;
    QMEMCPY(iVar2, puVar3, param_2, 0xe)
    return;
}

undefined_32 FUN_0048a2d0(int param_1)

{
    if (*(int *)(param_1 + 0x2c) == 0)
    {
        return 0;
    }
    if (*(int *)(param_1 + 0x2c) != 1)
    {
        return 2;
    }
    return 1;
}

undefined_32 FUN_0048a2f0(void)

{
    return DAT_0052e61c;
}

void FUN_0048a300(void)

{
    DAT_004c98b4 = DAT_004c98b4 + 1;
    (**(code **)(*IDirect3DDevice9_0052e644 + 0x24))(IDirect3DDevice9_0052e644);
    DAT_0052e628 = 0;
    return;
}

void FUN_0048a330(void)

{
    (**(code **)(*IDirect3DDevice9_0052e644 + 0x28))(IDirect3DDevice9_0052e644);
    DAT_0052e628 = 0;
    return;
}

void FUN_0048a350(int param_1, undefined_32 param_2, undefined_32 param_3, uint param_4, undefined_32 param_5,
                  undefined_32 param_6)

{
    int iVar1;

    if (param_4 <= DAT_0052e624)
    {
        FUN_0048a450(param_2); // prepare renderstates
        if (param_1 != DAT_0052e628)
        {
            // SetTexture
            iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x98))(IDirect3DDevice9_0052e644, 0, param_1);
            if (iVar1 == 0)
            {
                DAT_0052e628 = param_1;
            }
        }
        // DrawIndexedPrimitive
        (**(code **)(*IDirect3DDevice9_0052e644 + 0x74))(IDirect3DDevice9_0052e644, 4, 0x1c4, param_3, param_4, param_5,
                                                         param_6, 0x18);
    }
    return;
}

void FUN_0048a3c0(void)

{
    int iVar1;

    FUN_0048a450(DAT_0052e610 & 0xffff79ff);
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x98))(IDirect3DDevice9_0052e644, 0, 0);
    if (iVar1 == 0)
    {
        DAT_0052e628 = iVar1;
    }
    return;
}

void FUN_0048a3f0(undefined_32 param_1, uint param_2)

{
    if (param_2 <= DAT_0052e624)
    {
        (**(code **)(*IDirect3DDevice9_0052e644 + 0x70))(IDirect3DDevice9_0052e644, 3, 0x1c4, param_1, param_2, 4);
    }
    return;
}

void FUN_0048a420(undefined_32 param_1, uint param_2)

{
    if (param_2 <= DAT_0052e624)
    {
        (**(code **)(*IDirect3DDevice9_0052e644 + 0x70))(IDirect3DDevice9_0052e644, 1, 0x1c4, param_1, param_2, 4);
    }
    return;
}

void FUN_0048a450(uint param_1)

{
    int iVar1;

    if (DAT_0052e610 != param_1)
    {
        if (((param_1 ^ DAT_0052e610) & 0x600) != 0)
        {
            if ((param_1 & 0x400) == 0)
            {
                if ((param_1 & 0x200) == 0)
                {
                    // SetRenderState
                    (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1b, 0);
                }
                else
                {
                    // SetRenderState
                    (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1b, 1);
                    // SetRenderState
                    (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x15, 2);
                }
            }
            else
            {
                // SetRenderState
                (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1b, 1);
                // SetRenderState
                (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x15, 4);
            }
        }
        if (((param_1 ^ DAT_0052e610) & 0x2000) != 0)
        {
            if ((param_1 & 0x2000) == 0)
            {
                (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0xe, 1);
            }
            else
            {
                (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0xe, 0);
            }
        }
        if (((param_1 ^ DAT_0052e610) & 0x800) != 0)
        {
            if ((param_1 & 0x800) == 0)
            {
                (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0xd, 1);
            }
            else
            {
                (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0xd, 3);
            }
        }
        if (((param_1 ^ DAT_0052e610) & 0x1000) != 0)
        {
            if ((param_1 & 0x1000) == 0)
            {
                // SetTextureStageState
                (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0xe, 1);
            }
            else
            {
                // SetTextureStageState
                (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0xe, 3);
            }
        }
        if (((param_1 ^ DAT_0052e610) & 0x8000) != 0)
        {
            if (((param_1 & 0x8000) == 0) || (DAT_004c98b0 == 0))
            {
                (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1c, 0);
            }
            else
            {
                (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1c, 1);
            }
        }
        if (((param_1 ^ DAT_0052e610) & 0x80) != 0)
        {
            DAT_0052e610 = param_1;
            iVar1 = FUN_0048b1b0(DAT_0052e614);
            if (iVar1 != 0)
            {
                return;
            }
        }
        DAT_0052e610 = param_1;
    }
    return;
}

// texture.c
//----- (0048A5E0) --------------------------------------------------------
// Loading texture / Create DirectDraw surfaces and fill with data
// a1 = ?
// a2 = texture object
// a3 = number of mipmaps
// a4 = number of bytes per pixel?
void FUN_0048a5e0(undefined_32 *param_1, int *param_2, uint param_3, int param_4)

{
    uint uVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    uint uVar5;
    int unaff_EBX;
    int *unaff_EBP;
    uint uVar6;
    int *unaff_ESI;
    undefined_32 *puVar7;
    int *piVar8;
    int *unaff_EDI;
    uint *puVar9;
    undefined_32 *puVar10;
    int *piVar11;
    int local_1c4;
    undefined_8 *local_1c0;
    int iStack_1bc;
    int local_1b8;
    int local_1b4;
    int *piStack_1b0;
    int iStack_1ac;
    int iStack_1a8;
    uint local_19c;
    int local_198;
    undefined_32 local_194[4];
    int aiStack_184[4];
    undefined_32 local_174[6];
    uint local_15c;
    undefined_32 local_12c[8];
    undefined_8 *local_10c;
    uint auStack_108[4];
    int iStack_f8;
    int iStack_e4;
    int aiStack_8c[4];
    undefined_32 local_7c[28];
    int *piStack_c;
    uint uStack_4;

    MEMSET(iVar2, param_1, 0, 0x25)
    local_1c4 = 0;
    local_1c0 = NULL;
    if (DAT_0052e61c == 0)
    {
        return;
    }
    iVar2 = *param_2;
    local_198 = iVar2;
    FUN_0048a9e0(*(undefined_32 *)(iVar2 + 0xc), *(undefined_32 *)(iVar2 + 0x10), &local_1b4, &local_1b8);
    local_19c = (uint)(*(int *)(iVar2 + 0x24) * local_1b8 * local_1b4) >> 3;
    if (DAT_0052e614 == 0)
    {
        param_3 = 1;
    }
    iVar4 = DAT_0052d568;
    if ((param_4 != 1) && (iVar4 = DAT_0052d560, param_4 != 2))
    {
        iVar4 = DAT_0052d564;
    }
    puVar7 = (undefined_32 *)(&DAT_0052d5b0 + iVar4 * 0x60);
    puVar10 = local_194;
    QMEMCPY(iVar3, puVar7, puVar10, 8)
    puVar7 = local_174;
    MEMSET(iVar4, puVar7, 0, 0x1f)
    local_174[0] = 0x7c;
    local_174[1] = 0x1007;
    local_10c = (undefined_8 *)0x1800;
    local_174[3] = *(undefined_32 *)(iVar2 + 0xc);
    uVar6 = 0;
    local_174[2] = *(undefined_32 *)(iVar2 + 0x10);
    local_1c4 = 0;
    puVar7 = local_194;
    puVar10 = local_12c;
    QMEMCPY(iVar2, puVar7, puVar10, 8)
    if (1 < param_3)
    {
        local_174[1] = 0x21007;
        local_10c = &LAB_00401808;
        local_15c = param_3;
    }
    puVar7 = local_174;
    puVar10 = local_7c;
    QMEMCPY(iVar2, puVar7, puVar10, 0x17)

    iVar2 = (**(code **)(*DAT_0052e638 + 0x18))(DAT_0052e638, local_174, &local_1c4, 0);
    if ((iVar2 == 0) && (iVar2 = (**(code **)*unaff_EDI)(unaff_EDI, &DAT_004af328, &stack0xfffffe34), iVar2 == 0))
    {
        uVar5 = uStack_4;
        if (uStack_4 != 0)
        {
            do
            {
                puVar9 = auStack_108;
                MEMSET(iVar2, puVar9, 0, 0x1f)
                auStack_108[0] = 0x7c;
                iVar2 = (**(code **)(*unaff_EDI + 100))(unaff_EDI, 0, auStack_108, 1, 0);
                if (iVar2 != 0)
                    goto LAB_0048a9bb;
                iVar2 = *(int *)(*param_2 + 0x20);
                if (((iVar2 != 0) && (0 < iVar2)) && (iVar2 < 3))
                {
                    FUN_00488370(*param_2);
                    uVar1 = 0;
                    if (auStack_108[2] != 0)
                    {
                        do
                        {
                            puVar7 = (undefined_32 *)(*(int *)(*param_2 + 0x18) * uVar1 + *(int *)(*param_2 + 0x58));
                            puVar10 = (undefined_32 *)(iStack_f8 * uVar1 + iStack_e4);
                            QMEMCPY(uVar5, puVar7, puVar10, auStack_108[3] * 2 >> 2)
                            uVar1 = uVar1 + 1;
                            for (uVar5 = auStack_108[3] * 2 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                            {
                                *(undefined_8 *)puVar10 = *(undefined_8 *)puVar7;
                                puVar7 = (undefined_32 *)((int)puVar7 + 1);
                                puVar10 = (undefined_32 *)((int)puVar10 + 1);
                            }
                            uVar5 = uStack_4;
                        } while (uVar1 < auStack_108[2]);
                    }
                    FUN_004883c0(*param_2);
                }
                iVar2 = (**(code **)(*unaff_EDI + 0x80))(unaff_EDI, 0);
                if (iVar2 != 0)
                    goto LAB_0048a9bb;
                if (uVar6 < uVar5 - 1)
                {
                    local_1c0 = &LAB_00401000;
                    iStack_1bc = iVar2;
                    local_1b8 = iVar2;
                    local_1b4 = iVar2;
                    iVar2 = (**(code **)(*unaff_EDI + 0x30))(unaff_EDI, &local_1c0, &stack0xfffffe2c);
                    if (iVar2 != 0)
                        goto LAB_0048a9bb;
                }
                uVar6 = uVar6 + 1;
                param_2 = param_2 + 1;
            } while (uVar6 < uVar5);
        }
        if ((local_1c4 != *(int *)(iStack_1a8 + 0xc)) || (unaff_EBX != *(int *)(iStack_1a8 + 0x10)))
        {
            aiStack_8c[3] = local_1c4;
            iVar2 = (**(code **)(*DAT_0052e638 + 0x18))(DAT_0052e638, aiStack_8c, &stack0xfffffe30, 0);
            if ((iVar2 != 0) || (iVar2 = (**(code **)*unaff_ESI)(unaff_ESI, &DAT_004af328, &piStack_1b0), iVar2 != 0))
                goto LAB_0048a9bb;
            uVar6 = 0;
            if (uStack_4 != 0)
            {
                do
                {
                    iVar2 = (**(code **)(*unaff_ESI + 0x14))(unaff_ESI, 0, unaff_EDI, 0, 0x1000000, 0);
                    if (iVar2 != 0)
                        goto LAB_0048a9bb;
                    if (uVar6 < uStack_4 - 1)
                    {
                        local_1c0 = &LAB_00401000;
                        iStack_1bc = 0;
                        local_1b8 = 0;
                        local_1b4 = 0;
                        iVar2 = (**(code **)(*unaff_ESI + 0x30))(unaff_ESI, &local_1c0, &stack0xfffffe30);
                        if (iVar2 != 0)
                            goto LAB_0048a9bb;
                    }
                    uVar6 = uVar6 + 1;
                } while (uVar6 < uStack_4);
            }
            if (unaff_ESI != NULL)
            {
                (**(code **)(*unaff_ESI + 8))(unaff_ESI);
            }
            (**(code **)(*unaff_EBP + 8))(unaff_EBP);
            piVar8 = aiStack_8c;
            piVar11 = aiStack_184;
            for (iVar2 = 0x1f; unaff_EBP = piStack_1b0, iVar2 != 0; iVar2 = iVar2 + -1)
            {
                *piVar11 = *piVar8;
                piVar8 = piVar8 + 1;
                piVar11 = piVar11 + 1;
            }
        }
        if (unaff_EDI != NULL)
        {
            (**(code **)(*unaff_EDI + 8))(unaff_EDI);
        }
        piStack_c[0x1f] = (int)unaff_EBP;
        piVar8 = aiStack_184;
        piVar11 = piStack_c;
        QMEMCPY(iVar2, piVar8, piVar11, 0x1f)
        piStack_c[0x21] = iStack_1ac;
    }
    else
    {
    LAB_0048a9bb:
        if (unaff_EDI != NULL)
        {
            // v15->Release();
            (**(code **)(*unaff_EDI + 8))(unaff_EDI);
            return;
        }
    }
    return;
}

//----- (0048A9E0) --------------------------------------------------------
// Getting texture dimensions for texture-upload.
// The size is restricted by the GPU capabilities.
// a1 = in_width
// a2 = in_height
// a3 = &out_width
// a4 = &out_height
void FUN_0048a9e0(uint param_1, uint param_2, uint *param_3, uint *param_4)

{
    uint uVar1;
    uint uVar2;

    uVar2 = *(uint *)(DAT_0052e618 + 0x20);
    if ((uVar2 <= param_1) && (uVar2 = *(uint *)(DAT_0052e618 + 0x28), param_1 <= uVar2))
    {
        uVar2 = param_1;
    }
    uVar1 = *(uint *)(DAT_0052e618 + 0x24);
    if ((*(uint *)(DAT_0052e618 + 0x24) <= param_2)
        && (uVar1 = *(uint *)(DAT_0052e618 + 0x2c), param_2 <= *(uint *)(DAT_0052e618 + 0x2c)))
    {
        uVar1 = param_2;
    }
    if ((*(int *)(DAT_0052e618 + 0x1c) != 0) && (uVar2 != uVar1))
    {
        if (uVar1 < uVar2)
        {
            uVar1 = uVar2;
        }
        *param_3 = uVar1;
        *param_4 = uVar1;
        return;
    }
    *param_3 = uVar2;
    *param_4 = uVar1;
    return;
}

// DirectDraw surface param_1 ?
void FUN_0048aa40(undefined_32 *param_1)

{
    int *piVar1;
    int iVar2;

    piVar1 = (int *)param_1[0x1f];
    if (piVar1 != NULL)
    {
        (**(code **)(*piVar1 + 8))(piVar1);
    }
    if (param_1[0x20] != 0)
    {
        FUN_0048ba90(param_1);
        (**(code **)(*(int *)param_1[0x20] + 8))((int *)param_1[0x20]);
    }
    MEMSET(iVar2, param_1, 0, 0x25)
    return;
}

void FUN_0048aa80(undefined_32 *param_1, int param_2)

{
    uint uVar1;
    int iVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    int *local_8c;
    int *local_88;
    undefined_32 uStack_84;
    undefined_32 uStack_80;
    undefined_32 local_7c[26];
    uint local_14;

    local_8c = NULL;
    local_88 = NULL;
    if (param_1[0x1f] != 0)
    {
        uVar1 = param_1[0x21];
        if (*(uint *)(DAT_0052e618 + 0x138) <= uVar1 && uVar1 != *(uint *)(DAT_0052e618 + 0x138))
        {
            FUN_0048bb50(uVar1);
        }
        puVar3 = param_1;
        puVar4 = local_7c;
        QMEMCPY(iVar2, puVar3, puVar4, 0x1f)
        local_14 = local_14 & 0xfffff7ff | 0x4004000;
        iVar2 = (**(code **)(*DAT_0052e638 + 0x18))(DAT_0052e638, local_7c, &local_8c, 0);
        while (iVar2 == -0x7789fe84)
        {
            iVar2 = FUN_0048bb50(param_1[0x21]);
            if (iVar2 == 0)
            {
                local_8c = NULL;
                goto LAB_0048abd7;
            }
            iVar2 = (**(code **)(*DAT_0052e638 + 0x18))(DAT_0052e638, local_7c, &local_8c, 0);
        }
        if (iVar2 == 0)
        {
            if (*(int *)(&DAT_0052d5a8 + param_2 * 0x60) != 0)
            {
                uStack_84 = *(undefined_32 *)(&DAT_0052d5ac + param_2 * 0x60);
                uStack_80 = uStack_84;
                (**(code **)(*local_8c + 0x74))(local_8c, 8, &uStack_84);
            }
            iVar2 = (**(code **)*local_8c)(local_8c, &DAT_004af328, &local_88);
            if (iVar2 == 0)
            {
                iVar2 = (**(code **)(*local_88 + 0x14))(local_88, param_1[0x1f]);
                while (iVar2 == -0x7789fe84)
                {
                    iVar2 = FUN_0048bb50(param_1[0x21]);
                    if (iVar2 == 0)
                        goto LAB_0048abd7;
                    iVar2 = (**(code **)(*local_88 + 0x14))(local_88, param_1[0x1f]);
                }
                if (iVar2 == 0)
                {
                    param_1[0x20] = local_88;
                    (**(code **)(*local_8c + 8))(local_8c);
                    param_1[0x22] = DAT_004c98b4;
                    FUN_0048ba20(param_1);
                    return;
                }
            }
            else
            {
                local_88 = NULL;
            }
        }
    }
LAB_0048abd7:
    if (local_8c != NULL)
    {
        (**(code **)(*local_8c + 8))(local_8c);
    }
    if (local_88 != NULL)
    {
        (**(code **)(*local_88 + 8))(local_88);
    }
    param_1[0x20] = 0;
    param_1[0x22] = 0;
    return;
}

void FUN_0048ac50(void)

{
    int *piVar1;
    int iVar2;
    int iVar3;

    iVar3 = DAT_0052e630;
    if (DAT_0052e630 != 0)
    {
        do
        {
            piVar1 = *(int **)(iVar3 + 0x80);
            if (piVar1 != NULL)
            {
                (**(code **)(*piVar1 + 8))(piVar1);
                *(undefined_32 *)(iVar3 + 0x80) = 0;
            }
            iVar2 = *(int *)(iVar3 + 0x90);
            *(undefined_32 *)(iVar3 + 0x88) = 0;
            *(int *)(iVar3 + 0x90) = 0;
            *(undefined_32 *)(iVar3 + 0x8c) = 0;
            iVar3 = iVar2;
        } while (iVar2 != 0);
    }
    DAT_0052e630 = 0;
    DAT_0052e634 = 0;
    DAT_0052e62c = 0;
    if (DAT_0052e618 != 0)
    {
        *(undefined_32 *)(DAT_0052e618 + 0x138) = *(undefined_32 *)(DAT_0052e618 + 0x134);
    }
    if (IDirect3DDevice9_0052e644 != NULL)
    {
        (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 1, 0);
    }
    DAT_004c98b4 = 1;
    return;
}

void FUN_0048ace0(int param_1)

{
    *(undefined_32 *)(param_1 + 0x88) = DAT_004c98b4;
    FUN_0048ba90(param_1);
    FUN_0048ba20(param_1);
    return;
}

undefined_32 FUN_0048ad10(uint param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_32 *puVar2;

    if ((DAT_0052d56c != 0) && (param_1 < DAT_0052d56c))
    {
        puVar2 = &DAT_0052d870 + param_1 * 0xda;
        QMEMCPY(iVar1, puVar2, param_2, 0xd)
        return 1;
    }
    return 0;
}

uint FUN_0048ad50(int *param_1)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    int *piVar4;
    uint local_4;

    uVar1 = 0;
    if (DAT_0052d56c == 0)
    {
        return uVar1;
    }
    uVar3 = 0;
    local_4 = 0;
    if (DAT_0052d56c != 0)
    {
        piVar4 = &DAT_0052d878;
        do
        {
            uVar2 = 0;
            if ((param_1[1] == 0) || (piVar4[-1] == param_1[1]))
            {
                uVar2 = 1;
                if (((param_1[2] == 0) || (*piVar4 == param_1[2])) && (uVar2 = 2, piVar4[-2] == *param_1))
                {
                    return uVar1;
                }
            }
            if (uVar3 < uVar2)
            {
                uVar3 = uVar2;
                local_4 = uVar1;
            }
            piVar4 = piVar4 + 0xda;
            uVar1 = uVar1 + 1;
        } while (uVar1 < DAT_0052d56c);
    }
    return local_4;
}

uint FUN_0048add0(int *param_1)

{
    int iVar1;
    uint uVar2;
    int *piVar3;
    uint uVar4;
    uint local_8;
    uint local_4;

    uVar2 = 0;
    if (DAT_0052e61c == 0)
    {
        return uVar2; // 0
    }
    local_8 = 0;
    local_4 = 0;
    if (DAT_0052e61c != 0)
    {
        piVar3 = &DAT_0052d578;
        iVar1 = *param_1;
        do
        {
            uVar4 = 0;
            if ((piVar3[-2] == iVar1) && (uVar4 = 1, piVar3[-1] == param_1[1]))
            {
                uVar4 = 2;
                if (iVar1 == 1)
                {
                    if (((*piVar3 == param_1[2]) && (piVar3[1] == param_1[3])) && (piVar3[2] == param_1[4]))
                    {
                        return uVar2;
                    }
                }
                else
                {
                    if (iVar1 != 2)
                    {
                        return uVar2;
                    }
                    if (piVar3[-2] == 2)
                    {
                        uVar4 = 3;
                    }
                    if (((*piVar3 == param_1[2]) && (piVar3[1] == param_1[3]))
                        && ((piVar3[2] == param_1[4] && (piVar3[9] == param_1[0xb]))))
                    {
                        return uVar2;
                    }
                }
            }
            if (local_8 < uVar4)
            {
                local_8 = uVar4;
                local_4 = uVar2;
            }
            piVar3 = piVar3 + 0x18;
            uVar2 = uVar2 + 1;
        } while (uVar2 < DAT_0052e61c);
    }
    return local_4;
}

bool FUN_0048aeb0(void)

{
    int iVar1;

    DAT_0052e610 = 0;
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 7, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0xe, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x17, 4);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 4, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    DAT_0052e610 = DAT_0052e610 | 1;
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x10, 2);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x11, 2);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x12, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    DAT_0052e610 = DAT_0052e610 | 0x80;
    DAT_0052e614 = 0;
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1f, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    DAT_0052e610 = DAT_0052e610 | 0x10;
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0xd, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0xe, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1b, 0);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x15, 2);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x13, 5);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x14, 6);
    if (iVar1 != 0)
    {
        return false;
    }
    DAT_0052e610 = DAT_0052e610 | 0x200;
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0xf, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x19, 6);
    if (iVar1 != 0)
    {
        return false;
    }
    if ((*(int *)(&DAT_0052d5a8 + DAT_0052d568 * 0x60) != 0) || (*(int *)(&DAT_0052d5a8 + DAT_0052d560 * 0x60) != 0))
    {
        iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x29, 1);
        if (iVar1 != 0)
        {
            return false;
        }
    }
    if (*(int *)(DAT_0052e618 + 0x14) == 0)
    {
        iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x21, 0);
        if (iVar1 != 0)
        {
            return false;
        }
    }
    else
    {
        iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x21, 1);
        if (iVar1 != 0)
        {
            return false;
        }
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 9, 2);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0xb, 0);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1d, 0);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1c, 0);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 8, 3);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x1a, 1);
    if (iVar1 != 0)
    {
        return false;
    }
    DAT_0052e610 = DAT_0052e610 | 2;
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 2, 0);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x16, 1);
    return iVar1 == 0;
}

void FUN_0048b1b0(void)

{
    int iVar1;
    int iVar2;

    if (((byte)DAT_0052e610 & 0x80) == 0)
    {
        iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x10, 1);
        if (iVar1 != 0)
        {
            return;
        }
        iVar1 = 0;
        iVar2 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x11, 1);
        if (iVar2 != 0)
        {
            return;
        }
    }
    else
    {
        iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x10, 2);
        if (iVar1 != 0)
        {
            return;
        }
        iVar1 = 0;
        iVar2 = (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x11, 2);
        if (iVar2 != 0)
        {
            return;
        }
    }
    DAT_0052e614 = iVar1;
    if (DAT_0052e614 == 1)
    {
        (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x12, 2);
        return;
    }
    if (DAT_0052e614 == 2)
    {
        (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x12, 3);
        return;
    }
    (**(code **)(*IDirect3DDevice9_0052e644 + 0xa0))(IDirect3DDevice9_0052e644, 0, 0x12, 1);
    return;
}

// Renderer.c
// a1 = fovY
// a2 = aspectRatio
// a3 = znear
// a4 = zfar
undefined_32 FUN_0048b260(float param_1, float param_2, float param_3, float param_4)

{
    undefined_32 uVar1;
    int iVar2;
    float *pfVar3;
    float10 fVar4;
    float10 fVar5;
    float local_40[5];
    float local_2c;
    float local_18;
    undefined_32 local_14;
    float local_8;

    // zrange
    if (ABS(param_4 - param_3) < 0.01)
    {
        return 0x80070057;
    }

    // First part of cotangent
    fVar4 = (float10)fsin((float10)param_1 * (float10)0.5);
    if (ABS(fVar4) < (float10)0.009999999776482582)
    {
        return 0x80070057;
    }

    // Get cot(fovY/2)
    fVar5 = (float10)fcos((float10)param_1 * (float10)0.5);

    // Prepare the matrix
    pfVar3 = local_40;
    MEMSET(iVar2, pfVar3, 0.0, 0x10)
    local_18 = param_4 / (param_4 - param_3);
    local_40[0] = param_2 * (float)(fVar5 / fVar4);
    local_2c = (float)(fVar5 / fVar4);
    local_8 = -(local_18 * param_3);
    local_14 = 1.0f;

    // Set D3D projection matrix
    // dword_52E644->SetTransform(D3DTS_PROJECTION, m);
    uVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 100))(IDirect3DDevice9_0052e644, 3, local_40);
    return uVar1;
}

void FUN_0048b340(undefined_32 param_1)

{
    int *piVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    undefined_32 unaff_EBX;

    piVar1 = IDirect3DDevice9_0052e644;
    iVar5 = *IDirect3DDevice9_0052e644;
    uVar2 = __ftol();
    uVar3 = __ftol();
    uVar4 = __ftol();
    iVar5 = (**(code **)(iVar5 + 0x58))(piVar1, 0x22, (uVar2 | (uVar3 | 0xffffff00) << 8) << 8 | uVar4);
    if (iVar5 == 0)
    {
        iVar5 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x24, param_1);
        if (iVar5 == 0)
        {
            (**(code **)(*IDirect3DDevice9_0052e644 + 0x58))(IDirect3DDevice9_0052e644, 0x25, unaff_EBX);
        }
    }
    return;
}

bool FUN_0048b3c0(void)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 uStack_40;
    undefined_32 uStack_34;

    uStack_40 = 0;
    iVar1 = (**(code **)(*DAT_0052e640 + 0x18))(DAT_0052e640, &DAT_0052e648);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x14))(IDirect3DDevice9_0052e644, DAT_0052e648);
    if (iVar1 != 0)
    {
        return false;
    }
    puVar2 = &uStack_40;
    MEMSET(iVar1, puVar2, 0, 0xb)
    uStack_34 = DAT_00ec8dac;
    uStack_40 = 0x2c;
    iVar1 = (**(code **)(*DAT_0052e648 + 0x44))(DAT_0052e648, &uStack_40);
    if (iVar1 != 0)
    {
        return false;
    }
    iVar1 = (**(code **)(*IDirect3DDevice9_0052e644 + 0x30))(IDirect3DDevice9_0052e644, DAT_0052e648);
    return iVar1 == 0;
}

void FUN_0048b4b0(undefined_32 *param_1)

{
    int iVar1;
    undefined_32 *puVar2;

    if (((param_1 != NULL) && (DAT_0052e640 != NULL)) && (DAT_0052e618 != 0))
    {
        puVar2 = param_1;
        MEMSET(iVar1, puVar2, 0, 8)
        param_1[3] = -1;
        (**(code **)(*DAT_0052e640 + 0x28))(DAT_0052e640, DAT_0052e618 + 0x238, FUN_0048b500, param_1);
    }
    return;
}

undefined_32 FUN_0048b500(undefined_32 *param_1, undefined_32 *param_2)

{
    uint uVar1;
    int iVar2;

    if ((param_1 != NULL) && (param_2 != NULL))
    {
        if (((param_1[1] == 0x400) && (uVar1 = param_1[3], 0xf < uVar1))
            && (uVar1 <= (uint)param_2[3] && param_2[3] != uVar1))
        {
            QMEMCPY(iVar2, param_1, param_2, 8)
        }
        return 1;
    }
    return 0;
}

void FUN_0048ba20(int param_1)

{
    if (DAT_0052e630 == 0)
    {
        DAT_0052e634 = param_1;
        DAT_0052e630 = param_1;
        *(undefined_32 *)(param_1 + 0x8c) = 0;
        *(undefined_32 *)(param_1 + 0x90) = 0;
    }
    else
    {
        *(int *)(DAT_0052e634 + 0x90) = param_1;
        *(int *)(param_1 + 0x8c) = DAT_0052e634;
        *(undefined_32 *)(param_1 + 0x90) = 0;
        DAT_0052e634 = param_1;
    }
    DAT_0052e62c = DAT_0052e62c + 1;
    *(int *)(DAT_0052e618 + 0x138) = *(int *)(DAT_0052e618 + 0x138) - *(int *)(param_1 + 0x84);
    return;
}

// DirectDraw surface param_1 ?
void FUN_0048ba90(int param_1)

{
    int iVar1;

    if (param_1 == DAT_0052e630)
    {
        DAT_0052e630 = *(int *)(param_1 + 0x90);
        if (DAT_0052e630 == 0)
        {
            DAT_0052e634 = 0;
        }
        else
        {
            *(undefined_32 *)(DAT_0052e630 + 0x8c) = 0;
            if (*(int *)(DAT_0052e630 + 0x90) == 0)
            {
                DAT_0052e634 = DAT_0052e630;
            }
        }
    }
    else
    {
        iVar1 = *(int *)(param_1 + 0x8c);
        if (param_1 == DAT_0052e634)
        {
            DAT_0052e634 = iVar1;
            *(undefined_32 *)(iVar1 + 0x90) = 0;
        }
        else
        {
            *(undefined_32 *)(iVar1 + 0x90) = *(undefined_32 *)(param_1 + 0x90);
            *(undefined_32 *)(*(int *)(param_1 + 0x90) + 0x8c) = *(undefined_32 *)(param_1 + 0x8c);
        }
    }
    DAT_0052e62c = DAT_0052e62c + -1;
    *(int *)(DAT_0052e618 + 0x138) = *(int *)(DAT_0052e618 + 0x138) + *(int *)(param_1 + 0x84);
    *(undefined_32 *)(param_1 + 0x90) = 0;
    *(undefined_32 *)(param_1 + 0x8c) = 0;
    *(undefined_32 *)(param_1 + 0x88) = 0;
    return;
}

bool FUN_0048bb50(uint param_1)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    uint uVar4;
    int iVar5;

    uVar4 = 0;
    iVar3 = DAT_0052e630;
    if (DAT_0052e630 != 0)
    {
        do
        {
            if (*(int *)(iVar3 + 0x88) == DAT_004c98b4)
                break;
            piVar1 = (int *)(iVar3 + 0x90);
            if (*(uint *)(iVar3 + 0x84) == param_1)
            {
                (**(code **)(**(int **)(iVar3 + 0x80) + 8))(*(int **)(iVar3 + 0x80));
                *(undefined_32 *)(iVar3 + 0x80) = 0;
                FUN_0048ba90(iVar3);
                return true;
            }
            iVar3 = *piVar1;
        } while (*piVar1 != 0);
    }
    iVar3 = DAT_004c98b4;
    iVar5 = DAT_0052e630;
    if (DAT_0052e630 != 0)
    {
        do
        {
            if (param_1 <= uVar4)
                break;
            iVar2 = *(int *)(iVar5 + 0x90);
            if (*(int *)(iVar5 + 0x88) != iVar3)
            {
                (**(code **)(**(int **)(iVar5 + 0x80) + 8))(*(int **)(iVar5 + 0x80));
                *(undefined_32 *)(iVar5 + 0x80) = 0;
                uVar4 = uVar4 + *(int *)(iVar5 + 0x84);
                FUN_0048ba90(iVar5);
                iVar3 = DAT_004c98b4;
            }
            iVar5 = iVar2;
        } while (iVar2 != 0);
    }
    return uVar4 != 0;
}

uint FUN_0048bc10(void)

{
    uint *puVar1;
    int iVar2;
    uint uVar3;
    undefined_32 *puVar4;
    int iVar5;
    undefined_32 uVar6;
    undefined_32 *puVar7;
    uint uVar8;
    undefined_32 *puVar9;

    puVar1 = (uint *)(**(code **)(DAT_00ecc420 + 0x20))(8);
    *puVar1 = 0;
    puVar1[1] = 0;
    iVar2 = FUN_00487d20();
    uVar8 = 0;
    if (iVar2 == 0)
    {
        FUN_0048be20(puVar1);
        return 0;
    }
    uVar3 = FUN_00488070();
    *puVar1 = uVar3;
    puVar1[1] = 0;
    if (uVar3 != 0)
    {
        puVar4 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(uVar3 * 0x2b4);
        puVar1[1] = (uint)puVar4;
        if (*puVar1 != 0)
        {
            do
            {
                puVar7 = puVar4;
                MEMSET(iVar2, puVar7, 0, 0xad)
                iVar2 = FUN_00488080(uVar8, puVar4);
                if ((iVar2 != 0) || (iVar2 = FUN_00487e00(uVar8), iVar2 == 0))
                {
                    FUN_0048be20(puVar1);
                    return 0;
                }
                iVar2 = FUN_00489d40();
                puVar4[0xa9] = iVar2;
                puVar4[0xaa] = 0;
                if (iVar2 != 0)
                {
                    iVar2 = (**(code **)(DAT_00ecc420 + 0x20))(iVar2 * 0x50);
                    puVar4[0xaa] = iVar2;
                    uVar3 = 0;
                    if (puVar4[0xa9] != 0)
                    {
                        do
                        {
                            iVar5 = FUN_00489d50(uVar3, iVar2);
                            if (iVar5 == 0)
                            {
                                iVar2 = iVar2 + 0x50;
                            }
                            uVar3 = uVar3 + 1;
                        } while (uVar3 < (uint)puVar4[0xa9]);
                    }
                    if (puVar4[0x41] == 0)
                    {
                        puVar4[0xab] = 0;
                        puVar4[0xac] = 0;
                    }
                    else
                    {
                        iVar2 = FUN_00489dc0();
                        if (iVar2 == 0)
                        {
                            FUN_0048be20(puVar1);
                            return 0;
                        }
                        iVar2 = FUN_00489ea0();
                        puVar4[0xab] = iVar2;
                        puVar4[0xac] = 0;
                        if (iVar2 != 0)
                        {
                            uVar6 = (**(code **)(DAT_00ecc420 + 0x20))(iVar2 * 0x368);
                            puVar4[0xac] = uVar6;
                            iVar2 = puVar4[0xab];
                            puVar7 = (undefined_32 *)FUN_00489eb0();
                            puVar9 = (undefined_32 *)puVar4[0xac];
                            QMEMCPY(uVar3, puVar7, puVar9, (uint)(iVar2 * 0x368) >> 2)
                            for (iVar2 = 0; iVar2 != 0; iVar2 = iVar2 + -1)
                            {
                                *(undefined_8 *)puVar9 = *(undefined_8 *)puVar7;
                                puVar7 = (undefined_32 *)((int)puVar7 + 1);
                                puVar9 = (undefined_32 *)((int)puVar9 + 1);
                            }
                        }
                        FUN_00489e40();
                    }
                }
                FUN_00487e80();
                puVar4 = puVar4 + 0xad;
                uVar8 = uVar8 + 1;
            } while (uVar8 < *puVar1);
        }
    }
    FUN_00487da0();
    return -(uint)(*puVar1 != 0) & (uint)puVar1;
}

void FUN_0048be20(uint *param_1)

{
    int *piVar1;
    uint uVar2;

    if (param_1[1] != 0)
    {
        uVar2 = 0;
        if (*param_1 != 0)
        {
            piVar1 = (int *)(param_1[1] + 0x2a8);
            do
            {
                if (piVar1[2] != 0)
                {
                    (**(code **)(DAT_00ecc420 + 0x24))(piVar1[2]);
                    piVar1[2] = 0;
                }
                if (*piVar1 != 0)
                {
                    (**(code **)(DAT_00ecc420 + 0x24))(*piVar1);
                    *piVar1 = 0;
                }
                piVar1 = piVar1 + 0xad;
                uVar2 = uVar2 + 1;
            } while (uVar2 < *param_1);
        }
        if (param_1[1] != 0)
        {
            (**(code **)(DAT_00ecc420 + 0x24))(param_1[1]);
            param_1[1] = 0;
        }
    }
    (**(code **)(DAT_00ecc420 + 0x24))(param_1);
    return;
}

int *FUN_0048bee0(undefined_32 param_1)

{
    int *piVar1;
    int iVar2;
    undefined_32 *puVar3;
    uint uVar4;

    piVar1 = (int *)(**(code **)(DAT_00ecc420 + 0x20))(0xc);
    if (piVar1 == NULL)
    {
        return NULL;
    }
    *piVar1 = 0;
    piVar1[1] = 0;
    piVar1[2] = 0;
    iVar2 = FUN_0048bf50(param_1);
    *piVar1 = iVar2;
    puVar3 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(iVar2 << 4);
    piVar1[1] = (int)puVar3;
    if (puVar3 == NULL)
    {
        return NULL;
    }
    MEMSET(uVar4, puVar3, 0, (uint)(*piVar1 << 4) >> 2)
    for (iVar2 = 0; iVar2 != 0; iVar2 = iVar2 + -1)
    {
        *(undefined_8 *)puVar3 = 0;
        puVar3 = (undefined_32 *)((int)puVar3 + 1);
    }
    piVar1[2] = (int)&LAB_0048bea0;
    return piVar1;
}

// findPrime with lookup table at DAT_004aeeb0 for the primes < 2000 ?
// lookup table is only 80 bytes and there is 303 primes < 200 :thinking:
int FUN_0048bf50(int param_1)

{
    int *piVar1;
    int iVar2;
    int iVar3;

    iVar3 = 0;
    piVar1 = &DAT_004aeeb0;
    do
    {
        if (param_1 < *piVar1)
        {
            iVar2 = (&DAT_004aeeb0)[iVar3];
            break;
        }
        piVar1 = piVar1 + 1;
        iVar3 = iVar3 + 1;
        iVar2 = param_1;
    } while ((int)piVar1 < 0x4aef30); // 80 bytes from 004aeeb0
    if (1999 < param_1)
    {
        iVar2 = FUN_0048bf90(param_1);
    }
    return iVar2;
}

// This is a really bad findNextPrime(int) ?
int FUN_0048bf90(int param_1)

{
    int iVar1;

    iVar1 = FUN_0048bfc0(param_1);
    while (iVar1 == 0)
    {
        param_1 = param_1 + 1;
        iVar1 = FUN_0048bfc0(param_1);
    }
    return param_1;
}

// Is that a really bad IsPrime(int) ?
undefined_32 FUN_0048bfc0(int param_1)

{
    int iVar1;

    iVar1 = 2;
    if (param_1 + -1 < 3)
    {
        return 1;
    }
    do
    {
        if (param_1 % iVar1 == 0)
        {
            return 0;
        }
        iVar1 = iVar1 + 1;
    } while (iVar1 < param_1 + -1);
    return 1;
}

void FUN_0048c000(int param_1)

{
    int iVar1;

    for (iVar1 = *(int *)(param_1 + 4); iVar1 != 0; iVar1 = *(int *)(iVar1 + 4))
    {}
    return;
}

void FUN_0048c020(int param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = *(int *)(param_1 + 4);
    while (iVar2 != 0)
    {
        iVar1 = *(int *)(iVar2 + 4);
        (**(code **)(DAT_00ecc420 + 0x24))(iVar2);
        iVar2 = iVar1;
    }
    return;
}

void FUN_0048c050(int *param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = 0;
    if (0 < *param_1)
    {
        iVar1 = 0;
        do
        {
            FUN_0048c020(param_1[1] + iVar1);
            iVar2 = iVar2 + 1;
            iVar1 = iVar1 + 0x10;
        } while (iVar2 < *param_1);
    }
    (**(code **)(DAT_00ecc420 + 0x24))(param_1[1]);
    (**(code **)(DAT_00ecc420 + 0x24))(param_1);
    return;
}

undefined_32 FUN_0048c0a0(undefined_32 *param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;

    iVar1 = FUN_0048c160(param_1, param_2);
    if (iVar1 != 0)
    {
        return 0;
    }
    iVar1 = (*(code *)param_1[2])(param_2, *param_1);
    iVar1 = iVar1 * 0x10;
    iVar2 = FUN_0048c000(param_1[1] + iVar1);
    if (*(int *)(iVar2 + 8) == 0)
    {
        puVar3 = (undefined_32 *)(param_1[1] + iVar1);
        *puVar3 = 0;
        puVar3[1] = 0;
        puVar3[2] = 0;
        puVar3[3] = 0;
        *(undefined_32 *)(param_1[1] + 8 + iVar1) = param_2;
        *(undefined_32 *)(param_1[1] + 0xc + iVar1) = param_3;
        return 1;
    }
    puVar3 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(0x10);
    if (puVar3 == NULL)
    {
        return 0;
    }
    *puVar3 = 0;
    puVar3[1] = 0;
    puVar3[2] = 0;
    puVar3[3] = 0;
    puVar3[2] = param_2;
    puVar3[3] = param_3;
    FUN_0048d790(iVar2, puVar3);
    return 1;
}

undefined_32 FUN_0048c160(undefined_32 param_1, undefined_32 param_2)

{
    int iVar1;

    iVar1 = FUN_0048c190(param_1, param_2, &param_2);
    if (iVar1 != 0)
    {
        return *(undefined_32 *)(iVar1 + 0xc);
    }
    return 0;
}

int FUN_0048c190(undefined_32 *param_1, byte *param_2, int *param_3)

{
    byte bVar1;
    int iVar2;
    byte *pbVar3;
    int iVar4;
    byte *pbVar5;
    bool bVar6;

    if (param_1 != NULL)
    {
        iVar2 = (*(code *)param_1[2])(param_2, *param_1);
        *param_3 = iVar2;
        iVar2 = param_1[1] + iVar2 * 0x10;
        if (iVar2 != 0)
        {
            while (pbVar3 = *(byte **)(iVar2 + 8), pbVar5 = param_2, pbVar3 != NULL)
            {
                do
                {
                    bVar1 = *pbVar3;
                    bVar6 = bVar1 < *pbVar5;
                    if (bVar1 != *pbVar5)
                    {
                    LAB_0048c1eb:
                        iVar4 = (1 - (uint)bVar6) - (uint)(bVar6 != 0);
                        goto LAB_0048c1f0;
                    }
                    if (bVar1 == 0)
                        break;
                    bVar1 = pbVar3[1];
                    bVar6 = bVar1 < pbVar5[1];
                    if (bVar1 != pbVar5[1])
                        goto LAB_0048c1eb;
                    pbVar3 = pbVar3 + 2;
                    pbVar5 = pbVar5 + 2;
                } while (bVar1 != 0);
                iVar4 = 0;
            LAB_0048c1f0:
                if (iVar4 == 0)
                {
                    return iVar2;
                }
                iVar2 = *(int *)(iVar2 + 4);
                if (iVar2 == 0)
                {
                    return 0;
                }
            }
        }
    }
    return 0;
}

undefined_32 FUN_0048c210(int param_1, int param_2)

{
    undefined_32 *puVar1;
    int *piVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;
    int iVar5;

    puVar3 = (undefined_32 *)FUN_0048c190(param_1, param_2, &param_2);
    if (puVar3 == NULL)
    {
        return 0;
    }
    puVar1 = (undefined_32 *)puVar3[1];
    FUN_0048d7b0(puVar3);
    puVar4 = (undefined_32 *)(*(int *)(param_1 + 4) + param_2 * 0x10);
    if (puVar4 == puVar3)
    {
        if (puVar1 == NULL)
        {
            *puVar4 = 0;
            puVar4[1] = 0;
            puVar4[2] = 0;
            puVar4[3] = 0;
            return 1;
        }
        *puVar4 = *puVar1;
        puVar4[1] = puVar1[1];
        puVar4[2] = puVar1[2];
        puVar4[3] = puVar1[3];
        iVar5 = param_2 * 0x10 + *(int *)(param_1 + 4);
        piVar2 = *(int **)(iVar5 + 4);
        if (piVar2 != NULL)
        {
            *piVar2 = iVar5;
        }
        (**(code **)(DAT_00ecc420 + 0x24))(puVar1);
        return 1;
    }
    (**(code **)(DAT_00ecc420 + 0x24))(puVar3);
    return 1;
}

char *FUN_0048c2d0(char *param_1, char *param_2, int param_3, char *param_4)

{
    char cVar1;
    size_t sVar2;
    char *pcVar3;
    uint uVar4;
    char *pcVar5;

    if (param_2 != NULL)
    {
        *param_2 = '\0';
    }
    sVar2 = _strspn(param_1, param_4);
    param_1 = param_1 + sVar2;
    pcVar3 = _strpbrk(param_1, param_4);
    if (pcVar3 == NULL)
    {
        uVar4 = -1;
        pcVar5 = param_1;
        do
        {
            if (uVar4 == 0)
                break;
            uVar4 = uVar4 - 1;
            cVar1 = *pcVar5;
            pcVar5 = pcVar5 + 1;
        } while (cVar1 != '\0');
        uVar4 = ~uVar4 - 1;
    }
    else
    {
        uVar4 = (int)pcVar3 - (int)param_1;
    }
    if (param_3 - 1U <= uVar4)
    {
        uVar4 = param_3 - 1U;
    }
    if (param_2 != NULL)
    {
        _strncpy(param_2, param_1, uVar4);
        param_2[uVar4] = '\0';
    }
    return pcVar3;
}

void FUN_0048c340(ushort *param_1, byte *param_2, int param_3)

{
    int iVar1;

    iVar1 = 0;
    if (0 < param_3)
    {
        do
        {
            if (*param_2 == 0)
                break;
            *param_1 = (ushort)*param_2;
            param_1 = param_1 + 1;
            param_2 = param_2 + 1;
            iVar1 = iVar1 + 1;
        } while (iVar1 < param_3);
    }
    if (iVar1 < param_3)
    {
        *param_1 = 0;
    }
    return;
}

void FUN_0048c380(undefined_8 *param_1, ushort *param_2, int param_3)

{
    int iVar1;

    iVar1 = 0;
    if (0 < param_3)
    {
        do
        {
            if (*param_2 == 0)
                break;
            if (*param_2 < 0x100)
            {
                *param_1 = *(undefined_8 *)param_2;
            }
            else
            {
                *param_1 = 0x3f;
            }
            param_2 = param_2 + 1;
            param_1 = param_1 + 1;
            iVar1 = iVar1 + 1;
        } while (iVar1 < param_3);
    }
    if (iVar1 < param_3)
    {
        *param_1 = 0;
    }
    return;
}

//----- (0048C3D0) --------------------------------------------------------
// PlatformAbstraction*
void stdPlatform_InitServices(HostServices *handlers)

{
    param_1[2] = stdPlatform_Printf;
    param_1[1] = stdPlatform_Printf;
    param_1[3] = stdPlatform_Printf;
    param_1[4] = stdPlatform_Printf;
    *param_1 = 0x447a0000; // 1000.0f
    param_1[5] = 0;
    param_1[6] = platform_dump_exit;
    param_1[7] = 0;
    param_1[8] = allocator_large;
    param_1[9] = allocator_free;
    param_1[10] = allocator_realloc;
    param_1[0xb] = timeGetTime;
    param_1[0xc] = platform_fopen;
    param_1[0xd] = platform_fclose;
    param_1[0xe] = platform_fread_locked;
    param_1[0xf] = platform_fgets;
    param_1[0x10] = platform_fwrite;
    param_1[0x11] = LAB_0048c6a0; // static import _feof. Really ?
    param_1[0x12] = ftell;
    param_1[0x13] = platform_fseek;
    param_1[0x14] = platform_go_to_eof;
    param_1[0x15] = platform_fprintf;
    param_1[0x16] = platform_fgetws;
    param_1[0x17] = platform_malloc;
    param_1[0x18] = platform_free;
    param_1[0x19] = platform_realloc;
    param_1[0x1a] = platform_identity;
    param_1[0x1b] = platform_noop;
    return;
}

// timeapi.h return in millisecond
DWORD timeGetTime(void)

{
    DWORD DVar1;

    // WARNING: Could not recover jumptable at 0x0048c490. Too many branches
    // WARNING: Treating indirect jump as call
    DVar1 = timeGetTime();
    return DVar1;
}

// LAB_0048c4a0
void platform_dump_exit(undefined4 param_1, char *param_2, undefined4 param_3)

{
    int iVar1;
    char cVar2;
    bool bVar3;
    int iVar4;
    int iVar5;
    CHAR aCStack_200[512];

    iVar5 = 0;
    bVar3 = false;
    if (DAT_0052ee58 != 0)
    {
        DebugBreak();
        exit_0(1);
    }
    DAT_0052ee58 = 1;
    iVar4 = 0;
    cVar2 = *param_2;
    while (cVar2 != '\0')
    {
        if (cVar2 == '\\')
        {
            bVar3 = true;
            iVar5 = iVar4;
        }
        iVar1 = iVar4 + 1;
        iVar4 = iVar4 + 1;
        cVar2 = param_2[iVar1];
    }
    if (bVar3)
    {
        iVar5 = iVar5 + 1;
    }
    // static string names are broken by formatter
    FUN_0049f850(aCStack_200, 0x200, s_ % s(% d) : _ % s_004c98d4, param_2 + iVar5, param_3, param_1);
    // stdPlatform_Printf
    (**(code **)(DAT_00ecc420 + 0x10))(s_ASSERT : _ % s_004c98c8, aCStack_200);
    MessageBoxA((HWND)0x0, aCStack_200, s_Assert_Handler_004c98b8, 0x2000);
    DebugBreak();
    exit_0(1);
    return;
}

// NOT dumped
// LAB_0048c570 == UndefinedFunction_0048c570
undefined4 stdPlatform_Printf(undefined4 param_1)

{
    __vsnprintf(&DAT_00ecbc20, 0x800, param_1, &stack0x00000008);
    OutputDebugStringA(&DAT_00ecbc20);
    return 1;
}

// LAB_0048c5a0
void platform_malloc(undefined4 param_1)

{
    _malloc(param_1);
    return;
}

// LAB_0048c5b0
void platform_free(undefined4 param_1)

{
    _free(param_1);
    return;
}

// LAB_0048c5c0
void platform_realloc(undefined4 param_1, undefined4 param_2)

{
    _realloc(param_1, param_2);
    return;
}

// LAB_0048c5e0
undefined4 platform_identity(undefined4 param_1)

{
    return param_1;
}

// 0048C5F0
void platform_fopen(undefined_32 param_1, undefined_32 param_2)

{
    _fopen(param_1, param_2);
    return;
}

// 0048c610
undefined_32 platform_fclose(undefined_32 param_1)

{
    fclose(param_1);
    return 0;
}

// LAB_0048c620
void platform_fread_locked(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    fread_locked(param_2, 1, param_3, param_1);
    return;
}

// 0048c640
void platform_fwrite(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    fwrite(param_2, 1, param_3, param_1);
    return;
}

// LAB_0048c660
void platform_fgets(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    _fgets(param_2, param_3, param_1);
    return;
}

// 0048c680
void platform_fgetws(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    _fgetws(param_2, param_3, param_1);
    return;
}

// 0048c6a0 _feof ?
uint LAB_0048c6a0(int param_1)

{
    return *(uint *)(param_1 + 0xc) & 0x10;
}

// 0048c6b0
void ftell(undefined_32 param_1)

{
    _ftell(param_1);
    return;
}

// 0048c6c0
void platform_fseek(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    fseek(param_1, param_2, param_3);
    return;
}

// 0048c6e0
undefined4 platform_go_to_eof(undefined4 param_1)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = platform_fopen(param_1, &DAT_004b5c4c /* "rb" */);
    if (iVar1 == 0)
    {
        return 0;
    }
    platform_fseek(iVar1, 0, 2);
    uVar2 = ftell(iVar1);
    platform_fclose(iVar1);
    return uVar2;
}

// 0048c730
undefined4 platform_fprintf(undefined4 param_1, undefined4 param_2)

{
    undefined4 uVar1;

    uVar1 = __vsnprintf(&DAT_0052e658, 0x800, param_2, &stack0x0000000c);
    platform_fwrite(param_1, &DAT_0052e658, uVar1);
    return 0;
}

// 0048c770
void set_hwnd(undefined_32 param_1)

{
    DAT_0052ee70 = param_1;
    return;
}

// 0048c780
undefined_32 get_hwnd(void)

{
    return DAT_0052ee70;
}

void set_instance(HINSTANCE param_1)

{
    DAT_0052ee74 = param_1;
    return;
}

// 0048c7a0
undefined_32 get_instance(void)

{
    return DAT_0052ee74;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0048c7b0(undefined_32 *param_1)

{
    _DAT_0052ee60 = param_1[0];
    _DAT_0052ee64 = param_1[1];
    _DAT_0052ee68 = param_1[2];
    _DAT_0052ee6c = param_1[3];
    return;
}

undefined_8 *FUN_0048c7e0(void)

{
    return &DAT_0052ee60;
}

// 0048c7f0
float10 stdMath_FlexPower(float param_1, int param_2) // base, exponent

{
    int local_c;
    float local_8;

    local_8 = param_1;
    for (local_c = 0; local_c < param_2 + -1; local_c = local_c + 1)
    {
        local_8 = local_8 * param_1;
    }
    return (float10)local_8;
}

// 0048c830
float10 stdMath_NormalizeAngle(float param_1)

{
    float10 fVar1;
    float local_c;

    if (0.0 <= param_1)
    {
        if (param_1 < 360.0)
            goto LAB_0048c8e1;
        fVar1 = (float10)stdMath_Floor(param_1 / 360.0);
        local_c = (float)((float10)param_1 - fVar1 * (float10)360.0);
    }
    else
    {
        param_1 = -param_1;
        if (360.0 <= param_1)
        {
            fVar1 = (float10)stdMath_Floor(param_1 / 360.0);
            local_c = (float)((float10)360.0 - ((float10)param_1 - fVar1 * (float10)360.0));
        }
        else
        {
            local_c = 360.0 - param_1;
        }
    }
    param_1 = local_c;
    if (local_c == 360.0)
    {
        local_c = 0.0;
        param_1 = local_c;
    }
LAB_0048c8e1:
    return (float10)param_1;
}

// 0048c8f0
float10 stdMath_Floor(float param_1)

{
    return (float10)ROUND(param_1);
}

// 0048c910
float10 __thiscall stdMath_NormalizeAngleAcute(undefined_32 param_1_00, undefined_32 param_1)

{
    float10 fVar1;
    float fVar2;

    fVar1 = (float10)stdMath_NormalizeAngle(param_1, param_1_00);
    fVar2 = (float)fVar1;
    if ((float10)180.0 < fVar1)
    {
        fVar2 = -(360.0 - fVar2);
    }
    return (float10)fVar2;
}

// 0048c950
void stdMath_SinCos(undefined_32 param_1, float *param_2, float *param_3)

{
    float fVar1;
    float fVar2;
    int iVar3;
    int iVar4;
    float10 fVar5;
    undefined_32 local_1c;
    float local_8;

    fVar5 = (float10)stdMath_NormalizeAngle(param_1);
    fVar1 = (float)fVar5;
    if ((float10)90.0 <= fVar5)
    {
        if (180.0 <= fVar1)
        {
            if (270.0 <= fVar1)
            {
                local_1c = 3;
            }
            else
            {
                local_1c = 2;
            }
        }
        else
        {
            local_1c = 1;
        }
    }
    else
    {
        local_1c = 0;
    }
    fVar1 = fVar1 * 45.51111;
    fVar5 = (float10)stdMath_Floor(fVar1);
    fVar2 = (float)((float10)fVar1 - fVar5);
    iVar3 = roundFloat2Int(fVar1);
    iVar4 = iVar3 + 1;
    switch (local_1c)
    {
    case 0:
        if (iVar4 < 0x1000)
        {
            local_8 = *(float *)(&DAT_004c98e8 + iVar4 * 4);
        }
        else
        {
            local_8 = *(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0xfff)) * 4);
        }
        *param_2 = (local_8 - *(float *)(&DAT_004c98e8 + iVar3 * 4)) * fVar2 + *(float *)(&DAT_004c98e8 + iVar3 * 4);
        if (iVar4 < 0x1000)
        {
            local_8 = *(float *)(&DAT_004c98e8 + (0xfff - iVar4) * 4);
        }
        else
        {
            local_8 = -*(float *)(s_Director_of_Sales_and_Marketing_004c58dc + iVar4 * 4 + 0xc);
        }
        *param_3 = (local_8 - *(float *)(&DAT_004c98e8 + (0xfff - iVar3) * 4)) * fVar2
            + *(float *)(&DAT_004c98e8 + (0xfff - iVar3) * 4);
        break;
    case 1:
        if (iVar4 < 0x2000)
        {
            local_8 = *(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0xfff)) * 4);
        }
        else
        {
            local_8 = -*(float *)(&DAT_004c18e8 + iVar4 * 4);
        }
        *param_2 = (local_8 - *(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x1000)) * 4)) * fVar2
            + *(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x1000)) * 4);
        if (iVar4 < 0x2000)
        {
            local_8 = *(float *)(s_Director_of_Sales_and_Marketing_004c58dc + iVar4 * 4 + 0xc);
        }
        else
        {
            local_8 = *(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x1fff)) * 4);
        }
        local_8 = -local_8;
        *param_3 = (local_8 - -*(float *)(s_Director_of_Sales_and_Marketing_004c58dc + iVar3 * 4 + 0xc)) * fVar2
            + -*(float *)(s_Director_of_Sales_and_Marketing_004c58dc + iVar3 * 4 + 0xc);
        break;
    case 2:
        if (iVar4 < 0x3000)
        {
            local_8 = *(float *)(&DAT_004c18e8 + iVar4 * 4);
        }
        else
        {
            local_8 = *(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x2fff)) * 4);
        }
        local_8 = -local_8;
        *param_2 = (local_8 - -*(float *)(&DAT_004c18e8 + iVar3 * 4)) * fVar2 + -*(float *)(&DAT_004c18e8 + iVar3 * 4);
        if (iVar4 < 0x3000)
        {
            local_8 = -*(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x1fff)) * 4);
        }
        else
        {
            local_8 = *(float *)(&DAT_004bd8e8 + iVar4 * 4);
        }
        *param_3 = (local_8 - -*(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x2000)) * 4)) * fVar2
            + -*(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x2000)) * 4);
        break;
    case 3:
        if (iVar4 < 0x4000)
        {
            local_8 = -*(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x2fff)) * 4);
        }
        else
        {
            local_8 = *(float *)(&DAT_004b98e8 + iVar4 * 4);
        }
        *param_2 = (local_8 - -*(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x3000)) * 4)) * fVar2
            + -*(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x3000)) * 4);
        if (iVar4 < 0x4000)
        {
            local_8 = *(float *)(&DAT_004bd8e8 + iVar4 * 4);
        }
        else
        {
            local_8 = *(float *)(&DAT_004c98e8 + (0xfff - (iVar3 + -0x3fff)) * 4);
        }
        *param_3 = (local_8 - *(float *)(&DAT_004bd8e8 + iVar3 * 4)) * fVar2 + *(float *)(&DAT_004bd8e8 + iVar3 * 4);
    }
    return;
}

// 0048cd30
int roundFloat2Int(float param_1)

{
    return (int)ROUND(ROUND(param_1));
}

// stdMath_SinCos again ?
float10 stdMath_unk(undefined_32 param_1)

{
    float fVar1;
    float fVar2;
    int iVar3;
    int iVar4;
    float10 fVar5;
    undefined_32 local_1c;
    float local_10;
    float local_8;

    fVar5 = (float10)stdMath_NormalizeAngle(param_1);
    fVar1 = (float)fVar5;
    if ((float10)90.0 <= fVar5)
    {
        if (180.0 <= fVar1)
        {
            if (270.0 <= fVar1)
            {
                local_1c = 3;
            }
            else
            {
                local_1c = 2;
            }
        }
        else
        {
            local_1c = 1;
        }
    }
    else
    {
        local_1c = 0;
    }
    fVar2 = (fVar1 / 360.0) * 16384.0;
    fVar5 = (float10)stdMath_Floor(fVar2);
    fVar1 = (float)((float10)fVar2 - fVar5);
    iVar3 = roundFloat2Int(fVar2);
    iVar4 = iVar3 + 1;
    switch (local_1c)
    {
    case 0:
        if (iVar4 < 0x1000)
        {
            local_8 = *(float *)(&DAT_004cd8e8 + iVar4 * 4);
        }
        else
        {
            local_8 = -*(float *)(&DAT_004cd8e8 + (0xfff - (iVar3 + -0xfff)) * 4);
        }
        local_10 = (local_8 - *(float *)(&DAT_004cd8e8 + iVar3 * 4)) * fVar1 + *(float *)(&DAT_004cd8e8 + iVar3 * 4);
        break;
    case 1:
        if (iVar4 < 0x2000)
        {
            local_8 = -*(float *)(&DAT_004cd8e8 + (0xfff - (iVar3 + -0xfff)) * 4);
        }
        else
        {
            local_8 = *(float *)(s_Director_of_Sales_and_Marketing_004c58dc + iVar4 * 4 + 0xc);
        }
        local_10 = (local_8 - -*(float *)(&DAT_004cd8e8 + (0xfff - (iVar3 + -0x1000)) * 4)) * fVar1
            + -*(float *)(&DAT_004cd8e8 + (0xfff - (iVar3 + -0x1000)) * 4);
        break;
    case 2:
        if (iVar4 < 0x3000)
        {
            local_8 = *(float *)(s_Director_of_Sales_and_Marketing_004c58dc + iVar4 * 4 + 0xc);
        }
        else
        {
            local_8 = -*(float *)(&DAT_004cd8e8 + (0xfff - (iVar3 + -0x2fff)) * 4);
        }
        local_10 = (local_8 - *(float *)(s_Director_of_Sales_and_Marketing_004c58dc + iVar3 * 4 + 0xc)) * fVar1
            + *(float *)(s_Director_of_Sales_and_Marketing_004c58dc + iVar3 * 4 + 0xc);
        break;
    case 3:
        if (iVar4 < 0x4000)
        {
            local_8 = -*(float *)(&DAT_004cd8e8 + (0xfff - (iVar3 + -0x2fff)) * 4);
        }
        else
        {
            local_8 = *(float *)(&DAT_004bd8e8 + iVar4 * 4);
        }
        local_10 = (local_8 - -*(float *)(&DAT_004cd8e8 + (0xfff - (iVar3 + -0x3000)) * 4)) * fVar1
            + -*(float *)(&DAT_004cd8e8 + (0xfff - (iVar3 + -0x3000)) * 4);
    }
    return (float10)local_10;
}

// 0048cff0
float10 SQRT_forward(float param_1)

{
    return (float10)SQRT(param_1);
}

// 0048d010
float10 stdMath_ArcSin3(float param_1)

{
    float fVar1;
    float10 fVar2;
    float10 fVar3;
    float10 fVar4;
    float local_18;
    float local_8;

    if (0.0 <= param_1)
    {
        local_18 = param_1;
    }
    else
    {
        local_18 = -param_1;
    }
    if (local_18 <= 0.7071068)
    {
        fVar2 = (float10)stdMath_FlexPower(local_18, 3);
        fVar3 = (float10)stdMath_FlexPower(local_18, 5);
        fVar4 = (float10)stdMath_FlexPower(local_18, 7);
        fVar2 =
            (fVar4 * (float10)0.066797
             + (float10)(float)(fVar3 * (float10)0.075 + (float10)(float)(fVar2 / (float10)6.0 + (float10)local_18)))
            * (float10)57.29578;
    }
    else
    {
        fVar2 = (float10)SQRT_forward(1.0 - local_18 * local_18);
        fVar1 = (float)fVar2;
        fVar2 = (float10)stdMath_FlexPower(fVar1, 3);
        fVar3 = (float10)stdMath_FlexPower(fVar1, 5);
        fVar4 = (float10)stdMath_FlexPower(fVar1, 7);
        fVar2 = (float10)90.0
            - (fVar4 * (float10)0.066797
               + (float10)(float)(fVar3 * (float10)0.075 + (float10)(float)(fVar2 / (float10)6.0 + (float10)fVar1)))
                * (float10)57.29578;
    }
    local_8 = (float)fVar2;
    if (0.0 <= param_1)
    {
        fVar2 = (float10)local_8;
    }
    else
    {
        fVar2 = -(float10)local_8;
    }
    return fVar2;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 0048d160
// HANDLE hConsoleOutput
void setConsoleAttribute(WORD param_1)

{
    _DAT_0052ee7c = param_1;
    SetConsoleTextAttribute(DAT_0052ee78, param_1);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// lpBuffer [in], lpNUmberOfCharsWritten [out]
void writeConsole(char *param_1, DWORD param_2)

{
    char cVar1;
    uint uVar2;
    char *pcVar3;

    if (_DAT_0052ee7c != (short)param_2)
    {
        setConsoleAttribute(param_2);
    }
    uVar2 = -1;
    pcVar3 = param_1;
    do
    {
        if (uVar2 == 0)
            break;
        uVar2 = uVar2 - 1;
        cVar1 = *pcVar3;
        pcVar3 = pcVar3 + 1;
    } while (cVar1 != '\0'); // strlen
    WriteConsoleA(DAT_0052ee78, param_1, ~uVar2 - 1, &param_2, (LPVOID)0x0);
    return;
}

void FUN_0048d1c0(byte **param_1, int param_2, byte **param_3, uint param_4, int param_5, int param_6, byte **param_7)

{
    int iVar1;
    int iVar2;
    char cVar3;
    int iVar4;
    int iVar5;
    uint uVar6;
    byte **ppbVar7;
    byte bVar8;
    byte bVar9;
    int iVar10;
    uint uVar11;
    uint uVar12;
    uint local_20;
    uint local_10;
    int local_4;

    iVar4 = param_4;
    iVar1 = *(int *)(param_4 + 8);
    iVar2 = *(int *)(param_4 + 0xc);
    cVar3 = (char)*(undefined_32 *)(param_4 + 0x10);
    uVar6 = *(uint *)(param_4 + 0x2c);
    if (uVar6 != 0)
    {
        local_10 = -1 >> (0x20U - (char)uVar6 & 0x1f);
        uVar11 = 0xff >> ((byte) * (undefined_32 *)(param_4 + 0x34) & 0x1f);
        if ((int)(uVar11 & 0xfffffffe) < 3)
        {
            local_20 = 1;
        }
        else
        {
            local_20 = (int)uVar11 >> 1;
        }
    }
    iVar5 = iVar1 - *(int *)(param_2 + 8);
    iVar10 = iVar2 - *(int *)(param_2 + 0xc);
    bVar8 = cVar3 - (char)*(undefined_32 *)(param_2 + 0x10);
    if (uVar6 != 0)
    {
        local_4 = uVar6 - *(int *)(param_2 + 0x2c);
    }
    ppbVar7 = param_3;
    param_4 = uVar6;
    if (0 < param_5)
    {
        do
        {
            switch (*(undefined_32 *)(iVar4 + 4))
            {
            case 8:
                ppbVar7 = (byte **)(uint) * (byte *)param_3;
                break;
            default:
                (**(code **)(DAT_00ecc420 + 0x18))(s__EUnsupported_pixel_depth__Only_8_004d18e6 + 2,
                                                   s_D__devel_QA5_pc_gnome_SpecPlat_r_004d1940, 0x108);
                break;
            case 0x10:
                ppbVar7 = (byte **)(uint) * (ushort *)param_3;
                break;
            case 0x18:
                ppbVar7 = (byte **)(uint)CONCAT21(CONCAT11(*(byte *)param_3, *(byte *)((int)param_3 + 1)),
                                                  *(byte *)((int)param_3 + 2));
                break;
            case 0x20:
                ppbVar7 = (byte **)*param_3;
            }
            uVar12 = (uint)ppbVar7 >> ((byte) * (undefined_32 *)(iVar4 + 0x14) & 0x1f)
                & 0xffffffffU >> (0x20U - (char)iVar1 & 0x1f);
            uVar6 = (uint)ppbVar7 >> ((byte) * (undefined_32 *)(iVar4 + 0x18) & 0x1f)
                & 0xffffffffU >> (0x20U - (char)iVar2 & 0x1f);
            uVar11 = (uint)ppbVar7 >> ((byte) * (undefined_32 *)(iVar4 + 0x1c) & 0x1f)
                & 0xffffffffU >> (0x20U - cVar3 & 0x1f);
            if (*(int *)(iVar4 + 0x2c) != 0)
            {
                param_4 = (uint)ppbVar7 >> ((byte) * (undefined_32 *)(iVar4 + 0x30) & 0x1f) & local_10;
            }
            if (iVar5 < 1)
            {
                uVar12 = uVar12 << (-(byte)iVar5 & 0x1f);
            }
            else
            {
                uVar12 = uVar12 >> ((byte)iVar5 & 0x1f);
            }
            bVar9 = (byte)iVar10;
            if (iVar10 < 1)
            {
                uVar6 = uVar6 << (-bVar9 & 0x1f);
            }
            else
            {
                uVar6 = uVar6 >> (bVar9 & 0x1f);
            }
            if (iVar5 < 1)
            {
                uVar11 = uVar11 << (-bVar8 & 0x1f);
            }
            else
            {
                uVar11 = uVar11 >> (bVar8 & 0x1f);
            }
            ppbVar7 = (byte **)(uVar6 << ((byte) * (undefined_32 *)(param_2 + 0x18) & 0x1f)
                                | uVar11 << ((byte) * (undefined_32 *)(param_2 + 0x1c) & 0x1f)
                                | uVar12 << ((byte) * (undefined_32 *)(param_2 + 0x14) & 0x1f));
            if (*(int *)(iVar4 + 0x2c) != 0)
            {
                if (param_6 == 0)
                {
                    if (local_4 < 1)
                    {
                        param_4 = param_4 << (-(byte)local_4 & 0x1f);
                    }
                    else
                    {
                        param_4 = param_4 >> ((byte)local_4 & 0x1f);
                    }
                    ppbVar7 = (byte **)((uint)ppbVar7 | param_4 << ((byte) * (undefined_32 *)(param_2 + 0x30) & 0x1f));
                }
                else if (param_4 < local_20)
                {
                    ppbVar7 = param_7;
                }
            }
            switch (*(undefined_32 *)(param_2 + 4))
            {
            case 8:
                *(char *)param_1 = (char)ppbVar7;
                break;
            case 0x10:
                *(short *)param_1 = (short)ppbVar7;
                break;
            case 0x18:
                *(char *)param_1 = (char)((uint)ppbVar7 >> 0x10);
                *(char *)((int)param_1 + 1) = (char)((uint)ppbVar7 >> 8);
                *(char *)((int)param_1 + 2) = (char)ppbVar7;
                break;
            case 0x20:
                *param_1 = (byte *)ppbVar7;
            }
            param_3 = (byte **)((int)param_3 + (*(uint *)(iVar4 + 4) >> 3));
            param_1 = (byte **)((int)param_1 + (*(uint *)(param_2 + 4) >> 3));
            param_5 = param_5 + -1;
        } while (param_5 != 0);
    }
    return;
}

// WARNING: Could not reconcile some variable overlaps

undefined_32 FUN_0048d4a0(undefined_32 param_1, int param_2)

{
    uint uVar1;
    int iVar2;
    undefined_32 *puVar3;
    int iVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    int *piVar8;
    undefined_32 *puVar9;
    undefined_16 local_70;
    undefined_32 uStack_6e;
    undefined_16 uStack_6a;
    undefined_16 local_68;
    undefined_16 uStack_66;
    undefined_16 local_64;
    int local_60[3];
    undefined_16 local_54;
    undefined_16 local_52;
    undefined_32 local_50;
    uint local_4c;
    undefined_32 local_48;
    undefined_32 local_44;
    undefined_32 uStack_38;
    undefined_32 uStack_34;
    undefined_32 uStack_30;
    undefined_32 uStack_2c;
    undefined_32 uStack_28;
    undefined_32 uStack_24;
    undefined_32 uStack_20;
    undefined_32 uStack_1c;

    if (*(int *)(param_2 + 0x20) == 0)
    {
        return 1;
    }
    local_60[2] = *(int *)(param_2 + 0x10);
    local_60[1] = *(int *)(param_2 + 0xc);
    local_4c = (uint)(*(int *)(param_2 + 0x24) * local_60[2] * local_60[1]) >> 3;
    uStack_6e = local_4c + 0x36;
    uStack_6a = 0;
    local_68 = 0;
    piVar8 = local_60;
    MEMSET(iVar5, piVar8, 0, 10)
    local_50 = 0;
    local_70 = 0x4d42;
    uStack_66 = 0x36;
    local_64 = 0;
    local_60[0] = 0x28;
    local_54 = 1;
    local_52 = 0x18;
    local_48 = 0xb12;
    local_44 = 0xb12;
    iVar5 = (**(code **)(DAT_00ecc420 + 0x30))(param_1, &DAT_004b6cfc);
    if (iVar5 == 0)
    {
        FUN_00484780(*(undefined_32 *)(DAT_00ecc420 + 0x10), s_D__devel_QA5_pc_gnome_SpecPlat_r_004d19c4, 0x1fa,
                     s_Unable_to_open_file___s__for_wri_004d1a14, param_1, 0, 0, 0);
        return 1;
    }
    iVar2 = (**(code **)(DAT_00ecc420 + 0x40))(iVar5, &local_70, 0xe);
    if (iVar2 != 0xe)
    {
        FUN_00484780(*(undefined_32 *)(DAT_00ecc420 + 0x10), s_D__devel_QA5_pc_gnome_SpecPlat_r_004d19c4, 0x203,
                     s_Error_attempting_to_write__d_byt_004d1990, 0xe, param_1, 0, 0);
        (**(code **)(DAT_00ecc420 + 0x34))(iVar5);
        return 1;
    }
    iVar2 = (**(code **)(DAT_00ecc420 + 0x40))(iVar5, local_60, 0x28);
    if (iVar2 != 0x28)
    {
        FUN_00484780(*(undefined_32 *)(DAT_00ecc420 + 0x10), s_D__devel_QA5_pc_gnome_SpecPlat_r_004d19c4, 0x20d,
                     s_Error_attempting_to_write__d_byt_004d1990, 0x28, param_1, 0, 0);
    LAB_0048d770:
        (**(code **)(DAT_00ecc420 + 0x34))(iVar5);
        return 1;
    }
    uVar1 = *(int *)(param_2 + 0xc) * 3;
    puVar3 = (undefined_32 *)(**(code **)(DAT_00ecc420 + 0x20))(uVar1);
    if (puVar3 == NULL)
    {
        (**(code **)(DAT_00ecc420 + 0x34))(iVar5);
        return 1;
    }
    puVar9 = puVar3;
    MEMSET(uVar6, puVar9, 0, uVar1 >> 2)
    for (uVar6 = uVar1 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
    {
        *(undefined_8 *)puVar9 = 0;
        puVar9 = (undefined_32 *)((int)puVar9 + 1);
    }
    uStack_38 = 1;
    uStack_34 = 0x18;
    uStack_30 = 8;
    uStack_2c = 8;
    uStack_28 = 8;
    uStack_24 = 0;
    uStack_20 = 8;
    uStack_1c = 0x10;
    FUN_00488370(param_2);
    iVar2 = *(int *)(param_2 + 0x10) + -1;
    if (-1 < iVar2)
    {
        iVar7 = *(int *)(param_2 + 0xc);
        do
        {
            FUN_0048d1c0(puVar3, &uStack_38, iVar2 * *(int *)(param_2 + 0x18) + *(int *)(param_2 + 0x58),
                         param_2 + 0x20, iVar7, 0, 0);
            iVar4 = (**(code **)(DAT_00ecc420 + 0x40))(iVar5, puVar3, uVar1);
            iVar7 = *(int *)(param_2 + 0xc);
            if (iVar4 != iVar7 * 3)
            {
                FUN_00484780(*(undefined_32 *)(DAT_00ecc420 + 0x10), s_D__devel_QA5_pc_gnome_SpecPlat_r_004d19c4, 0x230,
                             s_Error_attempting_to_write__d_byt_004d1990, uVar1, param_1, 0, 0);
                (**(code **)(DAT_00ecc420 + 0x24))(puVar3);
                goto LAB_0048d770;
            }
            iVar2 = iVar2 + -1;
        } while (-1 < iVar2);
    }
    (**(code **)(DAT_00ecc420 + 0x24))(puVar3);
    FUN_004883c0(param_2);
    (**(code **)(DAT_00ecc420 + 0x34))(iVar5);
    return 0;
}

void FUN_0048d790(int param_1, int *param_2)

{
    int **ppiVar1;

    ppiVar1 = *(int ***)(param_1 + 4);
    *param_2 = param_1;
    param_2[1] = (int)ppiVar1;
    *(int **)(param_1 + 4) = param_2;
    if (ppiVar1 != NULL)
    {
        *ppiVar1 = param_2;
    }
    return;
}

void FUN_0048d7b0(int *param_1)

{
    if (*param_1 != 0)
    {
        *(int *)(*param_1 + 4) = param_1[1];
    }
    if ((int *)param_1[1] != NULL)
    {
        *(int *)param_1[1] = *param_1;
    }
    param_1[1] = 0;
    *param_1 = 0;
    return;
}

// 0048d7e0
ushort *allocator_large(uint param_1)

{
    ushort uVar1;
    ushort uVar2;
    ushort *puVar3;
    int iVar4;
    ushort *puVar5;
    uint uVar6;
    uint uVar7;
    ushort *puVar8;
    ushort **ppuVar9;

    if (0x1000 < param_1)
    {
        puVar3 = (ushort *)allocator_small(param_1);
        return puVar3;
    }
    ppuVar9 = (ushort **)&DAT_0052ee98;
    puVar3 = (ushort *)(param_1 + 3 & 0xfffffffc);
    iVar4 = 0;
    do
    {
        if ((ppuVar9[3] == NULL) || (puVar3 <= ppuVar9[2]))
            break;
        iVar4 = iVar4 + 1;
        ppuVar9 = ppuVar9 + 4;
    } while (iVar4 < 0x421);
    if ((iVar4 == 0x421) || (ppuVar9[3] == NULL))
    {
        iVar4 = 0;
        ppuVar9 = (ushort **)&DAT_0052ee98;
        do
        {
            if ((ppuVar9[3] == NULL) || (*ppuVar9 == NULL))
                break;
            iVar4 = iVar4 + 1;
            ppuVar9 = ppuVar9 + 4;
        } while (iVar4 < 0x421);
        if (iVar4 == 0x421)
        {
            puVar3 = (ushort *)allocator_small(puVar3);
            return puVar3;
        }
        puVar5 = (ushort *)_malloc(0x7c00);
        if (puVar5 == NULL)
        {
            puVar3 = (ushort *)allocator_small(puVar3);
            return puVar3;
        }
        ppuVar9[1] = puVar5;
        *ppuVar9 = puVar5;
        ppuVar9[2] = (ushort *)0x7bf0;
        ppuVar9[3] = (ushort *)0x1;
        *puVar5 = 0x7bf8;
        puVar5[1] = 0;
        *(ushort ***)(puVar5 + 2) = ppuVar9;
        puVar5[0x3dfc] = 0;
        puVar5[0x3dfd] = 0x7bf8;
        *(ushort ***)(puVar5 + 0x3dfe) = ppuVar9;
    }
    puVar5 = *ppuVar9;
    puVar8 = NULL;
    puVar3 = puVar3 + 4;
    iVar4 = 0x7c00;
    uVar1 = *puVar5;
    while (uVar1 != 0)
    {
        uVar7 = (uint)uVar1;
        if ((uVar1 & 0x8000) == 0)
        {
            if ((ushort)(uVar7 - (int)puVar3) < (ushort)iVar4)
            {
                puVar8 = puVar5;
                iVar4 = uVar7 - (int)puVar3;
            }
        }
        else
        {
            uVar7 = uVar7 & 0x7fff;
        }
        puVar5 = (ushort *)((int)puVar5 + uVar7);
        uVar1 = *puVar5;
    }
    uVar1 = *puVar8;
    uVar2 = (ushort)puVar3;
    *puVar8 = uVar2 | 0x8000;
    if ((ushort *)(uint)uVar1 != puVar3)
    {
        *(ushort *)((int)(puVar8 + 1) + (int)puVar3) = uVar2;
        *(ushort *)((int)puVar8 + (int)puVar3) = uVar1 - uVar2;
        *(ushort *)((int)(puVar8 + 1) + (int)(ushort *)(uint)uVar1) = uVar1 - uVar2;
    }
    *(ushort ***)(puVar8 + 2) = ppuVar9;
    if (puVar8 == ppuVar9[1])
    {
        puVar3 = *ppuVar9;
        puVar5 = NULL;
        uVar7 = 8;
        uVar1 = *puVar3;
        while (uVar1 != 0)
        {
            uVar6 = (uint)uVar1;
            if ((uVar1 & 0x8000) == 0)
            {
                if ((ushort)uVar7 < uVar1)
                {
                    uVar7 = uVar6;
                    puVar5 = puVar3;
                }
            }
            else
            {
                uVar6 = uVar6 & 0x7fff;
            }
            puVar3 = (ushort *)((int)puVar3 + uVar6);
            uVar1 = *puVar3;
        }
        if (8 < (ushort)uVar7)
        {
            ppuVar9[1] = puVar5;
            ppuVar9[2] = (ushort *)(uVar7 + 0xfff8 & 0xffff);
            return puVar8 + 4;
        }
        ppuVar9[1] = puVar5;
        ppuVar9[2] = NULL;
    }
    return puVar8 + 4;
}

// 0048d9a0
void allocator_free(int param_1)

{
    undefined_32 *puVar1;
    ushort *puVar2;
    ushort uVar3;
    uint uVar4;
    ushort *puVar5;

    puVar2 = (ushort *)(param_1 + -8);
    puVar1 = *(undefined_32 **)(param_1 + -4);
    if (puVar1 == NULL)
    {
        _free(puVar2);
        return;
    }
    if (((*puVar2 & 0x8000) == 0) || (0x420 < (ushort)((int)(puVar1 + -0x14bba6) >> 4)))
    {
        (**(code **)(DAT_00ecc420 + 0xc))(s_Attempting_to_dispose_a_bogus_or_004d1a3c);
    }
    else
    {
        uVar4 = *puVar2 & 0x7fff;
        if ((*(ushort *)((int)puVar2 + uVar4) & 0x8000) == 0)
        {
            uVar4 = uVar4 + *(ushort *)((int)puVar2 + uVar4);
        }
        puVar5 = (ushort *)((int)puVar2 - (uint) * (ushort *)(param_1 + -6));
        uVar3 = *puVar5;
        if ((uVar3 & 0x8000) == 0)
        {
            uVar4 = uVar4 + uVar3;
            puVar2 = puVar5;
        }
        uVar3 = (ushort)uVar4;
        *puVar2 = uVar3;
        *(ushort *)((int)puVar2 + (uVar4 & 0xffff) + 2) = uVar3;
        uVar4 = (uVar4 & 0xffff) - 8;
        if ((uint)puVar1[2] < uVar4)
        {
            if (uVar3 == 0x7bf8)
            {
                _free(*puVar1);
                *puVar1 = 0;
                puVar1[2] = 0;
                puVar1[1] = 0;
                return;
            }
            puVar1[2] = uVar4;
            puVar1[1] = puVar2;
            return;
        }
    }
    return;
}

// 0048da80
undefined_32 *allocator_realloc(undefined_32 *param_1, uint param_2)

{
    undefined_32 *puVar1;
    uint uVar2;
    undefined_32 *puVar3;
    undefined_32 *puVar4;

    if (param_1 == NULL)
    {
        puVar1 = (undefined_32 *)allocator_large(param_2);
        return puVar1;
    }
    if (param_2 == 0)
    {
        allocator_free(param_1);
        return NULL;
    }
    puVar1 = (undefined_32 *)allocator_large(param_2);
    if (param_1[-1] == 0)
    {
        uVar2 = param_1[-2];
    }
    else
    {
        uVar2 = *(ushort *)(param_1 + -2) & 0xffff7fff;
    }
    if (puVar1 != NULL)
    {
        if (uVar2 - 8 <= param_2)
        {
            param_2 = uVar2 - 8;
        }
        puVar3 = param_1;
        puVar4 = puVar1;
        QMEMCPY(uVar2, puVar3, puVar4, param_2 >> 2)
        for (param_2 = param_2 & 3; param_2 != 0; param_2 = param_2 - 1)
        {
            *(undefined_8 *)puVar4 = *(undefined_8 *)puVar3;
            puVar3 = (undefined_32 *)((int)puVar3 + 1);
            puVar4 = (undefined_32 *)((int)puVar4 + 1);
        }
        allocator_free(param_1);
        return puVar1;
    }
    return NULL;
}

// 0048db10
int *allocator_small(int param_1)

{
    int *piVar1;

    piVar1 = (int *)_malloc(param_1 + 8);
    if (piVar1 == NULL)
    {
        return NULL;
    }
    *piVar1 = param_1 + 8;
    piVar1[1] = 0;
    return piVar1 + 2;
}

void FUN_0048db40(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00b6b0e8;
    MEMSET(iVar1, puVar2, 0, 0x5000)
    DAT_00deb0ec = 0;
    return;
}

void FUN_0048db60(void)

{
    DAT_00deb0e8 = 0;
    DAT_00deb0ec = DAT_00deb0ec + 1;
    return;
}

undefined_32 FUN_0048db80(void)

{
    return DAT_00deb0ec;
}

undefined_32 FUN_0048db90(void)

{
    return DAT_00deb0e8;
}

undefined_8 *FUN_0048dba0(void)

{
    int iVar1;

    if (0x3ff < DAT_006930c8)
    {
        FUN_0048dce0();
    }
    if (0x14000U - DAT_00deb0f0 < 0x50)
    {
        return NULL;
    }
    if (0x14000U - DAT_00deb0f4 < 0x50)
    {
        return NULL;
    }
    if (0x14000U - DAT_00deb0f8 < 0x50)
    {
        return NULL;
    }
    iVar1 = DAT_006930c8 * 0x40;
    *(undefined_8 **)(&DAT_005330d0 + iVar1) = &DAT_009630d0 + DAT_00deb0f0 * 0xc;
    *(undefined_8 **)(&DAT_005330d4 + iVar1) = &DAT_00a530d8 + DAT_00deb0f4 * 8;
    *(undefined_8 **)(&DAT_005330d8 + iVar1) = &DAT_005430c8 + DAT_00deb0f8 * 0x10;
    return &DAT_005330c0 + iVar1;
}

undefined_8 *FUN_0048dc40(void)

{
    int iVar1;
    int iVar2;

    if (0x3ff < DAT_00af30d8)
    {
        FUN_0048dce0();
        FUN_0048dd80();
    }
    if (0x14000U - DAT_00deb0fc < 0x50)
    {
        return NULL;
    }
    if (0x14000U - DAT_00deb100 < 0x50)
    {
        return NULL;
    }
    if (0x14000U - DAT_00deb104 < 0x50)
    {
        return NULL;
    }
    iVar1 = DAT_00af30d8 * 0x40;
    *(undefined_8 **)(&DAT_006830d8 + iVar1) = &DAT_008730d0 + DAT_00deb0fc * 0xc;
    *(undefined_8 **)(&DAT_006830dc + iVar1) = &DAT_007d30d0 + DAT_00deb100 * 8;
    iVar2 = DAT_00deb104 * 0x10;
    *(undefined_32 *)(&DAT_006830d4 + iVar1) = 0;
    *(undefined_8 **)(&DAT_006830e0 + iVar1) = &DAT_006930d0 + iVar2;
    return &DAT_006830c8 + iVar1;
}

void FUN_0048dce0(void)

{
    if (DAT_006930c8 != 0)
    {
        FUN_0048a300();
        switch (DAT_00ecc430)
        {
        case 0:
            break;
        case 1:
        case 2:
            FUN_0048e4c0(DAT_006930c8, &DAT_005330c0);
            break;
        default:
            FUN_0048df30(DAT_006930c8, &DAT_005330c0, &LAB_0048e640);
        }
        DAT_00deb0e8 = DAT_00deb0e8 + DAT_006930c8;
        DAT_006930c8 = 0;
        DAT_00deb0f0 = 0;
        DAT_00deb0f4 = 0;
        DAT_00deb0f8 = 0;
        FUN_0048a330();
    }
    return;
}

void FUN_0048dd80(void)

{
    int iVar1;

    if (DAT_00af30d8 != 0)
    {
        iVar1 = DAT_00af30d8;
        switch (DAT_00ecc430)
        {
        case 0:
            break;
        case 1:
        case 2:
            FUN_0048e4c0(DAT_00af30d8, &DAT_006830c8);
            iVar1 = DAT_00af30d8;
            break;
        default:
            FUN_0048df30(DAT_00af30d8, &DAT_006830c8, &LAB_0048e620);
            iVar1 = DAT_00af30d8;
        }
        DAT_00af30d8 = 0;
        DAT_00deb0e8 = DAT_00deb0e8 + iVar1;
        DAT_00deb0fc = 0;
        DAT_00deb100 = 0;
        DAT_00deb104 = 0;
    }
    return;
}

undefined_32 FUN_0048de10(float param_1, byte param_2)

{
    int iVar1;
    int iVar2;
    float *pfVar3;
    int iVar4;

    iVar1 = (int)param_1;
    if (DAT_006930c8 < 0x400)
    {
        iVar2 = DAT_006930c8 * 0x40;
        param_1 = 3.402823e+38;
        *(int *)(&DAT_005330c8 + iVar2) = iVar1;
        if (iVar1 != 0)
        {
            pfVar3 = (float *)(*(int *)(&DAT_005330d0 + iVar2) + 8);
            iVar4 = iVar1;
            do
            {
                if (*pfVar3 < param_1)
                {
                    param_1 = *pfVar3;
                }
                pfVar3 = pfVar3 + 3;
                iVar4 = iVar4 + -1;
            } while (iVar4 != 0);
        }
        *(float *)(&DAT_005330f4 + iVar2) = param_1;
        if ((param_2 & 1) != 0)
        {
            DAT_00deb0f0 = DAT_00deb0f0 + iVar1;
        }
        if ((param_2 & 2) != 0)
        {
            DAT_00deb0f4 = DAT_00deb0f4 + iVar1;
        }
        if ((param_2 & 4) != 0)
        {
            DAT_00deb0f8 = DAT_00deb0f8 + iVar1;
        }
        DAT_006930c8 = DAT_006930c8 + 1;
        return 1;
    }
    return 0;
}

undefined_32 FUN_0048dea0(float param_1, byte param_2)

{
    int iVar1;
    int iVar2;
    float *pfVar3;
    int iVar4;

    iVar1 = (int)param_1;
    if (DAT_00af30d8 < 0x400)
    {
        iVar2 = DAT_00af30d8 * 0x40;
        param_1 = 3.402823e+38;
        *(int *)(&DAT_006830d0 + iVar2) = iVar1;
        if (iVar1 != 0)
        {
            pfVar3 = (float *)(*(int *)(&DAT_006830d8 + iVar2) + 8);
            iVar4 = iVar1;
            do
            {
                if (*pfVar3 < param_1)
                {
                    param_1 = *pfVar3;
                }
                pfVar3 = pfVar3 + 3;
                iVar4 = iVar4 + -1;
            } while (iVar4 != 0);
        }
        *(float *)(&DAT_006830fc + iVar2) = param_1;
        if ((param_2 & 1) != 0)
        {
            DAT_00deb0fc = DAT_00deb0fc + iVar1;
        }
        if ((param_2 & 2) != 0)
        {
            DAT_00deb100 = DAT_00deb100 + iVar1;
        }
        if ((param_2 & 4) != 0)
        {
            DAT_00deb104 = DAT_00deb104 + iVar1;
        }
        DAT_00af30d8 = DAT_00af30d8 + 1;
        return 1;
    }
    return 0;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0048df30(uint param_1, uint *param_2)

{
    float fVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    short sVar5;
    short *psVar6;
    int iVar7;
    int iVar8;
    undefined_32 *puVar9;
    int iVar10;
    uint *puVar11;
    uint *puVar12;
    float *pfVar13;
    int iVar14;
    undefined_32 local_5c;
    int local_50;
    uint local_4c;
    uint local_48;
    int local_40;
    uint local_3c;
    uint local_2c;
    int local_20;
    float local_1c;
    float local_18;
    float local_14;

    FUN_0048b260(*(undefined_32 *)(DAT_00df7f2c + 0x38), *(undefined_32 *)(DAT_00df7f2c + 0x40),
                 *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x48) + 4),
                 *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x48) + 8));
    FUN_0049ea00();
    local_2c = 0;
    puVar11 = param_2;
    if (param_1 != 0)
    {
        do
        {
            uVar2 = *puVar11;
            param_2 = (uint *)0x13;
            if ((uVar2 & 2) != 0)
            {
                param_2 = (uint *)0x213;
            }
            if ((uVar2 & 4) != 0)
            {
                param_2 = (uint *)((uint)param_2 | 0x800);
            }
            if ((uVar2 & 8) != 0)
            {
                param_2 = (uint *)((uint)param_2 | 0x1000);
            }
            if ((uVar2 & 0x10) == 0)
            {
                param_2 = (uint *)((uint)param_2 | 0x80);
            }
            if ((uVar2 & 0x20) != 0)
            {
                param_2 = (uint *)((uint)param_2 | 0x2000);
            }
            if ((uVar2 & 0x300) != 0)
            {
                param_2 = (uint *)((uint)param_2 | 0x8000);
            }
            uVar3 = puVar11[7];
            if (uVar3 == 0)
            {
                local_5c = 0;
            }
            else
            {
                if (*(int *)(uVar3 + 0x7c) != 0)
                {
                    param_2 = (uint *)((uint)param_2 | 0x400);
                }
                iVar7 = *(int *)(uVar3 + 0x90);
                FUN_0048e5f0(iVar7, *(int *)(uVar3 + 0x7c));
                local_5c = *(undefined_32 *)(iVar7 + 0x80);
            }
            local_20 = 0;
            DAT_00a530d0 = 0;
            _DAT_005430c0 = *(float *)(*(int *)(DAT_00df7f2c + 0x48) + 4);
            iVar7 = 0;
            do
            {
                uVar4 = puVar11[2];
                DAT_005430c4 = puVar11[4];
                DAT_00af30dc = puVar11[6];
                local_48 = puVar11[1];
                if ((int)DAT_00ecc424 <= (int)local_48)
                {
                    local_48 = DAT_00ecc424;
                }
                local_4c = 0;
                iVar8 = iVar7;
                if (uVar4 != 0)
                {
                    local_40 = 0;
                    local_3c = 0;
                    do
                    {
                        puVar9 = (undefined_32 *)(DAT_005430c4 + local_3c);
                        pfVar13 = (float *)(local_40 + DAT_00af30dc);
                        (&DAT_00b6b0e8)[iVar8 * 8] = *puVar9;
                        (&DAT_00b6b0ec)[iVar8 * 8] = puVar9[1];
                        if ((float)puVar9[2] == 0.0)
                        {
                            fVar1 = 0.0;
                        }
                        else
                        {
                            fVar1 = (2.0 - (float)puVar9[2] * (float)(0x7f000000 - puVar9[2]))
                                * (float)(0x7f000000 - puVar9[2]);
                        }
                        if ((float)puVar9[2] == _DAT_005430c0)
                        {
                            (&DAT_00b6b0f0)[iVar8 * 8] = 0;
                        }
                        else
                        {
                            (&DAT_00b6b0f0)[iVar8 * 8] = 1.0 - fVar1 * _DAT_005430c0;
                        }
                        (&DAT_00b6b0f4)[iVar8 * 8] = fVar1;
                        if ((uVar2 & 0x200) != 0)
                        {
                            if (DAT_00ec8578 < (float)puVar9[2])
                            {
                                if ((float)puVar9[2] < DAT_00ec857c)
                                {
                                    (&DAT_00b6b0fc)[iVar8 * 8] =
                                        (int)ROUND(
                                            ROUND((1.0 - ((float)puVar9[2] - DAT_00ec8578) * _DAT_00ec8574) * 255.0))
                                            << 0x18
                                        | 0xffffff;
                                }
                                else
                                {
                                    (&DAT_00b6b0fc)[iVar8 * 8] = 0xffffff;
                                }
                            }
                            else
                            {
                                (&DAT_00b6b0fc)[iVar8 * 8] = -1;
                            }
                        }
                        if ((int)local_48 < 1)
                        {
                        LAB_0048e1cd:
                            local_1c = 1.0;
                            local_18 = 1.0;
                            local_14 = 1.0;
                            fVar1 = *(float *)(DAT_00af30dc + 0xc);
                        }
                        else if ((int)local_48 < 3)
                        {
                            local_14 = *pfVar13;
                            local_18 = pfVar13[1];
                            fVar1 = pfVar13[3];
                            local_1c = pfVar13[2];
                        }
                        else
                        {
                            if (local_48 != 3)
                                goto LAB_0048e1cd;
                            local_14 = (float)puVar11[9] + *pfVar13;
                            local_18 = (float)puVar11[10] + pfVar13[1];
                            local_1c = (float)puVar11[0xb] + pfVar13[2];
                            fVar1 = pfVar13[3];
                            if (puVar11[0xc] != 1.0f)
                            {
                                fVar1 = fVar1 + (float)puVar11[0xc];
                            }
                        }
                        if (1.0 < local_14)
                        {
                            local_14 = 1.0;
                        }
                        if (1.0 < local_18)
                        {
                            local_18 = 1.0;
                        }
                        if (1.0 < local_1c)
                        {
                            local_1c = 1.0;
                        }
                        if (1.0 < fVar1)
                        {
                            fVar1 = 1.0;
                        }
                        if ((uVar2 & 2) == 0)
                        {
                            (&DAT_00b6b0f8)[iVar8 * 8] = (((int)ROUND(ROUND(local_14 * 255.0)) | 0xffffff00U) << 8
                                                          | (int)ROUND(ROUND(local_18 * 255.0)))
                                    << 8
                                | (int)ROUND(ROUND(local_1c * 255.0));
                        }
                        else
                        {
                            (&DAT_00b6b0f8)[iVar8 * 8] =
                                (((int)ROUND(ROUND(fVar1 * 255.0)) << 8 | (int)ROUND(ROUND(local_14 * 255.0))) << 8
                                 | (int)ROUND(ROUND(local_18 * 255.0)))
                                    << 8
                                | (int)ROUND(ROUND(local_1c * 255.0));
                        }
                        local_3c = local_3c + 0xc;
                        local_40 = local_40 + 0x10;
                        (&DAT_00b6b100)[iVar8 * 8] = *(float *)(puVar11[5] + local_4c * 8) + (float)puVar11[0xe];
                        (&DAT_00b6b104)[iVar8 * 8] = *(float *)(puVar11[5] + 4 + local_4c * 8) + (float)puVar11[0xf];
                        iVar8 = DAT_00a530d0 + 1;
                        local_4c = local_4c + 1;
                        DAT_00a530d0 = iVar8;
                    } while (local_4c < uVar4);
                }
                uVar4 = puVar11[2];
                sVar5 = (short)iVar7;
                if (uVar4 < 4)
                {
                    *(short *)(&DAT_00af30e8 + local_20 * 2) = sVar5;
                    *(short *)(&DAT_00af30ea + local_20 * 2) = sVar5 + 1;
                    *(short *)(&DAT_00af30ec + local_20 * 2) = sVar5 + 2;
                    local_20 = local_20 + 3;
                }
                else
                {
                    iVar7 = uVar4 - 2;
                    iVar10 = 0;
                    local_50 = uVar4 - 1;
                    local_40 = 1;
                    local_3c = 0;
                    if (0 < iVar7)
                    {
                        iVar14 = iVar7 * 3 + local_20;
                        psVar6 = (short *)(&DAT_00af30ea + local_20 * 2);
                        do
                        {
                            psVar6[-1] = (short)iVar10 + sVar5;
                            *psVar6 = (short)local_40 + sVar5;
                            psVar6[1] = (short)local_50 + sVar5;
                            psVar6 = psVar6 + 3;
                            if ((~local_3c & 1) == 0)
                            {
                                iVar10 = local_50;
                                local_50 = local_50 + -1;
                            }
                            else
                            {
                                iVar10 = local_40;
                                local_40 = local_40 + 1;
                            }
                            local_3c = local_3c + 1;
                            local_20 = iVar14;
                        } while ((int)local_3c < iVar7);
                    }
                }
                puVar12 = puVar11 + 0x10;
                local_2c = local_2c + 1;
            } while ((((puVar11[0x12] * 3 + -6 + local_20 < DAT_0052e624) && (local_2c < param_1))
                      && (uVar3 == puVar11[0x17]))
                     && (iVar7 = iVar8, puVar11 = puVar12, uVar2 == *puVar12));
            FUN_0048a350(local_5c, param_2, &DAT_00b6b0e8, iVar8, &DAT_00af30e8, local_20);
            puVar11 = puVar12;
        } while (local_2c < param_1);
    }
    return;
}

void FUN_0048e4c0(int param_1, int param_2)

{
    float *pfVar1;
    int iVar2;
    uint uVar3;
    uint *puVar4;
    undefined_32 *puVar5;

    puVar5 = &DAT_00b6b0e8;
    MEMSET(iVar2, puVar5, 0, 0x5000)
    FUN_0048a3c0();
    if (param_1 != 0)
    {
        puVar4 = (uint *)(param_2 + 8);
        do
        {
            uVar3 = 0;
            if (*puVar4 != 0)
            {
                iVar2 = 0;
                pfVar1 = (float *)&DAT_00b6b0ec;
                do
                {
                    pfVar1[-1] = ROUND(*(float *)(puVar4[2] + iVar2));
                    *pfVar1 = ROUND(*(float *)(puVar4[2] + 4 + iVar2));
                    pfVar1[3] = -NAN;
                    uVar3 = uVar3 + 1;
                    iVar2 = iVar2 + 0xc;
                    pfVar1 = pfVar1 + 8;
                } while (uVar3 < *puVar4);
            }
            if (DAT_00ecc430 == 1)
            {
                FUN_0048a420(&DAT_00b6b0e8, *puVar4);
            }
            else if (DAT_00ecc430 == 2)
            {
                (&DAT_00b6b0e8)[uVar3 * 8] = ROUND(*(float *)puVar4[2]);
                (&DAT_00b6b0ec)[uVar3 * 8] = ROUND(*(float *)(puVar4[2] + 4));
                (&DAT_00b6b0f8)[uVar3 * 8] = -1;
                FUN_0048a3f0(&DAT_00b6b0e8, *puVar4 + 1);
            }
            puVar4 = puVar4 + 0x10;
            param_1 = param_1 + -1;
        } while (param_1 != 0);
    }
    return;
}

void FUN_0048e5f0(int param_1, undefined_32 param_2)

{
    if (*(int *)(param_1 + 0x80) == 0)
    {
        FUN_0048aa80(param_1, param_2);
        return;
    }
    FUN_0048ace0(param_1);
    return;
}

// param_1 is always s___data_default_mat_004b48cc
int FUN_0048e680(undefined_32 param_1)

{
    int iVar1;
    int iVar2;

    if (DAT_00deb108 != (code *)0x0)
    {
        iVar1 = (*DAT_00deb108)(param_1);
        return iVar1;
    }
    iVar1 = (**(code **)(DAT_00ecc428 + 0x20))(0x94);
    if (iVar1 != 0)
    {
        iVar2 = FUN_0048e6d0(param_1, iVar1);
        if (iVar2 == 0)
        {
            return iVar1;
        }
    }
    FUN_0048eac0(iVar1);
    return 0;
}

undefined_32 FUN_0048e6d0(undefined_32 param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 *puVar3;
    int iVar4;
    int iVar5;
    char *_Source;
    int iVar6;
    int *piVar7;
    uint uVar8;
    undefined_32 *puVar9;
    size_t _Count;
    int *piStack_128;
    int iStack_124;
    uint uStack_120;
    undefined_32 uStack_11c;
    undefined_32 uStack_118;
    uint uStack_114;
    uint uStack_110;
    int iStack_100;
    int iStack_fc;
    uint uStack_f8;
    uint uStack_f4;
    undefined_32 auStack_e4[14];
    char acStack_ac[4];
    int iStack_a8;
    byte bStack_a4;
    int iStack_a0;
    int iStack_9c;
    undefined_32 auStack_98[14];
    byte abStack_60[24];
    undefined_8 auStack_48[16];
    undefined_8 auStack_38[56];

    puVar3 = param_2;
    MEMSET(iVar6, puVar3, 0, 0x25)
    iVar6 = (**(code **)(DAT_00ecc428 + 0x30))(param_1, &DAT_004b5c4c /* "rb" */);
    if (iVar6 == 0)
    {
        return 1;
    }
    iVar1 = (**(code **)(DAT_00ecc428 + 0x38))(iVar6, acStack_ac, 0x4c);
    if ((((iVar1 == 0x4c) && (iVar1 = _strncmp(acStack_ac, &DAT_004d1a78, 4), iVar1 == 0)) && (iStack_a8 == 0x32))
        && (iStack_a0 == iStack_9c))
    {
        param_2[0x22] = iStack_a0;
        puVar3 = auStack_98;
        puVar9 = param_2 + 0x11;
        QMEMCPY(iVar1, puVar3, puVar9, 0xe)
        param_2[0x23] = 0;
        uVar2 = FUN_0048a2d0(param_2 + 0x11);
        param_2[0x1f] = uVar2;
        FUN_0048a230(uVar2, auStack_38, &uStack_11c, &uStack_118);
        uVar8 = 0;
        if (param_2[0x22] != 0)
        {
            do
            {
                iVar1 = (**(code **)(DAT_00ecc428 + 0x38))(iVar6, abStack_60, 0x18);
                if ((iVar1 != 0x18)
                    || (((abStack_60[0] & 8) != 0
                         && (iVar1 = (**(code **)(DAT_00ecc428 + 0x38))(iVar6, auStack_48, 0x10), iVar1 != 0x10))))
                    goto LAB_0048ea56;
                uVar8 = uVar8 + 1;
            } while (uVar8 < (uint)param_2[0x22]);
        }
        param_2[0x24] = 0;
        if (param_2[0x22] != 0)
        {
            puVar3 = (undefined_32 *)(**(code **)(DAT_00ecc428 + 0x20))(param_2[0x22] * 0x94);
            param_2[0x24] = puVar3;
            if (puVar3 == NULL)
                goto LAB_0048ea56;
            MEMSET(uVar8, puVar3, 0, param_2[0x22] * 0x25 & 0x3fffffff)
            for (iVar1 = 0; iVar1 != 0; iVar1 = iVar1 + -1)
            {
                *(undefined_8 *)puVar3 = 0;
                puVar3 = (undefined_32 *)((int)puVar3 + 1);
            }
        }
        uStack_120 = 0;
        if (param_2[0x22] != 0)
        {
            iStack_124 = 0;
            do
            {
                iVar1 = (**(code **)(DAT_00ecc428 + 0x38))(iVar6, &uStack_114, 0x18);
                if (iVar1 != 0x18)
                    goto LAB_0048ea56;
                param_2[0x21] = uStack_110;
                uStack_f4 = uStack_110;
                uStack_f8 = uStack_114;
                param_2[0x20] = uStack_114;
                puVar3 = param_2 + 0x11;
                puVar9 = auStack_e4;
                QMEMCPY(iVar1, puVar3, puVar9, 0xe)
                piStack_128 = NULL;
                if (iStack_100 != 0)
                {
                    piStack_128 = (int *)(**(code **)(DAT_00ecc428 + 0x20))(iStack_100 * 4);
                    iVar1 = iStack_100;
                    piVar7 = piStack_128;
                    if (piStack_128 == NULL)
                        goto LAB_0048ea56;
                    for (; iVar1 != 0; iVar1 = iVar1 + -1)
                    {
                        *piVar7 = 0;
                        piVar7 = piVar7 + 1;
                    }
                }
                iVar1 = 0;
                piVar7 = piStack_128;
                if (0 < iStack_100)
                {
                    do
                    {
                        iVar4 = FUN_004881c0(&uStack_f8, 0, 0);
                        *piVar7 = iVar4;
                        if (iVar4 == 0)
                            goto LAB_0048ea56;
                        FUN_00488370(iVar4);
                        iVar4 = *piVar7;
                        iStack_fc = iVar4;
                        iVar5 = (**(code **)(DAT_00ecc428 + 0x38))(iVar6, *(undefined_32 *)(iVar4 + 0x58),
                                                                   *(undefined_32 *)(iVar4 + 0x14));
                        if (*(int *)(iVar4 + 0x14) != iVar5)
                            goto LAB_0048ea56;
                        FUN_004883c0(iVar4);
                        if ((*(int *)(*piVar7 + 0x20) != 0) && (iVar4 = FUN_0048a2f0(), iVar4 != 0))
                        {
                            iVar4 = FUN_00488670(auStack_38, *piVar7, uStack_11c, uStack_118);
                            *piVar7 = iVar4;
                        }
                        uStack_f4 = uStack_f4 >> 1;
                        uStack_f8 = uStack_f8 >> 1;
                        iVar1 = iVar1 + 1;
                        piVar7 = piVar7 + 1;
                    } while (iVar1 < iStack_100);
                }
                FUN_0048a5e0(iStack_124 + param_2[0x24], piStack_128, iStack_100, param_2[0x1f]);
                iVar1 = 0;
                piVar7 = piStack_128;
                if (0 < iStack_100)
                {
                    do
                    {
                        FUN_00488310(*piVar7);
                        iVar1 = iVar1 + 1;
                        piVar7 = piVar7 + 1;
                    } while (iVar1 < iStack_100);
                }
                (**(code **)(DAT_00ecc428 + 0x24))(piStack_128);
                uStack_120 = uStack_120 + 1;
                iStack_124 = iStack_124 + 0x94;
            } while (uStack_120 < (uint)param_2[0x22]);
        }
        if ((bStack_a4 & 1) == 0)
        {
            _Count = 0x3f;
            _Source = (char *)FUN_00484860(param_1);
            _strncpy((char *)param_2, _Source, _Count);
            *(undefined_8 *)((int)param_2 + 0x3f) = 0;
            (**(code **)(DAT_00ecc428 + 0x34))(iVar6);
            return 0;
        }
    }
LAB_0048ea56:
    if (iVar6 != 0)
    {
        (**(code **)(DAT_00ecc428 + 0x34))(iVar6);
    }
    return 1;
}

void FUN_0048eac0(undefined_32 param_1)

{
    if (DAT_00deb10c != (code *)0x0)
    {
        (*DAT_00deb10c)(param_1);
        return;
    }
    FUN_0048eb00(param_1);
    (**(code **)(DAT_00ecc428 + 0x24))(param_1);
    return;
}

void FUN_0048eb00(int param_1)

{
    uint uVar1;
    int iVar2;

    iVar2 = *(int *)(param_1 + 0x90);
    if ((iVar2 != 0) && (uVar1 = 0, *(int *)(param_1 + 0x88) != 0))
    {
        do
        {
            FUN_0048aa40(iVar2);
            uVar1 = uVar1 + 1;
            iVar2 = iVar2 + 0x94;
        } while (uVar1 < *(uint *)(param_1 + 0x88));
    }
    if (*(int *)(param_1 + 0x90) != 0)
    {
        (**(code **)(DAT_00ecc428 + 0x24))(*(int *)(param_1 + 0x90));
    }
    return;
}

// vec3f *result_in_out
// find the normal to a difference of vectors ... ?
// 0048eb60
void vec3f_sub_cross_product(float *result_in_out, float *v2, float *v3, float *v4)

{
    float v4_[3];
    float v3_[3];

    v3_[0] = v3[0] - v2[0];
    v3_[1] = v3[1] - v2[1];
    v3_[2] = v3[2] - v2[2];
    v4_[0] = v4[0] - v2[0];
    v4_[1] = v4[1] - v2[1];
    v4_[2] = v4[2] - v2[2];
    rdVector_Normalize3(&v3_);
    rdVector_Normalize3(&v4_);
    // Cross-product
    result_in_out[0] = v4_[2] * v3_[1] - v4_[1] * v3_[2];
    result_in_out[1] = v4_[0] * v3_[2] - v4_[2] * v3_[0];
    result_in_out[2] = v4_[1] * v3_[0] - v4_[0] * v3_[1];
    rdVector_Normalize3(result_in_out);
    vec3f_abs(result_in_out, 1e-06f);
    return;
}

// 0048ec50
// why multiply pair-wise with param_2 here ?
float10 vec3f_sub_multiply(float *param_1, float *param_2, float *param_3)

{
    return ((float10)param_1[0] - (float10)param_3[0]) * (float10)param_2[0]
        + ((float10)param_1[2] - (float10)param_3[2]) * (float10)param_2[2]
        + ((float10)param_1[1] - (float10)param_3[1]) * (float10)param_2[1];
}

// vec3f, 1e-06f
// This zeros out a vector if its absolute value is below a threshold
// 0048ec90
void vec3f_abs(float *param_1, float param_2)

{
    float fVar1;

    fVar1 = *param_1;
    if (*param_1 < 0.0)
    {
        fVar1 = -fVar1;
    }
    if (param_2 <= fVar1)
    {
        fVar1 = *param_1;
    }
    else
    {
        fVar1 = 0.0;
    }
    *param_1 = fVar1;
    fVar1 = param_1[1];
    if (param_1[1] < 0.0)
    {
        fVar1 = -fVar1;
    }
    if (param_2 <= fVar1)
    {
        fVar1 = param_1[1];
    }
    else
    {
        fVar1 = 0.0;
    }
    param_1[1] = fVar1;
    fVar1 = param_1[2];
    if (param_1[2] < 0.0)
    {
        fVar1 = -fVar1;
    }
    if (fVar1 < param_2)
    {
        param_1[2] = 0.0;
        return;
    }
    param_1[2] = param_1[2]; // Ghidra are you ok ?
    return;
}

// 0048ed20
// boolean function areNormal() ? Again, why is there a substraction. Used to stop a while loop
undefined_32 vec3f_are_normals_unknown(float *v1, float *v2, float *v3)

{
    float norm_squared;
    float v3_[3];
    float v2_[3];

    v2_[0] = v2[0] - v1[0];
    v2_[1] = v2[1] - v1[1];
    v2_[2] = v2[2] - v1[2];
    v3_[0] = v3[0] - v1[0];
    v3_[1] = v3[1] - v1[1];
    v3_[2] = v3[2] - v1[2];
    rdVector_Normalize3(&v2_);
    rdVector_Normalize3(&v3_);
    norm_squared = v3_[2] * v2_[2] + v3_[1] * v2_[1] + v3_[0] * v2_[0];
    if (norm_squared < 0.0)
    {
        norm_squared = -norm_squared;
    }
    if ((0.999 <= norm_squared) && (norm_squared <= 1.001))
    {
        return 1;
    }
    return 0;
}

void FUN_0048ee10(undefined_32 *param_1)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = param_1;
    MEMSET(iVar1, puVar2, 0, 0x24)
    _strncpy((char *)param_1, s_UNKNOWN_004d1a98, 0x3f);
    *(undefined_8 *)((int)param_1 + 0x3f) = 0;
    param_1[0x1c] = 0;
    return;
}

void FUN_0048ee40(int param_1)

{
    if (param_1 != 0)
    {
        if (DAT_00df7f04 != (code *)0x0)
        {
            (*DAT_00df7f04)();
            return;
        }
        FUN_0048ee70(param_1);
        (**(code **)(DAT_00ecc428 + 0x24))(param_1);
    }
    return;
}

void FUN_0048ee70(int param_1)

{
    uint uVar1;
    uint *puVar2;
    int *piVar3;
    int iVar4;
    uint local_8;
    uint local_4;

    if (param_1 != 0)
    {
        puVar2 = (uint *)(param_1 + 0x44);
        local_4 = 0;
        if (*(int *)(param_1 + 100) != 0)
        {
            do
            {
                local_8 = 0;
                if (*puVar2 != 0)
                {
                    piVar3 = (int *)(puVar2[1] + 0x50);
                    do
                    {
                        if (piVar3[-1] != 0)
                        {
                            (**(code **)(DAT_00ecc428 + 0x24))(piVar3[-1]);
                        }
                        if (*piVar3 != 0)
                        {
                            (**(code **)(DAT_00ecc428 + 0x24))(*piVar3);
                        }
                        iVar4 = piVar3[7];
                        if (iVar4 != 0)
                        {
                            uVar1 = 0;
                            if (piVar3[0xb] != 0)
                            {
                                do
                                {
                                    FUN_00492410(iVar4);
                                    iVar4 = iVar4 + 0x48;
                                    uVar1 = uVar1 + 1;
                                } while (uVar1 < (uint)piVar3[0xb]);
                            }
                            (**(code **)(DAT_00ecc428 + 0x24))(piVar3[7]);
                        }
                        if (piVar3[1] != 0)
                        {
                            (**(code **)(DAT_00ecc428 + 0x24))(piVar3[1]);
                        }
                        if (piVar3[2] != 0)
                        {
                            (**(code **)(DAT_00ecc428 + 0x24))(piVar3[2]);
                        }
                        if (piVar3[8] != 0)
                        {
                            (**(code **)(DAT_00ecc428 + 0x24))(piVar3[8]);
                        }
                        piVar3 = piVar3 + 0x25;
                        local_8 = local_8 + 1;
                    } while (local_8 < *puVar2);
                }
                if (puVar2[1] != 0)
                {
                    (**(code **)(DAT_00ecc428 + 0x24))(puVar2[1]);
                }
                puVar2 = puVar2 + 2;
                local_4 = local_4 + 1;
            } while (local_4 < *(uint *)(param_1 + 100));
        }
        if (*(int *)(param_1 + 0x78) != 0)
        {
            (**(code **)(DAT_00ecc428 + 0x24))(*(int *)(param_1 + 0x78));
        }
        uVar1 = 0;
        if (*(int *)(param_1 + 0x6c) != 0)
        {
            do
            {
                FUN_0048eac0(*(undefined_32 *)(*(int *)(param_1 + 0x68) + uVar1 * 4));
                uVar1 = uVar1 + 1;
            } while (uVar1 < *(uint *)(param_1 + 0x6c));
        }
        if (*(int *)(param_1 + 0x68) != 0)
        {
            (**(code **)(DAT_00ecc428 + 0x24))(*(int *)(param_1 + 0x68));
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0048efe0(uint param_1, int param_2)

{
    int iVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    int iVar5;
    int iVar6;
    int iVar7;

    DAT_00df7ef8 = param_1;
    _DAT_00ecc474 = 0;
    DAT_00ecc470 = 0;
    DAT_00df7cec = *(int *)(param_1 + 4);
    if (*(int *)(param_1 + 0x38) == 2)
    {
        return 0;
    }
    iVar5 = *(int *)(param_1 + 0x2c);
    if (iVar5 == -1)
    {
        iVar5 = *(int *)(DAT_00df7cec + 0x70);
    }
    DAT_00deb110 = DAT_00df7cec + 0x44 + iVar5 * 8;
    iVar5 = FUN_0048db80();
    if ((*(int *)(DAT_00df7ef8 + 0x18) != iVar5) || (*(int *)(*(int *)(*(int *)(DAT_00df7f2c + 4) + 4) + 0x24) == 8))
    {
        FUN_00493310(DAT_00df7ef8, param_2);
    }
    DAT_00df7cf0 = *(int *)(DAT_00df7ef8 + 0x34);
    if (DAT_00ecc424 <= *(int *)(DAT_00df7ef8 + 0x34))
    {
        DAT_00df7cf0 = DAT_00ecc424;
    }
    if (1 < DAT_00df7cf0)
    {
        DAT_00df7f08 = 0;
        param_1 = 0;
        if (*(int *)(DAT_00df7f2c + 0x6c) != 0)
        {
            iVar6 = 0;
            iVar7 = 0x70;
            iVar5 = DAT_00df7f2c;
            do
            {
                iVar1 = *(int *)(iVar5 + iVar7);
                if (*(int *)(iVar1 + 8) == 1)
                {
                    if (*(int *)(iVar1 + 4) == 1)
                    {
                        fVar2 = *(float *)(iVar5 + 0x270 + iVar6) - *(float *)(param_2 + 0x24);
                        fVar4 = *(float *)(iVar5 + 0x274 + iVar6) - *(float *)(param_2 + 0x28);
                        fVar3 = *(float *)(iVar5 + 0x278 + iVar6) - *(float *)(param_2 + 0x2c);
                        iVar5 = DAT_00df7f2c;
                        if (SQRT(fVar3 * fVar3 + fVar4 * fVar4 + fVar2 * fVar2)
                            < *(float *)(iVar1 + 0x28) + *(float *)(DAT_00df7cec + 0x80))
                        {
                            (&DAT_00deb4e8)[DAT_00df7f08] = iVar1;
                            DAT_00df7f08 = DAT_00df7f08 + 1;
                            iVar5 = DAT_00df7f2c;
                        }
                    }
                    else if (*(int *)(iVar1 + 4) == 0)
                    {
                        (&DAT_00deb4e8)[DAT_00df7f08] = iVar1;
                        DAT_00df7f08 = DAT_00df7f08 + 1;
                    }
                }
                param_1 = param_1 + 1;
                iVar7 = iVar7 + 4;
                iVar6 = iVar6 + 0xc;
            } while (param_1 < *(uint *)(iVar5 + 0x6c));
        }
    }
    FUN_0048f180(*(undefined_32 *)(DAT_00df7cec + 0x78));
    return 1;
}

void FUN_0048f180(int param_1)

{
    int iVar1;
    uint uVar2;

    if (*(int *)(param_1 + 0x88) != -1)
    {
        FUN_0048f210(*(int *)(DAT_00deb110 + 4) + *(int *)(param_1 + 0x88) * 0x94, param_1 + 0xc0, param_1 + 0xf4,
                     *(undefined_32 *)(param_1 + 0xf0));
    }
    if (*(int *)(param_1 + 0x90) != 0)
    {
        iVar1 = *(int *)(param_1 + 0x94);
        uVar2 = 0;
        if (*(int *)(param_1 + 0x90) != 0)
        {
            do
            {
                if ((*(int *)(DAT_00df7ef8 + 0x24) == 0)
                    || (*(int *)(*(int *)(DAT_00df7ef8 + 0x24) + *(int *)(iVar1 + 0x80) * 4) == 0))
                {
                    FUN_0048f180(iVar1);
                }
                iVar1 = *(int *)(iVar1 + 0x98);
                uVar2 = uVar2 + 1;
            } while (uVar2 < *(uint *)(param_1 + 0x90));
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address
// 0048f210
// closest to rdDrawMesh even if its quite different
void FUN_0048f210(int param_1, uint param_2, undefined_32 param_3, int param_4)

{
    int iVar1;
    byte bVar2;
    int *piVar3;
    int iVar4;
    uint uVar5;
    float fVar6;
    float fVar7;
    float fVar8;
    int iVar9;
    uint uVar10;
    int iVar11;
    int **ppiVar12;
    bool bVar13;
    undefined_32 uVar14;
    undefined_32 uVar15;
    undefined_8 local_74[48];
    undefined_8 local_44[48];
    undefined_32 local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    float local_8;

    iVar11 = param_2;
    DAT_00df7ce8 = param_1;
    bVar2 = *(byte *)(param_1 + 0x89);
    if ((int)(char)bVar2 != (DAT_00df7f1c & 0xff))
    {
        DAT_00df7f1c = DAT_00df7f1c & 0xffffff00 | (uint)bVar2;
        uVar14 = DAT_0050c708;
        uVar15 = DAT_004c3c10;
        if (bVar2 == 0)
        {
            uVar14 = 0;
            uVar15 = 1;
        }
        FUN_00409510(uVar14, uVar15);
    }
    if (*(short *)(DAT_00df7ce8 + 0x84) == 0)
    {
        *(undefined_16 *)(DAT_00df7ce8 + 0x86) = 0;
        return;
    }
    iVar9 = DAT_00df7ce8;
    if (*(int *)(DAT_00df7ce8 + 0x44) != 0)
    {
        uVar14 = *(undefined_32 *)(DAT_00df7ce8 + 0x4c);
        uVar15 = *(undefined_32 *)(DAT_00df7ce8 + 0x74);
        rdMatrix_Multiply34(local_74, DAT_00df7f2c + 8, param_2);
        rdMatrix_TransformPointLst34(local_74, uVar14, &DAT_00debce8, uVar15);
        if (0 < param_4)
        {
            rdMatrix_Multiply34(local_74, DAT_00df7f2c + 8, param_3);
            rdMatrix_TransformPointLst34(local_74, uVar14, &DAT_00debce8, param_4);
        }
        FUN_00492680(local_44, param_2);
        DAT_00df7efc = *(int *)(DAT_00df7ce8 + 0x48);
        if (DAT_00df7cf0 <= *(int *)(DAT_00df7ce8 + 0x48))
        {
            DAT_00df7efc = DAT_00df7cf0;
        }
        _DAT_00ecc4ac = &DAT_00debce8;
        DAT_00ecc48c = &DAT_00deb128;
        _DAT_00ecc4b0 = *(undefined_32 *)(DAT_00df7ce8 + 0x50);
        _DAT_00ecc4b4 = *(undefined_32 *)(DAT_00df7ce8 + 0x58);
        _DAT_00ecc4b8 = 0;
        if (DAT_00df7efc == 2)
        {
            DAT_00df7f0c = 0;
            param_2 = 0;
            if (DAT_00df7f08 != 0)
            {
                ppiVar12 = (int **)&DAT_00deb4e8;
                do
                {
                    iVar4 = DAT_00df7f2c;
                    iVar1 = DAT_00df7f0c;
                    piVar3 = *ppiVar12;
                    iVar9 = *piVar3;
                    fVar6 = *(float *)(DAT_00df7f2c + (iVar9 + 0x34) * 0xc) - *(float *)(iVar11 + 0x24);
                    fVar8 = *(float *)(DAT_00df7f2c + 0x274 + iVar9 * 0xc) - *(float *)(iVar11 + 0x28);
                    fVar7 = *(float *)(DAT_00df7f2c + 0x278 + iVar9 * 0xc) - *(float *)(iVar11 + 0x2c);
                    local_8 = SQRT(fVar7 * fVar7 + fVar8 * fVar8 + fVar6 * fVar6);
                    if (local_8 < (float)piVar3[10] + *(float *)(DAT_00df7ce8 + 0x80))
                    {
                        (&DAT_00df7cf8)[DAT_00df7f0c] = piVar3;
                        rdMatrix_TransformPoint34(&DAT_00deb6e8 + iVar1 * 0xc, iVar4 + (*piVar3 + 0x34) * 0xc,
                                                  local_44);
                        DAT_00df7f0c = DAT_00df7f0c + 1;
                    }
                    param_2 = param_2 + 1;
                    ppiVar12 = ppiVar12 + 1;
                } while (param_2 < DAT_00df7f08);
            }
        }
        else if (DAT_00df7efc == 3)
        {
            DAT_00df7f0c = 0;
            param_2 = 0;
            if (DAT_00df7f08 != 0)
            {
                ppiVar12 = (int **)&DAT_00deb4e8;
                do
                {
                    iVar1 = DAT_00df7f2c;
                    iVar9 = DAT_00df7f0c;
                    piVar3 = *ppiVar12;
                    if (piVar3[1] == 0)
                    {
                        (&DAT_00df7cf8)[DAT_00df7f0c] = piVar3;
                        FUN_00493190(&DAT_00deb6e8 + iVar9 * 0xc, DAT_00df7f2c + (*piVar3 + 0x34) * 0xc, local_44);
                        rdVector_Normalize3(&DAT_00deb6e8 + DAT_00df7f0c * 0xc);
                    LAB_0048f47a:
                        DAT_00df7f0c = DAT_00df7f0c + 1;
                    }
                    else if (piVar3[1] == 1)
                    {
                        iVar4 = *piVar3;
                        fVar6 = *(float *)(DAT_00df7f2c + (iVar4 + 0x34) * 0xc) - *(float *)(iVar11 + 0x24);
                        fVar8 = *(float *)(DAT_00df7f2c + 0x274 + iVar4 * 0xc) - *(float *)(iVar11 + 0x28);
                        fVar7 = *(float *)(DAT_00df7f2c + 0x278 + iVar4 * 0xc) - *(float *)(iVar11 + 0x2c);
                        local_8 = SQRT(fVar7 * fVar7 + fVar8 * fVar8 + fVar6 * fVar6);
                        if (local_8 < (float)piVar3[10] + *(float *)(DAT_00df7ce8 + 0x80))
                        {
                            (&DAT_00df7cf8)[DAT_00df7f0c] = piVar3;
                            rdMatrix_TransformPoint34(&DAT_00deb6e8 + iVar9 * 0xc, iVar1 + (*piVar3 + 0x34) * 0xc,
                                                      local_44);
                            goto LAB_0048f47a;
                        }
                    }
                    param_2 = param_2 + 1;
                    ppiVar12 = ppiVar12 + 1;
                } while (param_2 < DAT_00df7f08);
            }
            // rdLight_CalcVertexIntensities with one less param ?
            FUN_00490550(DAT_00df7f2c + 0x70, &DAT_00deb6e8, *(undefined_32 *)(DAT_00df7f2c + 0x6c),
                         *(undefined_32 *)(DAT_00df7ce8 + 0x70), *(undefined_32 *)(DAT_00df7ce8 + 0x4c),
                         *(undefined_32 *)(DAT_00df7ce8 + 0x54), *(undefined_32 *)(DAT_00df7ce8 + 0x58),
                         *(undefined_32 *)(DAT_00df7ce8 + 0x74), *(undefined_32 *)(DAT_00df7f2c + 0x870));
        }
        local_14 = DAT_00ecc464;
        local_10 = DAT_00ecc468;
        local_c = DAT_00ecc46c;
        rdMatrix_TransformPoint34(&DAT_00deb118, &local_14, local_44);
        uVar10 = 0;
        iVar11 = *(int *)(param_1 + 0x6c);
        iVar9 = DAT_00df7ce8;
        if (*(int *)(param_1 + 0x7c) != 0)
        {
            do
            {
                iVar1 = *(int *)(iVar9 + 0x4c) + **(int **)(iVar11 + 0x14) * 0xc;
                bVar13 = (_DAT_00deb11c - *(float *)(iVar1 + 4)) * *(float *)(iVar11 + 0x40)
                        + (_DAT_00deb120 - *(float *)(iVar1 + 8)) * *(float *)(iVar11 + 0x44)
                        + (_DAT_00deb118 - *(float *)(*(int *)(iVar9 + 0x4c) + **(int **)(iVar11 + 0x14) * 0xc))
                            * *(float *)(iVar11 + 0x3c)
                    <= 0.0;
                if (1 < *(short *)(iVar9 + 0x86))
                {
                    bVar13 = !bVar13;
                }
                if (bVar13 == false)
                {
                    uVar5 = *(uint *)(iVar11 + 4);
                }
                else
                {
                    uVar5 = *(uint *)(iVar11 + 4);
                }
                if ((((uVar5 & 0x800) == 0) && ((*(uint *)(iVar11 + 4) & 1) == 0))
                    && ((DAT_0050c530 != 1 || ((*(uint *)(iVar11 + 4) & 0x800) == 0))))
                {
                    if (0 < param_4)
                    {
                        uVar14 = *(undefined_32 *)(param_1 + 0x90);
                        uVar15 = *(undefined_32 *)(param_1 + 0x8c);
                        goto LAB_0048f6b9;
                    }
                }
                else
                {
                    uVar14 = *(undefined_32 *)(param_1 + 0x90);
                    uVar15 = *(undefined_32 *)(param_1 + 0x8c);
                LAB_0048f6b9:
                    FUN_0048f700(iVar11, bVar13, param_1 + 0x5c, uVar15, uVar14);
                    iVar9 = DAT_00df7ce8;
                }
                iVar11 = iVar11 + 0x48;
                uVar10 = uVar10 + 1;
            } while (uVar10 < *(uint *)(param_1 + 0x7c));
        }
    }
    *(short *)(iVar9 + 0x84) = *(short *)(iVar9 + 0x84) + -1;
    if (*(short *)(DAT_00df7ce8 + 0x84) == 0)
    {
        *(undefined_16 *)(DAT_00df7ce8 + 0x86) = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0048f700(int param_1, int param_2, int param_3, uint param_4, uint param_5)

{
    float *pfVar1;
    int iVar2;
    int iVar3;
    uint *puVar4;
    undefined_32 uVar5;
    undefined_32 uVar6;
    uint uVar7;
    uint uVar8;
    int iVar9;
    undefined_32 uVar10;
    float *pfVar11;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    puVar4 = (uint *)FUN_0048dba0();
    if (puVar4 != NULL)
    {
        uVar7 = *(uint *)(param_1 + 0xc);
        if ((int)DAT_00df7efc < (int)*(uint *)(param_1 + 0xc))
        {
            uVar7 = DAT_00df7efc;
        }
        puVar4[1] = uVar7;
        DAT_00ecc49c = puVar4[4];
        _DAT_00ecc490 = puVar4[5];
        _DAT_00ecc494 = puVar4[6];
        _DAT_00ecc4a0 = *(undefined_32 *)(param_1 + 0x10);
        _DAT_00ecc4a4 = *(undefined_32 *)(param_1 + 0x14);
        _DAT_00ecc4a8 = *(undefined_32 *)(param_1 + 0x18);
        if (*(int *)(*(int *)(*(int *)(DAT_00df7f2c + 4) + 4) + 0x24) == 8)
        {
            FUN_00491ac0(*(undefined_32 *)(param_1 + 8), puVar4[1], &DAT_00ecc4a0, &DAT_00ecc480, param_1 + 0x24);
        }
        else
        {
            FUN_00493b80(*(undefined_32 *)(DAT_00df7f2c + 0x48), &DAT_00ecc4a0, &DAT_00ecc480, param_1 + 0x24);
        }
        if (2 < DAT_00ecc480)
        {
            pfVar1 = (float *)(puVar4 + 9);
            *pfVar1 = *(float *)(param_1 + 0x2c);
            puVar4[10] = *(uint *)(param_1 + 0x30);
            puVar4[0xb] = *(uint *)(param_1 + 0x34);
            puVar4[0xc] = *(uint *)(param_1 + 0x38);
            if (puVar4[1] == 2)
            {
                if (param_2 == 0)
                {
                    uVar5 = *(undefined_32 *)(DAT_00df7f2c + 0x870);
                    uVar6 = *(undefined_32 *)(DAT_00df7ce8 + 0x4c);
                    pfVar11 = (float *)(param_1 + 0x3c);
                    uVar10 = *(undefined_32 *)(DAT_00df7f2c + 0x6c);
                }
                else
                {
                    local_1c = -*(float *)(param_1 + 0x3c);
                    local_18 = -*(float *)(param_1 + 0x40);
                    local_14 = -*(float *)(param_1 + 0x44);
                    uVar5 = *(undefined_32 *)(DAT_00df7f2c + 0x870);
                    uVar6 = *(undefined_32 *)(DAT_00df7ce8 + 0x4c);
                    pfVar11 = &local_1c;
                    uVar10 = *(undefined_32 *)(DAT_00df7f2c + 0x6c);
                }
                FUN_00490750(DAT_00df7f2c + 0x70, &DAT_00deb6e8, uVar10, param_1, pfVar11, uVar6, uVar5, &local_10);
                *pfVar1 = local_10 + *pfVar1;
                puVar4[10] = (uint)(local_c + (float)puVar4[10]);
                puVar4[0xb] = (uint)(local_8 + (float)puVar4[0xb]);
                puVar4[0xc] = (uint)(local_4 + (float)puVar4[0xc]);
            }
            (**(code **)(DAT_00df7f2c + 0x50))(DAT_00ecc49c, DAT_00ecc48c, DAT_00ecc480);
            if ((DAT_00ecc438 & 2) != 0)
            {
                *pfVar1 = *(float *)(DAT_00df7f2c + 0x5c) + *pfVar1;
                puVar4[10] = (uint)(*(float *)(DAT_00df7f2c + 0x60) + (float)puVar4[10]);
                puVar4[0xb] = (uint)(*(float *)(DAT_00df7f2c + 100) + (float)puVar4[0xb]);
                puVar4[0xc] = (uint)(*(float *)(DAT_00df7f2c + 0x68) + (float)puVar4[0xc]);
            }
            if (*(int *)(param_3 + 0xc) != 1.0f)
            {
                uVar7 = 0;
                puVar4[0xc] = (uint)((float)puVar4[0xc] * *(float *)(param_3 + 0xc) * 0.5);
                if (DAT_00ecc480 != 0)
                {
                    iVar9 = 0;
                    do
                    {
                        uVar7 = uVar7 + 1;
                        iVar2 = iVar9 + 0xc;
                        iVar3 = iVar9 + 0xc;
                        iVar9 = iVar9 + 0x10;
                        *(float *)(iVar3 + puVar4[6]) = *(float *)(iVar2 + puVar4[6]) * *(float *)(param_3 + 0xc) * 0.5;
                    } while (uVar7 < DAT_00ecc480);
                }
            }
            puVar4[8] = *(uint *)(param_1 + 0x20);
            uVar7 = 3;
            if (2 < (int)puVar4[1])
            {
                uVar7 = 7;
            }
            uVar8 = *(uint *)(param_1 + 4);
            *puVar4 = uVar8;
            *puVar4 = DAT_00df7f18 | uVar8;
            if ((*(uint *)(param_1 + 4) & 0x400) != 0)
            {
                uVar5 = *(undefined_32 *)(*(int *)(DAT_00df7f2c + 0x48) + 4);
                uVar8 = 0;
                if (DAT_00ecc480 != 0)
                {
                    iVar9 = 0;
                    do
                    {
                        uVar8 = uVar8 + 1;
                        *(undefined_32 *)(iVar9 + 8 + puVar4[4]) = uVar5;
                        iVar9 = iVar9 + 0xc;
                    } while (uVar8 < DAT_00ecc480);
                }
            }
            if (*(int *)(param_3 + 0xc) != 1.0f)
            {
                *puVar4 = *puVar4 | 2;
            }
            puVar4[7] = *(uint *)(param_1 + 0x1c);
            puVar4[0xe] = param_4;
            puVar4[0xf] = param_5;
            if (*(int *)(*(int *)(*(int *)(DAT_00df7f2c + 4) + 4) + 0x24) != 8)
            {
                DAT_00ecc470 = DAT_00ecc470 + 1;
                FUN_0048de10(DAT_00ecc480, uVar7 | 4);
                return 1;
            }
            uVar7 = 0;
            if (DAT_00ecc480 != 0)
            {
                do
                {
                    iVar9 = DAT_00df7f2c;
                    if (uVar7 < DAT_00ecc480 - 1)
                    {
                        uVar5 = __ftol(0, -1);
                        uVar5 = __ftol(uVar5);
                        uVar5 = __ftol(uVar5);
                        uVar6 = __ftol(uVar5);
                        uVar5 = *(undefined_32 *)(iVar9 + 4);
                    }
                    else
                    {
                        uVar5 = __ftol(0, -1);
                        uVar5 = __ftol(uVar5);
                        uVar5 = __ftol(uVar5);
                        uVar6 = __ftol(uVar5);
                        uVar5 = *(undefined_32 *)(iVar9 + 4);
                    }
                    FUN_0049e10(uVar5, uVar6);
                    uVar7 = uVar7 + 1;
                } while (uVar7 < DAT_00ecc480);
                return 0;
            }
        }
    }
    return 0;
}

void FUN_0048fab0(int param_1)

{
    if (param_1 == 0)
    {
        DAT_00df7f18 = param_1;
        return;
    }
    DAT_00df7f18 = (-(uint)(param_1 != 1) & 0xffffff00) + 0x200;
    return;
}

uint FUN_0048fad0(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                  undefined_32 param_5)

{
    uint uVar1;
    int iVar2;

    uVar1 = (**(code **)(DAT_00ecc428 + 0x20))(0x878);
    if (uVar1 == 0)
    {
        return 0;
    }
    iVar2 = FUN_0048fb20(uVar1, param_1, param_2, param_3, param_4, param_5);
    return -(uint)(iVar2 != 0) & uVar1;
}

undefined_32 FUN_0048fb20(int param_1, float param_2, undefined_32 param_3, undefined_32 param_4, undefined_32 param_5,
                          undefined_32 param_6)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = (undefined_32 *)(**(code **)(DAT_00ecc428 + 0x20))(100);
    *(undefined_32 **)(param_1 + 0x48) = puVar2;
    if (puVar2 != NULL)
    {
        if (param_2 < 5.0)
        {
            param_2 = 5.0;
        }
        else if (179.0 < param_2)
        {
            param_2 = 179.0;
        }
        *(float *)(param_1 + 0x38) = param_2;
        *puVar2 = param_3;
        *(undefined_32 *)(*(int *)(param_1 + 0x48) + 4) = param_4;
        *(undefined_32 *)(*(int *)(param_1 + 0x48) + 8) = param_5;
        *(undefined_32 *)(param_1 + 0x40) = param_6;
        iVar1 = *(int *)(param_1 + 0x48);
        *(undefined_32 *)(param_1 + 0x44) = 1.0f;
        *(undefined_32 *)(param_1 + 4) = 0;
        *(undefined_32 *)(param_1 + 0x6c) = 0;
        *(undefined_32 *)(param_1 + 0x870) = 0.2f;
        *(undefined_32 *)(param_1 + 0x874) = 0.1f;
        *(undefined_32 *)(iVar1 + 0x34) = 0;
        *(undefined_32 *)(iVar1 + 0x38) = 0;
        *(undefined_32 *)(iVar1 + 0x3c) = 0;
        iVar1 = *(int *)(param_1 + 0x48);
        *(undefined_32 *)(iVar1 + 0x40) = 0;
        *(undefined_32 *)(iVar1 + 0x44) = 0;
        *(undefined_32 *)(iVar1 + 0x48) = 0;
        iVar1 = *(int *)(param_1 + 0x48);
        *(undefined_32 *)(iVar1 + 0x4c) = 0;
        *(undefined_32 *)(iVar1 + 0x50) = 0;
        *(undefined_32 *)(iVar1 + 0x54) = 0;
        iVar1 = *(int *)(param_1 + 0x48);
        *(undefined_32 *)(iVar1 + 0x58) = 0;
        *(undefined_32 *)(iVar1 + 0x5c) = 0;
        *(undefined_32 *)(iVar1 + 0x60) = 0;
        FUN_0048fc90(param_1, 1);
        return 1;
    }
    return 0;
}

void FUN_0048fc10(int param_1)

{
    if (param_1 != 0)
    {
        FUN_0048fc30(param_1);
        (**(code **)(DAT_00ecc428 + 0x24))(param_1);
    }
    return;
}

void FUN_0048fc30(int param_1)

{
    if (*(int *)(param_1 + 0x48) != 0)
    {
        (**(code **)(DAT_00ecc428 + 0x24))(*(int *)(param_1 + 0x48));
    }
    return;
}

undefined_32 FUN_0048fc50(int param_1, undefined_32 param_2)

{
    *(undefined_32 *)(param_1 + 4) = param_2;
    FUN_0048fdc0(param_1);
    return 1;
}

undefined_32 FUN_0048fc70(int param_1)

{
    if (DAT_00df7f2c != param_1)
    {
        DAT_00df7f2c = param_1;
    }
    return 1;
}

// rdCamera_SetProjectType
undefined_32 FUN_0048fc90(int *param_1, int param_2)

{
    *param_1 = param_2;
    if (param_2 == 0)
    {
        if (param_1[0x10] == 1.0f)
        {
            param_1[0x13] = (int)&LAB_00490160;
            param_1[0x14] = (int)&LAB_004901a0;
        }
        else
        {
            param_1[0x13] = (int)&LAB_004900a0;
            param_1[0x14] = (int)&LAB_004900e0;
        }
    }
    else if (param_2 == 1)
    {
        if (param_1[0x10] == 1.0f)
        {
            param_1[0x13] = (int)&LAB_004902d0;
            param_1[0x14] = (int)&LAB_00490310;
        }
        else
        {
            param_1[0x13] = (int)&LAB_00490210;
            param_1[0x14] = (int)&LAB_00490250;
        }
    }
    if (param_1[1] != 0)
    {
        FUN_0048fdc0(param_1);
    }
    return 1;
}

undefined_32 FUN_0048fd10(int *param_1, float param_2)

{
    param_1[0x10] = (int)param_2;
    if (*param_1 == 0)
    {
        if (param_2 == 1.0)
        {
            param_1[0x13] = (int)&LAB_00490160;
            param_1[0x14] = (int)&LAB_004901a0;
            FUN_0048fdc0(param_1);
            return 1;
        }
        param_1[0x13] = (int)&LAB_004900a0;
        param_1[0x14] = (int)&LAB_004900e0;
    }
    else if (*param_1 == 1)
    {
        if (param_2 == 1.0)
        {
            param_1[0x13] = (int)&LAB_004902d0;
            param_1[0x14] = (int)&LAB_00490310;
            FUN_0048fdc0(param_1);
            return 1;
        }
        param_1[0x13] = (int)&LAB_00490210;
        param_1[0x14] = (int)&LAB_00490250;
        FUN_0048fdc0(param_1);
        return 1;
    }
    FUN_0048fdc0(param_1);
    return 1;
}

// rdCamera_BuildFOV
undefined_32 FUN_0048fdc0(int *param_1)

{
    int iVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float10 fVar6;

    iVar1 = param_1[1];
    if (iVar1 == 0)
    {
        return 0;
    }
    if (*param_1 == 0)
    {
        fVar2 = (float)(*(int *)(iVar1 + 0x18) - *(int *)(iVar1 + 0x10)) * 0.5;
        fVar3 = (float)(*(int *)(iVar1 + 0x1c) - *(int *)(iVar1 + 0x14)) * 0.5;
        *(float *)(param_1[0x12] + 0xc) = -(fVar2 / (float)param_1[0x11]);
        *(float *)(param_1[0x12] + 0x10) = (fVar3 / (float)param_1[0x11]) / (float)param_1[0x10];
        *(float *)(param_1[0x12] + 0x14) = fVar2 / (float)param_1[0x11];
        *(float *)(param_1[0x12] + 0x18) = -(fVar3 / (float)param_1[0x11]) / (float)param_1[0x10];
        param_1[0xf] = 0;
        *(undefined_32 *)(param_1[0x12] + 0x1c) = 0;
        *(undefined_32 *)(param_1[0x12] + 0x20) = 0;
        *(undefined_32 *)(param_1[0x12] + 0x24) = 0;
        *(undefined_32 *)(param_1[0x12] + 0x28) = 0;
    }
    else if (*param_1 == 1)
    {
        fVar2 = (float)(*(int *)(iVar1 + 0x18) - *(int *)(iVar1 + 0x10)) * 0.5;
        fVar3 = (float)(*(int *)(iVar1 + 0x1c) - *(int *)(iVar1 + 0x14)) * 0.5;
        // stdMath_tan
        fVar6 = (float10)stdMath_unk((float)param_1[0xe] * 0.5);
        fVar4 = fVar2 / (float)fVar6;
        iVar1 = param_1[0x12];
        param_1[0xf] = (int)fVar4;
        fVar5 = fVar4 / *(float *)(iVar1 + 4);
        param_1[0x15] = (int)fVar5;
        param_1[0x16] = (int)(1.0 / (fVar4 / *(float *)(iVar1 + 8) - fVar5));
        *(float *)(iVar1 + 0x1c) = (float)param_1[0x10] / (fVar3 / fVar4);
        *(float *)(param_1[0x12] + 0x24) = -fVar2 / (float)param_1[0xf];
        *(float *)(param_1[0x12] + 0x20) = (-fVar3 / (float)param_1[0xf]) / (float)param_1[0x10];
        *(float *)(param_1[0x12] + 0x28) = fVar2 / (float)param_1[0xf];
        *(float *)(param_1[0x12] + 0x2c) = ((fVar3 - -1.0) / (float)param_1[0xf]) / (float)param_1[0x10];
        *(float *)(param_1[0x12] + 0x30) = -(fVar2 - -1.0) / (float)param_1[0xf];

        FUN_0048ffc0(param_1, param_1[0x12], fVar2 + fVar2, fVar3 + fVar3);
        return 1;
    }
    return 1;
}

undefined_32 FUN_0048ffc0(int param_1, int param_2, float param_3, float param_4)

{
    float *pfVar1;
    float *pfVar2;

    pfVar1 = (float *)(param_2 + 0x34);
    *pfVar1 = -*(float *)(param_1 + 0x3c);
    *(undefined_32 *)(param_2 + 0x3c) = 0;
    *(float *)(param_2 + 0x38) = -(param_3 * 0.5);
    rdVector_Normalize3(pfVar1);
    pfVar2 = (float *)(param_2 + 0x40);
    *pfVar2 = *pfVar1;
    *(undefined_32 *)(param_2 + 0x4c) = 0;
    *(undefined_32 *)(param_2 + 0x44) = *(undefined_32 *)(param_2 + 0x38);
    *(undefined_32 *)(param_2 + 0x48) = *(undefined_32 *)(param_2 + 0x3c);
    *pfVar2 = -*pfVar2;
    *(float *)(param_2 + 0x50) = -(param_4 * 0.5);
    *(undefined_32 *)(param_2 + 0x54) = *(undefined_32 *)(param_1 + 0x3c);
    rdVector_Normalize3((undefined_32 *)(param_2 + 0x4c));
    *(undefined_32 *)(param_2 + 0x58) = *(undefined_32 *)(param_2 + 0x4c);
    *(undefined_32 *)(param_2 + 0x5c) = *(undefined_32 *)(param_2 + 0x50);
    *(undefined_32 *)(param_2 + 0x60) = *(undefined_32 *)(param_2 + 0x54);
    *(float *)(param_2 + 0x60) = -*(float *)(param_2 + 0x60);
    return 1;
}

// Utility-functions.c
//----- (00490060) --------------------------------------------------------
// a1 = 12 component matrix
void rdCamera_Update(undefined_32 *param_1)

{
    int iVar1;
    undefined_32 *puVar2;

    rdMatrix_InvertOrtho34(DAT_00df7f2c + 8, param_1);
    puVar2 = &DAT_00ecc440;
    QMEMCPY(iVar1, param_1, puVar2, 0xc)
    rdMatrix_ExtractAngles34(&DAT_00ecc440, &DAT_00df7f20);
    return;
}

// Not decompiled
void LAB_004900a0(float *param_1, float *param_2)

{
    int iVar1;

    iVar1 = *(int *)(DAT_00df7f2c + 4);
    *param_1 = *(float *)(DAT_00df7f2c + 0x44) * *param_2 + *(float *)(iVar1 + 8);
    param_1[1] =
        -(param_2[2] * *(float *)(DAT_00df7f2c + 0x44)) * *(float *)(DAT_00df7f2c + 0x40) + *(float *)(iVar1 + 0xc);
    param_1[2] = param_2[1];
    return;
}

// Not decompiled
void LAB_004900e0(float *param_1, float *param_2, int param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;

    fVar3 = *(float *)(DAT_00df7f2c + 0x44);
    fVar1 = *(float *)(DAT_00df7f2c + 0x40);
    fVar2 = *(float *)(*(int *)(DAT_00df7f2c + 4) + 0xc);
    fVar4 = *(float *)(*(int *)(DAT_00df7f2c + 4) + 8);
    if (param_3 != 0)
    {
        do
        {
            param_3 = param_3 + -1;
            *param_1 = fVar3 * *param_2 + fVar4;
            param_1[1] = fVar2 - param_2[2] * fVar1 * fVar3;
            param_1[2] = param_2[1];
            param_2 = param_2 + 3;
            param_1 = param_1 + 3;
        } while (param_3 != 0);
    }
    return;
}

// not decompiled
void LAB_00490160(float *param_1, float *param_2)

{
    int iVar1;

    iVar1 = *(int *)(DAT_00df7f2c + 4);
    *param_1 = *(float *)(DAT_00df7f2c + 0x44) * *param_2 + *(float *)(iVar1 + 8);
    param_1[1] = *(float *)(iVar1 + 0xc) - param_2[2] * *(float *)(DAT_00df7f2c + 0x44);
    param_1[2] = param_2[1];
    return;
}

// Not decompiled
void LAB_004901a0(float *param_1, float *param_2, int param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;

    fVar1 = *(float *)(DAT_00df7f2c + 0x44);
    fVar2 = *(float *)(*(int *)(DAT_00df7f2c + 4) + 8);
    fVar3 = *(float *)(*(int *)(DAT_00df7f2c + 4) + 0xc);
    if (param_3 != 0)
    {
        do
        {
            param_3 = param_3 + -1;
            *param_1 = fVar1 * *param_2 + fVar2;
            param_1[1] = fVar3 - param_2[2] * fVar1;
            param_1[2] = param_2[1];
            param_2 = param_2 + 3;
            param_1 = param_1 + 3;
        } while (param_3 != 0);
    }
    return;
}

// Not decompiled
void LAB_00490210(float *param_1, float *param_2)

{
    float fVar1;
    int iVar2;
    float fVar3;

    fVar3 = *(float *)(DAT_00df7f2c + 0x3c) / param_2[1];
    iVar2 = *(int *)(DAT_00df7f2c + 4);
    fVar1 = *(float *)(DAT_00df7f2c + 0x40);
    *param_1 = fVar3 * *param_2 + *(float *)(iVar2 + 8);
    param_1[1] = *(float *)(iVar2 + 0xc) - param_2[2] * fVar1 * fVar3;
    param_1[2] = param_2[1];
    return;
}

// Not decompiled
void LAB_00490250(float *param_1, float *param_2, int param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;

    fVar2 = *(float *)(*(int *)(DAT_00df7f2c + 4) + 8);
    fVar3 = *(float *)(*(int *)(DAT_00df7f2c + 4) + 0xc);
    if (param_3 != 0)
    {
        do
        {
            fVar4 = *(float *)(DAT_00df7f2c + 0x3c) / param_2[1];
            fVar1 = *(float *)(DAT_00df7f2c + 0x40);
            param_3 = param_3 + -1;
            *param_1 = *param_2 * fVar4 + fVar2;
            param_1[1] = fVar3 - param_2[2] * fVar1 * fVar4;
            param_1[2] = param_2[1];
            param_2 = param_2 + 3;
            param_1 = param_1 + 3;
        } while (param_3 != 0);
    }
    return;
}

// Not decompiled
void LAB_004902d0(float *param_1, float *param_2)

{
    int iVar1;
    float fVar2;

    iVar1 = *(int *)(DAT_00df7f2c + 4);
    fVar2 = (1.0 / param_2[1]) * *(float *)(DAT_00df7f2c + 0x3c);
    *param_1 = *param_2 * fVar2 + *(float *)(iVar1 + 8);
    param_1[1] = *(float *)(iVar1 + 0xc) - param_2[2] * fVar2;
    param_1[2] = param_2[1];
    return;
}

// Not Decompiled
void LAB_00490310(float *param_1, float *param_2, int param_3)

{
    float *pfVar1;
    float *pfVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;

    fVar3 = *(float *)(*(int *)(DAT_00df7f2c + 4) + 8);
    fVar4 = *(float *)(*(int *)(DAT_00df7f2c + 4) + 0xc);
    if (param_3 != 0)
    {
        do
        {
            pfVar1 = param_2 + 1;
            fVar5 = *(float *)(DAT_00df7f2c + 0x3c) / *pfVar1;
            fVar6 = *param_2 * fVar5;
            if (_DAT_00ecc434 == 1)
            {
                fVar6 = (float)_DAT_00ecc42c - (fVar6 + fVar3);
            }
            else
            {
                fVar6 = fVar6 + fVar3;
            }
            *param_1 = fVar6;
            pfVar2 = param_2 + 2;
            param_2 = param_2 + 3;
            param_3 = param_3 + -1;
            param_1[1] = fVar4 - *pfVar2 * fVar5;
            param_1[2] = *pfVar1;
            param_1 = param_1 + 3;
        } while (param_3 != 0);
    }
    return;
}

void FUN_004903a0(int param_1, undefined_32 *param_2)

{
    *(undefined_32 *)(param_1 + 0x5c) = *param_2;
    *(undefined_32 *)(param_1 + 0x60) = param_2[1];
    *(undefined_32 *)(param_1 + 100) = param_2[2];
    *(undefined_32 *)(param_1 + 0x68) = param_2[3];
    return;
}

void FUN_004903d0(int param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;
    uint uVar2;
    int *piVar3;

    *(undefined_32 *)(param_1 + 0x870) = param_2;
    uVar2 = 0;
    *(undefined_32 *)(param_1 + 0x874) = param_3;
    if (*(int *)(param_1 + 0x6c) != 0)
    {
        piVar3 = (int *)(param_1 + 0x70);
        do
        {
            iVar1 = *piVar3;
            if (*(float *)(iVar1 + 0x28) == 0.0)
            {
                *(float *)(iVar1 + 0x28) = *(float *)(param_1 + 0x870) * 40.0;
            }
            if (*(float *)(iVar1 + 0x2c) == 0.0)
            {
                *(float *)(iVar1 + 0x2c) = *(float *)(param_1 + 0x874) * 50.0;
            }
            uVar2 = uVar2 + 1;
            piVar3 = piVar3 + 1;
        } while (uVar2 < *(uint *)(param_1 + 0x6c));
    }
    return;
}

undefined_32 FUN_00490450(int param_1, uint *param_2, undefined_32 *param_3)

{
    undefined_32 *puVar1;
    float10 fVar2;

    if (0x80 < *(uint *)(param_1 + 0x6c))
    {
        return 0;
    }
    *param_2 = *(uint *)(param_1 + 0x6c);
    *(uint **)(param_1 + 0x70 + *(int *)(param_1 + 0x6c) * 4) = param_2;
    puVar1 = (undefined_32 *)(param_1 + (*(int *)(param_1 + 0x6c) + 0x34) * 0xc);
    *puVar1 = *param_3;
    puVar1[1] = param_3[1];
    puVar1[2] = param_3[2];
    if ((float)param_2[10] == 0.0)
    {
        fVar2 = (float10)FUN_00490930(param_2 + 6);
        param_2[10] = (uint)(float)(fVar2 / (float10) * (float *)(param_1 + 0x870));
    }
    if ((float)param_2[0xb] == 0.0)
    {
        fVar2 = (float10)FUN_00490930(param_2 + 6);
        param_2[0xb] = (uint)(float)(fVar2 / (float10) * (float *)(param_1 + 0x874));
    }
    *(int *)(param_1 + 0x6c) = *(int *)(param_1 + 0x6c) + 1;
    return 1;
}

undefined_32 FUN_004904f0(int param_1)

{
    *(undefined_32 *)(param_1 + 0x6c) = 0;
    return 1;
}

undefined_32 FUN_00490510(int param_1)

{
    *(undefined_32 *)(param_1 + 4) = 2;
    *(undefined_32 *)(param_1 + 8) = 1;
    *(undefined_32 *)(param_1 + 0xc) = 0;
    *(undefined_32 *)(param_1 + 0x10) = 0;
    *(undefined_32 *)(param_1 + 0x14) = 0;
    *(undefined_32 *)(param_1 + 0x18) = 1.0f;
    *(undefined_32 *)(param_1 + 0x1c) = 1.0f;
    *(undefined_32 *)(param_1 + 0x20) = 1.0f;
    *(undefined_32 *)(param_1 + 0x24) = 0;
    *(undefined_32 *)(param_1 + 0x28) = 0;
    *(undefined_32 *)(param_1 + 0x2c) = 0;
    return 1;
}

//----- (00490550) --------------------------------------------------------
// a1 = pointer to elements
// a2 = n x 3 component vectors
// a3 = n
// a4 = m x 3 component vectors
// a5 = # x 3 component vectors
// a6 = # x 4x4 matrices
// a7 = # x 4 component vectors
// a8 = number of elements in a1
// a9 = some vector scale factor
// Probably returns void, if not: needs work
void FUN_00490550(int param_1, int param_2, int param_3, int param_4, int *param_5, int param_6, int param_7,
                  int param_8, float param_9)

{
    float fVar1;
    float fVar2;
    int iVar3;
    float *pfVar4;
    float *pfVar5;
    float *pfVar6;
    int iVar7;
    float *pfVar8;
    float *pfVar9;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    int local_14;
    int local_10;
    int local_c;
    float *local_8;

    iVar3 = param_8 + -1;
    if (-1 < iVar3)
    {
        pfVar9 = (float *)(iVar3 * 0x10 + param_7);
        local_8 = (float *)((int)param_5 + iVar3 * 0xc);
        iVar7 = (int)param_5 - param_4;
        pfVar6 = (float *)(param_4 + 8 + iVar3 * 0xc);
        local_14 = param_8;
        local_10 = iVar7;
        do
        {
            iVar3 = 0x5c;
            pfVar8 = pfVar9;
            do
            {
                iVar3 = iVar3 + 4;
                *pfVar8 = *(float *)(DAT_00df7f2c + -4 + iVar3);
                pfVar8 = pfVar8 + 1;
            } while (iVar3 < 0x68);
            pfVar9[3] = 1.0;
            iVar3 = param_3 + -1;
            if (-1 < iVar3)
            {
                param_5 = (int *)(param_1 + iVar3 * 4);
                pfVar8 = (float *)(param_2 + 8 + iVar3 * 0xc);
                local_c = param_3;
                do
                {
                    iVar3 = *param_5;
                    if (*(int *)(iVar3 + 4) == 0)
                    {
                        fVar2 = *pfVar6 * *pfVar8 + pfVar6[-1] * pfVar8[-1] + pfVar6[-2] * pfVar8[-2];
                        if (0.0 < fVar2)
                        {
                            pfVar5 = (float *)(iVar3 + 0x18);
                            iVar3 = 3;
                            pfVar4 = pfVar9;
                            do
                            {
                                fVar1 = *pfVar5;
                                pfVar5 = pfVar5 + 1;
                                iVar3 = iVar3 + -1;
                                *pfVar4 = fVar1 * fVar2 + *pfVar4;
                                pfVar4 = pfVar4 + 1;
                            } while (iVar3 != 0);
                        }
                    }
                    else if (*(int *)(iVar3 + 4) == 1)
                    {
                        local_24 = pfVar8[-2] - *local_8;
                        local_20 = pfVar8[-1] - *(float *)(iVar7 + -4 + (int)pfVar6);
                        local_1c = *pfVar8 - *(float *)(iVar7 + (int)pfVar6);
                        fVar2 = SQRT(local_1c * local_1c + local_20 * local_20 + local_24 * local_24);
                        if (fVar2 < *(float *)(iVar3 + 0x28))
                        {
                            local_18 = fVar2;
                            rdVector_Normalize3(&local_24);
                            fVar1 = *pfVar6 * local_1c + pfVar6[-1] * local_20 + pfVar6[-2] * local_24;
                            if (0.0 < fVar1)
                            {
                                fVar2 = fVar2 * param_9;
                                *pfVar9 = (*(float *)(iVar3 + 0x18) - fVar2) * fVar1 + *pfVar9;
                                pfVar9[1] = (*(float *)(iVar3 + 0x1c) - fVar2) * fVar1 + pfVar9[1];
                                pfVar9[2] = (*(float *)(iVar3 + 0x20) - fVar2) * fVar1 + pfVar9[2];
                            }
                        }
                    }
                    iVar3 = 4;
                    pfVar5 = pfVar9;
                    do
                    {
                        iVar3 = iVar3 + -1;
                        *pfVar5 = *(float *)((param_6 - param_7) + (int)pfVar5) * *pfVar5;
                        pfVar5 = pfVar5 + 1;
                    } while (iVar3 != 0);
                    param_5 = param_5 + -1;
                    pfVar8 = pfVar8 + -3;
                    local_c = local_c + -1;
                    iVar7 = local_10;
                } while (local_c != 0);
            }
            pfVar6 = pfVar6 + -3;
            local_8 = local_8 + -3;
            pfVar9 = pfVar9 + -4;
            local_14 = local_14 + -1;
        } while (local_14 != 0);
    }
    return;
}

void FUN_00490750(int *param_1, float *param_2, int param_3, int param_4, float *param_5, int param_6, float param_7,
                  float *param_8)

{
    int iVar1;
    int *piVar2;
    float fVar3;
    float fVar4;
    float *pfVar5;
    float10 fVar6;
    float local_c;
    float local_8;
    float local_4;

    pfVar5 = param_8;
    *param_8 = 0.0;
    param_8[1] = 0.0;
    param_8[2] = 0.0;
    param_8[3] = 0.0;
    if (param_3 != 0)
    {
        param_8 = (float *)param_1;
        do
        {
            iVar1 = (int)*param_8;
            if (*(int *)(iVar1 + 8) != 0)
            {
                if (*(int *)(iVar1 + 4) == 0)
                {
                    local_c = *param_2;
                    local_8 = param_2[1];
                    local_4 = param_2[2];
                    rdVector_Normalize3(&local_c);
                    fVar3 = local_c * *param_5 + param_5[2] * local_4 + param_5[1] * local_8;
                    if (0.0 < fVar3)
                    {
                        *pfVar5 = *(float *)(iVar1 + 0x18) * fVar3 + *pfVar5;
                        pfVar5[1] = *(float *)(iVar1 + 0x1c) * fVar3 + pfVar5[1];
                        pfVar5[2] = *(float *)(iVar1 + 0x20) * fVar3 + pfVar5[2];
                    }
                }
                else if (*(int *)(iVar1 + 4) == 1)
                {
                    piVar2 = *(int **)(param_4 + 0x14);
                    local_c = *param_2 - *(float *)(param_6 + *piVar2 * 0xc);
                    local_8 = param_2[1] - *(float *)(param_6 + 4 + *piVar2 * 0xc);
                    local_4 = param_2[2] - *(float *)(param_6 + 8 + *piVar2 * 0xc);
                    fVar6 = (float10)vec3f_sub_multiply(param_2, param_5, param_6 + *piVar2 * 0xc);
                    if (fVar6 < (float10) * (float *)(iVar1 + 0x28))
                    {
                        rdVector_Normalize3(&local_c);
                        fVar3 = local_c * *param_5 + param_5[2] * local_4 + param_5[1] * local_8;
                        if (0.0 < fVar3)
                        {
                            fVar4 = (float)fVar6 * param_7;
                            *pfVar5 = (*(float *)(iVar1 + 0x18) - fVar4) * fVar3 + *pfVar5;
                            pfVar5[1] = (*(float *)(iVar1 + 0x1c) - fVar4) * fVar3 + pfVar5[1];
                            pfVar5[2] = (*(float *)(iVar1 + 0x20) - fVar4) * fVar3 + pfVar5[2];
                        }
                    }
                }
            }
            param_8 = param_8 + 1;
            param_2 = param_2 + 3;
            param_3 = param_3 + -1;
        } while (param_3 != 0);
    }
    return;
}

float10 FUN_00490930(float *param_1)

{
    return ((float10)param_1[1] + (float10)param_1[2] + (float10)*param_1) * (float10)0.3333333;
}

undefined_32 FUN_00490950(undefined_32 param_1)

{
    int iVar1;

    if (DAT_00df7f30 != 0)
    {
        return 1;
    }
    DAT_00ecc428 = param_1;
    FUN_0048db40();
    iVar1 = FUN_00493df0();
    if (iVar1 != 0)
    {
        return 0;
    }
    DAT_00df7f30 = 1;
    return 1;
}

void FUN_00490990(void)

{
    if (DAT_00df7f30 == 1)
    {
        FUN_00493e10();
        DAT_00df7f30 = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_004909b0(void)

{
    int iVar1;

    if (DAT_00df7f30 == 0)
    {
        return 0;
    }
    if (DAT_00df7f34 != 0)
    {
        return 1;
    }
    iVar1 = FUN_00493e40();
    if (iVar1 != 0)
    {
        return 0;
    }
    DAT_00ecc430 = 4;
    DAT_00ecc424 = 3;
    _DAT_00ecc438 = 1;
    DAT_00df7f34 = 1;
    return 1;
}

void FUN_00490a00(void)

{
    if (DAT_00df7f34 != 0)
    {
        FUN_00493e60();
        DAT_00df7f34 = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_00490a20(undefined_32 param_1)

{
    _DAT_00ecc438 = param_1;
    return;
}

void FUN_00490a30(undefined_32 param_1)

{
    DAT_00ecc430 = param_1;
    return;
}

void FUN_00490a40(undefined_32 param_1)

{
    DAT_00ecc424 = param_1;
    return;
}

int FUN_00490a50(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4,
                 undefined_32 param_5, undefined_32 param_6)

{
    int iVar1;

    iVar1 = (**(code **)(DAT_00ecc428 + 0x20))(0x20);
    if (iVar1 == 0)
    {
        return 0;
    }
    FUN_00490aa0(iVar1, param_1, param_2, param_3, param_4, param_5, param_6);
    return iVar1;
}

undefined_32 FUN_00490aa0(uint *param_1, uint param_2, uint param_3, uint param_4, uint param_5, uint param_6,
                          uint param_7)

{
    *param_1 = param_2;
    param_1[1] = param_3;
    if ((param_2 & 1) == 0)
    {
        param_1[4] = 0;
        param_1[5] = 0;
        param_1[6] = *(int *)(param_3 + 0xc) - 1;
        param_1[7] = *(int *)(param_3 + 0x10) - 1;
    }
    else
    {
        param_1[4] = param_4;
        param_1[5] = param_5;
        param_1[6] = param_6;
        param_1[7] = param_7;
    }
    param_1[2] = (uint)((float)param_1[4] + (float)((param_1[6] - param_1[4]) + 1) * 0.5);
    param_1[3] = (uint)((float)param_1[5] + (float)((param_1[7] - param_1[5]) + 1) * 0.5);
    return 1;
}

void FUN_00490b50(int param_1)

{
    if (param_1 != 0)
    {
        FUN_00426910(param_1);
        (**(code **)(DAT_00ecc428 + 0x24))(param_1);
    }
    return;
}

uint FUN_00490b70(undefined_32 param_1)

{
    uint uVar1;
    int iVar2;

    uVar1 = (**(code **)(DAT_00ecc428 + 0x20))(0x40);
    if (uVar1 == 0)
    {
        return 0;
    }
    iVar2 = FUN_00490ba0(uVar1, param_1);
    return -(uint)(iVar2 != 0) & uVar1;
}

undefined_32 FUN_00490ba0(undefined_32 *param_1, undefined_32 param_2)

{
    param_1[1] = 0;
    *param_1 = 0;
    param_1[4] = 0;
    param_1[5] = 0;
    param_1[6] = 0;
    param_1[0xb] = -1;
    param_1[10] = -1;
    param_1[7] = 0;
    param_1[2] = 4;
    param_1[3] = 3;
    param_1[0xc] = 4;
    param_1[0xd] = 3;
    param_1[0xf] = param_2;
    return 1;
}

void FUN_00490bf0(int param_1)

{
    if (param_1 != 0)
    {
        FUN_00490c10(param_1);
        (**(code **)(DAT_00ecc428 + 0x24))(param_1);
    }
    return;
}

void FUN_00490c10(int *param_1)

{
    if (*param_1 == 1)
    {
        if (param_1[7] != 0)
        {
            (**(code **)(DAT_00ecc428 + 0x24))(param_1[7]);
            param_1[7] = 0;
        }
        if (param_1[8] != 0)
        {
            (**(code **)(DAT_00ecc428 + 0x24))(param_1[8]);
            param_1[8] = 0;
        }
        if (param_1[9] != 0)
        {
            (**(code **)(DAT_00ecc428 + 0x24))(param_1[9]);
            param_1[9] = 0;
        }
    }
    if (param_1[4] != 0)
    {
        FUN_00490b50(param_1[4]);
        param_1[4] = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 *FUN_00490c80(undefined_32 *param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    undefined_32 *puVar1;

    _DAT_00ecc434 = param_3;
    _DAT_00ecc42c = param_4;
    if (DAT_00ecc430 != 0)
    {
        switch (*param_1)
        {
        case 0:
        case 2:
        case 3:
            return NULL;
        case 1:
            puVar1 = (undefined_32 *)FUN_0048efe0(param_1, param_2);
            return puVar1;
        case 4:
            puVar1 = (undefined_32 *)FUN_004945e0(param_1, param_2);
            return puVar1;
        case 5:
            puVar1 = (undefined_32 *)FUN_00494330(param_1, param_2);
            return puVar1;
        case 6:
            param_1 = (undefined_32 *)FUN_00493e80(param_1, param_2);
        }
        return param_1;
    }
    return NULL;
}

// 00490d10
void rdThing_AccumulateMatrices(int param_1, int param_2, undefined_32 param_3)

{
    uint uVar1;
    int iVar2;
    float local_3c;
    float local_38;
    float local_34;
    undefined_8 local_30[48];

    rdMatrix_BuildTranslate34(local_30, param_2 + 0x9c);
    rdMatrix_PostMultiply34(local_30, *(int *)(param_2 + 0x80) * 0x30 + *(int *)(param_1 + 0x1c));
    iVar2 = *(int *)(param_2 + 0x8c);
    if (iVar2 != 0)
    {
        local_3c = -*(float *)(iVar2 + 0x9c);
        local_38 = -*(float *)(iVar2 + 0xa0);
        local_34 = -*(float *)(iVar2 + 0xa4);
        rdMatrix_PostTranslate34(local_30, &local_3c);
    }
    rdMatrix_Multiply34(*(int *)(param_2 + 0x80) * 0x30 + *(int *)(param_1 + 0x1c), param_3, local_30);
    if (*(int *)(param_2 + 0x90) != 0)
    {
        iVar2 = *(int *)(param_2 + 0x94);
        uVar1 = 0;
        if (*(int *)(param_2 + 0x90) != 0)
        {
            do
            {
                if (*(int *)(*(int *)(param_1 + 0x24) + *(int *)(iVar2 + 0x80) * 4) == 0)
                {
                    rdThing_AccumulateMatrices(param_1, iVar2,
                                               *(int *)(param_2 + 0x80) * 0x30 + *(int *)(param_1 + 0x1c));
                }
                iVar2 = *(int *)(iVar2 + 0x98);
                uVar1 = uVar1 + 1;
            } while (uVar1 < *(uint *)(param_2 + 0x90));
        }
    }
    return;
}

// 00490e10
// Looks like rdPrimit2_DrawClippedLine but it isn't
undefined_32 FUN_0049e10(int pCanvas, int param_2, int param_3, int param_4, int param_5, undefined_16 param_6,
                         uint param_7)

{
    uint uVar1;
    int *piVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    uint uVar7;
    int iVar8;
    int local_18;
    int local_14;
    uint local_10;

    iVar3 = rdClip_Line2(pCanvas, &param_2, &param_3, &param_4, &param_5);
    if (iVar3 != 0)
    {
        // inlined rdPrimit2_DrawLine ?
        piVar2 = *(int **)(pCanvas + 4);
        if (piVar2[9] == 8)
        {
            local_18 = param_5 - param_3;
            local_14 = param_4 - param_2;
            local_10 = 0x80000000;
            iVar3 = ((local_14 < 1) - 1 & 2) - 1;
            iVar4 = ((local_18 < 1) - 1 & 2) - 1;
            if (iVar3 < 0)
            {
                local_18 = -local_18;
            }
            if (0 < iVar4)
            {
                local_14 = -local_14;
            }
            if ((param_7 & 0x80000000) != 0)
            {
                *(undefined_8 *)(piVar2[6] * param_3 + piVar2[0x16] + param_2) = (undefined_8)param_6;
            }
            uVar7 = 0;
            while ((param_2 != param_4 || (param_3 != param_5)))
            {
                local_10 = local_10 >> 1;
                if (local_10 == 0)
                {
                    local_10 = 0x80000000;
                }
                uVar1 = uVar7 + local_18;
                uVar7 = uVar7 + local_14;
                if ((int)((uVar1 ^ (int)uVar1 >> 0x1f) - ((int)uVar1 >> 0x1f))
                    < (int)((uVar7 ^ (int)uVar7 >> 0x1f) - ((int)uVar7 >> 0x1f)))
                {
                    param_2 = param_2 + iVar3;
                    uVar7 = uVar1;
                }
                else
                {
                    param_3 = param_3 + iVar4;
                }
                if ((param_7 & local_10) != 0)
                {
                    *(undefined_8 *)(*(int *)(*(int *)(pCanvas + 4) + 0x18) * param_3
                                     + *(int *)(*(int *)(pCanvas + 4) + 0x58) + param_2) = (undefined_8)param_6;
                }
            }
        }
        else
        {
            iVar3 = *piVar2;
            if (iVar3 == 1)
            {
                FUN_00488370(piVar2);
            }
            local_18 = param_5 - param_3;
            local_14 = param_4 - param_2;
            local_10 = 0x80000000;
            iVar4 = ((local_14 < 1) - 1 & 2) - 1;
            iVar5 = ((local_18 < 1) - 1 & 2) - 1;
            if (iVar4 < 0)
            {
                local_18 = -local_18;
            }
            if (0 < iVar5)
            {
                local_14 = -local_14;
            }
            if ((param_7 & 0x80000000) != 0)
            {
                *(undefined_16 *)(*(int *)(*(int *)(pCanvas + 4) + 0x58)
                                  + (*(int *)(*(int *)(pCanvas + 4) + 0x1c) * param_3 + param_2) * 2) = param_6;
            }
            uVar7 = 0;
            iVar6 = param_2;
            iVar8 = param_3;
            while ((iVar6 != param_4 || (iVar8 != param_5)))
            {
                local_10 = local_10 >> 1;
                if (local_10 == 0)
                {
                    local_10 = 0x80000000;
                }
                uVar1 = uVar7 + local_18;
                uVar7 = uVar7 + local_14;
                if ((int)((uVar1 ^ (int)uVar1 >> 0x1f) - ((int)uVar1 >> 0x1f))
                    < (int)((uVar7 ^ (int)uVar7 >> 0x1f) - ((int)uVar7 >> 0x1f)))
                {
                    iVar6 = iVar6 + iVar4;
                    uVar7 = uVar1;
                }
                else
                {
                    iVar8 = iVar8 + iVar5;
                }
                if ((param_7 & local_10) != 0)
                {
                    *(undefined_16 *)(*(int *)(*(int *)(pCanvas + 4) + 0x58)
                                      + (*(int *)(*(int *)(pCanvas + 4) + 0x1c) * iVar8 + iVar6) * 2) = param_6;
                }
            }
            if (iVar3 == 1)
            {
                FUN_004883c0(*(undefined_32 *)(pCanvas + 4));
            }
        }
        return 1;
    }
    return 0;
}

void FUN_004910a0(undefined_32 param_1, undefined_32 param_2, uint param_3, uint *param_4, undefined_32 *param_5,
                  float *param_6)

{
    undefined_32 *puVar1;
    float fVar2;
    uint *puVar3;
    int iVar4;
    int iVar5;
    undefined_32 uVar6;
    uint uVar7;
    int iVar8;
    undefined_32 *puVar9;
    undefined_32 *puVar10;
    float *pfVar11;

    puVar1 = param_5;
    puVar3 = param_4;
    switch (param_2)
    {
    case 0:
        uVar7 = 0;
        if (*param_4 != 0)
        {
            iVar5 = 0;
            do
            {
                puVar1 = (undefined_32 *)(param_4[3] + *(int *)(param_4[1] + uVar7 * 4) * 0xc);
                puVar9 = (undefined_32 *)(iVar5 + param_5[3]);
                uVar7 = uVar7 + 1;
                iVar5 = iVar5 + 0xc;
                *puVar9 = *puVar1;
                puVar9[1] = puVar1[1];
                puVar9[2] = puVar1[2];
            } while (uVar7 < *param_4);
        }
        break;
    case 1:
    case 2:
        uVar7 = 0;
        if (*param_4 != 0)
        {
            iVar5 = 0;
            do
            {
                puVar1 = (undefined_32 *)(param_4[3] + *(int *)(param_4[1] + uVar7 * 4) * 0xc);
                puVar9 = (undefined_32 *)(param_5[3] + iVar5);
                uVar7 = uVar7 + 1;
                iVar5 = iVar5 + 0xc;
                *puVar9 = *puVar1;
                puVar9[1] = puVar1[1];
                puVar9[2] = puVar1[2];
            } while (uVar7 < *param_4);
        }
        if (*DAT_00df7f2c == 1)
        {
            uVar6 = FUN_00494c60();
            *param_5 = uVar6;
            return;
        }
        uVar6 = FUN_00495600(param_1, param_5[3], *param_4);
        *param_5 = uVar6;
        return;
    case 3:
        switch (param_3)
        {
        case 0:
        case 1:
            uVar7 = 0;
            if (*param_4 != 0)
            {
                iVar5 = 0;
                do
                {
                    puVar1 = (undefined_32 *)(param_4[3] + *(int *)(param_4[1] + uVar7 * 4) * 0xc);
                    puVar9 = (undefined_32 *)(iVar5 + param_5[3]);
                    uVar7 = uVar7 + 1;
                    iVar5 = iVar5 + 0xc;
                    *puVar9 = *puVar1;
                    puVar9[1] = puVar1[1];
                    puVar9[2] = puVar1[2];
                } while (uVar7 < *param_4);
            }
            break;
        case 2:
            uVar7 = 0;
            if (*param_4 != 0)
            {
                iVar5 = 0;
                do
                {
                    puVar1 = (undefined_32 *)(param_4[3] + *(int *)(param_4[1] + uVar7 * 4) * 0xc);
                    puVar9 = (undefined_32 *)(iVar5 + param_5[3]);
                    uVar7 = uVar7 + 1;
                    iVar5 = iVar5 + 0xc;
                    *puVar9 = *puVar1;
                    puVar9[1] = puVar1[1];
                    puVar9[2] = puVar1[2];
                } while (uVar7 < *param_4);
            }
            break;
        case 3:
            iVar5 = 0;
            if (param_4[6] == 0)
            {
                uVar7 = 0;
                if (*param_4 != 0)
                {
                    param_4 = NULL;
                    do
                    {
                        puVar1 = (undefined_32 *)(puVar3[3] + *(int *)(puVar3[1] + uVar7 * 4) * 0xc);
                        puVar9 = (undefined_32 *)((int)param_4 + param_5[3]);
                        *puVar9 = *puVar1;
                        puVar9[1] = puVar1[1];
                        puVar9[2] = puVar1[2];
                        pfVar11 = (float *)(puVar3[5] + *(int *)(puVar3[1] + uVar7 * 4) * 0x10);
                        if (*pfVar11 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        *(float *)(iVar5 + param_5[5]) = fVar2;
                        iVar4 = *(int *)(puVar3[1] + uVar7 * 4) * 0x10;
                        pfVar11 = (float *)(iVar4 + 4 + puVar3[5]);
                        if (*(float *)(iVar4 + 4 + puVar3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        *(float *)(iVar5 + 4 + param_5[5]) = fVar2;
                        iVar4 = *(int *)(puVar3[1] + uVar7 * 4) * 0x10;
                        pfVar11 = (float *)(iVar4 + 8 + puVar3[5]);
                        if (*(float *)(iVar4 + 8 + puVar3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        *(float *)(iVar5 + 8 + param_5[5]) = fVar2;
                        iVar4 = *(int *)(puVar3[1] + uVar7 * 4) * 0x10;
                        pfVar11 = (float *)(iVar4 + 0xc + puVar3[5]);
                        if (*(float *)(iVar4 + 0xc + puVar3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        uVar7 = uVar7 + 1;
                        param_4 = (uint *)((int)param_4 + 0xc);
                        *(float *)(iVar5 + 0xc + param_5[5]) = fVar2;
                        iVar5 = iVar5 + 0x10;
                    } while (uVar7 < *puVar3);
                }
            }
            else
            {
                uVar7 = 0;
                if (*param_4 != 0)
                {
                    param_4 = NULL;
                    do
                    {
                        puVar1 = (undefined_32 *)(puVar3[3] + *(int *)(puVar3[1] + uVar7 * 4) * 0xc);
                        puVar9 = (undefined_32 *)((int)param_4 + param_5[3]);
                        *puVar9 = *puVar1;
                        puVar9[1] = puVar1[1];
                        puVar9[2] = puVar1[2];
                        fVar2 = *(float *)(*(int *)(puVar3[1] + uVar7 * 4) * 0x10 + puVar3[5])
                            + *(float *)(iVar5 + puVar3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)(param_5[5] + iVar5) = fVar2;
                        fVar2 = *(float *)(*(int *)(puVar3[1] + uVar7 * 4) * 0x10 + 4 + puVar3[5])
                            + *(float *)(iVar5 + 4 + puVar3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)(param_5[5] + 4 + iVar5) = fVar2;
                        fVar2 = *(float *)(*(int *)(puVar3[1] + uVar7 * 4) * 0x10 + 8 + puVar3[5])
                            + *(float *)(iVar5 + 8 + puVar3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)(param_5[5] + 8 + iVar5) = fVar2;
                        iVar4 = *(int *)(puVar3[1] + uVar7 * 4) * 0x10;
                        pfVar11 = (float *)(iVar4 + 0xc + puVar3[5]);
                        if (*(float *)(iVar4 + 0xc + puVar3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        uVar7 = uVar7 + 1;
                        param_4 = (uint *)((int)param_4 + 0xc);
                        *(float *)(param_5[5] + 0xc + iVar5) = fVar2;
                        iVar5 = iVar5 + 0x10;
                    } while (uVar7 < *puVar3);
                }
            }
            if (*DAT_00df7f2c == 1)
            {
                uVar6 = FUN_00496e40(param_1, param_5[3], param_5[5], *puVar3);
                *param_5 = uVar6;
                return;
            }
            uVar6 = FUN_00497da0(param_1, param_5[3], param_5[5], *puVar3);
            *param_5 = uVar6;
            return;
        default:
            goto switchD_004910b1_caseD_5;
        }
        break;
    case 4:
        if (-1 < (int)param_3)
        {
            if ((int)param_3 < 3)
            {
                param_3 = 0;
                if (*param_4 != 0)
                {
                    param_4 = NULL;
                    do
                    {
                        iVar8 = param_3 * 8;
                        puVar1 = (undefined_32 *)(puVar3[3] + *(int *)(puVar3[1] + param_3 * 4) * 0xc);
                        puVar9 = (undefined_32 *)((int)param_4 + param_5[3]);
                        *puVar9 = *puVar1;
                        puVar9[1] = puVar1[1];
                        puVar9[2] = puVar1[2];
                        iVar5 = param_5[4];
                        iVar4 = *(int *)(puVar3[2] + param_3 * 4);
                        uVar7 = puVar3[4];
                        *(undefined_32 *)(iVar5 + iVar8) = *(undefined_32 *)(uVar7 + iVar4 * 8);
                        *(undefined_32 *)(iVar5 + 4 + iVar8) = *(undefined_32 *)(uVar7 + 4 + iVar4 * 8);
                        *(float *)(param_5[4] + iVar8) = *param_6 + *(float *)(param_5[4] + iVar8);
                        param_4 = (uint *)((int)param_4 + 0xc);
                        *(float *)(param_5[4] + 4 + iVar8) = *(float *)(param_5[4] + 4 + iVar8) + param_6[1];
                        param_3 = param_3 + 1;
                    } while (param_3 < *puVar3);
                }
                if (*DAT_00df7f2c == 1)
                {
                    uVar6 = FUN_00498a60(param_1, param_5[3], param_5[4], *puVar3);
                    *param_5 = uVar6;
                    return;
                }
                uVar6 = FUN_00499840(param_1, param_5[3], param_5[4], *puVar3);
                *param_5 = uVar6;
            }
            else if (param_3 == 3)
            {
                param_3 = 0;
                if (param_4[6] == 0)
                {
                    if (*param_4 != 0)
                    {
                        param_5 = NULL;
                        param_4 = NULL;
                        do
                        {
                            puVar9 = (undefined_32 *)(puVar3[3] + *(int *)(puVar3[1] + param_3 * 4) * 0xc);
                            puVar10 = (undefined_32 *)((int)param_4 + puVar1[3]);
                            *puVar10 = *puVar9;
                            puVar10[1] = puVar9[1];
                            puVar10[2] = puVar9[2];
                            iVar4 = puVar1[4];
                            iVar5 = param_3 * 8;
                            iVar8 = *(int *)(puVar3[2] + param_3 * 4);
                            uVar7 = puVar3[4];
                            *(undefined_32 *)(iVar4 + iVar5) = *(undefined_32 *)(uVar7 + iVar8 * 8);
                            *(undefined_32 *)(iVar4 + 4 + iVar5) = *(undefined_32 *)(uVar7 + 4 + iVar8 * 8);
                            *(float *)(puVar1[4] + iVar5) = *param_6 + *(float *)(puVar1[4] + iVar5);
                            *(float *)(puVar1[4] + 4 + iVar5) = *(float *)(puVar1[4] + 4 + iVar5) + param_6[1];
                            pfVar11 = (float *)(puVar3[5] + *(int *)(puVar3[1] + param_3 * 4) * 0x10);
                            if (*pfVar11 < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            *(float *)((int)param_5 + puVar1[5]) = fVar2;
                            iVar5 = *(int *)(puVar3[1] + param_3 * 4) * 0x10;
                            pfVar11 = (float *)(iVar5 + 4 + puVar3[5]);
                            if (*(float *)(iVar5 + 4 + puVar3[5]) < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            *(float *)((int)param_5 + 4 + puVar1[5]) = fVar2;
                            iVar5 = *(int *)(puVar3[1] + param_3 * 4) * 0x10;
                            pfVar11 = (float *)(iVar5 + 8 + puVar3[5]);
                            if (*(float *)(iVar5 + 8 + puVar3[5]) < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            *(float *)((int)param_5 + 8 + puVar1[5]) = fVar2;
                            iVar5 = *(int *)(puVar3[1] + param_3 * 4) * 0x10;
                            pfVar11 = (float *)(iVar5 + 0xc + puVar3[5]);
                            if (*(float *)(iVar5 + 0xc + puVar3[5]) < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            param_3 = param_3 + 1;
                            param_4 = (uint *)((int)param_4 + 0xc);
                            *(float *)((int)param_5 + 0xc + puVar1[5]) = fVar2;
                            param_5 = (undefined_32 *)((int)param_5 + 0x10);
                        } while (param_3 < *puVar3);
                    }
                }
                else if (*param_4 != 0)
                {
                    param_5 = NULL;
                    param_4 = NULL;
                    do
                    {
                        puVar9 = (undefined_32 *)(puVar3[3] + *(int *)(puVar3[1] + param_3 * 4) * 0xc);
                        puVar10 = (undefined_32 *)((int)param_4 + puVar1[3]);
                        *puVar10 = *puVar9;
                        puVar10[1] = puVar9[1];
                        puVar10[2] = puVar9[2];
                        iVar4 = puVar1[4];
                        iVar5 = param_3 * 8;
                        iVar8 = *(int *)(puVar3[2] + param_3 * 4);
                        uVar7 = puVar3[4];
                        *(undefined_32 *)(iVar4 + iVar5) = *(undefined_32 *)(uVar7 + iVar8 * 8);
                        *(undefined_32 *)(iVar4 + 4 + iVar5) = *(undefined_32 *)(uVar7 + 4 + iVar8 * 8);
                        *(float *)(puVar1[4] + iVar5) = *param_6 + *(float *)(puVar1[4] + iVar5);
                        *(float *)(puVar1[4] + 4 + iVar5) = *(float *)(puVar1[4] + 4 + iVar5) + param_6[1];
                        fVar2 = *(float *)(*(int *)(puVar3[1] + param_3 * 4) * 0x10 + puVar3[5])
                            + *(float *)((int)param_5 + puVar3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)((int)param_5 + puVar1[5]) = fVar2;
                        fVar2 = *(float *)(*(int *)(puVar3[1] + param_3 * 4) * 0x10 + 4 + puVar3[5])
                            + *(float *)((int)param_5 + 4 + puVar3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)((int)param_5 + 4 + puVar1[5]) = fVar2;
                        fVar2 = *(float *)(*(int *)(puVar3[1] + param_3 * 4) * 0x10 + 8 + puVar3[5])
                            + *(float *)((int)param_5 + 8 + puVar3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)((int)param_5 + 8 + puVar1[5]) = fVar2;
                        iVar5 = *(int *)(puVar3[1] + param_3 * 4) * 0x10;
                        pfVar11 = (float *)(iVar5 + 0xc + puVar3[5]);
                        if (*(float *)(iVar5 + 0xc + puVar3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        param_3 = param_3 + 1;
                        param_4 = (uint *)((int)param_4 + 0xc);
                        *(float *)((int)param_5 + 0xc + puVar1[5]) = fVar2;
                        param_5 = (undefined_32 *)((int)param_5 + 0x10);
                    } while (param_3 < *puVar3);
                }
                if (*DAT_00df7f2c == 1)
                {
                    uVar6 = FUN_0049a390(param_1, puVar1[3], puVar1[4], puVar1[5], *puVar3);
                    *puVar1 = uVar6;
                    return;
                }
                uVar6 = FUN_0049b7d0(param_1, puVar1[3], puVar1[4], puVar1[5], *puVar3);
                *puVar1 = uVar6;
                return;
            }
        }
    default:
    switchD_004910b1_caseD_5:
        return;
    }
    if (*DAT_00df7f2c == 1)
    {
        uVar6 = FUN_00495d50();
        *param_5 = uVar6;
        return;
    }
    uVar6 = FUN_004966f0(param_1, param_5[3], *param_4);
    *param_5 = uVar6;
    return;
}

void FUN_00491ac0(undefined_32 param_1, int param_2, uint *param_3, uint *param_4, float *param_5)

{
    undefined_32 *puVar1;
    float fVar2;
    uint uVar3;
    uint uVar4;
    uint *puVar5;
    uint *puVar6;
    int iVar7;
    int iVar8;
    uint uVar9;
    undefined_32 *puVar10;
    float *pfVar11;

    puVar6 = param_4;
    puVar5 = param_3;
    switch (param_1)
    {
    case 0:
        uVar9 = 0;
        if (*param_3 != 0)
        {
            iVar8 = 0;
            do
            {
                puVar1 = (undefined_32 *)(param_3[3] + *(int *)(param_3[1] + uVar9 * 4) * 0xc);
                puVar10 = (undefined_32 *)(param_4[3] + iVar8);
                uVar9 = uVar9 + 1;
                iVar8 = iVar8 + 0xc;
                *puVar10 = *puVar1;
                puVar10[1] = puVar1[1];
                puVar10[2] = puVar1[2];
            } while (uVar9 < *param_3);
            *param_4 = *param_3;
            return;
        }
        break;
    case 1:
    case 2:
        uVar9 = 0;
        if (*param_3 != 0)
        {
            iVar8 = 0;
            do
            {
                puVar1 = (undefined_32 *)(param_3[3] + *(int *)(param_3[1] + uVar9 * 4) * 0xc);
                puVar10 = (undefined_32 *)(param_4[3] + iVar8);
                uVar9 = uVar9 + 1;
                iVar8 = iVar8 + 0xc;
                *puVar10 = *puVar1;
                puVar10[1] = puVar1[1];
                puVar10[2] = puVar1[2];
            } while (uVar9 < *param_3);
            *param_4 = *param_3;
            return;
        }
        break;
    case 3:
        switch (param_2)
        {
        case 0:
        case 1:
            uVar9 = 0;
            if (*param_3 != 0)
            {
                iVar8 = 0;
                do
                {
                    puVar1 = (undefined_32 *)(param_3[3] + *(int *)(param_3[1] + uVar9 * 4) * 0xc);
                    puVar10 = (undefined_32 *)(param_4[3] + iVar8);
                    uVar9 = uVar9 + 1;
                    iVar8 = iVar8 + 0xc;
                    *puVar10 = *puVar1;
                    puVar10[1] = puVar1[1];
                    puVar10[2] = puVar1[2];
                } while (uVar9 < *param_3);
                goto LAB_00491bc6;
            }
            break;
        case 2:
            uVar9 = 0;
            if (*param_3 != 0)
            {
                iVar8 = 0;
                do
                {
                    puVar1 = (undefined_32 *)(param_3[3] + *(int *)(param_3[1] + uVar9 * 4) * 0xc);
                    puVar10 = (undefined_32 *)(param_4[3] + iVar8);
                    uVar9 = uVar9 + 1;
                    iVar8 = iVar8 + 0xc;
                    *puVar10 = *puVar1;
                    puVar10[1] = puVar1[1];
                    puVar10[2] = puVar1[2];
                } while (uVar9 < *param_3);
            }
            break;
        case 3:
            uVar9 = 0;
            if (param_3[6] == 0)
            {
                if (*param_3 != 0)
                {
                    iVar8 = 0;
                    param_4 = NULL;
                    do
                    {
                        puVar1 = (undefined_32 *)(param_3[3] + *(int *)(param_3[1] + uVar9 * 4) * 0xc);
                        puVar10 = (undefined_32 *)((int)param_4 + puVar6[3]);
                        *puVar10 = *puVar1;
                        puVar10[1] = puVar1[1];
                        puVar10[2] = puVar1[2];
                        pfVar11 = (float *)(param_3[5] + *(int *)(param_3[1] + uVar9 * 4) * 0x10);
                        if (*pfVar11 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        *(float *)(iVar8 + puVar6[5]) = fVar2;
                        iVar7 = *(int *)(param_3[1] + uVar9 * 4) * 0x10;
                        pfVar11 = (float *)(iVar7 + 4 + param_3[5]);
                        if (*(float *)(iVar7 + 4 + param_3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        *(float *)(iVar8 + 4 + puVar6[5]) = fVar2;
                        iVar7 = *(int *)(param_3[1] + uVar9 * 4) * 0x10;
                        pfVar11 = (float *)(iVar7 + 8 + param_3[5]);
                        if (*(float *)(iVar7 + 8 + param_3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        *(float *)(iVar8 + 8 + puVar6[5]) = fVar2;
                        iVar7 = *(int *)(param_3[1] + uVar9 * 4) * 0x10;
                        pfVar11 = (float *)(iVar7 + 0xc + param_3[5]);
                        if (*(float *)(iVar7 + 0xc + param_3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        uVar9 = uVar9 + 1;
                        param_4 = (uint *)((int)param_4 + 0xc);
                        *(float *)(iVar8 + 0xc + puVar6[5]) = fVar2;
                        iVar8 = iVar8 + 0x10;
                    } while (uVar9 < *param_3);
                    *puVar6 = *param_3;
                    return;
                }
            }
            else
            {
                uVar9 = 0;
                if (*param_3 != 0)
                {
                    iVar8 = 0;
                    param_4 = NULL;
                    do
                    {
                        puVar1 = (undefined_32 *)(param_3[3] + *(int *)(param_3[1] + uVar9 * 4) * 0xc);
                        puVar10 = (undefined_32 *)((int)param_4 + puVar6[3]);
                        *puVar10 = *puVar1;
                        puVar10[1] = puVar1[1];
                        puVar10[2] = puVar1[2];
                        fVar2 = *(float *)(*(int *)(param_3[1] + uVar9 * 4) * 0x10 + param_3[5])
                            + *(float *)(iVar8 + param_3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)(iVar8 + puVar6[5]) = fVar2;
                        fVar2 = *(float *)(*(int *)(param_3[1] + uVar9 * 4) * 0x10 + 4 + param_3[5])
                            + *(float *)(iVar8 + 4 + param_3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)(iVar8 + 4 + puVar6[5]) = fVar2;
                        fVar2 = *(float *)(*(int *)(param_3[1] + uVar9 * 4) * 0x10 + 8 + param_3[5])
                            + *(float *)(iVar8 + 8 + param_3[6]);
                        if (fVar2 < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < fVar2)
                        {
                            fVar2 = 1.0;
                        }
                        *(float *)(iVar8 + 8 + puVar6[5]) = fVar2;
                        iVar7 = *(int *)(param_3[1] + uVar9 * 4) * 0x10;
                        pfVar11 = (float *)(iVar7 + 0xc + param_3[5]);
                        if (*(float *)(iVar7 + 0xc + param_3[5]) < 0.0)
                        {
                            fVar2 = 0.0;
                        }
                        else if (1.0 < *pfVar11)
                        {
                            fVar2 = 1.0;
                        }
                        else
                        {
                            fVar2 = *pfVar11;
                        }
                        uVar9 = uVar9 + 1;
                        param_4 = (uint *)((int)param_4 + 0xc);
                        *(float *)(iVar8 + 0xc + puVar6[5]) = fVar2;
                        iVar8 = iVar8 + 0x10;
                    } while (uVar9 < *param_3);
                    *puVar6 = *param_3;
                    return;
                }
            }
        LAB_004922f3:
            *puVar6 = *puVar5;
            return;
        default:
            return;
        }
        *param_4 = *param_3;
        return;
    case 4:
        if (-1 < param_2)
        {
            if (param_2 < 3)
            {
                uVar9 = 0;
                if (*param_3 != 0)
                {
                    param_3 = NULL;
                    do
                    {
                        puVar1 = (undefined_32 *)(puVar5[3] + *(int *)(puVar5[1] + uVar9 * 4) * 0xc);
                        puVar10 = (undefined_32 *)((int)param_3 + param_4[3]);
                        *puVar10 = *puVar1;
                        puVar10[1] = puVar1[1];
                        puVar10[2] = puVar1[2];
                        uVar3 = puVar5[4];
                        uVar4 = param_4[4];
                        iVar8 = *(int *)(puVar5[2] + uVar9 * 4);
                        *(undefined_32 *)(uVar4 + uVar9 * 8) = *(undefined_32 *)(uVar3 + iVar8 * 8);
                        *(undefined_32 *)(uVar4 + 4 + uVar9 * 8) = *(undefined_32 *)(uVar3 + 4 + iVar8 * 8);
                        *(float *)(param_4[4] + uVar9 * 8) = *param_5 + *(float *)(param_4[4] + uVar9 * 8);
                        iVar8 = uVar9 * 8;
                        iVar7 = uVar9 * 8;
                        uVar9 = uVar9 + 1;
                        param_3 = (uint *)((int)param_3 + 0xc);
                        *(float *)(param_4[4] + 4 + iVar7) = *(float *)(param_4[4] + 4 + iVar8) + param_5[1];
                    } while (uVar9 < *puVar5);
                }
                *param_4 = *puVar5;
            }
            else if (param_2 == 3)
            {
                if (param_3[6] == 0)
                {
                    param_4 = NULL;
                    if (*param_3 != 0)
                    {
                        param_2 = 0;
                        param_3 = NULL;
                        do
                        {
                            puVar1 = (undefined_32 *)(puVar5[3] + *(int *)(puVar5[1] + (int)param_4 * 4) * 0xc);
                            puVar10 = (undefined_32 *)((int)param_3 + puVar6[3]);
                            *puVar10 = *puVar1;
                            puVar10[1] = puVar1[1];
                            puVar10[2] = puVar1[2];
                            uVar9 = puVar6[4];
                            iVar8 = (int)param_4 * 8;
                            iVar7 = *(int *)(puVar5[2] + (int)param_4 * 4);
                            uVar3 = puVar5[4];
                            *(undefined_32 *)(uVar9 + iVar8) = *(undefined_32 *)(uVar3 + iVar7 * 8);
                            *(undefined_32 *)(uVar9 + 4 + iVar8) = *(undefined_32 *)(uVar3 + 4 + iVar7 * 8);
                            *(float *)(puVar6[4] + iVar8) = *param_5 + *(float *)(puVar6[4] + iVar8);
                            *(float *)(puVar6[4] + 4 + iVar8) = *(float *)(puVar6[4] + 4 + iVar8) + param_5[1];
                            pfVar11 = (float *)(puVar5[5] + *(int *)(puVar5[1] + (int)param_4 * 4) * 0x10);
                            if (*pfVar11 < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            *(float *)(param_2 + puVar6[5]) = fVar2;
                            iVar8 = *(int *)(puVar5[1] + (int)param_4 * 4) * 0x10;
                            pfVar11 = (float *)(iVar8 + 4 + puVar5[5]);
                            if (*(float *)(iVar8 + 4 + puVar5[5]) < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            *(float *)(param_2 + 4 + puVar6[5]) = fVar2;
                            iVar8 = *(int *)(puVar5[1] + (int)param_4 * 4) * 0x10;
                            pfVar11 = (float *)(iVar8 + 8 + puVar5[5]);
                            if (*(float *)(iVar8 + 8 + puVar5[5]) < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            *(float *)(param_2 + 8 + puVar6[5]) = fVar2;
                            iVar8 = *(int *)(puVar5[1] + (int)param_4 * 4) * 0x10;
                            pfVar11 = (float *)(iVar8 + 0xc + puVar5[5]);
                            if (*(float *)(iVar8 + 0xc + puVar5[5]) < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            param_4 = (uint *)((int)param_4 + 1);
                            param_3 = (uint *)((int)param_3 + 0xc);
                            *(float *)(param_2 + 0xc + puVar6[5]) = fVar2;
                            param_2 = param_2 + 0x10;
                        } while (param_4 < *puVar5);
                    }
                }
                else
                {
                    param_4 = NULL;
                    if (*param_3 != 0)
                    {
                        param_2 = 0;
                        param_3 = NULL;
                        do
                        {
                            puVar1 = (undefined_32 *)(puVar5[3] + *(int *)(puVar5[1] + (int)param_4 * 4) * 0xc);
                            puVar10 = (undefined_32 *)((int)param_3 + puVar6[3]);
                            *puVar10 = *puVar1;
                            puVar10[1] = puVar1[1];
                            puVar10[2] = puVar1[2];
                            uVar9 = puVar6[4];
                            iVar8 = (int)param_4 * 8;
                            iVar7 = *(int *)(puVar5[2] + (int)param_4 * 4);
                            uVar3 = puVar5[4];
                            *(undefined_32 *)(uVar9 + iVar8) = *(undefined_32 *)(uVar3 + iVar7 * 8);
                            *(undefined_32 *)(uVar9 + 4 + iVar8) = *(undefined_32 *)(uVar3 + 4 + iVar7 * 8);
                            *(float *)(puVar6[4] + iVar8) = *param_5 + *(float *)(puVar6[4] + iVar8);
                            *(float *)(puVar6[4] + 4 + iVar8) = *(float *)(puVar6[4] + 4 + iVar8) + param_5[1];
                            fVar2 = *(float *)(*(int *)(puVar5[1] + (int)param_4 * 4) * 0x10 + puVar5[5])
                                + *(float *)(param_2 + puVar5[6]);
                            if (fVar2 < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < fVar2)
                            {
                                fVar2 = 1.0;
                            }
                            *(float *)(param_2 + puVar6[5]) = fVar2;
                            fVar2 = *(float *)(*(int *)(puVar5[1] + (int)param_4 * 4) * 0x10 + 4 + puVar5[5])
                                + *(float *)(param_2 + 4 + puVar5[6]);
                            if (fVar2 < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < fVar2)
                            {
                                fVar2 = 1.0;
                            }
                            *(float *)(param_2 + 4 + puVar6[5]) = fVar2;
                            fVar2 = *(float *)(*(int *)(puVar5[1] + (int)param_4 * 4) * 0x10 + 8 + puVar5[5])
                                + *(float *)(param_2 + 8 + puVar5[6]);
                            if (fVar2 < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < fVar2)
                            {
                                fVar2 = 1.0;
                            }
                            *(float *)(param_2 + 8 + puVar6[5]) = fVar2;
                            iVar8 = *(int *)(puVar5[1] + (int)param_4 * 4) * 0x10;
                            pfVar11 = (float *)(iVar8 + 0xc + puVar5[5]);
                            if (*(float *)(iVar8 + 0xc + puVar5[5]) < 0.0)
                            {
                                fVar2 = 0.0;
                            }
                            else if (1.0 < *pfVar11)
                            {
                                fVar2 = 1.0;
                            }
                            else
                            {
                                fVar2 = *pfVar11;
                            }
                            param_4 = (uint *)((int)param_4 + 1);
                            param_3 = (uint *)((int)param_3 + 0xc);
                            *(float *)(param_2 + 0xc + puVar6[5]) = fVar2;
                            param_2 = param_2 + 0x10;
                        } while (param_4 < *puVar5);
                        *puVar6 = *puVar5;
                        return;
                    }
                }
                goto LAB_004922f3;
            }
        }
        return;
    default:
        return;
    }
LAB_00491bc6:
    *param_4 = *param_3;
    return;
}

undefined_32 FUN_004923c0(undefined_32 *param_1)

{
    *param_1 = 0;
    param_1[1] = 0;
    param_1[4] = 0;
    param_1[5] = 0;
    param_1[6] = 0;
    param_1[7] = 0;
    param_1[8] = -1;
    param_1[0xf] = 0;
    param_1[0x10] = 0;
    param_1[0x11] = 0;
    param_1[9] = 0;
    param_1[10] = 0;
    param_1[0xb] = 0;
    param_1[0xc] = 0;
    param_1[0xd] = 0;
    param_1[0xe] = 0;
    return 1;
}

void FUN_00492410(int param_1)

{
    if (*(int *)(param_1 + 0x14) != 0)
    {
        (**(code **)(DAT_00ecc428 + 0x24))(*(int *)(param_1 + 0x14));
    }
    if (*(int *)(param_1 + 0x18) != 0)
    {
        (**(code **)(DAT_00ecc428 + 0x24))(*(int *)(param_1 + 0x18));
    }
    return;
}

//----- (00492440) --------------------------------------------------------
// a1 = 3 component vector
// Probably returns nothing, if it has to return something, it's the prior
// vector length [in 80 bit or maybe double precision]
void rdVector_Normalize3(float *param_1)

{
    float length;

    length = SQRT(*param_1 * *param_1 + param_1[2] * param_1[2] + param_1[1] * param_1[1]);
    if (length != 0.0)
    {
        length = 1.0 / length;
        *param_1 = length * *param_1;
        param_1[1] = param_1[1] * length;
        param_1[2] = param_1[2] * length;
    }
    return;
}

// 004924b0
void rdMatrix_Build34(float *param_1, undefined_32 *param_2, float *param_3)

{
    undefined_32 *puVar1;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c[3];

    puVar1 = param_2;
    stdMath_SinCos(*param_2, &param_2, &local_1c);
    stdMath_SinCos(puVar1[1], &local_14, &local_10);
    stdMath_SinCos(puVar1[2], &local_18, local_c);
    *param_1 = -(local_18 * local_14) * (float)param_2 + local_c[0] * local_10;
    param_1[1] = local_18 * local_10 * (float)param_2 + local_c[0] * local_14;
    param_1[2] = -local_18 * local_1c;
    param_1[3] = -local_14 * local_1c;
    param_1[4] = local_10 * local_1c;
    param_1[5] = (float)param_2;
    param_1[6] = local_c[0] * local_14 * (float)param_2 + local_18 * local_10;
    param_1[7] = -(float)param_2 * local_c[0] * local_10 + local_18 * local_14;
    param_1[8] = local_c[0] * local_1c;
    param_1[9] = *param_3;
    param_1[10] = param_3[1];
    param_1[0xb] = param_3[2];
    return;
}

// 004925d0
void rdMatrix_InvertOrtho34(float *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;

    param_1[1] = param_2[3];
    param_1[2] = param_2[6];
    param_1[5] = param_2[7];
    param_1[3] = param_2[1];
    param_1[6] = param_2[2];
    param_1[7] = param_2[5];
    *param_1 = *param_2;
    param_1[4] = param_2[4];
    param_1[8] = param_2[8];
    fVar1 = param_2[10];
    fVar2 = param_2[0xb];
    fVar3 = param_2[9];
    param_1[9] = -(fVar3 * *param_2 + param_2[2] * fVar2 + param_2[1] * fVar1);
    param_1[10] = -(param_2[5] * fVar2 + param_2[3] * fVar3 + param_2[4] * fVar1);
    param_1[0xb] = -(param_2[6] * fVar3 + param_2[7] * fVar1 + param_2[8] * fVar2);
    return;
}

// 00492680
// Apparently this should also be InvertOrtho34, but it does some division by squared length which is strange
// rdMatrix34*, rdMatrix34*
void FUN_00492680(float *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;

    fVar4 = param_2[5] * param_2[5] + param_2[4] * param_2[4] + param_2[3] * param_2[3];
    fVar1 = param_2[1];
    fVar2 = param_2[2];
    fVar3 = *param_2;
    fVar5 = param_2[8] * param_2[8] + param_2[7] * param_2[7] + param_2[6] * param_2[6];
    param_1[1] = param_2[3] / fVar4;
    param_1[2] = param_2[6] / fVar5;
    param_1[5] = param_2[7] / fVar5;
    fVar1 = fVar3 * fVar3 + fVar2 * fVar2 + fVar1 * fVar1;
    param_1[3] = param_2[1] / fVar1;
    param_1[6] = param_2[2] / fVar1;
    param_1[7] = param_2[5] / fVar4;
    *param_1 = *param_2 / fVar1;
    param_1[4] = param_2[4] / fVar4;
    param_1[8] = param_2[8] / fVar5;
    fVar3 = param_2[9];
    fVar1 = param_2[10];
    fVar2 = param_2[0xb];
    param_1[9] = -(fVar3 * *param_1 + fVar1 * param_1[3] + fVar2 * param_1[6]);
    param_1[10] = -(fVar2 * param_1[7] + fVar1 * param_1[4] + fVar3 * param_1[1]);
    param_1[0xb] = -(fVar2 * param_1[8] + fVar1 * param_1[5] + fVar3 * param_1[2]);
    return;
}

// 00492810
void rdMatrix_BuildInverseRotate34(float *param_1, undefined_32 *param_2)

{
    undefined_32 *puVar1;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c[3];

    puVar1 = param_2;
    stdMath_SinCos(*param_2, &param_2, &local_1c);
    stdMath_SinCos(puVar1[1], &local_14, &local_10);
    stdMath_SinCos(puVar1[2], &local_18, local_c);
    *param_1 = -(local_18 * local_14) * (float)param_2 + local_c[0] * local_10;
    param_1[1] = local_18 * local_10 * (float)param_2 + local_c[0] * local_14;
    param_1[2] = -local_18 * local_1c;
    param_1[3] = -local_14 * local_1c;
    param_1[4] = local_10 * local_1c;
    param_1[5] = (float)param_2;
    param_1[6] = local_c[0] * local_14 * (float)param_2 + local_18 * local_10;
    param_1[7] = -(float)param_2 * local_c[0] * local_10 + local_18 * local_14;
    param_1[8] = local_c[0] * local_1c;
    param_1[9] = 0.0;
    param_1[10] = 0.0;
    param_1[0xb] = 0.0;
    return;
}

// 00492930
void rdMatrix_BuildTranslate34(undefined_32 *param_1, undefined_32 *param_2)

{
    int iVar1;
    undefined_32 *puVar2;
    undefined_32 *puVar3;

    puVar2 = &DAT_004af880; // rdroid_identMatrix34 ? Verify
    puVar3 = param_1;
    QMEMCPY(iVar1, puVar2, puVar3, 0xc)
    param_1[9] = *param_2;
    param_1[10] = param_2[1];
    param_1[0xb] = param_2[2];
    return;
}

// 00492960
void rdMatrix_ExtractAngles34(float *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float fVar8;
    float10 fVar9;

    fVar1 = param_1[0];
    fVar3 = param_1[3];
    fVar4 = param_1[4];
    fVar6 = -param_1[1];
    fVar2 = param_1[2];
    fVar5 = param_1[5];
    fVar7 = fVar4 * fVar4 + fVar3 * fVar3;
    fVar8 = SQRT(fVar7);
    if (0.001 <= fVar8)
    {
        fVar9 = (float10)stdMath_ArcSin3(fVar4 / fVar8);
        fVar9 = (float10)90.0 - fVar9;
        if (0.0 < fVar3)
        {
            fVar9 = -fVar9;
        }
        param_2[1] = (float)fVar9;
    }
    else
    {
        fVar9 = (float10)stdMath_ArcSin3(--fVar1);
        fVar9 = (float10)90.0 - fVar9;
        if (((0.0 < fVar6) && (0.0 < fVar5)) || ((fVar6 < 0.0 && (fVar5 < 0.0))))
        {
            fVar9 = -fVar9;
        }
        param_2[2] = (float)fVar9;
        param_2[1] = 0.0;
    }
    if (0.001 <= fVar8)
    {
        fVar7 = fVar7 / fVar8;
        if (fVar7 < 1.0)
        {
            fVar9 = (float10)stdMath_ArcSin3(fVar7);
            *param_2 = (float)((float10)90.0 - fVar9);
        }
        else
        {
            *param_2 = 0.0;
        }
    }
    else
    {
        *param_2 = 90.0;
    }
    if (fVar5 < 0.0)
    {
        *param_2 = -*param_2;
    }
    fVar4 = -fVar4;
    if (0.001 <= fVar8)
    {
        fVar1 = (fVar4 * -fVar1 + fVar6 * fVar3) / SQRT(fVar4 * fVar4 + fVar3 * fVar3);
        if (fVar1 < 1.0)
        {
            if (-1.0 < fVar1)
            {
                fVar9 = (float10)stdMath_ArcSin3(fVar1);
                param_2[2] = (float)((float10)90.0 - fVar9);
            }
            else
            {
                param_2[2] = 180.0;
            }
        }
        else
        {
            param_2[2] = 0.0;
        }
        if (-fVar2 < 0.0)
        {
            param_2[2] = -param_2[2];
            return;
        }
    }
    return;
}

// 00492b70
void rdMatrix_Multiply34(float *param_1, float *param_2, float *param_3)

{
    *param_1 = param_2[6] * param_3[2] + param_2[3] * param_3[1] + *param_3 * *param_2;
    param_1[1] = param_3[1] * param_2[4] + param_3[2] * param_2[7] + param_2[1] * *param_3;
    param_1[2] = param_3[1] * param_2[5] + param_3[2] * param_2[8] + param_2[2] * *param_3;
    param_1[3] = param_2[3] * param_3[4] + param_2[6] * param_3[5] + param_3[3] * *param_2;
    param_1[4] = param_2[1] * param_3[3] + param_2[7] * param_3[5] + param_2[4] * param_3[4];
    param_1[5] = param_2[2] * param_3[3] + param_3[4] * param_2[5] + param_2[8] * param_3[5];
    param_1[6] = param_2[6] * param_3[8] + param_2[3] * param_3[7] + param_3[6] * *param_2;
    param_1[7] = param_2[7] * param_3[8] + param_2[4] * param_3[7] + param_2[1] * param_3[6];
    param_1[8] = param_2[5] * param_3[7] + param_2[2] * param_3[6] + param_2[8] * param_3[8];
    param_1[9] = param_2[6] * param_3[0xb] + param_2[3] * param_3[10] + param_3[9] * *param_2 + param_2[9];
    param_1[10] = param_2[4] * param_3[10] + param_2[7] * param_3[0xb] + param_2[1] * param_3[9] + param_2[10];
    param_1[0xb] = param_2[8] * param_3[0xb] + param_2[2] * param_3[9] + param_2[5] * param_3[10] + param_2[0xb];
    return;
}

// Utility-functions.c
//----- (00492D50) --------------------------------------------------------
// Transposed matrix multiplication, otherwise like sub_492F40
// a1 = input & output matrix [12 floats]
// a2 = input matrix [12 floats]
void FUN_00492d50(float *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    int iVar3;
    float *pfVar4;
    float *pfVar5;
    float local_30[4];
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    fVar1 = param_2[1];
    fVar2 = param_2[2];
    pfVar4 = param_1;
    pfVar5 = local_30;
    QMEMCPY(iVar3, pfVar4, pfVar5, 0xc)

    *param_1 = local_30[0] * *param_2 + fVar2 * local_18 + fVar1 * local_30[3];
    param_1[1] = local_30[1] * *param_2 + param_2[2] * local_14 + param_2[1] * local_20;
    param_1[2] = local_30[2] * *param_2 + param_2[2] * local_10 + param_2[1] * local_1c;
    param_1[3] = param_2[5] * local_18 + param_2[3] * local_30[0] + param_2[4] * local_30[3];
    param_1[4] = param_2[5] * local_14 + param_2[3] * local_30[1] + param_2[4] * local_20;
    param_1[5] = param_2[5] * local_10 + param_2[3] * local_30[2] + param_2[4] * local_1c;
    param_1[6] = param_2[6] * local_30[0] + param_2[7] * local_30[3] + param_2[8] * local_18;
    param_1[7] = param_2[6] * local_30[1] + param_2[7] * local_20 + param_2[8] * local_14;
    param_1[8] = param_2[6] * local_30[2] + param_2[7] * local_1c + param_2[8] * local_10;
    param_1[9] = param_2[9] * local_30[0] + param_2[10] * local_30[3] + param_2[0xb] * local_18 + local_c;
    param_1[10] = param_2[9] * local_30[1] + param_2[10] * local_20 + param_2[0xb] * local_14 + local_8;
    param_1[0xb] = param_2[9] * local_30[2] + param_2[10] * local_1c + param_2[0xb] * local_10 + local_4;
    return;
}

// Utility-functions.c
//----- (00492F40) --------------------------------------------------------
// a1 = input & output matrix [12 floats]
// a2 = input matrix [12 floats]
// (Same as sub_492B70(a1, a1, a2) if it allowed overlapping matrices)
void rdMatrix_PostMultiply34(float *param_1, float *param_2)

{
    float fVar1;
    float fVar2;
    int iVar3;
    float *pfVar4;
    float *pfVar5;
    float local_30[4];
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    fVar1 = param_2[6];
    fVar2 = param_2[3];
    pfVar4 = param_1;
    pfVar5 = local_30;
    QMEMCPY(iVar3, pfVar4, pfVar5, 0xc)

    *param_1 = local_30[0] * *param_2 + fVar2 * local_30[1] + fVar1 * local_30[2];
    param_1[1] = param_2[4] * local_30[1] + param_2[7] * local_30[2] + param_2[1] * local_30[0];
    param_1[2] = param_2[2] * local_30[0] + param_2[8] * local_30[2] + param_2[5] * local_30[1];
    param_1[3] = local_30[3] * *param_2 + param_2[3] * local_20 + param_2[6] * local_1c;
    param_1[4] = param_2[4] * local_20 + param_2[7] * local_1c + param_2[1] * local_30[3];
    param_1[5] = param_2[2] * local_30[3] + param_2[8] * local_1c + param_2[5] * local_20;
    param_1[6] = local_18 * *param_2 + param_2[3] * local_14 + param_2[6] * local_10;
    param_1[7] = param_2[4] * local_14 + param_2[7] * local_10 + param_2[1] * local_18;
    param_1[8] = param_2[2] * local_18 + param_2[8] * local_10 + param_2[5] * local_14;
    param_1[9] = local_c * *param_2 + param_2[3] * local_8 + param_2[6] * local_4 + param_2[9];
    param_1[10] = param_2[4] * local_8 + param_2[7] * local_4 + param_2[1] * local_c + param_2[10];
    param_1[0xb] = param_2[2] * local_c + param_2[8] * local_4 + param_2[5] * local_8 + param_2[0xb];
    return;
}

// prerotate34 variant ?
void FUN_00493130(undefined_32 param_1, undefined_32 param_2)

{
    undefined_8 local_30[48]; // 3*4 floats

    rdMatrix_BuildInverseRotate34(local_30, param_2);
    FUN_00492d50(param_1, local_30);
    return;
}

// Looks like rdMatrix_Pre|PostTranslate34 but without the matrix
// 00493160
void rdMatrix_PostTranslate34(int param_1, float *param_2)

{
    *(float *)(param_1 + 0x24) = param_2[0] + *(float *)(param_1 + 0x24);
    *(float *)(param_1 + 0x28) = param_2[1] + *(float *)(param_1 + 0x28);
    *(float *)(param_1 + 0x2c) = param_2[2] + *(float *)(param_1 + 0x2c);
    return;
}

void FUN_00493190(float *param_1, float *param_2, float *param_3)

{
    param_1[0] = param_2[0] * param_3[0] + param_2[1] * param_3[3] + param_2[2] * param_3[6];
    param_1[1] = param_3[1] * param_2[0] + param_3[7] * param_2[2] + param_2[1] * param_3[4];
    param_1[2] = param_3[2] * param_2[0] + param_3[8] * param_2[2] + param_2[1] * param_3[5];
    return;
}

// 00493200
void rdMatrix_TransformPoint34(float *param_1, float *param_2, float *param_3)

{
    param_1[0] = param_2[0] * param_3[0] + param_2[2] * param_3[6] + param_2[1] * param_3[3] + param_3[9];
    param_1[1] = param_3[1] * param_2[0] + param_3[7] * param_2[2] + param_2[1] * param_3[4] + param_3[10];
    param_1[2] = param_3[2] * param_2[0] + param_3[8] * param_2[2] + param_2[1] * param_3[5] + param_3[0xb];
    return;
}

// 00493270
void rdMatrix_TransformPointLst34(float *param_1, float *param_2, float *param_3, int param_4)

{
    if (param_4 != 0)
    {
        do
        {
            param_3[0] = param_2[0] * param_1[0] + param_2[2] * param_1[6] + param_2[1] * param_1[3] + param_1[9];
            param_3[1] = param_2[2] * param_1[7] + param_2[1] * param_1[4] + param_1[1] * param_2[0] + param_1[10];
            param_3[2] = param_2[2] * param_1[8] + param_2[1] * param_1[5] + param_1[2] * param_2[0] + param_1[0xb];
            param_3 = param_3 + 3;
            param_4 = param_4 + -1;
            param_2 = param_2 + 3;
        } while (param_4 != 0);
    }
    return;
}

// Looks like rdPupper_BuildJointMatrices
// This function got inlined severly
// 00493310
// rdThing*, rdMatrix34
void FUN_00493310(int param_1, undefined_32 param_2)

{
    int iVar1;
    int *piVar2;
    float fVar3;
    bool bVar4;
    undefined_32 *puVar5;
    undefined_32 uVar6;
    int iVar7;
    int iVar8;
    float *pfVar9;
    int iVar10;
    int iVar11;
    int *piVar12;
    uint uVar13;
    undefined_32 *puVar14;
    int *piVar15;
    uint *puVar16;
    undefined_32 *puVar17;
    float10 fVar18;
    float local_70;
    float local_6c;
    int *local_68;
    int local_64;
    uint local_60;
    int local_58;
    uint local_54;
    int local_50;
    float local_48;
    float local_44;
    float local_40;
    float local_3c;
    float local_38;
    float local_34;
    float local_30;
    float local_2c;
    float local_28;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;
    float local_4;

    iVar1 = *(int *)(param_1 + 4);
    piVar2 = *(int **)(param_1 + 0x10);
    if (*(int *)(param_1 + 0x14) == 0)
    {
        if ((piVar2 == NULL) || (*piVar2 != 0))
        {
            uVar13 = 0;
            if (*(int *)(iVar1 + 0x74) != 0)
            {
                iVar11 = 0;
                puVar5 = (undefined_32 *)(*(int *)(iVar1 + 0x78) + 0xc0);
                do
                {
                    puVar14 = puVar5;
                    puVar17 = (undefined_32 *)(iVar11 + *(int *)(param_1 + 0x1c));
                    QMEMCPY(iVar10, puVar14, puVar17, 0xc)
                    uVar13 = uVar13 + 1;
                    iVar11 = iVar11 + 0x30;
                    puVar5 = puVar5 + 0x49;
                } while (uVar13 < *(uint *)(iVar1 + 0x74));
            }
        }
        else
        {
            local_64 = 8;
            piVar12 = piVar2 + 2;
            do
            {
                if (*piVar12 != 0)
                {
                    iVar11 = piVar12[0x177a];
                    local_68 = piVar12 + 8;
                    local_60 = 0;
                    if (*(int *)(iVar11 + 0x58) != 0)
                    {
                        piVar15 = (int *)(*(int *)(iVar11 + 0x5c) + 0x44);
                        do
                        {
                            bVar4 = false;
                            if (*piVar15 != 0)
                            {
                                iVar7 = *piVar15 + -1;
                                iVar10 = piVar12[piVar15[-1] + 8];
                                if (iVar10 != iVar7)
                                {
                                    iVar8 = iVar10 + 1;
                                    if (*(float *)(piVar15[1] + iVar8 * 0x38) <= (float)piVar12[0x1778])
                                    {
                                        pfVar9 = (float *)(piVar15[1] + (iVar10 + 2) * 0x38);
                                        do
                                        {
                                            if (iVar8 == iVar7)
                                            {
                                                bVar4 = true;
                                            }
                                            else if (*pfVar9 <= (float)piVar12[0x1778])
                                            {
                                                iVar8 = iVar8 + 1;
                                                pfVar9 = pfVar9 + 0xe;
                                            }
                                            else
                                            {
                                                bVar4 = true;
                                            }
                                        } while (!bVar4);
                                        *local_68 = iVar8;
                                    }
                                }
                            }
                            local_60 = local_60 + 1;
                            local_68 = local_68 + 1;
                            piVar15 = piVar15 + 0x13;
                        } while (local_60 < *(uint *)(iVar11 + 0x58));
                    }
                }
                piVar12 = piVar12 + 0x177d;
                local_64 = local_64 + -1;
            } while (local_64 != 0);
            local_54 = 0;
            if (*(int *)(iVar1 + 0x74) != 0)
            {
                local_50 = 0;
                local_60 = 0;
                puVar16 = (uint *)(*(int *)(iVar1 + 0x78) + 0x80);
                do
                {
                    local_64 = 0;
                    local_68 = NULL;
                    local_70 = 0.0;
                    local_6c = 0.0;
                    local_3c = 0.0;
                    local_38 = 0.0;
                    local_34 = 0.0;
                    local_48 = 0.0;
                    local_18 = 0.0;
                    local_c = 0.0;
                    local_44 = 0.0;
                    local_14 = 0.0;
                    local_8 = 0.0;
                    local_40 = 0.0;
                    local_10 = 0.0;
                    local_4 = 0.0;
                    local_58 = 8;
                    piVar12 = piVar2 + 2;
                    do
                    {
                        iVar11 = piVar12[0x177a];
                        if (iVar11 != 0)
                        {
                            if ((puVar16[1] & *(uint *)(iVar11 + 0x4c)) == 0)
                            {
                                iVar10 = piVar12[2];
                            }
                            else
                            {
                                iVar10 = piVar12[3];
                            }
                            if ((*(byte *)piVar12 & 2) != 0)
                            {
                                uVar13 = *puVar16;
                                iVar7 = *(int *)(iVar11 + 0x5c) + uVar13 * 0x4c;
                                if ((((*(int *)(iVar7 + 0x44) != 0) && ((int)local_68 <= iVar10))
                                     && ((local_64 <= iVar10 || (local_70 < 1.0))))
                                    && (uVar13 <= *(uint *)(iVar11 + 0x58) && *(uint *)(iVar11 + 0x58) != uVar13))
                                {
                                    iVar11 = *(int *)(iVar7 + 0x48);
                                    fVar3 = (float)piVar12[0x1778] - *(float *)(iVar11 + piVar12[uVar13 + 8] * 0x38);
                                    iVar11 = iVar11 + piVar12[uVar13 + 8] * 0x38;
                                    if ((*(uint *)(iVar11 + 4) & 1) == 0)
                                    {
                                        local_24 = *(float *)(iVar11 + 8);
                                        local_20 = *(float *)(iVar11 + 0xc);
                                        local_1c = *(float *)(iVar11 + 0x10);
                                    }
                                    else
                                    {
                                        local_24 = *(float *)(iVar11 + 0x20) * fVar3 + *(float *)(iVar11 + 8);
                                        local_20 = *(float *)(iVar11 + 0x24) * fVar3 + *(float *)(iVar11 + 0xc);
                                        local_1c = *(float *)(iVar11 + 0x28) * fVar3 + *(float *)(iVar11 + 0x10);
                                    }
                                    if ((*(uint *)(iVar11 + 4) & 2) == 0)
                                    {
                                        local_30 = *(float *)(iVar11 + 0x14);
                                        local_2c = *(float *)(iVar11 + 0x18);
                                        local_28 = *(float *)(iVar11 + 0x1c);
                                    }
                                    else
                                    {
                                        local_30 = *(float *)(iVar11 + 0x2c) * fVar3 + *(float *)(iVar11 + 0x14);
                                        local_2c = *(float *)(iVar11 + 0x30) * fVar3 + *(float *)(iVar11 + 0x18);
                                        local_28 = *(float *)(iVar11 + 0x34) * fVar3 + *(float *)(iVar11 + 0x1c);
                                    }
                                    local_24 = local_24 - (float)puVar16[10];
                                    local_20 = local_20 - (float)puVar16[0xb];
                                    local_1c = local_1c - (float)puVar16[0xc];
                                    local_2c = local_2c - (float)puVar16[0xe];
                                    local_28 = local_28 - (float)puVar16[0xf];
                                    fVar18 = (float10)stdMath_NormalizeAngleAcute(local_30 - (float)puVar16[0xd]);
                                    local_30 = (float)fVar18;
                                    fVar18 = (float10)stdMath_NormalizeAngleAcute(local_2c);
                                    local_2c = (float)fVar18;
                                    fVar18 = (float10)stdMath_NormalizeAngleAcute(local_28);
                                    local_28 = (float)fVar18;
                                    if ((float)piVar12[6] < 1.0)
                                    {
                                        local_24 = (float)piVar12[6] * local_24;
                                        local_20 = (float)piVar12[6] * local_20;
                                        local_1c = (float)piVar12[6] * local_1c;
                                        local_30 = (float)piVar12[6] * local_30;
                                        local_2c = (float)piVar12[6] * local_2c;
                                        local_28 = (float)piVar12[6] * local_28;
                                    }
                                    if (iVar10 == local_64)
                                    {
                                        local_3c = local_3c + local_24;
                                        local_38 = local_38 + local_20;
                                        local_34 = local_34 + local_1c;
                                        local_48 = local_48 + local_30;
                                        local_44 = local_44 + local_2c;
                                        local_40 = local_40 + local_28;
                                        local_70 = local_70 + (float)piVar12[6];
                                    }
                                    else if (local_64 < iVar10)
                                    {
                                        local_18 = local_3c;
                                        local_14 = local_38;
                                        local_10 = local_34;
                                        local_c = local_48;
                                        local_8 = local_44;
                                        local_4 = local_40;
                                        local_6c = local_70;
                                        local_68 = (int *)local_64;
                                        local_3c = local_24;
                                        local_38 = local_20;
                                        local_34 = local_1c;
                                        local_48 = local_30;
                                        local_70 = (float)piVar12[6];
                                        local_44 = local_2c;
                                        local_40 = local_28;
                                        local_64 = iVar10;
                                    }
                                    else if ((int)local_68 < iVar10)
                                    {
                                        local_18 = local_24;
                                        local_14 = local_20;
                                        local_10 = local_1c;
                                        local_c = local_30;
                                        local_6c = (float)piVar12[6];
                                        local_8 = local_2c;
                                        local_4 = local_28;
                                        local_68 = (int *)iVar10;
                                    }
                                    else
                                    {
                                        local_18 = local_18 + local_24;
                                        local_14 = local_14 + local_20;
                                        local_10 = local_10 + local_1c;
                                        local_c = local_c + local_30;
                                        local_8 = local_8 + local_2c;
                                        local_4 = local_4 + local_28;
                                        local_6c = local_6c + (float)piVar12[6];
                                    }
                                }
                            }
                        }
                        piVar12 = piVar12 + 0x177d;
                        local_58 = local_58 + -1;
                    } while (local_58 != 0);
                    if ((1.0 <= local_70) || (local_6c <= 0.0))
                    {
                        if (1.0 < local_70)
                        {
                            local_70 = 1.0 / local_70;
                            local_3c = local_70 * local_3c;
                            local_38 = local_70 * local_38;
                            local_34 = local_70 * local_34;
                            local_48 = local_70 * local_48;
                            local_44 = local_70 * local_44;
                            local_40 = local_70 * local_40;
                        }
                    }
                    else
                    {
                        if (1.0 < local_6c)
                        {
                            local_6c = 1.0 / local_6c;
                            local_18 = local_6c * local_18;
                            local_14 = local_6c * local_14;
                            local_10 = local_6c * local_10;
                            local_c = local_6c * local_c;
                            local_8 = local_6c * local_8;
                            local_4 = local_6c * local_4;
                        }
                        local_70 = 1.0 - local_70;
                        local_3c = local_70 * local_18 + local_3c;
                        local_38 = local_70 * local_14 + local_38;
                        local_34 = local_70 * local_10 + local_34;
                        local_48 = local_70 * local_c + local_48;
                        local_44 = local_70 * local_8 + local_44;
                        local_40 = local_70 * local_4 + local_40;
                    }
                    fVar18 = (float10)stdMath_NormalizeAngleAcute(local_48);
                    local_48 = (float)fVar18;
                    fVar18 = (float10)stdMath_NormalizeAngleAcute(local_44);
                    local_44 = (float)fVar18;
                    fVar18 = (float10)stdMath_NormalizeAngleAcute(local_40);
                    local_3c = (float)puVar16[10] + local_3c;
                    local_38 = (float)puVar16[0xb] + local_38;
                    local_34 = (float)puVar16[0xc] + local_34;
                    local_48 = (float)puVar16[0xd] + local_48;
                    local_44 = (float)puVar16[0xe] + local_44;
                    local_40 = (float)puVar16[0xf] + (float)fVar18;
                    rdMatrix_Build34(local_50 + *(int *)(param_1 + 0x1c), &local_48, &local_3c);
                    pfVar9 = (float *)(*(int *)(param_1 + 0x20) + local_60);
                    if (((*pfVar9 != 0.0) || (pfVar9[1] != 0.0)) || (pfVar9[2] != 0.0)) // rdVector_IsZero3
                    {
                        FUN_00493130(local_50 + *(int *)(param_1 + 0x1c), pfVar9); // preRotate34 on a transpose ?
                    }
                    local_60 = local_60 + 0xc;
                    local_54 = local_54 + 1;
                    local_50 = local_50 + 0x30;
                    puVar16 = puVar16 + 0x49;
                } while (local_54 < *(uint *)(iVar1 + 0x74));
            }
        }
        rdThing_AccumulateMatrices(param_1, *(undefined_32 *)(iVar1 + 0x78), param_2);
        uVar6 = FUN_0048db80(); // get rdroid_FrameTrue ?
        *(undefined_32 *)(param_1 + 0x18) = uVar6;
    }
    return;
}

void FUN_00493b80(undefined_32 param_1, uint *param_2, int *param_3, float *param_4)

{
    undefined_32 *puVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    float fVar6;
    uint *puVar7;
    int iVar8;
    int iVar9;
    undefined_32 *puVar10;
    int iVar11;
    uint local_8;

    puVar7 = param_2;
    DAT_00df7f80 = param_2[5];
    DAT_00df7f7c = param_3[5];
    uVar2 = param_2[6];
    iVar8 = 0;
    if (uVar2 != 0)
    {
        local_8 = 0;
        DAT_00df7f78 = uVar2;
        if (*param_2 != 0)
        {
            param_2 = NULL;
            do
            {
                iVar3 = *(int *)(puVar7[1] + local_8 * 4);
                iVar4 = *(int *)(puVar7[2] + local_8 * 4);
                iVar9 = iVar3 * 0x10;
                fVar6 = *(float *)(DAT_00df7f80 + iVar9) + *(float *)(DAT_00df7f78 + iVar8);
                if (fVar6 < 0.0)
                {
                    fVar6 = 0.0;
                }
                else if (1.0 < fVar6)
                {
                    fVar6 = 1.0;
                }
                iVar11 = local_8 * 8;
                *(float *)(DAT_00df7f7c + iVar8) = fVar6;
                uVar2 = puVar7[4];
                iVar5 = param_3[4];
                *(undefined_32 *)(iVar11 + iVar5) = *(undefined_32 *)(uVar2 + iVar4 * 8);
                ((undefined_32 *)(iVar11 + iVar5))[1] = *(undefined_32 *)(uVar2 + 4 + iVar4 * 8);
                fVar6 = *(float *)(DAT_00df7f80 + 4 + iVar9) + *(float *)(DAT_00df7f78 + 4 + iVar8);
                if (fVar6 < 0.0)
                {
                    fVar6 = 0.0;
                }
                else if (1.0 < fVar6)
                {
                    fVar6 = 1.0;
                }
                *(float *)(DAT_00df7f7c + 4 + iVar8) = fVar6;
                puVar1 = (undefined_32 *)(puVar7[3] + iVar3 * 0xc);
                puVar10 = (undefined_32 *)(param_3[3] + (int)param_2);
                *puVar10 = *puVar1;
                puVar10[1] = puVar1[1];
                puVar10[2] = puVar1[2];
                fVar6 = *(float *)(DAT_00df7f80 + 8 + iVar9) + *(float *)(DAT_00df7f78 + 8 + iVar8);
                if (fVar6 < 0.0)
                {
                    fVar6 = 0.0;
                }
                else if (1.0 < fVar6)
                {
                    fVar6 = 1.0;
                }
                *(float *)(DAT_00df7f7c + 8 + iVar8) = fVar6;
                *(float *)(param_3[4] + iVar11) = *param_4 + *(float *)(param_3[4] + iVar11);
                *(float *)(iVar11 + 4 + param_3[4]) = *(float *)(iVar11 + 4 + param_3[4]) + param_4[1];
                fVar6 = *(float *)(DAT_00df7f80 + 0xc + iVar9) + *(float *)(DAT_00df7f78 + 0xc + iVar8);
                if (fVar6 < 0.0)
                {
                    fVar6 = 0.0;
                }
                else if (1.0 < fVar6)
                {
                    fVar6 = 1.0;
                }
                local_8 = local_8 + 1;
                *(float *)(DAT_00df7f7c + 0xc + iVar8) = fVar6;
                param_2 = (uint *)((int)param_2 + 0xc);
                iVar8 = iVar8 + 0x10;
            } while (local_8 < *puVar7);
        }
    }
    if (*DAT_00df7f2c == 1)
    {
        iVar8 = FUN_0049c810(param_1, puVar7);
        *param_3 = iVar8;
        if (iVar8 != 0)
        {
            iVar8 = FUN_0049c9f0(param_1, puVar7, param_3);
            *param_3 = iVar8;
            return;
        }
    }
    else
    {
        iVar8 = FUN_0049b7d0(param_1, param_3[3], param_3[4], DAT_00df7f7c, *puVar7);
        *param_3 = iVar8;
    }
    return;
}

undefined_32 FUN_00493df0(void)

{
    if (DAT_00df7fd0 != 0)
    {
        return 0xfffffffe;
    }
    DAT_00df7fd0 = 1;
    return 0;
}

void FUN_00493e10(void)

{
    if (DAT_00df7fd4 != 0)
    {
        FUN_00493e60();
    }
    if (DAT_00df7fd0 != 0)
    {
        DAT_00df7fd0 = 0;
    }
    return;
}

undefined_32 FUN_00493e40(void)

{
    if (DAT_00df7fd4 != 0)
    {
        return 0xfffffffe;
    }
    DAT_00df7fd4 = 1;
    return 0;
}

void FUN_00493e60(void)

{
    if (DAT_00df7fd4 != 0)
    {
        DAT_00df7fd4 = 0;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00493e80(float param_1, float param_2)

{
    int iVar1;
    float fVar2;
    float fVar3;
    float10 fVar4;
    undefined_8 local_84[36];
    float local_60;
    float local_5c;
    float local_58;
    undefined_8 local_54[12];
    undefined_8 *local_48;
    undefined_32 local_44;
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_34;
    undefined_32 local_30;
    undefined_32 local_2c;
    float local_28;
    float local_24;
    float local_20;
    float local_1c;
    float local_18;
    float local_14;
    float local_10;
    float local_c;
    float local_8;

    fVar3 = param_1;
    local_40 = 0;
    local_3c = 0;
    iVar1 = *(int *)((int)param_1 + 4);
    local_48 = &DAT_00df83a0;
    rdMatrix_Multiply34(local_84, DAT_00df7f2c + 8, param_2);
    local_34 = 0;
    local_30 = *(undefined_32 *)(iVar1 + 0x40);
    local_2c = 0;
    rdMatrix_TransformPoint34(&local_28, &local_34, local_84);
    _DAT_00df83a0 = local_28 - *(float *)(iVar1 + 0x48);
    _DAT_00df83a4 = local_24 - -0.001;
    _DAT_00df83a8 = local_20 - *(float *)(iVar1 + 0x48);
    _DAT_00df83ac = local_28 + *(float *)(iVar1 + 0x48);
    _DAT_00df83b4 = local_20 - *(float *)(iVar1 + 0x48);
    _DAT_00df83b8 = local_28 + *(float *)(iVar1 + 0x48);
    _DAT_00df83c0 = local_20 + *(float *)(iVar1 + 0x48);
    _DAT_00df83c4 = local_28 - *(float *)(iVar1 + 0x48);
    _DAT_00df83cc = local_20 + *(float *)(iVar1 + 0x48);
    local_44 = *(undefined_32 *)(iVar1 + 0xe8);
    _DAT_00df83b0 = _DAT_00df83a4;
    _DAT_00df83bc = _DAT_00df83a4;
    _DAT_00df83c8 = _DAT_00df83a4;
    FUN_004941d0(fVar3, iVar1 + 0x9c, &DAT_00df83a0, local_54);
    _DAT_00df83a0 = local_60 - *(float *)(iVar1 + 0x44);
    _DAT_00df83a4 = local_5c - -0.001;
    _DAT_00df83a8 = local_58 - *(float *)(iVar1 + 0x44);
    _DAT_00df83ac = local_60 + *(float *)(iVar1 + 0x44);
    _DAT_00df83b4 = local_58 - *(float *)(iVar1 + 0x44);
    _DAT_00df83b8 = local_60 + *(float *)(iVar1 + 0x44);
    _DAT_00df83c0 = local_58 + *(float *)(iVar1 + 0x44);
    _DAT_00df83c4 = local_60 - *(float *)(iVar1 + 0x44);
    _DAT_00df83cc = local_58 + *(float *)(iVar1 + 0x44);
    local_44 = *(undefined_32 *)(iVar1 + 0xe8);
    _DAT_00df83b0 = _DAT_00df83a4;
    _DAT_00df83bc = _DAT_00df83a4;
    _DAT_00df83c8 = _DAT_00df83a4;
    FUN_004941d0(fVar3, iVar1 + 0x9c, &DAT_00df83a0, local_54);
    local_14 = local_28 - local_60;
    local_18 = local_20 - local_58;
    local_10 = SQRT(local_18 * local_18 + local_14 * local_14);
    local_8 = local_10;
    fVar4 = (float10)stdMath_ArcSin3(-local_14 / local_10);
    local_8 = (float)fVar4;
    if (local_18 < 0.0)
    {
        if (local_14 <= 0.0)
        {
            local_8 = -(local_8 - -180.0);
        }
        else
        {
            local_8 = 180.0 - local_8;
        }
    }
    stdMath_SinCos(local_8, &param_2, &param_1);
    local_1c = -*(float *)(iVar1 + 0x44);
    fVar2 = local_10 * param_2;
    local_c = *(float *)(iVar1 + 0x44);
    _DAT_00df83a4 = local_24;
    _DAT_00df83b0 = local_24;
    _DAT_00df83bc = local_5c;
    _DAT_00df83a0 = (*(float *)(iVar1 + 0x48) * param_1 - fVar2) + local_60;
    local_10 = local_10 * param_1;
    _DAT_00df83a8 = *(float *)(iVar1 + 0x48) * param_2 + local_10 + local_58;
    local_14 = 0.0;
    _DAT_00df83ac = (-*(float *)(iVar1 + 0x48) * param_1 - fVar2) + local_60;
    _DAT_00df83b4 = -*(float *)(iVar1 + 0x48) * param_2 + local_10 + local_58;
    _DAT_00df83b8 = (local_1c * param_1 - 0.0) + local_60;
    _DAT_00df83c0 = local_1c * param_2 + 0.0 + local_58;
    _DAT_00df83c4 = (local_c * param_1 - 0.0) + local_60;
    _DAT_00df83c8 = local_5c;
    _DAT_00df83cc = local_c * param_2 + 0.0 + local_58;
    local_44 = *(undefined_32 *)(iVar1 + 0xe4);
    FUN_004941d0(fVar3, iVar1 + 0x54, &DAT_00df83a0, local_54);
    return 1;
}

void FUN_004941d0(int param_1, int param_2, undefined_32 param_3, undefined_32 *param_4)

{
    float *pfVar1;
    int iVar2;
    undefined_32 *puVar3;
    int iVar4;
    undefined_32 uVar5;
    int iVar6;
    uint local_20[3];
    undefined_8 *local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_4;

    puVar3 = (undefined_32 *)FUN_0048dba0();
    if (puVar3 != NULL)
    {
        local_14 = &DAT_00df7fe0;
        local_4 = puVar3[4];
        local_10 = puVar3[5];
        local_c = puVar3[6];
        *param_4 = *(undefined_32 *)(param_2 + 0x10);
        param_4[1] = *(undefined_32 *)(param_2 + 0x14);
        param_4[2] = *(undefined_32 *)(param_2 + 0x18);
        iVar2 = *(int *)(param_2 + 0xc);
        iVar6 = DAT_00ecc424;
        if (iVar2 <= DAT_00ecc424)
        {
            iVar6 = iVar2;
        }
        iVar4 = *(int *)(param_1 + 0x34);
        if ((iVar6 < iVar4) && (iVar4 = DAT_00ecc424, iVar2 <= DAT_00ecc424))
        {
            iVar4 = iVar2;
        }
        puVar3[1] = iVar4;
        FUN_004910a0(*(undefined_32 *)(DAT_00df7f2c + 0x48), *(undefined_32 *)(param_2 + 8), iVar4, param_4, local_20,
                     param_2 + 0x24);
        if (2 < local_20[0])
        {
            (**(code **)(DAT_00df7f2c + 0x50))(local_4, local_14, local_20[0]);
            pfVar1 = (float *)(puVar3 + 9);
            *pfVar1 = *(float *)(param_2 + 0x2c);
            puVar3[10] = *(undefined_32 *)(param_2 + 0x30);
            puVar3[0xb] = *(undefined_32 *)(param_2 + 0x34);
            puVar3[0xc] = *(undefined_32 *)(param_2 + 0x38);
            if ((DAT_00ecc438 & 2) != 0)
            {
                *pfVar1 = *(float *)(DAT_00df7f2c + 0x5c) + *pfVar1;
                puVar3[10] = *(float *)(DAT_00df7f2c + 0x60) + (float)puVar3[10];
                puVar3[0xb] = *(float *)(DAT_00df7f2c + 100) + (float)puVar3[0xb];
                puVar3[0xc] = *(float *)(DAT_00df7f2c + 0x68) + (float)puVar3[0xc];
            }
            uVar5 = 3;
            if (2 < (int)puVar3[1])
            {
                uVar5 = 7;
            }
            puVar3[8] = *(undefined_32 *)(param_1 + 0x28);
            *puVar3 = *(undefined_32 *)(param_2 + 4);
            puVar3[7] = *(undefined_32 *)(param_2 + 0x1c);
            FUN_0048de10(local_20[0], uVar5);
        }
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_00494330(uint param_1, int param_2)

{
    int iVar1;
    undefined_32 uVar2;
    undefined_32 *puVar3;
    int iVar4;
    int iVar5;
    undefined_32 *puVar6;
    undefined_8 local_4c[12];
    undefined_32 local_40;
    undefined_32 local_3c;
    undefined_32 local_38;
    undefined_32 local_34;
    undefined_8 local_30[48];

    iVar1 = *(int *)(param_1 + 4);
    rdMatrix_TransformPoint34(local_4c, param_2 + 0x24, DAT_00df7f2c + 8);
    if (*(int *)(param_1 + 0x38) == 2)
    {
        return 0;
    }
    rdMatrix_Multiply34(local_30, DAT_00df7f2c + 8, param_2);
    if ((DAT_00ecc438 & 2) == 0)
    {
        local_40 = 0;
        local_3c = 0;
        local_38 = 0;
        local_34 = 0;
    }
    else
    {
        local_40 = *(undefined_32 *)(DAT_00df7f2c + 0x5c);
        local_3c = *(undefined_32 *)(DAT_00df7f2c + 0x60);
        local_38 = *(undefined_32 *)(DAT_00df7f2c + 100);
        local_34 = *(undefined_32 *)(DAT_00df7f2c + 0x68);
    }
    uVar2 = *(undefined_32 *)(iVar1 + 0x40);
    rdMatrix_TransformPointLst34(local_30, *(undefined_32 *)(iVar1 + 0x48), &DAT_00df8b20,
                                 *(undefined_32 *)(iVar1 + 0x44));
    iVar5 = 0;
    param_1 = 0;
    if (*(int *)(iVar1 + 0x44) != 0)
    {
        puVar6 = &DAT_00df8b24;
        do
        {
            puVar3 = (undefined_32 *)FUN_0048dc40();
            if (puVar3 == NULL)
            {
                return 0;
            }
            _DAT_00df8760 = (float)puVar6[-1] - *(float *)(iVar1 + 0x58);
            _DAT_00df8764 = *puVar6;
            _DAT_00df8768 = (float)puVar6[1] - *(float *)(iVar1 + 0x58);
            _DAT_00df8770 = *puVar6;
            _DAT_00df876c = (float)puVar6[-1] + *(float *)(iVar1 + 0x58);
            _DAT_00df877c = *puVar6;
            _DAT_00df8774 = (float)puVar6[1] - *(float *)(iVar1 + 0x58);
            _DAT_00df8788 = *puVar6;
            _DAT_00df8778 = (float)puVar6[-1] + *(float *)(iVar1 + 0x58);
            _DAT_00df8780 = (float)puVar6[1] + *(float *)(iVar1 + 0x58);
            _DAT_00df8784 = (float)puVar6[-1] - *(float *)(iVar1 + 0x58);
            _DAT_00df878c = (float)puVar6[1] + *(float *)(iVar1 + 0x58);
            iVar4 = FUN_00495d50(*(undefined_32 *)(DAT_00df7f2c + 0x48), &DAT_00df8760, 4);
            if (iVar4 == 4)
            {
                (**(code **)(DAT_00df7f2c + 0x50))(puVar3[4], &DAT_00df8760, 4);
                *puVar3 = 0;
                puVar3[9] = local_40;
                puVar3[10] = local_3c;
                puVar3[0xb] = local_38;
                puVar3[0xc] = local_34;
                puVar3[1] = uVar2;
                puVar3[7] = *(undefined_32 *)(iVar1 + 0x5c);
                puVar3[8] = *(undefined_32 *)(*(int *)(iVar1 + 0x4c) + param_1 * 4);
                *(undefined_32 *)puVar3[5] = 0;
                *(undefined_32 *)(puVar3[5] + 4) = 0;
                *(undefined_32 *)(puVar3[5] + 8) = 1.0f;
                *(undefined_32 *)(puVar3[5] + 0xc) = 0;
                *(undefined_32 *)(puVar3[5] + 0x10) = 1.0f;
                *(undefined_32 *)(puVar3[5] + 0x14) = 1.0f;
                *(undefined_32 *)(puVar3[5] + 0x18) = 0;
                *(undefined_32 *)(puVar3[5] + 0x1c) = 1.0f;
                puVar3[9] = *(undefined_32 *)(iVar5 + *(int *)(iVar1 + 0x50));
                puVar3[10] = *(undefined_32 *)(iVar5 + 4 + *(int *)(iVar1 + 0x50));
                puVar3[0xb] = *(undefined_32 *)(iVar5 + 8 + *(int *)(iVar1 + 0x50));
                puVar3[0xc] = *(undefined_32 *)(iVar5 + 0xc + *(int *)(iVar1 + 0x50));
                FUN_0048dea0(4, 7);
            }
            param_1 = param_1 + 1;
            puVar6 = puVar6 + 3;
            iVar5 = iVar5 + 0x10;
        } while (param_1 < *(uint *)(iVar1 + 0x44));
    }
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_004945e0(int param_1, int param_2)

{
    float *pfVar1;
    int iVar2;
    uint *puVar3;
    uint uVar4;
    int iVar5;
    undefined_32 *puVar6;
    float local_4c;
    float local_48;
    float local_44;
    uint local_40[3];
    undefined_8 *local_34;
    uint local_30;
    uint local_2c;
    uint local_24;
    undefined_32 local_20;
    undefined_32 local_1c;
    undefined_32 local_18;
    undefined_8 *local_14;
    undefined_32 local_10;
    undefined_32 local_c;
    undefined_32 local_8;

    iVar2 = *(int *)(param_1 + 4);
    rdMatrix_TransformPoint34(&local_4c, param_2 + 0x24, DAT_00df7f2c + 8);
    iVar5 = *(int *)(param_1 + 0x38);
    if (iVar5 != 2)
    {
        puVar3 = (uint *)FUN_0048dc40();
        if (puVar3 != NULL)
        {
            _DAT_00df9ae8 = local_4c + (*(float *)(iVar2 + 0xac) - *(float *)(iVar2 + 0x58));
            _DAT_00df9aec = local_48 + *(float *)(iVar2 + 0xb0);
            _DAT_00df9af0 = local_44 + (*(float *)(iVar2 + 0xb4) - *(float *)(iVar2 + 0x5c));
            _DAT_00df9af4 = local_4c + *(float *)(iVar2 + 0x58) + *(float *)(iVar2 + 0xac);
            _DAT_00df9af8 = local_48 + *(float *)(iVar2 + 0xb0);
            _DAT_00df9afc = local_44 + (*(float *)(iVar2 + 0xb4) - *(float *)(iVar2 + 0x5c));
            _DAT_00df9b08 = local_44 + *(float *)(iVar2 + 0xb4) + *(float *)(iVar2 + 0x5c);
            _DAT_00df9b00 = local_4c + *(float *)(iVar2 + 0x58) + *(float *)(iVar2 + 0xac);
            _DAT_00df9b04 = local_48 + *(float *)(iVar2 + 0xb0);
            _DAT_00df9b0c = local_4c + (*(float *)(iVar2 + 0xac) - *(float *)(iVar2 + 0x58));
            _DAT_00df9b10 = local_48 + *(float *)(iVar2 + 0xb0);
            _DAT_00df9b14 = local_44 + *(float *)(iVar2 + 0xb4) + *(float *)(iVar2 + 0x5c);
            local_20 = *(undefined_32 *)(iVar2 + 0x70);
            local_1c = *(undefined_32 *)(iVar2 + 0x74);
            local_18 = *(undefined_32 *)(iVar2 + 0x78);
            local_14 = &DAT_00df9ae8;
            local_10 = *(undefined_32 *)(iVar2 + 0xa8);
            local_c = 0;
            local_8 = 0;
            local_34 = &DAT_00df9728;
            local_24 = puVar3[4];
            local_30 = puVar3[5];
            local_2c = puVar3[6];
            uVar4 = DAT_00ecc424 & (-1 < (int)DAT_00ecc424) - 1;
            puVar3[1] = uVar4;
            if (iVar5 == 0)
            {
                FUN_00491ac0(*(undefined_32 *)(iVar2 + 0x68), uVar4, &local_20, local_40, iVar2 + 0x84);
            }
            else
            {
                FUN_004910a0(*(undefined_32 *)(DAT_00df7f2c + 0x48), *(undefined_32 *)(iVar2 + 0x68), uVar4, &local_20,
                             local_40, iVar2 + 0x84);
            }
            if (2 < local_40[0])
            {
                uVar4 = 0;
                if (local_40[0] != 0)
                {
                    iVar5 = 0;
                    do
                    {
                        puVar6 = (undefined_32 *)(iVar5 + puVar3[6]);
                        uVar4 = uVar4 + 1;
                        iVar5 = iVar5 + 0x10;
                        *puVar6 = *(undefined_32 *)(iVar2 + 0x8c);
                        puVar6[1] = *(undefined_32 *)(iVar2 + 0x90);
                        puVar6[2] = *(undefined_32 *)(iVar2 + 0x94);
                        puVar6[3] = *(undefined_32 *)(iVar2 + 0x98);
                    } while (uVar4 < local_40[0]);
                }
                (**(code **)(DAT_00df7f2c + 0x50))(local_24, local_34, local_40[0]);
                pfVar1 = (float *)(puVar3 + 9);
                *pfVar1 = *(float *)(iVar2 + 0x8c);
                puVar3[10] = *(uint *)(iVar2 + 0x90);
                puVar3[0xb] = *(uint *)(iVar2 + 0x94);
                puVar3[0xc] = *(uint *)(iVar2 + 0x98);
                if ((DAT_00ecc438 & 2) != 0)
                {
                    *pfVar1 = *(float *)(DAT_00df7f2c + 0x5c) + *pfVar1;
                    puVar3[10] = (uint)(*(float *)(DAT_00df7f2c + 0x60) + (float)puVar3[10]);
                    puVar3[0xb] = (uint)(*(float *)(DAT_00df7f2c + 100) + (float)puVar3[0xb]);
                    puVar3[0xc] = (uint)(*(float *)(DAT_00df7f2c + 0x68) + (float)puVar3[0xc]);
                }
                puVar3[8] = *(uint *)(param_1 + 0x28);
                *puVar3 = *(uint *)(iVar2 + 100) | 0x2e;
                puVar3[7] = *(uint *)(iVar2 + 0x7c);
                uVar4 = DAT_00ecc424;
                if ((int)*(uint *)(iVar2 + 0x6c) <= (int)DAT_00ecc424)
                {
                    uVar4 = *(uint *)(iVar2 + 0x6c);
                }
                puVar3[1] = uVar4;
                FUN_0048dea0(local_40[0], 7);
                return 1;
            }
        }
    }
    return 0;
}

// 00494980
undefined_32 rdClip_Line2(rdCanvas *canvas, int *param_2, int *param_3, int *param_4, int *param_5)

{
    bool bVar1;
    float fVar2;
    bool bVar3;
    int canvas_;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    float local_14;
    float local_10;
    float local_c;
    float local_8;

    canvas_ = (int)canvas;
    uVar5 = rdClip_CalcOutcode2(canvas, *param_2, *param_3);
    uVar6 = rdClip_CalcOutcode2(canvas, *param_4, *param_5);
    if ((uVar5 == 0) && (uVar6 == 0))
    {
        return 1;
    }
    if ((uVar5 & uVar6) == 0)
    {
        canvas = (float)*param_2;
        local_8 = (float)*param_3;
        local_c = (float)*param_4;
        local_10 = (float)*param_5;
        bVar1 = canvas != local_c;
        if (local_8 == local_10)
        {
            bVar3 = true;
        }
        else
        {
            bVar3 = false;
        }
        do
        {
            uVar7 = uVar5;
            if (uVar5 == 0)
            {
                uVar7 = uVar6;
            }
            fVar2 = canvas;
            if ((uVar7 & 0x1000) == 0)
            {
                if ((uVar7 & 0x100) == 0)
                {
                    if ((uVar7 & 0x10) == 0)
                    {
                        if (bVar3)
                        {
                            local_14 = local_8;
                        }
                        else
                        {
                            local_14 =
                                ((float)*(int *)(canvas_ + 0x10) - canvas) * ((local_10 - local_8) / (local_c - canvas))
                                + local_8;
                        }
                        fVar2 = (float)*(int *)(canvas_ + 0x10);
                    }
                    else if (bVar3)
                    {
                        fVar2 = (float)*(int *)(canvas_ + 0x18);
                        local_14 = local_8;
                    }
                    else
                    {
                        local_14 =
                            ((float)*(int *)(canvas_ + 0x18) - canvas) * ((local_10 - local_8) / (local_c - canvas))
                            + local_8;
                        fVar2 = (float)*(int *)(canvas_ + 0x18);
                    }
                }
                else if (bVar1)
                {
                    fVar2 = ((float)*(int *)(canvas_ + 0x1c) - local_8) * ((local_c - canvas) / (local_10 - local_8))
                        + canvas;
                    local_14 = (float)*(int *)(canvas_ + 0x1c);
                }
                else
                {
                    local_14 = (float)*(int *)(canvas_ + 0x1c);
                }
            }
            else if (bVar1)
            {
                local_14 = (float)*(int *)(canvas_ + 0x14);
                fVar2 =
                    ((float)*(int *)(canvas_ + 0x14) - local_8) * ((local_c - canvas) / (local_10 - local_8)) + canvas;
            }
            else
            {
                local_14 = (float)*(int *)(canvas_ + 0x14);
            }
            if (uVar7 == uVar5)
            {
                local_8 = local_14;
                uVar5 = rdClip_CalcOutcode2(canvas_, (int)ROUND(ROUND(fVar2)), (int)ROUND(ROUND(local_14)));
                canvas = fVar2;
            }
            else
            {
                local_10 = local_14;
                uVar6 = rdClip_CalcOutcode2(canvas_, (int)ROUND(ROUND(fVar2)), (int)ROUND(ROUND(local_14)));
                local_c = fVar2;
            }
            if ((uVar5 == 0) && (uVar6 == 0))
            {
                *param_2 = (int)ROUND(ROUND(canvas));
                *param_3 = (int)ROUND(ROUND(local_8));
                *param_4 = (int)ROUND(ROUND(local_c));
                *param_5 = (int)ROUND(ROUND(local_10));
                return 1;
            }
        } while ((uVar5 & uVar6) == 0);
    }
    return 0;
}

// rdClipOutcode2
// 00494c20
uint rdClip_CalcOutcode2(rdCanvas *canvas, int x, int y)

{
    uint result;

    result = 0;
    if (x < canvas->xstart)
    {
        result = CLIP_LEFT;
    }
    else if (canvas->widthMinusOne < x)
    {
        result = CLIP_RIGHT;
    }
    if (y < canvas->yStart)
    {
        return result | CLIP_TOP;
    }
    if (canvas->heightMinusOne < y)
    {
        result = result | CLIP_BOTTOM;
    }
    return result;
}

int FUN_00494c60(int *param_1, float *param_2, int param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    uint uVar8;
    float *pfVar9;
    int iVar10;
    int iVar11;
    int iVar12;
    float *pfVar13;
    float *pfVar14;
    float *pfVar15;
    int local_4;

    iVar12 = 0;
    pfVar13 = (float *)&DAT_00dfa140;
    DAT_00dfaa04 = 0;
    DAT_00dfa138 = param_2;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    if (0 < param_3)
    {
        iVar10 = 0;
        local_4 = param_3;
        pfVar14 = param_2 + param_3 * 3 + -3;
        pfVar15 = param_2;
        do
        {
            fVar2 = (float)param_1[9] * pfVar14[1];
            fVar3 = (float)param_1[9] * pfVar15[1];
            if ((fVar2 <= *pfVar14) || (fVar3 <= *pfVar15))
            {
                iVar11 = iVar10;
                if (((*pfVar14 != fVar2) && (fVar3 != *pfVar15)) && ((*pfVar14 < fVar2 || (*pfVar15 < fVar3))))
                {
                    fVar2 = pfVar15[1] - pfVar14[1];
                    fVar4 = *pfVar15 - *pfVar14;
                    fVar1 = (float)param_1[9] * fVar2 - fVar4;
                    fVar5 = pfVar15[1] * *pfVar14 - pfVar14[1] * *pfVar15;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar1 = -fVar2;
                    }
                    fVar6 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar6 = -fVar4;
                    }
                    if (fVar1 <= fVar6)
                    {
                        fVar2 = ((float)param_1[9] * fVar5 - *pfVar14) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - pfVar14[1]) / fVar2;
                    }
                    *(float *)((int)pfVar13 + iVar10) = (float)param_1[9] * fVar5;
                    iVar12 = iVar12 + 1;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 4) = fVar5;
                    iVar11 = iVar10 + 0xc;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 8) = (pfVar15[2] - pfVar14[2]) * fVar2 + pfVar14[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    pfVar13 = DAT_00df9eb4;
                }
                iVar10 = iVar11;
                if (fVar3 <= *pfVar15)
                {
                    pfVar13 = (float *)((int)pfVar13 + iVar11);
                    iVar12 = iVar12 + 1;
                    iVar10 = iVar11 + 0xc;
                    *pfVar13 = *pfVar15;
                    pfVar13[1] = pfVar15[1];
                    pfVar13[2] = pfVar15[2];
                    pfVar13 = DAT_00df9eb4;
                }
            }
            local_4 = local_4 + -1;
            pfVar14 = pfVar15;
            pfVar15 = pfVar15 + 3;
        } while (local_4 != 0);
    }
    if (2 < iVar12)
    {
        iVar10 = 0;
        pfVar14 = DAT_00dfa138;
        DAT_00df9eb4 = DAT_00dfa138;
        if (0 < iVar12)
        {
            iVar11 = 0;
            pfVar15 = pfVar13 + iVar12 * 3 + -3;
            pfVar9 = pfVar13;
            DAT_00dfa138 = pfVar13;
            local_4 = iVar12;
            do
            {
                fVar2 = (float)param_1[10] * pfVar15[1];
                fVar3 = (float)param_1[10] * pfVar9[1];
                if ((*pfVar15 <= fVar2) || (*pfVar9 <= fVar3))
                {
                    iVar12 = iVar11;
                    if (((*pfVar15 != fVar2) && (fVar3 != *pfVar9)) && ((fVar2 < *pfVar15 || (fVar3 < *pfVar9))))
                    {
                        fVar2 = pfVar9[1] - pfVar15[1];
                        fVar4 = *pfVar9 - *pfVar15;
                        fVar1 = (float)param_1[10] * fVar2 - fVar4;
                        fVar5 = pfVar9[1] * *pfVar15 - pfVar15[1] * *pfVar9;
                        if (fVar1 != 0.0)
                        {
                            fVar5 = fVar5 / fVar1;
                        }
                        fVar1 = fVar2;
                        if (fVar2 < 0.0)
                        {
                            fVar1 = -fVar2;
                        }
                        fVar6 = fVar4;
                        if (fVar4 < 0.0)
                        {
                            fVar6 = -fVar4;
                        }
                        if (fVar1 <= fVar6)
                        {
                            fVar2 = ((float)param_1[10] * fVar5 - *pfVar15) / fVar4;
                        }
                        else
                        {
                            fVar2 = (fVar5 - pfVar15[1]) / fVar2;
                        }
                        *(float *)((int)pfVar14 + iVar11) = (float)param_1[10] * fVar5;
                        iVar10 = iVar10 + 1;
                        *(float *)((int)DAT_00df9eb4 + iVar11 + 4) = fVar5;
                        iVar12 = iVar11 + 0xc;
                        *(float *)((int)DAT_00df9eb4 + iVar11 + 8) = (pfVar9[2] - pfVar15[2]) * fVar2 + pfVar15[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                        pfVar14 = DAT_00df9eb4;
                    }
                    iVar11 = iVar12;
                    if (*pfVar9 <= fVar3)
                    {
                        pfVar14 = (float *)((int)pfVar14 + iVar12);
                        iVar10 = iVar10 + 1;
                        iVar11 = iVar12 + 0xc;
                        *pfVar14 = *pfVar9;
                        pfVar14[1] = pfVar9[1];
                        pfVar14[2] = pfVar9[2];
                        pfVar14 = DAT_00df9eb4;
                    }
                }
                local_4 = local_4 + -1;
                pfVar15 = pfVar9;
                pfVar9 = pfVar9 + 3;
                pfVar13 = DAT_00dfa138;
            } while (local_4 != 0);
        }
        DAT_00dfa138 = pfVar13;
        iVar12 = iVar10;
        if (2 < iVar12)
        {
            iVar10 = 0;
            DAT_00df9eb4 = DAT_00dfa138;
            pfVar13 = pfVar14 + iVar12 * 3 + -3;
            pfVar15 = DAT_00dfa138;
            if (0 < iVar12)
            {
                iVar11 = 0;
                pfVar9 = pfVar14 + 2;
                DAT_00dfa138 = pfVar14;
                local_4 = iVar12;
                do
                {
                    fVar2 = (float)param_1[7] * pfVar13[1];
                    fVar3 = pfVar9[-1] * (float)param_1[7];
                    if ((pfVar13[2] <= fVar2) || (*pfVar9 <= fVar3))
                    {
                        iVar12 = iVar11;
                        if (((pfVar13[2] != fVar2) && (fVar3 != *pfVar9))
                            && ((fVar2 < pfVar13[2] || (fVar3 < *pfVar9))))
                        {
                            fVar2 = pfVar9[-1] - pfVar13[1];
                            fVar4 = *pfVar9 - pfVar13[2];
                            fVar1 = (float)param_1[7] * fVar2 - fVar4;
                            fVar5 = pfVar13[2] * pfVar9[-1] - pfVar13[1] * *pfVar9;
                            if (fVar1 != 0.0)
                            {
                                fVar5 = fVar5 / fVar1;
                            }
                            fVar1 = (float)param_1[7];
                            fVar6 = fVar2;
                            if (fVar2 < 0.0)
                            {
                                fVar6 = -fVar2;
                            }
                            fVar7 = fVar4;
                            if (fVar4 < 0.0)
                            {
                                fVar7 = -fVar4;
                            }
                            if (fVar6 <= fVar7)
                            {
                                fVar2 = (fVar1 * fVar5 - pfVar13[2]) / fVar4;
                            }
                            else
                            {
                                fVar2 = (fVar5 - pfVar13[1]) / fVar2;
                            }
                            iVar10 = iVar10 + 1;
                            iVar12 = iVar11 + 0xc;
                            *(float *)((int)pfVar15 + iVar11) = (pfVar9[-2] - *pfVar13) * fVar2 + *pfVar13;
                            *(float *)((int)DAT_00df9eb4 + iVar11 + 4) = fVar5;
                            *(float *)((int)DAT_00df9eb4 + iVar11 + 8) = fVar1 * fVar5;
                            DAT_00dfaa04 = DAT_00dfaa04 | 4;
                            pfVar15 = DAT_00df9eb4;
                        }
                        iVar11 = iVar12;
                        if (*pfVar9 <= fVar3)
                        {
                            pfVar15 = (float *)((int)pfVar15 + iVar12);
                            iVar10 = iVar10 + 1;
                            iVar11 = iVar12 + 0xc;
                            *pfVar15 = pfVar9[-2];
                            pfVar15[1] = pfVar9[-1];
                            pfVar15[2] = *pfVar9;
                            pfVar15 = DAT_00df9eb4;
                        }
                    }
                    pfVar13 = pfVar9 + -2;
                    pfVar9 = pfVar9 + 3;
                    local_4 = local_4 + -1;
                    pfVar14 = DAT_00dfa138;
                } while (local_4 != 0);
            }
            DAT_00dfa138 = pfVar14;
            iVar12 = iVar10;
            if (2 < iVar12)
            {
                iVar10 = 0;
                DAT_00df9eb4 = DAT_00dfa138;
                pfVar13 = pfVar15 + iVar12 * 3 + -3;
                pfVar14 = DAT_00dfa138;
                if (0 < iVar12)
                {
                    iVar11 = 0;
                    pfVar9 = pfVar15 + 2;
                    DAT_00dfa138 = pfVar15;
                    local_4 = iVar12;
                    do
                    {
                        fVar2 = (float)param_1[8] * pfVar13[1];
                        fVar3 = pfVar9[-1] * (float)param_1[8];
                        if ((fVar2 <= pfVar13[2]) || (fVar3 <= *pfVar9))
                        {
                            iVar12 = iVar11;
                            if (((pfVar13[2] != fVar2) && (fVar3 != *pfVar9))
                                && ((pfVar13[2] < fVar2 || (*pfVar9 < fVar3))))
                            {
                                fVar2 = pfVar9[-1] - pfVar13[1];
                                fVar4 = *pfVar9 - pfVar13[2];
                                fVar1 = (float)param_1[8] * fVar2 - fVar4;
                                fVar5 = pfVar13[2] * pfVar9[-1] - pfVar13[1] * *pfVar9;
                                if (fVar1 != 0.0)
                                {
                                    fVar5 = fVar5 / fVar1;
                                }
                                fVar1 = (float)param_1[8];
                                fVar6 = fVar2;
                                if (fVar2 < 0.0)
                                {
                                    fVar6 = -fVar2;
                                }
                                fVar7 = fVar4;
                                if (fVar4 < 0.0)
                                {
                                    fVar7 = -fVar4;
                                }
                                if (fVar6 <= fVar7)
                                {
                                    fVar2 = (fVar1 * fVar5 - pfVar13[2]) / fVar4;
                                }
                                else
                                {
                                    fVar2 = (fVar5 - pfVar13[1]) / fVar2;
                                }
                                iVar10 = iVar10 + 1;
                                iVar12 = iVar11 + 0xc;
                                *(float *)((int)pfVar14 + iVar11) = (pfVar9[-2] - *pfVar13) * fVar2 + *pfVar13;
                                *(float *)((int)DAT_00df9eb4 + iVar11 + 4) = fVar5;
                                *(float *)((int)DAT_00df9eb4 + iVar11 + 8) = fVar1 * fVar5;
                                DAT_00dfaa04 = DAT_00dfaa04 | 8;
                                pfVar14 = DAT_00df9eb4;
                            }
                            iVar11 = iVar12;
                            if (fVar3 <= *pfVar9)
                            {
                                pfVar14 = (float *)((int)pfVar14 + iVar12);
                                iVar10 = iVar10 + 1;
                                iVar11 = iVar12 + 0xc;
                                *pfVar14 = pfVar9[-2];
                                pfVar14[1] = pfVar9[-1];
                                pfVar14[2] = *pfVar9;
                                pfVar14 = DAT_00df9eb4;
                            }
                        }
                        pfVar13 = pfVar9 + -2;
                        pfVar9 = pfVar9 + 3;
                        local_4 = local_4 + -1;
                        pfVar15 = DAT_00dfa138;
                    } while (local_4 != 0);
                }
                DAT_00dfa138 = pfVar15;
                iVar12 = iVar10;
                if (2 < iVar12)
                {
                    iVar10 = 0;
                    DAT_00df9eb4 = DAT_00dfa138;
                    pfVar13 = pfVar14 + iVar12 * 3 + -3;
                    pfVar15 = DAT_00dfa138;
                    if (0 < iVar12)
                    {
                        pfVar9 = pfVar14 + 1;
                        iVar11 = 0;
                        DAT_00dfa138 = pfVar14;
                        param_3 = iVar12;
                        do
                        {
                            iVar12 = iVar11;
                            if (((float)param_1[1] <= pfVar13[1]) || ((float)param_1[1] <= *pfVar9))
                            {
                                if (((pfVar13[1] != (float)param_1[1]) && (*pfVar9 != (float)param_1[1]))
                                    && ((pfVar13[1] < (float)param_1[1] || (*pfVar9 < (float)param_1[1]))))
                                {
                                    iVar10 = iVar10 + 1;
                                    fVar2 = ((float)param_1[1] - pfVar13[1]) / (*pfVar9 - pfVar13[1]);
                                    *(int *)((int)pfVar15 + iVar11 + 4) = param_1[1];
                                    iVar12 = iVar11 + 0xc;
                                    *(float *)((int)DAT_00df9eb4 + iVar11 + 8) =
                                        (pfVar9[1] - pfVar13[2]) * fVar2 + pfVar13[2];
                                    *(float *)((int)DAT_00df9eb4 + iVar11) = (pfVar9[-1] - *pfVar13) * fVar2 + *pfVar13;
                                    DAT_00dfaa04 = DAT_00dfaa04 | 1;
                                    pfVar15 = DAT_00df9eb4;
                                }
                                if ((float)param_1[1] <= *pfVar9)
                                {
                                    pfVar15 = (float *)((int)pfVar15 + iVar12);
                                    iVar10 = iVar10 + 1;
                                    iVar12 = iVar12 + 0xc;
                                    *pfVar15 = pfVar9[-1];
                                    pfVar15[1] = *pfVar9;
                                    pfVar15[2] = pfVar9[1];
                                    pfVar15 = DAT_00df9eb4;
                                }
                            }
                            pfVar13 = pfVar9 + -1;
                            pfVar9 = pfVar9 + 3;
                            param_3 = param_3 + -1;
                            iVar11 = iVar12;
                            pfVar14 = DAT_00dfa138;
                        } while (param_3 != 0);
                    }
                    DAT_00dfa138 = pfVar14;
                    if (iVar10 < 3)
                    {
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
                        return iVar10;
                    }
                    iVar12 = iVar10;
                    pfVar13 = pfVar15;
                    if (*param_1 != 0)
                    {
                        iVar12 = 0;
                        pfVar14 = pfVar15 + iVar10 * 3 + -3;
                        pfVar13 = DAT_00dfa138;
                        DAT_00df9eb4 = DAT_00dfa138;
                        if (0 < iVar10)
                        {
                            pfVar9 = pfVar15 + 1;
                            iVar11 = 0;
                            DAT_00dfa138 = pfVar15;
                            param_3 = iVar10;
                            do
                            {
                                iVar10 = iVar11;
                                if ((pfVar14[1] <= (float)param_1[2]) || (*pfVar9 <= (float)param_1[2]))
                                {
                                    if (((pfVar14[1] != (float)param_1[2]) && (*pfVar9 != (float)param_1[2]))
                                        && (((float)param_1[2] < pfVar14[1] || ((float)param_1[2] < *pfVar9))))
                                    {
                                        iVar12 = iVar12 + 1;
                                        fVar2 = ((float)param_1[2] - pfVar14[1]) / (*pfVar9 - pfVar14[1]);
                                        *(int *)((int)pfVar13 + iVar11 + 4) = param_1[2];
                                        iVar10 = iVar11 + 0xc;
                                        *(float *)((int)DAT_00df9eb4 + iVar11 + 8) =
                                            (pfVar9[1] - pfVar14[2]) * fVar2 + pfVar14[2];
                                        *(float *)((int)DAT_00df9eb4 + iVar11) =
                                            (pfVar9[-1] - *pfVar14) * fVar2 + *pfVar14;
                                        DAT_00dfaa04 = DAT_00dfaa04 | 2;
                                        pfVar13 = DAT_00df9eb4;
                                    }
                                    if (*pfVar9 <= (float)param_1[2])
                                    {
                                        pfVar13 = (float *)((int)pfVar13 + iVar10);
                                        iVar12 = iVar12 + 1;
                                        iVar10 = iVar10 + 0xc;
                                        *pfVar13 = pfVar9[-1];
                                        pfVar13[1] = *pfVar9;
                                        pfVar13[2] = pfVar9[1];
                                        pfVar13 = DAT_00df9eb4;
                                    }
                                }
                                pfVar14 = pfVar9 + -1;
                                pfVar9 = pfVar9 + 3;
                                param_3 = param_3 + -1;
                                iVar11 = iVar10;
                                pfVar15 = DAT_00dfa138;
                            } while (param_3 != 0);
                        }
                        DAT_00dfa138 = pfVar15;
                        if (iVar12 < 3)
                        {
                            return iVar12;
                        }
                    }
                    if (pfVar13 != param_2)
                    {
                        QMEMCPY(uVar8, pfVar13, param_2, iVar12 * 3 & 0x3fffffff)
                        for (iVar10 = 0; iVar10 != 0; iVar10 = iVar10 + -1)
                        {
                            *(undefined_8 *)param_2 = *(undefined_8 *)pfVar13;
                            pfVar13 = (float *)((int)pfVar13 + 1);
                            param_2 = (float *)((int)param_2 + 1);
                        }
                    }
                }
            }
        }
    }
    return iVar12;
}

int FUN_00495600(int *param_1, float *param_2, int param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    uint uVar4;
    float *pfVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    float *pfVar9;
    float *pfVar10;
    float *pfVar11;

    iVar6 = 0;
    pfVar9 = (float *)&DAT_00dfa140;
    iVar8 = 0;
    DAT_00dfaa04 = 0;
    DAT_00dfa138 = param_2;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    pfVar10 = param_2 + param_3 * 3 + -3;
    pfVar11 = param_2;
    if (0 < param_3)
    {
        do
        {
            fVar2 = (float)param_1[3];
            fVar1 = (float)param_1[3];
            if ((fVar2 <= *pfVar10) || (fVar1 <= *pfVar11))
            {
                iVar7 = iVar6;
                if (((*pfVar10 != fVar2) && (fVar1 != *pfVar11)) && ((*pfVar10 < fVar2 || (*pfVar11 < fVar1))))
                {
                    fVar3 = (*pfVar11 - *pfVar10) / (fVar2 - *pfVar10);
                    iVar8 = iVar8 + 1;
                    iVar7 = iVar6 + 0xc;
                    *(float *)((int)pfVar9 + iVar6) = fVar2;
                    *(float *)((int)DAT_00df9eb4 + iVar6 + 4) = (pfVar11[1] - pfVar10[1]) * fVar3 + pfVar10[1];
                    *(float *)((int)DAT_00df9eb4 + iVar6 + 8) = (pfVar11[2] - pfVar10[2]) * fVar3 + pfVar10[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    pfVar9 = DAT_00df9eb4;
                }
                iVar6 = iVar7;
                if (fVar1 <= *pfVar11)
                {
                    pfVar9 = (float *)((int)pfVar9 + iVar7);
                    iVar8 = iVar8 + 1;
                    iVar6 = iVar7 + 0xc;
                    *pfVar9 = *pfVar11;
                    pfVar9[1] = pfVar11[1];
                    pfVar9[2] = pfVar11[2];
                    pfVar9 = DAT_00df9eb4;
                }
            }
            param_3 = param_3 + -1;
            pfVar10 = pfVar11;
            pfVar11 = pfVar11 + 3;
        } while (param_3 != 0);
    }
    if (2 < iVar8)
    {
        iVar6 = 0;
        pfVar10 = DAT_00dfa138;
        DAT_00df9eb4 = DAT_00dfa138;
        if (0 < iVar8)
        {
            iVar7 = 0;
            pfVar11 = pfVar9 + iVar8 * 3 + -3;
            pfVar5 = pfVar9;
            DAT_00dfa138 = pfVar9;
            param_3 = iVar8;
            do
            {
                fVar2 = (float)param_1[5];
                fVar1 = (float)param_1[5];
                if ((*pfVar11 <= fVar2) || (*pfVar5 <= fVar1))
                {
                    iVar8 = iVar7;
                    if (((*pfVar11 != fVar2) && (fVar1 != *pfVar5)) && ((fVar2 < *pfVar11 || (fVar1 < *pfVar5))))
                    {
                        fVar3 = (*pfVar5 - *pfVar11) / (fVar2 - *pfVar11);
                        iVar6 = iVar6 + 1;
                        iVar8 = iVar7 + 0xc;
                        *(float *)((int)pfVar10 + iVar7) = fVar2;
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 4) = (pfVar5[1] - pfVar11[1]) * fVar3 + pfVar11[1];
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = (pfVar5[2] - pfVar11[2]) * fVar3 + pfVar11[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                        pfVar10 = DAT_00df9eb4;
                    }
                    iVar7 = iVar8;
                    if (*pfVar5 <= fVar1)
                    {
                        pfVar10 = (float *)((int)pfVar10 + iVar8);
                        iVar6 = iVar6 + 1;
                        iVar7 = iVar8 + 0xc;
                        *pfVar10 = *pfVar5;
                        pfVar10[1] = pfVar5[1];
                        pfVar10[2] = pfVar5[2];
                        pfVar10 = DAT_00df9eb4;
                    }
                }
                param_3 = param_3 + -1;
                pfVar11 = pfVar5;
                pfVar5 = pfVar5 + 3;
                pfVar9 = DAT_00dfa138;
            } while (param_3 != 0);
        }
        DAT_00dfa138 = pfVar9;
        iVar8 = iVar6;
        if (2 < iVar8)
        {
            iVar6 = 0;
            pfVar11 = pfVar10 + iVar8 * 3 + -3;
            pfVar9 = DAT_00dfa138;
            DAT_00df9eb4 = DAT_00dfa138;
            if (0 < iVar8)
            {
                pfVar5 = pfVar10 + 2;
                iVar7 = 0;
                DAT_00dfa138 = pfVar10;
                param_3 = iVar8;
                do
                {
                    fVar2 = (float)param_1[4];
                    fVar1 = (float)param_1[4];
                    if ((pfVar11[2] <= fVar2) || (*pfVar5 <= fVar1))
                    {
                        iVar8 = iVar7;
                        if (((pfVar11[2] != fVar2) && (fVar1 != *pfVar5))
                            && ((fVar2 < pfVar11[2] || (fVar1 < *pfVar5))))
                        {
                            fVar3 = (*pfVar5 - pfVar11[2]) / (fVar2 - pfVar11[2]);
                            iVar6 = iVar6 + 1;
                            iVar8 = iVar7 + 0xc;
                            *(float *)((int)pfVar9 + iVar7) = (pfVar5[-2] - *pfVar11) * fVar3 + *pfVar11;
                            *(float *)((int)DAT_00df9eb4 + iVar7 + 4) = (pfVar5[-1] - pfVar11[1]) * fVar3 + pfVar11[1];
                            *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = fVar2;
                            DAT_00dfaa04 = DAT_00dfaa04 | 4;
                            pfVar9 = DAT_00df9eb4;
                        }
                        iVar7 = iVar8;
                        if (*pfVar5 <= fVar1)
                        {
                            pfVar9 = (float *)((int)pfVar9 + iVar8);
                            iVar6 = iVar6 + 1;
                            iVar7 = iVar8 + 0xc;
                            *pfVar9 = pfVar5[-2];
                            pfVar9[1] = pfVar5[-1];
                            pfVar9[2] = *pfVar5;
                            pfVar9 = DAT_00df9eb4;
                        }
                    }
                    pfVar11 = pfVar5 + -2;
                    pfVar5 = pfVar5 + 3;
                    param_3 = param_3 + -1;
                    pfVar10 = DAT_00dfa138;
                } while (param_3 != 0);
            }
            DAT_00dfa138 = pfVar10;
            iVar8 = iVar6;
            if (2 < iVar8)
            {
                iVar6 = 0;
                pfVar10 = pfVar9 + iVar8 * 3 + -3;
                pfVar11 = DAT_00dfa138;
                DAT_00df9eb4 = DAT_00dfa138;
                if (0 < iVar8)
                {
                    pfVar5 = pfVar9 + 2;
                    iVar7 = 0;
                    DAT_00dfa138 = pfVar9;
                    param_3 = iVar8;
                    do
                    {
                        fVar2 = (float)param_1[6];
                        fVar1 = (float)param_1[6];
                        if ((fVar2 <= pfVar10[2]) || (fVar1 <= *pfVar5))
                        {
                            iVar8 = iVar7;
                            if (((pfVar10[2] != fVar2) && (fVar1 != *pfVar5))
                                && ((pfVar10[2] < fVar2 || (*pfVar5 < fVar1))))
                            {
                                fVar3 = (*pfVar5 - pfVar10[2]) / (fVar2 - pfVar10[2]);
                                iVar6 = iVar6 + 1;
                                iVar8 = iVar7 + 0xc;
                                *(float *)((int)pfVar11 + iVar7) = (pfVar5[-2] - *pfVar10) * fVar3 + *pfVar10;
                                *(float *)((int)DAT_00df9eb4 + iVar7 + 4) =
                                    (pfVar5[-1] - pfVar10[1]) * fVar3 + pfVar10[1];
                                *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = fVar2;
                                DAT_00dfaa04 = DAT_00dfaa04 | 8;
                                pfVar11 = DAT_00df9eb4;
                            }
                            iVar7 = iVar8;
                            if (fVar1 <= *pfVar5)
                            {
                                pfVar11 = (float *)((int)pfVar11 + iVar8);
                                iVar6 = iVar6 + 1;
                                iVar7 = iVar8 + 0xc;
                                *pfVar11 = pfVar5[-2];
                                pfVar11[1] = pfVar5[-1];
                                pfVar11[2] = *pfVar5;
                                pfVar11 = DAT_00df9eb4;
                            }
                        }
                        pfVar10 = pfVar5 + -2;
                        pfVar5 = pfVar5 + 3;
                        param_3 = param_3 + -1;
                        pfVar9 = DAT_00dfa138;
                    } while (param_3 != 0);
                }
                DAT_00dfa138 = pfVar9;
                iVar8 = iVar6;
                if (2 < iVar8)
                {
                    iVar6 = 0;
                    pfVar10 = pfVar11 + iVar8 * 3 + -3;
                    pfVar9 = DAT_00dfa138;
                    DAT_00df9eb4 = DAT_00dfa138;
                    if (0 < iVar8)
                    {
                        pfVar5 = pfVar11 + 1;
                        iVar7 = 0;
                        DAT_00dfa138 = pfVar11;
                        param_3 = iVar8;
                        do
                        {
                            iVar8 = iVar7;
                            if (((float)param_1[1] <= pfVar10[1]) || ((float)param_1[1] <= *pfVar5))
                            {
                                if (((pfVar10[1] != (float)param_1[1]) && (*pfVar5 != (float)param_1[1]))
                                    && ((pfVar10[1] < (float)param_1[1] || (*pfVar5 < (float)param_1[1]))))
                                {
                                    iVar6 = iVar6 + 1;
                                    fVar1 = ((float)param_1[1] - pfVar10[1]) / (*pfVar5 - pfVar10[1]);
                                    *(int *)((int)pfVar9 + iVar7 + 4) = param_1[1];
                                    iVar8 = iVar7 + 0xc;
                                    *(float *)((int)DAT_00df9eb4 + iVar7 + 8) =
                                        (pfVar5[1] - pfVar10[2]) * fVar1 + pfVar10[2];
                                    *(float *)((int)DAT_00df9eb4 + iVar7) = (pfVar5[-1] - *pfVar10) * fVar1 + *pfVar10;
                                    DAT_00dfaa04 = DAT_00dfaa04 | 1;
                                    pfVar9 = DAT_00df9eb4;
                                }
                                if ((float)param_1[1] <= *pfVar5)
                                {
                                    pfVar9 = (float *)((int)pfVar9 + iVar8);
                                    iVar6 = iVar6 + 1;
                                    iVar8 = iVar8 + 0xc;
                                    *pfVar9 = pfVar5[-1];
                                    pfVar9[1] = *pfVar5;
                                    pfVar9[2] = pfVar5[1];
                                    pfVar9 = DAT_00df9eb4;
                                }
                            }
                            pfVar10 = pfVar5 + -1;
                            pfVar5 = pfVar5 + 3;
                            param_3 = param_3 + -1;
                            iVar7 = iVar8;
                            pfVar11 = DAT_00dfa138;
                        } while (param_3 != 0);
                    }
                    DAT_00dfa138 = pfVar11;
                    if (iVar6 < 3)
                    {
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
                        return iVar6;
                    }
                    iVar8 = iVar6;
                    pfVar10 = pfVar9;
                    if (*param_1 != 0)
                    {
                        iVar8 = 0;
                        pfVar11 = pfVar9 + iVar6 * 3 + -3;
                        pfVar10 = DAT_00dfa138;
                        DAT_00df9eb4 = DAT_00dfa138;
                        if (0 < iVar6)
                        {
                            pfVar5 = pfVar9 + 1;
                            iVar7 = 0;
                            DAT_00dfa138 = pfVar9;
                            param_3 = iVar6;
                            do
                            {
                                iVar6 = iVar7;
                                if ((pfVar11[1] <= (float)param_1[2]) || (*pfVar5 <= (float)param_1[2]))
                                {
                                    if (((pfVar11[1] != (float)param_1[2]) && (*pfVar5 != (float)param_1[2]))
                                        && (((float)param_1[2] < pfVar11[1] || ((float)param_1[2] < *pfVar5))))
                                    {
                                        iVar8 = iVar8 + 1;
                                        fVar1 = ((float)param_1[2] - pfVar11[1]) / (*pfVar5 - pfVar11[1]);
                                        *(int *)((int)pfVar10 + iVar7 + 4) = param_1[2];
                                        iVar6 = iVar7 + 0xc;
                                        *(float *)((int)DAT_00df9eb4 + iVar7 + 8) =
                                            (pfVar5[1] - pfVar11[2]) * fVar1 + pfVar11[2];
                                        *(float *)((int)DAT_00df9eb4 + iVar7) =
                                            (pfVar5[-1] - *pfVar11) * fVar1 + *pfVar11;
                                        DAT_00dfaa04 = DAT_00dfaa04 | 2;
                                        pfVar10 = DAT_00df9eb4;
                                    }
                                    if (*pfVar5 <= (float)param_1[2])
                                    {
                                        pfVar10 = (float *)((int)pfVar10 + iVar6);
                                        iVar8 = iVar8 + 1;
                                        iVar6 = iVar6 + 0xc;
                                        *pfVar10 = pfVar5[-1];
                                        pfVar10[1] = *pfVar5;
                                        pfVar10[2] = pfVar5[1];
                                        pfVar10 = DAT_00df9eb4;
                                    }
                                }
                                pfVar11 = pfVar5 + -1;
                                pfVar5 = pfVar5 + 3;
                                param_3 = param_3 + -1;
                                iVar7 = iVar6;
                                pfVar9 = DAT_00dfa138;
                            } while (param_3 != 0);
                        }
                        DAT_00dfa138 = pfVar9;
                        if (iVar8 < 3)
                        {
                            return iVar8;
                        }
                    }
                    if (pfVar10 != param_2)
                    {
                        QMEMCPY(uVar4, pfVar10, param_2, iVar8 * 3 & 0x3fffffff)
                        for (iVar6 = 0; iVar6 != 0; iVar6 = iVar6 + -1)
                        {
                            *(undefined_8 *)param_2 = *(undefined_8 *)pfVar10;
                            pfVar10 = (float *)((int)pfVar10 + 1);
                            param_2 = (float *)((int)param_2 + 1);
                        }
                    }
                }
            }
        }
    }
    return iVar8;
}

int FUN_00495d50(int *param_1, float *param_2, int param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    uint uVar8;
    float *pfVar9;
    int iVar10;
    int iVar11;
    int iVar12;
    float *pfVar13;
    float *pfVar14;
    float *pfVar15;
    int local_4;

    iVar12 = 0;
    pfVar13 = (float *)&DAT_00dfa140;
    DAT_00dfaa04 = 0;
    DAT_00dfa138 = param_2;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    if (0 < param_3)
    {
        iVar10 = 0;
        local_4 = param_3;
        pfVar14 = param_2 + param_3 * 3 + -3;
        pfVar15 = param_2;
        do
        {
            fVar2 = (float)param_1[0xc] * pfVar14[1];
            fVar3 = (float)param_1[0xc] * pfVar15[1];
            if ((fVar2 <= *pfVar14) || (fVar3 <= *pfVar15))
            {
                iVar11 = iVar10;
                if (((*pfVar14 != fVar2) && (fVar3 != *pfVar15)) && ((*pfVar14 < fVar2 || (*pfVar15 < fVar3))))
                {
                    fVar2 = pfVar15[1] - pfVar14[1];
                    fVar4 = *pfVar15 - *pfVar14;
                    fVar1 = (float)param_1[0xc] * fVar2 - fVar4;
                    fVar5 = pfVar15[1] * *pfVar14 - pfVar14[1] * *pfVar15;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar1 = -fVar2;
                    }
                    fVar6 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar6 = -fVar4;
                    }
                    if (fVar1 <= fVar6)
                    {
                        fVar2 = ((float)param_1[0xc] * fVar5 - *pfVar14) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - pfVar14[1]) / fVar2;
                    }
                    *(float *)((int)pfVar13 + iVar10) = (float)param_1[0xc] * fVar5;
                    iVar12 = iVar12 + 1;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 4) = fVar5;
                    iVar11 = iVar10 + 0xc;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 8) = (pfVar15[2] - pfVar14[2]) * fVar2 + pfVar14[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    pfVar13 = DAT_00df9eb4;
                }
                iVar10 = iVar11;
                if (fVar3 <= *pfVar15)
                {
                    pfVar13 = (float *)((int)pfVar13 + iVar11);
                    iVar12 = iVar12 + 1;
                    iVar10 = iVar11 + 0xc;
                    *pfVar13 = *pfVar15;
                    pfVar13[1] = pfVar15[1];
                    pfVar13[2] = pfVar15[2];
                    pfVar13 = DAT_00df9eb4;
                }
            }
            local_4 = local_4 + -1;
            pfVar14 = pfVar15;
            pfVar15 = pfVar15 + 3;
        } while (local_4 != 0);
    }
    if (2 < iVar12)
    {
        iVar10 = 0;
        pfVar14 = DAT_00dfa138;
        DAT_00df9eb4 = DAT_00dfa138;
        if (0 < iVar12)
        {
            iVar11 = 0;
            pfVar15 = pfVar13 + iVar12 * 3 + -3;
            pfVar9 = pfVar13;
            DAT_00dfa138 = pfVar13;
            local_4 = iVar12;
            do
            {
                fVar2 = (float)param_1[10] * pfVar15[1];
                fVar3 = (float)param_1[10] * pfVar9[1];
                if ((*pfVar15 <= fVar2) || (*pfVar9 <= fVar3))
                {
                    iVar12 = iVar11;
                    if (((*pfVar15 != fVar2) && (fVar3 != *pfVar9)) && ((fVar2 < *pfVar15 || (fVar3 < *pfVar9))))
                    {
                        fVar2 = pfVar9[1] - pfVar15[1];
                        fVar4 = *pfVar9 - *pfVar15;
                        fVar1 = (float)param_1[10] * fVar2 - fVar4;
                        fVar5 = pfVar9[1] * *pfVar15 - pfVar15[1] * *pfVar9;
                        if (fVar1 != 0.0)
                        {
                            fVar5 = fVar5 / fVar1;
                        }
                        fVar1 = fVar2;
                        if (fVar2 < 0.0)
                        {
                            fVar1 = -fVar2;
                        }
                        fVar6 = fVar4;
                        if (fVar4 < 0.0)
                        {
                            fVar6 = -fVar4;
                        }
                        if (fVar1 <= fVar6)
                        {
                            fVar2 = ((float)param_1[10] * fVar5 - *pfVar15) / fVar4;
                        }
                        else
                        {
                            fVar2 = (fVar5 - pfVar15[1]) / fVar2;
                        }
                        *(float *)((int)pfVar14 + iVar11) = (float)param_1[10] * fVar5;
                        iVar10 = iVar10 + 1;
                        *(float *)((int)DAT_00df9eb4 + iVar11 + 4) = fVar5;
                        iVar12 = iVar11 + 0xc;
                        *(float *)((int)DAT_00df9eb4 + iVar11 + 8) = (pfVar9[2] - pfVar15[2]) * fVar2 + pfVar15[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                        pfVar14 = DAT_00df9eb4;
                    }
                    iVar11 = iVar12;
                    if (*pfVar9 <= fVar3)
                    {
                        pfVar14 = (float *)((int)pfVar14 + iVar12);
                        iVar10 = iVar10 + 1;
                        iVar11 = iVar12 + 0xc;
                        *pfVar14 = *pfVar9;
                        pfVar14[1] = pfVar9[1];
                        pfVar14[2] = pfVar9[2];
                        pfVar14 = DAT_00df9eb4;
                    }
                }
                local_4 = local_4 + -1;
                pfVar15 = pfVar9;
                pfVar9 = pfVar9 + 3;
                pfVar13 = DAT_00dfa138;
            } while (local_4 != 0);
        }
        DAT_00dfa138 = pfVar13;
        iVar12 = iVar10;
        if (2 < iVar12)
        {
            iVar10 = 0;
            DAT_00df9eb4 = DAT_00dfa138;
            pfVar13 = pfVar14 + iVar12 * 3 + -3;
            pfVar15 = DAT_00dfa138;
            if (0 < iVar12)
            {
                iVar11 = 0;
                pfVar9 = pfVar14 + 2;
                DAT_00dfa138 = pfVar14;
                local_4 = iVar12;
                do
                {
                    fVar2 = (float)param_1[0xb] * pfVar13[1];
                    fVar3 = pfVar9[-1] * (float)param_1[0xb];
                    if ((pfVar13[2] <= fVar2) || (*pfVar9 <= fVar3))
                    {
                        iVar12 = iVar11;
                        if (((pfVar13[2] != fVar2) && (fVar3 != *pfVar9))
                            && ((fVar2 < pfVar13[2] || (fVar3 < *pfVar9))))
                        {
                            fVar2 = pfVar9[-1] - pfVar13[1];
                            fVar4 = *pfVar9 - pfVar13[2];
                            fVar1 = (float)param_1[0xb] * fVar2 - fVar4;
                            fVar5 = pfVar13[2] * pfVar9[-1] - pfVar13[1] * *pfVar9;
                            if (fVar1 != 0.0)
                            {
                                fVar5 = fVar5 / fVar1;
                            }
                            fVar1 = (float)param_1[0xb];
                            fVar6 = fVar2;
                            if (fVar2 < 0.0)
                            {
                                fVar6 = -fVar2;
                            }
                            fVar7 = fVar4;
                            if (fVar4 < 0.0)
                            {
                                fVar7 = -fVar4;
                            }
                            if (fVar6 <= fVar7)
                            {
                                fVar2 = (fVar1 * fVar5 - pfVar13[2]) / fVar4;
                            }
                            else
                            {
                                fVar2 = (fVar5 - pfVar13[1]) / fVar2;
                            }
                            iVar10 = iVar10 + 1;
                            iVar12 = iVar11 + 0xc;
                            *(float *)((int)pfVar15 + iVar11) = (pfVar9[-2] - *pfVar13) * fVar2 + *pfVar13;
                            *(float *)((int)DAT_00df9eb4 + iVar11 + 4) = fVar5;
                            *(float *)((int)DAT_00df9eb4 + iVar11 + 8) = fVar1 * fVar5;
                            DAT_00dfaa04 = DAT_00dfaa04 | 4;
                            pfVar15 = DAT_00df9eb4;
                        }
                        iVar11 = iVar12;
                        if (*pfVar9 <= fVar3)
                        {
                            pfVar15 = (float *)((int)pfVar15 + iVar12);
                            iVar10 = iVar10 + 1;
                            iVar11 = iVar12 + 0xc;
                            *pfVar15 = pfVar9[-2];
                            pfVar15[1] = pfVar9[-1];
                            pfVar15[2] = *pfVar9;
                            pfVar15 = DAT_00df9eb4;
                        }
                    }
                    pfVar13 = pfVar9 + -2;
                    pfVar9 = pfVar9 + 3;
                    local_4 = local_4 + -1;
                    pfVar14 = DAT_00dfa138;
                } while (local_4 != 0);
            }
            DAT_00dfa138 = pfVar14;
            iVar12 = iVar10;
            if (2 < iVar12)
            {
                iVar10 = 0;
                DAT_00df9eb4 = DAT_00dfa138;
                pfVar13 = pfVar15 + iVar12 * 3 + -3;
                pfVar14 = DAT_00dfa138;
                if (0 < iVar12)
                {
                    iVar11 = 0;
                    pfVar9 = pfVar15 + 2;
                    DAT_00dfa138 = pfVar15;
                    local_4 = iVar12;
                    do
                    {
                        fVar2 = (float)param_1[8] * pfVar13[1];
                        fVar3 = pfVar9[-1] * (float)param_1[8];
                        if ((fVar2 <= pfVar13[2]) || (fVar3 <= *pfVar9))
                        {
                            iVar12 = iVar11;
                            if (((pfVar13[2] != fVar2) && (fVar3 != *pfVar9))
                                && ((pfVar13[2] < fVar2 || (*pfVar9 < fVar3))))
                            {
                                fVar2 = pfVar9[-1] - pfVar13[1];
                                fVar4 = *pfVar9 - pfVar13[2];
                                fVar1 = (float)param_1[8] * fVar2 - fVar4;
                                fVar5 = pfVar13[2] * pfVar9[-1] - pfVar13[1] * *pfVar9;
                                if (fVar1 != 0.0)
                                {
                                    fVar5 = fVar5 / fVar1;
                                }
                                fVar1 = (float)param_1[8];
                                fVar6 = fVar2;
                                if (fVar2 < 0.0)
                                {
                                    fVar6 = -fVar2;
                                }
                                fVar7 = fVar4;
                                if (fVar4 < 0.0)
                                {
                                    fVar7 = -fVar4;
                                }
                                if (fVar6 <= fVar7)
                                {
                                    fVar2 = (fVar1 * fVar5 - pfVar13[2]) / fVar4;
                                }
                                else
                                {
                                    fVar2 = (fVar5 - pfVar13[1]) / fVar2;
                                }
                                iVar10 = iVar10 + 1;
                                iVar12 = iVar11 + 0xc;
                                *(float *)((int)pfVar14 + iVar11) = (pfVar9[-2] - *pfVar13) * fVar2 + *pfVar13;
                                *(float *)((int)DAT_00df9eb4 + iVar11 + 4) = fVar5;
                                *(float *)((int)DAT_00df9eb4 + iVar11 + 8) = fVar1 * fVar5;
                                DAT_00dfaa04 = DAT_00dfaa04 | 8;
                                pfVar14 = DAT_00df9eb4;
                            }
                            iVar11 = iVar12;
                            if (fVar3 <= *pfVar9)
                            {
                                pfVar14 = (float *)((int)pfVar14 + iVar12);
                                iVar10 = iVar10 + 1;
                                iVar11 = iVar12 + 0xc;
                                *pfVar14 = pfVar9[-2];
                                pfVar14[1] = pfVar9[-1];
                                pfVar14[2] = *pfVar9;
                                pfVar14 = DAT_00df9eb4;
                            }
                        }
                        pfVar13 = pfVar9 + -2;
                        pfVar9 = pfVar9 + 3;
                        local_4 = local_4 + -1;
                        pfVar15 = DAT_00dfa138;
                    } while (local_4 != 0);
                }
                DAT_00dfa138 = pfVar15;
                iVar12 = iVar10;
                if (2 < iVar12)
                {
                    iVar10 = 0;
                    DAT_00df9eb4 = DAT_00dfa138;
                    pfVar13 = pfVar14 + iVar12 * 3 + -3;
                    pfVar15 = DAT_00dfa138;
                    if (0 < iVar12)
                    {
                        pfVar9 = pfVar14 + 1;
                        iVar11 = 0;
                        DAT_00dfa138 = pfVar14;
                        param_3 = iVar12;
                        do
                        {
                            iVar12 = iVar11;
                            if (((float)param_1[1] <= pfVar13[1]) || ((float)param_1[1] <= *pfVar9))
                            {
                                if (((pfVar13[1] != (float)param_1[1]) && (*pfVar9 != (float)param_1[1]))
                                    && ((pfVar13[1] < (float)param_1[1] || (*pfVar9 < (float)param_1[1]))))
                                {
                                    iVar10 = iVar10 + 1;
                                    fVar2 = ((float)param_1[1] - pfVar13[1]) / (*pfVar9 - pfVar13[1]);
                                    *(int *)((int)pfVar15 + iVar11 + 4) = param_1[1];
                                    iVar12 = iVar11 + 0xc;
                                    *(float *)((int)DAT_00df9eb4 + iVar11 + 8) =
                                        (pfVar9[1] - pfVar13[2]) * fVar2 + pfVar13[2];
                                    *(float *)((int)DAT_00df9eb4 + iVar11) = (pfVar9[-1] - *pfVar13) * fVar2 + *pfVar13;
                                    DAT_00dfaa04 = DAT_00dfaa04 | 1;
                                    pfVar15 = DAT_00df9eb4;
                                }
                                if ((float)param_1[1] <= *pfVar9)
                                {
                                    pfVar15 = (float *)((int)pfVar15 + iVar12);
                                    iVar10 = iVar10 + 1;
                                    iVar12 = iVar12 + 0xc;
                                    *pfVar15 = pfVar9[-1];
                                    pfVar15[1] = *pfVar9;
                                    pfVar15[2] = pfVar9[1];
                                    pfVar15 = DAT_00df9eb4;
                                }
                            }
                            pfVar13 = pfVar9 + -1;
                            pfVar9 = pfVar9 + 3;
                            param_3 = param_3 + -1;
                            iVar11 = iVar12;
                            pfVar14 = DAT_00dfa138;
                        } while (param_3 != 0);
                    }
                    DAT_00dfa138 = pfVar14;
                    if (iVar10 < 3)
                    {
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
                        return iVar10;
                    }
                    iVar12 = iVar10;
                    pfVar13 = pfVar15;
                    if (*param_1 != 0)
                    {
                        iVar12 = 0;
                        pfVar14 = pfVar15 + iVar10 * 3 + -3;
                        pfVar13 = DAT_00dfa138;
                        DAT_00df9eb4 = DAT_00dfa138;
                        if (0 < iVar10)
                        {
                            pfVar9 = pfVar15 + 1;
                            iVar11 = 0;
                            DAT_00dfa138 = pfVar15;
                            param_3 = iVar10;
                            do
                            {
                                iVar10 = iVar11;
                                if ((pfVar14[1] <= (float)param_1[2]) || (*pfVar9 <= (float)param_1[2]))
                                {
                                    if (((pfVar14[1] != (float)param_1[2]) && (*pfVar9 != (float)param_1[2]))
                                        && (((float)param_1[2] < pfVar14[1] || ((float)param_1[2] < *pfVar9))))
                                    {
                                        iVar12 = iVar12 + 1;
                                        fVar2 = ((float)param_1[2] - pfVar14[1]) / (*pfVar9 - pfVar14[1]);
                                        *(int *)((int)pfVar13 + iVar11 + 4) = param_1[2];
                                        iVar10 = iVar11 + 0xc;
                                        *(float *)((int)DAT_00df9eb4 + iVar11 + 8) =
                                            (pfVar9[1] - pfVar14[2]) * fVar2 + pfVar14[2];
                                        *(float *)((int)DAT_00df9eb4 + iVar11) =
                                            (pfVar9[-1] - *pfVar14) * fVar2 + *pfVar14;
                                        DAT_00dfaa04 = DAT_00dfaa04 | 2;
                                        pfVar13 = DAT_00df9eb4;
                                    }
                                    if (*pfVar9 <= (float)param_1[2])
                                    {
                                        pfVar13 = (float *)((int)pfVar13 + iVar10);
                                        iVar12 = iVar12 + 1;
                                        iVar10 = iVar10 + 0xc;
                                        *pfVar13 = pfVar9[-1];
                                        pfVar13[1] = *pfVar9;
                                        pfVar13[2] = pfVar9[1];
                                        pfVar13 = DAT_00df9eb4;
                                    }
                                }
                                pfVar14 = pfVar9 + -1;
                                pfVar9 = pfVar9 + 3;
                                param_3 = param_3 + -1;
                                iVar11 = iVar10;
                                pfVar15 = DAT_00dfa138;
                            } while (param_3 != 0);
                        }
                        DAT_00dfa138 = pfVar15;
                        if (iVar12 < 3)
                        {
                            return iVar12;
                        }
                    }
                    if (pfVar13 != param_2)
                    {
                        QMEMCPY(uVar8, pfVar13, param_2, iVar12 * 3 & 0x3fffffff)
                        for (iVar10 = 0; iVar10 != 0; iVar10 = iVar10 + -1)
                        {
                            *(undefined_8 *)param_2 = *(undefined_8 *)pfVar13;
                            pfVar13 = (float *)((int)pfVar13 + 1);
                            param_2 = (float *)((int)param_2 + 1);
                        }
                    }
                }
            }
        }
    }
    return iVar12;
}

int FUN_004966f0(int *param_1, float *param_2, int param_3)

{
    float fVar1;
    float fVar2;
    float fVar3;
    uint uVar4;
    float *pfVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    float *pfVar9;
    float *pfVar10;
    float *pfVar11;

    iVar6 = 0;
    pfVar9 = (float *)&DAT_00dfa140;
    iVar8 = 0;
    DAT_00dfaa04 = 0;
    DAT_00dfa138 = param_2;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    pfVar10 = param_2 + param_3 * 3 + -3;
    pfVar11 = param_2;
    if (0 < param_3)
    {
        do
        {
            fVar2 = (float)param_1[3];
            fVar1 = (float)param_1[3];
            if ((fVar2 <= *pfVar10) || (fVar1 <= *pfVar11))
            {
                iVar7 = iVar6;
                if (((*pfVar10 != fVar2) && (fVar1 != *pfVar11)) && ((*pfVar10 < fVar2 || (*pfVar11 < fVar1))))
                {
                    fVar3 = (*pfVar11 - *pfVar10) / (fVar2 - *pfVar10);
                    iVar8 = iVar8 + 1;
                    iVar7 = iVar6 + 0xc;
                    *(float *)((int)pfVar9 + iVar6) = fVar2;
                    *(float *)((int)DAT_00df9eb4 + iVar6 + 4) = (pfVar11[1] - pfVar10[1]) * fVar3 + pfVar10[1];
                    *(float *)((int)DAT_00df9eb4 + iVar6 + 8) = (pfVar11[2] - pfVar10[2]) * fVar3 + pfVar10[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    pfVar9 = DAT_00df9eb4;
                }
                iVar6 = iVar7;
                if (fVar1 <= *pfVar11)
                {
                    pfVar9 = (float *)((int)pfVar9 + iVar7);
                    iVar8 = iVar8 + 1;
                    iVar6 = iVar7 + 0xc;
                    *pfVar9 = *pfVar11;
                    pfVar9[1] = pfVar11[1];
                    pfVar9[2] = pfVar11[2];
                    pfVar9 = DAT_00df9eb4;
                }
            }
            param_3 = param_3 + -1;
            pfVar10 = pfVar11;
            pfVar11 = pfVar11 + 3;
        } while (param_3 != 0);
    }
    if (2 < iVar8)
    {
        iVar6 = 0;
        pfVar10 = DAT_00dfa138;
        DAT_00df9eb4 = DAT_00dfa138;
        if (0 < iVar8)
        {
            iVar7 = 0;
            pfVar11 = pfVar9 + iVar8 * 3 + -3;
            pfVar5 = pfVar9;
            DAT_00dfa138 = pfVar9;
            param_3 = iVar8;
            do
            {
                fVar2 = (float)param_1[5];
                fVar1 = (float)param_1[5];
                if ((*pfVar11 <= fVar2) || (*pfVar5 <= fVar1))
                {
                    iVar8 = iVar7;
                    if (((*pfVar11 != fVar2) && (fVar1 != *pfVar5)) && ((fVar2 < *pfVar11 || (fVar1 < *pfVar5))))
                    {
                        fVar3 = (*pfVar5 - *pfVar11) / (fVar2 - *pfVar11);
                        iVar6 = iVar6 + 1;
                        iVar8 = iVar7 + 0xc;
                        *(float *)((int)pfVar10 + iVar7) = fVar2;
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 4) = (pfVar5[1] - pfVar11[1]) * fVar3 + pfVar11[1];
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = (pfVar5[2] - pfVar11[2]) * fVar3 + pfVar11[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                        pfVar10 = DAT_00df9eb4;
                    }
                    iVar7 = iVar8;
                    if (*pfVar5 <= fVar1)
                    {
                        pfVar10 = (float *)((int)pfVar10 + iVar8);
                        iVar6 = iVar6 + 1;
                        iVar7 = iVar8 + 0xc;
                        *pfVar10 = *pfVar5;
                        pfVar10[1] = pfVar5[1];
                        pfVar10[2] = pfVar5[2];
                        pfVar10 = DAT_00df9eb4;
                    }
                }
                param_3 = param_3 + -1;
                pfVar11 = pfVar5;
                pfVar5 = pfVar5 + 3;
                pfVar9 = DAT_00dfa138;
            } while (param_3 != 0);
        }
        DAT_00dfa138 = pfVar9;
        iVar8 = iVar6;
        if (2 < iVar8)
        {
            iVar6 = 0;
            pfVar11 = pfVar10 + iVar8 * 3 + -3;
            pfVar9 = DAT_00dfa138;
            DAT_00df9eb4 = DAT_00dfa138;
            if (0 < iVar8)
            {
                pfVar5 = pfVar10 + 2;
                iVar7 = 0;
                DAT_00dfa138 = pfVar10;
                param_3 = iVar8;
                do
                {
                    fVar2 = (float)param_1[4];
                    fVar1 = (float)param_1[4];
                    if ((pfVar11[2] <= fVar2) || (*pfVar5 <= fVar1))
                    {
                        iVar8 = iVar7;
                        if (((pfVar11[2] != fVar2) && (fVar1 != *pfVar5))
                            && ((fVar2 < pfVar11[2] || (fVar1 < *pfVar5))))
                        {
                            fVar3 = (*pfVar5 - pfVar11[2]) / (fVar2 - pfVar11[2]);
                            iVar6 = iVar6 + 1;
                            iVar8 = iVar7 + 0xc;
                            *(float *)((int)pfVar9 + iVar7) = (pfVar5[-2] - *pfVar11) * fVar3 + *pfVar11;
                            *(float *)((int)DAT_00df9eb4 + iVar7 + 4) = (pfVar5[-1] - pfVar11[1]) * fVar3 + pfVar11[1];
                            *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = fVar2;
                            DAT_00dfaa04 = DAT_00dfaa04 | 4;
                            pfVar9 = DAT_00df9eb4;
                        }
                        iVar7 = iVar8;
                        if (*pfVar5 <= fVar1)
                        {
                            pfVar9 = (float *)((int)pfVar9 + iVar8);
                            iVar6 = iVar6 + 1;
                            iVar7 = iVar8 + 0xc;
                            *pfVar9 = pfVar5[-2];
                            pfVar9[1] = pfVar5[-1];
                            pfVar9[2] = *pfVar5;
                            pfVar9 = DAT_00df9eb4;
                        }
                    }
                    pfVar11 = pfVar5 + -2;
                    pfVar5 = pfVar5 + 3;
                    param_3 = param_3 + -1;
                    pfVar10 = DAT_00dfa138;
                } while (param_3 != 0);
            }
            DAT_00dfa138 = pfVar10;
            iVar8 = iVar6;
            if (2 < iVar8)
            {
                iVar6 = 0;
                pfVar10 = pfVar9 + iVar8 * 3 + -3;
                pfVar11 = DAT_00dfa138;
                DAT_00df9eb4 = DAT_00dfa138;
                if (0 < iVar8)
                {
                    pfVar5 = pfVar9 + 2;
                    iVar7 = 0;
                    DAT_00dfa138 = pfVar9;
                    param_3 = iVar8;
                    do
                    {
                        fVar2 = (float)param_1[6];
                        fVar1 = (float)param_1[6];
                        if ((fVar2 <= pfVar10[2]) || (fVar1 <= *pfVar5))
                        {
                            iVar8 = iVar7;
                            if (((pfVar10[2] != fVar2) && (fVar1 != *pfVar5))
                                && ((pfVar10[2] < fVar2 || (*pfVar5 < fVar1))))
                            {
                                fVar3 = (*pfVar5 - pfVar10[2]) / (fVar2 - pfVar10[2]);
                                iVar6 = iVar6 + 1;
                                iVar8 = iVar7 + 0xc;
                                *(float *)((int)pfVar11 + iVar7) = (pfVar5[-2] - *pfVar10) * fVar3 + *pfVar10;
                                *(float *)((int)DAT_00df9eb4 + iVar7 + 4) =
                                    (pfVar5[-1] - pfVar10[1]) * fVar3 + pfVar10[1];
                                *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = fVar2;
                                DAT_00dfaa04 = DAT_00dfaa04 | 8;
                                pfVar11 = DAT_00df9eb4;
                            }
                            iVar7 = iVar8;
                            if (fVar1 <= *pfVar5)
                            {
                                pfVar11 = (float *)((int)pfVar11 + iVar8);
                                iVar6 = iVar6 + 1;
                                iVar7 = iVar8 + 0xc;
                                *pfVar11 = pfVar5[-2];
                                pfVar11[1] = pfVar5[-1];
                                pfVar11[2] = *pfVar5;
                                pfVar11 = DAT_00df9eb4;
                            }
                        }
                        pfVar10 = pfVar5 + -2;
                        pfVar5 = pfVar5 + 3;
                        param_3 = param_3 + -1;
                        pfVar9 = DAT_00dfa138;
                    } while (param_3 != 0);
                }
                DAT_00dfa138 = pfVar9;
                iVar8 = iVar6;
                if (2 < iVar8)
                {
                    iVar6 = 0;
                    pfVar10 = pfVar11 + iVar8 * 3 + -3;
                    pfVar9 = DAT_00dfa138;
                    DAT_00df9eb4 = DAT_00dfa138;
                    if (0 < iVar8)
                    {
                        pfVar5 = pfVar11 + 1;
                        iVar7 = 0;
                        DAT_00dfa138 = pfVar11;
                        param_3 = iVar8;
                        do
                        {
                            iVar8 = iVar7;
                            if (((float)param_1[1] <= pfVar10[1]) || ((float)param_1[1] <= *pfVar5))
                            {
                                if (((pfVar10[1] != (float)param_1[1]) && (*pfVar5 != (float)param_1[1]))
                                    && ((pfVar10[1] < (float)param_1[1] || (*pfVar5 < (float)param_1[1]))))
                                {
                                    iVar6 = iVar6 + 1;
                                    fVar1 = ((float)param_1[1] - pfVar10[1]) / (*pfVar5 - pfVar10[1]);
                                    *(int *)((int)pfVar9 + iVar7 + 4) = param_1[1];
                                    iVar8 = iVar7 + 0xc;
                                    *(float *)((int)DAT_00df9eb4 + iVar7 + 8) =
                                        (pfVar5[1] - pfVar10[2]) * fVar1 + pfVar10[2];
                                    *(float *)((int)DAT_00df9eb4 + iVar7) = (pfVar5[-1] - *pfVar10) * fVar1 + *pfVar10;
                                    DAT_00dfaa04 = DAT_00dfaa04 | 1;
                                    pfVar9 = DAT_00df9eb4;
                                }
                                if ((float)param_1[1] <= *pfVar5)
                                {
                                    pfVar9 = (float *)((int)pfVar9 + iVar8);
                                    iVar6 = iVar6 + 1;
                                    iVar8 = iVar8 + 0xc;
                                    *pfVar9 = pfVar5[-1];
                                    pfVar9[1] = *pfVar5;
                                    pfVar9[2] = pfVar5[1];
                                    pfVar9 = DAT_00df9eb4;
                                }
                            }
                            pfVar10 = pfVar5 + -1;
                            pfVar5 = pfVar5 + 3;
                            param_3 = param_3 + -1;
                            iVar7 = iVar8;
                            pfVar11 = DAT_00dfa138;
                        } while (param_3 != 0);
                    }
                    DAT_00dfa138 = pfVar11;
                    if (iVar6 < 3)
                    {
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
                        return iVar6;
                    }
                    iVar8 = iVar6;
                    pfVar10 = pfVar9;
                    if (*param_1 != 0)
                    {
                        iVar8 = 0;
                        pfVar11 = pfVar9 + iVar6 * 3 + -3;
                        pfVar10 = DAT_00dfa138;
                        DAT_00df9eb4 = DAT_00dfa138;
                        if (0 < iVar6)
                        {
                            pfVar5 = pfVar9 + 1;
                            iVar7 = 0;
                            DAT_00dfa138 = pfVar9;
                            param_3 = iVar6;
                            do
                            {
                                iVar6 = iVar7;
                                if ((pfVar11[1] <= (float)param_1[2]) || (*pfVar5 <= (float)param_1[2]))
                                {
                                    if (((pfVar11[1] != (float)param_1[2]) && (*pfVar5 != (float)param_1[2]))
                                        && (((float)param_1[2] < pfVar11[1] || ((float)param_1[2] < *pfVar5))))
                                    {
                                        iVar8 = iVar8 + 1;
                                        fVar1 = ((float)param_1[2] - pfVar11[1]) / (*pfVar5 - pfVar11[1]);
                                        *(int *)((int)pfVar10 + iVar7 + 4) = param_1[2];
                                        iVar6 = iVar7 + 0xc;
                                        *(float *)((int)DAT_00df9eb4 + iVar7 + 8) =
                                            (pfVar5[1] - pfVar11[2]) * fVar1 + pfVar11[2];
                                        *(float *)((int)DAT_00df9eb4 + iVar7) =
                                            (pfVar5[-1] - *pfVar11) * fVar1 + *pfVar11;
                                        DAT_00dfaa04 = DAT_00dfaa04 | 2;
                                        pfVar10 = DAT_00df9eb4;
                                    }
                                    if (*pfVar5 <= (float)param_1[2])
                                    {
                                        pfVar10 = (float *)((int)pfVar10 + iVar6);
                                        iVar8 = iVar8 + 1;
                                        iVar6 = iVar6 + 0xc;
                                        *pfVar10 = pfVar5[-1];
                                        pfVar10[1] = *pfVar5;
                                        pfVar10[2] = pfVar5[1];
                                        pfVar10 = DAT_00df9eb4;
                                    }
                                }
                                pfVar11 = pfVar5 + -1;
                                pfVar5 = pfVar5 + 3;
                                param_3 = param_3 + -1;
                                iVar7 = iVar6;
                                pfVar9 = DAT_00dfa138;
                            } while (param_3 != 0);
                        }
                        DAT_00dfa138 = pfVar9;
                        if (iVar8 < 3)
                        {
                            return iVar8;
                        }
                    }
                    if (pfVar10 != param_2)
                    {
                        QMEMCPY(uVar4, pfVar10, param_2, iVar8 * 3 & 0x3fffffff)
                        for (iVar6 = 0; iVar6 != 0; iVar6 = iVar6 + -1)
                        {
                            *(undefined_8 *)param_2 = *(undefined_8 *)pfVar10;
                            pfVar10 = (float *)((int)pfVar10 + 1);
                            param_2 = (float *)((int)param_2 + 1);
                        }
                    }
                }
            }
        }
    }
    return iVar8;
}

int FUN_00496e40(int *param_1, float *param_2, float *param_3, float *param_4)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float *pfVar8;
    uint uVar9;
    int iVar10;
    int iVar11;
    float *pfVar12;
    int iVar13;
    int iVar14;
    float *pfVar15;
    float *pfVar16;
    float *pfVar17;
    float *pfVar18;
    float *pfVar19;
    int iVar20;
    int local_14;
    int local_4;

    DAT_00dfaa04 = 0;
    local_14 = 0;
    pfVar17 = (float *)&DAT_00dfa140;
    DAT_00dfa138 = param_2;
    DAT_00dfa13c = param_3;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    DAT_00df9eb0 = (float *)&DAT_00dfa500;
    if (0 < (int)param_4)
    {
        iVar13 = 0;
        iVar10 = 0;
        local_4 = (int)param_4;
        pfVar19 = param_3 + (int)param_4 * 4 + -4;
        pfVar18 = param_2;
        pfVar8 = param_3;
        param_4 = param_2 + (int)param_4 * 3 + -3;
        do
        {
            pfVar16 = pfVar18;
            fVar2 = (float)param_1[0xc] * param_4[1];
            fVar3 = (float)param_1[0xc] * pfVar16[1];
            if ((fVar2 <= *param_4) || (fVar3 <= *pfVar16))
            {
                iVar11 = iVar10;
                iVar14 = iVar13;
                if (((*param_4 != fVar2) && (fVar3 != *pfVar16)) && ((*param_4 < fVar2 || (*pfVar16 < fVar3))))
                {
                    fVar2 = pfVar16[1] - param_4[1];
                    fVar4 = *pfVar16 - *param_4;
                    fVar1 = (float)param_1[0xc] * fVar2 - fVar4;
                    fVar5 = pfVar16[1] * *param_4 - param_4[1] * *pfVar16;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar1 = -fVar2;
                    }
                    fVar6 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar6 = -fVar4;
                    }
                    if (fVar1 <= fVar6)
                    {
                        fVar2 = ((float)param_1[0xc] * fVar5 - *param_4) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - param_4[1]) / fVar2;
                    }
                    iVar14 = iVar13 + 0x10;
                    *(float *)((int)pfVar17 + iVar10) = (float)param_1[0xc] * fVar5;
                    iVar11 = iVar10 + 0xc;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 4) = fVar5;
                    local_14 = local_14 + 1;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 8) = (pfVar16[2] - param_4[2]) * fVar2 + param_4[2];
                    *(float *)((int)DAT_00df9eb0 + iVar13) = (*pfVar8 - *pfVar19) * fVar2 + *pfVar19;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (pfVar8[1] - pfVar19[1]) * fVar2 + pfVar19[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (pfVar8[2] - pfVar19[2]) * fVar2 + pfVar19[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    pfVar17 = DAT_00df9eb4;
                }
                iVar10 = iVar11;
                iVar13 = iVar14;
                if (fVar3 <= *pfVar16)
                {
                    pfVar17 = (float *)((int)pfVar17 + iVar11);
                    iVar10 = iVar11 + 0xc;
                    *pfVar17 = *pfVar16;
                    pfVar17[1] = pfVar16[1];
                    pfVar17[2] = pfVar16[2];
                    pfVar17 = (float *)((int)DAT_00df9eb0 + iVar14);
                    *pfVar17 = *pfVar8;
                    pfVar17[1] = pfVar8[1];
                    pfVar17[2] = pfVar8[2];
                    local_14 = local_14 + 1;
                    pfVar17[3] = pfVar8[3];
                    iVar13 = iVar14 + 0x10;
                    pfVar17 = DAT_00df9eb4;
                }
            }
            local_4 = local_4 + -1;
            pfVar19 = pfVar8;
            pfVar18 = pfVar16 + 3;
            pfVar8 = pfVar8 + 4;
            param_4 = pfVar16;
        } while (local_4 != 0);
    }
    local_4 = local_14;
    pfVar19 = DAT_00dfa13c;
    if (local_14 < 3)
    {
        return local_14;
    }
    DAT_00dfa13c = DAT_00df9eb0;
    iVar10 = local_14 * 3;
    local_14 = 0;
    pfVar18 = DAT_00dfa138;
    DAT_00df9eb4 = DAT_00dfa138;
    if (0 < local_4)
    {
        iVar11 = 0;
        iVar13 = 0;
        pfVar8 = DAT_00df9eb0 + local_4 * 4 + -4;
        pfVar16 = pfVar17;
        pfVar12 = DAT_00df9eb0;
        DAT_00df9eb0 = pfVar19;
        DAT_00dfa138 = pfVar17;
        param_4 = pfVar17 + iVar10 + -3;
        do
        {
            pfVar15 = pfVar16;
            fVar2 = (float)param_1[10] * param_4[1];
            fVar3 = (float)param_1[10] * pfVar15[1];
            if ((*param_4 <= fVar2) || (*pfVar15 <= fVar3))
            {
                iVar10 = iVar13;
                iVar14 = iVar11;
                if (((*param_4 != fVar2) && (fVar3 != *pfVar15)) && ((fVar2 < *param_4 || (fVar3 < *pfVar15))))
                {
                    fVar2 = pfVar15[1] - param_4[1];
                    fVar4 = *pfVar15 - *param_4;
                    fVar1 = (float)param_1[10] * fVar2 - fVar4;
                    fVar5 = pfVar15[1] * *param_4 - param_4[1] * *pfVar15;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar1 = -fVar2;
                    }
                    fVar6 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar6 = -fVar4;
                    }
                    if (fVar1 <= fVar6)
                    {
                        fVar2 = ((float)param_1[10] * fVar5 - *param_4) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - param_4[1]) / fVar2;
                    }
                    iVar14 = iVar11 + 0x10;
                    *(float *)((int)pfVar18 + iVar13) = (float)param_1[10] * fVar5;
                    iVar10 = iVar13 + 0xc;
                    *(float *)((int)DAT_00df9eb4 + iVar13 + 4) = fVar5;
                    local_14 = local_14 + 1;
                    *(float *)((int)DAT_00df9eb4 + iVar13 + 8) = (pfVar15[2] - param_4[2]) * fVar2 + param_4[2];
                    *(float *)((int)DAT_00df9eb0 + iVar11) = (*pfVar12 - *pfVar8) * fVar2 + *pfVar8;
                    *(float *)((int)DAT_00df9eb0 + iVar11 + 4) = (pfVar12[1] - pfVar8[1]) * fVar2 + pfVar8[1];
                    *(float *)((int)DAT_00df9eb0 + iVar11 + 8) = (pfVar12[2] - pfVar8[2]) * fVar2 + pfVar8[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                    pfVar18 = DAT_00df9eb4;
                }
                iVar13 = iVar10;
                iVar11 = iVar14;
                if (*pfVar15 <= fVar3)
                {
                    pfVar18 = (float *)((int)pfVar18 + iVar10);
                    iVar13 = iVar10 + 0xc;
                    *pfVar18 = *pfVar15;
                    pfVar18[1] = pfVar15[1];
                    pfVar18[2] = pfVar15[2];
                    pfVar17 = (float *)((int)DAT_00df9eb0 + iVar14);
                    *pfVar17 = *pfVar12;
                    pfVar17[1] = pfVar12[1];
                    pfVar17[2] = pfVar12[2];
                    local_14 = local_14 + 1;
                    pfVar17[3] = pfVar12[3];
                    iVar11 = iVar14 + 0x10;
                    pfVar18 = DAT_00df9eb4;
                }
            }
            local_4 = local_4 + -1;
            pfVar8 = pfVar12;
            pfVar16 = pfVar15 + 3;
            pfVar12 = pfVar12 + 4;
            pfVar19 = DAT_00df9eb0;
            pfVar17 = DAT_00dfa138;
            param_4 = pfVar15;
        } while (local_4 != 0);
    }
    DAT_00dfa138 = pfVar17;
    DAT_00df9eb0 = pfVar19;
    local_4 = local_14;
    pfVar17 = DAT_00df9eb0;
    if (local_14 < 3)
    {
        return local_14;
    }
    DAT_00df9eb0 = DAT_00dfa13c;
    iVar10 = 0;
    DAT_00df9eb4 = DAT_00dfa138;
    DAT_00dfa13c = pfVar17;
    param_4 = pfVar18 + local_14 * 3 + -3;
    local_14 = 0;
    pfVar19 = DAT_00dfa138;
    if (0 < local_4)
    {
        iVar13 = 0;
        pfVar16 = pfVar18 + 2;
        pfVar8 = pfVar17 + local_4 * 4 + -4;
        DAT_00dfa138 = pfVar18;
        do
        {
            fVar2 = (float)param_1[0xb] * param_4[1];
            fVar3 = pfVar16[-1] * (float)param_1[0xb];
            if ((param_4[2] <= fVar2) || (*pfVar16 <= fVar3))
            {
                iVar11 = iVar10;
                iVar14 = iVar13;
                if (((param_4[2] != fVar2) && (fVar3 != *pfVar16)) && ((fVar2 < param_4[2] || (fVar3 < *pfVar16))))
                {
                    fVar2 = pfVar16[-1] - param_4[1];
                    fVar4 = *pfVar16 - param_4[2];
                    fVar1 = (float)param_1[0xb] * fVar2 - fVar4;
                    fVar5 = param_4[2] * pfVar16[-1] - param_4[1] * *pfVar16;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = (float)param_1[0xb];
                    fVar6 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar6 = -fVar2;
                    }
                    fVar7 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar7 = -fVar4;
                    }
                    if (fVar6 <= fVar7)
                    {
                        fVar2 = (fVar1 * fVar5 - param_4[2]) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - param_4[1]) / fVar2;
                    }
                    iVar11 = iVar10 + 0xc;
                    iVar14 = iVar13 + 0x10;
                    local_14 = local_14 + 1;
                    *(float *)((int)pfVar19 + iVar10) = (pfVar16[-2] - *param_4) * fVar2 + *param_4;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 4) = fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 8) = fVar1 * fVar5;
                    *(float *)((int)DAT_00df9eb0 + iVar13) = (*pfVar17 - *pfVar8) * fVar2 + *pfVar8;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (pfVar17[1] - pfVar8[1]) * fVar2 + pfVar8[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (pfVar17[2] - pfVar8[2]) * fVar2 + pfVar8[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 4;
                    pfVar19 = DAT_00df9eb4;
                }
                iVar10 = iVar11;
                iVar13 = iVar14;
                if (*pfVar16 <= fVar3)
                {
                    pfVar19 = (float *)((int)pfVar19 + iVar11);
                    iVar10 = iVar11 + 0xc;
                    *pfVar19 = pfVar16[-2];
                    pfVar19[1] = pfVar16[-1];
                    pfVar19[2] = *pfVar16;
                    pfVar19 = (float *)((int)DAT_00df9eb0 + iVar14);
                    *pfVar19 = *pfVar17;
                    pfVar19[1] = pfVar17[1];
                    pfVar19[2] = pfVar17[2];
                    local_14 = local_14 + 1;
                    pfVar19[3] = pfVar17[3];
                    iVar13 = iVar14 + 0x10;
                    pfVar19 = DAT_00df9eb4;
                }
            }
            param_4 = pfVar16 + -2;
            pfVar16 = pfVar16 + 3;
            local_4 = local_4 + -1;
            pfVar8 = pfVar17;
            pfVar17 = pfVar17 + 4;
            pfVar18 = DAT_00dfa138;
        } while (local_4 != 0);
    }
    DAT_00dfa138 = pfVar18;
    local_4 = local_14;
    pfVar17 = DAT_00df9eb0;
    if (local_14 < 3)
    {
        return local_14;
    }
    DAT_00df9eb0 = DAT_00dfa13c;
    iVar10 = 0;
    DAT_00df9eb4 = DAT_00dfa138;
    DAT_00dfa13c = pfVar17;
    param_4 = pfVar19 + local_14 * 3 + -3;
    local_14 = 0;
    pfVar18 = DAT_00dfa138;
    if (0 < local_4)
    {
        iVar13 = 0;
        pfVar16 = pfVar19 + 2;
        pfVar8 = pfVar17 + local_4 * 4 + -4;
        DAT_00dfa138 = pfVar19;
        do
        {
            fVar2 = (float)param_1[8] * param_4[1];
            fVar3 = pfVar16[-1] * (float)param_1[8];
            if ((fVar2 <= param_4[2]) || (fVar3 <= *pfVar16))
            {
                iVar11 = iVar10;
                iVar14 = iVar13;
                if (((param_4[2] != fVar2) && (fVar3 != *pfVar16)) && ((param_4[2] < fVar2 || (*pfVar16 < fVar3))))
                {
                    fVar2 = pfVar16[-1] - param_4[1];
                    fVar4 = *pfVar16 - param_4[2];
                    fVar1 = (float)param_1[8] * fVar2 - fVar4;
                    fVar5 = param_4[2] * pfVar16[-1] - param_4[1] * *pfVar16;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = (float)param_1[8];
                    fVar6 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar6 = -fVar2;
                    }
                    fVar7 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar7 = -fVar4;
                    }
                    if (fVar6 <= fVar7)
                    {
                        fVar2 = (fVar1 * fVar5 - param_4[2]) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - param_4[1]) / fVar2;
                    }
                    iVar11 = iVar10 + 0xc;
                    iVar14 = iVar13 + 0x10;
                    local_14 = local_14 + 1;
                    *(float *)((int)pfVar18 + iVar10) = (pfVar16[-2] - *param_4) * fVar2 + *param_4;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 4) = fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar10 + 8) = fVar1 * fVar5;
                    *(float *)((int)DAT_00df9eb0 + iVar13) = (*pfVar17 - *pfVar8) * fVar2 + *pfVar8;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (pfVar17[1] - pfVar8[1]) * fVar2 + pfVar8[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (pfVar17[2] - pfVar8[2]) * fVar2 + pfVar8[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 8;
                    pfVar18 = DAT_00df9eb4;
                }
                iVar10 = iVar11;
                iVar13 = iVar14;
                if (fVar3 <= *pfVar16)
                {
                    pfVar18 = (float *)((int)pfVar18 + iVar11);
                    iVar10 = iVar11 + 0xc;
                    *pfVar18 = pfVar16[-2];
                    pfVar18[1] = pfVar16[-1];
                    pfVar18[2] = *pfVar16;
                    pfVar19 = (float *)((int)DAT_00df9eb0 + iVar14);
                    *pfVar19 = *pfVar17;
                    pfVar19[1] = pfVar17[1];
                    pfVar19[2] = pfVar17[2];
                    local_14 = local_14 + 1;
                    pfVar19[3] = pfVar17[3];
                    iVar13 = iVar14 + 0x10;
                    pfVar18 = DAT_00df9eb4;
                }
            }
            param_4 = pfVar16 + -2;
            pfVar16 = pfVar16 + 3;
            local_4 = local_4 + -1;
            pfVar8 = pfVar17;
            pfVar17 = pfVar17 + 4;
            pfVar19 = DAT_00dfa138;
        } while (local_4 != 0);
    }
    DAT_00dfa138 = pfVar19;
    iVar10 = local_14;
    param_4 = DAT_00df9eb0;
    if (2 < local_14)
    {
        DAT_00df9eb4 = DAT_00dfa138;
        pfVar17 = pfVar18 + local_14 * 3 + -3;
        DAT_00df9eb0 = DAT_00dfa13c;
        DAT_00dfa13c = param_4;
        local_14 = 0;
        pfVar19 = DAT_00dfa138;
        DAT_00dfa138 = pfVar18;
        if (iVar10 < 1)
        {
            local_4 = 0;
        }
        else
        {
            pfVar18 = pfVar18 + 1;
            pfVar8 = param_4 + iVar10 * 4 + -4;
            iVar13 = 0;
            iVar11 = 0;
            do
            {
                local_4 = iVar10;
                iVar14 = iVar13;
                iVar20 = iVar11;
                if (((float)param_1[1] <= pfVar17[1]) || ((float)param_1[1] <= *pfVar18))
                {
                    if (((pfVar17[1] != (float)param_1[1]) && (*pfVar18 != (float)param_1[1]))
                        && ((pfVar17[1] < (float)param_1[1] || (*pfVar18 < (float)param_1[1]))))
                    {
                        iVar20 = iVar11 + 0xc;
                        iVar14 = iVar13 + 0x10;
                        fVar2 = ((float)param_1[1] - pfVar17[1]) / (*pfVar18 - pfVar17[1]);
                        *(int *)((int)pfVar19 + iVar11 + 4) = param_1[1];
                        local_14 = local_14 + 1;
                        *(float *)((int)DAT_00df9eb4 + iVar11 + 8) = (pfVar18[1] - pfVar17[2]) * fVar2 + pfVar17[2];
                        *(float *)((int)DAT_00df9eb4 + iVar11) = (pfVar18[-1] - *pfVar17) * fVar2 + *pfVar17;
                        *(float *)((int)DAT_00df9eb0 + iVar13) = (*param_4 - *pfVar8) * fVar2 + *pfVar8;
                        *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (param_4[1] - pfVar8[1]) * fVar2 + pfVar8[1];
                        *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (param_4[2] - pfVar8[2]) * fVar2 + pfVar8[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 1;
                        pfVar19 = DAT_00df9eb4;
                    }
                    if ((float)param_1[1] <= *pfVar18)
                    {
                        pfVar19 = (float *)((int)pfVar19 + iVar20);
                        iVar20 = iVar20 + 0xc;
                        *pfVar19 = pfVar18[-1];
                        pfVar19[1] = *pfVar18;
                        pfVar19[2] = pfVar18[1];
                        pfVar17 = (float *)((int)DAT_00df9eb0 + iVar14);
                        *pfVar17 = *param_4;
                        pfVar17[1] = param_4[1];
                        pfVar17[2] = param_4[2];
                        pfVar17[3] = param_4[3];
                        local_14 = local_14 + 1;
                        iVar14 = iVar14 + 0x10;
                        pfVar19 = DAT_00df9eb4;
                    }
                }
                pfVar17 = pfVar18 + -1;
                pfVar18 = pfVar18 + 3;
                iVar10 = local_4 + -1;
                pfVar8 = param_4;
                local_4 = local_14;
                iVar13 = iVar14;
                iVar11 = iVar20;
                param_4 = param_4 + 4;
            } while (iVar10 != 0);
        }
        if (local_4 < 3)
        {
            DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
            return local_4;
        }
        iVar10 = local_4;
        pfVar17 = pfVar19;
        if (*param_1 != 0)
        {
            pfVar18 = pfVar19 + local_4 * 3 + -3;
            local_14 = 0;
            iVar10 = 0;
            pfVar17 = DAT_00dfa138;
            pfVar8 = DAT_00dfa13c;
            DAT_00df9eb4 = DAT_00dfa138;
            pfVar16 = DAT_00df9eb0;
            if (0 < local_4)
            {
                pfVar15 = pfVar19 + 1;
                pfVar12 = DAT_00df9eb0 + local_4 * 4 + -4;
                iVar13 = 0;
                iVar11 = 0;
                pfVar8 = DAT_00dfa13c;
                DAT_00dfa138 = pfVar19;
                DAT_00dfa13c = DAT_00df9eb0;
                param_4 = DAT_00df9eb0;
                do
                {
                    DAT_00df9eb0 = pfVar8;
                    iVar14 = iVar13;
                    iVar20 = iVar11;
                    if ((pfVar18[1] <= (float)param_1[2]) || (*pfVar15 <= (float)param_1[2]))
                    {
                        if (((pfVar18[1] != (float)param_1[2]) && (*pfVar15 != (float)param_1[2]))
                            && (((float)param_1[2] < pfVar18[1] || ((float)param_1[2] < *pfVar15))))
                        {
                            iVar20 = iVar11 + 0xc;
                            iVar14 = iVar13 + 0x10;
                            fVar2 = ((float)param_1[2] - pfVar18[1]) / (*pfVar15 - pfVar18[1]);
                            *(int *)((int)pfVar17 + iVar11 + 4) = param_1[2];
                            local_14 = local_14 + 1;
                            *(float *)((int)DAT_00df9eb4 + iVar11 + 8) = (pfVar15[1] - pfVar18[2]) * fVar2 + pfVar18[2];
                            *(float *)((int)DAT_00df9eb4 + iVar11) = (pfVar15[-1] - *pfVar18) * fVar2 + *pfVar18;
                            *(float *)((int)DAT_00df9eb0 + iVar13) = (*param_4 - *pfVar12) * fVar2 + *pfVar12;
                            *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (param_4[1] - pfVar12[1]) * fVar2 + pfVar12[1];
                            *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (param_4[2] - pfVar12[2]) * fVar2 + pfVar12[2];
                            DAT_00dfaa04 = DAT_00dfaa04 | 2;
                            pfVar17 = DAT_00df9eb4;
                        }
                        if (*pfVar15 <= (float)param_1[2])
                        {
                            pfVar17 = (float *)((int)pfVar17 + iVar20);
                            iVar20 = iVar20 + 0xc;
                            *pfVar17 = pfVar15[-1];
                            pfVar17[1] = *pfVar15;
                            pfVar17[2] = pfVar15[1];
                            pfVar17 = (float *)((int)DAT_00df9eb0 + iVar14);
                            *pfVar17 = *param_4;
                            pfVar17[1] = param_4[1];
                            pfVar17[2] = param_4[2];
                            pfVar17[3] = param_4[3];
                            local_14 = local_14 + 1;
                            iVar14 = iVar14 + 0x10;
                            pfVar17 = DAT_00df9eb4;
                        }
                    }
                    pfVar18 = pfVar15 + -1;
                    pfVar15 = pfVar15 + 3;
                    local_4 = local_4 + -1;
                    pfVar12 = param_4;
                    iVar10 = local_14;
                    iVar13 = iVar14;
                    iVar11 = iVar20;
                    pfVar8 = DAT_00df9eb0;
                    pfVar19 = DAT_00dfa138;
                    pfVar16 = DAT_00dfa13c;
                    param_4 = param_4 + 4;
                } while (local_4 != 0);
            }
            DAT_00dfa13c = pfVar16;
            DAT_00dfa138 = pfVar19;
            DAT_00df9eb0 = pfVar8;
            if (iVar10 < 3)
            {
                return iVar10;
            }
        }
        if (pfVar17 != param_2)
        {
            QMEMCPY(uVar9, pfVar17, param_2, iVar10 * 3 & 0x3fffffff)
            for (iVar13 = 0; iVar13 != 0; iVar13 = iVar13 + -1)
            {
                *(undefined_8 *)param_2 = *(undefined_8 *)pfVar17;
                pfVar17 = (float *)((int)pfVar17 + 1);
                param_2 = (float *)((int)param_2 + 1);
            }
            pfVar17 = DAT_00df9eb0;
            QMEMCPY(uVar9, pfVar17, param_3, (uint)(iVar10 << 4) >> 2)
            for (iVar13 = 0; iVar13 != 0; iVar13 = iVar13 + -1)
            {
                *(undefined_8 *)param_3 = *(undefined_8 *)pfVar17;
                pfVar17 = (float *)((int)pfVar17 + 1);
                param_3 = (float *)((int)param_3 + 1);
            }
        }
        return iVar10;
    }
    return local_14;
}

int FUN_00497da0(int *param_1, float *param_2, float *param_3, int param_4)

{
    float fVar1;
    float fVar2;
    float fVar3;
    int iVar4;
    uint uVar5;
    float *pfVar6;
    float *pfVar7;
    float *pfVar8;
    int iVar9;
    float *pfVar10;
    float *pfVar11;
    float *pfVar12;
    int iVar13;
    float *pfVar14;
    int local_c;
    float *local_8;

    DAT_00dfaa04 = 0;
    local_c = 0;
    pfVar10 = (float *)&DAT_00dfa140;
    DAT_00dfa138 = param_2;
    DAT_00dfa13c = param_3;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    DAT_00df9eb0 = (float *)&DAT_00dfa500;
    local_8 = param_3;
    if (param_4 < 1)
    {
        param_4 = 0;
    }
    else
    {
        iVar9 = 0;
        iVar13 = 0;
        pfVar6 = param_2 + param_4 * 3 + -3;
        pfVar11 = param_3 + param_4 * 4 + -4;
        pfVar12 = param_2;
        iVar4 = param_4;
        do
        {
            param_4 = iVar4;
            fVar2 = (float)param_1[3];
            fVar1 = (float)param_1[3];
            if ((fVar2 <= *pfVar6) || (fVar1 <= *pfVar12))
            {
                if (((*pfVar6 != fVar2) && (fVar1 != *pfVar12)) && ((*pfVar6 < fVar2 || (*pfVar12 < fVar1))))
                {
                    fVar3 = (*pfVar12 - *pfVar6) / (fVar2 - *pfVar6);
                    local_c = local_c + 1;
                    *(float *)((int)pfVar10 + iVar13) = fVar2;
                    *(float *)((int)DAT_00df9eb4 + iVar13 + 4) = (pfVar12[1] - pfVar6[1]) * fVar3 + pfVar6[1];
                    *(float *)((int)DAT_00df9eb4 + iVar13 + 8) = (pfVar12[2] - pfVar6[2]) * fVar3 + pfVar6[2];
                    *(float *)((int)DAT_00df9eb0 + iVar9) = (*local_8 - *pfVar11) * fVar3 + *pfVar11;
                    *(float *)((int)DAT_00df9eb0 + iVar9 + 4) = (local_8[1] - pfVar11[1]) * fVar3 + pfVar11[1];
                    *(float *)((int)DAT_00df9eb0 + iVar9 + 8) = (local_8[2] - pfVar11[2]) * fVar3 + pfVar11[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    iVar9 = iVar9 + 0x10;
                    pfVar10 = DAT_00df9eb4;
                    iVar13 = iVar13 + 0xc;
                }
                if (fVar1 <= *pfVar12)
                {
                    pfVar10 = (float *)((int)pfVar10 + iVar13);
                    iVar13 = iVar13 + 0xc;
                    *pfVar10 = *pfVar12;
                    pfVar10[1] = pfVar12[1];
                    pfVar10[2] = pfVar12[2];
                    pfVar10 = (float *)((int)DAT_00df9eb0 + iVar9);
                    *pfVar10 = *local_8;
                    pfVar10[1] = local_8[1];
                    pfVar10[2] = local_8[2];
                    pfVar10[3] = local_8[3];
                    local_c = local_c + 1;
                    iVar9 = iVar9 + 0x10;
                    pfVar10 = DAT_00df9eb4;
                }
            }
            iVar4 = param_4 + -1;
            pfVar6 = pfVar12;
            pfVar11 = local_8;
            param_4 = local_c;
            pfVar12 = pfVar12 + 3;
            local_8 = local_8 + 4;
        } while (iVar4 != 0);
    }
    pfVar6 = DAT_00dfa13c;
    if (param_4 < 3)
    {
        return param_4;
    }
    DAT_00dfa13c = DAT_00df9eb0;
    local_c = 0;
    local_8 = DAT_00df9eb0;
    pfVar11 = DAT_00dfa138;
    DAT_00df9eb4 = DAT_00dfa138;
    DAT_00dfa138 = pfVar10;
    if (param_4 < 1)
    {
        iVar9 = 0;
        DAT_00df9eb0 = pfVar6;
    }
    else
    {
        iVar13 = 0;
        iVar4 = 0;
        pfVar12 = pfVar10 + param_4 * 3 + -3;
        pfVar7 = DAT_00df9eb0 + param_4 * 4 + -4;
        DAT_00df9eb0 = pfVar6;
        do
        {
            fVar2 = (float)param_1[5];
            fVar1 = (float)param_1[5];
            if ((*pfVar12 <= fVar2) || (*pfVar10 <= fVar1))
            {
                if (((*pfVar12 != fVar2) && (fVar1 != *pfVar10)) && ((fVar2 < *pfVar12 || (fVar1 < *pfVar10))))
                {
                    fVar3 = (*pfVar10 - *pfVar12) / (fVar2 - *pfVar12);
                    local_c = local_c + 1;
                    *(float *)((int)pfVar11 + iVar4) = fVar2;
                    *(float *)((int)DAT_00df9eb4 + iVar4 + 4) = (pfVar10[1] - pfVar12[1]) * fVar3 + pfVar12[1];
                    *(float *)((int)DAT_00df9eb4 + iVar4 + 8) = (pfVar10[2] - pfVar12[2]) * fVar3 + pfVar12[2];
                    *(float *)((int)DAT_00df9eb0 + iVar13) = (*local_8 - *pfVar7) * fVar3 + *pfVar7;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (local_8[1] - pfVar7[1]) * fVar3 + pfVar7[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (local_8[2] - pfVar7[2]) * fVar3 + pfVar7[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                    iVar13 = iVar13 + 0x10;
                    pfVar11 = DAT_00df9eb4;
                    iVar4 = iVar4 + 0xc;
                }
                if (*pfVar10 <= fVar1)
                {
                    pfVar11 = (float *)((int)pfVar11 + iVar4);
                    iVar4 = iVar4 + 0xc;
                    *pfVar11 = *pfVar10;
                    pfVar11[1] = pfVar10[1];
                    pfVar11[2] = pfVar10[2];
                    pfVar6 = (float *)((int)DAT_00df9eb0 + iVar13);
                    *pfVar6 = *local_8;
                    pfVar6[1] = local_8[1];
                    pfVar6[2] = local_8[2];
                    pfVar6[3] = local_8[3];
                    local_c = local_c + 1;
                    iVar13 = iVar13 + 0x10;
                    pfVar11 = DAT_00df9eb4;
                }
            }
            param_4 = param_4 + -1;
            pfVar12 = pfVar10;
            pfVar7 = local_8;
            iVar9 = local_c;
            pfVar10 = pfVar10 + 3;
            local_8 = local_8 + 4;
        } while (param_4 != 0);
    }
    pfVar10 = DAT_00dfa13c;
    if (iVar9 < 3)
    {
        return iVar9;
    }
    pfVar6 = pfVar11 + iVar9 * 3 + -3;
    DAT_00dfa13c = DAT_00df9eb0;
    local_c = 0;
    local_8 = DAT_00df9eb0;
    pfVar12 = DAT_00dfa138;
    DAT_00df9eb4 = DAT_00dfa138;
    DAT_00dfa138 = pfVar11;
    if (iVar9 < 1)
    {
        param_4 = 0;
        DAT_00df9eb0 = pfVar10;
    }
    else
    {
        pfVar11 = pfVar11 + 2;
        iVar13 = 0;
        iVar4 = 0;
        pfVar7 = DAT_00df9eb0 + iVar9 * 4 + -4;
        DAT_00df9eb0 = pfVar10;
        do
        {
            param_4 = iVar9;
            fVar2 = (float)param_1[4];
            fVar1 = (float)param_1[4];
            if ((pfVar6[2] <= fVar2) || (*pfVar11 <= fVar1))
            {
                if (((pfVar6[2] != fVar2) && (fVar1 != *pfVar11)) && ((fVar2 < pfVar6[2] || (fVar1 < *pfVar11))))
                {
                    fVar3 = (*pfVar11 - pfVar6[2]) / (fVar2 - pfVar6[2]);
                    local_c = local_c + 1;
                    *(float *)((int)pfVar12 + iVar4) = (pfVar11[-2] - *pfVar6) * fVar3 + *pfVar6;
                    *(float *)((int)DAT_00df9eb4 + iVar4 + 4) = (pfVar11[-1] - pfVar6[1]) * fVar3 + pfVar6[1];
                    *(float *)((int)DAT_00df9eb4 + iVar4 + 8) = fVar2;
                    *(float *)((int)DAT_00df9eb0 + iVar13) = (*local_8 - *pfVar7) * fVar3 + *pfVar7;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (local_8[1] - pfVar7[1]) * fVar3 + pfVar7[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (local_8[2] - pfVar7[2]) * fVar3 + pfVar7[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 4;
                    iVar13 = iVar13 + 0x10;
                    pfVar12 = DAT_00df9eb4;
                    iVar4 = iVar4 + 0xc;
                }
                if (*pfVar11 <= fVar1)
                {
                    pfVar12 = (float *)((int)pfVar12 + iVar4);
                    iVar4 = iVar4 + 0xc;
                    *pfVar12 = pfVar11[-2];
                    pfVar12[1] = pfVar11[-1];
                    pfVar12[2] = *pfVar11;
                    pfVar10 = (float *)((int)DAT_00df9eb0 + iVar13);
                    *pfVar10 = *local_8;
                    pfVar10[1] = local_8[1];
                    pfVar10[2] = local_8[2];
                    pfVar10[3] = local_8[3];
                    local_c = local_c + 1;
                    iVar13 = iVar13 + 0x10;
                    pfVar12 = DAT_00df9eb4;
                }
            }
            pfVar6 = pfVar11 + -2;
            pfVar11 = pfVar11 + 3;
            iVar9 = param_4 + -1;
            pfVar7 = local_8;
            param_4 = local_c;
            local_8 = local_8 + 4;
        } while (iVar9 != 0);
    }
    if (param_4 < 3)
    {
        return param_4;
    }
    pfVar10 = pfVar12 + param_4 * 3 + -3;
    local_c = 0;
    pfVar6 = DAT_00dfa138;
    DAT_00df9eb4 = DAT_00dfa138;
    DAT_00dfa138 = pfVar12;
    if (param_4 < 1)
    {
        iVar9 = 0;
        pfVar11 = DAT_00dfa13c;
        DAT_00dfa13c = DAT_00df9eb0;
    }
    else
    {
        pfVar12 = pfVar12 + 2;
        iVar4 = 0;
        iVar13 = 0;
        pfVar7 = DAT_00df9eb0 + param_4 * 4 + -4;
        pfVar11 = DAT_00dfa13c;
        DAT_00dfa13c = DAT_00df9eb0;
        local_8 = DAT_00df9eb0;
        do
        {
            DAT_00df9eb0 = pfVar11;
            fVar2 = (float)param_1[6];
            fVar1 = (float)param_1[6];
            if ((fVar2 <= pfVar10[2]) || (fVar1 <= *pfVar12))
            {
                if (((pfVar10[2] != fVar2) && (fVar1 != *pfVar12)) && ((pfVar10[2] < fVar2 || (*pfVar12 < fVar1))))
                {
                    fVar3 = (*pfVar12 - pfVar10[2]) / (fVar2 - pfVar10[2]);
                    local_c = local_c + 1;
                    *(float *)((int)pfVar6 + iVar13) = (pfVar12[-2] - *pfVar10) * fVar3 + *pfVar10;
                    *(float *)((int)DAT_00df9eb4 + iVar13 + 4) = (pfVar12[-1] - pfVar10[1]) * fVar3 + pfVar10[1];
                    *(float *)((int)DAT_00df9eb4 + iVar13 + 8) = fVar2;
                    *(float *)((int)DAT_00df9eb0 + iVar4) = (*local_8 - *pfVar7) * fVar3 + *pfVar7;
                    *(float *)((int)DAT_00df9eb0 + iVar4 + 4) = (local_8[1] - pfVar7[1]) * fVar3 + pfVar7[1];
                    *(float *)((int)DAT_00df9eb0 + iVar4 + 8) = (local_8[2] - pfVar7[2]) * fVar3 + pfVar7[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 8;
                    iVar13 = iVar13 + 0xc;
                    pfVar6 = DAT_00df9eb4;
                    iVar4 = iVar4 + 0x10;
                }
                if (fVar1 <= *pfVar12)
                {
                    pfVar6 = (float *)((int)pfVar6 + iVar13);
                    iVar13 = iVar13 + 0xc;
                    *pfVar6 = pfVar12[-2];
                    pfVar6[1] = pfVar12[-1];
                    pfVar6[2] = *pfVar12;
                    pfVar10 = (float *)((int)DAT_00df9eb0 + iVar4);
                    *pfVar10 = *local_8;
                    pfVar10[1] = local_8[1];
                    pfVar10[2] = local_8[2];
                    pfVar10[3] = local_8[3];
                    local_c = local_c + 1;
                    iVar4 = iVar4 + 0x10;
                    pfVar6 = DAT_00df9eb4;
                }
            }
            pfVar10 = pfVar12 + -2;
            pfVar12 = pfVar12 + 3;
            param_4 = param_4 + -1;
            pfVar7 = local_8;
            iVar9 = local_c;
            pfVar11 = DAT_00df9eb0;
            local_8 = local_8 + 4;
        } while (param_4 != 0);
    }
    DAT_00df9eb0 = pfVar11;
    if (2 < iVar9)
    {
        pfVar10 = pfVar6 + iVar9 * 3 + -3;
        local_c = 0;
        pfVar11 = DAT_00dfa138;
        DAT_00df9eb4 = DAT_00dfa138;
        DAT_00dfa138 = pfVar6;
        if (iVar9 < 1)
        {
            param_4 = 0;
            pfVar12 = DAT_00dfa13c;
            DAT_00dfa13c = DAT_00df9eb0;
        }
        else
        {
            pfVar6 = pfVar6 + 1;
            iVar13 = 0;
            iVar4 = 0;
            pfVar7 = DAT_00df9eb0 + iVar9 * 4 + -4;
            pfVar12 = DAT_00dfa13c;
            DAT_00dfa13c = DAT_00df9eb0;
            local_8 = DAT_00df9eb0;
            do
            {
                param_4 = iVar9;
                DAT_00df9eb0 = pfVar12;
                if (((float)param_1[1] <= pfVar10[1]) || ((float)param_1[1] <= *pfVar6))
                {
                    if (((pfVar10[1] != (float)param_1[1]) && (*pfVar6 != (float)param_1[1]))
                        && ((pfVar10[1] < (float)param_1[1] || (*pfVar6 < (float)param_1[1]))))
                    {
                        fVar1 = ((float)param_1[1] - pfVar10[1]) / (*pfVar6 - pfVar10[1]);
                        *(int *)((int)pfVar11 + iVar4 + 4) = param_1[1];
                        local_c = local_c + 1;
                        *(float *)((int)DAT_00df9eb4 + iVar4 + 8) = (pfVar6[1] - pfVar10[2]) * fVar1 + pfVar10[2];
                        *(float *)((int)DAT_00df9eb4 + iVar4) = (pfVar6[-1] - *pfVar10) * fVar1 + *pfVar10;
                        *(float *)((int)DAT_00df9eb0 + iVar13) = (*local_8 - *pfVar7) * fVar1 + *pfVar7;
                        *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (local_8[1] - pfVar7[1]) * fVar1 + pfVar7[1];
                        *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (local_8[2] - pfVar7[2]) * fVar1 + pfVar7[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 1;
                        iVar13 = iVar13 + 0x10;
                        pfVar11 = DAT_00df9eb4;
                        iVar4 = iVar4 + 0xc;
                    }
                    if ((float)param_1[1] <= *pfVar6)
                    {
                        pfVar11 = (float *)((int)pfVar11 + iVar4);
                        iVar4 = iVar4 + 0xc;
                        *pfVar11 = pfVar6[-1];
                        pfVar11[1] = *pfVar6;
                        pfVar11[2] = pfVar6[1];
                        pfVar10 = (float *)((int)DAT_00df9eb0 + iVar13);
                        *pfVar10 = *local_8;
                        pfVar10[1] = local_8[1];
                        pfVar10[2] = local_8[2];
                        local_c = local_c + 1;
                        pfVar10[3] = local_8[3];
                        iVar13 = iVar13 + 0x10;
                        pfVar11 = DAT_00df9eb4;
                    }
                }
                pfVar10 = pfVar6 + -1;
                pfVar6 = pfVar6 + 3;
                iVar9 = param_4 + -1;
                param_4 = local_c;
                pfVar7 = local_8;
                pfVar12 = DAT_00df9eb0;
                local_8 = local_8 + 4;
            } while (iVar9 != 0);
        }
        DAT_00df9eb0 = pfVar12;
        if (2 < param_4)
        {
            iVar9 = 0;
            local_c = param_4;
            pfVar10 = pfVar11;
            if (*param_1 != 0)
            {
                local_c = 0;
                pfVar6 = pfVar11 + param_4 * 3 + -3;
                pfVar10 = DAT_00dfa138;
                pfVar12 = DAT_00dfa13c;
                DAT_00df9eb4 = DAT_00dfa138;
                pfVar7 = DAT_00df9eb0;
                if (0 < param_4)
                {
                    pfVar14 = pfVar11 + 1;
                    iVar13 = 0;
                    pfVar8 = DAT_00df9eb0 + param_4 * 4 + -4;
                    pfVar12 = DAT_00dfa13c;
                    DAT_00dfa138 = pfVar11;
                    DAT_00dfa13c = DAT_00df9eb0;
                    local_8 = DAT_00df9eb0;
                    do
                    {
                        DAT_00df9eb0 = pfVar12;
                        if ((pfVar6[1] <= (float)param_1[2]) || (*pfVar14 <= (float)param_1[2]))
                        {
                            if (((pfVar6[1] != (float)param_1[2]) && (*pfVar14 != (float)param_1[2]))
                                && (((float)param_1[2] < pfVar6[1] || ((float)param_1[2] < *pfVar14))))
                            {
                                fVar1 = ((float)param_1[2] - pfVar6[1]) / (*pfVar14 - pfVar6[1]);
                                *(int *)((int)pfVar10 + iVar13 + 4) = param_1[2];
                                local_c = local_c + 1;
                                *(float *)((int)DAT_00df9eb4 + iVar13 + 8) =
                                    (pfVar14[1] - pfVar6[2]) * fVar1 + pfVar6[2];
                                *(float *)((int)DAT_00df9eb4 + iVar13) = (pfVar14[-1] - *pfVar6) * fVar1 + *pfVar6;
                                *(float *)((int)DAT_00df9eb0 + iVar9) = (*local_8 - *pfVar8) * fVar1 + *pfVar8;
                                *(float *)((int)DAT_00df9eb0 + iVar9 + 4) =
                                    (local_8[1] - pfVar8[1]) * fVar1 + pfVar8[1];
                                *(float *)((int)DAT_00df9eb0 + iVar9 + 8) =
                                    (local_8[2] - pfVar8[2]) * fVar1 + pfVar8[2];
                                DAT_00dfaa04 = DAT_00dfaa04 | 2;
                                iVar13 = iVar13 + 0xc;
                                iVar9 = iVar9 + 0x10;
                                pfVar10 = DAT_00df9eb4;
                            }
                            if (*pfVar14 <= (float)param_1[2])
                            {
                                pfVar10 = (float *)((int)pfVar10 + iVar13);
                                iVar13 = iVar13 + 0xc;
                                *pfVar10 = pfVar14[-1];
                                pfVar10[1] = *pfVar14;
                                pfVar10[2] = pfVar14[1];
                                pfVar10 = (float *)((int)DAT_00df9eb0 + iVar9);
                                *pfVar10 = *local_8;
                                pfVar10[1] = local_8[1];
                                pfVar10[2] = local_8[2];
                                local_c = local_c + 1;
                                pfVar10[3] = local_8[3];
                                iVar9 = iVar9 + 0x10;
                                pfVar10 = DAT_00df9eb4;
                            }
                        }
                        pfVar6 = pfVar14 + -1;
                        pfVar14 = pfVar14 + 3;
                        param_4 = param_4 + -1;
                        pfVar8 = local_8;
                        pfVar12 = DAT_00df9eb0;
                        pfVar11 = DAT_00dfa138;
                        pfVar7 = DAT_00dfa13c;
                        local_8 = local_8 + 4;
                    } while (param_4 != 0);
                }
                DAT_00dfa13c = pfVar7;
                DAT_00dfa138 = pfVar11;
                DAT_00df9eb0 = pfVar12;
                if (local_c < 3)
                {
                    return local_c;
                }
            }
            if (pfVar10 != param_2)
            {
                QMEMCPY(uVar5, pfVar10, param_2, local_c * 3 & 0x3fffffff)
                for (iVar9 = 0; iVar9 != 0; iVar9 = iVar9 + -1)
                {
                    *(undefined_8 *)param_2 = *(undefined_8 *)pfVar10;
                    pfVar10 = (float *)((int)pfVar10 + 1);
                    param_2 = (float *)((int)param_2 + 1);
                }
                pfVar10 = DAT_00df9eb0;
                QMEMCPY(uVar5, pfVar10, param_3, (uint)(local_c << 4) >> 2)
                for (iVar9 = 0; iVar9 != 0; iVar9 = iVar9 + -1)
                {
                    *(undefined_8 *)param_3 = *(undefined_8 *)pfVar10;
                    pfVar10 = (float *)((int)pfVar10 + 1);
                    param_3 = (float *)((int)param_3 + 1);
                }
            }
            return local_c;
        }
        DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
        return param_4;
    }
    return iVar9;
}

int FUN_00498a60(int *param_1, float *param_2, float *param_3, float *param_4)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    float *pfVar11;
    int iVar12;
    float *pfVar13;
    float *pfVar14;
    float *pfVar15;
    float *pfVar16;
    float *pfVar17;
    float *pfVar18;
    int iVar19;
    int local_10;
    int local_4;

    DAT_00dfaa04 = 0;
    local_10 = 0;
    pfVar14 = (float *)&DAT_00dfa140;
    DAT_00dfa138 = param_2;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    DAT_00df9ea8 = param_3;
    DAT_00df9eac = (float *)&DAT_00df9eb8;
    if (0 < (int)param_4)
    {
        iVar8 = 0;
        local_4 = (int)param_4;
        pfVar17 = param_3 + (int)param_4 * 2 + -2;
        pfVar15 = param_3;
        pfVar16 = param_2 + (int)param_4 * 3 + -3;
        pfVar11 = param_2;
        do
        {
            fVar2 = (float)param_1[0xc] * pfVar16[1];
            fVar3 = (float)param_1[0xc] * pfVar11[1];
            if ((fVar2 <= *pfVar16) || (fVar3 <= *pfVar11))
            {
                iVar9 = iVar8;
                if (((*pfVar16 != fVar2) && (fVar3 != *pfVar11)) && ((*pfVar16 < fVar2 || (*pfVar11 < fVar3))))
                {
                    fVar2 = pfVar11[1] - pfVar16[1];
                    fVar4 = *pfVar11 - *pfVar16;
                    fVar1 = (float)param_1[0xc] * fVar2 - fVar4;
                    fVar5 = pfVar11[1] * *pfVar16 - pfVar16[1] * *pfVar11;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar1 = -fVar2;
                    }
                    fVar6 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar6 = -fVar4;
                    }
                    if (fVar1 <= fVar6)
                    {
                        fVar2 = ((float)param_1[0xc] * fVar5 - *pfVar16) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - pfVar16[1]) / fVar2;
                    }
                    *(float *)((int)pfVar14 + iVar8) = (float)param_1[0xc] * fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar8 + 4) = fVar5;
                    iVar9 = iVar8 + 0xc;
                    *(float *)((int)DAT_00df9eb4 + iVar8 + 8) = (pfVar11[2] - pfVar16[2]) * fVar2 + pfVar16[2];
                    DAT_00df9eac[local_10 * 2] = (*pfVar15 - *pfVar17) * fVar2 + *pfVar17;
                    DAT_00df9eac[local_10 * 2 + 1] = (pfVar15[1] - pfVar17[1]) * fVar2 + pfVar17[1];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    pfVar14 = DAT_00df9eb4;
                    local_10 = local_10 + 1;
                }
                iVar8 = iVar9;
                if (fVar3 <= *pfVar11)
                {
                    pfVar14 = (float *)((int)pfVar14 + iVar9);
                    *pfVar14 = *pfVar11;
                    pfVar14[1] = pfVar11[1];
                    pfVar14[2] = pfVar11[2];
                    DAT_00df9eac[local_10 * 2] = *pfVar15;
                    DAT_00df9eac[local_10 * 2 + 1] = pfVar15[1];
                    local_10 = local_10 + 1;
                    iVar8 = iVar9 + 0xc;
                    pfVar14 = DAT_00df9eb4;
                }
            }
            local_4 = local_4 + -1;
            pfVar17 = pfVar15;
            pfVar15 = pfVar15 + 2;
            pfVar16 = pfVar11;
            pfVar11 = pfVar11 + 3;
        } while (local_4 != 0);
    }
    local_4 = local_10;
    pfVar17 = DAT_00df9ea8;
    if (local_10 < 3)
    {
        return local_10;
    }
    DAT_00df9ea8 = DAT_00df9eac;
    iVar8 = local_10 * 2;
    local_10 = 0;
    pfVar15 = DAT_00dfa138;
    DAT_00df9eb4 = DAT_00dfa138;
    if (0 < local_4)
    {
        iVar9 = 0;
        pfVar16 = DAT_00df9eac + iVar8 + -2;
        pfVar11 = pfVar14;
        pfVar13 = DAT_00df9eac;
        pfVar18 = pfVar14 + local_4 * 3 + -3;
        DAT_00df9eac = pfVar17;
        DAT_00dfa138 = pfVar14;
        do
        {
            pfVar14 = pfVar11;
            fVar2 = (float)param_1[10] * pfVar18[1];
            fVar3 = (float)param_1[10] * pfVar14[1];
            if ((*pfVar18 <= fVar2) || (*pfVar14 <= fVar3))
            {
                iVar8 = iVar9;
                if (((*pfVar18 != fVar2) && (fVar3 != *pfVar14)) && ((fVar2 < *pfVar18 || (fVar3 < *pfVar14))))
                {
                    fVar2 = pfVar14[1] - pfVar18[1];
                    fVar4 = *pfVar14 - *pfVar18;
                    fVar1 = (float)param_1[10] * fVar2 - fVar4;
                    fVar5 = pfVar14[1] * *pfVar18 - pfVar18[1] * *pfVar14;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar1 = -fVar2;
                    }
                    fVar6 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar6 = -fVar4;
                    }
                    if (fVar1 <= fVar6)
                    {
                        fVar2 = ((float)param_1[10] * fVar5 - *pfVar18) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - pfVar18[1]) / fVar2;
                    }
                    *(float *)((int)pfVar15 + iVar9) = (float)param_1[10] * fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar9 + 4) = fVar5;
                    iVar8 = iVar9 + 0xc;
                    *(float *)((int)DAT_00df9eb4 + iVar9 + 8) = (pfVar14[2] - pfVar18[2]) * fVar2 + pfVar18[2];
                    DAT_00df9eac[local_10 * 2] = (*pfVar13 - *pfVar16) * fVar2 + *pfVar16;
                    DAT_00df9eac[local_10 * 2 + 1] = (pfVar13[1] - pfVar16[1]) * fVar2 + pfVar16[1];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                    pfVar15 = DAT_00df9eb4;
                    local_10 = local_10 + 1;
                }
                iVar9 = iVar8;
                if (*pfVar14 <= fVar3)
                {
                    pfVar15 = (float *)((int)pfVar15 + iVar8);
                    *pfVar15 = *pfVar14;
                    pfVar15[1] = pfVar14[1];
                    pfVar15[2] = pfVar14[2];
                    DAT_00df9eac[local_10 * 2] = *pfVar13;
                    DAT_00df9eac[local_10 * 2 + 1] = pfVar13[1];
                    local_10 = local_10 + 1;
                    iVar9 = iVar8 + 0xc;
                    pfVar15 = DAT_00df9eb4;
                }
            }
            local_4 = local_4 + -1;
            pfVar16 = pfVar13;
            pfVar11 = pfVar14 + 3;
            pfVar13 = pfVar13 + 2;
            pfVar18 = pfVar14;
            pfVar17 = DAT_00df9eac;
            pfVar14 = DAT_00dfa138;
        } while (local_4 != 0);
    }
    DAT_00dfa138 = pfVar14;
    DAT_00df9eac = pfVar17;
    local_4 = local_10;
    pfVar14 = DAT_00df9eac;
    if (local_10 < 3)
    {
        return local_10;
    }
    DAT_00df9eac = DAT_00df9ea8;
    iVar8 = 0;
    DAT_00df9eb4 = DAT_00dfa138;
    pfVar17 = pfVar15 + local_10 * 3 + -3;
    DAT_00df9ea8 = pfVar14;
    local_10 = 0;
    pfVar16 = DAT_00dfa138;
    if (0 < local_4)
    {
        pfVar13 = pfVar15 + 2;
        pfVar11 = pfVar14 + local_4 * 2 + -2;
        DAT_00dfa138 = pfVar15;
        do
        {
            fVar2 = (float)param_1[0xb] * pfVar17[1];
            fVar3 = pfVar13[-1] * (float)param_1[0xb];
            if ((pfVar17[2] <= fVar2) || (*pfVar13 <= fVar3))
            {
                iVar9 = iVar8;
                if (((pfVar17[2] != fVar2) && (fVar3 != *pfVar13)) && ((fVar2 < pfVar17[2] || (fVar3 < *pfVar13))))
                {
                    fVar2 = pfVar13[-1] - pfVar17[1];
                    fVar4 = *pfVar13 - pfVar17[2];
                    fVar1 = (float)param_1[0xb] * fVar2 - fVar4;
                    fVar5 = pfVar17[2] * pfVar13[-1] - pfVar17[1] * *pfVar13;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = (float)param_1[0xb];
                    fVar6 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar6 = -fVar2;
                    }
                    fVar7 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar7 = -fVar4;
                    }
                    if (fVar6 <= fVar7)
                    {
                        fVar2 = (fVar1 * fVar5 - pfVar17[2]) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - pfVar17[1]) / fVar2;
                    }
                    iVar9 = iVar8 + 0xc;
                    *(float *)((int)pfVar16 + iVar8) = (pfVar13[-2] - *pfVar17) * fVar2 + *pfVar17;
                    *(float *)((int)DAT_00df9eb4 + iVar8 + 4) = fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar8 + 8) = fVar1 * fVar5;
                    DAT_00df9eac[local_10 * 2] = (*pfVar14 - *pfVar11) * fVar2 + *pfVar11;
                    DAT_00df9eac[local_10 * 2 + 1] = (pfVar14[1] - pfVar11[1]) * fVar2 + pfVar11[1];
                    DAT_00dfaa04 = DAT_00dfaa04 | 4;
                    pfVar16 = DAT_00df9eb4;
                    local_10 = local_10 + 1;
                }
                iVar8 = iVar9;
                if (*pfVar13 <= fVar3)
                {
                    pfVar16 = (float *)((int)pfVar16 + iVar9);
                    *pfVar16 = pfVar13[-2];
                    pfVar16[1] = pfVar13[-1];
                    pfVar16[2] = *pfVar13;
                    DAT_00df9eac[local_10 * 2] = *pfVar14;
                    DAT_00df9eac[local_10 * 2 + 1] = pfVar14[1];
                    local_10 = local_10 + 1;
                    iVar8 = iVar9 + 0xc;
                    pfVar16 = DAT_00df9eb4;
                }
            }
            pfVar17 = pfVar13 + -2;
            pfVar13 = pfVar13 + 3;
            local_4 = local_4 + -1;
            pfVar11 = pfVar14;
            pfVar14 = pfVar14 + 2;
            pfVar15 = DAT_00dfa138;
        } while (local_4 != 0);
    }
    DAT_00dfa138 = pfVar15;
    local_4 = local_10;
    pfVar14 = DAT_00df9eac;
    if (local_10 < 3)
    {
        return local_10;
    }
    DAT_00df9eac = DAT_00df9ea8;
    iVar8 = 0;
    DAT_00df9eb4 = DAT_00dfa138;
    pfVar17 = pfVar16 + local_10 * 3 + -3;
    DAT_00df9ea8 = pfVar14;
    local_10 = 0;
    pfVar15 = DAT_00dfa138;
    if (0 < local_4)
    {
        pfVar13 = pfVar16 + 2;
        pfVar11 = pfVar14 + local_4 * 2 + -2;
        DAT_00dfa138 = pfVar16;
        do
        {
            fVar2 = (float)param_1[8] * pfVar17[1];
            fVar3 = pfVar13[-1] * (float)param_1[8];
            if ((fVar2 <= pfVar17[2]) || (fVar3 <= *pfVar13))
            {
                iVar9 = iVar8;
                if (((pfVar17[2] != fVar2) && (fVar3 != *pfVar13)) && ((pfVar17[2] < fVar2 || (*pfVar13 < fVar3))))
                {
                    fVar2 = pfVar13[-1] - pfVar17[1];
                    fVar4 = *pfVar13 - pfVar17[2];
                    fVar1 = (float)param_1[8] * fVar2 - fVar4;
                    fVar5 = pfVar17[2] * pfVar13[-1] - pfVar17[1] * *pfVar13;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = (float)param_1[8];
                    fVar6 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar6 = -fVar2;
                    }
                    fVar7 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar7 = -fVar4;
                    }
                    if (fVar6 <= fVar7)
                    {
                        fVar2 = (fVar1 * fVar5 - pfVar17[2]) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - pfVar17[1]) / fVar2;
                    }
                    iVar9 = iVar8 + 0xc;
                    *(float *)((int)pfVar15 + iVar8) = (pfVar13[-2] - *pfVar17) * fVar2 + *pfVar17;
                    *(float *)((int)DAT_00df9eb4 + iVar8 + 4) = fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar8 + 8) = fVar1 * fVar5;
                    DAT_00df9eac[local_10 * 2] = (*pfVar14 - *pfVar11) * fVar2 + *pfVar11;
                    DAT_00df9eac[local_10 * 2 + 1] = (pfVar14[1] - pfVar11[1]) * fVar2 + pfVar11[1];
                    DAT_00dfaa04 = DAT_00dfaa04 | 8;
                    pfVar15 = DAT_00df9eb4;
                    local_10 = local_10 + 1;
                }
                iVar8 = iVar9;
                if (fVar3 <= *pfVar13)
                {
                    pfVar15 = (float *)((int)pfVar15 + iVar9);
                    *pfVar15 = pfVar13[-2];
                    pfVar15[1] = pfVar13[-1];
                    pfVar15[2] = *pfVar13;
                    DAT_00df9eac[local_10 * 2] = *pfVar14;
                    DAT_00df9eac[local_10 * 2 + 1] = pfVar14[1];
                    local_10 = local_10 + 1;
                    iVar8 = iVar9 + 0xc;
                    pfVar15 = DAT_00df9eb4;
                }
            }
            pfVar17 = pfVar13 + -2;
            pfVar13 = pfVar13 + 3;
            local_4 = local_4 + -1;
            pfVar11 = pfVar14;
            pfVar14 = pfVar14 + 2;
            pfVar16 = DAT_00dfa138;
        } while (local_4 != 0);
    }
    DAT_00dfa138 = pfVar16;
    param_4 = DAT_00df9eac;
    if (2 < local_10)
    {
        DAT_00df9eac = DAT_00df9ea8;
        iVar8 = 0;
        DAT_00df9eb4 = DAT_00dfa138;
        DAT_00df9ea8 = param_4;
        pfVar14 = pfVar15 + local_10 * 3 + -3;
        pfVar17 = DAT_00dfa138;
        if (0 < local_10)
        {
            pfVar11 = pfVar15 + 1;
            iVar9 = iVar8;
            pfVar16 = param_4 + local_10 * 2 + -2;
            iVar12 = 0;
            DAT_00dfa138 = pfVar15;
            local_4 = local_10;
            do
            {
                iVar8 = iVar9;
                iVar19 = iVar12;
                if (((float)param_1[1] <= pfVar14[1]) || ((float)param_1[1] <= *pfVar11))
                {
                    if (((pfVar14[1] != (float)param_1[1]) && (*pfVar11 != (float)param_1[1]))
                        && ((pfVar14[1] < (float)param_1[1] || (*pfVar11 < (float)param_1[1]))))
                    {
                        iVar19 = iVar12 + 0xc;
                        fVar2 = ((float)param_1[1] - pfVar14[1]) / (*pfVar11 - pfVar14[1]);
                        *(int *)((int)pfVar17 + iVar12 + 4) = param_1[1];
                        iVar8 = iVar9 + 1;
                        *(float *)((int)DAT_00df9eb4 + iVar12 + 8) = (pfVar11[1] - pfVar14[2]) * fVar2 + pfVar14[2];
                        *(float *)((int)DAT_00df9eb4 + iVar12) = (pfVar11[-1] - *pfVar14) * fVar2 + *pfVar14;
                        DAT_00df9eac[iVar9 * 2] = (*param_4 - *pfVar16) * fVar2 + *pfVar16;
                        DAT_00df9eac[iVar9 * 2 + 1] = (param_4[1] - pfVar16[1]) * fVar2 + pfVar16[1];
                        DAT_00dfaa04 = DAT_00dfaa04 | 1;
                        pfVar17 = DAT_00df9eb4;
                    }
                    if ((float)param_1[1] <= *pfVar11)
                    {
                        pfVar17 = (float *)((int)pfVar17 + iVar19);
                        iVar8 = iVar8 + 1;
                        iVar19 = iVar19 + 0xc;
                        *pfVar17 = pfVar11[-1];
                        pfVar17[1] = *pfVar11;
                        pfVar17[2] = pfVar11[1];
                        DAT_00df9eac[iVar8 * 2 + -2] = *param_4;
                        DAT_00df9eac[iVar8 * 2 + -1] = param_4[1];
                        pfVar17 = DAT_00df9eb4;
                    }
                }
                pfVar14 = pfVar11 + -1;
                pfVar11 = pfVar11 + 3;
                local_4 = local_4 + -1;
                iVar9 = iVar8;
                pfVar16 = param_4;
                iVar12 = iVar19;
                pfVar15 = DAT_00dfa138;
                param_4 = param_4 + 2;
            } while (local_4 != 0);
        }
        DAT_00dfa138 = pfVar15;
        pfVar14 = DAT_00df9ea8;
        if (iVar8 < 3)
        {
            DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
            return iVar8;
        }
        iVar9 = iVar8;
        pfVar15 = pfVar17;
        if (*param_1 != 0)
        {
            iVar9 = 0;
            DAT_00df9ea8 = DAT_00df9eac;
            pfVar16 = pfVar17 + iVar8 * 3 + -3;
            pfVar11 = DAT_00df9eac + iVar8 * 2 + -2;
            param_4 = DAT_00df9eac;
            pfVar15 = DAT_00dfa138;
            DAT_00df9eac = pfVar14;
            DAT_00df9eb4 = DAT_00dfa138;
            if (0 < iVar8)
            {
                pfVar14 = pfVar17 + 1;
                iVar12 = iVar9;
                iVar19 = 0;
                DAT_00dfa138 = pfVar17;
                local_4 = iVar8;
                do
                {
                    iVar9 = iVar12;
                    iVar8 = iVar19;
                    if ((pfVar16[1] <= (float)param_1[2]) || (*pfVar14 <= (float)param_1[2]))
                    {
                        if (((pfVar16[1] != (float)param_1[2]) && (*pfVar14 != (float)param_1[2]))
                            && (((float)param_1[2] < pfVar16[1] || ((float)param_1[2] < *pfVar14))))
                        {
                            iVar8 = iVar19 + 0xc;
                            fVar2 = ((float)param_1[2] - pfVar16[1]) / (*pfVar14 - pfVar16[1]);
                            *(int *)((int)pfVar15 + iVar19 + 4) = param_1[2];
                            iVar9 = iVar12 + 1;
                            *(float *)((int)DAT_00df9eb4 + iVar19 + 8) = (pfVar14[1] - pfVar16[2]) * fVar2 + pfVar16[2];
                            *(float *)((int)DAT_00df9eb4 + iVar19) = (pfVar14[-1] - *pfVar16) * fVar2 + *pfVar16;
                            DAT_00df9eac[iVar12 * 2] = (*param_4 - *pfVar11) * fVar2 + *pfVar11;
                            DAT_00df9eac[iVar12 * 2 + 1] = (param_4[1] - pfVar11[1]) * fVar2 + pfVar11[1];
                            DAT_00dfaa04 = DAT_00dfaa04 | 2;
                            pfVar15 = DAT_00df9eb4;
                        }
                        if (*pfVar14 <= (float)param_1[2])
                        {
                            pfVar15 = (float *)((int)pfVar15 + iVar8);
                            iVar9 = iVar9 + 1;
                            iVar8 = iVar8 + 0xc;
                            *pfVar15 = pfVar14[-1];
                            pfVar15[1] = *pfVar14;
                            pfVar15[2] = pfVar14[1];
                            DAT_00df9eac[iVar9 * 2 + -2] = *param_4;
                            DAT_00df9eac[iVar9 * 2 + -1] = param_4[1];
                            pfVar15 = DAT_00df9eb4;
                        }
                    }
                    pfVar16 = pfVar14 + -1;
                    pfVar14 = pfVar14 + 3;
                    local_4 = local_4 + -1;
                    iVar12 = iVar9;
                    pfVar11 = param_4;
                    iVar19 = iVar8;
                    pfVar17 = DAT_00dfa138;
                    param_4 = param_4 + 2;
                } while (local_4 != 0);
            }
            DAT_00dfa138 = pfVar17;
            if (iVar9 < 3)
            {
                return iVar9;
            }
        }
        if (pfVar15 != param_2)
        {
            QMEMCPY(uVar10, pfVar15, param_2, iVar9 * 3 & 0x3fffffff)
            for (iVar8 = 0; iVar8 != 0; iVar8 = iVar8 + -1)
            {
                *(undefined_8 *)param_2 = *(undefined_8 *)pfVar15;
                pfVar15 = (float *)((int)pfVar15 + 1);
                param_2 = (float *)((int)param_2 + 1);
            }
            pfVar14 = DAT_00df9eac;
            QMEMCPY(uVar10, pfVar14, param_3, (uint)(iVar9 * 8) >> 2)
            for (iVar8 = 0; iVar8 != 0; iVar8 = iVar8 + -1)
            {
                *(undefined_8 *)param_3 = *(undefined_8 *)pfVar14;
                pfVar14 = (float *)((int)pfVar14 + 1);
                param_3 = (float *)((int)param_3 + 1);
            }
        }
        return iVar9;
    }
    return local_10;
}

int FUN_00499840(int *param_1, float *param_2, float *param_3, int param_4)

{
    float fVar1;
    float fVar2;
    float fVar3;
    uint uVar4;
    float *pfVar5;
    float *pfVar6;
    float *pfVar7;
    float *pfVar8;
    float *pfVar9;
    float *pfVar10;
    float *pfVar11;
    int iVar12;
    int iVar13;
    int local_c;
    float *local_8;

    DAT_00dfaa04 = 0;
    local_c = 0;
    pfVar7 = (float *)&DAT_00dfa140;
    DAT_00dfa138 = param_2;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    DAT_00df9ea8 = param_3;
    DAT_00df9eac = (float *)&DAT_00df9eb8;
    if (0 < param_4)
    {
        iVar12 = 0;
        local_8 = (float *)param_4;
        pfVar11 = param_2 + param_4 * 3 + -3;
        pfVar8 = param_2;
        pfVar9 = param_3 + param_4 * 2 + -2;
        pfVar10 = param_3;
        do
        {
            fVar2 = (float)param_1[3];
            fVar1 = (float)param_1[3];
            if ((fVar2 <= *pfVar11) || (fVar1 <= *pfVar8))
            {
                iVar13 = iVar12;
                if (((*pfVar11 != fVar2) && (fVar1 != *pfVar8)) && ((*pfVar11 < fVar2 || (*pfVar8 < fVar1))))
                {
                    fVar3 = (*pfVar8 - *pfVar11) / (fVar2 - *pfVar11);
                    iVar13 = iVar12 + 0xc;
                    *(float *)((int)pfVar7 + iVar12) = fVar2;
                    *(float *)((int)DAT_00df9eb4 + iVar12 + 4) = (pfVar8[1] - pfVar11[1]) * fVar3 + pfVar11[1];
                    *(float *)((int)DAT_00df9eb4 + iVar12 + 8) = (pfVar8[2] - pfVar11[2]) * fVar3 + pfVar11[2];
                    DAT_00df9eac[local_c * 2] = (*pfVar10 - *pfVar9) * fVar3 + *pfVar9;
                    DAT_00df9eac[local_c * 2 + 1] = (pfVar10[1] - pfVar9[1]) * fVar3 + pfVar9[1];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    pfVar7 = DAT_00df9eb4;
                    local_c = local_c + 1;
                }
                iVar12 = iVar13;
                if (fVar1 <= *pfVar8)
                {
                    pfVar7 = (float *)((int)pfVar7 + iVar13);
                    *pfVar7 = *pfVar8;
                    pfVar7[1] = pfVar8[1];
                    pfVar7[2] = pfVar8[2];
                    DAT_00df9eac[local_c * 2] = *pfVar10;
                    DAT_00df9eac[local_c * 2 + 1] = pfVar10[1];
                    local_c = local_c + 1;
                    iVar12 = iVar13 + 0xc;
                    pfVar7 = DAT_00df9eb4;
                }
            }
            local_8 = (float *)((int)local_8 + -1);
            pfVar11 = pfVar8;
            pfVar8 = pfVar8 + 3;
            pfVar9 = pfVar10;
            pfVar10 = pfVar10 + 2;
        } while (local_8 != NULL);
    }
    local_8 = (float *)local_c;
    pfVar11 = DAT_00df9ea8;
    if (2 < local_c)
    {
        DAT_00df9eb4 = DAT_00dfa138;
        DAT_00df9ea8 = DAT_00df9eac;
        local_c = 0;
        pfVar8 = DAT_00dfa138;
        if (0 < (int)local_8)
        {
            iVar12 = 0;
            pfVar9 = pfVar7 + (int)local_8 * 3 + -3;
            pfVar10 = pfVar7;
            pfVar5 = DAT_00df9eac + (int)local_8 * 2 + -2;
            pfVar6 = DAT_00df9eac;
            DAT_00df9eac = pfVar11;
            DAT_00dfa138 = pfVar7;
            do
            {
                fVar2 = (float)param_1[5];
                fVar1 = (float)param_1[5];
                if ((*pfVar9 <= fVar2) || (*pfVar10 <= fVar1))
                {
                    iVar13 = iVar12;
                    if (((*pfVar9 != fVar2) && (fVar1 != *pfVar10)) && ((fVar2 < *pfVar9 || (fVar1 < *pfVar10))))
                    {
                        fVar3 = (*pfVar10 - *pfVar9) / (fVar2 - *pfVar9);
                        iVar13 = iVar12 + 0xc;
                        *(float *)((int)pfVar8 + iVar12) = fVar2;
                        *(float *)((int)DAT_00df9eb4 + iVar12 + 4) = (pfVar10[1] - pfVar9[1]) * fVar3 + pfVar9[1];
                        *(float *)((int)DAT_00df9eb4 + iVar12 + 8) = (pfVar10[2] - pfVar9[2]) * fVar3 + pfVar9[2];
                        DAT_00df9eac[local_c * 2] = (*pfVar6 - *pfVar5) * fVar3 + *pfVar5;
                        DAT_00df9eac[local_c * 2 + 1] = (pfVar6[1] - pfVar5[1]) * fVar3 + pfVar5[1];
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                        pfVar8 = DAT_00df9eb4;
                        local_c = local_c + 1;
                    }
                    iVar12 = iVar13;
                    if (*pfVar10 <= fVar1)
                    {
                        pfVar8 = (float *)((int)pfVar8 + iVar13);
                        *pfVar8 = *pfVar10;
                        pfVar8[1] = pfVar10[1];
                        pfVar8[2] = pfVar10[2];
                        DAT_00df9eac[local_c * 2] = *pfVar6;
                        DAT_00df9eac[local_c * 2 + 1] = pfVar6[1];
                        local_c = local_c + 1;
                        iVar12 = iVar13 + 0xc;
                        pfVar8 = DAT_00df9eb4;
                    }
                }
                local_8 = (float *)((int)local_8 + -1);
                pfVar9 = pfVar10;
                pfVar10 = pfVar10 + 3;
                pfVar5 = pfVar6;
                pfVar6 = pfVar6 + 2;
                pfVar11 = DAT_00df9eac;
                pfVar7 = DAT_00dfa138;
            } while (local_8 != NULL);
        }
        DAT_00dfa138 = pfVar7;
        DAT_00df9eac = pfVar11;
        param_4 = local_c;
        pfVar7 = DAT_00df9ea8;
        if (2 < local_c)
        {
            DAT_00df9eb4 = DAT_00dfa138;
            DAT_00df9ea8 = DAT_00df9eac;
            local_c = 0;
            pfVar11 = pfVar8 + param_4 * 3 + -3;
            pfVar9 = DAT_00dfa138;
            if (0 < param_4)
            {
                pfVar10 = pfVar8 + 2;
                iVar12 = 0;
                pfVar5 = DAT_00df9eac + param_4 * 2 + -2;
                pfVar6 = DAT_00df9eac;
                DAT_00df9eac = pfVar7;
                DAT_00dfa138 = pfVar8;
                do
                {
                    fVar2 = (float)param_1[4];
                    fVar1 = (float)param_1[4];
                    if ((pfVar11[2] <= fVar2) || (*pfVar10 <= fVar1))
                    {
                        iVar13 = iVar12;
                        if (((pfVar11[2] != fVar2) && (fVar1 != *pfVar10))
                            && ((fVar2 < pfVar11[2] || (fVar1 < *pfVar10))))
                        {
                            fVar3 = (*pfVar10 - pfVar11[2]) / (fVar2 - pfVar11[2]);
                            iVar13 = iVar12 + 0xc;
                            *(float *)((int)pfVar9 + iVar12) = (pfVar10[-2] - *pfVar11) * fVar3 + *pfVar11;
                            *(float *)((int)DAT_00df9eb4 + iVar12 + 4) =
                                (pfVar10[-1] - pfVar11[1]) * fVar3 + pfVar11[1];
                            *(float *)((int)DAT_00df9eb4 + iVar12 + 8) = fVar2;
                            DAT_00df9eac[local_c * 2] = (*pfVar6 - *pfVar5) * fVar3 + *pfVar5;
                            DAT_00df9eac[local_c * 2 + 1] = (pfVar6[1] - pfVar5[1]) * fVar3 + pfVar5[1];
                            DAT_00dfaa04 = DAT_00dfaa04 | 4;
                            pfVar9 = DAT_00df9eb4;
                            local_c = local_c + 1;
                        }
                        iVar12 = iVar13;
                        if (*pfVar10 <= fVar1)
                        {
                            pfVar9 = (float *)((int)pfVar9 + iVar13);
                            *pfVar9 = pfVar10[-2];
                            pfVar9[1] = pfVar10[-1];
                            pfVar9[2] = *pfVar10;
                            DAT_00df9eac[local_c * 2] = *pfVar6;
                            DAT_00df9eac[local_c * 2 + 1] = pfVar6[1];
                            local_c = local_c + 1;
                            iVar12 = iVar13 + 0xc;
                            pfVar9 = DAT_00df9eb4;
                        }
                    }
                    pfVar11 = pfVar10 + -2;
                    pfVar10 = pfVar10 + 3;
                    param_4 = param_4 + -1;
                    pfVar5 = pfVar6;
                    pfVar6 = pfVar6 + 2;
                    pfVar7 = DAT_00df9eac;
                    pfVar8 = DAT_00dfa138;
                } while (param_4 != 0);
            }
            DAT_00dfa138 = pfVar8;
            DAT_00df9eac = pfVar7;
            param_4 = local_c;
            pfVar7 = DAT_00df9ea8;
            if (2 < local_c)
            {
                DAT_00df9ea8 = DAT_00df9eac;
                local_c = 0;
                pfVar11 = pfVar9 + param_4 * 3 + -3;
                pfVar8 = DAT_00dfa138;
                DAT_00df9eb4 = DAT_00dfa138;
                if (0 < param_4)
                {
                    pfVar10 = pfVar9 + 2;
                    iVar12 = 0;
                    pfVar5 = DAT_00df9eac + param_4 * 2 + -2;
                    pfVar6 = DAT_00df9eac;
                    DAT_00df9eac = pfVar7;
                    DAT_00dfa138 = pfVar9;
                    do
                    {
                        fVar2 = (float)param_1[6];
                        fVar1 = (float)param_1[6];
                        if ((fVar2 <= pfVar11[2]) || (fVar1 <= *pfVar10))
                        {
                            iVar13 = iVar12;
                            if (((pfVar11[2] != fVar2) && (fVar1 != *pfVar10))
                                && ((pfVar11[2] < fVar2 || (*pfVar10 < fVar1))))
                            {
                                fVar3 = (*pfVar10 - pfVar11[2]) / (fVar2 - pfVar11[2]);
                                iVar13 = iVar12 + 0xc;
                                *(float *)((int)pfVar8 + iVar12) = (pfVar10[-2] - *pfVar11) * fVar3 + *pfVar11;
                                *(float *)((int)DAT_00df9eb4 + iVar12 + 4) =
                                    (pfVar10[-1] - pfVar11[1]) * fVar3 + pfVar11[1];
                                *(float *)((int)DAT_00df9eb4 + iVar12 + 8) = fVar2;
                                DAT_00df9eac[local_c * 2] = (*pfVar6 - *pfVar5) * fVar3 + *pfVar5;
                                DAT_00df9eac[local_c * 2 + 1] = (pfVar6[1] - pfVar5[1]) * fVar3 + pfVar5[1];
                                DAT_00dfaa04 = DAT_00dfaa04 | 8;
                                pfVar8 = DAT_00df9eb4;
                                local_c = local_c + 1;
                            }
                            iVar12 = iVar13;
                            if (fVar1 <= *pfVar10)
                            {
                                pfVar8 = (float *)((int)pfVar8 + iVar13);
                                *pfVar8 = pfVar10[-2];
                                pfVar8[1] = pfVar10[-1];
                                pfVar8[2] = *pfVar10;
                                DAT_00df9eac[local_c * 2] = *pfVar6;
                                DAT_00df9eac[local_c * 2 + 1] = pfVar6[1];
                                local_c = local_c + 1;
                                iVar12 = iVar13 + 0xc;
                                pfVar8 = DAT_00df9eb4;
                            }
                        }
                        pfVar11 = pfVar10 + -2;
                        pfVar10 = pfVar10 + 3;
                        param_4 = param_4 + -1;
                        pfVar5 = pfVar6;
                        pfVar6 = pfVar6 + 2;
                        pfVar7 = DAT_00df9eac;
                        pfVar9 = DAT_00dfa138;
                    } while (param_4 != 0);
                }
                DAT_00dfa138 = pfVar9;
                DAT_00df9eac = pfVar7;
                pfVar7 = DAT_00df9ea8;
                if (local_c < 3)
                {
                    return local_c;
                }
                iVar12 = 0;
                DAT_00df9ea8 = DAT_00df9eac;
                pfVar11 = pfVar8 + local_c * 3 + -3;
                pfVar9 = DAT_00df9eac + local_c * 2 + -2;
                local_8 = DAT_00df9eac;
                pfVar10 = DAT_00dfa138;
                DAT_00df9eac = pfVar7;
                DAT_00df9eb4 = DAT_00dfa138;
                if (0 < local_c)
                {
                    pfVar7 = pfVar8 + 1;
                    iVar13 = 0;
                    param_4 = local_c;
                    DAT_00dfa138 = pfVar8;
                    do
                    {
                        if (((float)param_1[1] <= pfVar11[1]) || ((float)param_1[1] <= *pfVar7))
                        {
                            if (((pfVar11[1] != (float)param_1[1]) && (*pfVar7 != (float)param_1[1]))
                                && ((pfVar11[1] < (float)param_1[1] || (*pfVar7 < (float)param_1[1]))))
                            {
                                fVar1 = ((float)param_1[1] - pfVar11[1]) / (*pfVar7 - pfVar11[1]);
                                *(int *)((int)pfVar10 + iVar13 + 4) = param_1[1];
                                *(float *)((int)DAT_00df9eb4 + iVar13 + 8) =
                                    (pfVar7[1] - pfVar11[2]) * fVar1 + pfVar11[2];
                                *(float *)((int)DAT_00df9eb4 + iVar13) = (pfVar7[-1] - *pfVar11) * fVar1 + *pfVar11;
                                DAT_00df9eac[iVar12 * 2] = (*local_8 - *pfVar9) * fVar1 + *pfVar9;
                                DAT_00df9eac[iVar12 * 2 + 1] = (local_8[1] - pfVar9[1]) * fVar1 + pfVar9[1];
                                DAT_00dfaa04 = DAT_00dfaa04 | 1;
                                iVar12 = iVar12 + 1;
                                pfVar10 = DAT_00df9eb4;
                                iVar13 = iVar13 + 0xc;
                            }
                            if ((float)param_1[1] <= *pfVar7)
                            {
                                pfVar10 = (float *)((int)pfVar10 + iVar13);
                                iVar12 = iVar12 + 1;
                                iVar13 = iVar13 + 0xc;
                                *pfVar10 = pfVar7[-1];
                                pfVar10[1] = *pfVar7;
                                pfVar10[2] = pfVar7[1];
                                DAT_00df9eac[iVar12 * 2 + -2] = *local_8;
                                DAT_00df9eac[iVar12 * 2 + -1] = local_8[1];
                                pfVar10 = DAT_00df9eb4;
                            }
                        }
                        pfVar11 = pfVar7 + -1;
                        pfVar7 = pfVar7 + 3;
                        param_4 = param_4 + -1;
                        pfVar9 = local_8;
                        pfVar8 = DAT_00dfa138;
                        local_8 = local_8 + 2;
                    } while (param_4 != 0);
                }
                DAT_00dfa138 = pfVar8;
                pfVar7 = DAT_00df9ea8;
                if (iVar12 < 3)
                {
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
                    return iVar12;
                }
                local_c = iVar12;
                pfVar11 = pfVar10;
                if (*param_1 != 0)
                {
                    local_c = 0;
                    DAT_00df9eb4 = DAT_00dfa138;
                    DAT_00df9ea8 = DAT_00df9eac;
                    pfVar8 = pfVar10 + iVar12 * 3 + -3;
                    pfVar9 = DAT_00df9eac + iVar12 * 2 + -2;
                    local_8 = DAT_00df9eac;
                    pfVar11 = DAT_00dfa138;
                    DAT_00df9eac = pfVar7;
                    if (0 < iVar12)
                    {
                        iVar13 = 0;
                        pfVar7 = pfVar10 + 1;
                        DAT_00dfa138 = pfVar10;
                        param_4 = iVar12;
                        do
                        {
                            if ((pfVar8[1] <= (float)param_1[2]) || (*pfVar7 <= (float)param_1[2]))
                            {
                                if (((pfVar8[1] != (float)param_1[2]) && (*pfVar7 != (float)param_1[2]))
                                    && (((float)param_1[2] < pfVar8[1] || ((float)param_1[2] < *pfVar7))))
                                {
                                    fVar1 = ((float)param_1[2] - pfVar8[1]) / (*pfVar7 - pfVar8[1]);
                                    *(int *)((int)pfVar11 + iVar13 + 4) = param_1[2];
                                    *(float *)((int)DAT_00df9eb4 + iVar13 + 8) =
                                        (pfVar7[1] - pfVar8[2]) * fVar1 + pfVar8[2];
                                    *(float *)((int)DAT_00df9eb4 + iVar13) = (pfVar7[-1] - *pfVar8) * fVar1 + *pfVar8;
                                    DAT_00df9eac[local_c * 2] = (*local_8 - *pfVar9) * fVar1 + *pfVar9;
                                    DAT_00df9eac[local_c * 2 + 1] = (local_8[1] - pfVar9[1]) * fVar1 + pfVar9[1];
                                    DAT_00dfaa04 = DAT_00dfaa04 | 2;
                                    local_c = local_c + 1;
                                    iVar13 = iVar13 + 0xc;
                                    pfVar11 = DAT_00df9eb4;
                                }
                                if (*pfVar7 <= (float)param_1[2])
                                {
                                    pfVar11 = (float *)((int)pfVar11 + iVar13);
                                    local_c = local_c + 1;
                                    iVar13 = iVar13 + 0xc;
                                    *pfVar11 = pfVar7[-1];
                                    pfVar11[1] = *pfVar7;
                                    pfVar11[2] = pfVar7[1];
                                    DAT_00df9eac[local_c * 2 + -2] = *local_8;
                                    DAT_00df9eac[local_c * 2 + -1] = local_8[1];
                                    pfVar11 = DAT_00df9eb4;
                                }
                            }
                            pfVar8 = pfVar7 + -1;
                            pfVar7 = pfVar7 + 3;
                            param_4 = param_4 + -1;
                            pfVar9 = local_8;
                            pfVar10 = DAT_00dfa138;
                            local_8 = local_8 + 2;
                        } while (param_4 != 0);
                    }
                    DAT_00dfa138 = pfVar10;
                    if (local_c < 3)
                    {
                        return local_c;
                    }
                }
                if (pfVar11 != param_2)
                {
                    QMEMCPY(uVar4, pfVar11, param_2, local_c * 3 & 0x3fffffff)
                    for (iVar12 = 0; iVar12 != 0; iVar12 = iVar12 + -1)
                    {
                        *(undefined_8 *)param_2 = *(undefined_8 *)pfVar11;
                        pfVar11 = (float *)((int)pfVar11 + 1);
                        param_2 = (float *)((int)param_2 + 1);
                    }
                    pfVar7 = DAT_00df9eac;
                    QMEMCPY(uVar4, pfVar7, param_3, (uint)(local_c * 8) >> 2)
                    for (iVar12 = 0; iVar12 != 0; iVar12 = iVar12 + -1)
                    {
                        *(undefined_8 *)param_3 = *(undefined_8 *)pfVar7;
                        pfVar7 = (float *)((int)pfVar7 + 1);
                        param_3 = (float *)((int)param_3 + 1);
                    }
                }
            }
        }
    }
    return local_c;
}

int FUN_0049a390(int *param_1, float *param_2, float *param_3, float *param_4, int param_5)

{
    float fVar1;
    float fVar2;
    float fVar3;
    float fVar4;
    float fVar5;
    float fVar6;
    float fVar7;
    float *pfVar8;
    float *pfVar9;
    float *pfVar10;
    float *pfVar11;
    uint uVar12;
    int iVar13;
    int iVar14;
    float *pfVar15;
    int iVar16;
    int iVar17;
    float *pfVar18;
    float *pfVar19;
    float *pfVar20;
    float *pfVar21;
    float *pfVar22;
    float *local_1c;
    int local_18;
    float *local_14;
    float *local_10;
    float *local_c;
    float *local_8;
    int local_4;

    local_1c = param_2 + param_5 * 3 + -3;
    iVar13 = 0;
    pfVar18 = (float *)&DAT_00dfa140;
    DAT_00dfaa04 = 0;
    DAT_00dfa138 = param_2;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    DAT_00df9ea8 = param_3;
    DAT_00df9eac = (float *)&DAT_00df9eb8;
    DAT_00dfa13c = param_4;
    DAT_00df9eb0 = (float *)&DAT_00dfa500;
    local_18 = 0;
    local_14 = param_2;
    if (0 < param_5)
    {
        iVar16 = 0;
        local_4 = param_5;
        pfVar9 = param_4 + param_5 * 4 + -4;
        pfVar20 = param_4;
        pfVar19 = param_3;
        local_10 = param_3 + param_5 * 2 + -2;
        do
        {
            pfVar11 = pfVar19;
            fVar2 = (float)param_1[0xc] * local_1c[1];
            fVar3 = (float)param_1[0xc] * local_14[1];
            if ((fVar2 <= *local_1c) || (fVar3 <= *local_14))
            {
                iVar14 = iVar13;
                iVar17 = iVar16;
                if (((*local_1c != fVar2) && (fVar3 != *local_14)) && ((*local_1c < fVar2 || (*local_14 < fVar3))))
                {
                    fVar2 = local_14[1] - local_1c[1];
                    fVar4 = *local_14 - *local_1c;
                    fVar1 = (float)param_1[0xc] * fVar2 - fVar4;
                    fVar5 = local_14[1] * *local_1c - local_1c[1] * *local_14;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar1 = -fVar2;
                    }
                    fVar6 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar6 = -fVar4;
                    }
                    if (fVar1 <= fVar6)
                    {
                        fVar2 = ((float)param_1[0xc] * fVar5 - *local_1c) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - local_1c[1]) / fVar2;
                    }
                    *(float *)((int)pfVar18 + iVar16) = (float)param_1[0xc] * fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar16 + 4) = fVar5;
                    iVar17 = iVar16 + 0xc;
                    *(float *)((int)DAT_00df9eb4 + iVar16 + 8) = (local_14[2] - local_1c[2]) * fVar2 + local_1c[2];
                    DAT_00df9eac[local_18 * 2] = (*pfVar11 - *local_10) * fVar2 + *local_10;
                    DAT_00df9eac[local_18 * 2 + 1] = (pfVar11[1] - local_10[1]) * fVar2 + local_10[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13) = (*pfVar20 - *pfVar9) * fVar2 + *pfVar9;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (pfVar20[1] - pfVar9[1]) * fVar2 + pfVar9[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (pfVar20[2] - pfVar9[2]) * fVar2 + pfVar9[2];
                    iVar14 = iVar13 + 0x10;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 0xc) = (pfVar20[3] - pfVar9[3]) * fVar2 + pfVar9[3];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    pfVar18 = DAT_00df9eb4;
                    local_18 = local_18 + 1;
                }
                iVar13 = iVar14;
                iVar16 = iVar17;
                if (fVar3 <= *local_14)
                {
                    pfVar18 = (float *)((int)pfVar18 + iVar17);
                    iVar16 = iVar17 + 0xc;
                    *pfVar18 = *local_14;
                    pfVar18[1] = local_14[1];
                    pfVar18[2] = local_14[2];
                    DAT_00df9eac[local_18 * 2] = *pfVar11;
                    DAT_00df9eac[local_18 * 2 + 1] = pfVar11[1];
                    pfVar18 = (float *)((int)DAT_00df9eb0 + iVar14);
                    *pfVar18 = *pfVar20;
                    pfVar18[1] = pfVar20[1];
                    pfVar18[2] = pfVar20[2];
                    local_18 = local_18 + 1;
                    pfVar18[3] = pfVar20[3];
                    iVar13 = iVar14 + 0x10;
                    pfVar18 = DAT_00df9eb4;
                }
            }
            local_1c = local_14;
            local_14 = local_14 + 3;
            local_4 = local_4 + -1;
            pfVar9 = pfVar20;
            pfVar20 = pfVar20 + 4;
            pfVar19 = pfVar11 + 2;
            local_10 = pfVar11;
        } while (local_4 != 0);
    }
    local_4 = local_18;
    pfVar20 = DAT_00df9eb0;
    pfVar9 = DAT_00df9eac;
    if (local_18 < 3)
    {
        return local_18;
    }
    local_1c = pfVar18 + local_18 * 3 + -3;
    DAT_00df9eb4 = DAT_00dfa138;
    local_10 = DAT_00df9eac + local_18 * 2 + -2;
    DAT_00df9eac = DAT_00df9ea8;
    DAT_00df9ea8 = pfVar9;
    DAT_00df9eb0 = DAT_00dfa13c;
    DAT_00dfa13c = pfVar20;
    local_18 = 0;
    pfVar19 = DAT_00dfa138;
    if (0 < local_4)
    {
        iVar13 = 0;
        iVar16 = 0;
        pfVar11 = pfVar20 + local_4 * 4 + -4;
        DAT_00dfa138 = pfVar18;
        local_14 = pfVar18;
        do
        {
            pfVar22 = pfVar9;
            fVar2 = (float)param_1[10] * local_1c[1];
            fVar3 = (float)param_1[10] * local_14[1];
            if ((*local_1c <= fVar2) || (*local_14 <= fVar3))
            {
                iVar14 = iVar13;
                iVar17 = iVar16;
                if (((*local_1c != fVar2) && (fVar3 != *local_14)) && ((fVar2 < *local_1c || (fVar3 < *local_14))))
                {
                    fVar2 = local_14[1] - local_1c[1];
                    fVar4 = *local_14 - *local_1c;
                    fVar1 = (float)param_1[10] * fVar2 - fVar4;
                    fVar5 = local_14[1] * *local_1c - local_1c[1] * *local_14;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar1 = -fVar2;
                    }
                    fVar6 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar6 = -fVar4;
                    }
                    if (fVar1 <= fVar6)
                    {
                        fVar2 = ((float)param_1[10] * fVar5 - *local_1c) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - local_1c[1]) / fVar2;
                    }
                    *(float *)((int)pfVar19 + iVar16) = (float)param_1[10] * fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar16 + 4) = fVar5;
                    iVar17 = iVar16 + 0xc;
                    *(float *)((int)DAT_00df9eb4 + iVar16 + 8) = (local_14[2] - local_1c[2]) * fVar2 + local_1c[2];
                    DAT_00df9eac[local_18 * 2] = (*pfVar22 - *local_10) * fVar2 + *local_10;
                    DAT_00df9eac[local_18 * 2 + 1] = (pfVar22[1] - local_10[1]) * fVar2 + local_10[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13) = (*pfVar20 - *pfVar11) * fVar2 + *pfVar11;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (pfVar20[1] - pfVar11[1]) * fVar2 + pfVar11[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (pfVar20[2] - pfVar11[2]) * fVar2 + pfVar11[2];
                    iVar14 = iVar13 + 0x10;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 0xc) = (pfVar20[3] - pfVar11[3]) * fVar2 + pfVar11[3];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                    pfVar19 = DAT_00df9eb4;
                    local_18 = local_18 + 1;
                }
                iVar13 = iVar14;
                iVar16 = iVar17;
                if (*local_14 <= fVar3)
                {
                    pfVar19 = (float *)((int)pfVar19 + iVar17);
                    iVar16 = iVar17 + 0xc;
                    *pfVar19 = *local_14;
                    pfVar19[1] = local_14[1];
                    pfVar19[2] = local_14[2];
                    DAT_00df9eac[local_18 * 2] = *pfVar22;
                    DAT_00df9eac[local_18 * 2 + 1] = pfVar22[1];
                    pfVar18 = (float *)((int)DAT_00df9eb0 + iVar14);
                    *pfVar18 = *pfVar20;
                    pfVar18[1] = pfVar20[1];
                    pfVar18[2] = pfVar20[2];
                    local_18 = local_18 + 1;
                    pfVar18[3] = pfVar20[3];
                    iVar13 = iVar14 + 0x10;
                    pfVar19 = DAT_00df9eb4;
                }
            }
            local_1c = local_14;
            local_14 = local_14 + 3;
            local_4 = local_4 + -1;
            pfVar11 = pfVar20;
            pfVar20 = pfVar20 + 4;
            pfVar9 = pfVar22 + 2;
            pfVar18 = DAT_00dfa138;
            local_10 = pfVar22;
        } while (local_4 != 0);
    }
    DAT_00dfa138 = pfVar18;
    local_4 = local_18;
    if (local_18 < 3)
    {
        return local_18;
    }
    iVar13 = 0;
    local_1c = pfVar19 + local_18 * 3 + -3;
    local_10 = DAT_00df9eac + local_18 * 2 + -2;
    local_18 = 0;
    pfVar18 = DAT_00dfa138;
    pfVar9 = DAT_00df9eac;
    pfVar20 = DAT_00df9ea8;
    pfVar11 = DAT_00dfa13c;
    DAT_00df9eb4 = DAT_00dfa138;
    pfVar22 = DAT_00df9eb0;
    if (0 < local_4)
    {
        iVar16 = 0;
        local_14 = pfVar19 + 2;
        pfVar10 = DAT_00df9eb0 + local_4 * 4 + -4;
        pfVar15 = DAT_00df9eb0;
        pfVar8 = DAT_00df9eac;
        pfVar9 = DAT_00df9eac;
        DAT_00df9eac = DAT_00df9ea8;
        pfVar11 = DAT_00dfa13c;
        DAT_00dfa138 = pfVar19;
        DAT_00dfa13c = DAT_00df9eb0;
        do
        {
            DAT_00df9eb0 = pfVar11;
            DAT_00df9ea8 = pfVar9;
            pfVar21 = pfVar8;
            fVar2 = (float)param_1[0xb] * local_1c[1];
            fVar3 = (float)param_1[0xb] * local_14[-1];
            if ((local_1c[2] <= fVar2) || (*local_14 <= fVar3))
            {
                iVar14 = iVar13;
                iVar17 = iVar16;
                if (((local_1c[2] != fVar2) && (fVar3 != *local_14)) && ((fVar2 < local_1c[2] || (fVar3 < *local_14))))
                {
                    fVar2 = local_14[-1] - local_1c[1];
                    fVar4 = *local_14 - local_1c[2];
                    fVar1 = (float)param_1[0xb] * fVar2 - fVar4;
                    fVar5 = local_1c[2] * local_14[-1] - local_1c[1] * *local_14;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = (float)param_1[0xb];
                    fVar6 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar6 = -fVar2;
                    }
                    fVar7 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar7 = -fVar4;
                    }
                    if (fVar6 <= fVar7)
                    {
                        fVar2 = (fVar1 * fVar5 - local_1c[2]) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - local_1c[1]) / fVar2;
                    }
                    iVar17 = iVar16 + 0xc;
                    *(float *)((int)pfVar18 + iVar16) = (local_14[-2] - *local_1c) * fVar2 + *local_1c;
                    *(float *)((int)DAT_00df9eb4 + iVar16 + 4) = fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar16 + 8) = fVar1 * fVar5;
                    DAT_00df9eac[local_18 * 2] = (*pfVar21 - *local_10) * fVar2 + *local_10;
                    DAT_00df9eac[local_18 * 2 + 1] = (pfVar21[1] - local_10[1]) * fVar2 + local_10[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13) = (*pfVar15 - *pfVar10) * fVar2 + *pfVar10;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (pfVar15[1] - pfVar10[1]) * fVar2 + pfVar10[1];
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (pfVar15[2] - pfVar10[2]) * fVar2 + pfVar10[2];
                    iVar14 = iVar13 + 0x10;
                    *(float *)((int)DAT_00df9eb0 + iVar13 + 0xc) = (pfVar15[3] - pfVar10[3]) * fVar2 + pfVar10[3];
                    DAT_00dfaa04 = DAT_00dfaa04 | 4;
                    pfVar18 = DAT_00df9eb4;
                    local_18 = local_18 + 1;
                }
                iVar13 = iVar14;
                iVar16 = iVar17;
                if (*local_14 <= fVar3)
                {
                    pfVar18 = (float *)((int)pfVar18 + iVar17);
                    iVar16 = iVar17 + 0xc;
                    *pfVar18 = local_14[-2];
                    pfVar18[1] = local_14[-1];
                    pfVar18[2] = *local_14;
                    DAT_00df9eac[local_18 * 2] = *pfVar21;
                    DAT_00df9eac[local_18 * 2 + 1] = pfVar21[1];
                    pfVar18 = (float *)((int)DAT_00df9eb0 + iVar14);
                    *pfVar18 = *pfVar15;
                    pfVar18[1] = pfVar15[1];
                    pfVar18[2] = pfVar15[2];
                    local_18 = local_18 + 1;
                    pfVar18[3] = pfVar15[3];
                    iVar13 = iVar14 + 0x10;
                    pfVar18 = DAT_00df9eb4;
                }
            }
            local_1c = local_14 + -2;
            local_14 = local_14 + 3;
            local_4 = local_4 + -1;
            pfVar10 = pfVar15;
            pfVar15 = pfVar15 + 4;
            pfVar8 = pfVar21 + 2;
            pfVar9 = DAT_00df9ea8;
            pfVar20 = DAT_00df9eac;
            pfVar11 = DAT_00df9eb0;
            pfVar19 = DAT_00dfa138;
            pfVar22 = DAT_00dfa13c;
            local_10 = pfVar21;
        } while (local_4 != 0);
    }
    DAT_00dfa13c = pfVar22;
    DAT_00dfa138 = pfVar19;
    DAT_00df9eb0 = pfVar11;
    DAT_00df9eac = pfVar20;
    DAT_00df9ea8 = pfVar9;
    local_4 = local_18;
    pfVar20 = DAT_00df9eb0;
    pfVar9 = DAT_00df9eac;
    if (local_18 < 3)
    {
        return local_18;
    }
    DAT_00df9eac = DAT_00df9ea8;
    iVar16 = 0;
    DAT_00df9eb4 = DAT_00dfa138;
    DAT_00df9eb0 = DAT_00dfa13c;
    DAT_00df9ea8 = pfVar9;
    DAT_00dfa13c = pfVar20;
    local_1c = pfVar18 + local_18 * 3 + -3;
    iVar13 = local_18 * 2;
    local_18 = 0;
    pfVar19 = DAT_00dfa138;
    if (0 < local_4)
    {
        iVar14 = 0;
        local_14 = pfVar18 + 2;
        pfVar11 = pfVar20 + local_4 * 4 + -4;
        DAT_00dfa138 = pfVar18;
        local_10 = pfVar9 + iVar13 + -2;
        do
        {
            pfVar22 = pfVar9;
            fVar2 = (float)param_1[8] * local_1c[1];
            fVar3 = (float)param_1[8] * local_14[-1];
            if ((fVar2 <= local_1c[2]) || (fVar3 <= *local_14))
            {
                iVar13 = iVar14;
                iVar17 = iVar16;
                if (((local_1c[2] != fVar2) && (fVar3 != *local_14)) && ((local_1c[2] < fVar2 || (*local_14 < fVar3))))
                {
                    fVar2 = local_14[-1] - local_1c[1];
                    fVar4 = *local_14 - local_1c[2];
                    fVar1 = (float)param_1[8] * fVar2 - fVar4;
                    fVar5 = local_1c[2] * local_14[-1] - local_1c[1] * *local_14;
                    if (fVar1 != 0.0)
                    {
                        fVar5 = fVar5 / fVar1;
                    }
                    fVar1 = (float)param_1[8];
                    fVar6 = fVar2;
                    if (fVar2 < 0.0)
                    {
                        fVar6 = -fVar2;
                    }
                    fVar7 = fVar4;
                    if (fVar4 < 0.0)
                    {
                        fVar7 = -fVar4;
                    }
                    if (fVar6 <= fVar7)
                    {
                        fVar2 = (fVar1 * fVar5 - local_1c[2]) / fVar4;
                    }
                    else
                    {
                        fVar2 = (fVar5 - local_1c[1]) / fVar2;
                    }
                    iVar17 = iVar16 + 0xc;
                    *(float *)((int)pfVar19 + iVar16) = (local_14[-2] - *local_1c) * fVar2 + *local_1c;
                    *(float *)((int)DAT_00df9eb4 + iVar16 + 4) = fVar5;
                    *(float *)((int)DAT_00df9eb4 + iVar16 + 8) = fVar1 * fVar5;
                    DAT_00df9eac[local_18 * 2] = (*pfVar22 - *local_10) * fVar2 + *local_10;
                    DAT_00df9eac[local_18 * 2 + 1] = (pfVar22[1] - local_10[1]) * fVar2 + local_10[1];
                    *(float *)((int)DAT_00df9eb0 + iVar14) = (*pfVar20 - *pfVar11) * fVar2 + *pfVar11;
                    *(float *)((int)DAT_00df9eb0 + iVar14 + 4) = (pfVar20[1] - pfVar11[1]) * fVar2 + pfVar11[1];
                    *(float *)((int)DAT_00df9eb0 + iVar14 + 8) = (pfVar20[2] - pfVar11[2]) * fVar2 + pfVar11[2];
                    iVar13 = iVar14 + 0x10;
                    *(float *)((int)DAT_00df9eb0 + iVar14 + 0xc) = (pfVar20[3] - pfVar11[3]) * fVar2 + pfVar11[3];
                    DAT_00dfaa04 = DAT_00dfaa04 | 8;
                    pfVar19 = DAT_00df9eb4;
                    local_18 = local_18 + 1;
                }
                iVar14 = iVar13;
                iVar16 = iVar17;
                if (fVar3 <= *local_14)
                {
                    pfVar19 = (float *)((int)pfVar19 + iVar17);
                    iVar16 = iVar17 + 0xc;
                    *pfVar19 = local_14[-2];
                    pfVar19[1] = local_14[-1];
                    pfVar19[2] = *local_14;
                    DAT_00df9eac[local_18 * 2] = *pfVar22;
                    DAT_00df9eac[local_18 * 2 + 1] = pfVar22[1];
                    pfVar18 = (float *)((int)DAT_00df9eb0 + iVar13);
                    *pfVar18 = *pfVar20;
                    pfVar18[1] = pfVar20[1];
                    pfVar18[2] = pfVar20[2];
                    local_18 = local_18 + 1;
                    pfVar18[3] = pfVar20[3];
                    iVar14 = iVar13 + 0x10;
                    pfVar19 = DAT_00df9eb4;
                }
            }
            local_1c = local_14 + -2;
            local_14 = local_14 + 3;
            local_4 = local_4 + -1;
            pfVar11 = pfVar20;
            pfVar20 = pfVar20 + 4;
            pfVar9 = pfVar22 + 2;
            pfVar18 = DAT_00dfa138;
            local_10 = pfVar22;
        } while (local_4 != 0);
    }
    DAT_00dfa138 = pfVar18;
    param_5 = local_18;
    pfVar18 = DAT_00df9eb0;
    local_8 = DAT_00df9eac;
    if (2 < local_18)
    {
        DAT_00df9eac = DAT_00df9ea8;
        DAT_00df9eb0 = DAT_00dfa13c;
        iVar16 = 0;
        DAT_00df9eb4 = DAT_00dfa138;
        DAT_00df9ea8 = local_8;
        DAT_00dfa13c = pfVar18;
        pfVar9 = pfVar19 + local_18 * 3 + -3;
        local_10 = local_8 + local_18 * 2 + -2;
        iVar13 = local_18 * 4;
        pfVar20 = DAT_00dfa138;
        if (0 < local_18)
        {
            local_c = pfVar19 + 1;
            local_18 = 0;
            pfVar11 = pfVar18 + iVar13 + -4;
            iVar13 = 0;
            DAT_00dfa138 = pfVar19;
            do
            {
                iVar14 = iVar13;
                if (((float)param_1[1] <= pfVar9[1]) || ((float)param_1[1] <= *local_c))
                {
                    if (((pfVar9[1] != (float)param_1[1]) && (*local_c != (float)param_1[1]))
                        && ((pfVar9[1] < (float)param_1[1] || (*local_c < (float)param_1[1]))))
                    {
                        fVar2 = ((float)param_1[1] - pfVar9[1]) / (*local_c - pfVar9[1]);
                        *(int *)((int)pfVar20 + local_18 + 4) = param_1[1];
                        *(float *)((int)DAT_00df9eb4 + local_18 + 8) = (local_c[1] - pfVar9[2]) * fVar2 + pfVar9[2];
                        *(float *)((int)DAT_00df9eb4 + local_18) = (local_c[-1] - *pfVar9) * fVar2 + *pfVar9;
                        DAT_00df9eac[iVar16 * 2] = (*local_8 - *local_10) * fVar2 + *local_10;
                        DAT_00df9eac[iVar16 * 2 + 1] = (local_8[1] - local_10[1]) * fVar2 + local_10[1];
                        *(float *)((int)DAT_00df9eb0 + iVar13) = (*pfVar18 - *pfVar11) * fVar2 + *pfVar11;
                        *(float *)((int)DAT_00df9eb0 + iVar13 + 4) = (pfVar18[1] - pfVar11[1]) * fVar2 + pfVar11[1];
                        local_18 = local_18 + 0xc;
                        iVar16 = iVar16 + 1;
                        iVar14 = iVar13 + 0x10;
                        *(float *)((int)DAT_00df9eb0 + iVar13 + 8) = (pfVar18[2] - pfVar11[2]) * fVar2 + pfVar11[2];
                        *(float *)((int)DAT_00df9eb0 + iVar13 + 0xc) = (pfVar18[3] - pfVar11[3]) * fVar2 + pfVar11[3];
                        DAT_00dfaa04 = DAT_00dfaa04 | 1;
                        pfVar20 = DAT_00df9eb4;
                    }
                    if ((float)param_1[1] <= *local_c)
                    {
                        pfVar20 = (float *)((int)pfVar20 + local_18);
                        local_18 = local_18 + 0xc;
                        *pfVar20 = local_c[-1];
                        pfVar20[1] = *local_c;
                        pfVar20[2] = local_c[1];
                        DAT_00df9eac[iVar16 * 2] = *local_8;
                        DAT_00df9eac[iVar16 * 2 + 1] = local_8[1];
                        pfVar9 = (float *)((int)DAT_00df9eb0 + iVar14);
                        iVar16 = iVar16 + 1;
                        iVar14 = iVar14 + 0x10;
                        *pfVar9 = *pfVar18;
                        pfVar9[1] = pfVar18[1];
                        pfVar9[2] = pfVar18[2];
                        pfVar9[3] = pfVar18[3];
                        pfVar20 = DAT_00df9eb4;
                    }
                }
                pfVar9 = local_c + -1;
                local_c = local_c + 3;
                local_10 = local_8;
                local_8 = local_8 + 2;
                param_5 = param_5 + -1;
                pfVar11 = pfVar18;
                pfVar18 = pfVar18 + 4;
                iVar13 = iVar14;
                pfVar19 = DAT_00dfa138;
            } while (param_5 != 0);
        }
        DAT_00dfa138 = pfVar19;
        pfVar9 = DAT_00dfa13c;
        pfVar18 = DAT_00df9ea8;
        if (iVar16 < 3)
        {
            DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
            return iVar16;
        }
        iVar13 = iVar16;
        pfVar19 = pfVar20;
        if (*param_1 != 0)
        {
            iVar13 = 0;
            DAT_00df9ea8 = DAT_00df9eac;
            DAT_00dfa13c = DAT_00df9eb0;
            pfVar11 = pfVar20 + iVar16 * 3 + -3;
            local_10 = DAT_00df9eac + iVar16 * 2 + -2;
            local_8 = DAT_00df9eac;
            pfVar19 = DAT_00dfa138;
            DAT_00df9eac = pfVar18;
            DAT_00df9eb4 = DAT_00dfa138;
            if (0 < iVar16)
            {
                local_c = pfVar20 + 1;
                local_18 = 0;
                pfVar18 = DAT_00df9eb0 + iVar16 * 4 + -4;
                iVar14 = 0;
                pfVar22 = DAT_00df9eb0;
                DAT_00df9eb0 = pfVar9;
                DAT_00dfa138 = pfVar20;
                param_5 = iVar16;
                do
                {
                    iVar16 = iVar14;
                    if ((pfVar11[1] <= (float)param_1[2]) || (*local_c <= (float)param_1[2]))
                    {
                        if (((pfVar11[1] != (float)param_1[2]) && (*local_c != (float)param_1[2]))
                            && (((float)param_1[2] < pfVar11[1] || ((float)param_1[2] < *local_c))))
                        {
                            fVar2 = ((float)param_1[2] - pfVar11[1]) / (*local_c - pfVar11[1]);
                            *(int *)((int)pfVar19 + local_18 + 4) = param_1[2];
                            *(float *)((int)DAT_00df9eb4 + local_18 + 8) =
                                (local_c[1] - pfVar11[2]) * fVar2 + pfVar11[2];
                            *(float *)((int)DAT_00df9eb4 + local_18) = (local_c[-1] - *pfVar11) * fVar2 + *pfVar11;
                            DAT_00df9eac[iVar13 * 2] = (*local_8 - *local_10) * fVar2 + *local_10;
                            DAT_00df9eac[iVar13 * 2 + 1] = (local_8[1] - local_10[1]) * fVar2 + local_10[1];
                            *(float *)((int)DAT_00df9eb0 + iVar14) = (*pfVar22 - *pfVar18) * fVar2 + *pfVar18;
                            *(float *)((int)DAT_00df9eb0 + iVar14 + 4) = (pfVar22[1] - pfVar18[1]) * fVar2 + pfVar18[1];
                            local_18 = local_18 + 0xc;
                            iVar13 = iVar13 + 1;
                            iVar16 = iVar14 + 0x10;
                            *(float *)((int)DAT_00df9eb0 + iVar14 + 8) = (pfVar22[2] - pfVar18[2]) * fVar2 + pfVar18[2];
                            *(float *)((int)DAT_00df9eb0 + iVar14 + 0xc) =
                                (pfVar22[3] - pfVar18[3]) * fVar2 + pfVar18[3];
                            DAT_00dfaa04 = DAT_00dfaa04 | 2;
                            pfVar19 = DAT_00df9eb4;
                        }
                        if (*local_c <= (float)param_1[2])
                        {
                            pfVar19 = (float *)((int)pfVar19 + local_18);
                            local_18 = local_18 + 0xc;
                            *pfVar19 = local_c[-1];
                            pfVar19[1] = *local_c;
                            pfVar19[2] = local_c[1];
                            DAT_00df9eac[iVar13 * 2] = *local_8;
                            DAT_00df9eac[iVar13 * 2 + 1] = local_8[1];
                            pfVar18 = (float *)((int)DAT_00df9eb0 + iVar16);
                            iVar13 = iVar13 + 1;
                            iVar16 = iVar16 + 0x10;
                            *pfVar18 = *pfVar22;
                            pfVar18[1] = pfVar22[1];
                            pfVar18[2] = pfVar22[2];
                            pfVar18[3] = pfVar22[3];
                            pfVar19 = DAT_00df9eb4;
                        }
                    }
                    pfVar11 = local_c + -1;
                    local_c = local_c + 3;
                    local_10 = local_8;
                    local_8 = local_8 + 2;
                    param_5 = param_5 + -1;
                    pfVar18 = pfVar22;
                    iVar14 = iVar16;
                    pfVar22 = pfVar22 + 4;
                    pfVar9 = DAT_00df9eb0;
                    pfVar20 = DAT_00dfa138;
                } while (param_5 != 0);
            }
            DAT_00dfa138 = pfVar20;
            DAT_00df9eb0 = pfVar9;
            if (iVar13 < 3)
            {
                return iVar13;
            }
        }
        if (pfVar19 != param_2)
        {
            QMEMCPY(uVar12, pfVar19, param_2, iVar13 * 3 & 0x3fffffff)
            for (iVar16 = 0; iVar16 != 0; iVar16 = iVar16 + -1)
            {
                *(undefined_8 *)param_2 = *(undefined_8 *)pfVar19;
                pfVar19 = (float *)((int)pfVar19 + 1);
                param_2 = (float *)((int)param_2 + 1);
            }
            pfVar18 = DAT_00df9eac;
            QMEMCPY(uVar12, pfVar18, param_3, (uint)(iVar13 * 8) >> 2)
            for (iVar16 = 0; iVar16 != 0; iVar16 = iVar16 + -1)
            {
                *(undefined_8 *)param_3 = *(undefined_8 *)pfVar18;
                pfVar18 = (float *)((int)pfVar18 + 1);
                param_3 = (float *)((int)param_3 + 1);
            }
            pfVar18 = DAT_00df9eb0;
            QMEMCPY(uVar12, pfVar18, param_4, (iVar13 << 4) >> 2)
            for (iVar16 = 0; iVar16 != 0; iVar16 = iVar16 + -1)
            {
                *(undefined_8 *)param_4 = *(undefined_8 *)pfVar18;
                pfVar18 = (float *)((int)pfVar18 + 1);
                param_4 = (float *)((int)param_4 + 1);
            }
        }
        return iVar13;
    }
    return local_18;
}

int FUN_0049b7d0(int *param_1, float *param_2, float *param_3, float *param_4, int param_5)

{
    float fVar1;
    float fVar2;
    float fVar3;
    int iVar4;
    uint uVar5;
    float *pfVar6;
    int iVar7;
    int iVar8;
    float *pfVar9;
    float *pfVar10;
    float *pfVar11;
    float *pfVar12;
    float *pfVar13;
    float *local_14;
    int local_10;
    float *local_c;
    float *local_8;
    int local_4;

    DAT_00dfaa04 = 0;
    local_10 = 0;
    DAT_00dfa13c = param_4;
    local_c = param_4;
    pfVar9 = (float *)&DAT_00dfa140;
    local_8 = param_3 + param_5 * 2 + -2;
    DAT_00dfa138 = param_2;
    DAT_00df9eb4 = (float *)&DAT_00dfa140;
    DAT_00df9ea8 = param_3;
    DAT_00df9eac = (float *)&DAT_00df9eb8;
    DAT_00df9eb0 = (float *)&DAT_00dfa500;
    local_14 = param_3;
    if (param_5 < 1)
    {
        iVar4 = 0;
    }
    else
    {
        iVar8 = 0;
        iVar7 = 0;
        pfVar6 = param_2 + param_5 * 3 + -3;
        pfVar10 = param_4 + param_5 * 4 + -4;
        pfVar12 = param_2;
        do
        {
            fVar2 = (float)param_1[3];
            fVar1 = (float)param_1[3];
            if ((fVar2 <= *pfVar6) || (fVar1 <= *pfVar12))
            {
                if (((*pfVar6 != fVar2) && (fVar1 != *pfVar12)) && ((*pfVar6 < fVar2 || (*pfVar12 < fVar1))))
                {
                    fVar3 = (*pfVar12 - *pfVar6) / (fVar2 - *pfVar6);
                    *(float *)((int)pfVar9 + iVar7) = fVar2;
                    *(float *)((int)DAT_00df9eb4 + iVar7 + 4) = (pfVar12[1] - pfVar6[1]) * fVar3 + pfVar6[1];
                    *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = (pfVar12[2] - pfVar6[2]) * fVar3 + pfVar6[2];
                    DAT_00df9eac[local_10 * 2] = (*local_14 - *local_8) * fVar3 + *local_8;
                    DAT_00df9eac[local_10 * 2 + 1] = (local_14[1] - local_8[1]) * fVar3 + local_8[1];
                    *(float *)((int)DAT_00df9eb0 + iVar8) = (*local_c - *pfVar10) * fVar3 + *pfVar10;
                    *(float *)((int)DAT_00df9eb0 + iVar8 + 4) = (local_c[1] - pfVar10[1]) * fVar3 + pfVar10[1];
                    iVar7 = iVar7 + 0xc;
                    local_10 = local_10 + 1;
                    *(float *)((int)DAT_00df9eb0 + iVar8 + 8) = (local_c[2] - pfVar10[2]) * fVar3 + pfVar10[2];
                    DAT_00dfaa04 = DAT_00dfaa04 | 0x10;
                    iVar8 = iVar8 + 0x10;
                    pfVar9 = DAT_00df9eb4;
                }
                if (fVar1 <= *pfVar12)
                {
                    pfVar9 = (float *)((int)pfVar9 + iVar7);
                    iVar7 = iVar7 + 0xc;
                    *pfVar9 = *pfVar12;
                    pfVar9[1] = pfVar12[1];
                    pfVar9[2] = pfVar12[2];
                    DAT_00df9eac[local_10 * 2] = *local_14;
                    DAT_00df9eac[local_10 * 2 + 1] = local_14[1];
                    pfVar9 = (float *)((int)DAT_00df9eb0 + iVar8);
                    local_10 = local_10 + 1;
                    iVar8 = iVar8 + 0x10;
                    *pfVar9 = *local_c;
                    pfVar9[1] = local_c[1];
                    pfVar9[2] = local_c[2];
                    pfVar9[3] = local_c[3];
                    pfVar9 = DAT_00df9eb4;
                }
            }
            local_8 = local_14;
            local_14 = local_14 + 2;
            param_5 = param_5 + -1;
            pfVar6 = pfVar12;
            iVar4 = local_10;
            pfVar10 = local_c;
            pfVar12 = pfVar12 + 3;
            local_c = local_c + 4;
        } while (param_5 != 0);
    }
    local_c = DAT_00df9eb0;
    pfVar6 = DAT_00df9ea8;
    if (2 < iVar4)
    {
        local_8 = DAT_00df9eac + iVar4 * 2 + -2;
        DAT_00df9eb0 = DAT_00dfa13c;
        DAT_00dfa13c = local_c;
        DAT_00df9ea8 = DAT_00df9eac;
        local_10 = 0;
        local_14 = DAT_00df9eac;
        pfVar10 = DAT_00dfa138;
        DAT_00df9eac = pfVar6;
        DAT_00df9eb4 = DAT_00dfa138;
        DAT_00dfa138 = pfVar9;
        if (iVar4 < 1)
        {
            param_5 = 0;
        }
        else
        {
            iVar8 = 0;
            iVar7 = 0;
            pfVar6 = pfVar9 + iVar4 * 3 + -3;
            pfVar12 = local_c + iVar4 * 4 + -4;
            do
            {
                param_5 = iVar4;
                fVar2 = (float)param_1[5];
                fVar1 = (float)param_1[5];
                if ((*pfVar6 <= fVar2) || (*pfVar9 <= fVar1))
                {
                    if (((*pfVar6 != fVar2) && (fVar1 != *pfVar9)) && ((fVar2 < *pfVar6 || (fVar1 < *pfVar9))))
                    {
                        fVar3 = (*pfVar9 - *pfVar6) / (fVar2 - *pfVar6);
                        *(float *)((int)pfVar10 + iVar7) = fVar2;
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 4) = (pfVar9[1] - pfVar6[1]) * fVar3 + pfVar6[1];
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = (pfVar9[2] - pfVar6[2]) * fVar3 + pfVar6[2];
                        DAT_00df9eac[local_10 * 2] = (*local_14 - *local_8) * fVar3 + *local_8;
                        DAT_00df9eac[local_10 * 2 + 1] = (local_14[1] - local_8[1]) * fVar3 + local_8[1];
                        *(float *)((int)DAT_00df9eb0 + iVar8) = (*local_c - *pfVar12) * fVar3 + *pfVar12;
                        *(float *)((int)DAT_00df9eb0 + iVar8 + 4) = (local_c[1] - pfVar12[1]) * fVar3 + pfVar12[1];
                        iVar7 = iVar7 + 0xc;
                        local_10 = local_10 + 1;
                        *(float *)((int)DAT_00df9eb0 + iVar8 + 8) = (local_c[2] - pfVar12[2]) * fVar3 + pfVar12[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 0x20;
                        iVar8 = iVar8 + 0x10;
                        pfVar10 = DAT_00df9eb4;
                    }
                    if (*pfVar9 <= fVar1)
                    {
                        pfVar10 = (float *)((int)pfVar10 + iVar7);
                        iVar7 = iVar7 + 0xc;
                        *pfVar10 = *pfVar9;
                        pfVar10[1] = pfVar9[1];
                        pfVar10[2] = pfVar9[2];
                        DAT_00df9eac[local_10 * 2] = *local_14;
                        DAT_00df9eac[local_10 * 2 + 1] = local_14[1];
                        pfVar6 = (float *)((int)DAT_00df9eb0 + iVar8);
                        local_10 = local_10 + 1;
                        iVar8 = iVar8 + 0x10;
                        *pfVar6 = *local_c;
                        pfVar6[1] = local_c[1];
                        pfVar6[2] = local_c[2];
                        pfVar6[3] = local_c[3];
                        pfVar10 = DAT_00df9eb4;
                    }
                }
                local_8 = local_14;
                local_14 = local_14 + 2;
                iVar4 = param_5 + -1;
                pfVar6 = pfVar9;
                pfVar12 = local_c;
                param_5 = local_10;
                pfVar9 = pfVar9 + 3;
                local_c = local_c + 4;
            } while (iVar4 != 0);
        }
        pfVar6 = DAT_00dfa13c;
        pfVar9 = DAT_00df9ea8;
        if (param_5 < 3)
        {
            return param_5;
        }
        pfVar12 = pfVar10 + param_5 * 3 + -3;
        local_8 = DAT_00df9eac + param_5 * 2 + -2;
        DAT_00df9ea8 = DAT_00df9eac;
        DAT_00dfa13c = DAT_00df9eb0;
        local_10 = 0;
        local_14 = DAT_00df9eac;
        local_c = DAT_00df9eb0;
        pfVar11 = DAT_00dfa138;
        DAT_00df9eac = pfVar9;
        DAT_00df9eb4 = DAT_00dfa138;
        DAT_00dfa138 = pfVar10;
        if (param_5 < 1)
        {
            iVar4 = 0;
            DAT_00df9eb0 = pfVar6;
        }
        else
        {
            iVar8 = 0;
            iVar7 = 0;
            pfVar10 = pfVar10 + 2;
            pfVar9 = DAT_00df9eb0 + param_5 * 4 + -4;
            DAT_00df9eb0 = pfVar6;
            do
            {
                fVar2 = (float)param_1[4];
                fVar1 = (float)param_1[4];
                if ((pfVar12[2] <= fVar2) || (*pfVar10 <= fVar1))
                {
                    if (((pfVar12[2] != fVar2) && (fVar1 != *pfVar10)) && ((fVar2 < pfVar12[2] || (fVar1 < *pfVar10))))
                    {
                        fVar3 = (*pfVar10 - pfVar12[2]) / (fVar2 - pfVar12[2]);
                        *(float *)((int)pfVar11 + iVar7) = (pfVar10[-2] - *pfVar12) * fVar3 + *pfVar12;
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 4) = (pfVar10[-1] - pfVar12[1]) * fVar3 + pfVar12[1];
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = fVar2;
                        DAT_00df9eac[local_10 * 2] = (*local_14 - *local_8) * fVar3 + *local_8;
                        DAT_00df9eac[local_10 * 2 + 1] = (local_14[1] - local_8[1]) * fVar3 + local_8[1];
                        *(float *)((int)DAT_00df9eb0 + iVar8) = (*local_c - *pfVar9) * fVar3 + *pfVar9;
                        *(float *)((int)DAT_00df9eb0 + iVar8 + 4) = (local_c[1] - pfVar9[1]) * fVar3 + pfVar9[1];
                        iVar7 = iVar7 + 0xc;
                        local_10 = local_10 + 1;
                        *(float *)((int)DAT_00df9eb0 + iVar8 + 8) = (local_c[2] - pfVar9[2]) * fVar3 + pfVar9[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 4;
                        iVar8 = iVar8 + 0x10;
                        pfVar11 = DAT_00df9eb4;
                    }
                    if (*pfVar10 <= fVar1)
                    {
                        pfVar11 = (float *)((int)pfVar11 + iVar7);
                        iVar7 = iVar7 + 0xc;
                        *pfVar11 = pfVar10[-2];
                        pfVar11[1] = pfVar10[-1];
                        pfVar11[2] = *pfVar10;
                        DAT_00df9eac[local_10 * 2] = *local_14;
                        DAT_00df9eac[local_10 * 2 + 1] = local_14[1];
                        pfVar9 = (float *)((int)DAT_00df9eb0 + iVar8);
                        local_10 = local_10 + 1;
                        iVar8 = iVar8 + 0x10;
                        *pfVar9 = *local_c;
                        pfVar9[1] = local_c[1];
                        pfVar9[2] = local_c[2];
                        pfVar9[3] = local_c[3];
                        pfVar11 = DAT_00df9eb4;
                    }
                }
                pfVar12 = pfVar10 + -2;
                local_8 = local_14;
                local_14 = local_14 + 2;
                pfVar10 = pfVar10 + 3;
                param_5 = param_5 + -1;
                pfVar9 = local_c;
                iVar4 = local_10;
                local_c = local_c + 4;
            } while (param_5 != 0);
        }
        pfVar6 = DAT_00dfa13c;
        pfVar9 = DAT_00df9ea8;
        if (iVar4 < 3)
        {
            return iVar4;
        }
        pfVar10 = pfVar11 + iVar4 * 3 + -3;
        local_8 = DAT_00df9eac + iVar4 * 2 + -2;
        DAT_00df9ea8 = DAT_00df9eac;
        DAT_00dfa13c = DAT_00df9eb0;
        local_10 = 0;
        local_14 = DAT_00df9eac;
        local_c = DAT_00df9eb0;
        pfVar12 = DAT_00dfa138;
        DAT_00df9eac = pfVar9;
        DAT_00df9eb4 = DAT_00dfa138;
        DAT_00dfa138 = pfVar11;
        if (iVar4 < 1)
        {
            param_5 = 0;
            DAT_00df9eb0 = pfVar6;
        }
        else
        {
            iVar8 = 0;
            iVar7 = 0;
            pfVar11 = pfVar11 + 2;
            pfVar9 = DAT_00df9eb0 + iVar4 * 4 + -4;
            DAT_00df9eb0 = pfVar6;
            do
            {
                param_5 = iVar4;
                fVar2 = (float)param_1[6];
                fVar1 = (float)param_1[6];
                if ((fVar2 <= pfVar10[2]) || (fVar1 <= *pfVar11))
                {
                    if (((pfVar10[2] != fVar2) && (fVar1 != *pfVar11)) && ((pfVar10[2] < fVar2 || (*pfVar11 < fVar1))))
                    {
                        fVar3 = (*pfVar11 - pfVar10[2]) / (fVar2 - pfVar10[2]);
                        *(float *)((int)pfVar12 + iVar7) = (pfVar11[-2] - *pfVar10) * fVar3 + *pfVar10;
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 4) = (pfVar11[-1] - pfVar10[1]) * fVar3 + pfVar10[1];
                        *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = fVar2;
                        DAT_00df9eac[local_10 * 2] = (*local_14 - *local_8) * fVar3 + *local_8;
                        DAT_00df9eac[local_10 * 2 + 1] = (local_14[1] - local_8[1]) * fVar3 + local_8[1];
                        *(float *)((int)DAT_00df9eb0 + iVar8) = (*local_c - *pfVar9) * fVar3 + *pfVar9;
                        *(float *)((int)DAT_00df9eb0 + iVar8 + 4) = (local_c[1] - pfVar9[1]) * fVar3 + pfVar9[1];
                        iVar7 = iVar7 + 0xc;
                        local_10 = local_10 + 1;
                        *(float *)((int)DAT_00df9eb0 + iVar8 + 8) = (local_c[2] - pfVar9[2]) * fVar3 + pfVar9[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 8;
                        pfVar12 = DAT_00df9eb4;
                        iVar8 = iVar8 + 0x10;
                    }
                    if (fVar1 <= *pfVar11)
                    {
                        pfVar12 = (float *)((int)pfVar12 + iVar7);
                        iVar7 = iVar7 + 0xc;
                        *pfVar12 = pfVar11[-2];
                        pfVar12[1] = pfVar11[-1];
                        pfVar12[2] = *pfVar11;
                        DAT_00df9eac[local_10 * 2] = *local_14;
                        DAT_00df9eac[local_10 * 2 + 1] = local_14[1];
                        pfVar9 = (float *)((int)DAT_00df9eb0 + iVar8);
                        local_10 = local_10 + 1;
                        iVar8 = iVar8 + 0x10;
                        *pfVar9 = *local_c;
                        pfVar9[1] = local_c[1];
                        pfVar9[2] = local_c[2];
                        pfVar9[3] = local_c[3];
                        pfVar12 = DAT_00df9eb4;
                    }
                }
                pfVar10 = pfVar11 + -2;
                local_8 = local_14;
                local_14 = local_14 + 2;
                pfVar11 = pfVar11 + 3;
                iVar4 = param_5 + -1;
                pfVar9 = local_c;
                param_5 = local_10;
                local_c = local_c + 4;
            } while (iVar4 != 0);
        }
        pfVar6 = DAT_00dfa13c;
        pfVar9 = DAT_00df9ea8;
        if (param_5 < 3)
        {
            return param_5;
        }
        iVar8 = 0;
        local_8 = DAT_00df9eac + param_5 * 2 + -2;
        DAT_00dfa13c = DAT_00df9eb0;
        local_c = DAT_00df9eb0;
        pfVar11 = DAT_00df9eb0 + param_5 * 4 + -4;
        DAT_00df9ea8 = DAT_00df9eac;
        pfVar10 = pfVar12 + param_5 * 3 + -3;
        local_14 = DAT_00df9eac;
        pfVar13 = DAT_00dfa138;
        DAT_00df9eac = pfVar9;
        DAT_00df9eb0 = pfVar6;
        DAT_00df9eb4 = DAT_00dfa138;
        if (0 < param_5)
        {
            iVar4 = 0;
            local_10 = 0;
            local_4 = 0;
            pfVar9 = pfVar12 + 1;
            DAT_00dfa138 = pfVar12;
            do
            {
                if (((float)param_1[1] <= pfVar10[1]) || ((float)param_1[1] <= *pfVar9))
                {
                    if (((pfVar10[1] != (float)param_1[1]) && (*pfVar9 != (float)param_1[1]))
                        && ((pfVar10[1] < (float)param_1[1] || (*pfVar9 < (float)param_1[1]))))
                    {
                        fVar1 = ((float)param_1[1] - pfVar10[1]) / (*pfVar9 - pfVar10[1]);
                        *(int *)((int)pfVar13 + local_4 + 4) = param_1[1];
                        *(float *)((int)DAT_00df9eb4 + local_4 + 8) = (pfVar9[1] - pfVar10[2]) * fVar1 + pfVar10[2];
                        *(float *)((int)DAT_00df9eb4 + local_4) = (pfVar9[-1] - *pfVar10) * fVar1 + *pfVar10;
                        DAT_00df9eac[iVar8 * 2] = (*local_14 - *local_8) * fVar1 + *local_8;
                        DAT_00df9eac[iVar8 * 2 + 1] = (local_14[1] - local_8[1]) * fVar1 + local_8[1];
                        *(float *)((int)DAT_00df9eb0 + local_10) = (*local_c - *pfVar11) * fVar1 + *pfVar11;
                        *(float *)((int)DAT_00df9eb0 + local_10 + 4) = (local_c[1] - *pfVar11) * fVar1 + pfVar11[1];
                        local_4 = local_4 + 0xc;
                        iVar8 = iVar8 + 1;
                        iVar4 = local_10 + 0x10;
                        *(float *)((int)DAT_00df9eb0 + local_10 + 8) = (local_c[2] - *pfVar11) * fVar1 + pfVar11[2];
                        DAT_00dfaa04 = DAT_00dfaa04 | 1;
                        pfVar13 = DAT_00df9eb4;
                        local_10 = iVar4;
                    }
                    if ((float)param_1[1] <= *pfVar9)
                    {
                        pfVar13 = (float *)((int)pfVar13 + local_4);
                        *pfVar13 = pfVar9[-1];
                        pfVar13[1] = *pfVar9;
                        pfVar13[2] = pfVar9[1];
                        DAT_00df9eac[iVar8 * 2] = *local_14;
                        DAT_00df9eac[iVar8 * 2 + 1] = local_14[1];
                        pfVar6 = (float *)((int)DAT_00df9eb0 + iVar4);
                        iVar8 = iVar8 + 1;
                        *pfVar6 = *local_c;
                        pfVar6[1] = local_c[1];
                        pfVar6[2] = local_c[2];
                        pfVar6[3] = local_c[3];
                        local_4 = local_4 + 0xc;
                        iVar4 = iVar4 + 0x10;
                        pfVar13 = DAT_00df9eb4;
                        local_10 = iVar4;
                    }
                }
                pfVar10 = pfVar9 + -1;
                local_8 = local_14;
                local_14 = local_14 + 2;
                pfVar9 = pfVar9 + 3;
                param_5 = param_5 + -1;
                pfVar11 = local_c;
                pfVar12 = DAT_00dfa138;
                local_c = local_c + 4;
            } while (param_5 != 0);
        }
        DAT_00dfa138 = pfVar12;
        local_c = DAT_00df9eb0;
        pfVar9 = DAT_00df9ea8;
        if (iVar8 < 3)
        {
            DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
            return iVar8;
        }
        iVar4 = iVar8;
        pfVar6 = pfVar13;
        if (*param_1 != 0)
        {
            DAT_00df9ea8 = DAT_00df9eac;
            local_8 = DAT_00df9eac + iVar8 * 2 + -2;
            DAT_00df9eb0 = DAT_00dfa13c;
            DAT_00dfa13c = local_c;
            pfVar10 = pfVar13 + iVar8 * 3 + -3;
            local_14 = DAT_00df9eac;
            iVar7 = 0;
            iVar4 = 0;
            pfVar6 = DAT_00dfa138;
            DAT_00df9eac = pfVar9;
            DAT_00df9eb4 = DAT_00dfa138;
            if (0 < iVar8)
            {
                local_4 = 0;
                pfVar9 = pfVar13 + 1;
                pfVar12 = local_c + iVar8 * 4 + -4;
                DAT_00dfa138 = pfVar13;
                param_5 = iVar8;
                do
                {
                    if ((pfVar10[1] <= (float)param_1[2]) || (*pfVar9 <= (float)param_1[2]))
                    {
                        if (((pfVar10[1] != (float)param_1[2]) && (*pfVar9 != (float)param_1[2]))
                            && (((float)param_1[2] < pfVar10[1] || ((float)param_1[2] < *pfVar9))))
                        {
                            fVar1 = ((float)param_1[2] - pfVar10[1]) / (*pfVar9 - pfVar10[1]);
                            *(int *)((int)pfVar6 + iVar7 + 4) = param_1[2];
                            *(float *)((int)DAT_00df9eb4 + iVar7 + 8) = (pfVar9[1] - pfVar10[2]) * fVar1 + pfVar10[2];
                            *(float *)((int)DAT_00df9eb4 + iVar7) = (pfVar9[-1] - *pfVar10) * fVar1 + *pfVar10;
                            DAT_00df9eac[iVar4 * 2] = (*local_14 - *local_8) * fVar1 + *local_8;
                            DAT_00df9eac[iVar4 * 2 + 1] = (local_14[1] - local_8[1]) * fVar1 + local_8[1];
                            *(float *)((int)DAT_00df9eb0 + local_4) = (*local_c - *pfVar12) * fVar1 + *pfVar12;
                            *(float *)((int)DAT_00df9eb0 + local_4 + 4) =
                                (local_c[1] - pfVar12[1]) * fVar1 + pfVar12[1];
                            iVar4 = iVar4 + 1;
                            iVar7 = iVar7 + 0xc;
                            *(float *)((int)DAT_00df9eb0 + local_4 + 8) =
                                (local_c[2] - pfVar12[2]) * fVar1 + pfVar12[2];
                            DAT_00dfaa04 = DAT_00dfaa04 | 2;
                            pfVar6 = DAT_00df9eb4;
                            local_4 = local_4 + 0x10;
                        }
                        if (*pfVar9 <= (float)param_1[2])
                        {
                            pfVar6 = (float *)((int)pfVar6 + iVar7);
                            iVar7 = iVar7 + 0xc;
                            *pfVar6 = pfVar9[-1];
                            pfVar6[1] = *pfVar9;
                            pfVar6[2] = pfVar9[1];
                            DAT_00df9eac[iVar4 * 2] = *local_14;
                            DAT_00df9eac[iVar4 * 2 + 1] = local_14[1];
                            pfVar6 = (float *)((int)DAT_00df9eb0 + local_4);
                            iVar4 = iVar4 + 1;
                            local_4 = local_4 + 0x10;
                            *pfVar6 = *local_c;
                            pfVar6[1] = local_c[1];
                            pfVar6[2] = local_c[2];
                            pfVar6[3] = local_c[3];
                            pfVar6 = DAT_00df9eb4;
                        }
                    }
                    pfVar10 = pfVar9 + -1;
                    local_8 = local_14;
                    local_14 = local_14 + 2;
                    pfVar9 = pfVar9 + 3;
                    param_5 = param_5 + -1;
                    pfVar12 = local_c;
                    pfVar13 = DAT_00dfa138;
                    local_c = local_c + 4;
                } while (param_5 != 0);
            }
            DAT_00dfa138 = pfVar13;
            if (iVar4 < 3)
            {
                return iVar4;
            }
        }
        if (pfVar6 != param_2)
        {
            QMEMCPY(uVar5, pfVar6, param_2, iVar4 * 3 & 0x3fffffff)
            for (iVar8 = 0; iVar8 != 0; iVar8 = iVar8 + -1)
            {
                *(undefined_8 *)param_2 = *(undefined_8 *)pfVar6;
                pfVar6 = (float *)((int)pfVar6 + 1);
                param_2 = (float *)((int)param_2 + 1);
            }
            pfVar9 = DAT_00df9eac;
            QMEMCPY(uVar5, pfVar9, param_3, (iVar4 * 8) >> 2)
            for (iVar8 = 0; iVar8 != 0; iVar8 = iVar8 + -1)
            {
                *(undefined_8 *)param_3 = *(undefined_8 *)pfVar9;
                pfVar9 = (float *)((int)pfVar9 + 1);
                param_3 = (float *)((int)param_3 + 1);
            }
            pfVar9 = DAT_00df9eb0;
            QMEMCPY(uVar5, pfVar9, param_4, (uint)(iVar4 << 4) >> 2)
            for (iVar8 = 0; iVar8 != 0; iVar8 = iVar8 + -1)
            {
                *(undefined_8 *)param_4 = *(undefined_8 *)pfVar9;
                pfVar9 = (float *)((int)pfVar9 + 1);
                param_4 = (float *)((int)param_4 + 1);
            }
        }
    }
    return iVar4;
}

int FUN_0049c810(int *param_1, int *param_2)

{
    float *pfVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    bool bVar5;

    DAT_00dfaa1c = param_2[3];
    iVar2 = *param_2;
    DAT_00dfaa18 = param_2[1];
    pfVar1 = (float *)(DAT_00dfaa1c + *(int *)param_2[1] * 0xc);
    if ((float)param_1[1] <= *(float *)(DAT_00dfaa1c + 4 + *(int *)param_2[1] * 0xc))
    {
        if ((*param_1 != 0) && ((float)param_1[2] < pfVar1[1]))
        {
            iVar3 = iVar2 + -1;
            bVar5 = iVar3 == 0;
            if (!bVar5)
            {
                piVar4 = (int *)(DAT_00dfaa18 + iVar3 * 4);
                do
                {
                    if (*(float *)(DAT_00dfaa1c + 4 + *piVar4 * 0xc) <= (float)param_1[2])
                        break;
                    iVar3 = iVar3 + -1;
                    piVar4 = piVar4 + -1;
                } while (iVar3 != 0);
                goto LAB_0049c8ba;
            }
            goto LAB_0049c8c0;
        }
    }
    else
    {
        iVar3 = iVar2 + -1;
        bVar5 = iVar3 == 0;
        if (!bVar5)
        {
            piVar4 = (int *)(DAT_00dfaa18 + iVar3 * 4);
            while (*(float *)(DAT_00dfaa1c + 4 + *piVar4 * 0xc) < (float)param_1[1])
            {
                iVar3 = iVar3 + -1;
                piVar4 = piVar4 + -1;
                if (iVar3 == 0)
                {
                    return 0;
                }
            }
        LAB_0049c8ba:
            bVar5 = iVar3 == 0;
        }
    LAB_0049c8c0:
        if (bVar5)
        {
            return 0;
        }
    }
    if ((float)param_1[0xc] * pfVar1[1] <= *pfVar1)
    {
        if ((float)param_1[10] * pfVar1[1] < *pfVar1)
        {
            iVar3 = iVar2 + -1;
            bVar5 = iVar3 == 0;
            if (!bVar5)
            {
                piVar4 = (int *)(DAT_00dfaa18 + iVar3 * 4);
                do
                {
                    if (*(float *)(DAT_00dfaa1c + *piVar4 * 0xc)
                        <= *(float *)(DAT_00dfaa1c + 4 + *piVar4 * 0xc) * (float)param_1[10])
                        break;
                    iVar3 = iVar3 + -1;
                    piVar4 = piVar4 + -1;
                } while (iVar3 != 0);
            LAB_0049c946:
                bVar5 = iVar3 == 0;
            }
            goto LAB_0049c948;
        }
    }
    else
    {
        iVar3 = iVar2 + -1;
        bVar5 = iVar3 == 0;
        if (bVar5)
        {
        LAB_0049c948:
            if (bVar5)
            {
                return 0;
            }
        }
        else
        {
            piVar4 = (int *)(DAT_00dfaa18 + iVar3 * 4);
            do
            {
                if (*(float *)(DAT_00dfaa1c + 4 + *piVar4 * 0xc) * (float)param_1[0xc]
                    <= *(float *)(DAT_00dfaa1c + *piVar4 * 0xc))
                    goto LAB_0049c946;
                iVar3 = iVar3 + -1;
                piVar4 = piVar4 + -1;
            } while (iVar3 != 0);
            if (iVar3 == 0)
            {
                return 0;
            }
        }
    }
    if (pfVar1[2] <= (float)param_1[0xb] * pfVar1[1])
    {
        if ((float)param_1[8] * pfVar1[1] <= pfVar1[2])
        {
            return iVar2;
        }
        iVar3 = iVar2 + -1;
        bVar5 = iVar3 == 0;
        if (bVar5)
            goto LAB_0049c9d8;
        piVar4 = (int *)(DAT_00dfaa18 + iVar3 * 4);
        do
        {
            if (*(float *)(DAT_00dfaa1c + 4 + *piVar4 * 0xc) * (float)param_1[8]
                <= *(float *)(DAT_00dfaa1c + *piVar4 * 0xc + 8))
                break;
            iVar3 = iVar3 + -1;
            piVar4 = piVar4 + -1;
        } while (iVar3 != 0);
    }
    else
    {
        iVar3 = iVar2 + -1;
        bVar5 = iVar3 == 0;
        if (bVar5)
            goto LAB_0049c9d8;
        piVar4 = (int *)(DAT_00dfaa18 + iVar3 * 4);
        while (*(float *)(DAT_00dfaa1c + 4 + *piVar4 * 0xc) * (float)param_1[0xb]
               < *(float *)(DAT_00dfaa1c + *piVar4 * 0xc + 8))
        {
            iVar3 = iVar3 + -1;
            piVar4 = piVar4 + -1;
            if (iVar3 == 0)
            {
                if (iVar3 != 0)
                {
                    return iVar2;
                }
                return 0;
            }
        }
    }
    bVar5 = iVar3 == 0;
LAB_0049c9d8:
    if (!bVar5)
    {
        return iVar2;
    }
    return 0;
}

void FUN_0049c9f0(int param_1, int *param_2, int param_3)

{
    int *piVar1;
    int *piVar2;
    float fVar3;
    float *pfVar4;
    float *pfVar5;
    float *pfVar6;
    float *pfVar7;
    float *pfVar8;
    float *pfVar9;
    int iVar10;
    int local_14;
    int local_10;
    float *local_c;

    local_10 = *param_2;
    DAT_00dfaa04 = 0;
    DAT_00dfaa1c = param_2[3];
    DAT_00dfaa08 = param_2[4];
    DAT_00dfaa20 = param_2[5];
    DAT_00dfaa18 = (int *)param_2[1];
    DAT_00dfaa24 = (int *)param_2[2];
    DAT_00dfaa14 = *(int *)(param_3 + 0xc);
    DAT_00dfaa0c = *(int *)(param_3 + 0x10);
    DAT_00dfaa10 = *(int *)(param_3 + 0x14);
    param_2 = NULL;
    if (0 < local_10)
    {
        iVar10 = 0;
        local_14 = 4;
        param_3 = 0;
        pfVar6 = (float *)(DAT_00dfaa18[local_10 + -1] * 0x10 + DAT_00dfaa20);
        pfVar5 = (float *)(DAT_00dfaa1c + DAT_00dfaa18[local_10 + -1] * 0xc);
        pfVar7 = (float *)(DAT_00dfaa1c + *DAT_00dfaa18 * 0xc);
        pfVar4 = (float *)(DAT_00dfaa08 + *DAT_00dfaa24 * 8);
        pfVar9 = (float *)(*DAT_00dfaa18 * 0x10 + DAT_00dfaa20);
        local_c = (float *)(DAT_00dfaa08 + DAT_00dfaa24[local_10 + -1] * 8);
        do
        {
            pfVar8 = pfVar4;
            if ((*(float *)(param_1 + 4) <= pfVar5[1]) || (*(float *)(param_1 + 4) <= pfVar7[1]))
            {
                if (((pfVar5[1] != *(float *)(param_1 + 4)) && (pfVar7[1] != *(float *)(param_1 + 4)))
                    && ((pfVar5[1] < *(float *)(param_1 + 4) || (pfVar7[1] < *(float *)(param_1 + 4)))))
                {
                    fVar3 = (*(float *)(param_1 + 4) - pfVar5[1]) / (pfVar7[1] - pfVar5[1]);
                    *(undefined_32 *)(DAT_00dfaa14 + 4 + param_3) = *(undefined_32 *)(param_1 + 4);
                    *(float *)(DAT_00dfaa14 + 8 + param_3) = (pfVar7[2] - pfVar5[2]) * fVar3 + pfVar5[2];
                    *(float *)(DAT_00dfaa14 + param_3) = (*pfVar7 - *pfVar5) * fVar3 + *pfVar5;
                    *(float *)(DAT_00dfaa0c + (int)param_2 * 8) = (*pfVar8 - *local_c) * fVar3 + *local_c;
                    *(float *)(DAT_00dfaa0c + 4 + (int)param_2 * 8) = (pfVar8[1] - local_c[1]) * fVar3 + local_c[1];
                    *(float *)(DAT_00dfaa10 + iVar10) = (*pfVar9 - *pfVar6) * fVar3 + *pfVar6;
                    *(float *)(DAT_00dfaa10 + 4 + iVar10) = (pfVar9[1] - pfVar6[1]) * fVar3 + pfVar6[1];
                    param_2 = (int *)((int)param_2 + 1);
                    iVar10 = iVar10 + 0x10;
                    *(float *)(DAT_00dfaa10 + -8 + iVar10) = (pfVar9[2] - pfVar6[2]) * fVar3 + pfVar6[2];
                    param_3 = param_3 + 0xc;
                    *(float *)(DAT_00dfaa10 + -4 + iVar10) = (pfVar9[3] - pfVar6[3]) * fVar3 + pfVar6[3];
                    DAT_00dfaa04 = DAT_00dfaa04 | 1;
                }
                if (*(float *)(param_1 + 4) <= pfVar7[1])
                {
                    pfVar6 = (float *)(DAT_00dfaa14 + param_3);
                    *pfVar6 = *pfVar7;
                    pfVar6[1] = pfVar7[1];
                    pfVar6[2] = pfVar7[2];
                    *(float *)(DAT_00dfaa0c + (int)param_2 * 8) = *pfVar8;
                    *(float *)(DAT_00dfaa0c + 4 + (int)param_2 * 8) = pfVar8[1];
                    pfVar6 = (float *)(DAT_00dfaa10 + iVar10);
                    *pfVar6 = *pfVar9;
                    pfVar6[1] = pfVar9[1];
                    pfVar6[2] = pfVar9[2];
                    param_3 = param_3 + 0xc;
                    pfVar6[3] = pfVar9[3];
                    param_2 = (int *)((int)param_2 + 1);
                    iVar10 = iVar10 + 0x10;
                }
            }
            piVar1 = (int *)((int)DAT_00dfaa18 + local_14);
            piVar2 = (int *)((int)DAT_00dfaa24 + local_14);
            local_14 = local_14 + 4;
            local_10 = local_10 + -1;
            pfVar6 = pfVar9;
            pfVar5 = pfVar7;
            pfVar7 = (float *)(DAT_00dfaa1c + *piVar1 * 0xc);
            pfVar4 = (float *)(DAT_00dfaa08 + *piVar2 * 8);
            pfVar9 = (float *)(*piVar1 * 0x10 + DAT_00dfaa20);
            local_c = pfVar8;
        } while (local_10 != 0);
    }
    if ((int)param_2 < 3)
    {
        DAT_00dfaa04 = DAT_00dfaa04 | 0x40;
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

//----- (0049CD40) --------------------------------------------------------
// closest looking to Win95/Window.c/Window_Main
WPARAM main(HINSTANCE hInstance, HINSTANCE hPrevInstance /* NULL, unused */, PWSTR pCmdLine, int32_t nCmdShow,
            LPCSTR window_name /* "Episode I Racer" */)

{
    int iVar1;
    int iVar2;
    BOOL BVar3;
    tagMSG msg;

    _DAT_00dfaa2c = nCmdShow;
    create_window(hInstance, nCmdShow, window_name);
    set_hwnd(DAT_00dfaa28);
    set_instance(hInstance);
    FUN_0048c7b0(&DAT_004af9b0);
    InitCommonControls();

    iVar1 = GetSystemMetrics(0x20);
    DAT_00dfaa34 = iVar1 << 1;
    iVar1 = GetSystemMetrics(0x20);
    iVar2 = GetSystemMetrics(0xf);
    DAT_00dfaa38 = iVar2 + iVar1 * 2;

    iVar1 = load_registry_options(pCmdLine);
    if (iVar1 == 0)
    {
        return 0;
    }
    do
    {
        while (BVar3 = PeekMessageA(&msg, (HWND)0x0, 0, 0, 0), BVar3 == 0)
        {
            thunk_FUN_00423580();
        }
        do
        {
            BVar3 = GetMessageA(&msg, (HWND)0x0, 0, 0);
            if (BVar3 == -1)
            {
                return -1;
            }
            if (BVar3 == 0) // WM_QUIT
            {
                return msg.wParam;
            }
            TranslateMessage(&msg);
            DispatchMessageA(&msg);
            BVar3 = PeekMessageA(&msg, (HWND)0x0, 0, 0, 0);
        } while (BVar3 != 0);
    } while (true);
}

// 0049ce60
void setWindowPos(int param_1, int param_2)

{
    // SWP_NOMOVE | SWP_NOZORDER = 6 (last param)
    SetWindowPos(DAT_00dfaa28, (HWND)0x0, 0, 0, param_1 + DAT_00dfaa34, param_2 + DAT_00dfaa38, 6);
    return;
}

void FUN_0049ce90(undefined_32 param_1)

{
    DAT_00dfaa30 = param_1;
    return;
}

// 0049cea0
undefined_32 create_window(HINSTANCE hInstance, int32_t nCmdShow, LPCSTR window_name)

{
    ATOM AVar1;
    HWND pHVar2;
    int nHeight;
    int nWidth;
    HMENU hMenu;
    LPVOID lpParam;
    WNDCLASSEXA wndClass;

    wndClass.cbSize = 0x30;
    wndClass.hInstance = hInstance;
    wndClass.lpszClassName = s_wKernelJones3D_004d1aa4;
    wndClass.lpszMenuName = NULL;
    wndClass.lpfnWndProc = FUN_0049cfd0;
    wndClass.style = 0;
    wndClass.hIcon = LoadIconA(hInstance, s_APPICON_004d1ab4);
    if (wndClass.hIcon == NULL)
    {
        wndClass.hIcon = LoadIconA(NULL, (LPCSTR)0x7f00);
    }
    wndClass.hIconSm = LoadIconA(hInstance, s_APPICON_004d1ab4);
    if (wndClass.hIconSm == NULL)
    {
        wndClass.hIconSm = LoadIconA(NULL, (LPCSTR)0x7f00);
    }
    wndClass.hCursor = LoadCursorA(NULL, (LPCSTR)0x7f00);
    wndClass.cbClsExtra = 0;
    wndClass.cbWndExtra = 0;
    wndClass.hbrBackground = (HBRUSH)GetStockObject(4);
    AVar1 = RegisterClassExA(&wndClass);
    if (AVar1 == 0)
    {
        return 0;
    }
    pHVar2 = FindWindowA(s_wKernelJones3D_004d1aa4, window_name);
    if (pHVar2 != (HWND)0x0)
    {
        _exit_0(-1);
    }
    lpParam = NULL;
    hMenu = NULL;
    pHVar2 = NULL;
    nHeight = GetSystemMetrics(1);
    nWidth = GetSystemMetrics(0);
    DAT_00dfaa28 = CreateWindowExA(WS_EX_TOPMOST, s_wKernelJones3D_004d1aa4, window_name, WS_POPUP | WS_VISIBLE, 0, 0,
                                   nWidth, nHeight, pHVar2, hMenu, hInstance, lpParam);
    if (DAT_00dfaa28 == NULL)
    {
        return 0;
    }
    ShowWindow(DAT_00dfaa28, SW_SHOWNORMAL);
    UpdateWindow(DAT_00dfaa28);
    return 1;
}

// WARNING: Removing unreachable block (ram,0x0049d045)

UINT FUN_0049cfd0(HWND param_1, UINT param_2, WPARAM param_3, LPARAM param_4)

{
    LPARAM lParam;
    WPARAM wParam;
    int iVar1;
    UINT UVar2;

    lParam = param_4;
    wParam = param_3;
    UVar2 = param_2;
    if (param_2 == 2)
    {
        FUN_004240d0();
        PostQuitMessage(0);
        lParam = param_4;
        wParam = param_3;
    }
    else if ((DAT_00dfaa30 != (code *)0x0)
             && (iVar1 = (*DAT_00dfaa30)(param_1, param_2, param_3, param_4, &param_2), iVar1 != 0))
    {
        return param_2;
    }
    UVar2 = DefWindowProcA(param_1, UVar2, wParam, lParam);
    return UVar2;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_0049d060(HKEY param_1, LPCSTR param_2)

{
    LSTATUS LVar1;
    HKEY local_4;

    local_4 = (HKEY)0x0;
    _DAT_00dfaa3c = 1;
    DAT_00dfaa40 = param_2;
    DAT_00dfaa44 = param_1;
    LVar1 = RegCreateKeyExA(param_1, param_2, 0, &DAT_004d55cc, 0, 0xf003f, (LPSECURITY_ATTRIBUTES)0x0, &local_4,
                            (LPDWORD)&param_2);
    if (LVar1 == 0)
    {
        LVar1 = RegCloseKey(local_4);
        if (LVar1 == 0)
        {
            return 0;
        }
    }
    if (local_4 != (HKEY)0x0)
    {
        RegCloseKey(local_4);
    }
    return 1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

void FUN_0049d0e0(void)

{
    DAT_00dfaa40 = 0;
    DAT_00dfaa44 = 0;
    _DAT_00dfaa3c = 0;
    return;
}

undefined_32 FUN_0049d100(LPCSTR param_1)

{
    LSTATUS LVar1;
    HKEY local_4;

    local_4 = (HKEY)0x0;
    LVar1 = RegOpenKeyExA(DAT_00dfaa44, DAT_00dfaa40, 0, 0xf003f, &local_4);
    if (LVar1 == 0)
    {
        LVar1 = RegSetValueExA(local_4, param_1, 0, 4, &stack0x00000008, 4);
        if (LVar1 == 0)
        {
            LVar1 = RegCloseKey(local_4);
            if (LVar1 == 0)
            {
                return 0;
            }
        }
    }
    if (local_4 != (HKEY)0x0)
    {
        RegCloseKey(local_4);
    }
    return 1;
}

undefined_32 FUN_0049d180(LPCSTR param_1, undefined_32 param_2)

{
    LSTATUS LVar1;
    HKEY local_c;
    DWORD local_8;
    undefined_32 local_4;

    local_c = (HKEY)0x0;
    LVar1 = RegOpenKeyExA(DAT_00dfaa44, DAT_00dfaa40, 0, 0xf003f, &local_c);
    if (LVar1 == 0)
    {
        local_8 = 4;
        LVar1 = RegQueryValueExA(local_c, param_1, (LPDWORD)0x0, (LPDWORD)&param_1, (LPBYTE)&local_4, &local_8);
        if (LVar1 == 0)
        {
            RegCloseKey(local_c);
            return local_4;
        }
        RegCloseKey(local_c);
    }
    return param_2;
}

void FUN_0049d210(undefined_32 param_1, undefined_32 param_2)

{
    FUN_0049d100(param_1, param_2);
    return;
}

void FUN_0049d230(undefined_32 param_1, undefined_32 param_2)

{
    FUN_0049d180(param_1, param_2);
    return;
}

undefined_32 FUN_0049d250(LPCSTR param_1, BYTE *param_2)

{
    BYTE BVar1;
    LSTATUS LVar2;
    uint uVar3;
    BYTE *pBVar4;
    HKEY local_4;

    local_4 = (HKEY)0x0;
    LVar2 = RegOpenKeyExA(DAT_00dfaa44, DAT_00dfaa40, 0, 0xf003f, &local_4);
    if (LVar2 == 0)
    {
        uVar3 = -1;
        pBVar4 = param_2;
        do
        {
            if (uVar3 == 0)
                break;
            uVar3 = uVar3 - 1;
            BVar1 = *pBVar4;
            pBVar4 = pBVar4 + 1;
        } while (BVar1 != '\0');
        LVar2 = RegSetValueExA(local_4, param_1, 0, 1, param_2, ~uVar3 - 1);
        if (LVar2 == 0)
        {
            LVar2 = RegCloseKey(local_4);
            if (LVar2 == 0)
            {
                return 0;
            }
        }
    }
    if (local_4 != (HKEY)0x0)
    {
        RegCloseKey(local_4);
    }
    return 1;
}

undefined_32 FUN_0049d2e0(LPCSTR param_1, LPBYTE param_2, DWORD param_3, char *param_4)

{
    LSTATUS LVar1;
    HKEY local_c;
    DWORD local_8;
    DWORD local_4;

    local_c = (HKEY)0x0;
    LVar1 = RegOpenKeyExA(DAT_00dfaa44, DAT_00dfaa40, 0, 0xf003f, &local_c);
    if (LVar1 == 0)
    {
        local_8 = param_3;
        LVar1 = RegQueryValueExA(local_c, param_1, (LPDWORD)0x0, &local_4, param_2, &local_8);
        if (LVar1 == 0)
        {
            LVar1 = RegCloseKey(local_c);
            if (LVar1 == 0)
            {
                return 0;
            }
        }
    }
    if (param_4 != NULL)
    {
        _strncpy((char *)param_2, param_4, param_3 - 1);
        param_2[param_3 - 1] = '\0';
    }
    if (local_c != (HKEY)0x0)
    {
        RegCloseKey(local_c);
    }
    return 1;
}

void DirectDrawEnumerateA(void)

{
    // WARNING: Could not recover jumptable at 0x0049d390. Too many branches
    // WARNING: Treating indirect jump as call
    DirectDrawEnumerateA();
    return;
}

/*
    HRESULT DirectDrawCreate([in] GUID *lpGUID, [out] LPDIRECTDRAW *lplpDD, [in] IUnknown *pUnkOuter);
*/
void DirectDrawCreate(void)

{
    // WARNING: Could not recover jumptable at 0x0049d396. Too many branches
    // WARNING: Treating indirect jump as call
    DirectDrawCreate();
    return;
}

/*
HRESULT WINAPI DirectInputCreateA(HINSTANCE hinst, DWORD dwVersion, LPDIRECTINPUTA* lplpDirectInput, LPUNKNOWN
punkOuter)
*/
void DirectInputCreateA(void)

{
    // WARNING: Could not recover jumptable at 0x0049d39c. Too many branches
    // WARNING: Treating indirect jump as call
    DirectInputCreateA();
    return;
}

BOOL VerQueryValueA(LPCVOID pBlock, LPCSTR lpSubBlock, LPVOID *lplpBuffer, PUINT puLen)

{
    BOOL BVar1;

    // WARNING: Could not recover jumptable at 0x0049e738. Too many branches
    // WARNING: Treating indirect jump as call
    BVar1 = VerQueryValueA(pBlock, lpSubBlock, lplpBuffer, puLen);
    return BVar1;
}

BOOL GetFileVersionInfoA(LPCSTR lptstrFilename, DWORD dwHandle, DWORD dwLen, LPVOID lpData)

{
    BOOL BVar1;

    // WARNING: Could not recover jumptable at 0x0049e73e. Too many branches
    // WARNING: Treating indirect jump as call
    BVar1 = GetFileVersionInfoA(lptstrFilename, dwHandle, dwLen, lpData);
    return BVar1;
}

DWORD GetFileVersionInfoSizeA(LPCSTR lptstrFilename, LPDWORD lpdwHandle)

{
    DWORD DVar1;

    // WARNING: Could not recover jumptable at 0x0049e744. Too many branches
    // WARNING: Treating indirect jump as call
    DVar1 = GetFileVersionInfoSizeA(lptstrFilename, lpdwHandle);
    return DVar1;
}

undefined_32 FUN_0049e750(void)

{
    FUN_0049e8e0(&PTR_DAT_004d1d5c, &DAT_004d55cc, s_A3d_Object_004d1d60);
    FUN_0049e8e0(s_A3d_CLSID_004d1d28, &DAT_004d55cc, s__d8f1eee0_f634_11cf_8700_00a0245_004d1d34);
    FUN_0049e8e0(s_CLSID__d8f1eee0_f634_11cf_8700_0_004d1cf8, &DAT_004d55cc, s_A3d_Object_004d1d60);
    FUN_0049e8e0(s_CLSID__d8f1eee0_f634_11cf_8700_0_004d1cb4, &DAT_004d55cc, s_a3d_dll_004d1cf0);
    FUN_0049e8e0(s_CLSID__d8f1eee0_f634_11cf_8700_0_004d1cb4, s_ThreadingModel_004d1c98, s_Apartment_004d1ca8);
    FUN_0049e8e0(s_A3dApi_004d1c80, &DAT_004d55cc, s_A3dApi_Object_004d1c88);
    FUN_0049e8e0(s_A3dApi_CLSID_004d1c48, &DAT_004d55cc, s__92FA2C24_253C_11d2_90FB_006008A_004d1c58);
    FUN_0049e8e0(s_CLSID__92FA2C24_253C_11d2_90FB_0_004d1c18, &DAT_004d55cc, s_A3dApi_Object_004d1c88);
    FUN_0049e8e0(s_CLSID__92FA2C24_253C_11d2_90FB_0_004d1c18, s_AppID_004d1be8,
                 s__92FA2C24_253C_11D2_90FB_006008A_004d1bf0);
    FUN_0049e8e0(s_CLSID__92FA2C24_253C_11d2_90FB_0_004d1ba0, &DAT_004d55cc, s_a3dapi_dll_004d1bdc);
    FUN_0049e8e0(s_CLSID__92FA2C24_253C_11d2_90FB_0_004d1ba0, s_ThreadingModel_004d1c98, s_Apartment_004d1ca8);
    FUN_0049e8e0(s_A3dDAL_004d1b88, &DAT_004d55cc, s_A3dDAL_Object_004d1b90);
    FUN_0049e8e0(s_A3dDAL_CLSID_004d1b50, &DAT_004d55cc, s__442D12A1_2641_11d2_90FB_006008A_004d1b60);
    FUN_0049e8e0(s_CLSID__442D12A1_2641_11d2_90FB_0_004d1b20, &DAT_004d55cc, s_A3dDAL_Object_004d1b90);
    FUN_0049e8e0(s_CLSID__442D12A1_2641_11d2_90FB_0_004d1b20, s_AppID_004d1be8,
                 s__442D12A1_2641_11D2_90FB_006008A_004d1af8);
    FUN_0049e8e0(s_CLSID__442D12A1_2641_11d2_90FB_0_004d1abc, &DAT_004d55cc, s_a3d_dll_004d1cf0);
    FUN_0049e8e0(s_CLSID__442D12A1_2641_11d2_90FB_0_004d1abc, s_ThreadingModel_004d1c98, s_Apartment_004d1ca8);
    return 0;
}

void FUN_0049e8e0(HKEY param_1, LPCSTR param_2, BYTE *param_3)

{
    BYTE BVar1;
    uint uVar2;
    BYTE *pBVar3;
    DWORD local_4;

    RegCreateKeyExA((HKEY)0x80000000, (LPCSTR)param_1, 0, s_REG_SZ_004d1d6c, 0, 0xf003f, (LPSECURITY_ATTRIBUTES)0x0,
                    &param_1, &local_4);
    uVar2 = strlen(param_3);
    RegSetValueExA(param_1, param_2, 0, 1, param_3, uVar2 - 1);
    RegCloseKey(param_1);
    return;
}

HRESULT FUN_0049e940(void)

{
    HRESULT HVar1;

    HVar1 = CoInitialize((LPVOID)0x0);
    FUN_0049e750();
    return HVar1;
}

void CoUninitialize(void)

{
    // WARNING: Could not recover jumptable at 0x0049e960. Too many branches
    // WARNING: Treating indirect jump as call
    CoUninitialize();
    return;
}

HRESULT FUN_0049e970(int *param_1, int **param_2, LPUNKNOWN param_3, undefined_32 param_4)

{
    HRESULT HVar1;
    int iVar2;
    int *local_4; // LPVOID instead ? see sub_49E970

    local_4 = NULL;
    if (param_2 == NULL)
    {
        return -0x7ff8ffa9;
    }
    *param_2 = NULL;
    FUN_0049e940();
    HVar1 = CoCreateInstance((IID *)&DAT_004ae0e8, param_3, 1, (IID *)&DAT_004ae128, &local_4);
    if (-1 < HVar1)
    {
        if (local_4 == NULL)
        {
            return -0x7fffbffb;
        }
        iVar2 = (**(code **)(*local_4 + 0x3c))(local_4, param_1, param_4, 0);
        if (iVar2 < 0)
        {
            (**(code **)(*param_1 + 8))(param_1);
            return -0x7fffbffb;
        }
        *param_2 = param_1;
        HVar1 = 0;
    }
    return HVar1;
}

undefined_8 *FUN_0049ea00(void)

{
    return &DAT_00dfaa48;
}

// 0049ea10
void __cinit(void)

{
    if (PTR___fpmath_004d1d7c != NULL)
    {
        (*(code *)PTR___fpmath_004d1d7c)();
    }
    __initterm(&DAT_004b2008, &DAT_004b2010);
    __initterm(&DAT_004b2000, &DAT_004b2004);
    return;
}

// 0049ea40
void _exit_0(undefined_32 param_1)

{
    _doexit(param_1, 0, 0);
    return;
}

// Library Function - Single Match
//  __exit
//
// Library: Visual Studio 1998 Release

void __cdecl __exit(int _Code)

{
    _doexit(_Code, 1, 0);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// 0049ea80
void _doexit(UINT param_1, int param_2, int param_3)

{
    HANDLE hProcess;
    code **ppcVar1;
    code **ppcVar2;
    UINT uExitCode;

    __lockexit();
    if (DAT_00dfaab4 == 1)
    {
        uExitCode = param_1;
        hProcess = GetCurrentProcess();
        TerminateProcess(hProcess, uExitCode);
    }
    _DAT_00dfaab0 = 1;
    DAT_00dfaaac = (undefined_8)param_3;
    if (param_2 == 0)
    {
        if ((DAT_00ecd618 != (code **)0x0)
            && (ppcVar2 = (code **)(DAT_00ecd614 + -4), ppcVar1 = DAT_00ecd618, DAT_00ecd618 <= ppcVar2))
        {
            do
            {
                if (*ppcVar2 != (code *)0x0)
                {
                    (**ppcVar2)();
                    ppcVar1 = DAT_00ecd618;
                }
                ppcVar2 = ppcVar2 + -1;
            } while (ppcVar1 <= ppcVar2);
        }
        __initterm(&DAT_004b2014, &DAT_004b201c);
    }
    __initterm(&DAT_004b2020, &DAT_004b2024);
    if (param_3 != 0)
    {
        __unlockexit();
        return;
    }
    DAT_00dfaab4 = 1;
    // WARNING: Subroutine does not return
    ExitProcess(param_1);
}

// 0049eb40
void __lockexit(void)

{
    __lock(0xd);
    return;
}

// static import 0049EB50
void __unlockexit(void)

{
    __unlock(0xd);
    return;
}

// static import 0049eb60
void __initterm(code **param_1, code **param_2)

{
    if (param_1 < param_2)
    {
        do
        {
            if (*param_1 != (code *)0x0)
            {
                (**param_1)();
            }
            param_1 = param_1 + 1;
        } while (param_1 < param_2);
    }
    return;
}

// static import 0049eb80
undefined_32 _sprintf(undefined_8 *param_1, undefined_32 param_2)

{
    undefined_32 uVar1;
    undefined_8 *local_20;
    int local_1c;
    undefined_8 *local_18;
    undefined_32 local_14;

    local_18 = param_1;
    local_20 = param_1;
    local_14 = 0x42;
    local_1c = 0x7fffffff;
    uVar1 = __output(&local_20, param_2, &stack0x0000000c);
    local_1c = local_1c + -1;
    if (-1 < local_1c)
    {
        *local_20 = 0;
        return uVar1;
    }
    __flsbuf(0, &local_20);
    return uVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address Library Function - Single Match
//  __fpmath
//
// Library: Visual Studio 1998 Release

void __cdecl __fpmath(int param_1)

{
    __cfltcvt_init_7();
    _DAT_00dfaabc = __ms_p5_mp_test_fdiv();
    __setdefaultprecision();
    return;
}

// static import 0049ec10
void __cfltcvt_init_7(void)

{
    PTR_FUN_004d208c = &LAB_004a24a0;
    PTR_FUN_004d2088 = &LAB_004a2900; // __cfltcvt
    PTR_FUN_004d2090 = &LAB_004a2530; // __fassign
    PTR_FUN_004d2094 = __forcdecpt;
    PTR_FUN_004d2098 = &LAB_004a2510; // __positive
    PTR_FUN_004d209c = &LAB_004a2900; // __cfltcvt (same as the second)
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

uint _strcmpi(byte *param_1, byte *param_2)

{
    bool bVar1;
    int iVar2;
    char cVar3;
    byte bVar4;
    byte bVar7;
    uint uVar5;
    uint uVar6;
    uint uVar8;

    iVar2 = _DAT_00ecd60c;
    if (DAT_00dfab38 == 0)
    {
        uVar5 = 0xff;
        do
        {
            do
            {
                cVar3 = (char)uVar5;
                if (cVar3 == '\0')
                    goto LAB_0049ec9e;
                bVar7 = *param_2;
                param_2 = param_2 + 1;
                bVar4 = *param_1;
                uVar5 = (uint)CONCAT11(bVar4, bVar7);
                param_1 = param_1 + 1;
            } while ((byte)(uVar5 >> 8) == bVar7);
            bVar4 = bVar4 + 0xbf;
            bVar4 = bVar4 + (-(bVar4 < 0x1a) & 0x20U) + 0x41;
            uVar5 = (uint)CONCAT11(bVar7 + 0xbf + (-((byte)(bVar7 + 0xbf) < 0x1a) & 0x20U) + 'A', bVar4);
            bVar7 = (byte)(uVar5 >> 8);
        } while (bVar4 == bVar7);
        cVar3 = (bVar4 < bVar7) * -2 + '\x01';
    LAB_0049ec9e:
        uVar6 = (uint)cVar3;
    }
    else
    {
        LOCK();
        _DAT_00ecd60c = _DAT_00ecd60c + 1;
        bVar1 = 0 < DAT_00ecd608;
        if (bVar1)
        {
            LOCK();
            _DAT_00ecd60c = iVar2;
            __lock(0x13);
        }
        uVar8 = (uint)bVar1;
        uVar6 = 0xff;
        uVar5 = 0;
        do
        {
            do
            {
                if ((char)uVar6 == '\0')
                    goto LAB_0049ecff;
                bVar7 = *param_2;
                uVar6 = uVar6 & 0xffffff00 | (uint)bVar7;
                param_2 = param_2 + 1;
                bVar4 = *param_1;
                uVar5 = uVar5 & 0xffffff00 | (uint)bVar4;
                param_1 = param_1 + 1;
            } while (bVar7 == bVar4);
            uVar5 = FUN_0049fee0(uVar5, uVar6);
            uVar6 = FUN_0049fee0();
        } while ((byte)uVar5 == (byte)uVar6);
        uVar5 = (uint)((byte)uVar5 < (byte)uVar6);
        uVar6 = (1 - uVar5) - (uint)(uVar5 != 0);
    LAB_0049ecff:
        if (uVar8 == 0)
        {
            LOCK();
            _DAT_00ecd60c = _DAT_00ecd60c + -1;
        }
        else
        {
            __unlock(0x13);
        }
    }
    return uVar6;
}

// Library Function - Single Match
//  __ftol
//
// Library: Visual Studio

longlong __ftol(void)

{
    float10 in_ST0;

    return (longlong)ROUND(in_ST0);
}

// static import 0049ed50
uint *_strstr(uint *param_1, char *param_2)

{
    char *pcVar1;
    char *pcVar2;
    char cVar3;
    uint uVar4;
    uint *puVar5;
    char cVar6;
    uint uVar7;
    char *pcVar8;
    uint uVar9;
    uint *puVar10;

    cVar3 = *param_2;
    if (cVar3 == '\0')
    {
        return param_1;
    }
    if (param_2[1] == '\0')
    {
        uVar4 = (uint)param_1 & 3;
        while (uVar4 != 0)
        {
            if (*(char *)param_1 == cVar3)
            {
                return param_1;
            }
            if (*(char *)param_1 == '\0')
            {
                return NULL;
            }
            uVar4 = (uint)(uint *)((int)param_1 + 1) & 3;
            param_1 = (uint *)((int)param_1 + 1);
        }
        while (true)
        {
            while (true)
            {
                uVar4 = *param_1;
                uVar9 = uVar4 ^ CONCAT22(CONCAT11(cVar3, cVar3), CONCAT11(cVar3, cVar3));
                uVar7 = uVar4 ^ -1 ^ uVar4 + 0x7efefeff;
                puVar10 = param_1 + 1;
                if (((uVar9 ^ -1 ^ uVar9 + 0x7efefeff) & 0x81010100) != 0)
                    break;
                param_1 = puVar10;
                if ((uVar7 & 0x81010100) != 0)
                {
                    if ((uVar7 & 0x1010100) != 0)
                    {
                        return NULL;
                    }
                    if ((uVar4 + 0x7efefeff & 0x80000000) == 0)
                    {
                        return NULL;
                    }
                }
            }
            uVar4 = *param_1;
            if ((char)uVar4 == cVar3)
            {
                return param_1;
            }
            if ((char)uVar4 == '\0')
            {
                return NULL;
            }
            cVar6 = (char)(uVar4 >> 8);
            if (cVar6 == cVar3)
            {
                return (uint *)((int)param_1 + 1);
            }
            if (cVar6 == '\0')
                break;
            cVar6 = (char)(uVar4 >> 0x10);
            if (cVar6 == cVar3)
            {
                return (uint *)((int)param_1 + 2);
            }
            if (cVar6 == '\0')
            {
                return NULL;
            }
            cVar6 = (char)(uVar4 >> 0x18);
            if (cVar6 == cVar3)
            {
                return (uint *)((int)param_1 + 3);
            }
            param_1 = puVar10;
            if (cVar6 == '\0')
            {
                return NULL;
            }
        }
        return NULL;
    }
    do
    {
        cVar6 = *(char *)param_1;
        do
        {
            while (puVar10 = param_1, param_1 = (uint *)((int)puVar10 + 1), cVar6 != cVar3)
            {
                if (cVar6 == '\0')
                {
                    return NULL;
                }
                cVar6 = *(char *)param_1;
            }
            cVar6 = *(char *)param_1;
            pcVar8 = param_2;
            puVar5 = puVar10;
        } while (cVar6 != param_2[1]);
        do
        {
            if (pcVar8[2] == '\0')
            {
                return puVar10;
            }
            if (*(char *)(uint *)((int)puVar5 + 2) != pcVar8[2])
                break;
            pcVar1 = pcVar8 + 3;
            if (*pcVar1 == '\0')
            {
                return puVar10;
            }
            pcVar2 = (char *)((int)puVar5 + 3);
            pcVar8 = pcVar8 + 2;
            puVar5 = (uint *)((int)puVar5 + 2);
        } while (*pcVar1 == *pcVar2);
    } while (true);
}

undefined_32 *FUN_0049edd0(undefined_32 *param_1)

{
    char cVar1;
    undefined_32 *puVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    char *pcVar6;
    char *pcVar7;
    char *pcVar8;
    undefined_32 *puVar9;
    bool bVar10;

    pcVar6 = NULL;
    if (DAT_00dfab38 == 0)
    {
        puVar2 = param_1;
        if (*(char *)param_1 != '\0')
        {
            do
            {
                cVar1 = *(char *)param_1;
                if (('@' < cVar1) && (cVar1 < '['))
                {
                    *(char *)param_1 = cVar1 + ' ';
                }
                pcVar6 = (char *)((int)param_1 + 1);
                param_1 = (undefined_32 *)((int)param_1 + 1);
            } while (*pcVar6 != '\0');
            return puVar2;
        }
    }
    else
    {
        InterlockedIncrement((LONG *)&DAT_00ecd60c);
        bVar10 = DAT_00ecd608 != 0;
        if (bVar10)
        {
            InterlockedDecrement((LONG *)&DAT_00ecd60c);
            __lock(0x13);
        }
        if (DAT_00dfab38 == 0)
        {
            if (bVar10)
            {
                __unlock(0x13);
            }
            else
            {
                InterlockedDecrement((LONG *)&DAT_00ecd60c);
            }
            puVar2 = param_1;
            if (*(char *)param_1 != '\0')
            {
                do
                {
                    cVar1 = *(char *)param_1;
                    if (('@' < cVar1) && (cVar1 < '['))
                    {
                        *(char *)param_1 = cVar1 + ' ';
                    }
                    pcVar6 = (char *)((int)param_1 + 1);
                    param_1 = (undefined_32 *)((int)param_1 + 1);
                } while (*pcVar6 != '\0');
                return puVar2;
            }
        }
        else
        {
            iVar3 = FUN_004a29a0(DAT_00dfab38, 0x100, param_1, -1, 0, 0, 0, 1);
            if (((iVar3 != 0) && (pcVar6 = (char *)_malloc(iVar3), pcVar6 != NULL))
                && (iVar3 = FUN_004a29a0(DAT_00dfab38, 0x100, param_1, -1, pcVar6, iVar3, 0, 1), iVar3 != 0))
            {
                uVar4 = -1;
                pcVar7 = pcVar6;
                do
                {
                    pcVar8 = pcVar7;
                    if (uVar4 == 0)
                        break;
                    uVar4 = uVar4 - 1;
                    pcVar8 = pcVar7 + 1;
                    cVar1 = *pcVar7;
                    pcVar7 = pcVar8;
                } while (cVar1 != '\0');
                uVar4 = ~uVar4;
                puVar2 = (undefined_32 *)(pcVar8 + -uVar4);
                puVar9 = param_1;
                QMEMCPY(uVar5, puVar2, puVar9, uVar4 >> 2)
                for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1)
                {
                    *(undefined_8 *)puVar9 = *(undefined_8 *)puVar2;
                    puVar2 = (undefined_32 *)((int)puVar2 + 1);
                    puVar9 = (undefined_32 *)((int)puVar9 + 1);
                }
            }
            if (bVar10)
            {
                __unlock(0x13);
                _free(pcVar6);
                return param_1;
            }
            InterlockedDecrement((LONG *)&DAT_00ecd60c);
            _free(pcVar6);
        }
    }
    return param_1;
}

// static import 0049ef50
undefined_32 *_wcsncpy(undefined_32 *param_1, short *param_2, int param_3)

{
    short sVar1;
    uint uVar2;
    uint uVar3;
    undefined_32 *puVar4;

    puVar4 = param_1;
    if (param_3 != 0)
    {
        do
        {
            sVar1 = *param_2;
            param_2 = param_2 + 1;
            *(short *)puVar4 = sVar1;
            puVar4 = (undefined_32 *)((int)puVar4 + 2);
            if (sVar1 == 0)
                break;
            param_3 = param_3 + -1;
        } while (param_3 != 0);
        if ((param_3 != 0) && (uVar2 = param_3 - 1, uVar2 != 0))
        {
            MEMSET(uVar3, puVar4, 0, uVar2 >> 1)
            for (uVar2 = (uint)((uVar2 & 1) != 0); uVar2 != 0; uVar2 = uVar2 - 1)
            {
                *(undefined_16 *)puVar4 = 0;
                puVar4 = (undefined_32 *)((int)puVar4 + 2);
            }
        }
    }
    return param_1;
}

//----- (0049EF90) --------------------------------------------------------
// _atof
float10 atof(byte *param_1)

{
    byte bVar1;
    uint uVar2;
    int iVar3;
    byte *pbVar4;
    undefined_8 local_18[24];

    while (true)
    {
        if (DAT_004d1f9c < 2)
        {
            uVar2 = (byte)PTR_DAT_004d1d90[(uint)*param_1 * 2] & 8;
        }
        else
        {
            uVar2 = __isctype(*param_1, 8);
        }
        if (uVar2 == 0)
            break;
        param_1 = param_1 + 1;
    }
    uVar2 = -1;
    pbVar4 = param_1;
    do
    {
        if (uVar2 == 0)
            break;
        uVar2 = uVar2 - 1;
        bVar1 = *pbVar4;
        pbVar4 = pbVar4 + 1;
    } while (bVar1 != 0);
    iVar3 = __fltin2(local_18, param_1, ~uVar2 - 1, 0, 0);
    return (float10) * (double *)(iVar3 + 0x10);
}

// Library Function - Single Match
//  _strncmp
//
// Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release

int __cdecl _strncmp(char *_Str1, char *_Str2, size_t _MaxCount)

{
    char cVar1;
    char cVar2;
    byte bVar3;
    size_t sVar4;
    int iVar5;
    uint uVar6;
    char *pcVar7;
    char *pcVar8;
    bool bVar9;

    sVar4 = _MaxCount;
    pcVar7 = _Str1;
    if (_MaxCount != 0)
    {
        do
        {
            if (sVar4 == 0)
                break;
            sVar4 = sVar4 - 1;
            cVar1 = *pcVar7;
            pcVar7 = pcVar7 + 1;
        } while (cVar1 != '\0');
        iVar5 = _MaxCount - sVar4;
        do
        {
            pcVar7 = _Str2;
            pcVar8 = _Str1;
            if (iVar5 == 0)
                break;
            iVar5 = iVar5 + -1;
            pcVar8 = _Str1 + 1;
            pcVar7 = _Str2 + 1;
            cVar1 = *_Str2;
            cVar2 = *_Str1;
            _Str2 = pcVar7;
            _Str1 = pcVar8;
        } while (cVar1 == cVar2);
        bVar3 = pcVar7[-1];
        uVar6 = 0;
        bVar9 = bVar3 == pcVar8[-1];
        if (bVar3 < (byte)pcVar8[-1] || bVar9)
        {
            if (bVar9)
            {
                return 0;
            }
            uVar6 = 0xfffffffe;
        }
        _MaxCount = ~uVar6;
    }
    return _MaxCount;
}

// static import 0049f040
int _atol(byte *param_1)

{
    byte bVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    byte *pbVar6;

    while (true)
    {
        if (DAT_004d1f9c < 2)
        {
            uVar2 = (byte)PTR_DAT_004d1d90[(uint)*param_1 * 2] & 8;
        }
        else
        {
            uVar2 = __isctype(*param_1, 8);
        }
        if (uVar2 == 0)
            break;
        param_1 = param_1 + 1;
    }
    uVar2 = (uint)*param_1;
    pbVar6 = param_1 + 1;
    if ((uVar2 == 0x2d) || (uVar4 = uVar2, uVar2 == 0x2b))
    {
        uVar4 = (uint)*pbVar6;
        pbVar6 = param_1 + 2;
    }
    iVar5 = 0;
    while (true)
    {
        if (DAT_004d1f9c < 2)
        {
            uVar3 = (byte)PTR_DAT_004d1d90[uVar4 * 2] & 4;
        }
        else
        {
            uVar3 = __isctype(uVar4, 4);
        }
        if (uVar3 == 0)
            break;
        bVar1 = *pbVar6;
        pbVar6 = pbVar6 + 1;
        iVar5 = (uVar4 - 0x30) + iVar5 * 10;
        uVar4 = (uint)bVar1;
    }
    if (uVar2 == 0x2d)
    {
        iVar5 = -iVar5;
    }
    return iVar5;
}

// static import 0049f0e0
void atoi(undefined_32 param_1)

{
    _atol(param_1);
    return;
}

// static import 0049f0f0
undefined_32 fclose(int param_1)

{
    undefined_32 uVar1;

    if ((*(byte *)(param_1 + 0xc) & 0x40) != 0)
    {
        *(undefined_32 *)(param_1 + 0xc) = 0;
        return -1;
    }
    _lock_file(param_1);
    uVar1 = __fclose_lk(param_1);
    _unlock_file(param_1);
    return uVar1;
}

// static import 0049f130
undefined_32 __fclose_lk(int param_1)

{
    int iVar1;
    undefined_32 uVar2;

    uVar2 = -1;
    if ((*(byte *)(param_1 + 0xc) & 0x83) != 0)
    {
        uVar2 = __flush(param_1);
        __freebuf(param_1);
        iVar1 = __close(*(undefined_32 *)(param_1 + 0x10));
        if (iVar1 < 0)
        {
            *(undefined_32 *)(param_1 + 0xc) = 0;
            return -1;
        }
        if (*(int *)(param_1 + 0x1c) != 0)
        {
            _free(*(int *)(param_1 + 0x1c));
            *(undefined_32 *)(param_1 + 0x1c) = 0;
        }
    }
    *(undefined_32 *)(param_1 + 0xc) = 0;
    return uVar2;
}

// static import 0049f1a0
undefined_32 __fsopen(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    int iVar1;
    undefined_32 uVar2;

    iVar1 = __getstream();
    if (iVar1 == 0)
    {
        return 0;
    }
    uVar2 = __openfile(param_1, param_2, param_3, iVar1);
    _unlock_file(iVar1);
    return uVar2;
}

// static import 0049f1e0
void _fopen(undefined_32 param_1, undefined_32 param_2)
{
    __fsopen(param_1, param_2, 0x40);
    return;
}

// static import 0049f200
void _free(LPVOID param_1)

{
    LPVOID lpMem;
    int iVar1;
    undefined_32 local_4;

    lpMem = param_1;
    if (param_1 != (LPVOID)0x0)
    {
        __lock(9);
        iVar1 = ___sbh_find_block(lpMem, &local_4, &param_1);
        if (iVar1 != 0)
        {
            ___sbh_free_block(local_4, param_1, iVar1);
            __unlock(9);
            return;
        }
        __unlock(9);
        HeapFree(DAT_00ecd604, 0, lpMem);
    }
    return;
}

// static import 0049f270
void _malloc(undefined_32 param_1)

{
    __nh_malloc(param_1, DAT_00dfab64);
    return;
}

// static import __nh_malloc
int __nh_malloc(uint param_1, int param_2)

{
    int iVar1;

    if (param_1 < 0xffffffe1)
    {
        if (param_1 == 0)
        {
            param_1 = 1;
        }
        do
        {
            if (param_1 < 0xffffffe1)
            {
                iVar1 = __heap_alloc(param_1);
            }
            else
            {
                iVar1 = 0;
            }
            if (iVar1 != 0)
            {
                return iVar1;
            }
            if (param_2 == 0)
            {
                return 0;
            }
            iVar1 = ___callnewh(param_1);
        } while (iVar1 != 0);
    }
    return 0;
}

// static import 0049f2e0
LPVOID __heap_alloc(int param_1)

{
    LPVOID pvVar1;
    uint dwBytes;

    dwBytes = param_1 + 0xfU & 0xfffffff0;
    if (dwBytes <= DAT_004d422c)
    {
        __lock(9);
        pvVar1 = (LPVOID)___sbh_alloc_block(param_1 + 0xfU >> 4);
        __unlock(9);
        if (pvVar1 != (LPVOID)0x0)
        {
            return pvVar1;
        }
    }
    pvVar1 = HeapAlloc(DAT_00ecd604, 0, dwBytes);
    return pvVar1;
}

// Library Function - Single Match
//  _strncpy
//
// Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release

char *__cdecl _strncpy(char *_Dest, char *_Source, size_t _Count)

{
    uint uVar1;
    uint uVar2;
    char cVar3;
    uint uVar4;
    uint *puVar5;

    if (_Count == 0)
    {
        return _Dest;
    }
    puVar5 = (uint *)_Dest;
    if (((uint)_Source & 3) != 0)
    {
        while (true)
        {
            cVar3 = *_Source;
            _Source = (char *)((int)_Source + 1);
            *(char *)puVar5 = cVar3;
            puVar5 = (uint *)((int)puVar5 + 1);
            _Count = _Count - 1;
            if (_Count == 0)
            {
                return _Dest;
            }
            if (cVar3 == '\0')
                break;
            if (((uint)_Source & 3) == 0)
            {
                uVar4 = _Count >> 2;
                goto joined_r0x0049f37e;
            }
        }
        do
        {
            if (((uint)puVar5 & 3) == 0)
            {
                uVar4 = _Count >> 2;
                if (uVar4 == 0)
                    goto LAB_0049f3bb;
                goto LAB_0049f429;
            }
            *(undefined_8 *)puVar5 = 0;
            puVar5 = (uint *)((int)puVar5 + 1);
            _Count = _Count - 1;
        } while (_Count != 0);
        return _Dest;
    }
    uVar4 = _Count >> 2;
    if (uVar4 != 0)
    {
        do
        {
            uVar1 = *(uint *)_Source;
            uVar2 = *(uint *)_Source;
            _Source = (char *)((int)_Source + 4);
            if (((uVar1 ^ -1 ^ uVar1 + 0x7efefeff) & 0x81010100) != 0)
            {
                if ((char)uVar2 == '\0')
                {
                    *puVar5 = 0;
                joined_r0x0049f425:
                    while (true)
                    {
                        uVar4 = uVar4 - 1;
                        puVar5 = puVar5 + 1;
                        if (uVar4 == 0)
                            break;
                    LAB_0049f429:
                        *puVar5 = 0;
                    }
                    cVar3 = '\0';
                    _Count = _Count & 3;
                    if (_Count != 0)
                        goto LAB_0049f3bb;
                    return _Dest;
                }
                if ((char)(uVar2 >> 8) == '\0')
                {
                    *puVar5 = uVar2 & 0xff;
                    goto joined_r0x0049f425;
                }
                if ((uVar2 & 0xff0000) == 0)
                {
                    *puVar5 = uVar2 & 0xffff;
                    goto joined_r0x0049f425;
                }
                if ((uVar2 & 0xff000000) == 0)
                {
                    *puVar5 = uVar2;
                    goto joined_r0x0049f425;
                }
            }
            *puVar5 = uVar2;
            puVar5 = puVar5 + 1;
            uVar4 = uVar4 - 1;
        joined_r0x0049f37e:
        } while (uVar4 != 0);
        _Count = _Count & 3;
        if (_Count == 0)
        {
            return _Dest;
        }
    }
    do
    {
        cVar3 = *_Source;
        _Source = (char *)((int)_Source + 1);
        *(char *)puVar5 = cVar3;
        puVar5 = (uint *)((int)puVar5 + 1);
        if (cVar3 == '\0')
        {
            while (_Count = _Count - 1, _Count != 0)
            {
            LAB_0049f3bb:
                *(char *)puVar5 = cVar3;
                puVar5 = (uint *)((int)puVar5 + 1);
            }
            return _Dest;
        }
        _Count = _Count - 1;
    } while (_Count != 0);
    return _Dest;
}

// static import __isctype
uint __isctype(uint param_1, uint param_2)

{
    undefined_32 uVar1;
    int iVar2;
    uint local_4;

    if (param_1 + 1 < 0x101)
    {
        return *(ushort *)(PTR_DAT_004d1d90 + param_1 * 2) & param_2;
    }
    if ((PTR_DAT_004d1d90[((int)param_1 >> 8 & 0xffU) * 2 + 1] & 0x80) == 0)
    {
        param_1 = param_1 & 0xffff00ff;
        uVar1 = 1;
    }
    else
    {
        param_1 = param_1 & 0xff000000 | (uint)CONCAT11((char)param_1, (char)(param_1 >> 8));
        uVar1 = 2;
    }
    iVar2 = FUN_004a3b00(1, &param_1, uVar1, &local_4, 0, 0, 1);
    if (iVar2 == 0)
    {
        return 0;
    }
    return local_4 & 0xffff & param_2;
}

// static import 0049f4e0
undefined_32 *_memcpy(undefined_32 *param_1, undefined_32 *param_2, uint param_3)

{
    undefined_32 *puVar1;
    uint uVar2;
    uint uVar3;

    if ((param_2 < param_1) && (param_1 < (undefined_32 *)(param_3 + (int)param_2)))
    {
        param_2 = (undefined_32 *)((param_3 - 4) + (int)param_2);
        puVar1 = (undefined_32 *)((param_3 - 4) + (int)param_1);
        if (((uint)puVar1 & 3) == 0)
        {
            uVar3 = param_3 >> 2;
            if (uVar3 < 8)
                goto LAB_0049f6a0;
            for (; uVar3 != 0; uVar3 = uVar3 - 1)
            {
                *puVar1 = *param_2;
                param_2 = param_2 + -1;
                puVar1 = puVar1 + -1;
            }
            switch (param_3 & 3)
            {
            case 1:
                goto switchD_0049f6c4_caseD_1;
            case 2:
                goto switchD_0049f6c4_caseD_2;
            case 3:
                goto switchD_0049f6c4_caseD_3;
            }
        }
        else
        {
            switch (param_3)
            {
            case 0:
                break;
            case 1:
            switchD_0049f6c4_caseD_1:
                *(undefined_8 *)((int)puVar1 + 3) = *(undefined_8 *)((int)param_2 + 3);
                return param_1;
            case 2:
            switchD_0049f6c4_caseD_2:
                *(undefined_8 *)((int)puVar1 + 3) = *(undefined_8 *)((int)param_2 + 3);
                *(undefined_8 *)((int)puVar1 + 2) = *(undefined_8 *)((int)param_2 + 2);
                return param_1;
            case 3:
            switchD_0049f6c4_caseD_3:
                *(undefined_8 *)((int)puVar1 + 3) = *(undefined_8 *)((int)param_2 + 3);
                *(undefined_8 *)((int)puVar1 + 2) = *(undefined_8 *)((int)param_2 + 2);
                *(undefined_8 *)((int)puVar1 + 1) = *(undefined_8 *)((int)param_2 + 1);
                return param_1;
            default:
                param_3 = param_3 - ((uint)puVar1 & 3);
                switch ((uint)puVar1 & 3)
                {
                case 1:
                    *(undefined_8 *)((int)puVar1 + 3) = *(undefined_8 *)((int)param_2 + 3);
                    param_2 = (undefined_32 *)((int)param_2 + -1);
                    uVar3 = param_3 >> 2;
                    puVar1 = (undefined_32 *)((int)puVar1 - 1);
                    if (uVar3 < 8)
                    {
                    LAB_0049f6a0:
                        // WARNING: Could not recover jumptable at 0x0049f6a2.
                        // Too many branches WARNING: Treating indirect jump as
                        // call
                        puVar1 = (undefined_32 *)(*(code *)(&PTR_LAB_0049f770)[-uVar3])();
                        return puVar1;
                    }
                    for (; uVar3 != 0; uVar3 = uVar3 - 1)
                    {
                        *puVar1 = *param_2;
                        param_2 = param_2 + -1;
                        puVar1 = puVar1 + -1;
                    }
                    switch (param_3 & 3)
                    {
                    case 1:
                        goto switchD_0049f6c4_caseD_1;
                    case 2:
                        goto switchD_0049f6c4_caseD_2;
                    case 3:
                        goto switchD_0049f6c4_caseD_3;
                    }
                    break;
                case 2:
                    *(undefined_8 *)((int)puVar1 + 3) = *(undefined_8 *)((int)param_2 + 3);
                    uVar3 = param_3 >> 2;
                    *(undefined_8 *)((int)puVar1 + 2) = *(undefined_8 *)((int)param_2 + 2);
                    param_2 = (undefined_32 *)((int)param_2 + -2);
                    puVar1 = (undefined_32 *)((int)puVar1 - 2);
                    if (uVar3 < 8)
                        goto LAB_0049f6a0;
                    for (; uVar3 != 0; uVar3 = uVar3 - 1)
                    {
                        *puVar1 = *param_2;
                        param_2 = param_2 + -1;
                        puVar1 = puVar1 + -1;
                    }
                    switch (param_3 & 3)
                    {
                    case 1:
                        goto switchD_0049f6c4_caseD_1;
                    case 2:
                        goto switchD_0049f6c4_caseD_2;
                    case 3:
                        goto switchD_0049f6c4_caseD_3;
                    }
                    break;
                case 3:
                    *(undefined_8 *)((int)puVar1 + 3) = *(undefined_8 *)((int)param_2 + 3);
                    *(undefined_8 *)((int)puVar1 + 2) = *(undefined_8 *)((int)param_2 + 2);
                    uVar3 = param_3 >> 2;
                    *(undefined_8 *)((int)puVar1 + 1) = *(undefined_8 *)((int)param_2 + 1);
                    param_2 = (undefined_32 *)((int)param_2 + -3);
                    puVar1 = (undefined_32 *)((int)puVar1 - 3);
                    if (uVar3 < 8)
                        goto LAB_0049f6a0;
                    for (; uVar3 != 0; uVar3 = uVar3 - 1)
                    {
                        *puVar1 = *param_2;
                        param_2 = param_2 + -1;
                        puVar1 = puVar1 + -1;
                    }
                    switch (param_3 & 3)
                    {
                    case 1:
                        goto switchD_0049f6c4_caseD_1;
                    case 2:
                        goto switchD_0049f6c4_caseD_2;
                    case 3:
                        goto switchD_0049f6c4_caseD_3;
                    }
                }
            }
        }
        return param_1;
    }
    puVar1 = param_1;
    if (((uint)param_1 & 3) == 0)
    {
        uVar2 = param_3 >> 2;
        if (uVar2 < 8)
            goto LAB_0049f53c;
        for (; uVar2 != 0; uVar2 = uVar2 - 1)
        {
            *puVar1 = *param_2;
            param_2 = param_2 + 1;
            puVar1 = puVar1 + 1;
        }
        switch (param_3 & 3)
        {
        case 1:
            goto switchD_0049f534_caseD_1;
        case 2:
            goto switchD_0049f534_caseD_2;
        case 3:
            goto switchD_0049f534_caseD_3;
        }
    }
    else
    {
        switch (param_3)
        {
        case 0:
            break;
        case 1:
        switchD_0049f534_caseD_1:
            *(undefined_8 *)puVar1 = *(undefined_8 *)param_2;
            return param_1;
        case 2:
        switchD_0049f534_caseD_2:
            *(undefined_8 *)puVar1 = *(undefined_8 *)param_2;
            *(undefined_8 *)((int)puVar1 + 1) = *(undefined_8 *)((int)param_2 + 1);
            return param_1;
        case 3:
        switchD_0049f534_caseD_3:
            *(undefined_8 *)puVar1 = *(undefined_8 *)param_2;
            *(undefined_8 *)((int)puVar1 + 1) = *(undefined_8 *)((int)param_2 + 1);
            *(undefined_8 *)((int)puVar1 + 2) = *(undefined_8 *)((int)param_2 + 2);
            return param_1;
        default:
            uVar3 = (param_3 - 4) + ((uint)param_1 & 3);
            switch ((uint)param_1 & 3)
            {
            case 1:
                *(undefined_8 *)param_1 = *(undefined_8 *)param_2;
                *(undefined_8 *)((int)param_1 + 1) = *(undefined_8 *)((int)param_2 + 1);
                uVar2 = uVar3 >> 2;
                *(undefined_8 *)((int)param_1 + 2) = *(undefined_8 *)((int)param_2 + 2);
                param_2 = (undefined_32 *)((int)param_2 + 3);
                puVar1 = (undefined_32 *)((int)param_1 + 3);
                if (uVar2 < 8)
                {
                LAB_0049f53c:
                    // WARNING: Could not recover jumptable at 0x0049f53c. Too
                    // many branches WARNING: Treating indirect jump as call
                    puVar1 = (undefined_32 *)(*(code *)(&PTR_LAB_0049f5bc)[uVar2])();
                    return puVar1;
                }
                for (; uVar2 != 0; uVar2 = uVar2 - 1)
                {
                    *puVar1 = *param_2;
                    param_2 = param_2 + 1;
                    puVar1 = puVar1 + 1;
                }
                switch (uVar3 & 3)
                {
                case 1:
                    goto switchD_0049f534_caseD_1;
                case 2:
                    goto switchD_0049f534_caseD_2;
                case 3:
                    goto switchD_0049f534_caseD_3;
                }
                break;
            case 2:
                *(undefined_8 *)param_1 = *(undefined_8 *)param_2;
                uVar2 = uVar3 >> 2;
                *(undefined_8 *)((int)param_1 + 1) = *(undefined_8 *)((int)param_2 + 1);
                param_2 = (undefined_32 *)((int)param_2 + 2);
                puVar1 = (undefined_32 *)((int)param_1 + 2);
                if (uVar2 < 8)
                    goto LAB_0049f53c;
                for (; uVar2 != 0; uVar2 = uVar2 - 1)
                {
                    *puVar1 = *param_2;
                    param_2 = param_2 + 1;
                    puVar1 = puVar1 + 1;
                }
                switch (uVar3 & 3)
                {
                case 1:
                    goto switchD_0049f534_caseD_1;
                case 2:
                    goto switchD_0049f534_caseD_2;
                case 3:
                    goto switchD_0049f534_caseD_3;
                }
                break;
            case 3:
                *(undefined_8 *)param_1 = *(undefined_8 *)param_2;
                uVar2 = uVar3 >> 2;
                param_2 = (undefined_32 *)((int)param_2 + 1);
                puVar1 = (undefined_32 *)((int)param_1 + 1);
                if (uVar2 < 8)
                    goto LAB_0049f53c;
                for (; uVar2 != 0; uVar2 = uVar2 - 1)
                {
                    *puVar1 = *param_2;
                    param_2 = param_2 + 1;
                    puVar1 = puVar1 + 1;
                }
                switch (uVar3 & 3)
                {
                case 1:
                    goto switchD_0049f534_caseD_1;
                case 2:
                    goto switchD_0049f534_caseD_2;
                case 3:
                    goto switchD_0049f534_caseD_3;
                }
            }
        }
    }
    return param_1;
}

// static import 0049f820
uint _rand(void)

{
    uint uVar1;
    int iVar2;

    iVar2 = __getptd();
    uVar1 = *(int *)(iVar2 + 0x14) * 0x343fd + 0x269ec3;
    *(uint *)(iVar2 + 0x14) = uVar1;
    return uVar1 >> 0x10 & 0x7fff;
}

// static import
undefined_32 __snprintf(undefined_8 *param_1, int param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    undefined_8 *local_20;
    int local_1c;
    undefined_8 *local_18;
    undefined_32 local_14;

    local_18 = param_1;
    local_20 = param_1;
    local_1c = param_2;
    local_14 = 0x42;
    uVar1 = __output(&local_20, param_3, &stack0x00000010);
    local_1c = local_1c + -1;
    if (-1 < local_1c)
    {
        *local_20 = 0;
        return uVar1;
    }
    __flsbuf(0, &local_20);
    return uVar1;
}

// static import 0049f8c0
void _qsort(uint param_1, uint param_2, uint param_3, code *param_4)

{
    uint uVar1;
    int iVar2;
    uint uVar3;
    uint local_100;
    uint *local_fc;
    uint *local_f8;
    int local_f4;
    uint local_f0[30];
    uint local_78[30];

    if ((param_2 < 2) || (param_3 == 0))
    {
        return;
    }
    local_100 = (param_2 - 1) * param_3 + param_1;
    local_fc = local_f0;
    local_f8 = local_78;
    local_f4 = 0;
LAB_0049f914:
    uVar1 = (local_100 - param_1) / param_3 + 1;
    if (8 < uVar1)
    {
        _swap((uVar1 >> 1) * param_3 + param_1, param_1, param_3);
        uVar3 = local_100 + param_3;
        uVar1 = param_1;
    LAB_0049f98e:
        uVar1 = uVar1 + param_3;
        if (uVar1 <= local_100)
            goto code_r0x0049f998;
        goto LAB_0049f9a8;
    }
    _shortsort(param_1, local_100, param_3, param_4);
    goto LAB_0049f935;
code_r0x0049f998:
    iVar2 = (*param_4)(uVar1, param_1);
    if (iVar2 < 1)
        goto LAB_0049f98e;
LAB_0049f9a8:
    do
    {
        uVar3 = uVar3 - param_3;
        if (uVar3 <= param_1)
            break;
        iVar2 = (*param_4)(uVar3, param_1);
    } while (-1 < iVar2);
    if (uVar1 <= uVar3)
    {
        _swap(uVar1, uVar3, param_3);
        goto LAB_0049f98e;
    }
    _swap(param_1, uVar3, param_3);
    if ((int)((uVar3 - param_1) + -1) < (int)(local_100 - uVar1))
    {
        if (uVar1 < local_100)
        {
            *local_f8 = uVar1;
            *local_fc = local_100;
            local_f4 = local_f4 + 1;
            local_f8 = local_f8 + 1;
            local_fc = local_fc + 1;
        }
        if (param_1 + param_3 < uVar3)
        {
            local_100 = uVar3 - param_3;
            goto LAB_0049f914;
        }
    }
    else
    {
        if (param_1 + param_3 < uVar3)
        {
            *local_f8 = param_1;
            *local_fc = uVar3 - param_3;
            local_f4 = local_f4 + 1;
            local_f8 = local_f8 + 1;
            local_fc = local_fc + 1;
        }
        param_1 = uVar1;
        if (uVar1 < local_100)
            goto LAB_0049f914;
    }
LAB_0049f935:
    local_f4 = local_f4 + -1;
    local_f8 = local_f8 + -1;
    local_fc = local_fc + -1;
    if (local_f4 < 0)
    {
        return;
    }
    local_100 = *local_fc;
    param_1 = *local_f8;
    goto LAB_0049f914;
}

// static import 0049fa70
void _shortsort(uint param_1, uint param_2, int param_3, code *param_4)

{
    uint uVar1;
    int iVar2;
    uint uVar3;

    if (param_1 < param_2)
    {
        uVar1 = param_3 + param_1;
        uVar3 = param_1;
        do
        {
            for (; uVar1 <= param_2; uVar1 = uVar1 + param_3)
            {
                iVar2 = (*param_4)(uVar1, uVar3);
                if (0 < iVar2)
                {
                    uVar3 = uVar1;
                }
            }
            _swap(uVar3, param_2, param_3);
            param_2 = param_2 - param_3;
            uVar1 = param_3 + param_1;
            uVar3 = param_1;
        } while (param_1 < param_2);
    }
    return;
}
// static import 0049fad0
void _swap(undefined_8 *param_1, undefined_8 *param_2, int param_3)

{
    undefined_8 uVar1;

    if ((param_1 != param_2) && (param_3 != 0))
    {
        do
        {
            uVar1 = *param_1;
            *param_1 = *param_2;
            param_1 = param_1 + 1;
            *param_2 = uVar1;
            param_2 = param_2 + 1;
            param_3 = param_3 + -1;
        } while (param_3 != 0);
    }
    return;
}

// 0049fb10
uint *strchr(uint *param_1, char param_2)

{
    uint uVar1;
    char cVar2;
    uint uVar3;
    uint uVar4;
    uint *puVar5;

    uVar1 = (uint)param_1 & 3;
    while (uVar1 != 0)
    {
        if (*(char *)param_1 == param_2)
        {
            return param_1;
        }
        if (*(char *)param_1 == '\0')
        {
            return NULL;
        }
        uVar1 = (uint)(uint *)((int)param_1 + 1) & 3;
        param_1 = (uint *)((int)param_1 + 1);
    }
    while (true)
    {
        while (true)
        {
            uVar1 = *param_1;
            uVar4 = uVar1 ^ CONCAT22(CONCAT11(param_2, param_2), CONCAT11(param_2, param_2));
            uVar3 = uVar1 ^ -1 ^ uVar1 + 0x7efefeff;
            puVar5 = param_1 + 1;
            if (((uVar4 ^ -1 ^ uVar4 + 0x7efefeff) & 0x81010100) != 0)
                break;
            param_1 = puVar5;
            if ((uVar3 & 0x81010100) != 0)
            {
                if ((uVar3 & 0x1010100) != 0)
                {
                    return NULL;
                }
                if ((uVar1 + 0x7efefeff & 0x80000000) == 0)
                {
                    return NULL;
                }
            }
        }
        uVar1 = *param_1;
        if ((char)uVar1 == param_2)
        {
            return param_1;
        }
        if ((char)uVar1 == '\0')
        {
            return NULL;
        }
        cVar2 = (char)(uVar1 >> 8);
        if (cVar2 == param_2)
        {
            return (uint *)((int)param_1 + 1);
        }
        if (cVar2 == '\0')
            break;
        cVar2 = (char)(uVar1 >> 0x10);
        if (cVar2 == param_2)
        {
            return (uint *)((int)param_1 + 2);
        }
        if (cVar2 == '\0')
        {
            return NULL;
        }
        cVar2 = (char)(uVar1 >> 0x18);
        if (cVar2 == param_2)
        {
            return (uint *)((int)param_1 + 3);
        }
        param_1 = puVar5;
        if (cVar2 == '\0')
        {
            return NULL;
        }
    }
    return NULL;
}

// static import 0049fbd0
undefined_32 _ftell(undefined_32 param_1)

{
    undefined_32 uVar1;

    _lock_file(param_1);
    uVar1 = __ftell_lk(param_1);
    _unlock_file(param_1);
    return uVar1;
}

// static import 0049fc00
int __ftell_lk(char **param_1)

{
    char *pcVar1;
    char *pcVar2;
    int iVar3;
    char *pcVar4;
    undefined_32 *puVar5;
    char *pcVar6;
    int iVar7;
    int local_8;
    int local_4;

    pcVar1 = param_1[4];
    if ((int)param_1[1] < 0)
    {
        param_1[1] = NULL;
    }
    local_4 = __lseek(pcVar1, 0, 1);
    if (local_4 < 0)
    {
        return -1;
    }
    pcVar6 = param_1[3];
    if (((uint)pcVar6 & 0x108) == 0)
    {
        return local_4 - (int)param_1[1];
    }
    pcVar4 = *param_1;
    pcVar2 = param_1[2];
    local_8 = (int)pcVar4 - (int)pcVar2;
    if (((uint)pcVar6 & 3) == 0)
    {
        if (((uint)pcVar6 & 0x80) == 0)
        {
            puVar5 = (undefined_32 *)__errno();
            *puVar5 = 0x16;
            return -1;
        }
    }
    else
    {
        pcVar6 = pcVar2;
        if ((*(byte *)((&DAT_00ecd500)[(int)pcVar1 >> 5] + 4 + ((uint)pcVar1 & 0x1f) * 0x24) & 0x80) != 0)
        {
            for (; pcVar6 < pcVar4; pcVar6 = pcVar6 + 1)
            {
                if (*pcVar6 == '\n')
                {
                    local_8 = local_8 + 1;
                }
            }
        }
    }
    if (local_4 == 0)
    {
        return local_8;
    }
    if ((*(byte *)(param_1 + 3) & 1) == 0)
        goto LAB_0049fd77;
    if (param_1[1] == NULL)
    {
        return local_4;
    }
    pcVar6 = pcVar4 + (int)param_1[1] + -(int)pcVar2;
    iVar7 = ((uint)pcVar1 & 0x1f) * 0x24;
    if ((*(byte *)(iVar7 + 4 + (&DAT_00ecd500)[(int)pcVar1 >> 5]) & 0x80) != 0)
    {
        iVar3 = __lseek(pcVar1, 0, 2);
        if (iVar3 == local_4)
        {
            pcVar4 = param_1[2];
            pcVar1 = pcVar6 + (int)pcVar4;
            for (; pcVar4 < pcVar1; pcVar4 = pcVar4 + 1)
            {
                if (*pcVar4 == '\n')
                {
                    pcVar6 = pcVar6 + 1;
                }
            }
            if (((uint)param_1[3] & 0x2000) != 0)
            {
            LAB_0049fd6e:
                pcVar6 = pcVar6 + 1;
            }
        }
        else
        {
            __lseek(pcVar1, local_4, 0);
            if (((pcVar6 < (char *)0x201) && (((uint)param_1[3] & 8) != 0)) && (((uint)param_1[3] & 0x400) == 0))
            {
                pcVar6 = (char *)0x200;
            }
            else
            {
                pcVar6 = param_1[6];
            }
            if ((*(byte *)(iVar7 + 4 + (&DAT_00ecd500)[(int)pcVar1 >> 5]) & 4) != 0)
                goto LAB_0049fd6e;
        }
    }
    local_4 = local_4 - (int)pcVar6;
LAB_0049fd77:
    return local_4 + local_8;
}

// static import 0049fdb0
uint _bsearch(undefined_32 param_1, uint param_2, uint param_3, int param_4, code *param_5)

{
    bool bVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;

    uVar3 = (param_3 - 1) * param_4 + param_2;
    bVar1 = param_2 <= uVar3;
    uVar4 = param_2;
    param_2 = uVar3;
    if (bVar1)
    {
        while (uVar3 = param_3 >> 1, uVar3 != 0)
        {
            uVar5 = uVar3;
            if ((param_3 & 1) == 0)
            {
                uVar5 = uVar3 - 1;
            }
            uVar5 = param_4 * uVar5 + uVar4;
            iVar2 = (*param_5)(param_1, uVar5);
            if (iVar2 == 0)
            {
                return uVar5;
            }
            if (iVar2 < 0)
            {
                param_2 = uVar5 - param_4;
                if ((param_3 & 1) == 0)
                {
                    uVar3 = uVar3 - 1;
                }
            }
            else
            {
                uVar4 = uVar5 + param_4;
            }
            param_3 = uVar3;
            if (param_2 < uVar4)
            {
                return 0;
            }
        }
        if (param_3 != 0)
        {
            iVar2 = (*param_5)(param_1, uVar4);
            return ~-(uint)(iVar2 != 0) & uVar4;
        }
    }
    return 0;
}

// static import 0049fe50
int _tolower(int param_1)

{
    bool bVar1;

    if (DAT_00dfab38 == 0)
    {
        if ((0x40 < param_1) && (param_1 < 0x5b))
        {
            return param_1 + 0x20;
        }
    }
    else
    {
        InterlockedIncrement((LONG *)&DAT_00ecd60c);
        bVar1 = DAT_00ecd608 != 0;
        if (bVar1)
        {
            InterlockedDecrement((LONG *)&DAT_00ecd60c);
            __lock(0x13);
        }
        param_1 = FUN_0049fee0(param_1);
        if (bVar1)
        {
            __unlock(0x13);
            return param_1;
        }
        InterlockedDecrement((LONG *)&DAT_00ecd60c);
    }
    return param_1;
}

uint FUN_0049fee0(uint param_1)

{
    uint uVar1;
    uint uVar2;
    undefined_32 uVar3;
    int iVar4;
    uint local_8[2];

    uVar1 = param_1;
    if (DAT_00dfab38 == 0)
    {
        if ((0x40 < (int)param_1) && ((int)param_1 < 0x5b))
        {
            return param_1 + 0x20;
        }
    }
    else
    {
        if ((int)param_1 < 0x100)
        {
            if (DAT_004d1f9c < 2)
            {
                uVar2 = (byte)PTR_DAT_004d1d90[param_1 * 2] & 1;
            }
            else
            {
                uVar2 = __isctype(param_1, 1);
            }
            if (uVar2 == 0)
            {
                return uVar1;
            }
        }
        if ((PTR_DAT_004d1d90[((int)uVar1 >> 8 & 0xffU) * 2 + 1] & 0x80) == 0)
        {
            param_1 = param_1 & 0xffff0000 | uVar1 & 0xff;
            uVar3 = 1;
        }
        else
        {
            param_1 = param_1 & 0xff000000 | (uint)CONCAT11((char)uVar1, (char)(uVar1 >> 8));
            uVar3 = 2;
        }
        iVar4 = FUN_004a29a0(DAT_00dfab38, 0x100, &param_1, uVar3, local_8, 3, 0, 1);
        if (iVar4 == 0)
        {
            return uVar1;
        }
        if (iVar4 == 1)
        {
            return local_8[0] & 0xff;
        }
        param_1 = (local_8[0] >> 8 & 0xff) << 8 | local_8[0] & 0xff;
    }
    return param_1;
}

// 0049ffe0
undefined_32 fread_locked(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    undefined_32 uVar1;

    _lock_file(param_4);
    uVar1 = fread(param_1, param_2, param_3, param_4);
    _unlock_file(param_4);
    return uVar1;
}

// static import 004a0020
uint fread(undefined_32 *param_1, uint param_2, uint param_3, int *param_4)

{
    int *piVar1;
    uint uVar2;
    int iVar3;
    int iVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    undefined_32 *puVar8;
    undefined_32 *puVar9;

    piVar1 = param_4;
    uVar6 = param_3 * param_2;
    if (uVar6 == 0)
    {
        return 0;
    }
    uVar7 = uVar6;
    if ((param_4[3] & 0x10cU) == 0)
    {
        param_4 = (int *)0x1000;
        uVar5 = 0x1000;
    }
    else
    {
        uVar5 = param_4[6];
        param_4 = (int *)uVar5;
    }
    do
    {
        if (((piVar1[3] & 0x10cU) == 0) || (uVar2 = piVar1[1], uVar2 == 0))
        {
            if (uVar7 < uVar5)
            {
                iVar4 = __filbuf(piVar1);
                if (iVar4 == -1)
                {
                    return (uVar6 - uVar7) / param_2;
                }
                *(char *)param_1 = (char)iVar4;
                uVar5 = piVar1[6];
                param_1 = (undefined_32 *)((int)param_1 + 1);
                iVar4 = -1;
                param_4 = (int *)uVar5;
            }
            else
            {
                uVar2 = uVar7;
                if (uVar5 != 0)
                {
                    uVar2 = uVar7 - uVar7 % uVar5;
                }
                iVar3 = __read(piVar1[4], param_1, uVar2);
                if (iVar3 == 0)
                {
                    piVar1[3] = piVar1[3] | 0x10;
                    return (uVar6 - uVar7) / param_2;
                }
                if (iVar3 == -1)
                {
                    piVar1[3] = piVar1[3] | 0x20;
                    return (uVar6 - uVar7) / param_2;
                }
                iVar4 = -iVar3;
                param_1 = (undefined_32 *)((int)param_1 + iVar3);
            }
        }
        else
        {
            if (uVar7 < uVar2)
            {
                uVar2 = uVar7;
            }
            iVar4 = -uVar2;
            puVar8 = (undefined_32 *)*piVar1;
            puVar9 = param_1;
            QMEMCPY(uVar5, puVar8, puVar9, uVar2 >> 2)
            for (uVar5 = uVar2 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
            {
                *(undefined_8 *)puVar9 = *(undefined_8 *)puVar8;
                puVar8 = (undefined_32 *)((int)puVar8 + 1);
                puVar9 = (undefined_32 *)((int)puVar9 + 1);
            }
            param_1 = (undefined_32 *)((int)param_1 + uVar2);
            piVar1[1] = piVar1[1] - uVar2;
            *piVar1 = *piVar1 + uVar2;
            uVar5 = (uint)param_4;
        }
        uVar7 = uVar7 + iVar4;
        if (uVar7 == 0)
        {
            return param_3;
        }
    } while (true);
}

// 004a0160
undefined_32 fwrite(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3, undefined_32 param_4)

{
    undefined_32 uVar1;

    _lock_file(param_4);
    uVar1 = _fwrite(param_1, param_2, param_3, param_4);
    _unlock_file(param_4);
    return uVar1;
}

// static import
uint _fwrite(undefined_32 *param_1, uint param_2, uint param_3, int *param_4)

{
    int *piVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    undefined_32 *puVar7;
    undefined_32 *puVar8;

    piVar1 = param_4;
    uVar5 = param_3 * param_2;
    if (uVar5 == 0)
    {
        return 0;
    }
    uVar6 = uVar5;
    if ((param_4[3] & 0x10cU) == 0)
    {
        param_4 = (int *)0x1000;
    }
    else
    {
        param_4 = (int *)param_4[6];
    }
    do
    {
        if (((piVar1[3] & 0x108U) == 0) || (uVar2 = piVar1[1], uVar2 == 0))
        {
            if (uVar6 < param_4)
            {
                iVar3 = __flsbuf((int)*(char *)param_1, piVar1);
                if (iVar3 == -1)
                    goto LAB_004a02d4;
                param_4 = (int *)piVar1[6];
                param_1 = (undefined_32 *)((int)param_1 + 1);
                uVar6 = uVar6 - 1;
                if ((int)param_4 < 1)
                {
                    param_4 = (int *)0x1;
                }
            }
            else
            {
                if (((piVar1[3] & 0x108U) != 0) && (iVar3 = __flush(piVar1), iVar3 != 0))
                {
                LAB_004a02d4:
                    return (uVar5 - uVar6) / param_2;
                }
                uVar2 = uVar6;
                if (param_4 != NULL)
                {
                    uVar2 = uVar6 - uVar6 % (uint)param_4;
                }
                uVar4 = __write(piVar1[4], param_1, uVar2);
                if (uVar4 == -1)
                {
                LAB_004a02b9:
                    piVar1[3] = piVar1[3] | 0x20;
                    return (uVar5 - uVar6) / param_2;
                }
                uVar6 = uVar6 - uVar4;
                param_1 = (undefined_32 *)((int)param_1 + uVar4);
                if (uVar4 < uVar2)
                    goto LAB_004a02b9;
            }
        }
        else
        {
            if (uVar6 < uVar2)
            {
                uVar2 = uVar6;
            }
            uVar6 = uVar6 - uVar2;
            puVar7 = param_1;
            puVar8 = (undefined_32 *)*piVar1;
            QMEMCPY(uVar4, puVar7, puVar8, uVar2 >> 2)
            for (uVar4 = uVar2 & 3; uVar4 != 0; uVar4 = uVar4 - 1)
            {
                *(undefined_8 *)puVar8 = *(undefined_8 *)puVar7;
                puVar7 = (undefined_32 *)((int)puVar7 + 1);
                puVar8 = (undefined_32 *)((int)puVar8 + 1);
            }
            param_1 = (undefined_32 *)((int)param_1 + uVar2);
            piVar1[1] = piVar1[1] - uVar2;
            *piVar1 = *piVar1 + uVar2;
        }
        if (uVar6 == 0)
        {
            return param_3;
        }
    } while (true);
}

//----- (004A02F0) --------------------------------------------------------
// _strtok
uint strtok(byte *param_1, byte *param_2)

{
    byte bVar1;
    byte bVar2;
    int iVar3;
    int iVar4;
    byte *pbVar5;
    undefined_32 *puVar6;
    undefined_32 local_20[8];

    iVar3 = __getptd();
    puVar6 = local_20;
    MEMSET(iVar4, puVar6, 0, 8)
    do
    {
        bVar1 = *param_2;
        param_2 = param_2 + 1;
        *(byte *)((int)local_20 + (uint)(bVar1 >> 3)) =
            *(byte *)((int)local_20 + (uint)(bVar1 >> 3)) | '\x01' << (bVar1 & 7);
    } while (bVar1 != 0);
    if (param_1 == NULL)
    {
        param_1 = *(byte **)(iVar3 + 0x18);
    }
    bVar1 = *param_1;
    bVar2 = *(byte *)((int)local_20 + (uint)(bVar1 >> 3)) & (byte)(1 << (bVar1 & 7));
    while ((bVar2 != 0 && (bVar1 != 0)))
    {
        bVar1 = param_1[1];
        param_1 = param_1 + 1;
        bVar2 = *(byte *)((int)local_20 + (uint)(bVar1 >> 3)) & (byte)(1 << (bVar1 & 7));
    }
    bVar1 = *param_1;
    pbVar5 = param_1;
    do
    {
        if (bVar1 == 0)
        {
        LAB_004a03bf:
            *(byte **)(iVar3 + 0x18) = pbVar5;
            return -(uint)(param_1 != pbVar5) & (uint)param_1;
        }
        if ((*(byte *)((int)local_20 + (uint)(bVar1 >> 3)) & (byte)(1 << (bVar1 & 7))) != 0)
        {
            *pbVar5 = 0;
            pbVar5 = pbVar5 + 1;
            goto LAB_004a03bf;
        }
        bVar1 = pbVar5[1];
        pbVar5 = pbVar5 + 1;
    } while (true);
}

// static import 004a03e0
undefined_32 __close(uint param_1)

{
    undefined_32 uVar1;
    undefined_32 *puVar2;

    if ((param_1 < DAT_00ecd600)
        && ((*(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0))
    {
        __lock_fhandle(param_1);
        uVar1 = __close_lk(param_1);
        __unlock_fhandle(param_1);
        return uVar1;
    }
    puVar2 = (undefined_32 *)__errno();
    *puVar2 = 9;
    puVar2 = (undefined_32 *)___doserrno();
    *puVar2 = 0;
    return -1;
}

// static import 004a0450
undefined_32 __close_lk(uint param_1)

{
    int iVar1;
    int iVar2;
    HANDLE hObject;
    BOOL BVar3;
    DWORD DVar4;

    iVar1 = __get_osfhandle(param_1);
    if (iVar1 != -1)
    {
        if ((param_1 == 1) || (param_1 == 2))
        {
            iVar1 = __get_osfhandle(1);
            iVar2 = __get_osfhandle(2);
            if (iVar1 == iVar2)
                goto LAB_004a04a6;
        }
        hObject = (HANDLE)__get_osfhandle(param_1);
        BVar3 = CloseHandle(hObject);
        if (BVar3 == 0)
        {
            DVar4 = GetLastError();
            goto LAB_004a04a8;
        }
    }
LAB_004a04a6:
    DVar4 = 0;
LAB_004a04a8:
    __free_osfhnd(param_1);
    *(undefined_8 *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) = 0;
    if (DVar4 != 0)
    {
        __dosmaperr(DVar4);
        return -1;
    }
    return 0;
}

// static import 004a04e0
int __filelength(uint param_1)

{
    int iVar1;
    int iVar2;
    undefined_32 *puVar3;

    if ((param_1 < DAT_00ecd600)
        && ((*(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0))
    {
        __lock_fhandle(param_1);
        iVar1 = __lseek_lk(param_1, 0, 1);
        if (iVar1 == -1)
        {
            __unlock_fhandle(param_1);
            return -1;
        }
        iVar2 = __lseek_lk(param_1, 0, 2);
        if (iVar1 != iVar2)
        {
            __lseek_lk(param_1, iVar1, 0);
        }
        __unlock_fhandle(param_1);
        return iVar2;
    }
    puVar3 = (undefined_32 *)__errno();
    *puVar3 = 9;
    puVar3 = (undefined_32 *)___doserrno();
    *puVar3 = 0;
    return -1;
}

void FUN_004a0590(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    __sopen(param_1, param_2, 0x40, param_3);
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// static import 004a05b0
uint __sopen(LPCSTR param_1, uint param_2, uint param_3, undefined_32 param_4)

{
    uint uVar1;
    HANDLE hFile;
    int iVar2;
    int *piVar3;
    int iVar4;
    undefined_32 *puVar5;
    DWORD DVar6;
    DWORD dwCreationDisposition;
    DWORD dwFlagsAndAttributes;
    int iVar7;
    bool bVar8;
    byte local_11;
    uint local_10;
    _SECURITY_ATTRIBUTES local_c;

    bVar8 = (param_2 & 0x80) == 0;
    local_c.nLength = 0xc;
    local_c.lpSecurityDescriptor = (LPVOID)0x0;
    if (bVar8)
    {
        local_11 = 0;
    }
    else
    {
        local_11 = 0x10;
    }
    local_c.bInheritHandle = (BOOL)bVar8;
    if (((param_2 & 0x8000) == 0) && (((param_2 & 0x4000) != 0 || (_DAT_00dfab74 != 0x8000))))
    {
        local_11 = local_11 | 0x80;
    }
    uVar1 = param_2 & 3;
    if (uVar1 == 0)
    {
        local_10 = 0x80000000;
    }
    else if (uVar1 == 1)
    {
        local_10 = 2.0f;
    }
    else
    {
        if (uVar1 != 2)
            goto switchD_004a0648_caseD_11;
        local_10 = 0xc0000000;
    }
    switch (param_3)
    {
    case 0x10:
        DVar6 = 0;
        break;
    default:
        goto switchD_004a0648_caseD_11;
    case 0x20:
        DVar6 = 1;
        break;
    case 0x30:
        DVar6 = 2;
        break;
    case 0x40:
        DVar6 = 3;
    }
    uVar1 = param_2 & 0x700;
    if (uVar1 < 0x101)
    {
        if (uVar1 == 0x100)
        {
            dwCreationDisposition = 4;
        }
        else
        {
            if (uVar1 != 0)
                goto switchD_004a0648_caseD_11;
        LAB_004a06b6:
            dwCreationDisposition = 3;
        }
    }
    else if (uVar1 < 0x301)
    {
        if (uVar1 == 0x300)
        {
            dwCreationDisposition = 2;
        }
        else
        {
            if (uVar1 != 0x200)
                goto switchD_004a0648_caseD_11;
        LAB_004a06d6:
            dwCreationDisposition = 5;
        }
    }
    else
    {
        if (uVar1 < 0x501)
        {
            if (uVar1 != 0x500)
            {
                if (uVar1 != 0x400)
                {
                switchD_004a0648_caseD_11:
                    puVar5 = (undefined_32 *)__errno();
                    *puVar5 = 0x16;
                    puVar5 = (undefined_32 *)___doserrno();
                    *puVar5 = 0;
                    return -1;
                }
                goto LAB_004a06b6;
            }
        }
        else
        {
            if (uVar1 == 0x600)
                goto LAB_004a06d6;
            if (uVar1 != 0x700)
                goto switchD_004a0648_caseD_11;
        }
        dwCreationDisposition = 1;
    }
    dwFlagsAndAttributes = 0x80;
    if (((param_2 & 0x100) != 0) && (((byte)param_4 & ~(byte)DAT_00dfaa74 & 0x80) == 0))
    {
        dwFlagsAndAttributes = 1;
    }
    if ((param_2 & 0x40) != 0)
    {
        dwFlagsAndAttributes = dwFlagsAndAttributes | 0x4000000;
        local_10 = local_10 | 0x10000;
    }
    if ((param_2 & 0x1000) != 0)
    {
        dwFlagsAndAttributes = dwFlagsAndAttributes | 0x100;
    }
    if ((param_2 & 0x20) == 0)
    {
        if ((param_2 & 0x10) != 0)
        {
            dwFlagsAndAttributes = dwFlagsAndAttributes | 0x10000000;
        }
    }
    else
    {
        dwFlagsAndAttributes = dwFlagsAndAttributes | 0x8000000;
    }
    uVar1 = __alloc_osfhnd();
    if (uVar1 == -1)
    {
        puVar5 = (undefined_32 *)__errno();
        *puVar5 = 0x18;
        puVar5 = (undefined_32 *)___doserrno();
        *puVar5 = 0;
        return -1;
    }
    hFile = CreateFileA(param_1, local_10, DVar6, &local_c, dwCreationDisposition, dwFlagsAndAttributes, (HANDLE)0x0);
    if (hFile != (HANDLE)-1)
    {
        DVar6 = GetFileType(hFile);
        if (DVar6 != 0)
        {
            if (DVar6 == 2)
            {
                local_11 = local_11 | 0x40;
            }
            else if (DVar6 == 3)
            {
                local_11 = local_11 | 8;
            }
            __set_osfhnd(uVar1, hFile);
            iVar7 = (uVar1 & 0x1f) * 0x24;
            *(byte *)(iVar7 + 4 + (&DAT_00ecd500)[(int)uVar1 >> 5]) = local_11 | 1;
            if ((((local_11 & 0x48) == 0) && ((local_11 & 0x80) != 0)) && ((param_2 & 2) != 0))
            {
                iVar2 = __lseek_lk(uVar1, -1, 2);
                if (iVar2 == -1)
                {
                    piVar3 = (int *)___doserrno();
                    if (*piVar3 != 0x83)
                    {
                    LAB_004a0896:
                        __close(uVar1);
                        __unlock_fhandle(uVar1);
                        return -1;
                    }
                }
                else
                {
                    param_3 = param_3 & 0xffffff00;
                    iVar4 = __read_lk(uVar1, &param_3, 1);
                    if ((((iVar4 == 0) && ((char)param_3 == '\x1a'))
                         && (iVar2 = __chsize_lk(uVar1, iVar2), iVar2 == -1))
                        || (iVar2 = __lseek_lk(uVar1, 0, 0), iVar2 == -1))
                        goto LAB_004a0896;
                }
            }
            if (((local_11 & 0x48) == 0) && ((param_2 & 8) != 0))
            {
                *(byte *)(iVar7 + 4 + (&DAT_00ecd500)[(int)uVar1 >> 5]) =
                    *(byte *)(iVar7 + 4 + (&DAT_00ecd500)[(int)uVar1 >> 5]) | 0x20;
            }
            __unlock_fhandle(uVar1);
            return uVar1;
        }
        CloseHandle(hFile);
    }
    DVar6 = GetLastError();
    __dosmaperr(DVar6);
    __unlock_fhandle(uVar1);
    return -1;
}

// static import 004a0950
undefined_32 fseek(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;

    _lock_file(param_1);
    uVar1 = __fseek_lk(param_1, param_2, param_3);
    _unlock_file(param_1);
    return uVar1;
}

// static import 004a0990
int __fseek_lk(int param_1, int param_2, int param_3)

{
    uint uVar1;
    int iVar2;
    undefined_32 *puVar3;

    if (((*(uint *)(param_1 + 0xc) & 0x83) != 0) && (((param_3 == 0 || (param_3 == 1)) || (param_3 == 2))))
    {
        *(uint *)(param_1 + 0xc) = *(uint *)(param_1 + 0xc) & 0xffffffef;
        if (param_3 == 1)
        {
            iVar2 = __ftell_lk(param_1);
            param_2 = param_2 + iVar2;
            param_3 = 0;
        }
        __flush(param_1);
        uVar1 = *(uint *)(param_1 + 0xc);
        if ((uVar1 & 0x80) == 0)
        {
            if ((((uVar1 & 1) != 0) && ((uVar1 & 8) != 0)) && ((uVar1 & 0x400) == 0))
            {
                *(undefined_32 *)(param_1 + 0x18) = 0x200;
            }
        }
        else
        {
            *(uint *)(param_1 + 0xc) = uVar1 & 0xfffffffc;
        }
        iVar2 = __lseek(*(undefined_32 *)(param_1 + 0x10), param_2, param_3);
        return (iVar2 != -1) - 1;
    }
    puVar3 = (undefined_32 *)__errno();
    *puVar3 = 0x16;
    return -1;
}

// WARNING: Unable to track spacebase fully for stack

// static import 004a0a30
void __alloca_probe(void)

{
    uint in_EAX;
    undefined_8 *puVar1;
    undefined_32 unaff_retaddr;

    puVar1 = &stack0x00000004;
    if (0xfff < in_EAX)
    {
        do
        {
            puVar1 = puVar1 + -0x1000;
            in_EAX = in_EAX - 0x1000;
        } while (0xfff < in_EAX);
    }
    *(undefined_32 *)(puVar1 + (-4 - in_EAX)) = unaff_retaddr;
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// ----- (004A0A60) --------------------------------------------------------
void entry(void)

{
    byte bVar1;
    DWORD DVar2;
    int iVar3;
    HMODULE pHVar4;
    byte *pbVar5;
    undefined_32 uVar7;
    _STARTUPINFOA local_60;
    undefined_8 *local_1c;
    void *local_14;
    undefined_8 *puStack_10;
    undefined_8 *puStack_c;
    undefined_32 local_8;
    byte *pbVar6;

    local_8 = -1;
    puStack_c = &DAT_004af9c8;
    puStack_10 = &LAB_004a59d8; // static import except_handler3
    local_14 = ExceptionList;
    local_1c = &stack0xffffff88;
    ExceptionList = &local_14;
    DVar2 = GetVersion();
    _DAT_00dfaa84 = DVar2 >> 8 & 0xff;
    _DAT_00dfaa80 = DVar2 & 0xff;
    _DAT_00dfaa7c = _DAT_00dfaa80 * 0x100 + _DAT_00dfaa84;
    _DAT_00dfaa78 = DVar2 >> 0x10;
    iVar3 = __heap_init();
    if (iVar3 == 0)
    {
        __amsg_exit_0(0x1c);
    }
    iVar3 = ___mtinit();
    if (iVar3 == 0)
    {
        __amsg_exit_0(0x10);
    }
    local_8 = 0;
    __ioinit();
    ___initmbctable();
    DAT_00ecd610 = (byte *)GetCommandLineA();
    DAT_00dfaac0 = ___crtGetEnvironmentStringsA();
    if ((DAT_00dfaac0 == 0) || (DAT_00ecd610 == NULL))
    {
        _exit_0(-1);
    }
    __setargv();
    __setenvp();
    __cinit();
    pbVar5 = DAT_00ecd610;
    if (*DAT_00ecd610 == 0x22)
    {
        while (true)
        {
            pbVar6 = pbVar5;
            pbVar5 = pbVar6 + 1;
            bVar1 = *pbVar5;
            if ((bVar1 == 0x22) || (bVar1 == 0))
                break;
            iVar3 = __ismbblead(bVar1);
            if (iVar3 != 0)
            {
                pbVar5 = pbVar6 + 2;
            }
        }
        if (*pbVar5 == 0x22)
        {
            pbVar5 = pbVar6 + 2;
        }
    }
    else
    {
        for (; 0x20 < *pbVar5; pbVar5 = pbVar5 + 1)
        {}
    }
    for (; (*pbVar5 != 0 && (*pbVar5 < 0x21)); pbVar5 = pbVar5 + 1)
    {}
    local_60.dwFlags = 0;
    GetStartupInfoA(&local_60);
    if ((local_60.dwFlags & 1) == 0)
    {
        local_60._48_4_ = 10;
    }
    else
    {
        local_60._48_4_ = local_60._48_4_ & 0xffff;
    }
    uVar7 = 0;
    pHVar4 = GetModuleHandleA((LPCSTR)0x0);
    uVar7 = WinMain(pHVar4, uVar7, pbVar5, local_60._48_4_);
    _exit_0(uVar7);
    ExceptionList = local_14;
    return;
}

// Library Function - Single Match
//  __amsg_exit
//
// Library: Visual Studio 1998 Release

// ----- (004A0C10) --------------------------------------------------------
void __cdecl __amsg_exit(int param_1)

{
    if (DAT_00dfaac8 == 1)
    {
        __FF_MSGBANNER();
    }
    __NMSG_WRITE(param_1);
    (*(code *)PTR___exit_004d1fb0)(0xff);
    return;
}

// static import 004a0c40
void __amsg_exit_0(undefined_32 param_1)

{
    if (DAT_00dfaac8 == 1)
    {
        __FF_MSGBANNER();
    }
    __NMSG_WRITE(param_1);
    // WARNING: Subroutine does not return
    ExitProcess(0xff);
}

// static import 004a0c70
HANDLE __findfirst(LPCSTR param_1, uint *param_2)

{
    char cVar1;
    HANDLE pvVar2;
    DWORD DVar3;
    undefined_32 *puVar4;
    uint uVar5;
    uint uVar6;
    uint *puVar7;
    char *pcVar8;
    char *pcVar9;
    uint *puVar10;
    undefined_8 local_140[12];
    undefined_8 local_134[8];
    undefined_8 local_12c[12];
    uint local_120;
    char local_114[276];

    pvVar2 = FindFirstFileA(param_1, (LPWIN32_FIND_DATAA)local_140);
    if (pvVar2 == (HANDLE)-1)
    {
        DVar3 = GetLastError();
        switch (DVar3)
        {
        case 2:
        case 3:
        case 0x12:
            puVar4 = (undefined_32 *)__errno();
            *puVar4 = 2;
            return (HANDLE)-1;
        default:
            puVar4 = (undefined_32 *)__errno();
            *puVar4 = 0x16;
            return (HANDLE)-1;
        case 8:
            puVar4 = (undefined_32 *)__errno();
            *puVar4 = 0xc;
            return (HANDLE)-1;
        }
    }
    *param_2 = -(uint)(local_140._0_4_ != 0x80) & local_140._0_4_;
    uVar5 = __timet_from_ft(local_140 + 4);
    param_2[1] = uVar5;
    uVar5 = __timet_from_ft(local_134);
    param_2[2] = uVar5;
    uVar5 = __timet_from_ft(local_12c);
    param_2[3] = uVar5;
    uVar5 = -1;
    pcVar8 = local_114;
    do
    {
        pcVar9 = pcVar8;
        if (uVar5 == 0)
            break;
        uVar5 = uVar5 - 1;
        pcVar9 = pcVar8 + 1;
        cVar1 = *pcVar8;
        pcVar8 = pcVar9;
    } while (cVar1 != '\0');
    uVar5 = ~uVar5;
    param_2[4] = local_120;
    puVar7 = (uint *)(pcVar9 + -uVar5);
    puVar10 = param_2 + 5;
    QMEMCPY(uVar6, puVar7, puVar10, uVar5 >> 2)
    for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
    {
        *(undefined_8 *)puVar10 = *(undefined_8 *)puVar7;
        puVar7 = (uint *)((int)puVar7 + 1);
        puVar10 = (uint *)((int)puVar10 + 1);
    }
    return pvVar2;
}

// static import 004a0da0
undefined_32 __findnext(HANDLE param_1, uint *param_2)

{
    char cVar1;
    BOOL BVar2;
    DWORD DVar3;
    undefined_32 *puVar4;
    uint uVar5;
    uint uVar6;
    uint *puVar7;
    char *pcVar8;
    char *pcVar9;
    uint *puVar10;
    undefined_8 local_140[12];
    undefined_8 local_134[8];
    undefined_8 local_12c[12];
    uint local_120;
    char local_114[276];

    BVar2 = FindNextFileA(param_1, (LPWIN32_FIND_DATAA)local_140);
    if (BVar2 == 0)
    {
        DVar3 = GetLastError();
        switch (DVar3)
        {
        case 2:
        case 3:
        case 0x12:
            puVar4 = (undefined_32 *)__errno();
            *puVar4 = 2;
            return -1;
        default:
            puVar4 = (undefined_32 *)__errno();
            *puVar4 = 0x16;
            return -1;
        case 8:
            puVar4 = (undefined_32 *)__errno();
            *puVar4 = 0xc;
            return -1;
        }
    }
    *param_2 = -(uint)(local_140._0_4_ != 0x80) & local_140._0_4_;
    uVar5 = __timet_from_ft(local_140 + 4);
    param_2[1] = uVar5;
    uVar5 = __timet_from_ft(local_134);
    param_2[2] = uVar5;
    uVar5 = __timet_from_ft(local_12c);
    param_2[3] = uVar5;
    uVar5 = -1;
    pcVar8 = local_114;
    do
    {
        pcVar9 = pcVar8;
        if (uVar5 == 0)
            break;
        uVar5 = uVar5 - 1;
        pcVar9 = pcVar8 + 1;
        cVar1 = *pcVar8;
        pcVar8 = pcVar9;
    } while (cVar1 != '\0');
    uVar5 = ~uVar5;
    param_2[4] = local_120;
    puVar7 = (uint *)(pcVar9 + -uVar5);
    puVar10 = param_2 + 5;
    QMEMCPY(uVar6, puVar7, puVar10, uVar5 >> 2)
    for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
    {
        *(undefined_8 *)puVar10 = *(undefined_8 *)puVar7;
        puVar7 = (uint *)((int)puVar7 + 1);
        puVar10 = (uint *)((int)puVar10 + 1);
    }
    return 0;
}

undefined_32 FUN_004a0ec0(HANDLE param_1)

{
    BOOL BVar1;
    undefined_32 *puVar2;

    BVar1 = FindClose(param_1);
    if (BVar1 == 0)
    {
        puVar2 = (undefined_32 *)__errno();
        *puVar2 = 0x16;
        return -1;
    }
    return 0;
}

// static import 004a0ef0
undefined_32 __timet_from_ft(FILETIME *param_1)

{
    BOOL BVar1;
    undefined_32 uVar2;
    _FILETIME local_18;
    _SYSTEMTIME local_10;

    if ((param_1->dwLowDateTime != 0) || (param_1->dwHighDateTime != 0))
    {
        BVar1 = FileTimeToLocalFileTime(param_1, &local_18);
        if (BVar1 != 0)
        {
            BVar1 = FileTimeToSystemTime(&local_18, &local_10);
            if (BVar1 != 0)
            {
                uVar2 = ___loctotime_t(local_10.wYear, local_10.wMonth, local_10.wDay, local_10.wHour, local_10.wMinute,
                                       local_10.wSecond, -1);
                return uVar2;
            }
        }
    }
    return -1;
}

// Library Function - Single Match
//  _strrchr
//
// Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release

// ----- (004A0F80) --------------------------------------------------------
char *__cdecl _strrchr(char *_Str, int _Ch)

{
    char cVar1;
    int iVar2;
    char *pcVar3;
    char *pcVar4;

    iVar2 = -1;
    do
    {
        pcVar4 = _Str;
        if (iVar2 == 0)
            break;
        iVar2 = iVar2 + -1;
        pcVar4 = _Str + 1;
        cVar1 = *_Str;
        _Str = pcVar4;
    } while (cVar1 != '\0');
    iVar2 = -(iVar2 + 1);
    pcVar4 = pcVar4 + -1;
    do
    {
        pcVar3 = pcVar4;
        if (iVar2 == 0)
            break;
        iVar2 = iVar2 + -1;
        pcVar3 = pcVar4 + -1;
        cVar1 = *pcVar4;
        pcVar4 = pcVar3;
    } while ((char)_Ch != cVar1);
    pcVar3 = pcVar3 + 1;
    if (*pcVar3 != (char)_Ch)
    {
        pcVar3 = NULL;
    }
    return pcVar3;
}

// Library Function - Single Match
//  _strncat
//
// Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release

// 004A0FB0
char *__cdecl _strncat(char *_Dest, char *_Source, size_t _Count)

{
    byte bVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    uint *puVar5;
    uint *puVar6;

    if (_Count != 0)
    {
        uVar4 = (uint)_Dest & 3;
        puVar5 = (uint *)_Dest;
        while (uVar4 != 0)
        {
            bVar1 = *(byte *)puVar5;
            puVar5 = (uint *)((int)puVar5 + 1);
            if (bVar1 == 0)
                goto LAB_004a100b;
            uVar4 = (uint)puVar5 & 3;
        }
        do
        {
            do
            {
                puVar6 = puVar5;
                puVar5 = puVar6 + 1;
            } while (((*puVar6 ^ -1 ^ *puVar6 + 0x7efefeff) & 0x81010100) == 0);
            uVar4 = *puVar6;
            if ((char)uVar4 == '\0')
                goto LAB_004a101b;
            if ((char)(uVar4 >> 8) == '\0')
            {
                puVar6 = (uint *)((int)puVar6 + 1);
                goto LAB_004a101b;
            }
            if ((uVar4 & 0xff0000) == 0)
            {
                puVar6 = (uint *)((int)puVar6 + 2);
                goto LAB_004a101b;
            }
        } while ((uVar4 & 0xff000000) != 0);
    LAB_004a100b:
        puVar6 = (uint *)((int)puVar5 + -1);
    LAB_004a101b:
        if (((uint)_Source & 3) == 0)
        {
            uVar3 = _Count >> 2;
        }
        else
        {
            do
            {
                bVar1 = *_Source;
                uVar4 = (uint)bVar1;
                _Source = (char *)((int)_Source + 1);
                if (bVar1 == 0)
                    goto LAB_004a106a;
                *(byte *)puVar6 = bVar1;
                puVar6 = (uint *)((int)puVar6 + 1);
                _Count = _Count - 1;
                if (_Count == 0)
                    goto LAB_004a1060;
            } while (((uint)_Source & 3) != 0);
            uVar3 = _Count >> 2;
        }
        for (; uVar3 != 0; uVar3 = uVar3 - 1)
        {
            uVar2 = *(uint *)_Source;
            uVar4 = *(uint *)_Source;
            _Source = (char *)((int)_Source + 4);
            if (((uVar2 ^ -1 ^ uVar2 + 0x7efefeff) & 0x81010100) != 0)
            {
                if ((char)uVar4 == '\0')
                {
                LAB_004a106a:
                    *(byte *)puVar6 = (byte)uVar4;
                    return _Dest;
                }
                if ((char)(uVar4 >> 8) == '\0')
                {
                    *(short *)puVar6 = (short)uVar4;
                    return _Dest;
                }
                if ((uVar4 & 0xff0000) == 0)
                {
                    *(short *)puVar6 = (short)uVar4;
                    *(byte *)((int)puVar6 + 2) = 0;
                    return _Dest;
                }
                if ((uVar4 & 0xff000000) == 0)
                {
                    *puVar6 = uVar4;
                    return _Dest;
                }
            }
            *puVar6 = uVar4;
            puVar6 = puVar6 + 1;
        }
        for (_Count = _Count & 3; _Count != 0; _Count = _Count - 1)
        {
            bVar1 = *_Source;
            _Source = (char *)((int)_Source + 1);
            *(byte *)puVar6 = bVar1;
            puVar6 = (uint *)((int)puVar6 + 1);
            if (bVar1 == 0)
            {
                return _Dest;
            }
        }
    LAB_004a1060:
        *(byte *)puVar6 = (byte)_Count;
    }
    return _Dest;
}

// static import 004A10E0
undefined_32 __vsnprintf(undefined_8 *param_1, int param_2, undefined_32 param_3, undefined_32 param_4)

{
    undefined_32 uVar1;
    undefined_8 *local_20;
    int local_1c;
    undefined_8 *local_18;
    undefined_32 local_14;

    local_18 = param_1;
    local_20 = param_1;
    local_1c = param_2;
    local_14 = 0x42;
    uVar1 = __output(&local_20, param_3, param_4);
    local_1c = local_1c + -1;
    if (-1 < local_1c)
    {
        *local_20 = 0;
        return uVar1;
    }
    __flsbuf(0, &local_20);
    return uVar1;
}

// static import 004A1150
int _wcslen(short *param_1)

{
    short sVar1;
    short *psVar2;

    sVar1 = *param_1;
    psVar2 = param_1 + 1;
    while (sVar1 != 0)
    {
        sVar1 = *psVar2;
        psVar2 = psVar2 + 1;
    }
    return ((int)psVar2 - (int)param_1 >> 1) + -1;
}

// static import __snwprintf
undefined_32 __snwprintf(undefined_8 *param_1, int param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    undefined_8 *local_20;
    int local_1c;
    undefined_8 *local_18;
    undefined_32 local_14;

    local_18 = param_1;
    local_20 = param_1;
    local_14 = 0x42;
    local_1c = param_2 * 2;
    uVar1 = __woutput(&local_20, param_3, &stack0x00000010);
    local_1c = local_1c + -1;
    if (local_1c < 0)
    {
        __flsbuf(0, &local_20);
    }
    else
    {
        *local_20 = 0;
        local_20 = local_20 + 1;
    }
    local_1c = local_1c + -1;
    if (-1 < local_1c)
    {
        *local_20 = 0;
        return uVar1;
    }
    __flsbuf(0, &local_20);
    return uVar1;
}

// static import 004a1210
uint _wcsrchr(short *param_1, short param_2)

{
    short sVar1;
    short *psVar2;

    sVar1 = *param_1;
    psVar2 = param_1 + 1;
    while (sVar1 != 0)
    {
        sVar1 = *psVar2;
        psVar2 = psVar2 + 1;
    }
    do
    {
        psVar2 = psVar2 + -1;
        if (psVar2 == param_1)
            break;
    } while (*psVar2 != param_2);
    return (uint)psVar2 & (*psVar2 != param_2) - 1;
}

// static import 004a1250
uint _wcstok(short *param_1, short *param_2)

{
    short sVar1;
    short *psVar2;
    int iVar3;
    short sVar4;
    short *psVar5;

    iVar3 = __getptd();
    if (param_1 == NULL)
    {
        param_1 = *(short **)(iVar3 + 0x1c);
    }
    sVar4 = *param_1;
    if (sVar4 != 0)
    {
        sVar1 = *param_2;
        psVar5 = param_2;
        do
        {
            while ((sVar1 != 0 && (sVar1 != sVar4)))
            {
                sVar1 = psVar5[1];
                psVar5 = psVar5 + 1;
            }
            if (*psVar5 == 0)
                break;
            sVar4 = param_1[1];
            param_1 = param_1 + 1;
            sVar1 = *param_2;
            psVar5 = param_2;
        } while (sVar4 != 0);
    }
    sVar4 = *param_1;
    psVar5 = param_1;
    if (sVar4 != 0)
    {
        sVar1 = *param_2;
        psVar2 = param_2;
        do
        {
            while ((sVar1 != 0 && (sVar1 != sVar4)))
            {
                sVar1 = psVar2[1];
                psVar2 = psVar2 + 1;
            }
            if (*psVar2 != 0)
            {
                *psVar5 = 0;
                psVar5 = psVar5 + 1;
                break;
            }
            sVar4 = psVar5[1];
            psVar5 = psVar5 + 1;
            sVar1 = *param_2;
            psVar2 = param_2;
        } while (sVar4 != 0);
    }
    *(short **)(iVar3 + 0x1c) = psVar5;
    return -(uint)(param_1 != psVar5) & (uint)param_1;
}

// Library Function - Single Match
//  _strpbrk
//
// Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release

// ----- (004A1300) --------------------------------------------------------
char *__cdecl _strpbrk(char *_Str, char *_Control)

{
    byte bVar1;
    char *pcVar2;
    byte *pbVar3;
    undefined_32 uStack_28;
    undefined_32 uStack_24;
    undefined_32 uStack_20;
    undefined_32 uStack_1c;
    undefined_32 uStack_18;
    undefined_32 uStack_14;
    undefined_32 uStack_10;
    undefined_32 uStack_c;

    uStack_c = 0;
    uStack_10 = 0;
    uStack_14 = 0;
    uStack_18 = 0;
    uStack_1c = 0;
    uStack_20 = 0;
    uStack_24 = 0;
    uStack_28 = 0;
    for (; bVar1 = *_Control, bVar1 != 0; _Control = (char *)((byte *)_Control + 1))
    {
        pbVar3 = (byte *)((int)&uStack_28 + ((int)(uint)bVar1 >> 3));
        *pbVar3 = *pbVar3 | '\x01' << (bVar1 & 7);
    }
    do
    {
        pbVar3 = (byte *)_Str;
        pcVar2 = (char *)(uint)*pbVar3;
        if (*pbVar3 == 0)
        {
            return pcVar2;
        }
        _Str = (char *)(pbVar3 + 1);
    } while ((*(byte *)((int)&uStack_28 + ((int)pcVar2 >> 3)) >> ((uint)pcVar2 & 7) & 1) == 0);
    return (char *)pbVar3;
}

// Library Function - Single Match
//  _strspn
//
// Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release

// ----- (004A1340) --------------------------------------------------------
size_t __cdecl _strspn(char *_Str, char *_Control)

{
    byte bVar1;
    byte *pbVar2;
    size_t sVar3;
    undefined_32 uStack_28;
    undefined_32 uStack_24;
    undefined_32 uStack_20;
    undefined_32 uStack_1c;
    undefined_32 uStack_18;
    undefined_32 uStack_14;
    undefined_32 uStack_10;
    undefined_32 uStack_c;

    uStack_c = 0;
    uStack_10 = 0;
    uStack_14 = 0;
    uStack_18 = 0;
    uStack_1c = 0;
    uStack_20 = 0;
    uStack_24 = 0;
    uStack_28 = 0;
    for (; bVar1 = *_Control, bVar1 != 0; _Control = (char *)((byte *)_Control + 1))
    {
        pbVar2 = (byte *)((int)&uStack_28 + ((int)(uint)bVar1 >> 3));
        *pbVar2 = *pbVar2 | '\x01' << (bVar1 & 7);
    }
    sVar3 = -1;
    do
    {
        sVar3 = sVar3 + 1;
        bVar1 = *_Str;
        if (bVar1 == 0)
        {
            return sVar3;
        }
        _Str = (char *)((byte *)_Str + 1);
    } while ((*(byte *)((int)&uStack_28 + ((int)(uint)bVar1 >> 3)) >> (bVar1 & 7) & 1) != 0);
    return sVar3;
}

// static import 004a1380
undefined_32 *_realloc(undefined_32 *param_1, uint param_2)

{
    undefined_32 *puVar1;
    byte *pbVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    undefined_32 *puVar6;
    undefined_32 *puVar7;
    undefined_32 local_8;
    undefined_32 local_4;

    if (param_1 == NULL)
    {
        puVar1 = (undefined_32 *)_malloc(param_2);
        return puVar1;
    }
    if (param_2 == 0)
    {
        _free(param_1);
        return NULL;
    }
    uVar4 = param_2;
    if (param_2 < 0xffffffe1)
    {
        if (param_2 == 0)
        {
            param_2 = 0x10;
            uVar4 = param_2;
        }
        else
        {
            param_2 = param_2 + 0xf & 0xfffffff0;
            uVar4 = param_2;
        }
    }
    do
    {
        puVar1 = NULL;
        if (uVar4 < 0xffffffe1)
        {
            __lock(9);
            pbVar2 = (byte *)___sbh_find_block(param_1, &local_4, &local_8);
            if (pbVar2 == NULL)
            {
                __unlock(9);
                puVar1 = (undefined_32 *)HeapReAlloc(DAT_00ecd604, 0, param_1, uVar4);
            }
            else
            {
                if (uVar4 < DAT_004d422c)
                {
                    iVar3 = ___sbh_resize_block(local_4, local_8, pbVar2, uVar4 >> 4);
                    puVar1 = param_1;
                    if (iVar3 != 0)
                        goto LAB_004a1485;
                    puVar1 = (undefined_32 *)___sbh_alloc_block(uVar4 >> 4);
                    if (puVar1 != NULL)
                    {
                        uVar5 = (uint)*pbVar2 << 4;
                        if (uVar4 <= (uint)*pbVar2 << 4)
                        {
                            uVar5 = uVar4;
                        }
                        puVar6 = param_1;
                        puVar7 = puVar1;
                        QMEMCPY(uVar4, puVar6, puVar7, uVar5 >> 2)
                        for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                        {
                            *(undefined_8 *)puVar7 = *(undefined_8 *)puVar6;
                            puVar6 = (undefined_32 *)((int)puVar6 + 1);
                            puVar7 = (undefined_32 *)((int)puVar7 + 1);
                        }
                        ___sbh_free_block(local_4, local_8, pbVar2);
                        uVar4 = param_2;
                        goto LAB_004a1485;
                    }
                LAB_004a1489:
                    puVar1 = (undefined_32 *)HeapAlloc(DAT_00ecd604, 0, uVar4);
                    if (puVar1 != NULL)
                    {
                        uVar5 = (uint)*pbVar2 << 4;
                        if (uVar4 <= (uint)*pbVar2 << 4)
                        {
                            uVar5 = uVar4;
                        }
                        puVar6 = param_1;
                        puVar7 = puVar1;
                        QMEMCPY(uVar4, puVar6, puVar7, uVar5 >> 2)
                        for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
                        {
                            *(undefined_8 *)puVar7 = *(undefined_8 *)puVar6;
                            puVar6 = (undefined_32 *)((int)puVar6 + 1);
                            puVar7 = (undefined_32 *)((int)puVar7 + 1);
                        }
                        ___sbh_free_block(local_4, local_8, pbVar2);
                        uVar4 = param_2;
                    }
                }
                else
                {
                LAB_004a1485:
                    if (puVar1 == NULL)
                        goto LAB_004a1489;
                }
                __unlock(9);
            }
        }
        if ((puVar1 != NULL) || (DAT_00dfab64 == 0))
        {
            return puVar1;
        }
        iVar3 = ___callnewh(uVar4);
        if (iVar3 == 0)
        {
            return NULL;
        }
    } while (true);
}

// static import 004a1530
char *_fgets(char *param_1, int param_2, byte **param_3)

{
    byte *pbVar1;
    uint uVar2;
    char *pcVar3;

    if (param_2 < 1)
    {
        return NULL;
    }
    _lock_file(param_3);
    param_2 = param_2 + -1;
    pcVar3 = param_1;
    if (param_2 != 0)
    {
        while (true)
        {
            pbVar1 = param_3[1];
            param_3[1] = pbVar1 + -1;
            if ((int)(pbVar1 + -1) < 0)
            {
                uVar2 = __filbuf(param_3);
            }
            else
            {
                uVar2 = (uint) * *param_3;
                *param_3 = *param_3 + 1;
            }
            if (uVar2 == -1)
                break;
            *pcVar3 = (char)uVar2;
            pcVar3 = pcVar3 + 1;
            if (((char)uVar2 == '\n') || (param_2 = param_2 + -1, param_2 == 0))
                goto LAB_004a1588;
        }
        if (pcVar3 == param_1)
        {
            _unlock_file(param_3);
            return NULL;
        }
    }
LAB_004a1588:
    *pcVar3 = '\0';
    _unlock_file(param_3);
    return param_1;
}

// static import 004a15c0
short *_fgetws(short *param_1, int param_2, undefined_32 param_3)

{
    short sVar1;
    short *psVar2;

    if (param_2 < 1)
    {
        return NULL;
    }
    _lock_file(param_3);
    param_2 = param_2 + -1;
    psVar2 = param_1;
    if (param_2 != 0)
    {
        while (true)
        {
            sVar1 = _getwc_lk(param_3);
            if (sVar1 == -1)
                break;
            *psVar2 = sVar1;
            psVar2 = psVar2 + 1;
            if ((sVar1 == 10) || (param_2 = param_2 + -1, param_2 == 0))
                goto LAB_004a1610;
        }
        if (psVar2 == param_1)
        {
            _unlock_file(param_3);
            return NULL;
        }
    }
LAB_004a1610:
    *psVar2 = 0;
    _unlock_file(param_3);
    return param_1;
}

// static import 004a1640
void __mtinitlocks(void)

{
    InitializeCriticalSection((LPCRITICAL_SECTION)PTR_DAT_004d2004);
    InitializeCriticalSection((LPCRITICAL_SECTION)PTR_DAT_004d1ff4);
    InitializeCriticalSection((LPCRITICAL_SECTION)PTR_DAT_004d1fe4);
    InitializeCriticalSection((LPCRITICAL_SECTION)PTR_DAT_004d1fc4);
    return;
}

// static import 004a1670
void __lock(int param_1)

{
    LPCRITICAL_SECTION lpCriticalSection;

    if (*(int *)(&DAT_004d1fc0 + param_1 * 4) == 0)
    {
        lpCriticalSection = (LPCRITICAL_SECTION)_malloc(0x18);
        if (lpCriticalSection == (LPCRITICAL_SECTION)0x0)
        {
            __amsg_exit(0x11);
        }
        __lock(0x11);
        if (*(int *)(&DAT_004d1fc0 + param_1 * 4) == 0)
        {
            InitializeCriticalSection(lpCriticalSection);
            *(LPCRITICAL_SECTION *)(&DAT_004d1fc0 + param_1 * 4) = lpCriticalSection;
        }
        else
        {
            _free();
        }
        __unlock(0x11);
    }
    EnterCriticalSection(*(LPCRITICAL_SECTION *)(&DAT_004d1fc0 + param_1 * 4));
    return;
}

// static import 004a16f0
void __unlock(int param_1)

{
    LeaveCriticalSection(*(LPCRITICAL_SECTION *)(&DAT_004d1fc0 + param_1 * 4));
    return;
}

// static import 004a1710
void _lock_file(uint param_1)

{
    if ((0x4d45f7 < param_1) && (param_1 < 0x4d4859))
    {
        __lock(((int)(param_1 - 0x4d45f8) >> 5) + 0x1c);
        return;
    }
    EnterCriticalSection((LPCRITICAL_SECTION)(param_1 + 0x20));
    return;
}

// static import 004a1750
void __lock_file2(int param_1, int param_2)

{
    if (param_1 < 0x14)
    {
        __lock(param_1 + 0x1c);
        return;
    }
    EnterCriticalSection((LPCRITICAL_SECTION)(param_2 + 0x20));
    return;
}

// 004A1780
void _unlock_file(uint param_1)

{
    if ((0x4d45f7 < param_1) && (param_1 < 0x4d4859))
    {
        __unlock(((int)(param_1 - 0x4d45f8) >> 5) + 0x1c);
        return;
    }
    LeaveCriticalSection((LPCRITICAL_SECTION)(param_1 + 0x20));
    return;
}

// static import 004a17c0
void __unlock_file2(int param_1, int param_2)

{
    if (param_1 < 0x14)
    {
        __unlock(param_1 + 0x1c);
        return;
    }
    LeaveCriticalSection((LPCRITICAL_SECTION)(param_2 + 0x20));
    return;
}

// static import 004a17f0
uint __flsbuf(uint param_1, int *param_2)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    int *piVar4;
    int iVar5;
    undefined_8 *puVar6;
    int iVar7;

    piVar4 = param_2;
    uVar1 = param_2[3];
    uVar2 = param_2[4];
    if (((uVar1 & 0x82) == 0) || ((uVar1 & 0x40) != 0))
    {
    LAB_004a1913:
        param_2[3] = uVar1 | 0x20;
        return -1;
    }
    iVar7 = 0;
    if ((uVar1 & 1) != 0)
    {
        param_2[1] = 0;
        if ((uVar1 & 0x10) == 0)
            goto LAB_004a1913;
        *param_2 = param_2[2];
        param_2[3] = uVar1 & 0xfffffffe;
    }
    uVar1 = param_2[3];
    param_2[1] = 0;
    param_2[3] = uVar1 & 0xffffffef | 2;
    if ((uVar1 & 0x10c) == 0)
    {
        if ((param_2 == (int *)&DAT_004d4618) || (param_2 == (int *)&DAT_004d4638))
        {
            iVar5 = __isatty(uVar2);
            if (iVar5 != 0)
                goto LAB_004a1863;
        }
        __getbuf(piVar4);
    }
LAB_004a1863:
    if ((piVar4[3] & 0x108U) == 0)
    {
        iVar5 = 1;
        iVar7 = __write(uVar2, &param_1, 1);
    }
    else
    {
        iVar3 = piVar4[2];
        iVar5 = *piVar4 - iVar3;
        *piVar4 = iVar3 + 1;
        piVar4[1] = piVar4[6] + -1;
        if (iVar5 < 1)
        {
            if (uVar2 == -1)
            {
                puVar6 = &DAT_004d43a0;
            }
            else
            {
                puVar6 = (undefined_8 *)((&DAT_00ecd500)[(int)uVar2 >> 5] + (uVar2 & 0x1f) * 0x24);
            }
            if ((puVar6[4] & 0x20) != 0)
            {
                __lseek(uVar2, 0, 2);
            }
            *(undefined_8 *)piVar4[2] = (undefined_8)param_1;
        }
        else
        {
            iVar7 = __write(uVar2, iVar3, iVar5);
            *(undefined_8 *)piVar4[2] = (undefined_8)param_1;
        }
    }
    if (iVar7 != iVar5)
    {
        piVar4[3] = piVar4[3] | 0x20;
        return -1;
    }
    return param_1 & 0xff;
}

// WARNING: Could not reconcile some variable overlaps

// static import 004a1920
int __output(undefined_32 param_1, byte *param_2, undefined_32 *param_3)

{
    char cVar1;
    short sVar2;
    uint uVar3;
    undefined_32 uVar4;
    short *psVar5;
    int *piVar6;
    ushort *puVar7;
    int iVar8;
    byte bVar9;
    undefined_8 *puVar10;
    undefined_8 *puVar11;
    char *pcVar12;
    int iVar13;
    ulonglong uVar14;
    ulonglong uVar15;
    uint local_24c;
    ushort *local_248;
    int local_244;
    int local_240;
    undefined_8 local_23a;
    char local_239;
    int local_238;
    int local_234;
    uint local_230;
    int local_22c;
    int local_228;
    int local_224;
    int local_220;
    uint local_21c;
    undefined_32 local_218;
    undefined_8 local_214[4];
    undefined_32 local_210;
    undefined_32 local_20c;
    int local_204;
    undefined_8 local_200[511];
    undefined_8 local_1;

    local_220 = 0;
    puVar11 = NULL;
    local_240 = 0;
    bVar9 = *param_2;
    param_2 = param_2 + 1;
    local_21c = local_21c & 0xffffff00 | (uint)bVar9;
    do
    {
        if ((bVar9 == 0) || (local_240 < 0))
        {
            return local_240;
        }
        if (((char)bVar9 < ' ') || ('x' < (char)bVar9))
        {
            uVar3 = 0;
        }
        else
        {
            uVar3 = (byte)(&DAT_004af9b8)[(char)bVar9] & 0xf;
        }
        local_220 = (int)(char)(&DAT_004af9d8)[uVar3 * 8 + local_220] >> 4;
        switch (local_220)
        {
        case 0:
        switchD_004a199d_caseD_0:
            local_230 = 0;
            if ((PTR_DAT_004d1d90[(local_21c & 0xff) * 2 + 1] & 0x80) != 0)
            {
                _write_char((int)(char)bVar9, param_1, &local_240);
                bVar9 = *param_2;
                param_2 = param_2 + 1;
            }
            _write_char((int)(char)bVar9, param_1, &local_240);
            break;
        case 1:
            local_218 = 0;
            local_228 = 0;
            local_234 = 0;
            local_238 = 0;
            local_24c = 0;
            local_244 = -1;
            local_230 = 0;
            break;
        case 2:
            switch (bVar9)
            {
            case 0x20:
                local_24c = local_24c | 2;
                break;
            case 0x23:
                local_24c = local_24c | 0x80;
                break;
            case 0x2b:
                local_24c = local_24c | 1;
                break;
            case 0x2d:
                local_24c = local_24c | 4;
                break;
            case 0x30:
                local_24c = local_24c | 8;
            }
            break;
        case 3:
            if (bVar9 == 0x2a)
            {
                local_234 = _get_int_arg(&param_3);
                if (local_234 < 0)
                {
                    local_24c = local_24c | 4;
                    local_234 = -local_234;
                }
            }
            else
            {
                local_234 = (char)bVar9 + -0x30 + local_234 * 10;
            }
            break;
        case 4:
            local_244 = 0;
            break;
        case 5:
            if (bVar9 == 0x2a)
            {
                local_244 = _get_int_arg(&param_3);
                if (local_244 < 0)
                {
                    local_244 = -1;
                }
            }
            else
            {
                local_244 = (char)bVar9 + -0x30 + local_244 * 10;
            }
            break;
        case 6:
            switch (bVar9)
            {
            case 0x49:
                if ((*param_2 != 0x36) || (param_2[1] != 0x34))
                {
                    local_220 = 0;
                    goto switchD_004a199d_caseD_0;
                }
                param_2 = param_2 + 2;
                local_24c = local_24c | 0x8000;
                break;
            case 0x68:
                local_24c = local_24c | 0x20;
                break;
            case 0x6c:
                local_24c = local_24c | 0x10;
                break;
            case 0x77:
                local_24c = local_24c | 0x800;
            }
            break;
        case 7:
            switch (bVar9)
            {
            case 0x43:
                if ((local_24c & 0x830) == 0)
                {
                    local_24c = local_24c | 0x800;
                }
            case 99:
                if ((local_24c & 0x810) == 0)
                {
                    local_200[0] = _get_int_arg(&param_3);
                    puVar11 = (undefined_8 *)0x1;
                }
                else
                {
                    uVar4 = _get_short_arg(&param_3);
                    puVar11 = (undefined_8 *)_wctomb(local_200, uVar4);
                    if ((int)puVar11 < 0)
                    {
                        local_248 = (ushort *)local_200;
                        local_228 = 1;
                        break;
                    }
                }
                local_248 = (ushort *)local_200;
                break;
            case 0x45:
            case 0x47:
                local_218 = 1;
                bVar9 = bVar9 + 0x20;
            case 0x65:
            case 0x66:
            case 0x67:
                local_248 = (ushort *)local_200;
                if (local_244 < 0)
                {
                    local_244 = 6;
                }
                else if ((local_244 == 0) && (bVar9 == 0x67))
                {
                    local_244 = 1;
                }
                local_210 = *param_3;
                local_20c = param_3[1];
                param_3 = param_3 + 2;
                (*(code *)PTR_FUN_004d2088)(&local_210, local_200, (int)(char)bVar9, local_244, local_218);
                if (((local_24c & 0x80) != 0) && (local_244 == 0))
                {
                    (*(code *)PTR_FUN_004d2094)(local_200);
                }
                if ((bVar9 == 0x67) && ((local_24c & 0x80) == 0))
                {
                    (*(code *)PTR_FUN_004d208c)(local_200);
                }
                uVar3 = local_24c | 0x40;
                if (local_200[0] == '-')
                {
                    local_248 = (ushort *)(local_200 + 1);
                    uVar3 = local_24c | 0x140;
                }
                local_24c = uVar3;
                uVar3 = -1;
                puVar7 = local_248;
                do
                {
                    if (uVar3 == 0)
                        break;
                    uVar3 = uVar3 - 1;
                    cVar1 = *(char *)puVar7;
                    puVar7 = (ushort *)((int)puVar7 + 1);
                } while (cVar1 != '\0');
                puVar11 = (undefined_8 *)(~uVar3 - 1);
                break;
            case 0x53:
                if ((local_24c & 0x830) == 0)
                {
                    local_24c = local_24c | 0x800;
                }
            case 0x73:
                iVar13 = 0x7fffffff;
                if (local_244 != -1)
                {
                    iVar13 = local_244;
                }
                local_248 = (ushort *)_get_int_arg(&param_3);
                if ((local_24c & 0x810) == 0)
                {
                    puVar7 = local_248;
                    if (local_248 == NULL)
                    {
                        puVar7 = (ushort *)PTR_DAT_004d2080;
                        local_248 = (ushort *)PTR_DAT_004d2080;
                    }
                    for (; (iVar13 != 0 && (iVar13 = iVar13 + -1, *(char *)puVar7 != '\0'));
                         puVar7 = (ushort *)((int)puVar7 + 1))
                    {}
                    puVar11 = (undefined_8 *)((int)puVar7 - (int)local_248);
                }
                else
                {
                    if (local_248 == NULL)
                    {
                        local_248 = (ushort *)PTR_DAT_004d2084;
                    }
                    local_230 = 1;
                    for (puVar7 = local_248; (iVar13 != 0 && (iVar13 = iVar13 + -1, *puVar7 != 0)); puVar7 = puVar7 + 1)
                    {}
                    puVar11 = (undefined_8 *)((int)puVar7 - (int)local_248 >> 1);
                }
                break;
            case 0x58:
                goto switchD_004a1bb1_caseD_58;
            case 0x5a:
                psVar5 = (short *)_get_int_arg(&param_3);
                if ((psVar5 == NULL) || (local_248 = *(ushort **)(psVar5 + 2), local_248 == NULL))
                {
                    uVar3 = -1;
                    local_248 = (ushort *)PTR_DAT_004d2080;
                    pcVar12 = PTR_DAT_004d2080;
                    do
                    {
                        if (uVar3 == 0)
                            break;
                        uVar3 = uVar3 - 1;
                        cVar1 = *pcVar12;
                        pcVar12 = pcVar12 + 1;
                    } while (cVar1 != '\0');
                    puVar11 = (undefined_8 *)(~uVar3 - 1);
                }
                else if ((local_24c & 0x800) == 0)
                {
                    puVar11 = (undefined_8 *)(int)*psVar5;
                    local_230 = 0;
                }
                else
                {
                    local_230 = 1;
                    puVar11 = (undefined_8 *)((uint)(int)*psVar5 >> 1);
                }
                break;
            case 100:
            case 0x69:
                local_22c = 10;
                local_24c = local_24c | 0x40;
                goto LAB_004a1ee7;
            case 0x6e:
                piVar6 = (int *)_get_int_arg(&param_3);
                if ((local_24c & 0x20) == 0)
                {
                    local_228 = 1;
                    *piVar6 = local_240;
                }
                else
                {
                    local_228 = 1;
                    *(undefined_16 *)piVar6 = (undefined_16)local_240;
                }
                break;
            case 0x6f:
                local_22c = 8;
                if ((local_24c & 0x80) != 0)
                {
                    local_24c = local_24c | 0x200;
                }
                goto LAB_004a1ee7;
            case 0x70:
                local_244 = 8;
            switchD_004a1bb1_caseD_58:
                local_224 = 7;
            LAB_004a1ea2:
                local_22c = 0x10;
                if ((local_24c & 0x80) != 0)
                {
                    local_23a = 0x30;
                    local_239 = (char)local_224 + 'Q';
                    local_238 = 2;
                }
                goto LAB_004a1ee7;
            case 0x75:
                local_22c = 10;
            LAB_004a1ee7:
                if ((local_24c & 0x8000) == 0)
                {
                    if ((local_24c & 0x20) == 0)
                    {
                        if ((local_24c & 0x40) == 0)
                        {
                            uVar3 = _get_int_arg(&param_3);
                            uVar14 = (ulonglong)uVar3;
                        }
                        else
                        {
                            iVar13 = _get_int_arg(&param_3);
                            uVar14 = (ulonglong)iVar13;
                        }
                    }
                    else if ((local_24c & 0x40) == 0)
                    {
                        uVar3 = _get_int_arg(&param_3);
                        uVar14 = (ulonglong)(uVar3 & 0xffff);
                    }
                    else
                    {
                        sVar2 = _get_int_arg(&param_3);
                        uVar14 = (ulonglong)(int)sVar2;
                    }
                }
                else
                {
                    uVar14 = _get_int64_arg(&param_3);
                }
                if ((((local_24c & 0x40) != 0) && ((longlong)uVar14 < 0x100000000)) && ((longlong)uVar14 < 0))
                {
                    uVar14 = CONCAT44(-((int)(uVar14 >> 0x20) + (uint)((int)uVar14 != 0)), -(int)uVar14);
                    local_24c = local_24c | 0x100;
                }
                uVar3 = (uint)(uVar14 >> 0x20);
                if ((local_24c & 0x8000) == 0)
                {
                    uVar3 = 0;
                }
                uVar15 = uVar14 & -1 | (ulonglong)uVar3 << 0x20;
                if (local_244 < 0)
                {
                    local_244 = 1;
                }
                else
                {
                    local_24c = local_24c & 0xfffffff7;
                }
                if (((uint)uVar14 | uVar3) == 0)
                {
                    local_238 = 0;
                }
                puVar7 = (ushort *)&local_1;
                iVar13 = local_244;
                while ((iVar8 = local_22c, local_244 = iVar13 + -1, 0 < iVar13 || (uVar15 != 0)))
                {
                    local_204 = local_22c >> 0x1f;
                    iVar13 = __aullrem(uVar15, local_22c, local_204);
                    iVar13 = iVar13 + 0x30;
                    uVar15 = __aulldiv(uVar15, iVar8, local_204);
                    if (0x39 < iVar13)
                    {
                        iVar13 = iVar13 + local_224;
                    }
                    *(char *)puVar7 = (char)iVar13;
                    puVar7 = (ushort *)((int)puVar7 + -1);
                    iVar13 = local_244;
                }
                puVar11 = &local_1 + -(int)puVar7;
                local_248 = (ushort *)((int)puVar7 + 1);
                if (((local_24c & 0x200) != 0) && ((*(char *)local_248 != '0' || (puVar11 == NULL))))
                {
                    puVar11 = &stack0x00000000 + -(int)puVar7;
                    *(char *)puVar7 = '0';
                    local_248 = puVar7;
                }
                break;
            case 0x78:
                local_224 = 0x27;
                goto LAB_004a1ea2;
            }
            if (local_228 == 0)
            {
                if ((local_24c & 0x40) != 0)
                {
                    if ((local_24c & 0x100) == 0)
                    {
                        if ((local_24c & 1) == 0)
                        {
                            if ((local_24c & 2) == 0)
                                goto LAB_004a207f;
                            local_23a = 0x20;
                        }
                        else
                        {
                            local_23a = 0x2b;
                        }
                    }
                    else
                    {
                        local_23a = 0x2d;
                    }
                    local_238 = 1;
                }
            LAB_004a207f:
                iVar13 = (local_234 - (int)puVar11) - local_238;
                if ((local_24c & 0xc) == 0)
                {
                    _write_multi_char(0x20, iVar13, param_1, &local_240);
                }
                _write_string(&local_23a, local_238, param_1, &local_240);
                if (((local_24c & 8) != 0) && ((local_24c & 4) == 0))
                {
                    _write_multi_char(0x30, iVar13, param_1, &local_240);
                }
                if ((local_230 == 0) || (uVar3 = local_230, puVar7 = local_248, puVar10 = puVar11, (int)puVar11 < 1))
                {
                    _write_string(local_248, puVar11, param_1, &local_240);
                }
                else
                {
                    do
                    {
                        puVar10 = puVar10 + -1;
                        iVar8 = _wctomb(local_214, uVar3 & 0xffff0000 | (uint)*puVar7);
                        if (iVar8 < 1)
                            break;
                        uVar3 = _write_string(local_214, iVar8, param_1, &local_240);
                        puVar7 = puVar7 + 1;
                    } while (puVar10 != NULL);
                }
                if ((local_24c & 4) != 0)
                {
                    _write_multi_char(0x20, iVar13, param_1, &local_240);
                }
            }
        }
        bVar9 = *param_2;
        param_2 = param_2 + 1;
        local_21c = local_21c & 0xffffff00 | (uint)bVar9;
    } while (true);
}

// static import 004a22b0
void _write_char(uint param_1, int *param_2, int *param_3)

{
    int iVar1;

    iVar1 = param_2[1];
    param_2[1] = iVar1 + -1;
    if (iVar1 + -1 < 0)
    {
        param_1 = __flsbuf(param_1, param_2);
    }
    else
    {
        *(char *)*param_2 = (char)param_1;
        param_1 = param_1 & 0xff;
        *param_2 = *param_2 + 1;
    }
    if (param_1 == -1)
    {
        *param_3 = -1;
        return;
    }
    *param_3 = *param_3 + 1;
    return;
}

// static import 004a2300
void _write_multi_char(undefined_32 param_1, int param_2, undefined_32 param_3, int *param_4)

{
    if (0 < param_2)
    {
        do
        {
            param_2 = param_2 + -1;
            _write_char(param_1, param_3, param_4);
            if (*param_4 == -1)
            {
                return;
            }
        } while (0 < param_2);
    }
    return;
}

// static import 004a2340
void _write_string(char *param_1, int param_2, undefined_32 param_3, int *param_4)

{
    char cVar1;

    if (0 < param_2)
    {
        do
        {
            param_2 = param_2 + -1;
            cVar1 = *param_1;
            param_1 = param_1 + 1;
            _write_char((int)cVar1, param_3, param_4);
            if (*param_4 == -1)
            {
                return;
            }
        } while (0 < param_2);
    }
    return;
}

// static import 004a2380
uint _get_short_arg(ushort **param_1)

{
    ushort *puVar1;
    ushort *puVar2;

    puVar1 = *param_1;
    puVar2 = puVar1 + 2;
    *param_1 = puVar2;
    return (uint)puVar2 & 0xffff0000 | (uint)*puVar1;
}

// Library Function - Single Match
//  __setdefaultprecision
//
// Library: Visual Studio 1998 Release

// ----- (004A23A0) --------------------------------------------------------
void __setdefaultprecision(void)

{
    __controlfp(0x10000, 0x30000);
    return;
}

// WARNING: Removing unreachable block (ram,0x004a2401)

// static import 004a23c0
undefined_32 __ms_p5_test_fdiv(void)

{
    return 0;
}

// static import 004a2410
void __ms_p5_mp_test_fdiv(void)

{
    HMODULE hModule;
    FARPROC pFVar1;

    hModule = GetModuleHandleA("KERNEL32");
    if (hModule != (HMODULE)0x0)
    {
        pFVar1 = GetProcAddress(hModule, "IsProcessorFeaturePresent");
        if (pFVar1 != (FARPROC)0x0)
        {
            (*pFVar1)(0);
            return;
        }
    }
    __ms_p5_test_fdiv();
    return;
}

// static import 004a2440
void __forcdecpt(char *param_1)

{
    char cVar1;
    char cVar2;
    int iVar3;
    uint uVar4;

    iVar3 = _tolower((int)*param_1);
    if (iVar3 != 0x65)
    {
        do
        {
            param_1 = param_1 + 1;
            if (DAT_004d1f9c < 2)
            {
                uVar4 = (byte)PTR_DAT_004d1d90[*param_1 * 2] & 4;
            }
            else
            {
                uVar4 = __isctype((int)*param_1, 4);
            }
        } while (uVar4 != 0);
    }
    cVar2 = *param_1;
    *param_1 = DAT_004d1fa0;
    do
    {
        param_1 = param_1 + 1;
        cVar1 = *param_1;
        *param_1 = cVar2;
        cVar2 = cVar1;
    } while (*param_1 != '\0');
    return;
}

// static import 004a2590
int __cftoe(undefined_32 *param_1, int param_2, int param_3, undefined_32 param_4)

{
    int local_28[4];
    undefined_8 local_18[24];

    __fltout2(*param_1, param_1[1], local_28, local_18);
    __fptostr((uint)(local_28[0] == 0x2d) + param_2 + (uint)(0 < param_3), param_3 + 1, local_28);
    __cftoe2(param_2, param_3, param_4, local_28, 0);
    return param_2;
}

// static import 004a2610
undefined_8 *__cftoe2(undefined_8 *param_1, int param_2, int param_3, int *param_4, char param_5)

{
    undefined_8 *puVar1;
    int iVar2;
    undefined_32 *puVar3;

    if (param_5 != '\0')
    {
        __shift(param_1 + (*param_4 == 0x2d), 0 < param_2);
    }
    puVar1 = param_1;
    if (*param_4 == 0x2d)
    {
        *param_1 = 0x2d;
        puVar1 = param_1 + 1;
    }
    if (0 < param_2)
    {
        *puVar1 = puVar1[1];
        puVar1 = puVar1 + 1;
        *puVar1 = DAT_004d1fa0;
    }
    puVar3 = (undefined_32 *)(puVar1 + param_2 + (uint)(param_5 == '\0'));
    *puVar3 = 0x30302b65;
    *(undefined_16 *)(puVar3 + 1) = 0x30;
    if (param_3 != 0)
    {
        *(undefined_8 *)puVar3 = 0x45;
    }
    if (*(char *)param_4[3] != '0')
    {
        iVar2 = param_4[1] + -1;
        if (iVar2 < 0)
        {
            iVar2 = -iVar2;
            *(undefined_8 *)((int)puVar3 + 1) = 0x2d;
        }
        if (99 < iVar2)
        {
            *(char *)((int)puVar3 + 2) = *(char *)((int)puVar3 + 2) + (char)(iVar2 / 100);
            iVar2 = iVar2 % 100;
        }
        if (9 < iVar2)
        {
            *(char *)((int)puVar3 + 3) = *(char *)((int)puVar3 + 3) + (char)(iVar2 / 10);
            iVar2 = iVar2 % 10;
        }
        *(char *)(puVar3 + 1) = *(char *)(puVar3 + 1) + (char)iVar2;
    }
    return param_1;
}

// static import 004a2710
int __cftof(undefined_32 *param_1, int param_2, int param_3)

{
    int local_28;
    int local_24;
    undefined_8 local_18[24];

    __fltout2(*param_1, param_1[1], &local_28, local_18);
    __fptostr((uint)(local_28 == 0x2d) + param_2, local_24 + param_3, &local_28);
    __cftof2(param_2, param_3, &local_28, 0);
    return param_2;
}

// static import 004a2780
undefined_8 *__cftof2(undefined_8 *param_1, uint param_2, int *param_3, char param_4)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    undefined_8 *puVar4;
    undefined_32 *puVar5;

    iVar1 = param_3[1];
    uVar3 = iVar1 - 1;
    if ((param_4 != '\0') && (iVar2 = *param_3, uVar3 == param_2))
    {
        param_1[uVar3 + (iVar2 == 0x2d)] = 0x30;
        param_1[iVar1 + (uint)(iVar2 == 0x2d)] = 0;
    }
    puVar4 = param_1;
    if (*param_3 == 0x2d)
    {
        *param_1 = 0x2d;
        puVar4 = param_1 + 1;
    }
    if (param_3[1] < 1)
    {
        __shift(puVar4, 1);
        *puVar4 = 0x30;
        puVar4 = puVar4 + 1;
    }
    else
    {
        puVar4 = puVar4 + param_3[1];
    }
    if (0 < (int)param_2)
    {
        __shift(puVar4, 1);
        *puVar4 = DAT_004d1fa0;
        iVar1 = param_3[1];
        if (iVar1 < 0)
        {
            if ((param_4 != '\0') || (SBORROW4(param_2, -iVar1) == (int)(param_2 + iVar1) < 0))
            {
                param_2 = -iVar1;
            }
            __shift(puVar4 + 1, param_2);
            puVar5 = (undefined_32 *)(puVar4 + 1);
            MEMSET(uVar3, puVar5, 0x30303030, param_2 >> 2)
            for (param_2 = param_2 & 3; param_2 != 0; param_2 = param_2 - 1)
            {
                *(undefined_8 *)puVar5 = 0x30;
                puVar5 = (undefined_32 *)((int)puVar5 + 1);
            }
        }
    }
    return param_1;
}

// unused
// static import 004a2840
void __cftog(undefined_32 *param_1, int param_2, int param_3, undefined_32 param_4)

{
    int iVar1;
    char cVar2;
    char *pcVar3;
    int local_28;
    int local_24;
    undefined_8 local_18[24];

    __fltout2(*param_1, param_1[1], &local_28, local_18);
    iVar1 = local_24 + -1;
    pcVar3 = (char *)((uint)(local_28 == 0x2d) + param_2);
    __fptostr(pcVar3, param_3, &local_28);
    local_24 = local_24 + -1;
    if ((-5 < local_24) && (local_24 < param_3))
    {
        if (iVar1 < local_24)
        {
            cVar2 = *pcVar3;
            while (cVar2 != '\0')
            {
                cVar2 = pcVar3[1];
                pcVar3 = pcVar3 + 1;
            }
            pcVar3[-1] = '\0';
        }
        __cftof2(param_2, param_3, &local_28, 1);
        return;
    }
    __cftoe2(param_2, param_3, param_4, &local_28, 1);
    return;
}

// static import 004a2970
void __shift(char *param_1, int param_2)

{
    char cVar1;
    uint uVar2;
    char *pcVar3;

    if (param_2 != 0)
    {
        uVar2 = -1;
        pcVar3 = param_1;
        do
        {
            if (uVar2 == 0)
                break;
            uVar2 = uVar2 - 1;
            cVar1 = *pcVar3;
            pcVar3 = pcVar3 + 1;
        } while (cVar1 != '\0');
        _memcpy(param_1 + param_2, param_1, ~uVar2);
    }
    return;
}

int FUN_004a29a0(LCID param_1, uint param_2, LPCSTR param_3, LPCWSTR param_4, LPWSTR param_5, int param_6, UINT param_7,
                 int param_8)

{
    int iVar1;
    int iVar2;
    LPCWSTR lpWideCharStr;

    if (DAT_00dfab5c == 0)
    {
        iVar1 = LCMapStringW(0, 0x100, L"", 1, (LPWSTR)0x0, 0);
        if (iVar1 == 0)
        {
            iVar1 = LCMapStringA(0, 0x100, "", 1, (LPSTR)0x0, 0);
            if (iVar1 == 0)
            {
                return 0;
            }
            DAT_00dfab5c = 2;
        }
        else
        {
            DAT_00dfab5c = 1;
        }
    }
    iVar1 = (int)param_4;
    if (0 < (int)param_4)
    {
        iVar1 = _strncnt(param_3, param_4);
    }
    if (DAT_00dfab5c == 2)
    {
        iVar1 = LCMapStringA(param_1, param_2, param_3, iVar1, (LPSTR)param_5, param_6);
        return iVar1;
    }
    if (DAT_00dfab5c != 1)
    {
        return DAT_00dfab5c;
    }
    param_4 = (LPCWSTR)0x0;
    if (param_7 == 0)
    {
        param_7 = DAT_00dfab48;
    }
    iVar2 = MultiByteToWideChar(param_7, (-(uint)(param_8 != 0) & 8) + 1, param_3, iVar1, (LPWSTR)0x0, 0);
    if (iVar2 == 0)
    {
        return 0;
    }
    lpWideCharStr = (LPCWSTR)_malloc(iVar2 * 2);
    if (lpWideCharStr == (LPCWSTR)0x0)
    {
        return 0;
    }
    iVar1 = MultiByteToWideChar(param_7, 1, param_3, iVar1, lpWideCharStr, iVar2);
    if ((iVar1 != 0) && (iVar1 = LCMapStringW(param_1, param_2, lpWideCharStr, iVar2, (LPWSTR)0x0, 0), iVar1 != 0))
    {
        if ((param_2 & 0x400) == 0)
        {
            param_4 = (LPCWSTR)_malloc(iVar1 * 2);
            if ((param_4 == (LPCWSTR)0x0)
                || (iVar2 = LCMapStringW(param_1, param_2, lpWideCharStr, iVar2, param_4, iVar1), iVar2 == 0))
                goto LAB_004a2ba8;
            if (param_6 == 0)
            {
                iVar1 = WideCharToMultiByte(param_7, 0x220, param_4, iVar1, (LPSTR)0x0, 0, (LPCSTR)0x0, (LPBOOL)0x0);
                iVar2 = iVar1;
            }
            else
            {
                iVar1 = WideCharToMultiByte(param_7, 0x220, param_4, iVar1, (LPSTR)param_5, param_6, (LPCSTR)0x0,
                                            (LPBOOL)0x0);
                iVar2 = iVar1;
            }
        }
        else
        {
            if (param_6 == 0)
                goto LAB_004a2b0f;
            if (param_6 < iVar1)
                goto LAB_004a2ba8;
            iVar2 = LCMapStringW(param_1, param_2, lpWideCharStr, iVar2, param_5, param_6);
        }
        if (iVar2 != 0)
        {
        LAB_004a2b0f:
            _free(lpWideCharStr);
            _free(param_4);
            return iVar1;
        }
    }
LAB_004a2ba8:
    _free(lpWideCharStr);
    _free(param_4);
    return 0;
}

// static import 004a2bd0
void __fltin2(uint *param_1, int param_2)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    uint local_14;
    uint local_10;
    undefined_8 local_c[12];

    iVar1 = param_2;
    uVar4 = 0;
    uVar2 = ___strgtold12(local_c, &param_2, param_2, 0, 0, 0, 0);
    if ((uVar2 & 4) == 0)
    {
        iVar3 = FUN_004a7270(local_c, &local_14);
        if (((uVar2 & 2) != 0) || (iVar3 == 1))
        {
            uVar4 = 0x80;
        }
        if (((uVar2 & 1) != 0) || (iVar3 == 2))
        {
            uVar4 = uVar4 | 0x100;
        }
    }
    else
    {
        uVar4 = 0x200;
        local_14 = 0;
        local_10 = 0;
    }
    *param_1 = uVar4;
    param_1[1] = param_2 - iVar1;
    param_1[4] = local_14;
    param_1[5] = local_10;
    return;
}

// static import 004a2cb0
void __freebuf(undefined_32 *param_1)

{
    if (((param_1[3] & 0x83) != 0) && ((param_1[3] & 8) != 0))
    {
        _free(param_1[2]);
        param_1[3] = param_1[3] & 0xfffffbf7;
        *param_1 = 0;
        param_1[2] = 0;
        param_1[1] = 0;
    }
    return;
}

// static import 004a2d30
undefined_32 __flush(int *param_1)

{
    uint uVar1;
    int iVar2;
    undefined_32 uVar3;
    int iVar4;

    uVar3 = 0;
    if ((((byte)param_1[3] & 3) == 2) && ((param_1[3] & 0x108U) != 0))
    {
        iVar4 = *param_1 - param_1[2];
        if (0 < iVar4)
        {
            iVar2 = __write(param_1[4], param_1[2], iVar4);
            uVar1 = param_1[3];
            if (iVar2 == iVar4)
            {
                if ((uVar1 & 0x80) != 0)
                {
                    param_1[1] = 0;
                    param_1[3] = uVar1 & 0xfffffffd;
                    *param_1 = param_1[2];
                    return 0;
                }
            }
            else
            {
                uVar3 = -1;
                param_1[3] = uVar1 | 0x20;
            }
        }
    }
    param_1[1] = 0;
    *param_1 = param_1[2];
    return uVar3;
}

// static import 004a2e70
undefined_32 *__openfile(undefined_32 param_1, char *param_2, undefined_32 param_3, undefined_32 *param_4)

{
    char cVar1;
    bool bVar2;
    bool bVar3;
    bool bVar4;
    uint uVar5;
    int iVar6;
    uint uVar7;

    cVar1 = *param_2;
    bVar3 = false;
    bVar4 = false;
    if (cVar1 == 'a')
    {
        uVar5 = 0x109;
    }
    else
    {
        if (cVar1 == 'r')
        {
            uVar5 = 0;
            uVar7 = DAT_00dfaf20 | 1;
            goto LAB_004a2ead;
        }
        if (cVar1 != 'w')
        {
            return NULL;
        }
        uVar5 = 0x301;
    }
    uVar7 = DAT_00dfaf20 | 2;
LAB_004a2ead:
    param_2 = param_2 + 1;
    bVar2 = true;
    cVar1 = *param_2;
    do
    {
        if ((cVar1 == '\0') || (!bVar2))
        {
            iVar6 = __sopen(param_1, uVar5, param_3, 0x1a4);
            if (-1 < iVar6)
            {
                DAT_00dfaeb8 = DAT_00dfaeb8 + 1;
                param_4[3] = uVar7;
                param_4[1] = 0;
                *param_4 = 0;
                param_4[2] = 0;
                param_4[7] = 0;
                param_4[4] = iVar6;
                return param_4;
            }
            return NULL;
        }
        switch (cVar1)
        {
        case '+':
            if ((uVar5 & 2) != 0)
                break;
            uVar5 = uVar5 & 0xfffffffe | 2;
            uVar7 = uVar7 & 0xfffffffc | 0x80;
            goto LAB_004a2f5e;
        case 'D':
            if ((uVar5 & 0x40) == 0)
            {
                uVar5 = uVar5 | 0x40;
                goto LAB_004a2f5e;
            }
            break;
        case 'R':
            if (!bVar4)
            {
                bVar4 = true;
                uVar5 = uVar5 | 0x10;
                goto LAB_004a2f5e;
            }
            break;
        case 'S':
            if (!bVar4)
            {
                bVar4 = true;
                uVar5 = uVar5 | 0x20;
                goto LAB_004a2f5e;
            }
            break;
        case 'T':
            if ((uVar5 & 0x1000) == 0)
            {
                uVar5 = uVar5 | 0x1000;
                goto LAB_004a2f5e;
            }
            break;
        case 'b':
            if ((uVar5 & 0xc000) == 0)
            {
                uVar5 = uVar5 | 0x8000;
                goto LAB_004a2f5e;
            }
            break;
        case 'c':
            if (!bVar3)
            {
                bVar3 = true;
                uVar7 = uVar7 | 0x4000;
                goto LAB_004a2f5e;
            }
            break;
        case 'n':
            if (!bVar3)
            {
                bVar3 = true;
                uVar7 = uVar7 & 0xffffbfff;
                goto LAB_004a2f5e;
            }
            break;
        case 't':
            if ((uVar5 & 0xc000) == 0)
            {
                uVar5 = uVar5 | 0x4000;
                goto LAB_004a2f5e;
            }
        }
        bVar2 = false;
    LAB_004a2f5e:
        param_2 = param_2 + 1;
        cVar1 = *param_2;
    } while (true);
}

// static import 004a3040
undefined_32 *__getstream(void)

{
    int iVar1;
    undefined_32 uVar2;
    int iVar3;
    undefined_32 *puVar4;

    puVar4 = NULL;
    __lock(2);
    iVar3 = 0;
    if (0 < DAT_00ecd4e0)
    {
        do
        {
            iVar1 = *(int *)(DAT_00ecc4c0 + iVar3 * 4);
            if (iVar1 == 0)
            {
                iVar3 = iVar3 * 4;
                uVar2 = _malloc(0x38);
                *(undefined_32 *)(DAT_00ecc4c0 + iVar3) = uVar2;
                if (*(int *)(DAT_00ecc4c0 + iVar3) != 0)
                {
                    InitializeCriticalSection((LPCRITICAL_SECTION)(*(int *)(DAT_00ecc4c0 + iVar3) + 0x20));
                    EnterCriticalSection((LPCRITICAL_SECTION)(*(int *)(DAT_00ecc4c0 + iVar3) + 0x20));
                    puVar4 = *(undefined_32 **)(DAT_00ecc4c0 + iVar3);
                }
                break;
            }
            if ((*(byte *)(iVar1 + 0xc) & 0x83) == 0)
            {
                __lock_file2(iVar3, iVar1);
                iVar1 = *(int *)(DAT_00ecc4c0 + iVar3 * 4);
                if ((*(byte *)(iVar1 + 0xc) & 0x83) == 0)
                {
                    puVar4 = *(undefined_32 **)(DAT_00ecc4c0 + iVar3 * 4);
                    break;
                }
                __unlock_file2(iVar3, iVar1);
            }
            iVar3 = iVar3 + 1;
        } while (iVar3 < DAT_00ecd4e0);
    }
    if (puVar4 != NULL)
    {
        puVar4[1] = 0;
        puVar4[3] = 0;
        puVar4[2] = 0;
        *puVar4 = 0;
        puVar4[7] = 0;
        puVar4[4] = -1;
    }
    __unlock(2);
    return puVar4;
}

// static import 004a3120
undefined_32 __heap_init(void)

{
    int iVar1;

    DAT_00ecd604 = HeapCreate(0, 0x1000, 0);
    if (DAT_00ecd604 == (HANDLE)0x0)
    {
        return 0;
    }
    iVar1 = ___sbh_new_region();
    if (iVar1 == 0)
    {
        HeapDestroy(DAT_00ecd604);
        return 0;
    }
    return 1;
}

// static import 004a3160
undefined_8 **___sbh_new_region(void)

{
    bool bVar1;
    undefined_32 *lpAddress;
    LPVOID pvVar2;
    int iVar3;
    undefined_8 **ppuVar4;
    undefined_8 **lpMem;
    undefined_32 *puVar5;

    if (DAT_004d2218 == -1)
    {
        lpMem = &PTR_LOOP_004d2208;
    }
    else
    {
        lpMem = (undefined_8 **)HeapAlloc(DAT_00ecd604, 0, 0x2020);
        if (lpMem == (undefined_8 **)0x0)
        {
            return (undefined_8 **)0x0;
        }
    }
    lpAddress = (undefined_32 *)VirtualAlloc((LPVOID)0x0, 0x400000, 0x2000, 4);
    if (lpAddress != NULL)
    {
        pvVar2 = VirtualAlloc(lpAddress, 0x10000, 0x1000, 4);
        if (pvVar2 != (LPVOID)0x0)
        {
            if (lpMem == &PTR_LOOP_004d2208)
            {
                if (PTR_LOOP_004d2208 == NULL)
                {
                    PTR_LOOP_004d2208 = (undefined_8 *)&PTR_LOOP_004d2208;
                }
                if (PTR_LOOP_004d220c == NULL)
                {
                    PTR_LOOP_004d220c = (undefined_8 *)&PTR_LOOP_004d2208;
                }
            }
            else
            {
                *lpMem = (undefined_8 *)&PTR_LOOP_004d2208;
                lpMem[1] = PTR_LOOP_004d220c;
                PTR_LOOP_004d220c = (undefined_8 *)lpMem;
                *(undefined_8 ***)lpMem[1] = lpMem;
            }
            lpMem[5] = (undefined_8 *)(lpAddress + 0x100000);
            lpMem[4] = (undefined_8 *)lpAddress;
            lpMem[2] = (undefined_8 *)(lpMem + 6);
            lpMem[3] = (undefined_8 *)(lpMem + 0x26);
            iVar3 = 0;
            ppuVar4 = lpMem + 6;
            do
            {
                bVar1 = 0xf < iVar3;
                iVar3 = iVar3 + 1;
                *ppuVar4 = (undefined_8 *)((bVar1 - 1 & 0xf1) - 1);
                ppuVar4[1] = (undefined_8 *)0xf1;
                ppuVar4 = ppuVar4 + 2;
            } while (iVar3 < 0x400);
            puVar5 = lpAddress;
            MEMSET(iVar3, puVar5, 0, 0x4000)
            if (lpAddress < lpMem[4] + 0x10000)
            {
                do
                {
                    lpAddress[1] = 0xf0;
                    *lpAddress = lpAddress + 2;
                    *(undefined_8 *)(lpAddress + 0x3e) = 0xff;
                    lpAddress = lpAddress + 0x400;
                } while (lpAddress < lpMem[4] + 0x10000);
            }
            return lpMem;
        }
        VirtualFree(lpAddress, 0, 0x8000);
    }
    if (lpMem != &PTR_LOOP_004d2208)
    {
        HeapFree(DAT_00ecd604, 0, lpMem);
    }
    return (undefined_8 **)0x0;
}

// static import 004a32d0
void ___sbh_release_region(undefined_8 **param_1)

{
    VirtualFree(param_1[4], 0, 0x8000);
    if ((undefined_8 **)PTR_LOOP_004d4228 == param_1)
    {
        PTR_LOOP_004d4228 = param_1[1];
    }
    if (param_1 != &PTR_LOOP_004d2208)
    {
        *(undefined_8 **)param_1[1] = *param_1;
        *(undefined_8 **)(*param_1 + 4) = param_1[1];
        HeapFree(DAT_00ecd604, 0, param_1);
        return;
    }
    DAT_004d2218 = -1;
    return;
}

// static import 004a3330
void ___sbh_decommit_pages(int param_1)

{
    BOOL BVar1;
    int *piVar2;
    int iVar3;
    int iVar4;
    undefined_8 *puVar5;
    undefined_8 *puVar6;

    puVar5 = PTR_LOOP_004d220c;
    do
    {
        puVar6 = puVar5;
        if (*(int *)(puVar5 + 0x10) != -1)
        {
            iVar4 = 0;
            piVar2 = (int *)(puVar5 + 0x2010);
            iVar3 = 0x3ff000;
            do
            {
                if (*piVar2 == 0xf0)
                {
                    BVar1 = VirtualFree((LPVOID)(*(int *)(puVar5 + 0x10) + iVar3), 0x1000, 0x4000);
                    if (BVar1 != 0)
                    {
                        *piVar2 = -1;
                        DAT_00dfab60 = DAT_00dfab60 + -1;
                        if ((*(int **)(puVar5 + 0xc) == NULL) || (piVar2 < *(int **)(puVar5 + 0xc)))
                        {
                            *(int **)(puVar5 + 0xc) = piVar2;
                        }
                        iVar4 = iVar4 + 1;
                        param_1 = param_1 + -1;
                        if (param_1 == 0)
                            break;
                    }
                }
                iVar3 = iVar3 + -0x1000;
                piVar2 = piVar2 + -2;
            } while (-1 < iVar3);
            puVar6 = *(undefined_8 **)(puVar5 + 4);
            if ((iVar4 != 0) && (*(int *)(puVar5 + 0x18) == -1))
            {
                iVar3 = 1;
                piVar2 = (int *)(puVar5 + 0x20);
                do
                {
                    if (*piVar2 != -1)
                        break;
                    iVar3 = iVar3 + 1;
                    piVar2 = piVar2 + 2;
                } while (iVar3 < 0x400);
                if (iVar3 == 0x400)
                {
                    ___sbh_release_region(puVar5);
                }
            }
        }
        if ((puVar6 == PTR_LOOP_004d220c) || (puVar5 = puVar6, param_1 < 1))
        {
            return;
        }
    } while (true);
}

// static import 004a3400
int ___sbh_find_block(undefined_8 *param_1, int **param_2, uint *param_3)

{
    undefined_8 **ppuVar1;
    uint uVar2;

    ppuVar1 = &PTR_LOOP_004d2208;
    while ((param_1 < ppuVar1[4] || param_1 == ppuVar1[4] || (ppuVar1[5] <= param_1)))
    {
        ppuVar1 = (undefined_8 **)*ppuVar1;
        if (ppuVar1 == &PTR_LOOP_004d2208)
        {
            return 0;
        }
    }
    if (((uint)param_1 & 0xf) != 0)
    {
        return 0;
    }
    if (((uint)param_1 & 0xfff) < 0x100)
    {
        return 0;
    }
    *param_2 = (int *)ppuVar1;
    uVar2 = (uint)param_1 & 0xfffff000;
    *param_3 = uVar2;
    return ((int)(param_1 + (-0x100 - uVar2)) >> 4) + 8 + uVar2;
}

// static import 004a3460
void ___sbh_free_block(int param_1, int param_2, byte *param_3)

{
    int *piVar1;
    int iVar2;

    iVar2 = param_2 - *(int *)(param_1 + 0x10) >> 0xc;
    piVar1 = (int *)(param_1 + 0x18 + iVar2 * 8);
    *piVar1 = *(int *)(param_1 + 0x18 + iVar2 * 8) + (uint)*param_3;
    *param_3 = 0;
    piVar1[1] = 0xf1;
    if ((*piVar1 == 0xf0) && (DAT_00dfab60 = DAT_00dfab60 + 1, DAT_00dfab60 == 0x20))
    {
        ___sbh_decommit_pages(0x10);
    }
    return;
}

// static import 004a34c0
int *___sbh_alloc_block(uint param_1)

{
    undefined_8 **ppuVar1;
    undefined_8 **ppuVar2;
    int *piVar3;
    int *piVar4;
    undefined_8 *puVar5;
    undefined_8 **ppuVar6;
    undefined_8 **ppuVar7;
    int iVar8;
    int *piVar9;
    bool bVar10;
    int *local_4;

    local_4 = (int *)PTR_LOOP_004d4228;
    do
    {
        if (local_4[4] != -1)
        {
            piVar9 = (int *)local_4[2];
            iVar8 = ((int)piVar9 + (-0x18 - (int)local_4) >> 3) * 0x1000 + local_4[4];
            for (; piVar9 < local_4 + 0x806; piVar9 = piVar9 + 2)
            {
                if (((int)param_1 <= *piVar9) && (param_1 <= (uint)piVar9[1] && piVar9[1] != param_1))
                {
                    piVar3 = (int *)___sbh_alloc_block_from_page(iVar8, *piVar9, param_1);
                    if (piVar3 != NULL)
                    {
                        PTR_LOOP_004d4228 = (undefined_8 *)local_4;
                        *piVar9 = *piVar9 - param_1;
                        local_4[2] = (int)piVar9;
                        return piVar3;
                    }
                    piVar9[1] = param_1;
                }
                iVar8 = iVar8 + 0x1000;
            }
            piVar3 = (int *)local_4[2];
            iVar8 = local_4[4];
            for (piVar9 = local_4 + 6; piVar9 < piVar3; piVar9 = piVar9 + 2)
            {
                if (((int)param_1 <= *piVar9) && (param_1 <= (uint)piVar9[1] && piVar9[1] != param_1))
                {
                    piVar4 = (int *)___sbh_alloc_block_from_page(iVar8, *piVar9, param_1);
                    if (piVar4 != NULL)
                    {
                        PTR_LOOP_004d4228 = (undefined_8 *)local_4;
                        *piVar9 = *piVar9 - param_1;
                        local_4[2] = (int)piVar9;
                        return piVar4;
                    }
                    piVar9[1] = param_1;
                }
                iVar8 = iVar8 + 0x1000;
            }
        }
        local_4 = (int *)*local_4;
    } while (local_4 != (int *)PTR_LOOP_004d4228);
    ppuVar7 = &PTR_LOOP_004d2208;
    while ((ppuVar7[4] == (undefined_8 *)-1 || (ppuVar7[3] == NULL)))
    {
        ppuVar7 = (undefined_8 **)*ppuVar7;
        if (ppuVar7 == &PTR_LOOP_004d2208)
        {
            puVar5 = (undefined_8 *)___sbh_new_region();
            if (puVar5 == NULL)
            {
                return NULL;
            }
            piVar9 = *(int **)(puVar5 + 0x10);
            *(char *)(piVar9 + 2) = (char)param_1;
            PTR_LOOP_004d4228 = puVar5;
            *piVar9 = (int)piVar9 + param_1 + 8;
            piVar9[1] = 0xf0 - param_1;
            *(uint *)(puVar5 + 0x18) = *(int *)(puVar5 + 0x18) - (param_1 & 0xff);
            return piVar9 + 0x40;
        }
    }
    ppuVar2 = (undefined_8 **)ppuVar7[3];
    puVar5 = *ppuVar2;
    piVar9 = (int *)(ppuVar7[4] + ((int)ppuVar2 + (-0x18 - (int)ppuVar7) >> 3) * 0x1000);
    ppuVar6 = ppuVar2;
    for (iVar8 = 0; (puVar5 == (undefined_8 *)-1 && (iVar8 < 0x10)); iVar8 = iVar8 + 1)
    {
        puVar5 = ppuVar6[2];
        ppuVar6 = ppuVar6 + 2;
    }
    piVar3 = (int *)VirtualAlloc(piVar9, iVar8 << 0xc, 0x1000, 4);
    if (piVar3 != piVar9)
    {
        return NULL;
    }
    ppuVar6 = ppuVar2;
    if (0 < iVar8)
    {
        piVar3 = piVar9 + 1;
        do
        {
            *piVar3 = 0xf0;
            piVar3[-1] = (int)(piVar3 + 1);
            *(undefined_8 *)(piVar3 + 0x3d) = 0xff;
            *ppuVar6 = (undefined_8 *)0xf0;
            ppuVar6[1] = (undefined_8 *)0xf1;
            piVar3 = piVar3 + 0x400;
            ppuVar6 = ppuVar6 + 2;
            iVar8 = iVar8 + -1;
        } while (iVar8 != 0);
    }
    ppuVar1 = ppuVar7 + 0x806;
    bVar10 = ppuVar6 < ppuVar1;
    if (bVar10)
    {
        do
        {
            if (*ppuVar6 == (undefined_8 *)-1)
                break;
            ppuVar6 = ppuVar6 + 2;
        } while (ppuVar6 < ppuVar1);
        bVar10 = ppuVar6 < ppuVar1;
    }
    PTR_LOOP_004d4228 = (undefined_8 *)ppuVar7;
    ppuVar7[3] = (undefined_8 *)(-(uint)bVar10 & (uint)ppuVar6);
    *(char *)(piVar9 + 2) = (char)param_1;
    ppuVar7[2] = (undefined_8 *)ppuVar2;
    *ppuVar2 = *ppuVar2 + -param_1;
    piVar9[1] = piVar9[1] - param_1;
    *piVar9 = (int)piVar9 + param_1 + 8;
    return piVar9 + 0x40;
}

// static import 004a3700
int ___sbh_alloc_block_from_page(int **param_1, int *param_2, int *param_3)

{
    char cVar1;
    int **ppiVar2;
    int **ppiVar3;
    int **ppiVar4;
    int *piVar5;
    int **ppiVar6;

    ppiVar2 = (int **)*param_1;
    if (param_3 <= param_1[1])
    {
        *(char *)ppiVar2 = (char)param_3;
        if ((int **)((int)ppiVar2 + (int)param_3) < param_1 + 0x3e)
        {
            *param_1 = (int *)((int)*param_1 + (int)param_3);
            param_1[1] = (int *)((int)param_1[1] - (int)param_3);
        }
        else
        {
            param_1[1] = NULL;
            *param_1 = (int *)(param_1 + 2);
        }
        return (int)(ppiVar2 + 2) * 0x10 + (int)param_1 * -0xf;
    }
    ppiVar3 = (int **)((int)param_1[1] + (int)ppiVar2);
    ppiVar6 = ppiVar2;
    if (*(char *)ppiVar3 != '\0')
    {
        ppiVar6 = ppiVar3;
    }
    if ((int **)((int)ppiVar6 + (int)param_3) < param_1 + 0x3e)
    {
        do
        {
            if (*(byte *)ppiVar6 == 0)
            {
                ppiVar3 = (int **)((int)ppiVar6 + 1);
                piVar5 = (int *)0x1;
                cVar1 = *(char *)((int)ppiVar6 + 1);
                while (cVar1 == '\0')
                {
                    ppiVar3 = (int **)((int)ppiVar3 + 1);
                    piVar5 = (int *)((int)piVar5 + 1);
                    cVar1 = *(char *)ppiVar3;
                }
                if (param_3 <= piVar5)
                {
                    if (param_1 + 0x3e <= (int **)((int)ppiVar6 + (int)param_3))
                    {
                        *param_1 = (int *)(param_1 + 2);
                        goto LAB_004a384f;
                    }
                    *param_1 = (int *)(int **)((int)ppiVar6 + (int)param_3);
                    param_1[1] = (int *)((int)piVar5 - (int)param_3);
                    goto LAB_004a3856;
                }
                if (ppiVar6 == ppiVar2)
                {
                    param_1[1] = piVar5;
                }
                else
                {
                    param_2 = (int *)((int)param_2 - (int)piVar5);
                    if (param_2 < param_3)
                    {
                        return 0;
                    }
                }
            }
            else
            {
                ppiVar3 = (int **)((int)ppiVar6 + (uint) * (byte *)ppiVar6);
            }
            ppiVar6 = ppiVar3;
        } while ((int **)((int)ppiVar3 + (int)param_3) < param_1 + 0x3e);
    }
    ppiVar3 = param_1 + 2;
    ppiVar6 = ppiVar3;
    if (ppiVar3 < ppiVar2)
    {
        while ((int **)((int)ppiVar6 + (int)param_3) < param_1 + 0x3e)
        {
            if (*(byte *)ppiVar6 == 0)
            {
                ppiVar4 = (int **)((int)ppiVar6 + 1);
                piVar5 = (int *)0x1;
                cVar1 = *(char *)((int)ppiVar6 + 1);
                while (cVar1 == '\0')
                {
                    ppiVar4 = (int **)((int)ppiVar4 + 1);
                    piVar5 = (int *)((int)piVar5 + 1);
                    cVar1 = *(char *)ppiVar4;
                }
                if (param_3 <= piVar5)
                {
                    if ((int **)((int)ppiVar6 + (int)param_3) < param_1 + 0x3e)
                    {
                        *param_1 = (int *)(int **)((int)ppiVar6 + (int)param_3);
                        param_1[1] = (int *)((int)piVar5 - (int)param_3);
                    }
                    else
                    {
                        *param_1 = (int *)ppiVar3;
                    LAB_004a384f:
                        param_1[1] = NULL;
                    }
                LAB_004a3856:
                    *(char *)ppiVar6 = (char)param_3;
                    return (int)(ppiVar6 + 2) * 0x10 + (int)param_1 * -0xf;
                }
                param_2 = (int *)((int)param_2 - (int)piVar5);
                if (param_2 < param_3)
                {
                    return 0;
                }
            }
            else
            {
                ppiVar4 = (int **)((int)ppiVar6 + (uint) * (byte *)ppiVar6);
            }
            ppiVar6 = ppiVar4;
            if (ppiVar2 <= ppiVar4)
            {
                return 0;
            }
        }
    }
    return 0;
}

// static import 004a3880
undefined_32 ___sbh_resize_block(int param_1, int **param_2, int **param_3, uint param_4)

{
    int **ppiVar1;
    int iVar2;
    int *piVar3;
    char cVar4;
    undefined_32 uVar5;
    int *piVar6;
    uint uVar7;
    int **ppiVar8;

    uVar5 = 0;
    piVar3 = (int *)(param_1 + 0x18 + ((int)param_2 - *(int *)(param_1 + 0x10) >> 0xc) * 8);
    uVar7 = (uint) * (byte *)param_3;
    if (uVar7 <= param_4)
    {
        if ((uVar7 < param_4) && (ppiVar1 = (int **)(param_4 + (int)param_3), ppiVar1 <= param_2 + 0x3e))
        {
            for (ppiVar8 = (int **)(uVar7 + (int)param_3); (ppiVar8 < ppiVar1 && (*(char *)ppiVar8 == '\0'));
                 ppiVar8 = (int **)((int)ppiVar8 + 1))
            {}
            if (ppiVar8 == ppiVar1)
            {
                *(char *)param_3 = (char)param_4;
                if ((param_3 <= *param_2) && (*param_2 < ppiVar1))
                {
                    if (ppiVar1 < param_2 + 0x3e)
                    {
                        *param_2 = (int *)ppiVar1;
                        piVar6 = NULL;
                        cVar4 = *(char *)ppiVar1;
                        while (cVar4 == '\0')
                        {
                            iVar2 = (int)piVar6 + 1;
                            piVar6 = (int *)((int)piVar6 + 1);
                            cVar4 = *(char *)(iVar2 + (int)ppiVar1);
                        }
                        param_2[1] = piVar6;
                    }
                    else
                    {
                        param_2[1] = NULL;
                        *param_2 = (int *)(param_2 + 2);
                    }
                }
                *piVar3 = *piVar3 + (uVar7 - param_4);
                uVar5 = 1;
            }
        }
        return uVar5;
    }
    *(char *)param_3 = (char)param_4;
    piVar3[1] = 0xf1;
    *piVar3 = *piVar3 + (uVar7 - param_4);
    return 1;
}

// static import 004a3950
undefined_32 ___callnewh(undefined_32 param_1)

{
    int iVar1;

    if (DAT_00dfab68 != (code *)0x0)
    {
        iVar1 = (*DAT_00dfab68)(param_1);
        if (iVar1 != 0)
        {
            return 1;
        }
    }
    return 0;
}

// static import 004a3970
BOOL ___crtGetStringTypeW(DWORD param_1, LPCWSTR param_2, int param_3, LPWORD param_4, UINT param_5, LCID param_6)

{
    BOOL BVar1;
    int cbMultiByte;
    LPCSTR lpMultiByteStr;
    int iVar2;
    LPWORD lpCharType;
    int local_4;

    lpCharType = (LPWORD)0x0;
    if (DAT_00dfab6c == 0)
    {
        BVar1 = GetStringTypeW(1, L"", 1, (LPWORD)&local_4);
        if (BVar1 == 0)
        {
            BVar1 = GetStringTypeA(0, 1, "", 1, (LPWORD)&local_4);
            if (BVar1 == 0)
            {
                return 0;
            }
            DAT_00dfab6c = 2;
        }
        else
        {
            DAT_00dfab6c = 1;
        }
    }
    if (DAT_00dfab6c != 1)
    {
        local_4 = DAT_00dfab6c;
        if (DAT_00dfab6c == 2)
        {
            local_4 = 0;
            if (param_5 == 0)
            {
                param_5 = DAT_00dfab48;
            }
            cbMultiByte =
                WideCharToMultiByte(param_5, 0x220, param_2, param_3, (LPSTR)0x0, 0, (LPCSTR)0x0, (LPBOOL)0x0);
            if (cbMultiByte == 0)
            {
                return 0;
            }
            lpMultiByteStr = (LPCSTR)_calloc(1, cbMultiByte);
            if (lpMultiByteStr == (LPCSTR)0x0)
            {
                return 0;
            }
            iVar2 = WideCharToMultiByte(param_5, 0x220, param_2, param_3, lpMultiByteStr, cbMultiByte, (LPCSTR)0x0,
                                        (LPBOOL)0x0);
            if ((iVar2 != 0) && (lpCharType = (LPWORD)_malloc(cbMultiByte * 2 + 2), lpCharType != (LPWORD)0x0))
            {
                if (param_6 == 0)
                {
                    param_6 = DAT_00dfab38;
                }
                lpCharType[param_3] = 0xffff;
                lpCharType[param_3 + -1] = 0xffff;
                local_4 = GetStringTypeA(param_6, param_1, lpMultiByteStr, cbMultiByte, lpCharType);
                if ((lpCharType[param_3 + -1] == 0xffff) || (lpCharType[param_3] != 0xffff))
                {
                    local_4 = 0;
                }
                else
                {
                    _memcpy(param_4, lpCharType, param_3 * 2);
                }
            }
            _free(lpMultiByteStr);
            _free(lpCharType);
        }
        return local_4;
    }
    BVar1 = GetStringTypeW(param_1, param_2, param_3, param_4);
    return BVar1;
}

// is that a static import ?? Not in the list of swep1-re
BOOL FUN_004a3b00(DWORD param_1, LPCSTR param_2, int param_3, LPWORD param_4, UINT param_5, LCID param_6, int param_7)

{
    BOOL BVar1;
    int iVar2;
    LPCWSTR lpWideCharStr;
    WORD local_2;

    lpWideCharStr = (LPCWSTR)0x0;
    if (DAT_00dfab70 == 0)
    {
        BVar1 = GetStringTypeW(1, L"", 1, &local_2);
        if (BVar1 == 0)
        {
            BVar1 = GetStringTypeA(0, 1, "", 1, &local_2);
            if (BVar1 == 0)
            {
                return 0;
            }
            DAT_00dfab70 = 2;
        }
        else
        {
            DAT_00dfab70 = 1;
        }
    }
    if (DAT_00dfab70 == 2)
    {
        if (param_6 == 0)
        {
            param_6 = DAT_00dfab38;
        }
        BVar1 = GetStringTypeA(param_6, param_1, param_2, param_3, param_4);
        return BVar1;
    }
    param_6 = DAT_00dfab70;
    if (DAT_00dfab70 == 1)
    {
        param_6 = 0;
        if (param_5 == 0)
        {
            param_5 = DAT_00dfab48;
        }
        iVar2 = MultiByteToWideChar(param_5, (-(uint)(param_7 != 0) & 8) + 1, param_2, param_3, (LPWSTR)0x0, 0);
        if (iVar2 != 0)
        {
            lpWideCharStr = (LPCWSTR)_calloc(2, iVar2);
            if (lpWideCharStr != (LPCWSTR)0x0)
            {
                iVar2 = MultiByteToWideChar(param_5, 1, param_2, param_3, lpWideCharStr, iVar2);
                if (iVar2 != 0)
                {
                    BVar1 = GetStringTypeW(param_1, lpWideCharStr, iVar2, param_4);
                    _free(lpWideCharStr);
                    return BVar1;
                }
            }
        }
        _free(lpWideCharStr);
    }
    return param_6;
}

// static import 004a3c40
undefined_32 ___mtinit(void)

{
    DWORD *lpTlsValue;
    BOOL BVar1;
    DWORD DVar2;

    __mtinitlocks();
    DAT_004d4230 = TlsAlloc();
    if (DAT_004d4230 != -1)
    {
        lpTlsValue = (DWORD *)_calloc(1, 0x74);
        if (lpTlsValue != (DWORD *)0x0)
        {
            BVar1 = TlsSetValue(DAT_004d4230, lpTlsValue);
            if (BVar1 != 0)
            {
                __initptd(lpTlsValue);
                DVar2 = GetCurrentThreadId();
                *lpTlsValue = DVar2;
                lpTlsValue[1] = -1;
                return 1;
            }
        }
    }
    return 0;
}

// static import 004a3ca0
void __initptd(int param_1)

{
    *(undefined_8 **)(param_1 + 0x50) = &DAT_004d43c8;
    *(undefined_32 *)(param_1 + 0x14) = 1;
    return;
}

// static import 004a3cc0
DWORD *__getptd(void)

{
    DWORD dwErrCode;
    DWORD *lpTlsValue;
    BOOL BVar1;
    DWORD DVar2;

    dwErrCode = GetLastError();
    lpTlsValue = (DWORD *)TlsGetValue(DAT_004d4230);
    if (lpTlsValue == (DWORD *)0x0)
    {
        lpTlsValue = (DWORD *)_calloc(1, 0x74);
        if (lpTlsValue != (DWORD *)0x0)
        {
            BVar1 = TlsSetValue(DAT_004d4230, lpTlsValue);
            if (BVar1 != 0)
            {
                __initptd(lpTlsValue);
                DVar2 = GetCurrentThreadId();
                *lpTlsValue = DVar2;
                lpTlsValue[1] = -1;
                SetLastError(dwErrCode);
                return lpTlsValue;
            }
        }
        __amsg_exit(0x10);
    }
    SetLastError(dwErrCode);
    return lpTlsValue;
}

// static import 004a3d40
void __dosmaperr(uint param_1)

{
    uint *puVar1;
    undefined_32 *puVar2;
    int iVar3;

    puVar1 = (uint *)___doserrno();
    iVar3 = 0;
    *puVar1 = param_1;
    puVar1 = &DAT_004d4238;
    do
    {
        if (param_1 == *puVar1)
        {
            puVar2 = (undefined_32 *)__errno();
            *puVar2 = (&DAT_004d423c)[iVar3 * 2];
            return;
        }
        puVar1 = puVar1 + 2;
        iVar3 = iVar3 + 1;
    } while (puVar1 < &DAT_004d43a0);
    if ((0x12 < param_1) && (param_1 < 0x25))
    {
        puVar2 = (undefined_32 *)__errno();
        *puVar2 = 0xd;
        return;
    }
    if ((0xbb < param_1) && (param_1 < 0xcb))
    {
        puVar2 = (undefined_32 *)__errno();
        *puVar2 = 8;
        return;
    }
    puVar2 = (undefined_32 *)__errno();
    *puVar2 = 0x16;
    return;
}

// static import 004a3dc0
int __errno(void)

{
    int iVar1;

    iVar1 = __getptd();
    return iVar1 + 8;
}

// static import 004a3dd0
int ___doserrno(void)

{
    int iVar1;

    iVar1 = __getptd();
    return iVar1 + 0xc;
}

// static import 004a3de0
void __ioinit(void)

{
    HANDLE *ppvVar1;
    byte bVar2;
    undefined_32 *puVar3;
    DWORD DVar4;
    HANDLE hFile;
    HANDLE *ppvVar5;
    int iVar6;
    int *piVar7;
    uint uVar8;
    UINT local_48;
    _STARTUPINFOA local_44;

    puVar3 = (undefined_32 *)_malloc(0x480);
    if (puVar3 == NULL)
    {
        __amsg_exit(0x1b);
    }
    DAT_00ecd600 = 0x20;
    DAT_00ecd500 = puVar3;
    if (puVar3 < puVar3 + 0x120)
    {
        do
        {
            *(undefined_8 *)(puVar3 + 1) = 0;
            *puVar3 = -1;
            *(undefined_8 *)((int)puVar3 + 5) = 10;
            puVar3[2] = 0;
            puVar3 = puVar3 + 9;
        } while (puVar3 < DAT_00ecd500 + 0x120);
    }
    GetStartupInfoA(&local_44);
    if ((local_44.cbReserved2 != 0) && ((UINT *)local_44.lpReserved2 != NULL))
    {
        local_48 = *(UINT *)local_44.lpReserved2;
        local_44.lpReserved2 = (LPBYTE)((int)local_44.lpReserved2 + 4);
        ppvVar5 = (HANDLE *)((int)local_44.lpReserved2 + local_48);
        if (0x7ff < (int)local_48)
        {
            local_48 = 0x800;
        }
        if ((int)DAT_00ecd600 < (int)local_48)
        {
            piVar7 = &DAT_00ecd504;
            do
            {
                puVar3 = (undefined_32 *)_malloc(0x480);
                if (puVar3 == NULL)
                {
                    local_48 = DAT_00ecd600;
                    break;
                }
                *piVar7 = (int)puVar3;
                DAT_00ecd600 = DAT_00ecd600 + 0x20;
                if (puVar3 < puVar3 + 0x120)
                {
                    do
                    {
                        *(undefined_8 *)(puVar3 + 1) = 0;
                        *puVar3 = -1;
                        *(undefined_8 *)((int)puVar3 + 5) = 10;
                        puVar3[2] = 0;
                        puVar3 = puVar3 + 9;
                    } while (puVar3 < (undefined_32 *)(*piVar7 + 0x480));
                }
                piVar7 = piVar7 + 1;
            } while ((int)DAT_00ecd600 < (int)local_48);
        }
        uVar8 = 0;
        if (0 < (int)local_48)
        {
            do
            {
                if (((*ppvVar5 != (HANDLE)-1) && ((*local_44.lpReserved2 & 1) != 0))
                    && (((*local_44.lpReserved2 & 8) != 0 || (DVar4 = GetFileType(*ppvVar5), DVar4 != 0))))
                {
                    ppvVar1 = (HANDLE *)((int)(&DAT_00ecd500)[(int)uVar8 >> 5] + (uVar8 & 0x1f) * 0x24);
                    *ppvVar1 = *ppvVar5;
                    *(BYTE *)(ppvVar1 + 1) = *local_44.lpReserved2;
                }
                uVar8 = uVar8 + 1;
                local_44.lpReserved2 = (LPBYTE)((int)local_44.lpReserved2 + 1);
                ppvVar5 = ppvVar5 + 1;
            } while ((int)uVar8 < (int)local_48);
        }
    }
    iVar6 = 0;
    do
    {
        ppvVar5 = (HANDLE *)(DAT_00ecd500 + iVar6 * 9);
        if (DAT_00ecd500[iVar6 * 9] == -1)
        {
            *(undefined_8 *)(ppvVar5 + 1) = 0x81;
            if (iVar6 == 0)
            {
                DVar4 = 0xfffffff6;
            }
            else
            {
                DVar4 = 0xfffffff5 - (iVar6 != 1);
            }
            hFile = GetStdHandle(DVar4);
            if ((hFile == (HANDLE)-1) || (DVar4 = GetFileType(hFile), DVar4 == 0))
            {
                bVar2 = *(byte *)(ppvVar5 + 1) | 0x40;
                goto LAB_004a3fce;
            }
            *ppvVar5 = hFile;
            if ((DVar4 & 0xff) == 2)
            {
                bVar2 = *(byte *)(ppvVar5 + 1) | 0x40;
                goto LAB_004a3fce;
            }
            if ((DVar4 & 0xff) == 3)
            {
                bVar2 = *(byte *)(ppvVar5 + 1) | 8;
                goto LAB_004a3fce;
            }
        }
        else
        {
            bVar2 = *(byte *)(ppvVar5 + 1) | 0x80;
        LAB_004a3fce:
            *(byte *)(ppvVar5 + 1) = bVar2;
        }
        iVar6 = iVar6 + 1;
        if (2 < iVar6)
        {
            SetHandleCount(DAT_00ecd600);
            return;
        }
    } while (true);
}

// static import 004a3ff0
undefined_32 __lseek(uint param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    undefined_32 *puVar2;

    if ((param_1 < DAT_00ecd600)
        && ((*(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0))
    {
        __lock_fhandle(param_1);
        uVar1 = __lseek_lk(param_1, param_2, param_3);
        __unlock_fhandle(param_1);
        return uVar1;
    }
    puVar2 = (undefined_32 *)__errno();
    *puVar2 = 9;
    puVar2 = (undefined_32 *)___doserrno();
    *puVar2 = 0;
    return -1;
}

// static import 004a4070
DWORD __lseek_lk(uint param_1, LONG param_2, DWORD param_3)

{
    HANDLE hFile;
    undefined_32 *puVar1;
    DWORD DVar2;
    DWORD DVar3;

    hFile = (HANDLE)__get_osfhandle(param_1);
    if (hFile == (HANDLE)-1)
    {
        puVar1 = (undefined_32 *)__errno();
        *puVar1 = 9;
        return -1;
    }
    DVar2 = SetFilePointer(hFile, param_2, (PLONG)0x0, param_3);
    if (DVar2 == -1)
    {
        DVar3 = GetLastError();
    }
    else
    {
        DVar3 = 0;
    }
    if (DVar3 != 0)
    {
        __dosmaperr(DVar3);
        return -1;
    }
    *(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) =
        *(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 0xfd;
    return DVar2;
}

// static import 004a40f0
uint __filbuf(byte **param_1)

{
    byte bVar1;
    byte *pbVar2;
    byte *pbVar3;
    undefined_8 *puVar4;

    pbVar3 = param_1[3];
    if ((((uint)pbVar3 & 0x83) != 0) && (((uint)pbVar3 & 0x40) == 0))
    {
        if (((uint)pbVar3 & 2) != 0)
        {
            param_1[3] = (byte *)((uint)pbVar3 | 0x20);
            return -1;
        }
        param_1[3] = (byte *)((uint)pbVar3 | 1);
        if (((uint)pbVar3 & 0x10c) == 0)
        {
            __getbuf(param_1);
        }
        else
        {
            *param_1 = param_1[2];
        }
        pbVar3 = (byte *)__read(param_1[4], param_1[2], param_1[6]);
        param_1[1] = pbVar3;
        if ((pbVar3 != NULL) && (pbVar3 != (byte *)-1))
        {
            if (((uint)param_1[3] & 0x82) == 0)
            {
                pbVar2 = param_1[4];
                if (pbVar2 == (byte *)-1)
                {
                    puVar4 = &DAT_004d43a0;
                }
                else
                {
                    puVar4 = (undefined_8 *)((&DAT_00ecd500)[(int)pbVar2 >> 5] + ((uint)pbVar2 & 0x1f) * 0x24);
                }
                if ((puVar4[4] & 0x82) == 0x82)
                {
                    param_1[3] = (byte *)((uint)param_1[3] | 0x2000);
                }
            }
            if (((param_1[6] == (byte *)0x200) && (((uint)param_1[3] & 8) != 0)) && (((uint)param_1[3] & 0x400) == 0))
            {
                param_1[6] = (byte *)0x1000;
            }
            param_1[1] = pbVar3 + -1;
            bVar1 = **param_1;
            *param_1 = *param_1 + 1;
            return (uint)bVar1;
        }
        param_1[1] = NULL;
        param_1[3] = (byte *)((uint)param_1[3] | (-(uint)(pbVar3 != NULL) & 0x10) + 0x10);
    }
    return -1;
}

// static import 004a41e0
undefined_32 __read(uint param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    undefined_32 *puVar2;

    if ((param_1 < DAT_00ecd600)
        && ((*(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0))
    {
        __lock_fhandle(param_1);
        uVar1 = __read_lk(param_1, param_2, param_3);
        __unlock_fhandle(param_1);
        return uVar1;
    }
    puVar2 = (undefined_32 *)__errno();
    *puVar2 = 9;
    puVar2 = (undefined_32 *)___doserrno();
    *puVar2 = 0;
    return -1;
}

// static import 004a4260
int __read_lk(uint param_1, char *param_2, DWORD param_3)

{
    int *piVar1;
    char cVar2;
    byte bVar3;
    BOOL BVar4;
    DWORD DVar5;
    undefined_32 *puVar6;
    int iVar7;
    int iVar8;
    char *pcVar9;
    char *pcVar10;
    char *pcVar11;
    char local_9;
    DWORD local_8;
    int *local_4;

    iVar8 = 0;
    if (param_3 != 0)
    {
        piVar1 = &DAT_00ecd500 + ((int)param_1 >> 5);
        iVar7 = (param_1 & 0x1f) * 0x24;
        bVar3 = *(byte *)(iVar7 + 4 + (&DAT_00ecd500)[(int)param_1 >> 5]);
        if ((bVar3 & 2) == 0)
        {
            pcVar10 = param_2;
            if (((bVar3 & 0x48) != 0)
                && (cVar2 = *(char *)(iVar7 + (&DAT_00ecd500)[(int)param_1 >> 5] + 5), cVar2 != '\n'))
            {
                *param_2 = cVar2;
                param_3 = param_3 - 1;
                pcVar10 = param_2 + 1;
                iVar8 = 1;
                *(undefined_8 *)(iVar7 + 5 + *piVar1) = 10;
            }
            local_4 = piVar1;
            BVar4 = ReadFile(*(HANDLE *)(iVar7 + *piVar1), pcVar10, param_3, &local_8, (LPOVERLAPPED)0x0);
            if (BVar4 != 0)
            {
                iVar8 = iVar8 + local_8;
                bVar3 = *(byte *)(iVar7 + 4 + *piVar1);
                if ((bVar3 & 0x80) != 0)
                {
                    if ((local_8 == 0) || (*param_2 != '\n'))
                    {
                        bVar3 = bVar3 & 0xfb;
                    }
                    else
                    {
                        bVar3 = bVar3 | 4;
                    }
                    *(byte *)(iVar7 + 4 + *piVar1) = bVar3;
                    pcVar9 = param_2 + iVar8;
                    pcVar10 = param_2;
                    pcVar11 = param_2;
                    if (param_2 < pcVar9)
                    {
                        while (cVar2 = *pcVar11, cVar2 != '\x1a')
                        {
                            if (cVar2 == '\r')
                            {
                                if (pcVar11 < pcVar9 + -1)
                                {
                                    if (pcVar11[1] == '\n')
                                    {
                                        pcVar11 = pcVar11 + 2;
                                        *pcVar10 = '\n';
                                        goto LAB_004a4438;
                                    }
                                    *pcVar10 = '\r';
                                    pcVar10 = pcVar10 + 1;
                                    pcVar11 = pcVar11 + 1;
                                }
                                else
                                {
                                    DVar5 = 0;
                                    pcVar11 = pcVar11 + 1;
                                    BVar4 = ReadFile(*(HANDLE *)(iVar7 + *local_4), &local_9, 1, &local_8,
                                                     (LPOVERLAPPED)0x0);
                                    if (BVar4 == 0)
                                    {
                                        DVar5 = GetLastError();
                                    }
                                    if ((DVar5 == 0) && (local_8 != 0))
                                    {
                                        if ((*(byte *)(iVar7 + 4 + *local_4) & 0x48) == 0)
                                        {
                                            if ((pcVar10 == param_2) && (local_9 == '\n'))
                                            {
                                                *pcVar10 = '\n';
                                                goto LAB_004a4438;
                                            }
                                            __lseek_lk(param_1, -1, 1);
                                            if (local_9 != '\n')
                                                goto LAB_004a4435;
                                        }
                                        else
                                        {
                                            if (local_9 == '\n')
                                            {
                                                *pcVar10 = '\n';
                                                goto LAB_004a4438;
                                            }
                                            *pcVar10 = '\r';
                                            pcVar10 = pcVar10 + 1;
                                            *(char *)(iVar7 + 5 + *local_4) = local_9;
                                        }
                                    }
                                    else
                                    {
                                    LAB_004a4435:
                                        *pcVar10 = '\r';
                                    LAB_004a4438:
                                        pcVar10 = pcVar10 + 1;
                                    }
                                }
                            }
                            else
                            {
                                *pcVar10 = cVar2;
                                pcVar10 = pcVar10 + 1;
                                pcVar11 = pcVar11 + 1;
                            }
                            if (pcVar9 <= pcVar11)
                            {
                                return (int)pcVar10 - (int)param_2;
                            }
                        }
                        bVar3 = *(byte *)(iVar7 + 4 + *local_4);
                        if ((bVar3 & 0x40) == 0)
                        {
                            *(byte *)(iVar7 + 4 + *local_4) = bVar3 | 2;
                        }
                    }
                    iVar8 = (int)pcVar10 - (int)param_2;
                }
                return iVar8;
            }
            DVar5 = GetLastError();
            if (DVar5 == 5)
            {
                puVar6 = (undefined_32 *)__errno();
                *puVar6 = 9;
                puVar6 = (undefined_32 *)___doserrno();
                *puVar6 = 5;
                return -1;
            }
            if (DVar5 != 0x6d)
            {
                __dosmaperr(DVar5);
                return -1;
            }
        }
    }
    return 0;
}

// static import 004a4490
undefined_32 __write(uint param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    undefined_32 *puVar2;

    if ((param_1 < DAT_00ecd600)
        && ((*(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0))
    {
        __lock_fhandle(param_1);
        uVar1 = __write_lk(param_1, param_2, param_3);
        __unlock_fhandle(param_1);
        return uVar1;
    }
    puVar2 = (undefined_32 *)__errno();
    *puVar2 = 9;
    puVar2 = (undefined_32 *)___doserrno();
    *puVar2 = 0;
    return -1;
}

// static import 004a4510
int __write_lk(uint param_1, char *param_2, uint param_3)

{
    int *piVar1;
    char cVar2;
    char *pcVar3;
    BOOL BVar4;
    undefined_32 *puVar5;
    int iVar6;
    char *pcVar7;
    DWORD local_41c;
    DWORD local_414;
    DWORD local_410;
    int local_40c;
    int *local_408;
    char local_404[1028];

    local_41c = 0;
    local_40c = 0;
    if (param_3 == 0)
    {
        return 0;
    }
    piVar1 = &DAT_00ecd500 + ((int)param_1 >> 5);
    iVar6 = (param_1 & 0x1f) * 0x24;
    local_408 = piVar1;
    if ((*(byte *)(iVar6 + 4 + *piVar1) & 0x20) != 0)
    {
        __lseek_lk(param_1, 0, 2);
    }
    if ((*(byte *)((HANDLE *)(*piVar1 + iVar6) + 1) & 0x80) == 0)
    {
        BVar4 = WriteFile(*(HANDLE *)(*piVar1 + iVar6), param_2, param_3, &local_410, (LPOVERLAPPED)0x0);
        if (BVar4 == 0)
        {
            local_414 = GetLastError();
        }
        else
        {
            local_41c = local_410;
            local_414 = 0;
        }
    }
    else
    {
        local_414 = 0;
        pcVar7 = param_2;
        if (param_3 != 0)
        {
            do
            {
                pcVar3 = local_404;
                do
                {
                    if (param_3 <= (uint)((int)pcVar7 - (int)param_2))
                        break;
                    cVar2 = *pcVar7;
                    pcVar7 = pcVar7 + 1;
                    if (cVar2 == '\n')
                    {
                        *pcVar3 = '\r';
                        local_40c = local_40c + 1;
                        pcVar3 = pcVar3 + 1;
                    }
                    *pcVar3 = cVar2;
                    pcVar3 = pcVar3 + 1;
                } while ((int)pcVar3 - (int)local_404 < 0x400);
                BVar4 = WriteFile(*(HANDLE *)(iVar6 + *local_408), local_404, (int)pcVar3 - (int)local_404, &local_410,
                                  (LPOVERLAPPED)0x0);
                if (BVar4 == 0)
                {
                    local_414 = GetLastError();
                    break;
                }
                local_41c = local_41c + local_410;
                if (((int)local_410 < (int)pcVar3 - (int)local_404) || (param_3 <= (uint)((int)pcVar7 - (int)param_2)))
                    break;
            } while (true);
        }
    }
    if (local_41c != 0)
    {
        return local_41c - local_40c;
    }
    if (local_414 == 0)
    {
        if (((*(byte *)(iVar6 + 4 + *local_408) & 0x40) != 0) && (*param_2 == '\x1a'))
        {
            return 0;
        }
        puVar5 = (undefined_32 *)__errno();
        *puVar5 = 0x1c;
        puVar5 = (undefined_32 *)___doserrno();
        *puVar5 = 0;
        return -1;
    }
    if (local_414 != 5)
    {
        __dosmaperr(local_414);
        return -1;
    }
    puVar5 = (undefined_32 *)__errno();
    *puVar5 = 9;
    puVar5 = (undefined_32 *)___doserrno();
    *puVar5 = 5;
    return -1;
}

// static import 004a4720
int __alloc_osfhnd(void)

{
    undefined_32 *puVar1;
    int iVar2;
    int *piVar3;
    int local_8;
    int local_4;

    local_8 = -1;
    __lock(0x12);
    local_4 = 0;
    iVar2 = 0;
    piVar3 = &DAT_00ecd500;
    do
    {
        puVar1 = (undefined_32 *)*piVar3;
        if (puVar1 == NULL)
        {
            puVar1 = (undefined_32 *)_malloc(0x480);
            if (puVar1 != NULL)
            {
                DAT_00ecd600 = DAT_00ecd600 + 0x20;
                (&DAT_00ecd500)[local_4] = puVar1;
                if (puVar1 < puVar1 + 0x120)
                {
                    do
                    {
                        *(undefined_8 *)(puVar1 + 1) = 0;
                        *puVar1 = -1;
                        *(undefined_8 *)((int)puVar1 + 5) = 10;
                        puVar1[2] = 0;
                        puVar1 = puVar1 + 9;
                    } while (puVar1 < (undefined_32 *)((&DAT_00ecd500)[local_4] + 0x480));
                }
                local_8 = local_4 << 5;
                __lock_fhandle(local_8);
            }
            break;
        }
        if (puVar1 < puVar1 + 0x120)
        {
            do
            {
                if ((*(byte *)(puVar1 + 1) & 1) == 0)
                {
                    if (puVar1[2] == 0)
                    {
                        __lock(0x11);
                        if (puVar1[2] == 0)
                        {
                            InitializeCriticalSection((LPCRITICAL_SECTION)(puVar1 + 3));
                            puVar1[2] = puVar1[2] + 1;
                        }
                        __unlock(0x11);
                    }
                    EnterCriticalSection((LPCRITICAL_SECTION)(puVar1 + 3));
                    if ((*(byte *)(puVar1 + 1) & 1) == 0)
                    {
                        *puVar1 = -1;
                        local_8 = ((int)puVar1 - *piVar3) / 0x24 + iVar2;
                        break;
                    }
                    LeaveCriticalSection((LPCRITICAL_SECTION)(puVar1 + 3));
                }
                puVar1 = puVar1 + 9;
            } while (puVar1 < (undefined_32 *)(*piVar3 + 0x480));
        }
        if (local_8 != -1)
            break;
        piVar3 = piVar3 + 1;
        local_4 = local_4 + 1;
        iVar2 = iVar2 + 0x20;
    } while ((int)piVar3 < 0xecd600);
    __unlock(0x12);
    return local_8;
}

// static import 004a4890
undefined_32 __set_osfhnd(uint param_1, HANDLE param_2)

{
    int *piVar1;
    undefined_32 *puVar2;
    int iVar3;

    if (param_1 < DAT_00ecd600)
    {
        piVar1 = &DAT_00ecd500 + ((int)param_1 >> 5);
        iVar3 = (param_1 & 0x1f) * 0x24;
        if (*(int *)(*piVar1 + iVar3) == -1)
        {
            if (DAT_004d1fb4 == 1)
            {
                if (param_1 == 0)
                {
                    SetStdHandle(0xfffffff6, param_2);
                }
                else
                {
                    if (param_1 == 1)
                    {
                        SetStdHandle(0xfffffff5, param_2);
                        *(HANDLE *)(*piVar1 + iVar3) = param_2;
                        return 0;
                    }
                    if (param_1 == 2)
                    {
                        SetStdHandle(0xfffffff4, param_2);
                        *(HANDLE *)(*piVar1 + iVar3) = param_2;
                        return 0;
                    }
                }
            }
            *(HANDLE *)(*piVar1 + iVar3) = param_2;
            return 0;
        }
    }
    puVar2 = (undefined_32 *)__errno();
    *puVar2 = 9;
    puVar2 = (undefined_32 *)___doserrno();
    *puVar2 = 0;
    return -1;
}

// static import 004a4940
undefined_32 __free_osfhnd(uint param_1)

{
    int iVar1;
    undefined_32 *puVar2;
    int iVar3;
    DWORD nStdHandle;

    if (param_1 < DAT_00ecd600)
    {
        iVar1 = (&DAT_00ecd500)[(int)param_1 >> 5];
        iVar3 = (param_1 & 0x1f) * 0x24;
        if (((*(byte *)(iVar1 + 4 + iVar3) & 1) != 0) && (*(int *)(iVar1 + iVar3) != -1))
        {
            if (DAT_004d1fb4 == 1)
            {
                if (param_1 == 0)
                {
                    nStdHandle = 0xfffffff6;
                }
                else if (param_1 == 1)
                {
                    nStdHandle = 0xfffffff5;
                }
                else
                {
                    if (param_1 != 2)
                        goto LAB_004a49a7;
                    nStdHandle = 0xfffffff4;
                }
                SetStdHandle(nStdHandle, (HANDLE)0x0);
            }
        LAB_004a49a7:
            *(undefined_32 *)((&DAT_00ecd500)[(int)param_1 >> 5] + iVar3) = -1;
            return 0;
        }
    }
    puVar2 = (undefined_32 *)__errno();
    *puVar2 = 9;
    puVar2 = (undefined_32 *)___doserrno();
    *puVar2 = 0;
    return -1;
}

// static import 004a49e0
undefined_32 __get_osfhandle(uint param_1)

{
    undefined_32 *puVar1;

    if ((param_1 < DAT_00ecd600)
        && ((*(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 1) != 0))
    {
        return *(undefined_32 *)((&DAT_00ecd500)[(int)param_1 >> 5] + (param_1 & 0x1f) * 0x24);
    }
    puVar1 = (undefined_32 *)__errno();
    *puVar1 = 9;
    puVar1 = (undefined_32 *)___doserrno();
    *puVar1 = 0;
    return -1;
}

// static import 004a4a30
void __lock_fhandle(uint param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = (param_1 & 0x1f) * 0x24;
    iVar1 = (&DAT_00ecd500)[(int)param_1 >> 5] + iVar2;
    if (*(int *)(iVar1 + 8) == 0)
    {
        __lock(0x11);
        if (*(int *)(iVar1 + 8) == 0)
        {
            InitializeCriticalSection((LPCRITICAL_SECTION)(iVar1 + 0xc));
            *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + 1;
        }
        __unlock(0x11);
    }
    EnterCriticalSection((LPCRITICAL_SECTION)((&DAT_00ecd500)[(int)param_1 >> 5] + 0xc + iVar2));
    return;
}

// static import 004a4aa0
void __unlock_fhandle(uint param_1)

{
    LeaveCriticalSection((LPCRITICAL_SECTION)((&DAT_00ecd500)[(int)param_1 >> 5] + 0xc + (param_1 & 0x1f) * 0x24));
    return;
}

// static import 004a4ad0
int __chsize_lk(void)

{
    int iVar1;
    int iVar2;
    undefined_32 uVar3;
    int *piVar4;
    undefined_32 *puVar5;
    HANDLE hFile;
    BOOL BVar6;
    DWORD DVar7;
    DWORD *pDVar8;
    int iVar9;
    int iVar10;
    undefined_32 in_stack_00001008;
    int in_stack_0000100c;

    __alloca_probe();
    iVar10 = 0;
    iVar1 = __lseek_lk(in_stack_00001008, 0, 1);
    if ((iVar1 == -1) || (iVar2 = __lseek_lk(in_stack_00001008, 0, 2), iVar2 == -1))
    {
        return -1;
    }
    iVar2 = in_stack_0000100c - iVar2;
    if (iVar2 < 1)
    {
        if (iVar2 < 0)
        {
            __lseek_lk(in_stack_00001008, in_stack_0000100c, 0);
            hFile = (HANDLE)__get_osfhandle(in_stack_00001008);
            BVar6 = SetEndOfFile(hFile);
            iVar10 = (BVar6 != 0) - 1;
            if (iVar10 == -1)
            {
                puVar5 = (undefined_32 *)__errno();
                *puVar5 = 0xd;
                DVar7 = GetLastError();
                pDVar8 = (DWORD *)___doserrno();
                *pDVar8 = DVar7;
            }
        }
        __lseek_lk(in_stack_00001008, iVar1, 0);
        return iVar10;
    }
    puVar5 = (undefined_32 *)&stack0x00000004;
    MEMSET(iVar9, puVar5, 0, 0x400)
    uVar3 = __setmode_lk(in_stack_00001008, 0x8000);
    while (true)
    {
        iVar9 = 0x1000;
        if (iVar2 < 0x1000)
        {
            iVar9 = iVar2;
        }
        iVar9 = __write_lk(in_stack_00001008, &stack0x00000004, iVar9);
        if (iVar9 == -1)
            break;
        iVar2 = iVar2 - iVar9;
        if (iVar2 < 1)
        {
        LAB_004a4b8a:
            __setmode_lk(in_stack_00001008, uVar3);
            __lseek_lk(in_stack_00001008, iVar1, 0);
            return iVar10;
        }
    }
    piVar4 = (int *)___doserrno();
    if (*piVar4 == 5)
    {
        puVar5 = (undefined_32 *)__errno();
        *puVar5 = 0xd;
    }
    iVar10 = -1;
    goto LAB_004a4b8a;
}

// missing 004A4C20 __XcptFilter from swep1r-re static import
// and 004A4E30 _xcptlookup

// static import 004a4e70
void __ismbblead(undefined_32 param_1)

{
    _x_ismbbtype(param_1, 0, 4);
    return;
}

// static import 004a4e90
undefined_32 _x_ismbbtype(uint param_1, uint param_2, byte param_3)

{
    if ((*(byte *)((int)&DAT_00dfac88 + (param_1 & 0xff) + 1) & param_3) == 0)
    {
        if (param_2 == 0)
        {
            param_2 = 0;
        }
        else
        {
            param_2 = *(ushort *)(&DAT_004d1d9a + (param_1 & 0xff) * 2) & param_2;
        }
        if (param_2 == 0)
        {
            return 0;
        }
    }
    return 1;
}

// static import 004a4ed0
void __setenvp(void)

{
    char cVar1;
    char cVar2;
    int *piVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    char *pcVar7;
    int iVar8;
    undefined_32 *puVar9;
    char *pcVar10;
    char *pcVar11;
    undefined_32 *puVar12;
    int *local_4;

    iVar8 = 0;
    cVar2 = *DAT_00dfaac0;
    pcVar7 = DAT_00dfaac0;
    while (cVar2 != '\0')
    {
        if (cVar2 != '=')
        {
            iVar8 = iVar8 + 1;
        }
        uVar4 = -1;
        pcVar10 = pcVar7;
        do
        {
            if (uVar4 == 0)
                break;
            uVar4 = uVar4 - 1;
            cVar2 = *pcVar10;
            pcVar10 = pcVar10 + 1;
        } while (cVar2 != '\0');
        pcVar10 = pcVar7 + ~uVar4;
        pcVar7 = pcVar7 + ~uVar4;
        cVar2 = *pcVar10;
    }
    piVar3 = (int *)_malloc(iVar8 * 4 + 4);
    DAT_00dfaa94 = piVar3;
    if (piVar3 == NULL)
    {
        __amsg_exit(9);
    }
    cVar2 = *DAT_00dfaac0;
    local_4 = piVar3;
    pcVar7 = DAT_00dfaac0;
    do
    {
        if (cVar2 == '\0')
        {
            _free(DAT_00dfaac0);
            DAT_00dfaac0 = NULL;
            *piVar3 = 0;
            return;
        }
        uVar4 = -1;
        pcVar10 = pcVar7;
        do
        {
            if (uVar4 == 0)
                break;
            uVar4 = uVar4 - 1;
            cVar1 = *pcVar10;
            pcVar10 = pcVar10 + 1;
        } while (cVar1 != '\0');
        uVar4 = ~uVar4;
        if (cVar2 != '=')
        {
            iVar8 = _malloc(uVar4);
            *piVar3 = iVar8;
            if (iVar8 == 0)
            {
                __amsg_exit(9);
            }
            uVar5 = -1;
            pcVar10 = pcVar7;
            do
            {
                pcVar11 = pcVar10;
                if (uVar5 == 0)
                    break;
                uVar5 = uVar5 - 1;
                pcVar11 = pcVar10 + 1;
                cVar2 = *pcVar10;
                pcVar10 = pcVar11;
            } while (cVar2 != '\0');
            uVar5 = ~uVar5;
            puVar9 = (undefined_32 *)(pcVar11 + -uVar5);
            puVar12 = (undefined_32 *)*local_4;
            QMEMCPY(uVar6, puVar9, puVar12, uVar5 >> 2)
            piVar3 = local_4 + 1;
            for (uVar5 = uVar5 & 3; local_4 = piVar3, uVar5 != 0; uVar5 = uVar5 - 1)
            {
                *(undefined_8 *)puVar12 = *(undefined_8 *)puVar9;
                puVar9 = (undefined_32 *)((int)puVar9 + 1);
                puVar12 = (undefined_32 *)((int)puVar12 + 1);
            }
        }
        cVar2 = pcVar7[uVar4];
        pcVar7 = pcVar7 + uVar4;
    } while (true);
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// static import 004a4fc0
void __setargv(void)

{
    int iVar1;
    char *pcVar2;
    int local_8;
    int local_4;

    GetModuleFileNameA((HMODULE)0x0, &DAT_00dfab78, 0x104);
    _DAT_00dfaaa4 = &DAT_00dfab78;
    pcVar2 = DAT_00ecd610;
    if (*DAT_00ecd610 == '\0')
    {
        pcVar2 = &DAT_00dfab78;
    }
    _parse_cmdline(pcVar2, 0, 0, &local_8, &local_4);
    iVar1 = _malloc(local_4 + local_8 * 4);
    if (iVar1 == 0)
    {
        __amsg_exit(8);
    }
    _parse_cmdline(pcVar2, iVar1, iVar1 + local_8 * 4, &local_8, &local_4);
    _DAT_00dfaa8c = iVar1;
    _DAT_00dfaa88 = local_8 + -1;
    return;
}

// static import 004a5060
void _parse_cmdline(byte *param_1, byte **param_2, byte *param_3, int *param_4, int *param_5)

{
    byte *pbVar1;
    byte bVar2;
    bool bVar3;
    bool bVar4;
    bool bVar5;
    int *piVar6;
    byte *pbVar7;
    uint uVar8;

    piVar6 = param_5;
    *param_5 = 0;
    *param_4 = 1;
    if (param_2 != (byte **)0x0)
    {
        *param_2 = param_3;
        param_2 = param_2 + 1;
    }
    if (*param_1 == 0x22)
    {
        pbVar7 = param_1 + 1;
        bVar2 = param_1[1];
        while ((bVar2 != 0x22 && (bVar2 != 0)))
        {
            if (((*(byte *)((int)&DAT_00dfac88 + bVar2 + 1) & 4) != 0) && (*param_5 = *param_5 + 1, param_3 != NULL))
            {
                *param_3 = *pbVar7;
                param_3 = param_3 + 1;
                pbVar7 = pbVar7 + 1;
            }
            *param_5 = *param_5 + 1;
            if (param_3 != NULL)
            {
                *param_3 = *pbVar7;
                param_3 = param_3 + 1;
            }
            pbVar1 = pbVar7 + 1;
            pbVar7 = pbVar7 + 1;
            bVar2 = *pbVar1;
        }
        *param_5 = *param_5 + 1;
        if (param_3 != NULL)
        {
            *param_3 = 0;
            param_3 = param_3 + 1;
        }
        if (*pbVar7 == 0x22)
        {
            pbVar7 = pbVar7 + 1;
        }
    }
    else
    {
        do
        {
            *piVar6 = *piVar6 + 1;
            if (param_3 != NULL)
            {
                *param_3 = *param_1;
                param_3 = param_3 + 1;
            }
            bVar2 = *param_1;
            pbVar7 = param_1 + 1;
            param_5 = (int *)(uint)bVar2;
            if ((*(byte *)((int)&DAT_00dfac88 + (int)param_5 + 1U) & 4) != 0)
            {
                *piVar6 = *piVar6 + 1;
                if (param_3 != NULL)
                {
                    *param_3 = *pbVar7;
                    param_3 = param_3 + 1;
                }
                pbVar7 = param_1 + 2;
            }
            if (bVar2 == 0x20)
                break;
            if (bVar2 == 0)
                goto LAB_004a5139;
            param_1 = pbVar7;
        } while (bVar2 != 9);
        if (bVar2 == 0)
        {
        LAB_004a5139:
            pbVar7 = pbVar7 + -1;
        }
        else if (param_3 != NULL)
        {
            param_3[-1] = 0;
        }
    }
    bVar4 = false;
    bVar5 = false;
    while (*pbVar7 != 0)
    {
        for (; (*pbVar7 == 0x20 || (*pbVar7 == 9)); pbVar7 = pbVar7 + 1)
        {}
        if (*pbVar7 == 0)
            break;
        if (param_2 != (byte **)0x0)
        {
            *param_2 = param_3;
            param_2 = param_2 + 1;
        }
        *param_4 = *param_4 + 1;
        while (true)
        {
            uVar8 = 0;
            bVar3 = true;
            bVar2 = *pbVar7;
            while (bVar2 == 0x5c)
            {
                pbVar1 = pbVar7 + 1;
                pbVar7 = pbVar7 + 1;
                uVar8 = uVar8 + 1;
                bVar2 = *pbVar1;
            }
            if (*pbVar7 == 0x22)
            {
                if ((uVar8 & 1) == 0)
                {
                    if ((bVar4) && (pbVar7[1] == 0x22))
                    {
                        pbVar7 = pbVar7 + 1;
                    }
                    else
                    {
                        bVar3 = false;
                    }
                    bVar4 = !bVar5;
                    bVar5 = bVar4;
                }
                uVar8 = uVar8 >> 1;
            }
            for (; uVar8 != 0; uVar8 = uVar8 - 1)
            {
                if (param_3 != NULL)
                {
                    *param_3 = 0x5c;
                    param_3 = param_3 + 1;
                }
                *piVar6 = *piVar6 + 1;
            }
            bVar2 = *pbVar7;
            if ((bVar2 == 0) || ((!bVar4 && ((bVar2 == 0x20 || (bVar2 == 9))))))
                break;
            if (bVar3)
            {
                if (param_3 == NULL)
                {
                    if ((*(byte *)((int)&DAT_00dfac88 + bVar2 + 1) & 4) != 0)
                    {
                        pbVar7 = pbVar7 + 1;
                        *piVar6 = *piVar6 + 1;
                    }
                    *piVar6 = *piVar6 + 1;
                    goto LAB_004a5235;
                }
                if ((*(byte *)((int)&DAT_00dfac88 + bVar2 + 1) & 4) != 0)
                {
                    *param_3 = bVar2;
                    param_3 = param_3 + 1;
                    pbVar7 = pbVar7 + 1;
                    *piVar6 = *piVar6 + 1;
                }
                *param_3 = *pbVar7;
                param_3 = param_3 + 1;
                *piVar6 = *piVar6 + 1;
                pbVar7 = pbVar7 + 1;
            }
            else
            {
            LAB_004a5235:
                pbVar7 = pbVar7 + 1;
            }
        }
        if (param_3 != NULL)
        {
            *param_3 = 0;
            param_3 = param_3 + 1;
        }
        *piVar6 = *piVar6 + 1;
    }
    if (param_2 != (byte **)0x0)
    {
        *param_2 = NULL;
    }
    *param_4 = *param_4 + 1;
    return;
}

// static import 004a5270
undefined_32 *___crtGetEnvironmentStringsA(void)

{
    char cVar1;
    WCHAR WVar2;
    WCHAR *pWVar3;
    int iVar5;
    int cbMultiByte;
    undefined_32 *puVar6;
    uint uVar7;
    uint uVar8;
    undefined_32 *puVar9;
    LPWCH lpWideCharStr;
    undefined_32 *puVar10;
    undefined_32 *puVar11;
    WCHAR *pWVar4;

    lpWideCharStr = (LPWCH)0x0;
    puVar9 = NULL;
    if (DAT_00dfac80 == 0)
    {
        lpWideCharStr = GetEnvironmentStringsW();
        if (lpWideCharStr == (LPWCH)0x0)
        {
            puVar9 = (undefined_32 *)GetEnvironmentStrings();
            if (puVar9 == NULL)
            {
                return NULL;
            }
            DAT_00dfac80 = 2;
        }
        else
        {
            DAT_00dfac80 = 1;
        }
    }
    if (DAT_00dfac80 == 1)
    {
        if ((lpWideCharStr != (LPWCH)0x0) || (lpWideCharStr = GetEnvironmentStringsW(), lpWideCharStr != (LPWCH)0x0))
        {
            WVar2 = *lpWideCharStr;
            pWVar3 = lpWideCharStr;
            while (WVar2 != L'\0')
            {
                do
                {
                    pWVar4 = pWVar3;
                    pWVar3 = pWVar4 + 1;
                } while (*pWVar3 != L'\0');
                pWVar3 = pWVar4 + 2;
                WVar2 = *pWVar3;
            }
            iVar5 = ((int)pWVar3 - (int)lpWideCharStr >> 1) + 1;
            cbMultiByte = WideCharToMultiByte(0, 0, lpWideCharStr, iVar5, (LPSTR)0x0, 0, (LPCSTR)0x0, (LPBOOL)0x0);
            if ((cbMultiByte != 0) && (puVar9 = (undefined_32 *)_malloc(cbMultiByte), puVar9 != NULL))
            {
                iVar5 = WideCharToMultiByte(0, 0, lpWideCharStr, iVar5, (LPSTR)puVar9, cbMultiByte, (LPCSTR)0x0,
                                            (LPBOOL)0x0);
                if (iVar5 == 0)
                {
                    _free(puVar9);
                    puVar9 = NULL;
                }
                FreeEnvironmentStringsW(lpWideCharStr);
                return puVar9;
            }
            FreeEnvironmentStringsW(lpWideCharStr);
            return NULL;
        }
    }
    else if ((DAT_00dfac80 == 2)
             && ((puVar9 != NULL || (puVar9 = (undefined_32 *)GetEnvironmentStrings(), puVar9 != NULL))))
    {
        cVar1 = *(char *)puVar9;
        puVar6 = puVar9;
        while (cVar1 != '\0')
        {
            do
            {
                puVar10 = puVar6;
                puVar6 = (undefined_32 *)((int)puVar10 + 1);
            } while (*(char *)((int)puVar10 + 1) != '\0');
            puVar6 = (undefined_32 *)((int)puVar10 + 2);
            cVar1 = *(char *)((int)puVar10 + 2);
        }
        uVar7 = (int)puVar6 + (1 - (int)puVar9);
        puVar6 = (undefined_32 *)_malloc(uVar7);
        if (puVar6 != NULL)
        {
            puVar10 = puVar9;
            puVar11 = puVar6;
            QMEMCPY(uVar8, puVar10, puVar11, uVar7 >> 2)
            for (uVar7 = uVar7 & 3; uVar7 != 0; uVar7 = uVar7 - 1)
            {
                *(undefined_8 *)puVar11 = *(undefined_8 *)puVar10;
                puVar10 = (undefined_32 *)((int)puVar10 + 1);
                puVar11 = (undefined_32 *)((int)puVar11 + 1);
            }
            FreeEnvironmentStringsA((LPCH)puVar9);
            return puVar6;
        }
        FreeEnvironmentStringsA((LPCH)puVar9);
        return NULL;
    }
    return NULL;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

undefined_32 FUN_004a53d0(undefined_32 param_1)

{
    BYTE *pBVar1;
    byte *pbVar2;
    byte bVar3;
    byte bVar4;
    UINT CodePage;
    UINT *pUVar5;
    BOOL BVar6;
    uint uVar7;
    uint uVar8;
    int iVar9;
    int iVar10;
    BYTE *pBVar11;
    byte *pbVar12;
    byte *pbVar13;
    undefined_32 *puVar14;
    _cpinfo local_14;

    __lock(0x19);
    CodePage = _getSystemCP(param_1);
    if (CodePage == DAT_00dfae90)
    {
        __unlock(0x19);
        return 0;
    }
    if (CodePage == 0)
    {
        _setSBCS();
        FUN_004a56f0();
        __unlock(0x19);
        return 0;
    }
    iVar10 = 0;
    pUVar5 = &DAT_004d4458;
    do
    {
        if (*pUVar5 == CodePage)
        {
            puVar14 = &DAT_00dfac88;
            MEMSET(iVar9, puVar14, 0, 0x40)
            *(undefined_8 *)puVar14 = 0;
            uVar7 = 0;
            pbVar12 = &DAT_004d4468 + iVar10 * 0x30;
            do
            {
                bVar3 = *pbVar12;
                for (pbVar13 = pbVar12; (bVar3 != 0 && (bVar3 = pbVar13[1], bVar3 != 0)); pbVar13 = pbVar13 + 2)
                {
                    uVar8 = (uint)*pbVar13;
                    if (uVar8 <= bVar3)
                    {
                        bVar4 = (&DAT_004d4450)[uVar7];
                        do
                        {
                            pbVar2 = (byte *)((int)&DAT_00dfac88 + uVar8 + 1);
                            *pbVar2 = *pbVar2 | bVar4;
                            uVar8 = uVar8 + 1;
                        } while (uVar8 <= bVar3);
                    }
                    bVar3 = pbVar13[2];
                }
                uVar7 = uVar7 + 1;
                pbVar12 = pbVar12 + 8;
            } while (uVar7 < 4);
            _DAT_00ecd4e4 = 1;
            DAT_00dfae90 = CodePage;
            DAT_00dfae94 = _CPtoLCID(CodePage);
            _DAT_00dfae98 = (&DAT_004d445c)[iVar10 * 0xc];
            _DAT_00dfae9c = (&DAT_004d4460)[iVar10 * 0xc];
            _DAT_00dfaea0 = (&DAT_004d4464)[iVar10 * 0xc];
            goto LAB_004a5522;
        }
        pUVar5 = pUVar5 + 0xc;
        iVar10 = iVar10 + 1;
    } while (pUVar5 < &DAT_004d4548);
    BVar6 = GetCPInfo(CodePage, &local_14);
    if (BVar6 == 1)
    {
        puVar14 = &DAT_00dfac88;
        MEMSET(iVar10, puVar14, 0, 0x40)
        *(undefined_8 *)puVar14 = 0;
        DAT_00dfae94 = 0;
        if (local_14.MaxCharSize < 2)
        {
            _DAT_00ecd4e4 = 0;
            DAT_00dfae90 = CodePage;
        }
        else
        {
            DAT_00dfae90 = CodePage;
            if (local_14.LeadByte[0] != '\0')
            {
                pBVar11 = local_14.LeadByte + 1;
                do
                {
                    bVar3 = *pBVar11;
                    if (bVar3 == 0)
                        break;
                    for (uVar7 = (uint)pBVar11[-1]; uVar7 <= bVar3; uVar7 = uVar7 + 1)
                    {
                        *(byte *)((int)&DAT_00dfac88 + uVar7 + 1) = *(byte *)((int)&DAT_00dfac88 + uVar7 + 1) | 4;
                    }
                    pBVar1 = pBVar11 + 1;
                    pBVar11 = pBVar11 + 2;
                } while (*pBVar1 != 0);
            }
            uVar7 = 1;
            do
            {
                *(byte *)((int)&DAT_00dfac88 + uVar7 + 1) = *(byte *)((int)&DAT_00dfac88 + uVar7 + 1) | 8;
                uVar7 = uVar7 + 1;
            } while (uVar7 < 0xff);
            DAT_00dfae94 = _CPtoLCID(CodePage);
            _DAT_00ecd4e4 = 1;
        }
        _DAT_00dfae98 = 0;
        _DAT_00dfae9c = 0;
        _DAT_00dfaea0 = 0;
    }
    else
    {
        if (DAT_00dfaea4 == 0)
        {
            __unlock(0x19);
            return -1;
        }
        _setSBCS();
    }
LAB_004a5522:
    FUN_004a56f0();
    __unlock(0x19);
    return 0;
}

// static import 004a5600
int _getSystemCP(int param_1)

{
    int iVar1;
    bool bVar2;

    if (param_1 == -2)
    {
        DAT_00dfaea4 = 1;
        // WARNING: Could not recover jumptable at 0x004a561d. Too many branches
        // WARNING: Treating indirect jump as call
        iVar1 = GetOEMCP();
        return iVar1;
    }
    if (param_1 == -3)
    {
        DAT_00dfaea4 = 1;
        // WARNING: Could not recover jumptable at 0x004a5632. Too many branches
        // WARNING: Treating indirect jump as call
        iVar1 = GetACP();
        return iVar1;
    }
    bVar2 = param_1 == -4;
    if (bVar2)
    {
        param_1 = DAT_00dfab48;
    }
    DAT_00dfaea4 = (uint)bVar2;
    return param_1;
}

// static import 004a5650
undefined_32 _CPtoLCID(undefined_32 param_1)

{
    switch (param_1)
    {
    case 0x3a4:
        return 0x411;
    default:
        return 0;
    case 0x3a8:
        return 0x804;
    case 0x3b5:
        return 0x412;
    case 0x3b6:
        return 0x404;
    }
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// static import 004a56b0
void _setSBCS(void)

{
    int iVar1;
    undefined_32 *puVar2;

    puVar2 = &DAT_00dfac88;
    MEMSET(iVar1, puVar2, 0, 0x40)
    *(undefined_8 *)puVar2 = 0;
    DAT_00dfae90 = 0;
    _DAT_00ecd4e4 = 0;
    DAT_00dfae94 = 0;
    _DAT_00dfae98 = 0;
    _DAT_00dfae9c = 0;
    _DAT_00dfaea0 = 0;
    return;
}

void FUN_004a56f0(void)

{
    BOOL BVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    BYTE *pBVar5;
    ushort *puVar6;
    undefined_32 *puVar7;
    _cpinfo local_514;
    undefined_32 local_500[64];
    undefined_8 local_400[256];
    undefined_8 local_300[256];
    ushort local_200[256];

    BVar1 = GetCPInfo(DAT_00dfae90, &local_514);
    if (BVar1 == 1)
    {
        uVar2 = 0;
        do
        {
            *(char *)((int)local_500 + uVar2) = (char)uVar2;
            uVar2 = uVar2 + 1;
        } while (uVar2 < 0x100);
        local_500[0]._0_1_ = 0x20;
        if (local_514.LeadByte[0] != 0)
        {
            pBVar5 = local_514.LeadByte + 1;
            do
            {
                uVar2 = (uint)local_514.LeadByte[0];
                if (uVar2 <= *pBVar5)
                {
                    uVar3 = (*pBVar5 - uVar2) + 1;
                    puVar7 = (undefined_32 *)((int)local_500 + uVar2);
                    MEMSET(uVar4, puVar7, 0x20202020, uVar3 >> 2)
                    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
                    {
                        *(undefined_8 *)puVar7 = 0x20;
                        puVar7 = (undefined_32 *)((int)puVar7 + 1);
                    }
                }
                local_514.LeadByte[0] = pBVar5[1];
                pBVar5 = pBVar5 + 2;
            } while (local_514.LeadByte[0] != 0);
        }
        FUN_004a3b00(1, local_500, 0x100, local_200, DAT_00dfae90, DAT_00dfae94, 0);
        FUN_004a29a0(DAT_00dfae94, 0x100, local_500, 0x100, local_400, 0x100, DAT_00dfae90, 0);
        FUN_004a29a0(DAT_00dfae94, 0x200, local_500, 0x100, local_300, 0x100, DAT_00dfae90, 0);
        uVar2 = 0;
        puVar6 = local_200;
        do
        {
            if ((*puVar6 & 1) == 0)
            {
                if ((*puVar6 & 2) == 0)
                {
                    (&DAT_00dfad90)[uVar2] = 0;
                }
                else
                {
                    *(byte *)((int)&DAT_00dfac88 + uVar2 + 1) = *(byte *)((int)&DAT_00dfac88 + uVar2 + 1) | 0x20;
                    (&DAT_00dfad90)[uVar2] = local_300[uVar2];
                }
            }
            else
            {
                *(byte *)((int)&DAT_00dfac88 + uVar2 + 1) = *(byte *)((int)&DAT_00dfac88 + uVar2 + 1) | 0x10;
                (&DAT_00dfad90)[uVar2] = local_400[uVar2];
            }
            uVar2 = uVar2 + 1;
            puVar6 = puVar6 + 1;
        } while (uVar2 < 0x100);
        return;
    }
    uVar2 = 0;
    do
    {
        if ((uVar2 < 0x41) || (0x5a < uVar2))
        {
            if ((uVar2 < 0x61) || (0x7a < uVar2))
            {
                (&DAT_00dfad90)[uVar2] = 0;
            }
            else
            {
                *(byte *)((int)&DAT_00dfac88 + uVar2 + 1) = *(byte *)((int)&DAT_00dfac88 + uVar2 + 1) | 0x20;
                (&DAT_00dfad90)[uVar2] = (char)uVar2 + -0x20;
            }
        }
        else
        {
            *(byte *)((int)&DAT_00dfac88 + uVar2 + 1) = *(byte *)((int)&DAT_00dfac88 + uVar2 + 1) | 0x10;
            (&DAT_00dfad90)[uVar2] = (char)uVar2 + ' ';
        }
        uVar2 = uVar2 + 1;
    } while (uVar2 < 0x100);
    return;
}

// static import 004a58d0
void ___initmbctable(void)

{
    FUN_004a53d0(0xfffffffd);
    return;
}

// Library Function - Single Match
//  __global_unwind2
//
// Library: Visual Studio

// static import 004A58E0
void __global_unwind2(PVOID param_1)

{
    RtlUnwind(param_1, (PVOID)0x4a58f8, (PEXCEPTION_RECORD)0x0, (PVOID)0x0);
    return;
}

// Library Function - Single Match
//  __local_unwind2
//
// Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release, Visual
// Studio 2003 Debug, Visual Studio 2003 Release

// static import 004A5922

void __local_unwind2(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    void *pvStack_1c;
    undefined_8 *puStack_18;
    undefined_32 local_14;
    int iStack_10;

    iStack_10 = param_1;
    puStack_18 = &LAB_004a5900;
    pvStack_1c = ExceptionList;
    ExceptionList = &pvStack_1c;
    while (true)
    {
        iVar1 = *(int *)(param_1 + 8);
        iVar2 = *(int *)(param_1 + 0xc);
        if ((iVar2 == -1) || (iVar2 == param_2))
            break;
        local_14 = *(undefined_32 *)(iVar1 + iVar2 * 0xc);
        *(undefined_32 *)(param_1 + 0xc) = local_14;
        if (*(int *)(iVar1 + 4 + iVar2 * 0xc) == 0)
        {
            __NLG_Notify(0x101);
            (**(code **)(iVar1 + 8 + iVar2 * 0xc))();
        }
    }
    ExceptionList = pvStack_1c;
    return;
}

// static import 004a59b6
void __NLG_Notify(void)

{
    undefined_32 in_EAX;
    int unaff_EBP;

    DAT_004d4550 = *(undefined_32 *)(unaff_EBP + 8);
    DAT_004d454c = in_EAX;
    DAT_004d4554 = unaff_EBP;
    return;
}

// static import 004a5a95
void _seh_longjmp_unwind(int param_1)

{
    __local_unwind2(*(undefined_32 *)(param_1 + 0x18), *(undefined_32 *)(param_1 + 0x1c));
    return;
}

// static import 004a5ab0
void __FF_MSGBANNER(void)

{
    if ((DAT_00dfaac8 == 1) || ((DAT_00dfaac8 == 0 && (DAT_004d1fb4 == 1))))
    {
        __NMSG_WRITE(0xfc);
        if (DAT_00dfaea8 != (code *)0x0)
        {
            (*DAT_00dfaea8)();
        }
        __NMSG_WRITE(0xff);
    }
    return;
}

// static import 004a5af0
void __NMSG_WRITE(int param_1)

{
    char cVar1;
    int *piVar2;
    DWORD DVar3;
    HANDLE hFile;
    int iVar4;
    uint uVar5;
    uint uVar6;
    undefined_32 *puVar7;
    int iVar8;
    undefined_32 *puVar9;
    undefined_32 *puVar10;
    char *pcVar11;
    char *pcVar12;
    DWORD local_1a8;
    undefined_32 local_1a4[25];
    undefined_32 auStack_140[15];
    undefined_32 local_104;

    piVar2 = &DAT_004d4558;
    iVar8 = 0;
    do
    {
        if (param_1 == *piVar2)
            break;
        piVar2 = piVar2 + 2;
        iVar8 = iVar8 + 1;
    } while (piVar2 < s______004d45e8);
    if (param_1 == (&DAT_004d4558)[iVar8 * 2])
    {
        if ((DAT_00dfaac8 == 1) || ((DAT_00dfaac8 == 0 && (DAT_004d1fb4 == 1))))
        {
            if ((DAT_00ecd500 == 0) || (hFile = *(HANDLE *)(DAT_00ecd500 + 0x48), hFile == (HANDLE)-1))
            {
                hFile = GetStdHandle(0xfffffff4);
            }
            pcVar11 = *(char **)(iVar8 * 8 + 0x4d455c);
            uVar5 = -1;
            pcVar12 = pcVar11;
            do
            {
                if (uVar5 == 0)
                    break;
                uVar5 = uVar5 - 1;
                cVar1 = *pcVar12;
                pcVar12 = pcVar12 + 1;
            } while (cVar1 != '\0');
            WriteFile(hFile, pcVar11, ~uVar5 - 1, &local_1a8, (LPOVERLAPPED)0x0);
        }
        else if (param_1 != 0xfc)
        {
            DVar3 = GetModuleFileNameA((HMODULE)0x0, (LPSTR)&local_104, 0x104);
            if (DVar3 == 0)
            {
                puVar7 = (undefined_32 *)"<program name unknown>";
                puVar9 = &local_104;
                QMEMCPY(iVar4, puVar7, puVar9, 5)
                *(undefined_16 *)puVar9 = *(undefined_16 *)puVar7;
                *(undefined_8 *)((int)puVar9 + 2) = *(undefined_8 *)((int)puVar7 + 2);
            }
            uVar5 = -1;
            puVar7 = &local_104;
            puVar9 = &local_104;
            do
            {
                if (uVar5 == 0)
                    break;
                uVar5 = uVar5 - 1;
                cVar1 = *(char *)puVar9;
                puVar9 = (undefined_32 *)((int)puVar9 + 1);
            } while (cVar1 != '\0');
            if (0x3c < ~uVar5)
            {
                uVar5 = -1;
                puVar7 = &local_104;
                do
                {
                    if (uVar5 == 0)
                        break;
                    uVar5 = uVar5 - 1;
                    cVar1 = *(char *)puVar7;
                    puVar7 = (undefined_32 *)((int)puVar7 + 1);
                } while (cVar1 != '\0');
                puVar7 = (undefined_32 *)((int)auStack_140 + ~uVar5);
                _strncpy((char *)puVar7, "...", 3);
            }
            puVar9 = (undefined_32 *)"Runtime Error!\n\nProgram: ";
            puVar10 = local_1a4;
            QMEMCPY(iVar4, puVar9, puVar10, 6)
            *(undefined_16 *)puVar10 = *(undefined_16 *)puVar9;
            uVar5 = -1;
            do
            {
                puVar9 = puVar7;
                if (uVar5 == 0)
                    break;
                uVar5 = uVar5 - 1;
                puVar9 = (undefined_32 *)((int)puVar7 + 1);
                cVar1 = *(char *)puVar7;
                puVar7 = puVar9;
            } while (cVar1 != '\0');
            uVar5 = ~uVar5;
            iVar4 = -1;
            puVar7 = local_1a4;
            do
            {
                puVar10 = puVar7;
                if (iVar4 == 0)
                    break;
                iVar4 = iVar4 + -1;
                puVar10 = (undefined_32 *)((int)puVar7 + 1);
                cVar1 = *(char *)puVar7;
                puVar7 = puVar10;
            } while (cVar1 != '\0');
            puVar7 = (undefined_32 *)((int)puVar9 - uVar5);
            puVar9 = (undefined_32 *)((int)puVar10 + -1);
            QMEMCPY(uVar6, puVar7, puVar9, uVar5 >> 2)
            for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
            {
                *(undefined_8 *)puVar9 = *(undefined_8 *)puVar7;
                puVar7 = (undefined_32 *)((int)puVar7 + 1);
                puVar9 = (undefined_32 *)((int)puVar9 + 1);
            }
            uVar5 = -1;
            pcVar11 = &DAT_004d1aa0;
            do
            {
                pcVar12 = pcVar11;
                if (uVar5 == 0)
                    break;
                uVar5 = uVar5 - 1;
                pcVar12 = pcVar11 + 1;
                cVar1 = *pcVar11;
                pcVar11 = pcVar12;
            } while (cVar1 != '\0');
            uVar5 = ~uVar5;
            iVar4 = -1;
            puVar7 = local_1a4;
            do
            {
                puVar9 = puVar7;
                if (iVar4 == 0)
                    break;
                iVar4 = iVar4 + -1;
                puVar9 = (undefined_32 *)((int)puVar7 + 1);
                cVar1 = *(char *)puVar7;
                puVar7 = puVar9;
            } while (cVar1 != '\0');
            puVar7 = (undefined_32 *)(pcVar12 + -uVar5);
            puVar9 = (undefined_32 *)((int)puVar9 + -1);
            QMEMCPY(uVar6, puVar7, puVar9, uVar5 >> 2)
            for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
            {
                *(undefined_8 *)puVar9 = *(undefined_8 *)puVar7;
                puVar7 = (undefined_32 *)((int)puVar7 + 1);
                puVar9 = (undefined_32 *)((int)puVar9 + 1);
            }
            uVar5 = -1;
            pcVar11 = *(char **)(iVar8 * 8 + 0x4d455c);
            do
            {
                pcVar12 = pcVar11;
                if (uVar5 == 0)
                    break;
                uVar5 = uVar5 - 1;
                pcVar12 = pcVar11 + 1;
                cVar1 = *pcVar11;
                pcVar11 = pcVar12;
            } while (cVar1 != '\0');
            uVar5 = ~uVar5;
            iVar8 = -1;
            puVar7 = local_1a4;
            do
            {
                puVar9 = puVar7;
                if (iVar8 == 0)
                    break;
                iVar8 = iVar8 + -1;
                puVar9 = (undefined_32 *)((int)puVar7 + 1);
                cVar1 = *(char *)puVar7;
                puVar7 = puVar9;
            } while (cVar1 != '\0');
            puVar7 = (undefined_32 *)(pcVar12 + -uVar5);
            puVar9 = (undefined_32 *)((int)puVar9 + -1);
            QMEMCPY(uVar6, puVar7, puVar9, uVar5 >> 2)
            for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1)
            {
                *(undefined_8 *)puVar9 = *(undefined_8 *)puVar7;
                puVar7 = (undefined_32 *)((int)puVar7 + 1);
                puVar9 = (undefined_32 *)((int)puVar9 + 1);
            }
            ___crtMessageBoxA(local_1a4, "Microsoft Visual C++ Runtime Library");
            return;
        }
    }
    return;
}

// static import 004a5cd0
int ___loctotime_t(int param_1, int param_2, int param_3, int param_4, int param_5, int param_6, int param_7)

{
    int iVar1;
    int iVar2;
    tm local_24;

    local_24.tm_year = param_1 - 0x76c;
    if ((local_24.tm_year < 0x46) || (0x8a < local_24.tm_year))
    {
        return -1;
    }
    local_24.tm_yday = *(int *)(&DAT_004d511c + param_2 * 4) + param_3;
    if (((local_24.tm_year & 3U) == 0) && (2 < param_2))
    {
        local_24.tm_yday = local_24.tm_yday + 1;
    }
    ___tzset();
    local_24.tm_hour = param_4;
    local_24.tm_mon = param_2 + -1;
    iVar1 = param_6
        + (param_5 + (param_4 + ((param_1 + -0x76d >> 2) + local_24.tm_year * 0x16d + local_24.tm_yday) * 0x18) * 0x3c)
            * 0x3c
        + 0x7c558180 + DAT_004d5030;
    if (param_7 != 1)
    {
        if (param_7 != -1)
        {
            return iVar1;
        }
        if (DAT_004d5034 == 0)
        {
            return iVar1;
        }
        iVar2 = __isindst(&local_24);
        if (iVar2 == 0)
        {
            return iVar1;
        }
    }
    return iVar1 + DAT_004d5038;
}

// WARNING: Could not reconcile some variable overlaps

// static import 004a5dc0
int __woutput(undefined_32 param_1, ushort *param_2, undefined_32 *param_3)

{
    byte bVar1;
    short sVar2;
    uint uVar3;
    uint uVar4;
    int *piVar5;
    int iVar6;
    short *psVar7;
    ushort uVar8;
    uint unaff_EBX;
    uint uVar9;
    short *psVar10;
    short *psVar11;
    ulonglong uVar12;
    ulonglong uVar13;
    uint local_44c;
    short *local_448;
    uint local_444;
    int local_440;
    int local_43c;
    int local_438;
    int local_434;
    int local_430;
    undefined_8 local_42a;
    undefined_8 local_429;
    undefined_16 local_428;
    short local_426;
    int local_424;
    undefined_32 local_420;
    undefined_32 local_41c;
    int local_418;
    int local_414;
    undefined_32 local_410;
    undefined_32 local_40c;
    undefined_32 local_404;
    undefined_8 local_400[511];
    undefined_16 local_201;

    local_414 = 0;
    uVar8 = *param_2;
    uVar9 = unaff_EBX & 0xffff0000 | (uint)uVar8;
    param_2 = param_2 + 1;
    local_444 = 0;
    local_43c = 0;
    uVar4 = 0;
    psVar10 = local_448;
    do
    {
        if ((uVar8 == 0) || (local_43c < 0))
        {
            return local_43c;
        }
        uVar8 = (ushort)uVar9;
        if ((uVar8 < 0x20) || (0x78 < uVar8))
        {
            uVar3 = 0;
        }
        else
        {
            uVar3 = (byte)(&DAT_004af9b8)[uVar9 & 0xffff] & 0xf;
        }
        local_414 = (int)(char)(&DAT_004af9d8)[uVar3 * 8 + local_414] >> 4;
        psVar11 = psVar10;
        uVar3 = uVar4;
        switch (local_414)
        {
        case 0:
        switchD_004a5e51_caseD_0:
            local_434 = 1;
            _write_char_0(uVar9, param_1, &local_43c);
            break;
        case 1:
            local_440 = -1;
            local_420 = 0;
            local_424 = 0;
            local_430 = 0;
            local_438 = 0;
            local_44c = 0;
            local_434 = 0;
            break;
        case 2:
            uVar4 = uVar9 & 0xffff;
            uVar9 = uVar4 - 0x20;
            switch (uVar4)
            {
            case 0x20:
                local_44c = local_44c | 2;
                break;
            case 0x23:
                local_44c = local_44c | 0x80;
                break;
            case 0x2b:
                local_44c = local_44c | 1;
                break;
            case 0x2d:
                local_44c = local_44c | 4;
                break;
            case 0x30:
                local_44c = local_44c | 8;
            }
            break;
        case 3:
            if (uVar8 == 0x2a)
            {
                local_430 = _get_int_arg(&param_3);
                psVar11 = local_448;
                uVar3 = local_444;
                if (local_430 < 0)
                {
                    local_44c = local_44c | 4;
                    local_430 = -local_430;
                    psVar11 = psVar10;
                    uVar3 = uVar4;
                }
            }
            else
            {
                uVar9 = uVar9 & 0xffff;
                local_430 = (uVar9 - 0x30) + local_430 * 10;
            }
            break;
        case 4:
            local_440 = 0;
            break;
        case 5:
            if (uVar8 == 0x2a)
            {
                local_440 = _get_int_arg(&param_3);
                psVar11 = local_448;
                uVar3 = local_444;
                if (local_440 < 0)
                {
                    local_440 = -1;
                    psVar11 = psVar10;
                    uVar3 = uVar4;
                }
            }
            else
            {
                uVar9 = uVar9 & 0xffff;
                local_440 = (uVar9 - 0x30) + local_440 * 10;
            }
            break;
        case 6:
            uVar4 = uVar9 & 0xffff;
            if (uVar4 == 0x49)
            {
                if ((*param_2 != 0x36) || (param_2[1] != 0x34))
                {
                    local_414 = 0;
                    goto switchD_004a5e51_caseD_0;
                }
                param_2 = param_2 + 2;
                local_44c = local_44c | 0x8000;
            }
            else if (uVar4 == 0x68)
            {
                local_44c = local_44c | 0x20;
            }
            else if (uVar4 == 0x77)
            {
                local_44c = local_44c | 0x800;
            }
            break;
        case 7:
            psVar11 = local_448;
            switch (uVar9 & 0xffff)
            {
            case 0x43:
                if ((local_44c & 0x830) == 0)
                {
                    local_44c = local_44c | 0x20;
                }
            case 99:
                uVar4 = 1;
                local_434 = 1;
                local_41c = _get_int_arg(&param_3);
                local_444 = uVar4;
                if ((local_44c & 0x20) == 0)
                {
                    local_400._0_2_ = (short)local_41c;
                }
                else
                {
                    local_42a = (undefined_8)local_41c;
                    local_429 = 0;
                    iVar6 = _mbtowc(local_400, &local_42a, DAT_004d1f9c);
                    if (iVar6 < 0)
                    {
                        psVar10 = (short *)local_400;
                        local_424 = 1;
                        psVar11 = psVar10;
                        break;
                    }
                }
                psVar10 = (short *)local_400;
                psVar11 = psVar10;
                break;
            case 0x45:
            case 0x47:
                local_420 = 1;
                uVar9 = uVar9 + 0x20;
            case 0x65:
            case 0x66:
            case 0x67:
                if (local_440 < 0)
                {
                    local_440 = 6;
                }
                else if ((local_440 == 0) && ((short)uVar9 == 0x67))
                {
                    local_440 = 1;
                }
                local_410 = *param_3;
                local_40c = param_3[1];
                param_3 = param_3 + 2;
                (*(code *)PTR_FUN_004d2088)(&local_410, local_400, (int)(char)uVar9, local_440, local_420);
                if (((local_44c & 0x80) != 0) && (local_440 == 0))
                {
                    (*(code *)PTR_FUN_004d2094)(local_400);
                }
                if (((short)uVar9 == 0x67) && ((local_44c & 0x80) == 0))
                {
                    (*(code *)PTR_FUN_004d208c)(local_400);
                }
                psVar11 = (short *)local_400;
                uVar4 = local_44c | 0x40;
                if (local_400[0] == '-')
                {
                    psVar11 = (short *)(local_400 + 1);
                    uVar4 = local_44c | 0x140;
                }
            LAB_004a62f5:
                local_44c = uVar4;
                psVar10 = psVar11;
                uVar4 = -1;
                psVar11 = psVar10;
                do
                {
                    if (uVar4 == 0)
                        break;
                    uVar4 = uVar4 - 1;
                    bVar1 = *(byte *)psVar11;
                    psVar11 = (short *)((int)psVar11 + 1);
                } while (bVar1 != 0);
                uVar4 = ~uVar4 - 1;
                psVar11 = psVar10;
                local_444 = uVar4;
                break;
            case 0x53:
                if ((local_44c & 0x830) == 0)
                {
                    local_44c = local_44c | 0x20;
                }
            case 0x73:
                iVar6 = 0x7fffffff;
                if (local_440 != -1)
                {
                    iVar6 = local_440;
                }
                psVar10 = (short *)_get_int_arg(&param_3);
                if ((local_44c & 0x20) == 0)
                {
                    if (psVar10 == NULL)
                    {
                        psVar10 = (short *)PTR_DAT_004d2084;
                    }
                    local_434 = 1;
                    for (psVar11 = psVar10; (iVar6 != 0 && (iVar6 = iVar6 + -1, *psVar11 != 0)); psVar11 = psVar11 + 1)
                    {}
                    uVar4 = (int)psVar11 - (int)psVar10 >> 1;
                    psVar11 = psVar10;
                    local_444 = uVar4;
                }
                else
                {
                    if (psVar10 == NULL)
                    {
                        psVar10 = (short *)PTR_DAT_004d2080;
                    }
                    local_444 = 0;
                    psVar7 = psVar10;
                    uVar4 = 0;
                    psVar11 = psVar10;
                    if (0 < iVar6)
                    {
                        do
                        {
                            uVar4 = local_444;
                            if (*(byte *)psVar7 == 0)
                                break;
                            if ((PTR_DAT_004d1d90[(uint) * (byte *)psVar7 * 2 + 1] & 0x80) != 0)
                            {
                                psVar7 = (short *)((int)psVar7 + 1);
                            }
                            uVar4 = local_444 + 1;
                            psVar7 = (short *)((int)psVar7 + 1);
                            local_444 = uVar4;
                        } while ((int)uVar4 < iVar6);
                    }
                }
                break;
            case 0x58:
                goto switchD_004a6039_caseD_58;
            case 0x5a:
                psVar7 = (short *)_get_int_arg(&param_3);
                psVar11 = (short *)PTR_DAT_004d2080;
                uVar4 = local_44c;
                if ((psVar7 != NULL) && (psVar10 = *(short **)(psVar7 + 2), psVar10 != NULL))
                {
                    psVar11 = psVar10;
                    if ((local_44c & 0x800) == 0)
                    {
                        uVar4 = (uint)*psVar7;
                        local_434 = 0;
                        local_444 = uVar4;
                    }
                    else
                    {
                        local_434 = 1;
                        uVar4 = (uint)(int)*psVar7 >> 1;
                        local_444 = uVar4;
                    }
                    break;
                }
                goto LAB_004a62f5;
            case 100:
            case 0x69:
                local_444 = 10;
                local_44c = local_44c | 0x40;
                goto LAB_004a6383;
            case 0x6e:
                piVar5 = (int *)_get_int_arg(&param_3);
                if ((local_44c & 0x20) == 0)
                {
                    local_424 = 1;
                    *piVar5 = local_43c;
                }
                else
                {
                    local_424 = 1;
                    *(undefined_16 *)piVar5 = (undefined_16)local_43c;
                }
                break;
            case 0x6f:
                local_444 = 8;
                if ((local_44c & 0x80) != 0)
                {
                    local_44c = local_44c | 0x200;
                }
                goto LAB_004a6383;
            case 0x70:
                local_440 = 8;
            switchD_004a6039_caseD_58:
                local_418 = 7;
            LAB_004a633a:
                local_444 = 0x10;
                if ((local_44c & 0x80) != 0)
                {
                    local_426 = (short)local_418 + 0x51;
                    local_428 = 0x30;
                    local_438 = 2;
                }
                goto LAB_004a6383;
            case 0x75:
                local_444 = 10;
            LAB_004a6383:
                if ((local_44c & 0x8000) == 0)
                {
                    if ((local_44c & 0x20) == 0)
                    {
                        if ((local_44c & 0x40) == 0)
                        {
                            uVar4 = _get_int_arg(&param_3);
                            uVar12 = (ulonglong)uVar4;
                        }
                        else
                        {
                            iVar6 = _get_int_arg(&param_3);
                            uVar12 = (ulonglong)iVar6;
                        }
                    }
                    else if ((local_44c & 0x40) == 0)
                    {
                        uVar4 = _get_int_arg(&param_3);
                        uVar12 = (ulonglong)(uVar4 & 0xffff);
                    }
                    else
                    {
                        sVar2 = _get_int_arg(&param_3);
                        uVar12 = (ulonglong)(int)sVar2;
                    }
                }
                else
                {
                    uVar12 = _get_int64_arg(&param_3);
                }
                if ((((local_44c & 0x40) != 0) && ((longlong)uVar12 < 0x100000000)) && ((longlong)uVar12 < 0))
                {
                    uVar12 = CONCAT44(-((int)(uVar12 >> 0x20) + (uint)((int)uVar12 != 0)), -(int)uVar12);
                    local_44c = local_44c | 0x100;
                }
                uVar4 = (uint)(uVar12 >> 0x20);
                if ((local_44c & 0x8000) == 0)
                {
                    uVar4 = 0;
                }
                uVar13 = uVar12 & -1 | (ulonglong)uVar4 << 0x20;
                if (local_440 < 0)
                {
                    local_440 = 1;
                }
                else
                {
                    local_44c = local_44c & 0xfffffff7;
                }
                if (((uint)uVar12 | uVar4) == 0)
                {
                    local_438 = 0;
                }
                local_448 = &local_201;
                iVar6 = local_440;
                uVar9 = local_44c;
                while ((local_440 = iVar6 + -1, 0 < iVar6 || (uVar13 != 0)))
                {
                    local_404 = 0;
                    iVar6 = __aullrem(uVar13, local_444, 0);
                    uVar9 = iVar6 + 0x30;
                    uVar13 = __aulldiv(uVar13, local_444, local_404);
                    if (0x39 < (int)uVar9)
                    {
                        uVar9 = uVar9 + local_418;
                    }
                    *(byte *)local_448 = (byte)uVar9;
                    local_448 = (short *)((int)local_448 + -1);
                    iVar6 = local_440;
                }
                uVar4 = (int)&local_201 + -(int)local_448;
                psVar10 = (short *)((int)local_448 + 1);
                psVar11 = psVar10;
                local_444 = uVar4;
                if (((local_44c & 0x200) != 0) && ((*(byte *)psVar10 != 0x30 || (uVar4 == 0))))
                {
                    uVar4 = (int)&local_201 + -(int)local_448 + 1;
                    *(byte *)local_448 = 0x30;
                    psVar10 = local_448;
                    psVar11 = local_448;
                    local_444 = uVar4;
                }
                break;
            case 0x78:
                local_418 = 0x27;
                goto LAB_004a633a;
            }
            local_448 = psVar11;
            psVar11 = psVar10;
            uVar3 = uVar4;
            if (local_424 == 0)
            {
                if ((local_44c & 0x40) != 0)
                {
                    if ((local_44c & 0x100) == 0)
                    {
                        if ((local_44c & 1) == 0)
                        {
                            if ((local_44c & 2) == 0)
                                goto LAB_004a652c;
                            local_428 = 0x20;
                        }
                        else
                        {
                            local_428 = 0x2b;
                        }
                    }
                    else
                    {
                        local_428 = 0x2d;
                    }
                    local_438 = 1;
                }
            LAB_004a652c:
                uVar9 = (local_430 - local_438) - uVar4;
                if ((local_44c & 0xc) == 0)
                {
                    _write_multi_char_0(0x20, uVar9, param_1, &local_43c);
                }
                _write_string_0(&local_428, local_438, param_1, &local_43c);
                if (((local_44c & 8) != 0) && ((local_44c & 4) == 0))
                {
                    _write_multi_char_0(0x30, uVar9, param_1, &local_43c);
                }
                if ((local_434 == 0) && (psVar11 = local_448, uVar3 = local_444, 0 < (int)uVar4))
                {
                    do
                    {
                        uVar3 = uVar3 - 1;
                        iVar6 = _mbtowc(&local_41c, psVar11, DAT_004d1f9c);
                        if (iVar6 < 1)
                            break;
                        _write_char_0(local_41c, param_1, &local_43c);
                        psVar11 = (short *)((int)psVar11 + iVar6);
                    } while (0 < (int)uVar3);
                }
                else
                {
                    _write_string_0(psVar10, uVar4, param_1, &local_43c);
                }
                psVar11 = local_448;
                uVar3 = local_444;
                if ((local_44c & 4) != 0)
                {
                    _write_multi_char_0(0x20, uVar9, param_1, &local_43c);
                }
            }
        }
        uVar8 = *param_2;
        uVar9 = uVar9 & 0xffff0000 | (uint)uVar8;
        param_2 = param_2 + 1;
        uVar4 = uVar3;
        psVar10 = psVar11;
    } while (true);
}

// static import 004a6720
void _write_char_0(undefined_32 param_1, undefined_32 param_2, int *param_3)

{
    short sVar1;

    sVar1 = __putwc_lk(param_1, param_2);
    if (sVar1 == -1)
    {
        *param_3 = -1;
        return;
    }
    *param_3 = *param_3 + 1;
    return;
}

// static import 004a6750
void _write_multi_char_0(undefined_32 param_1, int param_2, undefined_32 param_3, int *param_4)

{
    if (0 < param_2)
    {
        do
        {
            param_2 = param_2 + -1;
            _write_char_0(param_1, param_3, param_4);
            if (*param_4 == -1)
            {
                return;
            }
        } while (0 < param_2);
    }
    return;
}

// static import 004a6790
void _write_string_0(ushort *param_1, uint param_2, undefined_32 param_3, uint *param_4)

{
    ushort uVar1;
    uint uVar2;

    uVar2 = param_2;
    if (0 < (int)param_2)
    {
        do
        {
            uVar2 = uVar2 - 1;
            uVar1 = *param_1;
            param_1 = param_1 + 1;
            _write_char_0(param_2 & 0xffff0000 | (uint)uVar1, param_3, param_4);
            param_2 = *param_4;
            if (param_2 == -1)
            {
                return;
            }
        } while (0 < (int)uVar2);
    }
    return;
}

// static import 004a67d0
undefined_32 _get_int_arg(int *param_1)

{
    undefined_32 *puVar1;

    puVar1 = (undefined_32 *)*param_1;
    *param_1 = (int)(puVar1 + 1);
    return *puVar1;
}

// static import 004a67f0
undefined_64 _get_int64_arg(int *param_1)

{
    undefined_64 *puVar1;

    puVar1 = (undefined_64 *)*param_1;
    *param_1 = (int)(puVar1 + 1);
    return *puVar1;
}

// WARNING: Could not reconcile some variable overlaps

// static import 004a6810
uint _getwc_lk(ushort **param_1)

{
    ushort uVar1;
    ushort *puVar2;
    ushort **ppuVar3;
    undefined_8 *puVar4;
    uint uVar5;
    int iVar6;
    undefined_32 *puVar7;
    undefined_32 uVar8;
    uint local_4;

    ppuVar3 = param_1;
    if ((*(byte *)(param_1 + 3) & 0x40) == 0)
    {
        puVar2 = param_1[4];
        if (puVar2 == (ushort *)-1)
        {
            puVar4 = &DAT_004d43a0;
        }
        else
        {
            puVar4 = (undefined_8 *)((&DAT_00ecd500)[(int)puVar2 >> 5] + ((uint)puVar2 & 0x1f) * 0x24);
        }
        if ((puVar4[4] & 0x80) != 0)
        {
            puVar2 = param_1[1];
            uVar8 = 1;
            param_1[1] = (ushort *)((int)puVar2 + -1);
            if ((int)(ushort *)((int)puVar2 + -1) < 0)
            {
                uVar5 = __filbuf(param_1);
            }
            else
            {
                uVar5 = (uint) * (byte *)*param_1;
                *param_1 = (ushort *)((int)*param_1 + 1);
            }
            if (uVar5 == -1)
            {
                return -1;
            }
            local_4 = uVar5 & 0xff;
            if ((PTR_DAT_004d1d90[(uVar5 & 0xff) * 2 + 1] & 0x80) != 0)
            {
                puVar2 = ppuVar3[1];
                ppuVar3[1] = (ushort *)((int)puVar2 + -1);
                if ((int)(ushort *)((int)puVar2 + -1) < 0)
                {
                    uVar5 = __filbuf(ppuVar3);
                }
                else
                {
                    uVar5 = (uint) * (byte *)*ppuVar3;
                    *ppuVar3 = (ushort *)((int)*ppuVar3 + 1);
                }
                if (uVar5 == -1)
                {
                    _ungetc((int)(char)local_4, ppuVar3);
                    return 0xffff;
                }
                local_4._0_2_ = CONCAT11((char)uVar5, (char)local_4);
                local_4 = local_4 & 0xffff0000 | (uint)(ushort)local_4;
                uVar8 = 2;
            }
            iVar6 = _mbtowc(&param_1, &local_4, uVar8);
            if (iVar6 == -1)
            {
                puVar7 = (undefined_32 *)__errno();
                *puVar7 = 0x2a;
                return 0xffff;
            }
            return (uint)param_1 & 0xffff;
        }
    }
    puVar2 = param_1[1];
    param_1[1] = puVar2 + -1;
    if (-1 < (int)(puVar2 + -1))
    {
        uVar1 = **param_1;
        *param_1 = *param_1 + 1;
        return (uint)uVar1;
    }
    uVar5 = __filwbuf(param_1);
    return uVar5;
}

// static import 004a6a10
void __getbuf(int *param_1)

{
    int iVar1;

    DAT_00dfaeb8 = DAT_00dfaeb8 + 1;
    iVar1 = _malloc(0x1000);
    param_1[2] = iVar1;
    if (iVar1 != 0)
    {
        param_1[3] = param_1[3] | 8;
        param_1[6] = 0x1000;
        *param_1 = param_1[2];
        param_1[1] = 0;
        return;
    }
    param_1[6] = 2;
    param_1[3] = param_1[3] | 4;
    param_1[2] = (int)(param_1 + 5);
    *param_1 = (int)(param_1 + 5);
    param_1[1] = 0;
    return;
}

// static import 004a6a70
byte __isatty(uint param_1)

{
    if (DAT_00ecd600 <= param_1)
    {
        return 0;
    }
    return *(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 0x40;
}

// static import 004a6aa0
undefined_32 _wctomb(undefined_32 param_1, undefined_32 param_2)

{
    undefined_32 uVar1;
    bool bVar2;

    InterlockedIncrement((LONG *)&DAT_00ecd60c);
    bVar2 = DAT_00ecd608 != 0;
    if (bVar2)
    {
        InterlockedDecrement((LONG *)&DAT_00ecd60c);
        __lock(0x13);
    }
    uVar1 = __wctomb_lk(param_1, param_2);
    if (!bVar2)
    {
        InterlockedDecrement((LONG *)&DAT_00ecd60c);
        return uVar1;
    }
    __unlock(0x13);
    return uVar1;
}

// static import 004a6b10
LPSTR __wctomb_lk(LPSTR param_1, WCHAR param_2)

{
    LPSTR pCVar1;
    undefined_32 *puVar2;

    pCVar1 = param_1;
    if (param_1 == (LPSTR)0x0)
    {
        return param_1;
    }
    if (DAT_00dfab38 == 0)
    {
        if ((ushort)param_2 < 0x100)
        {
            *param_1 = (CHAR)param_2;
            return (LPSTR)0x1;
        }
    }
    else
    {
        param_1 = (LPSTR)0x0;
        pCVar1 = (LPSTR)WideCharToMultiByte(DAT_00dfab48, 0x220, &param_2, 1, pCVar1, DAT_004d1f9c, (LPCSTR)0x0,
                                            (LPBOOL)&param_1);
        if ((pCVar1 != (LPSTR)0x0) && (param_1 == (LPSTR)0x0))
        {
            return pCVar1;
        }
    }
    puVar2 = (undefined_32 *)__errno();
    *puVar2 = 0x2a;
    return (LPSTR)-1;
}

// Library Function - Single Match
//  __aulldiv
//
// Library: Visual Studio

undefined_64 __aulldiv(uint param_1, uint param_2, uint param_3, uint param_4)

{
    ulonglong uVar1;
    longlong lVar2;
    uint uVar3;
    int iVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    uint uVar9;

    uVar3 = param_1;
    uVar8 = param_4;
    uVar6 = param_2;
    uVar9 = param_3;
    if (param_4 == 0)
    {
        uVar3 = param_2 / param_3;
        iVar4 = (int)(((ulonglong)param_2 % (ulonglong)param_3 << 0x20 | (ulonglong)param_1) / (ulonglong)param_3);
    }
    else
    {
        do
        {
            uVar5 = uVar8 >> 1;
            uVar9 = uVar9 >> 1 | (uint)((uVar8 & 1) != 0) << 0x1f;
            uVar7 = uVar6 >> 1;
            uVar3 = uVar3 >> 1 | (uint)((uVar6 & 1) != 0) << 0x1f;
            uVar8 = uVar5;
            uVar6 = uVar7;
        } while (uVar5 != 0);
        uVar1 = CONCAT44(uVar7, uVar3) / (ulonglong)uVar9;
        iVar4 = (int)uVar1;
        lVar2 = (ulonglong)param_3 * (uVar1 & -1);
        uVar3 = (uint)((ulonglong)lVar2 >> 0x20);
        uVar8 = uVar3 + iVar4 * param_4;
        if (((CARRY4(uVar3, iVar4 * param_4)) || (param_2 < uVar8)) || ((param_2 <= uVar8 && (param_1 < (uint)lVar2))))
        {
            iVar4 = iVar4 + -1;
        }
        uVar3 = 0;
    }
    return CONCAT44(uVar3, iVar4);
}

// Library Function - Single Match
//  __aullrem
//
// Library: Visual Studio

undefined_64 __aullrem(uint param_1, uint param_2, uint param_3, uint param_4)

{
    ulonglong uVar1;
    longlong lVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;
    int iVar6;
    int iVar7;
    uint uVar8;
    uint uVar9;
    uint uVar10;
    bool bVar11;

    uVar3 = param_1;
    uVar4 = param_4;
    uVar9 = param_2;
    uVar10 = param_3;
    if (param_4 == 0)
    {
        iVar6 = (int)(((ulonglong)param_2 % (ulonglong)param_3 << 0x20 | (ulonglong)param_1) % (ulonglong)param_3);
        iVar7 = 0;
    }
    else
    {
        do
        {
            uVar5 = uVar4 >> 1;
            uVar10 = uVar10 >> 1 | (uint)((uVar4 & 1) != 0) << 0x1f;
            uVar8 = uVar9 >> 1;
            uVar3 = uVar3 >> 1 | (uint)((uVar9 & 1) != 0) << 0x1f;
            uVar4 = uVar5;
            uVar9 = uVar8;
        } while (uVar5 != 0);
        uVar1 = CONCAT44(uVar8, uVar3) / (ulonglong)uVar10;
        uVar3 = (int)uVar1 * param_4;
        lVar2 = (uVar1 & -1) * (ulonglong)param_3;
        uVar9 = (uint)((ulonglong)lVar2 >> 0x20);
        uVar4 = (uint)lVar2;
        uVar10 = uVar9 + uVar3;
        if (((CARRY4(uVar9, uVar3)) || (param_2 < uVar10)) || ((param_2 <= uVar10 && (param_1 < uVar4))))
        {
            bVar11 = uVar4 < param_3;
            uVar4 = uVar4 - param_3;
            uVar10 = (uVar10 - param_4) - (uint)bVar11;
        }
        iVar6 = -(uVar4 - param_1);
        iVar7 = -(uint)(uVar4 - param_1 != 0) - ((uVar10 - param_2) - (uint)(uVar4 < param_1));
    }
    return CONCAT44(iVar7, iVar6);
}

// static import 004a6c80
uint __control87(uint param_1, uint param_2)

{
    uint uVar1;

    uVar1 = __abstract_cw();
    uVar1 = param_2 & param_1 | ~param_2 & uVar1;
    __hw_cw(uVar1);
    return uVar1;
}

// static import 004a6cc0
void __controlfp(undefined_32 param_1, uint param_2)

{
    __control87(param_1, param_2 & 0xfff7ffff);
    return;
}

// static import 004a6ce0
uint __abstract_cw(uint param_1)

{
    uint uVar1;
    uint uVar2;

    uVar1 = 0;
    if ((param_1 & 1) != 0)
    {
        uVar1 = 0x10;
    }
    if ((param_1 & 4) != 0)
    {
        uVar1 = uVar1 | 8;
    }
    if ((param_1 & 8) != 0)
    {
        uVar1 = uVar1 | 4;
    }
    if ((param_1 & 0x10) != 0)
    {
        uVar1 = uVar1 | 2;
    }
    if ((param_1 & 0x20) != 0)
    {
        uVar1 = uVar1 | 1;
    }
    if ((param_1 & 2) != 0)
    {
        uVar1 = uVar1 | 0x80000;
    }
    uVar2 = param_1 & 0xc00;
    if (uVar2 < 0x401)
    {
        if (uVar2 == 0x400)
        {
            uVar1 = uVar1 | 0x100;
        }
    }
    else if (uVar2 == 0x800)
    {
        uVar1 = uVar1 | 0x200;
    }
    else if (uVar2 == 0xc00)
    {
        uVar1 = uVar1 | 0x300;
    }
    if ((param_1 & 0x300) == 0)
    {
        uVar1 = uVar1 | 0x20000;
    }
    else if ((param_1 & 0x300) == 0x200)
    {
        uVar1 = uVar1 | 0x10000;
    }
    if ((param_1 & 0x1000) != 0)
    {
        uVar1 = uVar1 | 0x40000;
    }
    return uVar1;
}

// static import 004a6d80
void __hw_cw(void)

{
    return;
}

// static import 004a6e10
undefined_32 __ZeroTail(int param_1, int param_2)

{
    byte bVar1;
    int *piVar2;
    int iVar3;

    bVar1 = (byte)(param_2 >> 0x1f);
    iVar3 = (int)(param_2 + (param_2 >> 0x1f & 0x1fU)) >> 5;
    if ((*(uint *)(param_1 + iVar3 * 4)
         & ~(-1 << (0x1f - ((((byte)param_2 ^ bVar1) - bVar1 & 0x1f ^ bVar1) - bVar1) & 0x1f)))
        != 0)
    {
        return 0;
    }
    iVar3 = iVar3 + 1;
    if (iVar3 < 3)
    {
        piVar2 = (int *)(param_1 + iVar3 * 4);
        do
        {
            if (*piVar2 != 0)
            {
                return 0;
            }
            iVar3 = iVar3 + 1;
            piVar2 = piVar2 + 1;
        } while (iVar3 < 3);
        return 1;
    }
    return 1;
}

// static import 004a6e80
void __IncMan(int param_1, int param_2)

{
    byte bVar1;
    int iVar2;
    int iVar3;
    undefined_32 *puVar4;

    bVar1 = (byte)(param_2 >> 0x1f);
    iVar3 = (int)(param_2 + (param_2 >> 0x1f & 0x1fU)) >> 5;
    iVar2 =
        ___addl(*(undefined_32 *)(param_1 + iVar3 * 4),
                1 << (0x1f - ((((byte)param_2 ^ bVar1) - bVar1 & 0x1f ^ bVar1) - bVar1) & 0x1f), param_1 + iVar3 * 4);
    iVar3 = iVar3 + -1;
    if (-1 < iVar3)
    {
        puVar4 = (undefined_32 *)(param_1 + iVar3 * 4);
        do
        {
            if (iVar2 == 0)
            {
                return;
            }
            iVar2 = ___addl(*puVar4, 1, puVar4);
            iVar3 = iVar3 + -1;
            puVar4 = puVar4 + -1;
        } while (-1 < iVar3);
    }
    return;
}

// static import 004a6ef0
undefined_32 __RoundMan(int param_1, int param_2)

{
    int iVar1;
    byte bVar2;
    int iVar3;
    undefined_32 *puVar4;
    undefined_32 local_4;

    local_4 = 0;
    bVar2 = (byte)(param_2 >> 0x1f);
    bVar2 = 0x1f - ((((byte)param_2 ^ bVar2) - bVar2 & 0x1f ^ bVar2) - bVar2);
    iVar3 = (int)(param_2 + (param_2 >> 0x1f & 0x1fU)) >> 5;
    if (((*(uint *)(param_1 + iVar3 * 4) & 1 << (bVar2 & 0x1f)) != 0)
        && (iVar1 = __ZeroTail(param_1, param_2 + 1), iVar1 == 0))
    {
        local_4 = __IncMan(param_1, param_2 + -1);
    }
    *(uint *)(param_1 + iVar3 * 4) = *(uint *)(param_1 + iVar3 * 4) & -1 << (bVar2 & 0x1f);
    iVar3 = iVar3 + 1;
    if (iVar3 < 3)
    {
        puVar4 = (undefined_32 *)(param_1 + iVar3 * 4);
        MEMSET(iVar1, puVar4, 0, 3 - iVar3)
    }
    return local_4;
}

// static import 004a6f90
void __CopyMan(int param_1, undefined_32 *param_2)

{
    int iVar1;

    param_1 = param_1 - (int)param_2;
    iVar1 = 3;
    do
    {
        *(undefined_32 *)((int)param_2 + param_1) = *param_2;
        param_2 = param_2 + 1;
        iVar1 = iVar1 + -1;
    } while (iVar1 != 0);
    return;
}

// static import 004a6fb0
void __FillZeroMan(undefined_32 *param_1)

{
    *param_1 = 0;
    param_1[1] = 0;
    param_1[2] = 0;
    return;
}

// static import 004a6fc0
undefined_32 __IsZeroMan(int *param_1)

{
    int iVar1;

    iVar1 = 0;
    do
    {
        if (*param_1 != 0)
        {
            return 0;
        }
        iVar1 = iVar1 + 1;
        param_1 = param_1 + 1;
    } while (iVar1 < 3);
    return 1;
}

// static import 004a6fe0
void __ShrMan(uint *param_1, int param_2)

{
    int iVar1;
    byte bVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    uint *puVar6;
    int iVar7;

    iVar1 = (int)(param_2 + (param_2 >> 0x1f & 0x1fU)) >> 5;
    bVar2 = (byte)(param_2 >> 0x1f);
    uVar5 = 0;
    bVar2 = (((byte)param_2 ^ bVar2) - bVar2 & 0x1f ^ bVar2) - bVar2;
    param_2 = 3;
    puVar6 = param_1;
    do
    {
        uVar4 = *puVar6 >> (bVar2 & 0x1f) | uVar5;
        uVar5 = (~(-1 << (bVar2 & 0x1f)) & *puVar6) << (0x20 - bVar2 & 0x1f);
        *puVar6 = uVar4;
        param_2 = param_2 + -1;
        puVar6 = puVar6 + 1;
    } while (param_2 != 0);
    iVar7 = 2;
    iVar3 = 8;
    do
    {
        if (iVar7 < iVar1)
        {
            *(undefined_32 *)((int)param_1 + iVar3) = 0;
        }
        else
        {
            *(undefined_32 *)((int)param_1 + iVar3) = *(undefined_32 *)((int)param_1 + iVar3 + iVar1 * -4);
        }
        iVar7 = iVar7 + -1;
        iVar3 = iVar3 + -4;
    } while (-1 < iVar3);
    return;
}

// static import 004a70a0
undefined_32 __ld12cvt(ushort *param_1, uint *param_2, int *param_3)

{
    ushort uVar1;
    int iVar2;
    undefined_32 uVar3;
    uint uVar4;
    int iVar5;
    uint local_18;
    uint local_14;
    int local_10;
    undefined_8 local_c[12];

    uVar1 = param_1[5];
    local_14 = *(uint *)(param_1 + 1);
    local_18 = *(uint *)(param_1 + 3);
    uVar4 = uVar1 & 0x7fff;
    iVar5 = uVar4 - 0x3fff;
    local_10 = (uint)*param_1 << 0x10;
    if (iVar5 == -0x3fff)
    {
        iVar5 = 0;
        iVar2 = __IsZeroMan(&local_18);
        if (iVar2 == 0)
        {
            __FillZeroMan(&local_18);
            uVar3 = 2;
            goto LAB_004a7221;
        }
    }
    else
    {
        __CopyMan(local_c, &local_18);
        iVar2 = __RoundMan(&local_18, param_3[2]);
        if (iVar2 != 0)
        {
            iVar5 = uVar4 - 0x3ffe;
        }
        iVar2 = param_3[1];
        if (iVar5 < iVar2 - param_3[2])
        {
            __FillZeroMan(&local_18);
            iVar5 = 0;
            uVar3 = 2;
            goto LAB_004a7221;
        }
        if (iVar5 <= iVar2)
        {
            __CopyMan(&local_18, local_c);
            __ShrMan(&local_18, iVar2 - iVar5);
            __RoundMan(&local_18, param_3[2]);
            __ShrMan(&local_18, param_3[3] + 1);
            iVar5 = 0;
            uVar3 = 2;
            goto LAB_004a7221;
        }
        if (*param_3 <= iVar5)
        {
            __FillZeroMan(&local_18);
            local_18 = local_18 | 0x80000000;
            __ShrMan(&local_18, param_3[3]);
            iVar5 = param_3[5] + *param_3;
            uVar3 = 1;
            goto LAB_004a7221;
        }
        iVar5 = param_3[5] + iVar5;
        local_18 = local_18 & 0x7fffffff;
        __ShrMan(&local_18, param_3[3]);
    }
    uVar3 = 0;
LAB_004a7221:
    local_18 = iVar5 << (0x1fU - (char)param_3[3] & 0x1f) | -(uint)((uVar1 & 0x8000) != 0) & 0x80000000 | local_18;
    if (param_3[4] == 0x40)
    {
        param_2[1] = local_18;
        *param_2 = local_14;
        return uVar3;
    }
    if (param_3[4] == 0x20)
    {
        *param_2 = local_18;
    }
    return uVar3;
}

void FUN_004a7270(undefined_32 param_1, undefined_32 param_2)

{
    __ld12cvt(param_1, param_2, &DAT_004d4880);
    return;
}

void FUN_004a7290(undefined_32 param_1, undefined_32 param_2)

{
    __ld12cvt(param_1, param_2, &DAT_004d4898);
    return;
}

void FUN_004a72b0(undefined_32 param_1, undefined_32 param_2)

{
    undefined_8 local_c[12];

    ___strgtold12(local_c, &param_2, param_2, 0, 0, 0, 0);
    FUN_004a7270(local_c, param_1);
    return;
}

void FUN_004a72f0(undefined_32 param_1, undefined_32 param_2)

{
    undefined_8 local_c[12];

    ___strgtold12(local_c, &param_2, param_2, 0, 0, 0, 0);
    FUN_004a7290(local_c, param_1);
    return;
}

// static import 004a7330
void __fptostr(undefined_32 *param_1, int param_2, int param_3)

{
    char *pcVar1;
    char cVar2;
    uint uVar3;
    uint uVar4;
    char *pcVar5;
    int iVar6;
    undefined_32 *puVar7;
    char *pcVar8;

    pcVar5 = *(char **)(param_3 + 0xc);
    pcVar8 = (char *)((int)param_1 + 1);
    *(undefined_8 *)param_1 = 0x30;
    pcVar1 = pcVar8;
    iVar6 = param_2;
    if (0 < param_2)
    {
        do
        {
            cVar2 = *pcVar5;
            if (cVar2 == '\0')
            {
                cVar2 = '0';
            }
            else
            {
                pcVar5 = pcVar5 + 1;
            }
            *pcVar1 = cVar2;
            pcVar1 = pcVar1 + 1;
            iVar6 = iVar6 + -1;
            param_2 = param_2 + -1;
        } while (param_2 != 0);
    }
    *pcVar1 = '\0';
    if ((-1 < iVar6) && ('4' < *pcVar5))
    {
        cVar2 = pcVar1[-1];
        while (pcVar5 = pcVar1 + -1, cVar2 == '9')
        {
            *pcVar5 = '0';
            cVar2 = pcVar1[-2];
            pcVar1 = pcVar5;
        }
        *pcVar5 = *pcVar5 + '\x01';
    }
    if (*(char *)param_1 == '1')
    {
        *(int *)(param_3 + 4) = *(int *)(param_3 + 4) + 1;
        return;
    }
    uVar3 = -1;
    do
    {
        pcVar5 = pcVar8;
        if (uVar3 == 0)
            break;
        uVar3 = uVar3 - 1;
        pcVar5 = pcVar8 + 1;
        cVar2 = *pcVar8;
        pcVar8 = pcVar5;
    } while (cVar2 != '\0');
    uVar3 = ~uVar3;
    puVar7 = (undefined_32 *)(pcVar5 + -uVar3);
    QMEMCPY(uVar4, puVar7, param_1, uVar3 >> 2)
    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
    {
        *(undefined_8 *)param_1 = *(undefined_8 *)puVar7;
        puVar7 = (undefined_32 *)((int)puVar7 + 1);
        param_1 = (undefined_32 *)((int)param_1 + 1);
    }
    return;
}

// static import 004a73d0
int *__fltout2(undefined_32 param_1, undefined_32 param_2, int *param_3, undefined_32 *param_4)

{
    char cVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    undefined_32 *puVar5;
    char *pcVar6;
    char *pcVar7;
    undefined_32 *puVar8;
    undefined_32 local_28;
    undefined_32 local_24;
    undefined_16 local_20;
    short local_1c;
    char local_1a;
    char local_18[24];

    __dtold(&local_28, &param_1);
    iVar2 = _$I10_OUTPUT(local_28, local_24, local_20, 0x11, 0, &local_1c);
    param_3[2] = iVar2;
    param_3[1] = (int)local_1c;
    *param_3 = (int)local_1a;
    uVar3 = -1;
    pcVar6 = local_18;
    do
    {
        pcVar7 = pcVar6;
        if (uVar3 == 0)
            break;
        uVar3 = uVar3 - 1;
        pcVar7 = pcVar6 + 1;
        cVar1 = *pcVar6;
        pcVar6 = pcVar7;
    } while (cVar1 != '\0');
    uVar3 = ~uVar3;
    puVar5 = (undefined_32 *)(pcVar7 + -uVar3);
    puVar8 = param_4;
    QMEMCPY(uVar4, puVar5, puVar8, uVar3 >> 2)
    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
    {
        *(undefined_8 *)puVar8 = *(undefined_8 *)puVar5;
        puVar5 = (undefined_32 *)((int)puVar5 + 1);
        puVar8 = (undefined_32 *)((int)puVar8 + 1);
    }
    param_3[3] = (int)param_4;
    return param_3;
}

// static import 004a7460
void __dtold(uint *param_1, uint *param_2)

{
    ushort uVar1;
    uint uVar2;
    ushort uVar3;
    ushort uVar4;
    uint uVar5;
    uint uVar6;

    uVar6 = 0x80000000;
    uVar1 = *(ushort *)((int)param_2 + 6);
    uVar2 = *param_2;
    uVar3 = uVar1 >> 4;
    uVar4 = uVar3 & 0x7ff;
    if ((uVar3 & 0x7ff) == 0)
    {
        uVar6 = 0;
        if (((param_2[1] & 0xfffff) == 0) && (uVar2 == 0))
        {
            param_1[1] = 0;
            *param_1 = 0;
            *(undefined_16 *)(param_1 + 2) = 0;
            return;
        }
        uVar4 = 0x3c01;
    }
    else if (uVar4 == 0x7ff)
    {
        uVar4 = 0x7fff;
    }
    else
    {
        uVar4 = uVar4 + 0x3c00;
    }
    uVar5 = uVar2 >> 0x15 | (param_2[1] & 0xfffff) << 0xb | uVar6;
    param_1[1] = uVar5;
    *param_1 = uVar2 << 0xb;
    for (; uVar6 == 0; uVar6 = uVar6 & 0x80000000)
    {
        uVar6 = uVar5 * 2;
        uVar5 = *param_1 >> 0x1f | uVar6;
        uVar4 = uVar4 - 1;
        param_1[1] = uVar5;
        *param_1 = *param_1 * 2;
    }
    *(ushort *)(param_1 + 2) = uVar4 | uVar1 & 0x8000;
    return;
}

// unused
// static import 004A7520
void __fptrap(void)

{
    __amsg_exit(2);
    return;
}

// unused
// static import 004a75e0
uint __get_lc_time(int param_1)

{
    undefined_16 uVar1;
    undefined_16 uVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    uint uVar9;
    uint uVar10;
    uint uVar11;
    uint uVar12;
    uint uVar13;
    uint uVar14;
    uint uVar15;
    uint uVar16;
    uint uVar17;
    uint uVar18;
    uint uVar19;
    uint uVar20;
    uint uVar21;
    uint uVar22;
    uint uVar23;
    uint uVar24;
    uint uVar25;
    uint uVar26;
    uint uVar27;
    uint uVar28;
    uint uVar29;
    uint uVar30;
    uint uVar31;
    uint uVar32;
    uint uVar33;
    uint uVar34;
    uint uVar35;
    uint uVar36;
    uint uVar37;
    uint uVar38;
    uint uVar39;
    uint uVar40;
    uint uVar41;
    uint uVar42;
    uint uVar43;
    uint uVar44;
    uint uVar45;

    uVar2 = DAT_00dfaef8;
    uVar1 = DAT_00dfaef6;
    if (param_1 == 0)
    {
        return -1;
    }
    uVar3 = ___getlocaleinfo(1, DAT_00dfaef6, 0x31, param_1 + 4);
    uVar4 = ___getlocaleinfo(1, uVar1, 0x32, param_1 + 8);
    uVar5 = ___getlocaleinfo(1, uVar1, 0x33, param_1 + 0xc);
    uVar6 = ___getlocaleinfo(1, uVar1, 0x34, param_1 + 0x10);
    uVar7 = ___getlocaleinfo(1, uVar1, 0x35, param_1 + 0x14);
    uVar8 = ___getlocaleinfo(1, uVar1, 0x36, param_1 + 0x18);
    uVar9 = ___getlocaleinfo(1, uVar1, 0x37, param_1);
    uVar10 = ___getlocaleinfo(1, uVar1, 0x2a, param_1 + 0x20);
    uVar11 = ___getlocaleinfo(1, uVar1, 0x2b, param_1 + 0x24);
    uVar12 = ___getlocaleinfo(1, uVar1, 0x2c, param_1 + 0x28);
    uVar13 = ___getlocaleinfo(1, uVar1, 0x2d, param_1 + 0x2c);
    uVar14 = ___getlocaleinfo(1, uVar1, 0x2e, param_1 + 0x30);
    uVar15 = ___getlocaleinfo(1, uVar1, 0x2f, param_1 + 0x34);
    uVar16 = ___getlocaleinfo(1, uVar1, 0x30, param_1 + 0x1c);
    uVar17 = ___getlocaleinfo(1, uVar1, 0x44, param_1 + 0x38);
    uVar18 = ___getlocaleinfo(1, uVar1, 0x45, param_1 + 0x3c);
    uVar19 = ___getlocaleinfo(1, uVar1, 0x46, param_1 + 0x40);
    uVar20 = ___getlocaleinfo(1, uVar1, 0x47, param_1 + 0x44);
    uVar21 = ___getlocaleinfo(1, uVar1, 0x48, param_1 + 0x48);
    uVar22 = ___getlocaleinfo(1, uVar1, 0x49, param_1 + 0x4c);
    uVar23 = ___getlocaleinfo(1, uVar1, 0x4a, param_1 + 0x50);
    uVar24 = ___getlocaleinfo(1, uVar1, 0x4b, param_1 + 0x54);
    uVar25 = ___getlocaleinfo(1, uVar1, 0x4c, param_1 + 0x58);
    uVar26 = ___getlocaleinfo(1, uVar1, 0x4d, param_1 + 0x5c);
    uVar27 = ___getlocaleinfo(1, uVar1, 0x4e, param_1 + 0x60);
    uVar28 = ___getlocaleinfo(1, uVar1, 0x4f, param_1 + 100);
    uVar29 = ___getlocaleinfo(1, uVar1, 0x38, param_1 + 0x68);
    uVar30 = ___getlocaleinfo(1, uVar1, 0x39, param_1 + 0x6c);
    uVar31 = ___getlocaleinfo(1, uVar1, 0x3a, param_1 + 0x70);
    uVar32 = ___getlocaleinfo(1, uVar1, 0x3b, param_1 + 0x74);
    uVar33 = ___getlocaleinfo(1, uVar1, 0x3c, param_1 + 0x78);
    uVar34 = ___getlocaleinfo(1, uVar1, 0x3d, param_1 + 0x7c);
    uVar35 = ___getlocaleinfo(1, uVar1, 0x3e, param_1 + 0x80);
    uVar36 = ___getlocaleinfo(1, uVar1, 0x3f, param_1 + 0x84);
    uVar37 = ___getlocaleinfo(1, uVar1, 0x40, param_1 + 0x88);
    uVar38 = ___getlocaleinfo(1, uVar1, 0x41, param_1 + 0x8c);
    uVar39 = ___getlocaleinfo(1, uVar1, 0x42, param_1 + 0x90);
    uVar40 = ___getlocaleinfo(1, uVar1, 0x43, param_1 + 0x94);
    uVar41 = ___getlocaleinfo(1, uVar1, 0x28, param_1 + 0x98);
    uVar42 = ___getlocaleinfo(1, uVar1, 0x29, param_1 + 0x9c);
    uVar43 = ___getlocaleinfo(1, uVar2, 0x1f, param_1 + 0xa0);
    uVar44 = ___getlocaleinfo(1, uVar2, 0x20, param_1 + 0xa4);
    uVar45 = _storeTimeFmt(uVar2, param_1);
    return uVar3 | uVar4 | uVar5 | uVar6 | uVar7 | uVar8 | uVar9 | uVar10 | uVar11 | uVar12 | uVar13 | uVar14 | uVar15
        | uVar16 | uVar17 | uVar18 | uVar19 | uVar20 | uVar21 | uVar22 | uVar23 | uVar24 | uVar25 | uVar26 | uVar27
        | uVar28 | uVar29 | uVar30 | uVar31 | uVar32 | uVar33 | uVar34 | uVar35 | uVar36 | uVar37 | uVar38 | uVar39
        | uVar40 | uVar41 | uVar42 | uVar43 | uVar44 | uVar45;
}

// unused
// static import 004a7960
void __free_lc_time(undefined_32 *param_1)

{
    if (param_1 != NULL)
    {
        _free(param_1[1]);
        _free(param_1[2]);
        _free(param_1[3]);
        _free(param_1[4]);
        _free(param_1[5]);
        _free(param_1[6]);
        _free(*param_1);
        _free(param_1[8]);
        _free(param_1[9]);
        _free(param_1[10]);
        _free(param_1[0xb]);
        _free(param_1[0xc]);
        _free(param_1[0xd]);
        _free(param_1[7]);
        _free(param_1[0xe]);
        _free(param_1[0xf]);
        _free(param_1[0x10]);
        _free(param_1[0x11]);
        _free(param_1[0x12]);
        _free(param_1[0x13]);
        _free(param_1[0x14]);
        _free(param_1[0x15]);
        _free(param_1[0x16]);
        _free(param_1[0x17]);
        _free(param_1[0x18]);
        _free(param_1[0x19]);
        _free(param_1[0x1a]);
        _free(param_1[0x1b]);
        _free(param_1[0x1c]);
        _free(param_1[0x1d]);
        _free(param_1[0x1e]);
        _free(param_1[0x1f]);
        _free(param_1[0x20]);
        _free(param_1[0x21]);
        _free(param_1[0x22]);
        _free(param_1[0x23]);
        _free(param_1[0x24]);
        _free(param_1[0x25]);
        _free(param_1[0x26]);
        _free(param_1[0x27]);
        _free(param_1[0x28]);
        _free(param_1[0x29]);
        _free(param_1[0x2a]);
    }
    return;
}

// static import 004a7ba0
uint _storeTimeFmt(char *param_1, int param_2)

{
    char *pcVar1;
    char cVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;
    undefined_8 *puVar6;
    char *pcVar7;
    char *pcVar8;
    int local_8;
    int local_4;

    pcVar7 = param_1;
    local_4 = 0;
    local_8 = 0;
    uVar3 = ___getlocaleinfo(0, param_1, 0x23, &local_4);
    uVar4 = ___getlocaleinfo(0, pcVar7, 0x25, &local_8);
    uVar5 = ___getlocaleinfo(1, pcVar7, 0x1e, &param_1);
    uVar5 = uVar3 | uVar4 | uVar5;
    if (uVar5 != 0)
    {
        return uVar5;
    }
    puVar6 = (undefined_8 *)_malloc(0xd);
    *(undefined_8 **)(param_2 + 0xa8) = puVar6;
    if (local_4 == 0)
    {
        *puVar6 = 0x68;
        pcVar7 = puVar6 + 1;
        if (local_8 == 0)
            goto LAB_004a7c3c;
        *pcVar7 = 'h';
    }
    else
    {
        *puVar6 = 0x48;
        pcVar7 = puVar6 + 1;
        if (local_8 == 0)
            goto LAB_004a7c3c;
        *pcVar7 = 'H';
    }
    pcVar7 = puVar6 + 2;
LAB_004a7c3c:
    cVar2 = *param_1;
    pcVar8 = param_1;
    while (cVar2 != '\0')
    {
        *pcVar7 = cVar2;
        pcVar1 = pcVar8 + 1;
        pcVar7 = pcVar7 + 1;
        pcVar8 = pcVar8 + 1;
        cVar2 = *pcVar1;
    }
    *pcVar7 = 'm';
    pcVar8 = pcVar7 + 1;
    if (local_8 != 0)
    {
        *pcVar8 = 'm';
        pcVar8 = pcVar7 + 2;
    }
    cVar2 = *param_1;
    pcVar7 = param_1;
    while (cVar2 != '\0')
    {
        *pcVar8 = cVar2;
        pcVar1 = pcVar7 + 1;
        pcVar8 = pcVar8 + 1;
        pcVar7 = pcVar7 + 1;
        cVar2 = *pcVar1;
    }
    *pcVar8 = 's';
    pcVar8[1] = 's';
    pcVar8[2] = '\0';
    _free(param_1);
    return 0;
}

// missing static import from swe1p-re
// 004A7CA0
// ___init_numeric

// 004A7EA0
// ___init_monetary

// static import 004a7f90
uint __get_lc_lconv(int param_1)

{
    undefined_16 uVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    uint uVar9;
    uint uVar10;
    uint uVar11;
    uint uVar12;
    uint uVar13;
    uint uVar14;
    uint uVar15;
    uint uVar16;

    uVar1 = DAT_00dfaeec;
    if (param_1 == 0)
    {
        return -1;
    }
    uVar2 = ___getlocaleinfo(1, DAT_00dfaeec, 0x15, param_1 + 0xc);
    uVar3 = ___getlocaleinfo(1, uVar1, 0x14, param_1 + 0x10);
    uVar4 = ___getlocaleinfo(1, uVar1, 0x16, param_1 + 0x14);
    uVar5 = ___getlocaleinfo(1, uVar1, 0x17, param_1 + 0x18);
    uVar6 = ___getlocaleinfo(1, uVar1, 0x18, (undefined_32 *)(param_1 + 0x1c));
    _fix_grouping(*(undefined_32 *)(param_1 + 0x1c));
    uVar7 = ___getlocaleinfo(1, uVar1, 0x50, param_1 + 0x20);
    uVar8 = ___getlocaleinfo(1, uVar1, 0x51, param_1 + 0x24);
    uVar9 = ___getlocaleinfo(0, uVar1, 0x1a, param_1 + 0x28);
    uVar10 = ___getlocaleinfo(0, uVar1, 0x19, param_1 + 0x29);
    uVar11 = ___getlocaleinfo(0, uVar1, 0x54, param_1 + 0x2a);
    uVar12 = ___getlocaleinfo(0, uVar1, 0x55, param_1 + 0x2b);
    uVar13 = ___getlocaleinfo(0, uVar1, 0x56, param_1 + 0x2c);
    uVar14 = ___getlocaleinfo(0, uVar1, 0x57, param_1 + 0x2d);
    uVar15 = ___getlocaleinfo(0, uVar1, 0x52, param_1 + 0x2e);
    uVar16 = ___getlocaleinfo(0, uVar1, 0x53, param_1 + 0x2f);
    return uVar2 | uVar3 | uVar4 | uVar5 | uVar6 | uVar7 | uVar8 | uVar9 | uVar10 | uVar11 | uVar12 | uVar13 | uVar14
        | uVar15 | uVar16;
}

// static import 004a80e0
void _fix_grouping(char *param_1)

{
    char *pcVar1;
    char cVar2;
    char *pcVar3;

    cVar2 = *param_1;
    do
    {
        if (cVar2 == '\0')
        {
            return;
        }
        if ((cVar2 < '0') || ('9' < cVar2))
        {
            pcVar3 = param_1;
            if (cVar2 != ';')
                goto LAB_004a80f6;
            do
            {
                *pcVar3 = pcVar3[1];
                pcVar1 = pcVar3 + 1;
                pcVar3 = pcVar3 + 1;
            } while (*pcVar1 != '\0');
        }
        else
        {
            *param_1 = cVar2 + -0x30;
        LAB_004a80f6:
            param_1 = param_1 + 1;
        }
        cVar2 = *param_1;
    } while (true);
}

// unused
// static import 004a8120
void __free_lc_lconv(int param_1)

{
    if ((param_1 != 0) && (*(undefined_8 **)(param_1 + 0xc) != &DAT_00dfb010))
    {
        _free(*(undefined_8 **)(param_1 + 0xc));
        _free(*(undefined_32 *)(param_1 + 0x10));
        _free(*(undefined_32 *)(param_1 + 0x14));
        _free(*(undefined_32 *)(param_1 + 0x18));
        _free(*(undefined_32 *)(param_1 + 0x1c));
        _free(*(undefined_32 *)(param_1 + 0x20));
        _free(*(undefined_32 *)(param_1 + 0x24));
    }
    return;
}

// Library Function - Single Match
//  _strcspn
//
// Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release

// 004A8450

size_t __cdecl _strcspn(char *_Str, char *_Control)

{
    byte bVar1;
    byte *pbVar2;
    size_t sVar3;
    undefined_32 uStack_28;
    undefined_32 uStack_24;
    undefined_32 uStack_20;
    undefined_32 uStack_1c;
    undefined_32 uStack_18;
    undefined_32 uStack_14;
    undefined_32 uStack_10;
    undefined_32 uStack_c;

    uStack_c = 0;
    uStack_10 = 0;
    uStack_14 = 0;
    uStack_18 = 0;
    uStack_1c = 0;
    uStack_20 = 0;
    uStack_24 = 0;
    uStack_28 = 0;
    for (; bVar1 = *_Control, bVar1 != 0; _Control = (char *)((byte *)_Control + 1))
    {
        pbVar2 = (byte *)((int)&uStack_28 + ((int)(uint)bVar1 >> 3));
        *pbVar2 = *pbVar2 | '\x01' << (bVar1 & 7);
    }
    sVar3 = -1;
    do
    {
        sVar3 = sVar3 + 1;
        bVar1 = *_Str;
        if (bVar1 == 0)
        {
            return sVar3;
        }
        _Str = (char *)((byte *)_Str + 1);
    } while ((*(byte *)((int)&uStack_28 + ((int)(uint)bVar1 >> 3)) >> (bVar1 & 7) & 1) == 0);
    return sVar3;
}

// WARNING: Could not reconcile some variable overlaps

// static import 004a8490
undefined_32 ___strgtold12(ushort *param_1, byte **param_2, byte *param_3, undefined_32 param_4, int param_5,
                           int param_6, int param_7)

{
    char cVar1;
    bool bVar2;
    bool bVar3;
    bool bVar4;
    bool bVar5;
    bool bVar6;
    ushort uVar7;
    int iVar8;
    uint uVar9;
    byte bVar10;
    byte *pbVar11;
    byte *pbVar12;
    uint uVar13;
    byte *pbVar14;
    int local_60;
    char *local_5c;
    uint local_54;
    byte *local_50;
    int local_4c;
    int local_48;
    undefined_32 local_30;
    ushort local_2c;
    undefined_16 uStack_2a;
    undefined_16 uStack_28;
    byte *local_26;
    undefined_32 local_22;
    char local_1c[23];
    char local_5;

    local_5c = local_1c;
    iVar8 = 0;
    uVar13 = 0;
    uVar7 = 0;
    local_4c = 1;
    local_54 = 0;
    bVar2 = false;
    bVar4 = false;
    bVar3 = false;
    bVar5 = false;
    bVar6 = false;
    local_48 = 0;
    local_60 = 0;
    local_30 = 0;
    local_50 = param_3;
    for (pbVar11 = param_3; (((bVar10 = *pbVar11, bVar10 == 0x20 || (bVar10 == 9)) || (bVar10 == 10))
                             || (pbVar14 = param_3, bVar10 == 0xd));
         pbVar11 = pbVar11 + 1)
    {}
    do
    {
        bVar10 = *pbVar11;
        pbVar12 = pbVar11 + 1;
        uVar9 = (uint)bVar10;
        param_3 = (byte *)((uint)param_3 & 0xffffff00 | uVar9);
        switch (iVar8)
        {
        case 0:
            if (('0' < (char)bVar10) && ((char)bVar10 < ':'))
            {
                iVar8 = 3;
                goto LAB_004a8962;
            }
            if (bVar10 == DAT_004d1fa0)
            {
                iVar8 = 5;
            }
            else if (bVar10 == 0x2b)
            {
                iVar8 = 2;
                uVar7 = 0;
            }
            else if (bVar10 == 0x2d)
            {
                iVar8 = 2;
                uVar7 = 0x8000;
            }
            else
            {
                if (bVar10 != 0x30)
                    goto switchD_004a85c6_caseD_2c;
                iVar8 = 1;
            }
            break;
        case 1:
            bVar2 = true;
            if (('0' < (char)bVar10) && ((char)bVar10 < ':'))
            {
                iVar8 = 3;
                goto LAB_004a8962;
            }
            if (bVar10 == DAT_004d1fa0)
            {
                iVar8 = 4;
            }
            else
            {
                switch (bVar10)
                {
                case 0x2b:
                case 0x2d:
                    goto switchD_004a85c6_caseD_2b;
                default:
                    goto switchD_004a85c6_caseD_2c;
                case 0x30:
                switchD_004a85c6_caseD_30:
                    iVar8 = 1;
                    break;
                case 0x44:
                case 0x45:
                case 100:
                case 0x65:
                    goto switchD_004a85c6_caseD_44;
                }
            }
            break;
        case 2:
            if (('0' < (char)bVar10) && ((char)bVar10 < ':'))
            {
                iVar8 = 3;
                goto LAB_004a8962;
            }
            if (bVar10 == DAT_004d1fa0)
            {
                iVar8 = 5;
            }
            else
            {
                if (bVar10 == 0x30)
                    goto switchD_004a85c6_caseD_30;
                iVar8 = 10;
                pbVar12 = pbVar14;
            }
            break;
        case 3:
            while (true)
            {
                bVar2 = true;
                if (DAT_004d1f9c < 2)
                {
                    uVar9 = (byte)PTR_DAT_004d1d90[((uint)param_3 & 0xff) * 2] & 4;
                }
                else
                {
                    uVar9 = __isctype((uint)param_3 & 0xff, 4);
                }
                if (uVar9 == 0)
                    break;
                if (uVar13 < 0x19)
                {
                    uVar13 = uVar13 + 1;
                    *local_5c = bVar10 - 0x30;
                    bVar10 = *pbVar12;
                    local_5c = local_5c + 1;
                    param_3 = (byte *)((uint)param_3 & 0xffffff00 | (uint)bVar10);
                    pbVar12 = pbVar12 + 1;
                }
                else
                {
                    bVar10 = *pbVar12;
                    local_60 = local_60 + 1;
                    param_3 = (byte *)((uint)param_3 & 0xffffff00 | (uint)bVar10);
                    pbVar12 = pbVar12 + 1;
                }
            }
            local_54 = uVar13;
            if (bVar10 != DAT_004d1fa0)
            {
                switch (bVar10)
                {
                case 0x2b:
                case 0x2d:
                    goto switchD_004a85c6_caseD_2b;
                case 0x44:
                case 0x45:
                case 100:
                case 0x65:
                    goto switchD_004a85c6_caseD_44;
                }
            switchD_004a85c6_caseD_2c:
                iVar8 = 10;
                goto LAB_004a8962;
            }
            iVar8 = 4;
            break;
        case 4:
            bVar4 = true;
            if (uVar13 == 0)
            {
                while (bVar10 == 0x30)
                {
                    bVar10 = *pbVar12;
                    local_60 = local_60 + -1;
                    pbVar12 = pbVar12 + 1;
                    param_3 = (byte *)((uint)param_3 & 0xffffff00 | (uint)bVar10);
                }
            }
            while (true)
            {
                bVar2 = true;
                if (DAT_004d1f9c < 2)
                {
                    uVar9 = (byte)PTR_DAT_004d1d90[((uint)param_3 & 0xff) * 2] & 4;
                }
                else
                {
                    uVar9 = __isctype((uint)param_3 & 0xff, 4);
                }
                if (uVar9 == 0)
                    break;
                if (uVar13 < 0x19)
                {
                    uVar13 = uVar13 + 1;
                    *local_5c = bVar10 - 0x30;
                    local_5c = local_5c + 1;
                    local_60 = local_60 + -1;
                }
                bVar10 = *pbVar12;
                pbVar12 = pbVar12 + 1;
                param_3 = (byte *)((uint)param_3 & 0xffffff00 | (uint)bVar10);
            }
            local_54 = uVar13;
            switch (bVar10)
            {
            case 0x2b:
            case 0x2d:
            switchD_004a85c6_caseD_2b:
                bVar2 = true;
                pbVar12 = pbVar12 + -1;
                iVar8 = 0xb;
                break;
            default:
                goto switchD_004a85c6_caseD_2c;
            case 0x44:
            case 0x45:
            case 100:
            case 0x65:
            switchD_004a85c6_caseD_44:
                bVar2 = true;
                iVar8 = 6;
            }
            break;
        case 5:
            bVar4 = true;
            if (DAT_004d1f9c < 2)
            {
                uVar9 = (byte)PTR_DAT_004d1d90[uVar9 * 2] & 4;
            }
            else
            {
                uVar9 = __isctype(uVar9, 4);
            }
            if (uVar9 == 0)
            {
                iVar8 = 10;
                pbVar12 = pbVar14;
            }
            else
            {
                iVar8 = 4;
                pbVar12 = pbVar11;
            }
            break;
        case 6:
            pbVar11 = pbVar11 + -1;
            pbVar14 = pbVar11;
            local_50 = pbVar11;
            if (('0' < (char)bVar10) && ((char)bVar10 < ':'))
            {
                iVar8 = 9;
                goto LAB_004a8962;
            }
            if (bVar10 == 0x2b)
            {
            LAB_004a8956:
                iVar8 = 7;
                pbVar14 = pbVar11;
                local_50 = pbVar11;
            }
            else
            {
                if (bVar10 != 0x2d)
                    goto LAB_004a8846;
            LAB_004a8947:
                iVar8 = 7;
                local_4c = -1;
                pbVar14 = pbVar11;
                local_50 = pbVar11;
            }
            break;
        case 7:
            if (('0' < (char)bVar10) && ((char)bVar10 < ':'))
            {
                iVar8 = 9;
                goto LAB_004a8962;
            }
        LAB_004a8846:
            if (bVar10 == 0x30)
            {
                iVar8 = 8;
            }
            else
            {
                iVar8 = 10;
                pbVar12 = pbVar14;
            }
            break;
        case 8:
            bVar3 = true;
            while (bVar10 == 0x30)
            {
                bVar10 = *pbVar12;
                pbVar12 = pbVar12 + 1;
            }
            if (((char)bVar10 < '1') || ('9' < (char)bVar10))
                goto switchD_004a85c6_caseD_2c;
            iVar8 = 9;
        LAB_004a8962:
            pbVar12 = pbVar12 + -1;
            break;
        case 9:
            bVar3 = true;
            local_48 = 0;
            while (true)
            {
                if (DAT_004d1f9c < 2)
                {
                    uVar13 = (byte)PTR_DAT_004d1d90[((uint)param_3 & 0xff) * 2] & 4;
                }
                else
                {
                    uVar13 = __isctype((uint)param_3 & 0xff, 4);
                }
                if (uVar13 == 0)
                    goto LAB_004a88ca;
                local_48 = (char)bVar10 + -0x30 + local_48 * 10;
                if (0x1450 < local_48)
                    break;
                bVar10 = *pbVar12;
                pbVar12 = pbVar12 + 1;
                param_3 = (byte *)((uint)param_3 & 0xffffff00 | (uint)bVar10);
            }
            local_48 = 0x1451;
        LAB_004a88ca:
            while (true)
            {
                if (DAT_004d1f9c < 2)
                {
                    uVar13 = (byte)PTR_DAT_004d1d90[((uint)param_3 & 0xff) * 2] & 4;
                }
                else
                {
                    uVar13 = __isctype((uint)param_3 & 0xff, 4);
                }
                if (uVar13 == 0)
                    break;
                bVar10 = *pbVar12;
                pbVar12 = pbVar12 + 1;
                param_3 = (byte *)((uint)param_3 & 0xffffff00 | (uint)bVar10);
            }
            iVar8 = 10;
            pbVar12 = pbVar12 + -1;
            uVar13 = local_54;
            pbVar14 = local_50;
            break;
        case 0xb:
            if (param_7 == 0)
                goto switchD_004a85c6_caseD_2c;
            if (bVar10 == 0x2b)
                goto LAB_004a8956;
            if (bVar10 == 0x2d)
                goto LAB_004a8947;
            iVar8 = 10;
            pbVar12 = pbVar11;
            pbVar14 = pbVar11;
            local_50 = pbVar11;
        }
        pbVar11 = pbVar12;
    } while (iVar8 != 10);
    *param_2 = pbVar12;
    if (bVar2)
    {
        if (0x18 < uVar13)
        {
            if ('\x04' < local_5)
            {
                local_5 = local_5 + '\x01';
            }
            local_5c = local_5c + -1;
            local_60 = local_60 + 1;
            uVar13 = 0x18;
        }
        if (uVar13 == 0)
        {
            local_2c = 0;
            local_22._0_2_ = 0;
            param_3 = NULL;
            pbVar11 = NULL;
            goto LAB_004a8a34;
        }
        cVar1 = local_5c[-1];
        while (cVar1 == '\0')
        {
            uVar13 = uVar13 - 1;
            local_60 = local_60 + 1;
            cVar1 = local_5c[-2];
            local_5c = local_5c + -1;
        }
        ___mtold12(local_1c, uVar13, &local_2c);
        if (local_4c < 0)
        {
            local_48 = -local_48;
        }
        local_48 = local_48 + local_60;
        if (!bVar3)
        {
            local_48 = local_48 + param_5;
        }
        if (!bVar4)
        {
            local_48 = local_48 - param_6;
        }
        if (local_48 < 0x1451)
        {
            if (-0x1451 < local_48)
            {
                ___multtenpow12(&local_2c, local_48, param_4);
                pbVar11 = (byte *)CONCAT22(uStack_28, uStack_2a);
                param_3 = local_26;
                goto LAB_004a8a34;
            }
            bVar6 = true;
        }
        else
        {
            bVar5 = true;
        }
    }
    local_2c = (ushort)param_3;
    pbVar11 = param_3;
    local_22._0_2_ = local_2c;
LAB_004a8a34:
    if (bVar2)
    {
        if (bVar5)
        {
            pbVar11 = NULL;
            local_22._0_2_ = 0x7fff;
            param_3 = (byte *)0x80000000;
            local_2c = 0;
            local_30 = 2;
        }
        else if (bVar6)
        {
            local_2c = 0;
            local_22._0_2_ = 0;
            param_3 = NULL;
            pbVar11 = NULL;
            local_30 = 1;
        }
    }
    else
    {
        local_2c = 0;
        local_22._0_2_ = 0;
        param_3 = NULL;
        pbVar11 = NULL;
        local_30 = 4;
    }
    *param_1 = local_2c;
    *(byte **)(param_1 + 1) = pbVar11;
    *(byte **)(param_1 + 3) = param_3;
    param_1[5] = (ushort)local_22 | uVar7;
    return local_30;
}

// static import 004a8cc0
undefined_32 *_calloc(int param_1, int param_2)

{
    int iVar1;
    uint uVar2;
    uint dwBytes;
    undefined_32 *puVar3;
    undefined_32 *puVar4;

    dwBytes = param_2 * param_1;
    if (dwBytes < 0xffffffe1)
    {
        if (dwBytes == 0)
        {
            dwBytes = 0x10;
        }
        else
        {
            dwBytes = dwBytes + 0xf & 0xfffffff0;
        }
    }
    do
    {
        puVar3 = NULL;
        if (dwBytes < 0xffffffe1)
        {
            if (DAT_004d422c < dwBytes)
            {
            LAB_004a8d34:
                if (puVar3 != NULL)
                {
                    return puVar3;
                }
            }
            else
            {
                __lock(9);
                puVar3 = (undefined_32 *)___sbh_alloc_block(dwBytes >> 4);
                __unlock(9);
                if (puVar3 != NULL)
                {
                    puVar4 = puVar3;
                    MEMSET(uVar2, puVar4, 0, dwBytes >> 2)
                    for (uVar2 = dwBytes & 3; uVar2 != 0; uVar2 = uVar2 - 1)
                    {
                        *(undefined_8 *)puVar4 = 0;
                        puVar4 = (undefined_32 *)((int)puVar4 + 1);
                    }
                    goto LAB_004a8d34;
                }
            }
            puVar3 = (undefined_32 *)HeapAlloc(DAT_00ecd604, 8, dwBytes);
        }
        if ((puVar3 != NULL) || (DAT_00dfab64 == 0))
        {
            return puVar3;
        }
        iVar1 = ___callnewh(dwBytes);
        if (iVar1 == 0)
        {
            return NULL;
        }
    } while (true);
}

// static import 004a8d70
int __setmode_lk(uint param_1, int param_2)

{
    byte bVar1;
    undefined_32 *puVar2;
    byte bVar3;

    bVar1 = *(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24);
    if (param_2 == 0x8000)
    {
        bVar3 = bVar1 & 0x7f;
    }
    else
    {
        if (param_2 != 0x4000)
        {
            puVar2 = (undefined_32 *)__errno();
            *puVar2 = 0x16;
            return -1;
        }
        bVar3 = bVar1 | 0x80;
    }
    *(byte *)((&DAT_00ecd500)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) = bVar3;
    return (-(uint)((bVar1 & 0x80) != 0) & 0xffffc000) + 0x8000;
}

// static import 004a8de0
int ___crtMessageBoxA(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    HMODULE hModule;
    int iVar1;

    iVar1 = 0;
    if (DAT_00dfaf24 != (FARPROC)0x0)
    {
    LAB_004a8e30:
        if (DAT_00dfaf28 != (FARPROC)0x0)
        {
            iVar1 = (*DAT_00dfaf28)();
        }
        if ((iVar1 != 0) && (DAT_00dfaf2c != (FARPROC)0x0))
        {
            iVar1 = (*DAT_00dfaf2c)(iVar1);
        }
        iVar1 = (*DAT_00dfaf24)(iVar1, param_1, param_2, param_3);
        return iVar1;
    }
    hModule = LoadLibraryA("user32.dll");
    if (hModule != (HMODULE)0x0)
    {
        DAT_00dfaf24 = GetProcAddress(hModule, "MessageBoxA");
        if (DAT_00dfaf24 != (FARPROC)0x0)
        {
            DAT_00dfaf28 = GetProcAddress(hModule, "GetActiveWindow");
            DAT_00dfaf2c = GetProcAddress(hModule, "GetLastActivePopup");
            goto LAB_004a8e30;
        }
    }
    return 0;
}

// static import 004a8e70
void ___tzset(void)

{
    if (DAT_00dfafe8 == 0)
    {
        __lock(0xb);
        if (DAT_00dfafe8 == 0)
        {
            ___tzset_lk();
            DAT_00dfafe8 = DAT_00dfafe8 + 1;
        }
        __unlock(0xb);
    }
    return;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// static import 004a8eb0
void ___tzset_lk(void)

{
    byte bVar1;
    byte bVar2;
    byte *pbVar3;
    DWORD DVar4;
    int iVar5;
    uint uVar6;
    uint uVar7;
    byte *pbVar8;
    undefined_32 *puVar9;
    byte *pbVar10;
    undefined_32 *puVar11;
    bool bVar12;

    __lock(0xc);
    DAT_00dfaf30 = 0;
    _DAT_004d50d8 = -1;
    DAT_004d50c8 = -1;
    pbVar3 = (byte *)__getenv_lk(&DAT_004b04c0);
    if (pbVar3 == NULL)
    {
        __unlock(0xc);
        DVar4 = GetTimeZoneInformation((LPTIME_ZONE_INFORMATION)&DAT_00dfaf38);
        if (DVar4 == -1)
        {
            return;
        }
        DAT_00dfaf30 = 1;
        DAT_004d5030 = DAT_00dfaf38 * 0x3c;
        if (DAT_00dfaf7e != 0)
        {
            DAT_004d5030 = DAT_004d5030 + DAT_00dfaf8c * 0x3c;
        }
        if ((DAT_00dfafd2 == 0) || (DAT_00dfafe0 == 0))
        {
            DAT_004d5034 = 0;
            DAT_004d5038 = 0;
        }
        else
        {
            DAT_004d5034 = 1;
            DAT_004d5038 = (DAT_00dfafe0 - DAT_00dfaf8c) * 0x3c;
        }
        _wcstombs(PTR_DAT_004d50c0, &DAT_00dfaf3c, 0x40);
        _wcstombs(PTR_DAT_004d50c4, &DAT_00dfaf90, 0x40);
        PTR_DAT_004d50c4[0x3f] = 0;
        PTR_DAT_004d50c0[0x3f] = 0;
        return;
    }
    if (*pbVar3 != 0)
    {
        pbVar8 = pbVar3;
        puVar9 = DAT_00dfafe4;
        if (DAT_00dfafe4 != NULL)
        {
            do
            {
                bVar1 = *pbVar8;
                bVar12 = bVar1 < *(byte *)puVar9;
                if (bVar1 != *(byte *)puVar9)
                {
                LAB_004a9007:
                    iVar5 = (1 - (uint)bVar12) - (uint)(bVar12 != 0);
                    goto LAB_004a900c;
                }
                if (bVar1 == 0)
                    break;
                bVar1 = pbVar8[1];
                bVar12 = bVar1 < *(byte *)((int)puVar9 + 1);
                if (bVar1 != *(byte *)((int)puVar9 + 1))
                    goto LAB_004a9007;
                pbVar8 = pbVar8 + 2;
                puVar9 = (undefined_32 *)((int)puVar9 + 2);
            } while (bVar1 != 0);
            iVar5 = 0;
        LAB_004a900c:
            if (iVar5 == 0)
                goto LAB_004a9179;
        }
        _free(DAT_00dfafe4);
        uVar6 = -1;
        pbVar8 = pbVar3;
        do
        {
            if (uVar6 == 0)
                break;
            uVar6 = uVar6 - 1;
            bVar1 = *pbVar8;
            pbVar8 = pbVar8 + 1;
        } while (bVar1 != 0);
        DAT_00dfafe4 = (undefined_32 *)_malloc(~uVar6);
        if (DAT_00dfafe4 != NULL)
        {
            uVar6 = -1;
            pbVar8 = pbVar3;
            do
            {
                pbVar10 = pbVar8;
                if (uVar6 == 0)
                    break;
                uVar6 = uVar6 - 1;
                pbVar10 = pbVar8 + 1;
                bVar1 = *pbVar8;
                pbVar8 = pbVar10;
            } while (bVar1 != 0);
            uVar6 = ~uVar6;
            puVar9 = (undefined_32 *)(pbVar10 + -uVar6);
            puVar11 = DAT_00dfafe4;
            QMEMCPY(uVar7, puVar9, puVar11, uVar6 >> 2)
            for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1)
            {
                *(undefined_8 *)puVar11 = *(undefined_8 *)puVar9;
                puVar9 = (undefined_32 *)((int)puVar9 + 1);
                puVar11 = (undefined_32 *)((int)puVar11 + 1);
            }
            __unlock(0xc);
            _strncpy(PTR_DAT_004d50c0, (char *)pbVar3, 3);
            pbVar8 = pbVar3 + 3;
            PTR_DAT_004d50c0[3] = 0;
            bVar1 = *pbVar8;
            if (bVar1 == 0x2d)
            {
                pbVar8 = pbVar3 + 4;
            }
            iVar5 = _atol(pbVar8);
            DAT_004d5030 = iVar5 * 0xe10;
            for (; (bVar2 = *pbVar8, bVar2 == 0x2b || (('/' < (char)bVar2 && ((char)bVar2 < ':'))));
                 pbVar8 = pbVar8 + 1)
            {}
            if (*pbVar8 == 0x3a)
            {
                pbVar8 = pbVar8 + 1;
                iVar5 = _atol(pbVar8);
                DAT_004d5030 = DAT_004d5030 + iVar5 * 0x3c;
                bVar2 = *pbVar8;
                while (('/' < (char)bVar2 && ((char)bVar2 < ':')))
                {
                    pbVar3 = pbVar8 + 1;
                    pbVar8 = pbVar8 + 1;
                    bVar2 = *pbVar3;
                }
                if (*pbVar8 == 0x3a)
                {
                    pbVar8 = pbVar8 + 1;
                    iVar5 = _atol(pbVar8);
                    DAT_004d5030 = DAT_004d5030 + iVar5;
                    bVar2 = *pbVar8;
                    while (('/' < (char)bVar2 && ((char)bVar2 < ':')))
                    {
                        pbVar3 = pbVar8 + 1;
                        pbVar8 = pbVar8 + 1;
                        bVar2 = *pbVar3;
                    }
                }
            }
            if (bVar1 == 0x2d)
            {
                DAT_004d5030 = -DAT_004d5030;
            }
            DAT_004d5034 = (int)(char)*pbVar8;
            if (DAT_004d5034 == 0)
            {
                *PTR_DAT_004d50c4 = 0;
                return;
            }
            _strncpy(PTR_DAT_004d50c4, (char *)pbVar8, 3);
            PTR_DAT_004d50c4[3] = 0;
            return;
        }
    }
LAB_004a9179:
    __unlock(0xc);
    return;
}

// Library Function - Single Match
//  __isindst
//
// Library: Visual Studio 1998 Release

// 004A9190

int __cdecl __isindst(tm *_Time)

{
    int iVar1;

    __lock(0xb);
    iVar1 = FUN_004a91c0(_Time);
    __unlock(0xb);
    return iVar1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

bool FUN_004a91c0(int *param_1)

{
    uint uVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    undefined_32 uVar5;
    int iVar6;
    undefined_16 uVar7;
    undefined_16 uVar8;

    if (DAT_004d5034 == 0)
    {
        return false;
    }
    iVar6 = param_1[5];
    if ((iVar6 == DAT_004d50c8) && (iVar6 == _DAT_004d50d8))
        goto LAB_004a9394;
    if (DAT_00dfaf30 == 0)
    {
        _cvtdate(1, 1, iVar6, 4, 1, 0, 0, 2, 0, 0, 0);
        iVar6 = param_1[5];
        DAT_00dfaf88._2_2_ = 0;
        uVar3 = 0;
        DAT_00dfaf84._2_2_ = 0;
        uVar4 = 2;
        uVar1 = 0;
        DAT_00dfaf80._2_2_ = 5;
        uVar7 = 10;
    LAB_004a9388:
        uVar5 = 1;
        uVar8 = DAT_00dfaf80._2_2_;
        DAT_00dfaf80._2_2_ = 0;
    }
    else
    {
        if (_DAT_00dfafd0 != 0)
        {
            uVar3 = 0;
            uVar7 = 0;
        }
        else
        {
            uVar3 = DAT_00dfafd4 & 0xffff;
            uVar7 = DAT_00dfafd4._2_2_;
            DAT_00dfafd4._2_2_ = 0;
        }
        _cvtdate(1, _DAT_00dfafd0 == 0, iVar6, DAT_00dfafd2, uVar7, uVar3, DAT_00dfafd4._2_2_, _DAT_00dfafd8 & 0xffff,
                 _DAT_00dfafd8 >> 0x10, DAT_00dfafdc & 0xffff, DAT_00dfafdc >> 0x10);
        uVar7 = DAT_00dfaf7e;
        if (_DAT_00dfaf7c == 0)
        {
            uVar3 = DAT_00dfaf88 & 0xffff;
            uVar4 = DAT_00dfaf84 & 0xffff;
            uVar1 = DAT_00dfaf80 & 0xffff;
            iVar6 = param_1[5];
            goto LAB_004a9388;
        }
        uVar3 = DAT_00dfaf88 & 0xffff;
        uVar4 = DAT_00dfaf84 & 0xffff;
        iVar6 = param_1[5];
        uVar1 = 0;
        uVar8 = 0;
        uVar5 = 0;
    }
    _cvtdate(0, uVar5, iVar6, uVar7, uVar8, uVar1, DAT_00dfaf80._2_2_, uVar4, DAT_00dfaf84._2_2_, uVar3,
             DAT_00dfaf88._2_2_);
LAB_004a9394:
    iVar6 = param_1[7];
    if (DAT_004d50cc < DAT_004d50dc)
    {
        if ((iVar6 < DAT_004d50cc) || (DAT_004d50dc < iVar6))
        {
            return false;
        }
        if ((DAT_004d50cc < iVar6) && (iVar6 < DAT_004d50dc))
        {
            return true;
        }
    }
    else
    {
        if ((iVar6 < DAT_004d50dc) || (DAT_004d50cc < iVar6))
        {
            return true;
        }
        if ((DAT_004d50dc < iVar6) && (iVar6 < DAT_004d50cc))
        {
            return false;
        }
    }
    iVar2 = (*param_1 + (param_1[1] + param_1[2] * 0x3c) * 0x3c) * 1000;
    if (iVar6 != DAT_004d50cc)
    {
        return iVar2 < DAT_004d50e0;
    }
    return DAT_004d50d0 <= iVar2;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// static import 004a9430
void _cvtdate(int param_1, int param_2, uint param_3, int param_4, int param_5, int param_6, int param_7, int param_8,
              int param_9, int param_10, int param_11)

{
    int iVar1;
    int iVar2;

    if (param_2 == 1)
    {
        if ((param_3 & 3) == 0)
        {
            iVar1 = *(int *)(&DAT_004d50e4 + param_4 * 4);
        }
        else
        {
            iVar1 = *(int *)(&DAT_004d511c + param_4 * 4);
        }
        iVar2 = (int)(((int)(param_3 - 1) >> 2) + -0x63db + param_3 * 0x16d + iVar1 + 1) % 7;
        if (iVar2 < param_6)
        {
            iVar1 = iVar1 + -6 + (param_5 * 7 - iVar2) + param_6;
        }
        else
        {
            iVar1 = iVar1 + 1 + (param_5 * 7 - iVar2) + param_6;
        }
        if (param_5 == 5)
        {
            if ((param_3 & 3) == 0)
            {
                iVar2 = *(int *)(&DAT_004d50e8 + param_4 * 4);
            }
            else
            {
                iVar2 = *(int *)(&DAT_004d5120 + param_4 * 4);
            }
            if (iVar2 < iVar1)
            {
                iVar1 = iVar1 + -7;
            }
        }
    }
    else
    {
        if ((param_3 & 3) == 0)
        {
            iVar1 = *(int *)(&DAT_004d50e4 + param_4 * 4);
        }
        else
        {
            iVar1 = *(int *)(&DAT_004d511c + param_4 * 4);
        }
        iVar1 = iVar1 + param_7;
    }
    if (param_1 == 1)
    {
        DAT_004d50cc = iVar1;
        DAT_004d50c8 = param_3;
        DAT_004d50d0 = param_11 + (param_10 + (param_9 + param_8 * 0x3c) * 0x3c) * 1000;
        return;
    }
    DAT_004d50dc = iVar1;
    DAT_004d50e0 = param_11 + (param_10 + (param_9 + param_8 * 0x3c) * 0x3c + DAT_004d5038) * 1000;
    if (DAT_004d50e0 < 0)
    {
        _DAT_004d50d8 = param_3;
        DAT_004d50e0 = DAT_004d50e0 + 86399999;
        return;
    }
    if (86399999 < DAT_004d50e0)
    {
        DAT_004d50e0 = DAT_004d50e0 + -86399999;
    }
    _DAT_004d50d8 = param_3;
    return;
}

// static import 004a95d0
undefined_32 _mbtowc(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    bool bVar2;

    InterlockedIncrement((LONG *)&DAT_00ecd60c);
    bVar2 = DAT_00ecd608 != 0;
    if (bVar2)
    {
        InterlockedDecrement((LONG *)&DAT_00ecd60c);
        __lock(0x13);
    }
    uVar1 = _mbtowc_lk(param_1, param_2, param_3);
    if (!bVar2)
    {
        InterlockedDecrement((LONG *)&DAT_00ecd60c);
        return uVar1;
    }
    __unlock(0x13);
    return uVar1;
}

// static import 004a9650
uint _mbtowc_lk(LPWSTR param_1, byte *param_2, uint param_3)

{
    byte bVar1;
    int iVar2;
    undefined_32 *puVar3;

    if ((param_2 != NULL) && (param_3 != 0))
    {
        bVar1 = *param_2;
        if (bVar1 != 0)
        {
            if (DAT_00dfab38 == 0)
            {
                if (param_1 == (LPWSTR)0x0)
                {
                    return 1;
                }
                *param_1 = (ushort)bVar1;
                return 1;
            }
            if ((PTR_DAT_004d1d90[(uint)bVar1 * 2 + 1] & 0x80) == 0)
            {
                iVar2 =
                    MultiByteToWideChar(DAT_00dfab48, 9, (LPCSTR)param_2, 1, param_1, (uint)(param_1 != (LPWSTR)0x0));
                if (iVar2 != 0)
                {
                    return 1;
                }
            }
            else
            {
                if (((1 < (int)DAT_004d1f9c) && ((int)DAT_004d1f9c <= (int)param_3))
                    && (iVar2 = MultiByteToWideChar(DAT_00dfab48, 9, (LPCSTR)param_2, DAT_004d1f9c, param_1,
                                                    (uint)(param_1 != (LPWSTR)0x0)),
                        iVar2 != 0))
                {
                    return DAT_004d1f9c;
                }
                if (DAT_004d1f9c <= param_3)
                {
                    if (param_2[1] != 0)
                    {
                        return DAT_004d1f9c;
                    }
                    puVar3 = (undefined_32 *)__errno();
                    *puVar3 = 0x2a;
                    return -1;
                }
            }
            puVar3 = (undefined_32 *)__errno();
            *puVar3 = 0x2a;
            return -1;
        }
        if (param_1 != (LPWSTR)0x0)
        {
            *param_1 = L'\0';
            return 0;
        }
    }
    return 0;
}

// static import 004a9750
uint __putwc_lk(uint param_1, byte **param_2)

{
    undefined_8 *puVar1;
    int iVar2;
    undefined_32 *puVar3;
    byte *pbVar4;
    uint uVar5;
    byte local_8;
    byte bStack_7;

    if ((*(byte *)(param_2 + 3) & 0x40) == 0)
    {
        pbVar4 = param_2[4];
        if (pbVar4 == (byte *)-1)
        {
            puVar1 = &DAT_004d43a0;
        }
        else
        {
            puVar1 = (undefined_8 *)((&DAT_00ecd500)[(int)pbVar4 >> 5] + ((uint)pbVar4 & 0x1f) * 0x24);
        }
        if ((puVar1[4] & 0x80) != 0)
        {
            iVar2 = _wctomb(&local_8, param_1);
            if (iVar2 == -1)
            {
                puVar3 = (undefined_32 *)__errno();
                *puVar3 = 0x2a;
                return 0xffff;
            }
            if (iVar2 == 1)
            {
                pbVar4 = param_2[1] + -1;
                param_2[1] = pbVar4;
                if ((int)pbVar4 < 0)
                {
                    uVar5 = __flsbuf((int)(char)local_8, param_2);
                }
                else
                {
                    **param_2 = local_8;
                    uVar5 = CONCAT11(bStack_7, local_8) & 0xff;
                    *param_2 = *param_2 + 1;
                }
                if (uVar5 == -1)
                {
                    return -1;
                }
            LAB_004a9868:
                return param_1 & 0xffff;
            }
            pbVar4 = param_2[1] + -1;
            param_2[1] = pbVar4;
            if ((int)pbVar4 < 0)
            {
                uVar5 = __flsbuf((int)(char)local_8, param_2);
            }
            else
            {
                **param_2 = local_8;
                uVar5 = CONCAT11(bStack_7, local_8) & 0xff;
                *param_2 = *param_2 + 1;
            }
            if (uVar5 != -1)
            {
                pbVar4 = param_2[1];
                param_2[1] = pbVar4 + -1;
                if ((int)(pbVar4 + -1) < 0)
                {
                    uVar5 = __flsbuf((int)(char)bStack_7, param_2);
                }
                else
                {
                    **param_2 = bStack_7;
                    uVar5 = (uint)bStack_7;
                    *param_2 = *param_2 + 1;
                }
                if (uVar5 != -1)
                    goto LAB_004a9868;
            }
            return 0xffff;
        }
    }
    pbVar4 = param_2[1];
    param_2[1] = pbVar4 + -2;
    if (-1 < (int)(pbVar4 + -2))
    {
        *(short *)*param_2 = (short)param_1;
        *param_2 = *param_2 + 2;
        return param_1;
    }
    uVar5 = __flswbuf(param_1 & 0xffff, param_2);
    return uVar5;
}

// static import 004a98c0
undefined_16 __filwbuf(undefined_32 *param_1)

{
    undefined_16 uVar1;
    uint uVar2;
    int iVar3;
    undefined_8 *puVar4;

    uVar2 = param_1[3];
    if (((uVar2 & 0x83) != 0) && ((uVar2 & 0x40) == 0))
    {
        if ((uVar2 & 2) != 0)
        {
            param_1[3] = uVar2 | 0x20;
            return 0xffff;
        }
        param_1[3] = uVar2 | 1;
        if ((uVar2 & 0x10c) == 0)
        {
            __getbuf(param_1);
        }
        else
        {
            *param_1 = param_1[2];
        }
        iVar3 = __read(param_1[4], param_1[2], param_1[6]);
        param_1[1] = iVar3;
        if (((iVar3 != 0) && (iVar3 != 1)) && (iVar3 != -1))
        {
            if ((param_1[3] & 0x82) == 0)
            {
                uVar2 = param_1[4];
                if (uVar2 == -1)
                {
                    puVar4 = &DAT_004d43a0;
                }
                else
                {
                    puVar4 = (undefined_8 *)((&DAT_00ecd500)[(int)uVar2 >> 5] + (uVar2 & 0x1f) * 0x24);
                }
                if ((puVar4[4] & 0x82) == 0x82)
                {
                    param_1[3] = param_1[3] | 0x2000;
                }
            }
            if (((param_1[6] == 0x200) && ((param_1[3] & 8) != 0)) && ((param_1[3] & 0x400) == 0))
            {
                param_1[6] = 0x1000;
            }
            param_1[1] = iVar3 + -2;
            uVar1 = *(undefined_16 *)*param_1;
            *param_1 = (undefined_16 *)*param_1 + 1;
            return uVar1;
        }
        param_1[1] = 0;
        param_1[3] = param_1[3] | (-(uint)(iVar3 != 0) & 0x10) + 0x10;
    }
    return 0xffff;
}

// static import 004a99c0
undefined_32 _ungetc(undefined_32 param_1, undefined_32 param_2)

{
    undefined_32 uVar1;

    _lock_file(param_2);
    uVar1 = _ungetc_0(param_1, param_2);
    _unlock_file(param_2);
    return uVar1;
}

// static import 004a99f0
uint _ungetc_0(uint param_1, char **param_2)

{
    char *pcVar1;
    char *pcVar2;

    if ((param_1 != -1)
        && ((pcVar1 = param_2[3],
             ((uint)pcVar1 & 1) != 0 || ((((uint)pcVar1 & 0x80) != 0 && (((uint)pcVar1 & 2) == 0))))))
    {
        if (param_2[2] == NULL)
        {
            __getbuf(param_2);
        }
        if (*param_2 == param_2[2])
        {
            if (param_2[1] != NULL)
            {
                return -1;
            }
            *param_2 = *param_2 + 1;
        }
        if ((*(byte *)(param_2 + 3) & 0x40) == 0)
        {
            pcVar1 = *param_2;
            *param_2 = pcVar1 + -1;
            pcVar1[-1] = (char)param_1;
        }
        else
        {
            pcVar1 = *param_2;
            pcVar2 = pcVar1 + -1;
            *param_2 = pcVar2;
            if (*pcVar2 != (char)param_1)
            {
                *param_2 = pcVar1;
                return -1;
            }
        }
        param_2[1] = param_2[1] + 1;
        param_2[3] = (char *)((uint)param_2[3] & 0xffffffef | 1);
        return param_1 & 0xff;
    }
    return -1;
}

// missing static import from swep1-re
// ----- (004A9A80) --------------------------------------------------------
// __allshl

// ----- (004A9AA0) --------------------------------------------------------
// __fcloseall

// static import 004a9b40
undefined_32 ___addl(uint param_1, uint param_2, uint *param_3)

{
    uint uVar1;
    undefined_32 uVar2;

    uVar2 = 0;
    uVar1 = param_2 + param_1;
    if ((uVar1 < param_1) || (uVar1 < param_2))
    {
        uVar2 = 1;
    }
    *param_3 = uVar1;
    return uVar2;
}

// static import 004a9b70
void ___add_12(undefined_32 *param_1, undefined_32 *param_2)

{
    int iVar1;

    iVar1 = ___addl(*param_1, *param_2, param_1);
    if (iVar1 != 0)
    {
        iVar1 = ___addl(param_1[1], 1, param_1 + 1);
        if (iVar1 != 0)
        {
            param_1[2] = param_1[2] + 1;
        }
    }
    iVar1 = ___addl(param_1[1], param_2[1], param_1 + 1);
    if (iVar1 != 0)
    {
        param_1[2] = param_1[2] + 1;
    }
    ___addl(param_1[2], param_2[2], param_1 + 2);
    return;
}

// static import 004a9be0
void ___shl_12(uint *param_1)

{
    uint uVar1;
    uint uVar2;

    uVar1 = *param_1;
    uVar2 = param_1[1];
    *param_1 = uVar1 * 2;
    param_1[1] = uVar2 * 2 | uVar1 >> 0x1f;
    param_1[2] = param_1[2] << 1 | uVar2 >> 0x1f;
    return;
}

// static import 004a9c10
void ___shr_12(uint *param_1)

{
    uint uVar1;

    uVar1 = param_1[1];
    param_1[1] = uVar1 >> 1 | param_1[2] << 0x1f;
    param_1[2] = param_1[2] >> 1;
    *param_1 = *param_1 >> 1 | uVar1 << 0x1f;
    return;
}

// static import 004a9c40
void ___mtold12(char *param_1, int param_2, uint *param_3)

{
    uint uVar1;
    uint *puVar2;
    short sVar3;
    uint local_c;
    uint local_8;
    uint local_4;

    puVar2 = param_3;
    sVar3 = 0x404e;
    *param_3 = 0;
    param_3[1] = 0;
    param_3[2] = 0;
    if (param_2 != 0)
    {
        param_3 = (uint *)param_2;
        do
        {
            local_c = *puVar2;
            local_8 = puVar2[1];
            local_4 = puVar2[2];
            ___shl_12(puVar2);
            ___shl_12(puVar2);
            ___add_12(puVar2, &local_c);
            ___shl_12(puVar2);
            local_c = (uint)*param_1;
            local_8 = 0;
            local_4 = 0;
            ___add_12(puVar2, &local_c);
            param_1 = param_1 + 1;
            param_3 = (uint *)((int)param_3 + -1);
        } while (param_3 != NULL);
    }
    uVar1 = puVar2[2];
    while (uVar1 == 0)
    {
        sVar3 = sVar3 + -0x10;
        puVar2[2] = puVar2[1] >> 0x10;
        uVar1 = puVar2[2];
        puVar2[1] = *puVar2 >> 0x10 | puVar2[1] << 0x10;
        *puVar2 = *puVar2 << 0x10;
    }
    uVar1 = puVar2[2];
    while ((uVar1 & 0x8000) == 0)
    {
        ___shl_12(puVar2);
        sVar3 = sVar3 + -1;
        uVar1 = puVar2[2];
    }
    *(short *)((int)puVar2 + 10) = sVar3;
    return;
}

// static import 004a9d40
undefined_32 _$I10_OUTPUT(int param_1, uint param_2, uint param_3, int param_4, byte param_5, short *param_6)

{
    short *psVar1;
    ushort uVar2;
    char cVar3;
    uint uVar4;
    int iVar5;
    short *psVar6;
    short *psVar7;
    int iVar8;
    short sVar9;
    int iVar10;
    undefined_8 local_1c;
    undefined_8 local_1b;
    undefined_8 local_1a;
    undefined_8 local_19;
    undefined_8 local_18;
    undefined_8 local_17;
    undefined_8 local_16;
    undefined_8 local_15;
    undefined_8 local_14;
    undefined_8 local_13;
    undefined_8 local_12;
    undefined_8 local_11;
    undefined_16 local_10;
    undefined_16 uStack_e;
    undefined_16 uStack_c;
    undefined_16 uStack_a;
    undefined_16 uStack_8;
    undefined_8 local_6;
    char cStack_5;

    psVar1 = param_6;
    local_1c = 0xcc;
    local_1b = 0xcc;
    local_1a = 0xcc;
    local_19 = 0xcc;
    local_18 = 0xcc;
    local_17 = 0xcc;
    local_16 = 0xcc;
    local_15 = 0xcc;
    local_14 = 0xcc;
    local_13 = 0xcc;
    uVar4 = param_3 & 0x7fff;
    local_12 = 0xfb;
    local_11 = 0x3f;
    if ((param_3 & 0x8000) == 0)
    {
        *(undefined_8 *)(param_6 + 1) = 0x20;
    }
    else
    {
        *(undefined_8 *)(param_6 + 1) = 0x2d;
    }
    if ((((short)uVar4 == 0) && (param_2 == 0)) && (param_1 == 0))
    {
        *param_6 = 0;
    LAB_004a9f4f:
        *(undefined_8 *)(psVar1 + 1) = 0x20;
        *(undefined_8 *)((int)psVar1 + 3) = 1;
        *(undefined_8 *)(psVar1 + 2) = 0x30;
        *(undefined_8 *)((int)psVar1 + 5) = 0;
        return 1;
    }
    if ((short)uVar4 == 0x7fff)
    {
        *param_6 = 1;
        if (((param_2 != 0x80000000) || (param_1 != 0)) && ((param_2 & 2.0f) == 0))
        {
            *(undefined_32 *)(param_6 + 2) = 0x4e532331;
            param_6[4] = 0x4e41;
            *(undefined_8 *)((int)param_6 + 3) = 6;
            *(undefined_8 *)(param_6 + 5) = 0;
            return 0;
        }
        if ((((param_3 & 0x8000) != 0) && (param_2 == 0xc0000000)) && (param_1 == 0))
        {
            *(undefined_32 *)(param_6 + 2) = 0x4e492331;
            *(undefined_8 *)((int)param_6 + 3) = 5;
            param_6[4] = 0x44;
            return 0;
        }
        if ((param_2 == 0x80000000) && (param_1 == 0))
        {
            *(undefined_32 *)(param_6 + 2) = 0x4e492331;
            *(undefined_8 *)((int)param_6 + 3) = 5;
            param_6[4] = 0x46;
            return 0;
        }
        *(undefined_32 *)(param_6 + 2) = 0x4e512331;
        param_6[4] = 0x4e41;
        *(undefined_8 *)((int)param_6 + 3) = 6;
        *(undefined_8 *)(param_6 + 5) = 0;
        return 0;
    }
    local_6 = (undefined_8)uVar4;
    cStack_5 = (char)(uVar4 >> 8);
    uStack_a = (undefined_16)param_2;
    uStack_8 = (undefined_16)(param_2 >> 0x10);
    uStack_e = (undefined_16)param_1;
    uStack_c = (undefined_16)((uint)param_1 >> 0x10);
    local_10 = 0;
    sVar9 = (short)(((uVar4 >> 8) + (param_2 >> 0x18) * 2) * 0x4d + -0x134312f4 + uVar4 * 0x4d10 >> 0x10);
    ___multtenpow12(&local_10, -(int)sVar9, 1);
    if (0x3ffe < CONCAT11(cStack_5, local_6))
    {
        sVar9 = sVar9 + 1;
        ___ld12mul(&local_10, &local_1c);
    }
    *psVar1 = sVar9;
    iVar8 = param_4;
    if (((param_5 & 1) != 0) && (iVar8 = param_4 + sVar9, param_4 + sVar9 < 1))
    {
        *psVar1 = 0;
        goto LAB_004a9f4f;
    }
    if (0x15 < iVar8)
    {
        iVar8 = 0x15;
    }
    uVar2 = CONCAT11(cStack_5, local_6);
    local_6 = 0;
    cStack_5 = '\0';
    iVar5 = 8;
    iVar10 = uVar2 - 0x3ffe;
    do
    {
        ___shl_12(&local_10);
        iVar5 = iVar5 + -1;
    } while (iVar5 != 0);
    if (iVar10 < 0)
    {
        for (uVar4 = -iVar10 & 0xff; uVar4 != 0; uVar4 = uVar4 - 1)
        {
            ___shr_12(&local_10);
        }
    }
    psVar1 = psVar1 + 2;
    iVar8 = iVar8 + 1;
    psVar6 = psVar1;
    if (0 < iVar8)
    {
        do
        {
            param_1 = CONCAT22(uStack_e, local_10);
            param_2 = CONCAT22(uStack_a, uStack_c);
            param_3 = CONCAT13(cStack_5, CONCAT12(local_6, uStack_8));
            ___shl_12(&local_10);
            ___shl_12(&local_10);
            ___add_12(&local_10, &param_1);
            ___shl_12(&local_10);
            cVar3 = cStack_5 + '0';
            cStack_5 = '\0';
            *(char *)psVar6 = cVar3;
            psVar6 = (short *)((int)psVar6 + 1);
            iVar8 = iVar8 + -1;
        } while (iVar8 != 0);
    }
    psVar7 = psVar6 + -1;
    if (*(char *)((int)psVar6 + -1) < '5')
    {
        if (psVar1 <= psVar7)
        {
            do
            {
                if (*(char *)psVar7 != '0')
                    break;
                psVar7 = (short *)((int)psVar7 + -1);
            } while (psVar1 <= psVar7);
            if (psVar1 <= psVar7)
                goto LAB_004aa0a6;
        }
        *(undefined_8 *)psVar1 = 0x30;
        *param_6 = 0;
        *(undefined_8 *)(param_6 + 1) = 0x20;
        *(undefined_8 *)((int)param_6 + 3) = 1;
        *(undefined_8 *)((int)param_6 + 5) = 0;
        return 1;
    }
    if (psVar1 <= psVar7)
    {
        do
        {
            if (*(char *)psVar7 != '9')
                break;
            *(undefined_8 *)psVar7 = 0x30;
            psVar7 = (short *)((int)psVar7 + -1);
        } while (psVar1 <= psVar7);
        if (psVar1 <= psVar7)
        {
            *(char *)psVar7 = *(char *)psVar7 + '\x01';
            goto LAB_004aa0a6;
        }
    }
    psVar7 = (short *)((int)psVar7 + 1);
    *param_6 = *param_6 + 1;
    *(char *)psVar7 = *(char *)psVar7 + '\x01';
LAB_004aa0a6:
    cVar3 = ((char)psVar7 - (char)param_6) + -3;
    *(char *)((int)param_6 + 3) = cVar3;
    *(undefined_8 *)((int)param_6 + cVar3 + 4) = 0;
    return 1;
}

// static import 004aa0d0
undefined_32 ___getlocaleinfo(int param_1, undefined_32 param_2, undefined_32 param_3, char **param_4)

{
    byte bVar1;
    bool bVar2;
    size_t _Count;
    DWORD DVar3;
    int iVar4;
    char *_Source;
    char *_Dest;
    uint uVar5;
    byte *pbVar6;
    char local_80[128];

    if (param_1 != 1)
    {
        if (param_1 != 0)
        {
            return -1;
        }
        iVar4 = ___crtGetLocaleInfoW(param_2, param_3, &DAT_00dfb008, 4, 0);
        if (iVar4 != 0)
        {
            pbVar6 = &DAT_00dfb008;
            *(char *)param_4 = '\0';
            while (true)
            {
                bVar1 = *pbVar6;
                if (DAT_004d1f9c < 2)
                {
                    uVar5 = (byte)PTR_DAT_004d1d90[(uint)bVar1 * 2] & 4;
                }
                else
                {
                    uVar5 = __isctype(bVar1, 4);
                }
                if (uVar5 == 0)
                    break;
                pbVar6 = pbVar6 + 2;
                *(byte *)param_4 = *(char *)param_4 * '\n' + bVar1 + -0x30;
                if (0xdfb00f < (int)pbVar6)
                {
                    return 0;
                }
            }
            return 0;
        }
        return -1;
    }
    _Source = local_80;
    bVar2 = false;
    _Count = FUN_004aaca0(param_2, param_3, local_80, 0x80, 0);
    if (_Count == 0)
    {
        DVar3 = GetLastError();
        if (((DVar3 != 0x7a) || (iVar4 = FUN_004aaca0(param_2, param_3, 0, 0, 0), iVar4 == 0))
            || (_Source = (char *)_malloc(iVar4), _Source == NULL))
            goto LAB_004aa180;
        bVar2 = true;
        _Count = FUN_004aaca0(param_2, param_3, _Source, iVar4, 0);
        if (_Count == 0)
            goto LAB_004aa180;
    }
    _Dest = (char *)_malloc(_Count);
    *param_4 = _Dest;
    if (_Dest != NULL)
    {
        _strncpy(_Dest, _Source, _Count);
        if (!bVar2)
        {
            return 0;
        }
        _free(_Source);
        return 0;
    }
LAB_004aa180:
    if (!bVar2)
    {
        return -1;
    }
    _free(_Source);
    return -1;
}

// WARNING: Globals starting with '_' overlap smaller symbols at the same
// address

// unused
// static import 004aa280
int __strnicmp(byte *param_1, byte *param_2, int param_3)

{
    int iVar1;
    byte bVar2;
    byte bVar4;
    uint uVar3;
    uint uVar5;
    bool bVar6;
    uint uVar7;

    iVar1 = _DAT_00ecd60c;
    if (param_3 != 0)
    {
        if (DAT_00dfab38 == 0)
        {
            do
            {
                bVar4 = *param_1;
                bVar2 = *param_2;
                if ((bVar4 == 0) || (bVar2 == 0))
                    break;
                param_1 = param_1 + 1;
                param_2 = param_2 + 1;
                if ((0x40 < bVar4) && (bVar4 < 0x5b))
                {
                    bVar4 = bVar4 + 0x20;
                }
                if ((0x40 < bVar2) && (bVar2 < 0x5b))
                {
                    bVar2 = bVar2 + 0x20;
                }
                bVar6 = bVar4 < bVar2;
                if (bVar4 != bVar2)
                    goto LAB_004aa2df;
                param_3 = param_3 + -1;
            } while (param_3 != 0);
            param_3 = 0;
            bVar6 = bVar4 < bVar2;
            if (bVar4 != bVar2)
            {
            LAB_004aa2df:
                param_3 = -1;
                if (!bVar6)
                {
                    param_3 = 1;
                }
            }
        }
        else
        {
            LOCK();
            _DAT_00ecd60c = _DAT_00ecd60c + 1;
            bVar6 = 0 < DAT_00ecd608;
            if (bVar6)
            {
                LOCK();
                _DAT_00ecd60c = iVar1;
                __lock(0x13);
            }
            uVar7 = (uint)bVar6;
            uVar5 = 0;
            uVar3 = 0;
            do
            {
                uVar3 = uVar3 & 0xffffff00 | (uint)*param_1;
                uVar5 = uVar5 & 0xffffff00 | (uint)*param_2;
                if ((uVar3 == 0) || (uVar5 == 0))
                    break;
                param_1 = param_1 + 1;
                param_2 = param_2 + 1;
                uVar5 = FUN_0049fee0(uVar5, uVar3);
                uVar3 = FUN_0049fee0();
                bVar6 = uVar3 < uVar5;
                if (uVar3 != uVar5)
                    goto LAB_004aa355;
                param_3 = param_3 + -1;
            } while (param_3 != 0);
            param_3 = 0;
            bVar6 = uVar3 < uVar5;
            if (uVar3 != uVar5)
            {
            LAB_004aa355:
                param_3 = -1;
                if (!bVar6)
                {
                    param_3 = 1;
                }
            }
            if (uVar7 == 0)
            {
                LOCK();
                _DAT_00ecd60c = _DAT_00ecd60c + -1;
            }
            else
            {
                __unlock(0x13);
            }
        }
    }
    return param_3;
}

// static import 004aa390
void ___ld12mul(int *param_1, int *param_2)

{
    ushort uVar1;
    int iVar2;
    ushort uVar3;
    ushort uVar4;
    int iVar5;
    ushort uVar6;
    ushort *puVar7;
    int *piVar8;
    short *local_20;
    int local_18;
    int local_14;
    int local_10;
    byte local_c;
    undefined_8 uStack_b;
    undefined_16 uStack_a;
    short local_8;
    undefined_16 uStack_6;
    undefined_16 local_4;
    ushort uStack_2;

    local_14 = 0;
    local_c = 0;
    uStack_b = 0;
    uStack_a = 0;
    local_8 = 0;
    uStack_6 = 0;
    uVar3 = *(ushort *)((int)param_2 + 10) & 0x7fff;
    uVar1 = *(ushort *)((int)param_1 + 10) & 0x7fff;
    uVar6 = (*(ushort *)((int)param_2 + 10) ^ *(ushort *)((int)param_1 + 10)) & 0x8000;
    uVar4 = uVar3 + uVar1;
    local_4 = 0;
    uStack_2 = 0;
    if (((0x7ffe < uVar1) || (0x7ffe < uVar3)) || (0xbffd < uVar4))
    {
        param_1[1] = 0;
        *param_1 = 0;
        param_1[2] = (-(uint)(uVar6 != 0) & 0x80000000) + 0x7fff8000;
        return;
    }
    if (uVar4 < 0x3fc0)
    {
        param_1[2] = 0;
        param_1[1] = 0;
        *param_1 = 0;
        return;
    }
    if (((uVar1 == 0) && (uVar4 = uVar4 + 1, (param_1[2] & 0x7fffffffU) == 0))
        && ((param_1[1] == 0 && (*param_1 == 0))))
    {
        *(undefined_16 *)((int)param_1 + 10) = 0;
        return;
    }
    if (((uVar3 == 0) && (uVar4 = uVar4 + 1, (param_2[2] & 0x7fffffffU) == 0))
        && ((param_2[1] == 0 && (*param_2 == 0))))
    {
        param_1[2] = 0;
        param_1[1] = 0;
        *param_1 = 0;
        return;
    }
    local_20 = &local_8;
    local_18 = 0;
    iVar5 = 5;
    do
    {
        if (0 < iVar5)
        {
            piVar8 = param_2 + 2;
            puVar7 = (ushort *)(local_18 * 2 + (int)param_1);
            local_10 = iVar5;
            do
            {
                iVar2 =
                    ___addl(*(undefined_32 *)(local_20 + -2), (uint) * (ushort *)piVar8 * (uint)*puVar7, local_20 + -2);
                if (iVar2 != 0)
                {
                    *local_20 = *local_20 + 1;
                }
                puVar7 = puVar7 + 1;
                piVar8 = (int *)((int)piVar8 + -2);
                local_10 = local_10 + -1;
            } while (local_10 != 0);
        }
        local_20 = local_20 + 1;
        local_18 = local_18 + 1;
        iVar5 = iVar5 + -1;
    } while (0 < iVar5);
    uVar4 = uVar4 + 0xc002;
    while ((0 < (short)uVar4 && ((uStack_2 & 0x8000) == 0)))
    {
        ___shl_12(&local_c);
        uVar4 = uVar4 - 1;
    }
    if ((short)uVar4 < 1)
    {
        uVar4 = uVar4 - 1;
        if ((short)uVar4 < 0)
        {
            iVar5 = -(int)(short)uVar4;
            uVar4 = uVar4 + (short)iVar5;
            do
            {
                if ((local_c & 1) != 0)
                {
                    local_14 = local_14 + 1;
                }
                ___shr_12(&local_c);
                iVar5 = iVar5 + -1;
            } while (iVar5 != 0);
        }
        if (local_14 != 0)
        {
            local_c = local_c | 1;
        }
    }
    if ((0x8000 < CONCAT11(uStack_b, local_c))
        || (iVar2 = CONCAT22(local_4, uStack_6), iVar5 = CONCAT22(local_8, uStack_a),
            (CONCAT22(uStack_a, CONCAT11(uStack_b, local_c)) & 0x1ffff) == 0x18000))
    {
        if (CONCAT22(local_8, uStack_a) == -1)
        {
            iVar5 = 0;
            if (CONCAT22(local_4, uStack_6) == -1)
            {
                if (uStack_2 == 0xffff)
                {
                    uStack_2 = 0x8000;
                    uVar4 = uVar4 + 1;
                    iVar2 = 0;
                    iVar5 = 0;
                }
                else
                {
                    uStack_2 = uStack_2 + 1;
                    iVar2 = 0;
                    iVar5 = 0;
                }
            }
            else
            {
                iVar2 = CONCAT22(local_4, uStack_6) + 1;
            }
        }
        else
        {
            iVar5 = CONCAT22(local_8, uStack_a) + 1;
            iVar2 = CONCAT22(local_4, uStack_6);
        }
    }
    local_8 = (short)((uint)iVar5 >> 0x10);
    uStack_a = (undefined_16)iVar5;
    local_4 = (undefined_16)((uint)iVar2 >> 0x10);
    uStack_6 = (undefined_16)iVar2;
    if (0x7ffe < uVar4)
    {
        param_1[1] = 0;
        *param_1 = 0;
        param_1[2] = (-(uint)(uVar6 != 0) & 0x80000000) + 0x7fff8000;
        return;
    }
    *(undefined_16 *)param_1 = uStack_a;
    *(uint *)((int)param_1 + 2) = CONCAT22(uStack_6, local_8);
    *(uint *)((int)param_1 + 6) = CONCAT22(uStack_2, local_4);
    *(ushort *)((int)param_1 + 10) = uVar4 | uVar6;
    return;
}

// WARNING: Could not reconcile some variable overlaps

// static import 004aa650
void ___multtenpow12(undefined_16 *param_1, uint param_2, int param_3)

{
    uint uVar1;
    undefined_8 **ppuVar2;
    undefined_8 **ppuVar3;
    undefined_16 local_c;
    undefined_32 uStack_a;
    undefined_16 uStack_6;
    undefined_8 *local_4;

    ppuVar3 = &PTR_s_November_004d51f0;
    if (param_2 != 0)
    {
        if ((int)param_2 < 0)
        {
            param_2 = -param_2;
            ppuVar3 = (undefined_8 **)0x4d5350;
        }
        if (param_3 == 0)
        {
            *param_1 = 0;
        }
        while (param_2 != 0)
        {
            ppuVar3 = ppuVar3 + 0x15;
            uVar1 = param_2 & 7;
            param_2 = (int)param_2 >> 3;
            if (uVar1 != 0)
            {
                ppuVar2 = ppuVar3 + uVar1 * 3;
                if (0x7fff < *(ushort *)(ppuVar3 + uVar1 * 3))
                {
                    local_c = SUB42(*ppuVar2, 0);
                    uStack_a._0_2_ = (undefined_16)((uint)*ppuVar2 >> 0x10);
                    uStack_a._2_2_ = SUB42(ppuVar2[1], 0);
                    uStack_6 = (undefined_16)((uint)ppuVar2[1] >> 0x10);
                    local_4 = ppuVar2[2];
                    uStack_a = CONCAT22(uStack_a._2_2_, (undefined_16)uStack_a) + -1;
                    ppuVar2 = (undefined_8 **)&local_c;
                }
                ___ld12mul(param_1, ppuVar2);
            }
        }
    }
    return;
}

// static import 004aa6e0
undefined_32 _wcstombs(undefined_32 param_1, undefined_32 param_2, undefined_32 param_3)

{
    undefined_32 uVar1;
    bool bVar2;

    InterlockedIncrement((LONG *)&DAT_00ecd60c);
    bVar2 = DAT_00ecd608 != 0;
    if (bVar2)
    {
        InterlockedDecrement((LONG *)&DAT_00ecd60c);
        __lock(0x13);
    }
    uVar1 = _wcstombs_lk(param_1, param_2, param_3);
    if (!bVar2)
    {
        InterlockedDecrement((LONG *)&DAT_00ecd60c);
        return uVar1;
    }
    __unlock(0x13);
    return uVar1;
}

// static import 004aa760
uint _wcstombs_lk(LPSTR param_1, LPCWSTR param_2, uint param_3)

{
    char cVar1;
    uint uVar2;
    uint uVar3;
    DWORD DVar4;
    int iVar5;
    undefined_32 *puVar6;
    LPCWSTR pWVar7;
    int iVar8;
    int local_4;

    uVar3 = param_3;
    pWVar7 = param_2;
    uVar2 = 0;
    local_4 = 0;
    if ((param_1 != (LPSTR)0x0) && (param_3 == 0))
    {
        return uVar2;
    }
    if (param_1 == (LPSTR)0x0)
    {
        if (DAT_00dfab38 == 0)
        {
            uVar3 = _wcslen(param_2);
            return uVar3;
        }
        iVar5 = WideCharToMultiByte(DAT_00dfab48, 0x220, param_2, -1, (LPSTR)0x0, 0, (LPCSTR)0x0, &local_4);
        if ((iVar5 != 0) && (local_4 == 0))
        {
            return iVar5 - 1;
        }
    }
    else if (DAT_00dfab38 == 0)
    {
        if (param_3 == 0)
        {
            return 0;
        }
        while ((ushort)*pWVar7 < 0x100)
        {
            param_1[uVar2] = *(CHAR *)pWVar7;
            if (*pWVar7 == L'\0')
            {
                return uVar2;
            }
            uVar2 = uVar2 + 1;
            pWVar7 = pWVar7 + 1;
            if (param_3 <= uVar2)
            {
                return uVar2;
            }
        }
    }
    else if (DAT_004d1f9c == 1)
    {
        if (param_3 != 0)
        {
            uVar3 = _wcsncnt(param_2, param_3);
        }
        uVar3 = WideCharToMultiByte(DAT_00dfab48, 0x220, pWVar7, uVar3, param_1, uVar3, (LPCSTR)0x0, &local_4);
        if ((uVar3 != 0) && (local_4 == 0))
        {
            if (param_1[uVar3 - 1] != '\0')
            {
                return uVar3;
            }
            return uVar3 - 1;
        }
    }
    else
    {
        uVar2 = WideCharToMultiByte(DAT_00dfab48, 0x220, param_2, -1, param_1, param_3, (LPCSTR)0x0, &local_4);
        if (uVar2 == 0)
        {
            if ((local_4 == 0) && (DVar4 = GetLastError(), DVar4 == 0x7a))
            {
                if (uVar3 != 0)
                {
                    do
                    {
                        iVar5 = WideCharToMultiByte(DAT_00dfab48, 0, pWVar7, 1, (LPSTR)&param_2, DAT_004d1f9c,
                                                    (LPCSTR)0x0, &local_4);
                        if ((iVar5 == 0) || (local_4 != 0))
                            goto LAB_004aa936;
                        if (uVar3 < iVar5 + uVar2)
                        {
                            return uVar2;
                        }
                        iVar8 = 0;
                        if (0 < iVar5)
                        {
                            do
                            {
                                cVar1 = *(char *)((int)&param_2 + iVar8);
                                param_1[uVar2] = cVar1;
                                if (cVar1 == '\0')
                                {
                                    return uVar2;
                                }
                                iVar8 = iVar8 + 1;
                                uVar2 = uVar2 + 1;
                            } while (iVar8 < iVar5);
                        }
                        pWVar7 = pWVar7 + 1;
                    } while (uVar2 < uVar3);
                }
                return uVar2;
            }
        }
        else if (local_4 == 0)
        {
            return uVar2 - 1;
        }
    }
LAB_004aa936:
    puVar6 = (undefined_32 *)__errno();
    *puVar6 = 0x2a;
    return -1;
}

// static import 004aa950
int _wcsncnt(short *param_1, int param_2)

{
    short *psVar1;
    int iVar2;

    psVar1 = param_1;
    iVar2 = param_2;
    if (param_2 != 0)
    {
        do
        {
            if (*psVar1 == 0)
                break;
            psVar1 = psVar1 + 1;
            iVar2 = iVar2 + -1;
        } while (iVar2 != 0);
        if ((iVar2 != 0) && (*psVar1 == 0))
        {
            return ((int)psVar1 - (int)param_1 >> 1) + 1;
        }
    }
    return param_2;
}

// static import 004aa990
char *__getenv_lk(char *param_1)

{
    char cVar1;
    int iVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;
    char *pcVar6;
    char **ppcVar7;
    char *pcVar8;

    if (((DAT_00dfaa94 != NULL)
         || (((DAT_00dfaa9c == 0 || (iVar2 = ___wtomb_environ(), iVar2 == 0)) && (DAT_00dfaa94 != NULL))))
        && (param_1 != NULL))
    {
        uVar3 = -1;
        pcVar6 = *DAT_00dfaa94;
        pcVar8 = param_1;
        do
        {
            if (uVar3 == 0)
                break;
            uVar3 = uVar3 - 1;
            cVar1 = *pcVar8;
            pcVar8 = pcVar8 + 1;
        } while (cVar1 != '\0');
        uVar4 = ~uVar3 - 1;
        ppcVar7 = DAT_00dfaa94;
        if (pcVar6 != NULL)
        {
            do
            {
                uVar5 = -1;
                pcVar8 = pcVar6;
                do
                {
                    if (uVar5 == 0)
                        break;
                    uVar5 = uVar5 - 1;
                    cVar1 = *pcVar8;
                    pcVar8 = pcVar8 + 1;
                } while (cVar1 != '\0');
                if (((uVar4 < ~uVar5 - 1) && (pcVar6[uVar4] == '='))
                    && (iVar2 = __mbsnbicoll(pcVar6, param_1, uVar4), iVar2 == 0))
                {
                    return *ppcVar7 + ~uVar3;
                }
                pcVar6 = ppcVar7[1];
                ppcVar7 = ppcVar7 + 1;
                if (pcVar6 == NULL)
                {
                    return NULL;
                }
            } while (true);
        }
    }
    return NULL;
}

// static import 004aaa20
uint __flswbuf(uint param_1, int *param_2)

{
    uint uVar1;
    int iVar2;
    int *piVar3;
    int iVar4;
    undefined_8 *puVar5;
    uint uVar6;

    piVar3 = param_2;
    uVar6 = param_2[3];
    uVar1 = param_2[4];
    if (((uVar6 & 0x82) == 0) || ((uVar6 & 0x40) != 0))
    {
    LAB_004aab58:
        param_2[3] = uVar6 | 0x20;
        return 0xffff;
    }
    if ((uVar6 & 1) != 0)
    {
        param_2[1] = 0;
        if ((uVar6 & 0x10) == 0)
            goto LAB_004aab58;
        *param_2 = param_2[2];
        param_2[3] = uVar6 & 0xfffffffe;
    }
    uVar6 = param_2[3];
    param_2[1] = 0;
    param_2 = NULL;
    piVar3[3] = uVar6 & 0xffffffef | 2;
    if ((uVar6 & 0x10c) == 0)
    {
        if ((piVar3 == (int *)&DAT_004d4618) || (piVar3 == (int *)&DAT_004d4638))
        {
            iVar4 = __isatty(uVar1);
            if (iVar4 != 0)
                goto LAB_004aaa97;
        }
        __getbuf(piVar3);
    }
LAB_004aaa97:
    uVar6 = param_1;
    if ((piVar3[3] & 0x108U) == 0)
    {
        iVar4 = 2;
        param_2 = (int *)__write(uVar1, &param_1, 2);
    }
    else
    {
        iVar2 = piVar3[2];
        iVar4 = *piVar3 - iVar2;
        *piVar3 = iVar2 + 2;
        piVar3[1] = piVar3[6] + -2;
        if (iVar4 < 1)
        {
            if (uVar1 == -1)
            {
                puVar5 = &DAT_004d43a0;
            }
            else
            {
                puVar5 = (undefined_8 *)((&DAT_00ecd500)[(int)uVar1 >> 5] + (uVar1 & 0x1f) * 0x24);
            }
            if ((puVar5[4] & 0x20) != 0)
            {
                __lseek(uVar1, 0, 2);
            }
            *(short *)piVar3[2] = (short)param_1;
            uVar6 = param_1;
        }
        else
        {
            param_2 = (int *)__write(uVar1, iVar2, iVar4);
            *(short *)piVar3[2] = (short)param_1;
            uVar6 = param_1;
        }
    }
    if (param_2 != (int *)iVar4)
    {
        piVar3[3] = piVar3[3] | 0x20;
        return 0xffff;
    }
    return uVar6 & 0xffff;
}

// static import 004aab70
int ___crtGetLocaleInfoW(LCID param_1, LCTYPE param_2, LPWSTR param_3, int param_4, UINT param_5)

{
    int iVar1;
    LPSTR lpLCData;

    if (DAT_00dfb014 == 0)
    {
        iVar1 = GetLocaleInfoW(0, 1, (LPWSTR)0x0, 0);
        if (iVar1 == 0)
        {
            iVar1 = GetLocaleInfoA(0, 1, (LPSTR)0x0, 0);
            if (iVar1 == 0)
            {
                return 0;
            }
            DAT_00dfb014 = 2;
        }
        else
        {
            DAT_00dfb014 = 1;
        }
    }
    if (DAT_00dfb014 == 1)
    {
        iVar1 = GetLocaleInfoW(param_1, param_2, param_3, param_4);
        return iVar1;
    }
    if (DAT_00dfb014 != 2)
    {
        return DAT_00dfb014;
    }
    if (param_5 == 0)
    {
        param_5 = DAT_00dfab48;
    }
    iVar1 = GetLocaleInfoA(param_1, param_2, (LPSTR)0x0, 0);
    if (iVar1 != 0)
    {
        lpLCData = (LPSTR)_malloc(iVar1);
        if (lpLCData == (LPSTR)0x0)
        {
            return 0;
        }
        iVar1 = GetLocaleInfoA(param_1, param_2, lpLCData, iVar1);
        if (iVar1 != 0)
        {
            if (param_4 == 0)
            {
                iVar1 = MultiByteToWideChar(param_5, 1, lpLCData, -1, (LPWSTR)0x0, 0);
                if (iVar1 != 0)
                {
                    _free(lpLCData);
                    return iVar1;
                }
            }
            else
            {
                iVar1 = MultiByteToWideChar(param_5, 1, lpLCData, -1, param_3, param_4);
                if (iVar1 != 0)
                {
                    _free(lpLCData);
                    return iVar1;
                }
            }
        }
        _free(lpLCData);
        return 0;
    }
    return 0;
}

int FUN_004aaca0(LCID param_1, LCTYPE param_2, LPSTR param_3, int param_4, UINT param_5)

{
    int iVar1;
    LPWSTR lpLCData;

    if (DAT_00dfb018 == 0)
    {
        iVar1 = GetLocaleInfoW(0, 1, (LPWSTR)0x0, 0);
        if (iVar1 == 0)
        {
            iVar1 = GetLocaleInfoA(0, 1, (LPSTR)0x0, 0);
            if (iVar1 == 0)
            {
                return 0;
            }
            DAT_00dfb018 = 2;
        }
        else
        {
            DAT_00dfb018 = 1;
        }
    }
    if (DAT_00dfb018 == 2)
    {
        iVar1 = GetLocaleInfoA(param_1, param_2, param_3, param_4);
        return iVar1;
    }
    if (DAT_00dfb018 != 1)
    {
        return DAT_00dfb018;
    }
    if (param_5 == 0)
    {
        param_5 = DAT_00dfab48;
    }
    iVar1 = GetLocaleInfoW(param_1, param_2, (LPWSTR)0x0, 0);
    if (iVar1 != 0)
    {
        lpLCData = (LPWSTR)_malloc(iVar1 * 2);
        if (lpLCData == (LPWSTR)0x0)
        {
            return 0;
        }
        iVar1 = GetLocaleInfoW(param_1, param_2, lpLCData, iVar1);
        if (iVar1 != 0)
        {
            if (param_4 == 0)
            {
                iVar1 = WideCharToMultiByte(param_5, 0x220, lpLCData, -1, (LPSTR)0x0, 0, (LPCSTR)0x0, (LPBOOL)0x0);
                if (iVar1 != 0)
                {
                    _free(lpLCData);
                    return iVar1;
                }
            }
            else
            {
                iVar1 = WideCharToMultiByte(param_5, 0x220, lpLCData, -1, param_3, param_4, (LPCSTR)0x0, (LPBOOL)0x0);
                if (iVar1 != 0)
                {
                    _free(lpLCData);
                    return iVar1;
                }
            }
        }
        _free(lpLCData);
        return 0;
    }
    return 0;
}

// static import 004aade0
int __mbsnbicoll(undefined_32 param_1, undefined_32 param_2, int param_3)

{
    int iVar1;

    if (param_3 == 0)
    {
        return param_3;
    }
    iVar1 = ___crtCompareStringA(DAT_00dfae94, 1, param_1, param_3, param_2, param_3, DAT_00dfae90);
    if (iVar1 == 0)
    {
        return 0x7fffffff;
    }
    return iVar1 + -2;
}

// static import 004aae20
LPCWSTR ___wtomb_environ(void)

{
    LPCWSTR lpWideCharStr;
    int iVar1;
    LPSTR lpMultiByteStr;
    LPCWSTR *ppWVar2;

    lpWideCharStr = *DAT_00dfaa9c;
    ppWVar2 = DAT_00dfaa9c;
    if (lpWideCharStr == (LPCWSTR)0x0)
    {
        return (LPCWSTR)0x0;
    }
    while (((iVar1 = WideCharToMultiByte(1, 0, lpWideCharStr, -1, (LPSTR)0x0, 0, (LPCSTR)0x0, (LPBOOL)0x0),
             iVar1 != 0 && (lpMultiByteStr = (LPSTR)_malloc(iVar1), lpMultiByteStr != (LPSTR)0x0))
            && (iVar1 = WideCharToMultiByte(1, 0, *ppWVar2, -1, lpMultiByteStr, iVar1, (LPCSTR)0x0, (LPBOOL)0x0),
                iVar1 != 0)))
    {
        ___crtsetenv(lpMultiByteStr, 0);
        lpWideCharStr = ppWVar2[1];
        ppWVar2 = ppWVar2 + 1;
        if (lpWideCharStr == (LPCWSTR)0x0)
        {
            return lpWideCharStr;
        }
    }
    return (LPCWSTR)-1;
}

// static import 004aaea0
int ___crtCompareStringA(LCID param_1, DWORD param_2, byte *param_3, LPWSTR param_4, byte *param_5, int param_6,
                         UINT param_7)

{
    int iVar1;
    BOOL BVar2;
    BYTE *pBVar3;
    int cchWideChar;
    PCNZWCH lpWideCharStr;
    int iVar4;
    int local_18;
    _cpinfo local_14;

    if (DAT_00dfb020 == 0)
    {
        iVar1 = CompareStringW(0, 0, L"", 1, L"", 1);
        if (iVar1 == 0)
        {
            iVar1 = CompareStringA(0, 0, "", 1, "", 1);
            if (iVar1 == 0)
            {
                return 0;
            }
            DAT_00dfb020 = 2;
        }
        else
        {
            DAT_00dfb020 = 1;
        }
    }
    iVar1 = (int)param_4;
    if (0 < (int)param_4)
    {
        iVar1 = _strncnt(param_3, param_4);
    }
    if (0 < param_6)
    {
        param_6 = _strncnt(param_5, param_6);
    }
    if (DAT_00dfb020 == 2)
    {
        iVar1 = CompareStringA(param_1, param_2, (PCNZCH)param_3, iVar1, (PCNZCH)param_5, param_6);
        return iVar1;
    }
    local_18 = DAT_00dfb020;
    if (DAT_00dfb020 == 1)
    {
        local_18 = 0;
        param_4 = (LPWSTR)0x0;
        if (param_7 == 0)
        {
            param_7 = DAT_00dfab48;
        }
        if ((iVar1 == 0) || (param_6 == 0))
        {
            if (iVar1 == param_6)
            {
                return 2;
            }
            if (1 < param_6)
            {
                return 1;
            }
            if (1 < iVar1)
            {
                return 3;
            }
            BVar2 = GetCPInfo(param_7, &local_14);
            if (BVar2 == 0)
            {
                return 0;
            }
            if (0 < iVar1)
            {
                if (local_14.MaxCharSize < 2)
                {
                    return 3;
                }
                pBVar3 = local_14.LeadByte;
                while (true)
                {
                    if ((local_14.LeadByte[0] == 0) || (pBVar3[1] == 0))
                    {
                        return 3;
                    }
                    if ((*pBVar3 <= *param_3) && (*param_3 <= pBVar3[1]))
                        break;
                    local_14.LeadByte[0] = pBVar3[2];
                    pBVar3 = pBVar3 + 2;
                }
                return 2;
            }
            if (0 < param_6)
            {
                if (local_14.MaxCharSize < 2)
                {
                    return 1;
                }
                pBVar3 = local_14.LeadByte;
                while (true)
                {
                    if ((local_14.LeadByte[0] == 0) || (pBVar3[1] == 0))
                    {
                        return 1;
                    }
                    if ((*pBVar3 <= *param_5) && (*param_5 <= pBVar3[1]))
                        break;
                    local_14.LeadByte[0] = pBVar3[2];
                    pBVar3 = pBVar3 + 2;
                }
                return 2;
            }
        }
        cchWideChar = MultiByteToWideChar(param_7, 9, (LPCSTR)param_3, iVar1, (LPWSTR)0x0, 0);
        if (cchWideChar == 0)
        {
            return 0;
        }
        lpWideCharStr = (PCNZWCH)_malloc(cchWideChar * 2);
        if (lpWideCharStr == (PCNZWCH)0x0)
        {
            return 0;
        }
        iVar1 = MultiByteToWideChar(param_7, 1, (LPCSTR)param_3, iVar1, lpWideCharStr, cchWideChar);
        if ((((iVar1 != 0)
              && (iVar1 = MultiByteToWideChar(param_7, 9, (LPCSTR)param_5, param_6, (LPWSTR)0x0, 0), iVar1 != 0))
             && (param_4 = (LPWSTR)_malloc(iVar1 * 2), param_4 != (LPWSTR)0x0))
            && (iVar4 = MultiByteToWideChar(param_7, 1, (LPCSTR)param_5, param_6, param_4, iVar1), iVar4 != 0))
        {
            local_18 = CompareStringW(param_1, param_2, lpWideCharStr, cchWideChar, param_4, iVar1);
        }
        _free(lpWideCharStr);
        _free(param_4);
    }
    return local_18;
}

// static import 004ab170
int _strncnt(char *param_1, int param_2)

{
    char *pcVar1;
    int iVar2;

    pcVar1 = param_1;
    iVar2 = param_2;
    if (param_2 != 0)
    {
        do
        {
            iVar2 = iVar2 + -1;
            if (*pcVar1 == '\0')
                break;
            pcVar1 = pcVar1 + 1;
        } while (iVar2 != 0);
    }
    if (*pcVar1 == '\0')
    {
        return (int)pcVar1 - (int)param_1;
    }
    return param_2;
}

// static import 004ab1a0
undefined_32 ___crtsetenv(char *param_1, int param_2)

{
    char cVar1;
    int iVar2;
    int *piVar3;
    char *pcVar4;
    int iVar5;
    int iVar6;
    int *piVar7;
    undefined_32 *lpName;
    uint uVar8;
    uint uVar9;
    undefined_32 *puVar10;
    undefined_32 *puVar11;
    bool bVar12;

    if (param_1 == NULL)
    {
        return -1;
    }
    pcVar4 = (char *)__mbschr(param_1, 0x3d);
    if (pcVar4 == NULL)
    {
        return -1;
    }
    if (param_1 == pcVar4)
    {
        return -1;
    }
    bVar12 = pcVar4[1] == '\0';
    if (DAT_00dfaa94 == DAT_00dfaa98)
    {
        DAT_00dfaa94 = (int *)_copy_environ(DAT_00dfaa94);
    }
    if (DAT_00dfaa94 == NULL)
    {
        if ((param_2 == 0) || (DAT_00dfaa9c == NULL))
        {
            if (bVar12)
            {
                return 0;
            }
            DAT_00dfaa94 = (int *)_malloc(4);
            if (DAT_00dfaa94 == NULL)
            {
                return -1;
            }
            *DAT_00dfaa94 = 0;
            if (DAT_00dfaa9c == NULL)
            {
                DAT_00dfaa9c = (undefined_32 *)_malloc(4);
                if (DAT_00dfaa9c == NULL)
                {
                    return -1;
                }
                *DAT_00dfaa9c = 0;
            }
        }
        else
        {
            iVar5 = ___wtomb_environ();
            if (iVar5 != 0)
            {
                return -1;
            }
        }
    }
    piVar7 = DAT_00dfaa94;
    iVar6 = (int)pcVar4 - (int)param_1;
    iVar5 = _findenv(param_1, iVar6);
    if ((iVar5 < 0) || (*piVar7 == 0))
    {
        if (bVar12)
        {
            return 0;
        }
        if (iVar5 < 0)
        {
            iVar5 = -iVar5;
        }
        piVar7 = (int *)_realloc(piVar7, iVar5 * 4 + 8);
        if (piVar7 == NULL)
        {
            return -1;
        }
        piVar7[iVar5] = (int)param_1;
        piVar7[iVar5 + 1] = 0;
        DAT_00dfaa94 = piVar7;
    }
    else if (bVar12)
    {
        _free(piVar7[iVar5]);
        iVar2 = piVar7[iVar5];
        piVar3 = piVar7 + iVar5;
        while (iVar2 != 0)
        {
            *piVar3 = piVar3[1];
            iVar5 = iVar5 + 1;
            iVar2 = piVar3[1];
            piVar3 = piVar3 + 1;
        }
        piVar7 = (int *)_realloc(piVar7, iVar5 * 4);
        if (piVar7 != NULL)
        {
            DAT_00dfaa94 = piVar7;
        }
    }
    else
    {
        piVar7[iVar5] = (int)param_1;
    }
    if (param_2 != 0)
    {
        uVar8 = -1;
        pcVar4 = param_1;
        do
        {
            if (uVar8 == 0)
                break;
            uVar8 = uVar8 - 1;
            cVar1 = *pcVar4;
            pcVar4 = pcVar4 + 1;
        } while (cVar1 != '\0');
        lpName = (undefined_32 *)_malloc(~uVar8 + 1);
        if (lpName != NULL)
        {
            uVar8 = -1;
            do
            {
                pcVar4 = param_1;
                if (uVar8 == 0)
                    break;
                uVar8 = uVar8 - 1;
                pcVar4 = param_1 + 1;
                cVar1 = *param_1;
                param_1 = pcVar4;
            } while (cVar1 != '\0');
            uVar8 = ~uVar8;
            puVar10 = (undefined_32 *)(pcVar4 + -uVar8);
            puVar11 = lpName;
            QMEMCPY(uVar9, puVar10, puVar11, uVar8 >> 2)
            for (uVar8 = uVar8 & 3; uVar8 != 0; uVar8 = uVar8 - 1)
            {
                *(undefined_8 *)puVar11 = *(undefined_8 *)puVar10;
                puVar10 = (undefined_32 *)((int)puVar10 + 1);
                puVar11 = (undefined_32 *)((int)puVar11 + 1);
            }
            *(undefined_8 *)((int)lpName + iVar6) = 0;
            SetEnvironmentVariableA((LPCSTR)lpName, (LPCSTR)(~-(uint)bVar12 & (int)lpName + iVar6 + 1));
            _free(lpName);
            return 0;
        }
    }
    return 0;
}

// static import 004ab3b0
int _findenv(undefined_32 param_1, int param_2)

{
    int iVar1;
    int *piVar2;

    iVar1 = *DAT_00dfaa94;
    piVar2 = DAT_00dfaa94;
    if (iVar1 == 0)
    {
        return 0;
    }
    while ((iVar1 = __mbsnbicoll(param_1, iVar1, param_2),
            iVar1 != 0 || ((*(char *)(*piVar2 + param_2) != '=' && (*(char *)(*piVar2 + param_2) != '\0')))))
    {
        iVar1 = piVar2[1];
        piVar2 = piVar2 + 1;
        if (iVar1 == 0)
        {
            return -((int)piVar2 - (int)DAT_00dfaa94 >> 2);
        }
    }
    return (int)piVar2 - (int)DAT_00dfaa94 >> 2;
}

// static import 004ab430
undefined_32 *_copy_environ(int *param_1)

{
    int iVar1;
    int *piVar2;
    undefined_32 *puVar3;
    undefined_32 uVar4;
    int iVar5;
    undefined_32 *puVar6;

    iVar5 = 0;
    if (param_1 != NULL)
    {
        iVar1 = *param_1;
        piVar2 = param_1;
        while (iVar1 != 0)
        {
            piVar2 = piVar2 + 1;
            iVar5 = iVar5 + 1;
            iVar1 = *piVar2;
        }
        puVar3 = (undefined_32 *)_malloc(iVar5 * 4 + 4);
        if (puVar3 == NULL)
        {
            __amsg_exit(9);
        }
        iVar5 = *param_1;
        puVar6 = puVar3;
        while (iVar5 != 0)
        {
            param_1 = param_1 + 1;
            uVar4 = __strdup(iVar5);
            *puVar6 = uVar4;
            puVar6 = puVar6 + 1;
            iVar5 = *param_1;
        }
        *puVar6 = 0;
        return puVar3;
    }
    return NULL;
}

// static import 004ab4a0
byte *__mbschr(byte *param_1, uint param_2)

{
    byte bVar1;
    uint uVar2;
    byte *pbVar3;

    if (DAT_00dfae90 == 0)
    {
        pbVar3 = (byte *)strchr(param_1, param_2);
        return pbVar3;
    }
    __lock(0x19);
    bVar1 = *param_1;
    while (uVar2 = (uint)bVar1, bVar1 != 0)
    {
        if ((*(byte *)((int)&DAT_00dfac88 + uVar2 + 1) & 4) == 0)
        {
            pbVar3 = param_1;
            if (param_2 == uVar2)
                break;
        }
        else
        {
            pbVar3 = param_1 + 1;
            if (param_1[1] == 0)
            {
                __unlock(0x19);
                return NULL;
            }
            if (param_2 == CONCAT11(bVar1, param_1[1]))
            {
                __unlock(0x19);
                return param_1;
            }
        }
        param_1 = pbVar3 + 1;
        bVar1 = pbVar3[1];
    }
    __unlock(0x19);
    return (byte *)((param_2 != uVar2) - 1 & (uint)param_1);
}

// static import 004ab570
undefined_32 *__strdup(char *param_1)

{
    char cVar1;
    undefined_32 *puVar2;
    uint uVar3;
    uint uVar4;
    undefined_32 *puVar5;
    char *pcVar6;
    undefined_32 *puVar7;

    if (param_1 != NULL)
    {
        uVar3 = -1;
        pcVar6 = param_1;
        do
        {
            if (uVar3 == 0)
                break;
            uVar3 = uVar3 - 1;
            cVar1 = *pcVar6;
            pcVar6 = pcVar6 + 1;
        } while (cVar1 != '\0');
        puVar2 = (undefined_32 *)_malloc(~uVar3);
        if (puVar2 != NULL)
        {
            uVar3 = -1;
            do
            {
                pcVar6 = param_1;
                if (uVar3 == 0)
                    break;
                uVar3 = uVar3 - 1;
                pcVar6 = param_1 + 1;
                cVar1 = *param_1;
                param_1 = pcVar6;
            } while (cVar1 != '\0');
            uVar3 = ~uVar3;
            puVar5 = (undefined_32 *)(pcVar6 + -uVar3);
            puVar7 = puVar2;
            QMEMCPY(uVar4, puVar5, puVar7, uVar3 >> 2)
            for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
            {
                *(undefined_8 *)puVar7 = *(undefined_8 *)puVar5;
                puVar5 = (undefined_32 *)((int)puVar5 + 1);
                puVar7 = (undefined_32 *)((int)puVar7 + 1);
            }
            return puVar2;
        }
    }
    return NULL;
}

void RtlUnwind(PVOID TargetFrame, PVOID TargetIp, PEXCEPTION_RECORD ExceptionRecord, PVOID ReturnValue)

{
    // WARNING: Could not recover jumptable at 0x004ab5c0. Too many branches
    // WARNING: Treating indirect jump as call
    RtlUnwind(TargetFrame, TargetIp, ExceptionRecord, ReturnValue);
    return;
}

undefined_32 *FUN_004ab5d0(undefined_32 *param_1)

{
    char cVar1;
    undefined_32 *puVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    char *pcVar6;
    char *pcVar7;
    char *pcVar8;
    undefined_32 *puVar9;
    bool bVar10;

    pcVar6 = NULL;
    if (DAT_00dfab38 == 0)
    {
        puVar2 = param_1;
        if (*(char *)param_1 != '\0')
        {
            do
            {
                cVar1 = *(char *)param_1;
                if (('`' < cVar1) && (cVar1 < '{'))
                {
                    *(char *)param_1 = cVar1 + -0x20;
                }
                pcVar6 = (char *)((int)param_1 + 1);
                param_1 = (undefined_32 *)((int)param_1 + 1);
            } while (*pcVar6 != '\0');
            return puVar2;
        }
    }
    else
    {
        InterlockedIncrement((LONG *)&DAT_00ecd60c);
        bVar10 = DAT_00ecd608 != 0;
        if (bVar10)
        {
            InterlockedDecrement((LONG *)&DAT_00ecd60c);
            __lock(0x13);
        }
        if (DAT_00dfab38 == 0)
        {
            if (bVar10)
            {
                __unlock(0x13);
            }
            else
            {
                InterlockedDecrement((LONG *)&DAT_00ecd60c);
            }
            puVar2 = param_1;
            if (*(char *)param_1 != '\0')
            {
                do
                {
                    cVar1 = *(char *)param_1;
                    if (('`' < cVar1) && (cVar1 < '{'))
                    {
                        *(char *)param_1 = cVar1 + -0x20;
                    }
                    pcVar6 = (char *)((int)param_1 + 1);
                    param_1 = (undefined_32 *)((int)param_1 + 1);
                } while (*pcVar6 != '\0');
                return puVar2;
            }
        }
        else
        {
            iVar3 = FUN_004a29a0(DAT_00dfab38, 0x200, param_1, -1, 0, 0, 0, 1);
            if (((iVar3 != 0) && (pcVar6 = (char *)_malloc(iVar3), pcVar6 != NULL))
                && (iVar3 = FUN_004a29a0(DAT_00dfab38, 0x200, param_1, -1, pcVar6, iVar3, 0, 1), iVar3 != 0))
            {
                uVar4 = -1;
                pcVar7 = pcVar6;
                do
                {
                    pcVar8 = pcVar7;
                    if (uVar4 == 0)
                        break;
                    uVar4 = uVar4 - 1;
                    pcVar8 = pcVar7 + 1;
                    cVar1 = *pcVar7;
                    pcVar7 = pcVar8;
                } while (cVar1 != '\0');
                uVar4 = ~uVar4;
                puVar2 = (undefined_32 *)(pcVar8 + -uVar4);
                puVar9 = param_1;
                QMEMCPY(uVar5, puVar2, puVar9, uVar4 >> 2)
                for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1)
                {
                    *(undefined_8 *)puVar9 = *(undefined_8 *)puVar2;
                    puVar2 = (undefined_32 *)((int)puVar2 + 1);
                    puVar9 = (undefined_32 *)((int)puVar9 + 1);
                }
            }
            if (bVar10)
            {
                __unlock(0x13);
                _free(pcVar6);
                return param_1;
            }
            InterlockedDecrement((LONG *)&DAT_00ecd60c);
            _free(pcVar6);
        }
    }
    return param_1;
}
